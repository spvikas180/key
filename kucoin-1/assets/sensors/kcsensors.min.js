!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).$KcSensors=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t={exports:{}};!function(e,t){!function(){function t(e,t,r){if(null==e)return!1;if(Ee&&e.forEach===Ee)e.forEach(t,r);else if(Je(e)&&e.length===+e.length){for(var n=0,i=e.length;n<i;n++)if(n in e&&t.call(r,e[n],n,e)===Ue)return!1}else for(var a in e)if(He.call(e,a)&&t.call(r,e[a],a,e)===Ue)return!1}function r(e,r){var n=[];return null==e?n:Array.prototype.map&&e.map===Array.prototype.map?e.map(r):(t(e,(function(e,t,i){n.push(r(e,t,i))})),n)}function n(e){return t(Ie.call(arguments,1),(function(t){for(var r in t)He.call(t,r)&&void 0!==t[r]&&(e[r]=t[r])})),e}function i(e){return t(Ie.call(arguments,1),(function(t){for(var r in t)void 0!==t[r]&&void 0===e[r]&&(e[r]=t[r])})),e}function a(e){if(!e)return!1;var t=Re.call(e);return"[object Function]"==t||"[object AsyncFunction]"==t}function s(e){return!(!e||!He.call(e,"callee"))}function c(e){var r=[];return null==e||t(e,(function(e){r[r.length]=e})),r}function u(e,t){var r=e.indexOf;if(r)return r.call(e,t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}function l(e,t,r){var n=Object.prototype.hasOwnProperty;if(e.filter)return e.filter(t);for(var i=[],a=0;a<e.length;a++)if(n.call(e,a)){var s=e[a];t.call(r,s,a,e)&&i.push(s)}return i}function p(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function d(e){return null!=e&&"[object Object]"==Re.call(e)}function f(e){if(d(e)){for(var t in e)if(He.call(e,t))return!1;return!0}return!1}function _(e){return void 0===e}function h(e){return"[object String]"==Re.call(e)}function g(e){return"[object Date]"==Re.call(e)}function v(e){return"[object Boolean]"==Re.call(e)}function y(e){return"[object Number]"==Re.call(e)&&/[\d\.]+/.test(String(e))}function w(e){return!(!e||1!==e.nodeType)}function b(e){try{JSON.parse(e)}catch(e){return!1}return!0}function S(e){var t=null;try{t=JSON.parse(e)}catch(e){return!1}return t}function k(e){if("string"!=typeof e)return 0;var t=0;if(0==e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}function P(){if("function"==typeof Uint32Array){var e="";if("undefined"!=typeof crypto?e=crypto:"undefined"!=typeof msCrypto&&(e=msCrypto),d(e)&&e.getRandomValues){var t=new Uint32Array(1);return e.getRandomValues(t)[0]/Math.pow(2,32)}}return Be(1e19)/1e19}function j(e){try{return JSON.stringify(e,null,"  ")}catch(t){return JSON.stringify(e)}}function x(e){for(var t,r=[],n={},i=0;i<e.length;i++)(t=e[i])in n||(n[t]=!0,r.push(t));return r}function A(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))}function O(e){var t=r(atob(e).split(""),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}));return decodeURIComponent(t.join(""))}function D(e,t){t="number"==typeof t?t:13;for(var r=(e=String(e)).split(""),n=0,i=r.length;n<i;n++){r[n].charCodeAt(0)<126&&(r[n]=String.fromCharCode((r[n].charCodeAt(0)+t)%126))}return r.join("")}function C(e){return D(e=String(e),113)}function N(){var e=!0,t="__sensorsdatasupport__",r="testIsSupportStorage";try{sessionStorage&&sessionStorage.setItem?(sessionStorage.setItem(t,r),sessionStorage.removeItem(t,r),e=!0):e=!1}catch(t){e=!1}return e}function $(){if((N()&&"true"===sessionStorage.getItem("sensorsdata_jssdk_debug")||Ke.show_log)&&(!d(arguments[0])||!0!==Ke.show_log&&"string"!==Ke.show_log&&!1!==Ke.show_log||(arguments[0]=j(arguments[0])),"object"==typeof console&&console.log))try{return console.log.apply(console,arguments)}catch(e){console.log(arguments[0])}}function E(e,t){if("string"==typeof t)return I(e,t);if(Je(t)){for(var r=!1,n=0;n<t.length;n++){if(I(e,t[n])){r=!0;break}}return r}}function I(e,t){return e.hasAttribute?e.hasAttribute(t):e.attributes?!(!e.attributes[t]||!e.attributes[t].specified):void 0}function T(e,t){var r="",n="";return e.textContent?r=p(e.textContent):e.innerText&&(r=p(e.innerText)),r&&(r=r.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)),n=r||"","input"!==t&&"INPUT"!==t||("button"===e.type||"submit"===e.type||Ke.heatmap&&"function"==typeof Ke.heatmap.collect_input&&Ke.heatmap.collect_input(e))&&(n=e.value||""),n}function L(e){e=n({success:function(){},error:function(){},appendCall:function(e){document.getElementsByTagName("head")[0].appendChild(e)}},e);var t=null;"css"===e.type&&((t=document.createElement("link")).rel="stylesheet",t.href=e.url),"js"===e.type&&((t=document.createElement("script")).async="async",t.setAttribute("charset","UTF-8"),t.src=e.url,t.type="text/javascript"),t.onload=t.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e.success(),t.onload=t.onreadystatechange=null)},t.onerror=function(){e.error(),t.onerror=null},e.appendCall(t)}function R(e){return new R.init(e)}function H(e){if(!h(e))return null;var t,r=e.split(">");return t=function e(t){var n,i=r.shift();if(!i)return t;try{n=function(e,t){var r;if("body"===(e=p(e)))return document.getElementsByTagName("body")[0];if(0===e.indexOf("#"))e=e.slice(1),r=document.getElementById(e);else if(e.indexOf(":nth-of-type")>-1){var n=e.split(":nth-of-type");if(!n[0]||!n[1])return null;var i=n[0],a=n[1].match(/\(([0-9]+)\)/);if(!a||!a[1])return null;var s=Number(a[1]);if(!(w(t)&&t.children&&t.children.length>0))return null;for(var o=t.children,c=0;c<o.length;c++)if(w(o[c])&&o[c].tagName.toLowerCase()===i&&0==--s){r=o[c];break}if(s>0)return null}return r||null}(i,t)}catch(e){$(e)}return n&&w(n)?e(n):null}(),t&&w(t)?t:null}function U(e){var t=e;try{t=decodeURIComponent(e)}catch(r){t=e}return t}function J(e){var t=e;try{t=decodeURI(e)}catch(r){t=e}return t}function B(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=decodeURIComponent(e);var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===r||r&&"string"!=typeof r[1]&&r[1].length?"":decodeURIComponent(r[1])}function M(e){var t=function(e){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Path:8,URL:0,QueryString:9,Fragment:10},this._values={},this._regex=null,this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,void 0!==e&&this._parse(e)};return t.prototype.setUrl=function(e){this._parse(e)},t.prototype._initValues=function(){for(var e in this._fields)this._values[e]=""},t.prototype.addQueryString=function(e){if("object"!=typeof e)return!1;var t=this._values.QueryString||"";for(var r in e)t=new RegExp(r+"[^&]+").test(t)?t.replace(new RegExp(r+"[^&]+"),r+"="+e[r]):"&"===t.slice(-1)?t+r+"="+e[r]:""===t?r+"="+e[r]:t+"&"+r+"="+e[r];this._values.QueryString=t},t.prototype.getUrl=function(){var e="";return e+=this._values.Origin,e+=this._values.Port?":"+this._values.Port:"",e+=this._values.Path,(e+=this._values.QueryString?"?"+this._values.QueryString:"")+(this._values.Fragment?"#"+this._values.Fragment:"")},t.prototype.getUrl=function(){var e="";return e+=this._values.Origin,e+=this._values.Port?":"+this._values.Port:"",(e+=this._values.Path)+(this._values.QueryString?"?"+this._values.QueryString:"")},t.prototype._parse=function(e){this._initValues();var t=this._regex.exec(e);for(var r in t||$("DPURLParser::_parse -> Invalid URL"),this._fields)void 0!==t[this._fields[r]]&&(this._values[r]=t[this._fields[r]]);this._values.Hostname=this._values.Host.replace(/:\d+$/,""),this._values.Origin=this._values.Protocol+"://"+this._values.Hostname},new t(e)}function K(e){for(var t=function(e){return decodeURIComponent(e)},r={},n=(e=e||"").substring(1).split("&"),i=0;i<n.length;i++){var a=n[i].indexOf("=");if(-1!==a){var s=n[i].substring(0,a),o=n[i].substring(a+1);s=t(s),o=t(o),r[s]=o}}return r}function F(e){var t={};if("function"==typeof window.URL&&function(){try{return"http://modernizr.com/"===new URL("http://modernizr.com/").href}catch(e){return!1}}())(t=new URL(e)).searchParams||(t.searchParams=function(){var e=K(t.search);return{get:function(t){return e[t]}}}());else{!1===/^https?:\/\/.+/.test(e)&&$("Invalid URL");var r=M(e);t.hash="",t.host=r._values.Host?r._values.Host+(r._values.Port?":"+r._values.Port:""):"",t.href=r._values.URL,t.password=r._values.Password,t.pathname=r._values.Path,t.port=r._values.Port,t.search=r._values.QueryString?"?"+r._values.QueryString:"",t.username=r._values.Username,t.hostname=r._values.Hostname,t.protocol=r._values.Protocol?r._values.Protocol+":":"",t.origin=r._values.Origin?r._values.Origin+(r._values.Port?":"+r._values.Port:""):"",t.searchParams=function(){var e=K("?"+r._values.QueryString);return{get:function(t){return e[t]}}}()}return t}function W(e,t){t&&"string"==typeof t||(t="hostname解析异常");var r=null;try{r=F(e).hostname}catch(e){$("getHostname传入的url参数不合法！")}return r||t}function q(e){var t={},r=e.split("?")[1]||"";return r&&(t=K("?"+r)),t}function z(e){return J(h(e)?e:location.href)}function V(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+t(e.getMilliseconds())}function X(e){d(e)&&t(e,(function(t,r){d(t)?X(e[r]):g(t)&&(e[r]=V(t))}))}function Z(e){void 0!==e.properties.$project&&(e.project=e.properties.$project,delete e.properties.$project),void 0!==e.properties.$token&&(e.token=e.properties.$token,delete e.properties.$token)}function G(e,t){return y(t)&&e.length>t?($("字符串长度超过限制，已经做截取--"+e),e.slice(0,t)):e}function Q(e){var r=["$element_selector","$element_path"],n=["sensorsdata_app_visual_properties"];d(e)&&t(e,(function(t,i){if(d(t))Q(e[i]);else if(h(t)){if(u(n,i)>-1)return;e[i]=G(t,u(r,i)>-1?1024:Ke.max_string_length)}}))}function Y(e){return d(e)?(t(e,(function(r,n){if(Je(r)){var i=[];t(r,(function(e){h(e)?i.push(e):$("您的数据-",n,r,"的数组里的值必须是字符串,已经将其删除")})),e[n]=i}h(r)||y(r)||g(r)||v(r)||Je(r)||a(r)||"$option"===n||($("您的数据-",n,r,"-格式不满足要求，我们已经将其删除"),delete e[n])})),e):e}function ee(e){var r=e.properties,n=JSON.parse(JSON.stringify(e));d(r)&&(t(r,(function(e,t){if(a(e))try{r[t]=e(n),a(r[t])&&($("您的属性- "+t+" 格式不满足要求，我们已经将其删除"),delete r[t])}catch(e){delete r[t],$("您的属性- "+t+" 抛出了异常，我们已经将其删除")}})),Y(r))}function te(e){d(e)&&t(["distinct_id","user_id","id","date","datetime","event","events","first_id","original_id","device_id","properties","second_id","time","users"],(function(t,r){t in e&&(r<3?(delete e[t],$("您的属性- "+t+"是保留字段，我们已经将其删除")):$("您的属性- "+t+"是保留字段，请避免其作为属性名"))}))}function re(e){if("object"==typeof e&&e.$option){var t=e.$option;return delete e.$option,t}return{}}function ne(e){var r={};return t(e,(function(e,t){null!=e&&(r[t]=e)})),r}function ie(e){var t=Ke.current_domain;switch(typeof t){case"function":var r=t();return""===r||""===p(r)?"url解析失败":-1!==r.indexOf(".")?r:"url解析失败";case"string":return""===t||""===p(t)?"url解析失败":-1!==t.indexOf(".")?t:"url解析失败";default:var n=ue();return""===e||""===n?"url解析失败":n}}function ae(e){if(!e.target)return!1;var t=e.target,r=t.tagName.toLowerCase(),n={};return n.$element_type=r,n.$element_name=t.getAttribute("name"),n.$element_id=t.getAttribute("id"),n.$element_class_name="string"==typeof t.className?t.className:null,n.$element_target_url=t.getAttribute("href"),n.$element_content=T(t,r),(n=ne(n)).$url=z(),n.$url_path=location.pathname,n.$title=document.title,n.$viewport_width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,n}function se(){var e=document.referrer,t="baidu.com";if(!e)return!1;try{var r=F(e).hostname;return r&&r.substring(r.length-t.length)===t}catch(e){return!1}}function oe(){var e=q(document.referrer);return f(e)||!e.eqid?Xe().replace(/-/g,""):e.eqid}function ce(){var e=q(document.referrer);return f(e)||!e.eqid?"baidu_sem_keyword_id":"baidu_seo_keyword_id"}function ue(e){var t=function(e){return!!e&&e}(e=e||location.hostname);if(!t)return"";var r=t.split(".");if(Je(r)&&r.length>=2&&!/^(\d+\.)+\d+$/.test(t))for(var n="."+r.splice(r.length-1,1);r.length>0;)if(n="."+r.splice(r.length-1,1)+n,document.cookie="sensorsdata_domain_test=true; path=/; domain="+n,-1!==document.cookie.indexOf("sensorsdata_domain_test=true")){var i=new Date;return i.setTime(i.getTime()-1e3),document.cookie="sensorsdata_domain_test=true; expires="+i.toGMTString()+"; path=/; domain="+n,n}return""}function le(e){return""===(e=e||document.referrer)||ue(W(e))!==ue()}function pe(e){return"string"!=typeof(e=e||document.referrer)?"取值异常_referrer异常_"+String(e):(0===(e=decodeURI(e)).indexOf("https://www.baidu.com/")&&(e=e.split("?")[0]),"string"==typeof(e=e.slice(0,Ke.max_referrer_string_length))?e:"")}function de(e){var t=W(e);if(!t||"hostname解析异常"===t)return"";var r={baidu:[/^.*\.baidu\.com$/],bing:[/^.*\.bing\.com$/],google:[/^www\.google\.com$/,/^www\.google\.com\.[a-z]{2}$/,/^www\.google\.[a-z]{2}$/],sm:[/^m\.sm\.cn$/],so:[/^.+\.so\.com$/],sogou:[/^.*\.sogou\.com$/],yahoo:[/^.*\.yahoo\.com$/]};for(var n in r)for(var i=r[n],a=0,s=i.length;a<s;a++)if(i[a].test(t))return n;return"未知搜索引擎"}function fe(e,t){e=e||document.referrer;var r=Ke.source_type.keyword;if(document&&"string"==typeof e){if(0===e.indexOf("http")){var n=de(e),i=q(e);if(f(i))return Ke.preset_properties.search_keyword_baidu&&se()?void 0:"未取到值";var a=null;for(var s in r)if(n===s&&"object"==typeof i)if(a=r[s],Je(a))for(s=0;s<a.length;s++){var o=i[a[s]];if(o)return t?{active:o}:o}else if(i[a])return t?{active:i[a]}:i[a];return Ke.preset_properties.search_keyword_baidu&&se()?void 0:"未取到值"}return""===e?"未取到值_直接打开":"未取到值_非http的url"}return"取值异常_referrer异常_"+String(e)}function _e(e){var t=B(e,"gdt_vid"),r=B(e,"hash_key"),n=B(e,"callbacks"),i={click_id:"",hash_key:"",callbacks:""};return h(t)&&t.length&&(i.click_id=16==t.length||18==t.length?t:"参数解析不合法",h(r)&&r.length&&(i.hash_key=r),h(n)&&n.length&&(i.callbacks=n)),i}function he(){function e(e,t){for(var r=0;r<e.length;r++)if(-1!==t.split("?")[0].indexOf(e[r]))return!0}var t="("+Ke.source_type.utm.join("|")+")\\=[^&]+",r=Ke.source_type.search,n=Ke.source_type.social,i=document.referrer||"",a=Ge.pageProp.url;if(a){var s=a.match(new RegExp(t));return s&&s[0]?"付费广告流量":e(r,i)?"自然搜索流量":e(n,i)?"社交网站流量":""===i?"直接流量":"引荐流量"}return"获取url异常"}function ge(){return{items:[],enqueue:function(e){this.items.push(e),this.start()},dequeue:function(){return this.items.shift()},getCurrentItem:function(){return this.items[0]},isRun:!1,start:function(){this.items.length>0&&!this.isRun&&(this.isRun=!0,this.getCurrentItem().start())},close:function(){this.dequeue(),this.isRun=!1,this.start()}}}function ve(){return void 0!==window.matchMedia||void 0!==window.msMatchMedia}function me(){return void 0!==window.XMLHttpRequest&&("withCredentials"in new XMLHttpRequest||"undefined"!=typeof XDomainRequest)}function ye(){var e,t={},r=navigator.userAgent.toLowerCase();return(e=r.match(/opera.([\d.]+)/))?t.opera=Number(e[1].split(".")[0]):(e=r.match(/msie ([\d.]+)/))?t.ie=Number(e[1].split(".")[0]):(e=r.match(/edge.([\d.]+)/))?t.edge=Number(e[1].split(".")[0]):(e=r.match(/firefox\/([\d.]+)/))?t.firefox=Number(e[1].split(".")[0]):(e=r.match(/chrome\/([\d.]+)/))?t.chrome=Number(e[1].split(".")[0]):(e=r.match(/version\/([\d.]+).*safari/))?t.safari=Number(e[1].match(/^\d*.\d*/)):(e=r.match(/trident\/([\d.]+)/))&&(t.ie=11),t}function we(){var e=!1;if("object"!=typeof navigator||"function"!=typeof navigator.sendBeacon)return e;var t=ye(),r=navigator.userAgent.toLowerCase();if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){var n=(r.match(/os [\d._]*/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".").split(".");void 0===t.safari&&(t.safari=n[0]),n[0]&&n[0]<13?(t.chrome>41||t.firefox>30||t.opera>25||t.safari>12)&&(e=!0):(t.chrome>41||t.firefox>30||t.opera>25||t.safari>11.3)&&(e=!0)}else(t.chrome>38||t.edge>13||t.firefox>30||t.opera>25||t.safari>11)&&(e=!0);return e}function be(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation,t._getPath=e._getPath),t}function t(t,r,n,i){return function(a){if(a=a||e(window.event)){a.target=a.srcElement;var s,o,c=!0;return"function"==typeof n&&(s=n(a)),o=r.call(t,a),"beforeunload"!==i?(!1!==s&&!1!==o||(c=!1),c):void 0}}}e._getPath=function(){return this.path||this.composedPath&&this.composedPath()||R(this.target).getParents()},e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0};var r=function(r,n,i){var a=!(!d(Ke.heatmap)||!Ke.heatmap.useCapture);if(d(Ke.heatmap)&&void 0===Ke.heatmap.useCapture&&"click"===n&&(a=!0),r&&r.addEventListener)r.addEventListener(n,(function(t){t._getPath=e._getPath,i.call(this,t)}),a);else{var s="on"+n,o=r[s];r[s]=t(r,i,o,n)}};r.apply(null,arguments)}function Se(e){var t="pushState"in window.history?"popstate":"hashchange";be(window,t,e)}function ke(e){var t,r=location.href,n=window.history.pushState,i=window.history.replaceState;a(window.history.pushState)&&(window.history.pushState=function(){n.apply(window.history,arguments),e(r),r=location.href}),a(window.history.replaceState)&&(window.history.replaceState=function(){i.apply(window.history,arguments),e(r),r=location.href}),t=window.document.documentMode?"hashchange":n?"popstate":"hashchange",be(window,t,(function(){e(r),r=location.href}))}function Pe(e){var t={visibleHandler:a(e.visible)?e.visible:function(){},hiddenHandler:a(e.hidden)?e.hidden:function(){},visibilityChange:null,hidden:null,isSupport:function(){return void 0!==document[this.hidden]},init:function(){void 0!==document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):void 0!==document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),this.listen()},listen:function(){if(this.isSupport()){var e=this;be(document,this.visibilityChange,(function(){document[e.hidden]?e.hiddenHandler():e.visibleHandler()}),1)}else be(window,"focus",this.visibleHandler),be(window,"blur",this.hiddenHandler)}};t.init()}function je(e){if(e)return void 0!==window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?new XMLHttpRequest:"undefined"!=typeof XDomainRequest?new XDomainRequest:null;if(void 0!==window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){$(e)}}}function xe(e){function r(e){if(!e)return"";try{return JSON.parse(e)}catch(e){return{}}}e.timeout=e.timeout||2e4,e.credentials=void 0===e.credentials||e.credentials;var i=je(e.cors);if(!i)return!1;e.type||(e.type=e.data?"POST":"GET"),e=n({success:function(){},error:function(){}},e),qe.protocol.ajax(e.url);var a,s=e.success,o=e.error;e.success=function(e){s(e),a&&(clearTimeout(a),a=null)},e.error=function(e){o(e),a&&(clearTimeout(a),a=null)},a=setTimeout((function(){!function(){try{d(i)&&i.abort&&i.abort()}catch(e){$(e)}a&&(clearTimeout(a),a=null,e.error&&e.error(),i.onreadystatechange=null,i.onload=null,i.onerror=null)}()}),e.timeout),"undefined"!=typeof XDomainRequest&&i instanceof XDomainRequest&&(i.onload=function(){e.success&&e.success(r(i.responseText)),i.onreadystatechange=null,i.onload=null,i.onerror=null},i.onerror=function(){e.error&&e.error(r(i.responseText),i.status),i.onreadystatechange=null,i.onerror=null,i.onload=null}),i.onreadystatechange=function(){try{4==i.readyState&&(i.status>=200&&i.status<300||304==i.status?e.success(r(i.responseText)):e.error(r(i.responseText),i.status),i.onreadystatechange=null,i.onload=null)}catch(e){i.onreadystatechange=null,i.onload=null}},i.open(e.type,e.url,!0);try{e.credentials&&(i.withCredentials=!0),d(e.header)&&t(e.header,(function(e,t){i.setRequestHeader&&i.setRequestHeader(t,e)})),e.data&&(e.cors||i.setRequestHeader&&i.setRequestHeader("X-Requested-With","XMLHttpRequest"),"application/json"===e.contentType?i.setRequestHeader&&i.setRequestHeader("Content-type","application/json; charset=UTF-8"):i.setRequestHeader&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"))}catch(e){$(e)}i.send(e.data||null)}function Ae(e){if(!d(e)||!h(e.callbackName))return $("JSONP 请求缺少 callbackName"),!1;e.success=a(e.success)?e.success:function(){},e.error=a(e.error)?e.error:function(){},e.data=e.data||"";var r=document.createElement("script"),n=document.getElementsByTagName("head")[0],i=null,s=!1;if(n.appendChild(r),y(e.timeout)&&(i=setTimeout((function(){return!s&&(e.error("timeout"),window[e.callbackName]=function(){$("call jsonp error")},i=null,n.removeChild(r),void(s=!0))}),e.timeout)),window[e.callbackName]=function(){clearTimeout(i),i=null,e.success.apply(null,arguments),window[e.callbackName]=function(){$("call jsonp error")},n.removeChild(r)},e.url.indexOf("?")>-1?e.url+="&callbackName="+e.callbackName:e.url+="?callbackName="+e.callbackName,d(e.data)){var o=[];t(e.data,(function(e,t){o.push(t+"="+e)})),e.data=o.join("&"),e.url+="&"+e.data}r.onerror=function(t){return!s&&(window[e.callbackName]=function(){$("call jsonp error")},clearTimeout(i),i=null,n.removeChild(r),e.error(t),void(s=!0))},r.src=e.url}function Oe(e){var t=A(e),r="crc="+k(t);return"data="+encodeURIComponent(t)+"&ext="+encodeURIComponent(r)}function De(e){var t=function(e){var t=["image","ajax","beacon"],r=t[0];return"beacon"===(r=e.config&&u(t,e.config.send_type)>-1?e.config.send_type:Ne.para.send_type)&&!1===we()&&(r="image"),"ajax"===r&&!1===me()&&(r="image"),r}(e);switch(t){default:return new lt(e);case"ajax":return new pt(e);case"beacon":return new dt(e)}}function Ce(){this.sendingData=0,this.sendingItemKeys=[]}var Ne={};(function(){var e={function:!0,object:!0},t=e[typeof window]&&window||this,r=t.JSON,n=t.JSON3,i=!1,a=function r(n,i){function a(e,t){try{e()}catch(e){t&&t()}}function s(e){if(null!=s[e])return s[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=s("json-stringify")&&s("date-serialization")&&s("json-parse");else if("date-serialization"==e){if(t=s("json-stringify")&&w){var r=i.stringify;a((function(){t='"-271821-04-20T00:00:00.000Z"'==r(new p(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==r(new p(864e13))&&'"-000001-01-01T00:00:00.000Z"'==r(new p(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==r(new p(-1))}))}}else{var n,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l="function"==typeof(r=i.stringify);l&&((n=function(){return 1}).toJSON=n,a((function(){l="0"===r(0)&&"0"===r(new c)&&'""'==r(new u)&&r(m)===g&&r(g)===g&&r()===g&&"1"===r(n)&&"[1]"==r([n])&&"[null]"==r([g])&&"null"==r(null)&&"[null,null,null]"==r([g,m,null])&&r({a:[n,!0,!1,null,"\0\b\n\f\r\t"]})==o&&"1"===r(null,n)&&"[\n 1,\n 2\n]"==r([1,2],null,1)}),(function(){l=!1}))),t=l}if("json-parse"==e){var d,f=i.parse;"function"==typeof f&&a((function(){0!==f("0")||f(!1)||(n=f(o),(d=5==n.a.length&&1===n.a[0])&&(a((function(){d=!f('"\t"')})),d&&a((function(){d=1!==f("01")})),d&&a((function(){d=1!==f("1.")}))))}),(function(){d=!1})),t=d}}return s[e]=!!t}function o(e){return D(this)}n||(n=t.Object()),i||(i=t.Object());var c=n.Number||t.Number,u=n.String||t.String,l=n.Object||t.Object,p=n.Date||t.Date,d=n.SyntaxError||t.SyntaxError,f=n.TypeError||t.TypeError,_=n.Math||t.Math,h=n.JSON||t.JSON;"object"==typeof h&&h&&(i.stringify=h.stringify,i.parse=h.parse);var g,v=l.prototype,m=v.toString,y=v.hasOwnProperty,w=new p(-0xc782b5b800cec);if(a((function(){w=-109252==w.getUTCFullYear()&&0===w.getUTCMonth()&&1===w.getUTCDate()&&10==w.getUTCHours()&&37==w.getUTCMinutes()&&6==w.getUTCSeconds()&&708==w.getUTCMilliseconds()})),s["bug-string-char-index"]=s["date-serialization"]=s.json=s["json-stringify"]=s["json-parse"]=null,!s("json")){var b="[object Function]",S="[object Number]",k="[object String]",P="[object Array]",j=s("bug-string-char-index"),x=function(t,r){var n,i,a,s=0;for(a in(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n)y.call(i,a)&&s++;return n=i=null,s?x=function(e,t){var r,n,i=m.call(e)==b;for(r in e)i&&"prototype"==r||!y.call(e,r)||(n="constructor"===r)||t(r);(n||y.call(e,r="constructor"))&&t(r)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],x=function(t,r){var n,a,s=m.call(t)==b,o=!s&&"function"!=typeof t.constructor&&e[typeof t.hasOwnProperty]&&t.hasOwnProperty||y;for(n in t)s&&"prototype"==n||!o.call(t,n)||r(n);for(a=i.length;n=i[--a];)o.call(t,n)&&r(n)}),x(t,r)};if(!s("json-stringify")&&!s("date-serialization")){var A={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},O=function(e,t){return("000000"+(t||0)).slice(-e)},D=function(e){var t,r,n,i,a,s,o,c,u;if(w)t=function(e){r=e.getUTCFullYear(),n=e.getUTCMonth(),i=e.getUTCDate(),s=e.getUTCHours(),o=e.getUTCMinutes(),c=e.getUTCSeconds(),u=e.getUTCMilliseconds()};else{var l=_.floor,p=[0,31,59,90,120,151,181,212,243,273,304,334],d=function(e,t){return p[t]+365*(e-1970)+l((e-1969+(t=+(t>1)))/4)-l((e-1901+t)/100)+l((e-1601+t)/400)};t=function(e){for(i=l(e/864e5),r=l(i/365.2425)+1970-1;d(r+1,0)<=i;r++);for(n=l((i-d(r,0))/30.42);d(r,n+1)<=i;n++);i=1+i-d(r,n),s=l((a=(e%864e5+864e5)%864e5)/36e5)%24,o=l(a/6e4)%60,c=l(a/1e3)%60,u=a%1e3}}return(D=function(e){return e>-1/0&&e<1/0?(t(e),e=(r<=0||r>=1e4?(r<0?"-":"+")+O(6,r<0?-r:r):O(4,r))+"-"+O(2,n+1)+"-"+O(2,i)+"T"+O(2,s)+":"+O(2,o)+":"+O(2,c)+"."+O(3,u)+"Z",r=n=i=s=o=c=u=null):e=null,e})(e)};if(s("json-stringify")&&!s("date-serialization")){var C=i.stringify;i.stringify=function(e,t,r){var n=p.prototype.toJSON;p.prototype.toJSON=o;var i=C(e,t,r);return p.prototype.toJSON=n,i}}else{var N=function(e){var t=e.charCodeAt(0),r=A[t];return r||"\\u00"+O(2,t.toString(16))},$=/[\x00-\x1f\x22\x5c]/g,E=function(e){return $.lastIndex=0,'"'+($.test(e)?e.replace($,N):e)+'"'},I=function(e,t,r,n,i,s,o){var c,u,l,d,_,h,v,y,w;if(a((function(){c=t[e]})),"object"==typeof c&&c&&(c.getUTCFullYear&&"[object Date]"==m.call(c)&&c.toJSON===p.prototype.toJSON?c=D(c):"function"==typeof c.toJSON&&(c=c.toJSON(e))),r&&(c=r.call(t,e,c)),c==g)return c===g?c:"null";switch("object"==(u=typeof c)&&(l=m.call(c)),l||u){case"boolean":case"[object Boolean]":return""+c;case"number":case S:return c>-1/0&&c<1/0?""+c:"null";case"string":case k:return E(""+c)}if("object"==typeof c){for(v=o.length;v--;)if(o[v]===c)throw f();if(o.push(c),d=[],y=s,s+=i,l==P){for(h=0,v=c.length;h<v;h++)_=I(h,c,r,n,i,s,o),d.push(_===g?"null":_);w=d.length?i?"[\n"+s+d.join(",\n"+s)+"\n"+y+"]":"["+d.join(",")+"]":"[]"}else x(n||c,(function(e){var t=I(e,c,r,n,i,s,o);t!==g&&d.push(E(e)+":"+(i?" ":"")+t)})),w=d.length?i?"{\n"+s+d.join(",\n"+s)+"\n"+y+"}":"{"+d.join(",")+"}":"{}";return o.pop(),w}};i.stringify=function(t,r,n){var i,a,s,o;if(e[typeof r]&&r)if((o=m.call(r))==b)a=r;else if(o==P){s={};for(var c,u=0,l=r.length;u<l;)c=r[u++],"[object String]"!=(o=m.call(c))&&"[object Number]"!=o||(s[c]=1)}if(n)if((o=m.call(n))==S){if((n-=n%1)>0)for(n>10&&(n=10),i="";i.length<n;)i+=" "}else o==k&&(i=n.length<=10?n:n.slice(0,10));return I("",((c={})[""]=t,c),a,s,i,"",[])}}}if(!s("json-parse")){var T,L,R=u.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},U=function(){throw T=L=null,d()},J=function(){for(var e,t,r,n,i,a=L,s=a.length;T<s;)switch(i=a.charCodeAt(T)){case 9:case 10:case 13:case 32:T++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=j?a.charAt(T):a[T],T++,e;case 34:for(e="@",T++;T<s;)if((i=a.charCodeAt(T))<32)U();else if(92==i)switch(i=a.charCodeAt(++T)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=H[i],T++;break;case 117:for(t=++T,r=T+4;T<r;T++)(i=a.charCodeAt(T))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||U();e+=R("0x"+a.slice(t,T));break;default:U()}else{if(34==i)break;for(i=a.charCodeAt(T),t=T;i>=32&&92!=i&&34!=i;)i=a.charCodeAt(++T);e+=a.slice(t,T)}if(34==a.charCodeAt(T))return T++,e;U();default:if(t=T,45==i&&(n=!0,i=a.charCodeAt(++T)),i>=48&&i<=57){for(48==i&&((i=a.charCodeAt(T+1))>=48&&i<=57)&&U(),n=!1;T<s&&((i=a.charCodeAt(T))>=48&&i<=57);T++);if(46==a.charCodeAt(T)){for(r=++T;r<s&&!((i=a.charCodeAt(r))<48||i>57);r++);r==T&&U(),T=r}if(101==(i=a.charCodeAt(T))||69==i){for(43!=(i=a.charCodeAt(++T))&&45!=i||T++,r=T;r<s&&!((i=a.charCodeAt(r))<48||i>57);r++);r==T&&U(),T=r}return+a.slice(t,T)}n&&U();var o=a.slice(T,T+4);if("true"==o)return T+=4,!0;if("fals"==o&&101==a.charCodeAt(T+4))return T+=5,!1;if("null"==o)return T+=4,null;U()}return"$"},B=function(e){var t,r;if("$"==e&&U(),"string"==typeof e){if("@"==(j?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=J());)r?","==e?"]"==(e=J())&&U():U():r=!0,","==e&&U(),t.push(B(e));return t}if("{"==e){for(t={};"}"!=(e=J());)r?","==e?"}"==(e=J())&&U():U():r=!0,","!=e&&"string"==typeof e&&"@"==(j?e.charAt(0):e[0])&&":"==J()||U(),t[e.slice(1)]=B(J());return t}U()}return e},M=function(e,t,r){var n=K(e,t,r);n===g?delete e[t]:e[t]=n},K=function(e,t,r){var n,i=e[t];if("object"==typeof i&&i)if(m.call(i)==P)for(n=i.length;n--;)M(m,x,i);else x(i,(function(e){M(i,e,r)}));return r.call(e,t,i)};i.parse=function(e,t){var r,n;return T=0,L=""+e,r=B(J()),"$"!=J()&&U(),T=L=null,t&&m.call(t)==b?K(((n={})[""]=r,n),"",t):r}}}return i.runInContext=r,i}(t,t.JSON3={noConflict:function(){return i||(i=!0,t.JSON=r,t.JSON3=n,r=n=null),a}});t.JSON={parse:a.parse,stringify:a.stringify}}).call(window),function(e){if(e.atob)try{e.atob(" ")}catch(t){e.atob=function(e){var t=function(t){return e(String(t).replace(/[\t\n\f\r ]+/g,""))};return t.original=e,t}(e.atob)}else{var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;e.btoa=function(e){for(var r,n,i,a,s="",o=0,c=(e=String(e)).length%3;o<e.length;){if((n=e.charCodeAt(o++))>255||(i=e.charCodeAt(o++))>255||(a=e.charCodeAt(o++))>255)return"";r=n<<16|i<<8|a,s+=t.charAt(r>>18&63)+t.charAt(r>>12&63)+t.charAt(r>>6&63)+t.charAt(63&r)}return c?s.slice(0,c-3)+"===".substring(c):s},e.atob=function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!r.test(e))return"";e+="==".slice(2-(3&e.length));for(var n,i,a,s="",o=0;o<e.length;)n=t.indexOf(e.charAt(o++))<<18|t.indexOf(e.charAt(o++))<<12|(i=t.indexOf(e.charAt(o++)))<<6|(a=t.indexOf(e.charAt(o++))),s+=64===i?String.fromCharCode(n>>16&255):64===a?String.fromCharCode(n>>16&255,n>>8&255):String.fromCharCode(n>>16&255,n>>8&255,255&n);return s}}}(window),String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(e,"g"),t)});var $e=Array.prototype,Ee=$e.forEach,Ie=$e.slice,Te=Array.isArray,Le=Object.prototype,Re=Le.toString,He=Le.hasOwnProperty,Ue={},Je=Te||function(e){return"[object Array]"===Re.call(e)},Be=function(){var e=(new Date).getTime();return function(t){return Math.ceil((e=(9301*e+49297)%233280)/233280*t)}}(),Me=Date.now||function(){return(new Date).getTime()},Ke={};R.init=function(e){this.ele=e},R.init.prototype={addClass:function(e){return-1===(" "+this.ele.className+" ").indexOf(" "+e+" ")&&(this.ele.className=this.ele.className+(""===this.ele.className?"":" ")+e),this},removeClass:function(e){var t=" "+this.ele.className+" ";return-1!==t.indexOf(" "+e+" ")&&(this.ele.className=t.replace(" "+e+" "," ").slice(1,-1)),this},hasClass:function(e){return-1!==(" "+this.ele.className+" ").indexOf(" "+e+" ")},attr:function(e,t){return"string"==typeof e&&_(t)?this.ele.getAttribute(e):("string"==typeof e&&(t=String(t),this.ele.setAttribute(e,t)),this)},offset:function(){var e=this.ele.getBoundingClientRect();if(e.width||e.height){var t=this.ele.ownerDocument.documentElement;return{top:e.top+window.pageYOffset-t.clientTop,left:e.left+window.pageXOffset-t.clientLeft}}return{top:0,left:0}},getSize:function(){if(!window.getComputedStyle)return{width:this.ele.offsetWidth,height:this.ele.offsetHeight};try{var e=this.ele.getBoundingClientRect();return{width:e.width,height:e.height}}catch(e){return{width:0,height:0}}},getStyle:function(e){return this.ele.currentStyle?this.ele.currentStyle[e]:this.ele.ownerDocument.defaultView.getComputedStyle(this.ele,null).getPropertyValue(e)},wrap:function(e){var t=document.createElement(e);return this.ele.parentNode.insertBefore(t,this.ele),t.appendChild(this.ele),R(t)},getCssStyle:function(e){var t=this.ele.style.getPropertyValue(e);if(t)return t;var r=null;if("function"==typeof window.getMatchedCSSRules&&(r=window.getMatchedCSSRules(this.ele)),!r||!Je(r))return null;for(var n=r.length-1;n>=0;n--){if(t=r[n].style.getPropertyValue(e))return t}},sibling:function(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e},next:function(){return this.sibling(this.ele,"nextSibling")},prev:function(){return this.sibling(this.ele,"previousSibling")},siblings:function(){return this.siblings((this.ele.parentNode||{}).firstChild,this.ele)},children:function(){return this.siblings(this.ele.firstChild)},parent:function(){var e=this.ele.parentNode;return R(e=e&&11!==e.nodeType?e:null)},previousElementSibling:function(){var e=this.ele;if("previousElementSibling"in document.documentElement)return R(e.previousElementSibling);for(;e=e.previousSibling;)if(1===e.nodeType)return R(e);return R(null)},getSameTypeSiblings:function(){for(var e=this.ele,t=e.parentNode,r=e.tagName.toLowerCase(),n=[],i=0;i<t.children.length;i++){var a=t.children[i];1===a.nodeType&&a.tagName.toLowerCase()===r&&n.push(t.children[i])}return n},getParents:function(){try{var e=this.ele;if(!w(e))return[];var t=[e];if(null===e||null===e.parentElement)return[];for(;null!==e.parentElement;)e=e.parentElement,t.push(e);return t}catch(e){return[]}}};var Fe={isHttpUrl:function(e){if("string"!=typeof e)return!1;return!1!==/^https?:\/\/.+/.test(e)||($("Invalid URL"),!1)},removeScriptProtocol:function(e){if("string"!=typeof e)return"";for(var t=/^\s*javascript/i;t.test(e);)e=e.replace(t,"");return e}},We=function(){var e={"+":"-","/":"_","=":"."},t={"-":"+",_:"/",".":"="};return{encode:function(t){return t.replace(/[+\/=]/g,(function(t){return e[t]}))},decode:function(e){return e.replace(/[-_.]/g,(function(e){return t[e]}))},trim:function(e){return e.replace(/[.=]{1,2}$/,"")},isBase64:function(e){return/^[A-Za-z0-9+\/]*[=]{0,2}$/.test(e)},isUrlSafeBase64:function(e){return/^[A-Za-z0-9_-]*[.]{0,2}$/.test(e)}}}(),qe={distinct_id:function(){},jssdkDebug:function(){},_sendDebug:function(e){},apph5:function(e){var t="app_h5打通失败-",r={1:t+"use_app_track为false",2:t+"Android或者iOS，没有暴露相应方法",3.1:t+"Android校验server_url失败",3.2:t+"iOS校验server_url失败",4.1:t+"H5 校验 iOS server_url 失败",4.2:t+"H5 校验 Android server_url 失败"},n=e.output,i=e.step,a=e.data||"";"all"!==n&&"console"!==n||$(r[i]),("all"===n||"code"===n)&&d(Ke.is_debug)&&Ke.is_debug.apph5&&(a.type&&"profile"===a.type.slice(0,7)||(a.properties._jssdk_debug_info="apph5-"+String(i)))},defineMode:function(e){var t={1:{title:"当前页面无法进行可视化全埋点",message:"App SDK 与 Web JS SDK 没有进行打通，请联系贵方技术人员修正 App SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_link-1573913.html"},2:{title:"当前页面无法进行可视化全埋点",message:"App SDK 与 Web JS SDK 没有进行打通，请联系贵方技术人员修正 Web JS SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_link-1573913.html"},3:{title:"当前页面无法进行可视化全埋点",message:"Web JS SDK 没有开启全埋点配置，请联系贵方工作人员修正 SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_web_all-1573964.html"},4:{title:"当前页面无法进行可视化全埋点",message:"Web JS SDK 配置的数据校验地址与 App SDK 配置的数据校验地址不一致，请联系贵方工作人员修正 SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_link-1573913.html"}};return!(!e||!t[e])&&t[e]},protocol:{protocolIsSame:function(e,t){try{if(F(e).protocol!==F(t).protocol)return!1}catch(e){return $("不支持 _.URL 方法"),!1}return!0},serverUrl:function(){h(Ke.server_url)&&""!==Ke.server_url&&!this.protocolIsSame(Ke.server_url,location.href)&&$("SDK 检测到您的数据发送地址和当前页面地址的协议不一致，建议您修改成一致的协议。\n因为：1、https 下面发送 http 的图片请求会失败。2、http 页面使用 https + ajax 方式发数据，在 ie9 及以下会丢失数据。")},ajax:function(e){return e!==Ke.server_url&&void(h(e)&&""!==e&&!this.protocolIsSame(e,location.href)&&$("SDK 检测到您的数据发送地址和当前页面地址的协议不一致，建议您修改成一致的协议。因为 http 页面使用 https + ajax 方式发数据，在 ie9 及以下会丢失数据。"))}}},ze="utm_source utm_medium utm_campaign utm_content utm_term",Ve="1.19.3",Xe=function(){var e=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)};return function(){var t=String(screen.height*screen.width);t=t&&/\d{5,}/.test(t)?t.toString(16):String(31242*P()).replace(".","").slice(0,8);var r=e()+"-"+P().toString(16).replace(".","")+"-"+function(){function e(e,t){var r,n=0;for(r=0;r<t.length;r++)n|=i[r]<<8*r;return e^n}var t,r,n=navigator.userAgent,i=[],a=0;for(t=0;t<n.length;t++)r=n.charCodeAt(t),i.unshift(255&r),i.length>=4&&(a=e(a,i),i=[]);return i.length>0&&(a=e(a,i)),a.toString(16)}()+"-"+t+"-"+e();return r||(String(P())+String(P())+String(P())).slice(2,15)}}(),Ze={data:{},id:function(){return this.data.id||(this.data.id=oe()),this.data.id},type:function(){return this.data.type||(this.data.type=ce()),this.data.type}},Ge={initPage:function(){var e=pe(),t=z(),r=ie(t);r||qe.jssdkDebug("url_domain异常_"+t+"_"+r),this.pageProp={referrer:e,referrer_host:e?W(e):"",url:t,url_host:W(t,"url_host取值异常"),url_domain:r}},pageProp:{},campaignParams:function(){var e=ze.split(" "),r="",n={};return Je(Ke.source_channel)&&Ke.source_channel.length>0&&(e=x(e=e.concat(Ke.source_channel))),t(e,(function(e){(r=B(location.href,e)).length&&(n[e]=r)})),n},campaignParamsStandard:function(e,r){e=e||"",r=r||"";var n=Ge.campaignParams(),i={},a={};return t(n,(function(t,n,s){-1!==(" "+ze+" ").indexOf(" "+n+" ")?i[e+n]=s[n]:a[r+n]=s[n]})),{$utms:i,otherUtms:a}},properties:function(){return{$timezone_offset:(new Date).getTimezoneOffset(),$screen_height:Number(screen.height)||0,$screen_width:Number(screen.width)||0,$lib:"js",$lib_version:Ve}},currentProps:{},register:function(e){n(Ge.currentProps,e)}},Qe={get:function(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return U(i.substring(t.length,i.length))}return null},set:function(e,t,r,n){function i(e){return!!e&&e.replaceAll(/\r\n/g,"")}var a="",s="",o="",c="";if(r=null==r?73e3:r,n=void 0===n?Ke.cross_subdomain:n){var u=ie(location.href);"url解析失败"===u&&(u=""),a=u?"; domain="+u:""}if(0!==r){var l=new Date;"s"===String(r).slice(-1)?l.setTime(l.getTime()+1e3*Number(String(r).slice(0,-1))):l.setTime(l.getTime()+24*r*60*60*1e3),s="; expires="+l.toGMTString()}h(Ke.set_cookie_samesite)&&""!==Ke.set_cookie_samesite&&(c="; SameSite="+Ke.set_cookie_samesite),Ke.is_secure_cookie&&(o="; secure");var p="",d="",f="";e&&(p=i(e)),t&&(d=i(t)),a&&(f=i(a)),p&&d&&(document.cookie=p+"="+encodeURIComponent(d)+s+"; path=/"+f+c+o)},encrypt:function(e){return"data:enc;"+D(e)},decrypt:function(e){return C(e=e.substring("data:enc;".length))},resolveValue:function(e){return h(e)&&0===e.indexOf("data:enc;")&&(e=Qe.decrypt(e)),e},remove:function(e,t){t=void 0===t?Ke.cross_subdomain:t,Qe.set(e,"",-1,t)},getCookieName:function(e,t){var r="";if(t=t||location.href,!1===Ke.cross_subdomain){try{r=F(t).hostname}catch(e){$(e)}r="string"==typeof r&&""!==r?"sajssdk_2015_"+e+"_"+r.replace(/\./g,"_"):"sajssdk_2015_root_"+e}else r="sajssdk_2015_cross_"+e;return r},getNewUser:function(){return null!==this.get("sensorsdata_is_new_user")||null!==this.get(this.getCookieName("new_user"))}},Ye={get:function(e){return window.localStorage.getItem(e)},parse:function(e){var t;try{t=JSON.parse(Ye.get(e))||null}catch(e){$(e)}return t},set:function(e,t){window.localStorage.setItem(e,t)},remove:function(e){window.localStorage.removeItem(e)},isSupport:function(){var e=!0;try{var t="__sensorsdatasupport__",r="testIsSupportStorage";Ye.set(t,r),Ye.get(t)!==r&&(e=!1),Ye.remove(t)}catch(t){e=!1}return e}},et={isSupport:function(){var e=!0,t="__sensorsdatasupport__",r="testIsSupportStorage";try{sessionStorage&&sessionStorage.setItem?(sessionStorage.setItem(t,r),sessionStorage.removeItem(t,r),e=!0):e=!1}catch(t){e=!1}return e}},tt=function(){this._events=[],this.pendingEvents=[]};tt.prototype={emit:function(e){var r=[].slice.call(arguments,1);t(this._events,(function(t){t.type===e&&t.callback.apply(t.context,r)})),this.pendingEvents.push({type:e,data:r}),this.pendingEvents.length>20&&this.pendingEvents.shift()},on:function(e,r,n,i){"function"==typeof r&&(this._events.push({type:e,callback:r,context:n||this}),i=!1!==i,this.pendingEvents.length>0&&i&&t(this.pendingEvents,(function(t){t.type===e&&r.apply(n,t.data)})))},tempAdd:function(e,t){if(t&&e)return this.emit(e,t)},isReady:function(){}};var rt={__proto__:null,each:t,map:r,extend:n,extend2Lev:function(e){return t(Ie.call(arguments,1),(function(t){for(var r in t)void 0!==t[r]&&(d(t[r])&&d(e[r])?n(e[r],t[r]):e[r]=t[r])})),e},coverExtend:i,isArray:Je,isFunction:a,isArguments:s,toArray:function(e){return e?e.toArray?e.toArray():Je(e)||s(e)?Ie.call(e):c(e):[]},values:c,indexOf:u,filter:l,inherit:function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},trim:p,isObject:d,isEmptyObject:f,isUndefined:_,isString:h,isDate:g,isBoolean:v,isNumber:y,isElement:w,isJSONString:b,safeJSONParse:S,throttle:function(e,t,r){var n,i,a,s=null,o=0;r||(r={});var c=function(){o=!1===r.leading?0:Me(),s=null,a=e.apply(n,i),s||(n=i=null)};return function(){var u=Me();o||!1!==r.leading||(o=u);var l=t-(u-o);return n=this,i=arguments,l<=0||l>t?(s&&(clearTimeout(s),s=null),o=u,a=e.apply(n,i),s||(n=i=null)):s||!1===r.trailing||(s=setTimeout(c,l)),a}},hashCode:k,getRandomBasic:Be,getRandom:P,formatJsonString:j,unique:x,base64Decode:O,base64Encode:A,now:Me,rot13obfs:D,rot13defs:C,strToUnicode:function(e,t){if("string"!=typeof e)return t("转换unicode错误",e),e;for(var r="",n=0;n<e.length;n++)r+="\\"+e.charCodeAt(n).toString(16);return r},hasAttributes:E,hasAttribute:I,getElementContent:T,loadScript:L,ry:R,setCssStyle:function(e){var t=document.createElement("style");t.type="text/css";try{t.appendChild(document.createTextNode(e))}catch(r){t.styleSheet.cssText=e}var r=document.getElementsByTagName("head")[0],n=document.getElementsByTagName("script")[0];r?r.children.length?r.insertBefore(t,r.children[0]):r.appendChild(t):n.parentNode.insertBefore(t,n)},getDomBySelector:H,decodeURIComponent:U,decodeURI:J,getQueryParam:B,urlParse:M,getURLSearchParams:K,URL:F,getHostname:W,getQueryParamsFromUrl:q,urlSafeBase64:We,secCheck:Fe,getURL:z,encodeDates:function e(r){return t(r,(function(t,n){g(t)?r[n]=V(t):d(t)&&(r[n]=e(t))})),r},formatDate:V,searchObjDate:X,mediaQueriesSupported:ve,getScreenOrientation:function(){var e=screen.msOrientation||screen.mozOrientation||(screen.orientation||{}).type,t="未取到值";if(e)t=e.indexOf("landscape")>-1?"landscape":"portrait";else if(ve()){var r=window.matchMedia||window.msMatchMedia;r("(orientation: landscape)").matches?t="landscape":r("(orientation: portrait)").matches&&(t="portrait")}return t},cookie:Qe,localStorage:Ye,sessionStorage:et,isSupportCors:me,isIOS:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)},getUA:ye,getIOSVersion:function(){try{var e=navigator.appVersion.match(/OS (\d+)[._](\d+)[._]?(\d+)?/);return e&&e[1]?Number.parseInt(e[1],10):""}catch(e){return""}},isSupportBeaconSend:we,searchZZAppStyle:Z,searchObjString:Q,filterReservedProperties:te,parseSuperProperties:ee,strip_sa_properties:Y,searchConfigData:re,strip_empty_properties:ne,UUID:Xe,getCurrentDomain:ie,getEleInfo:ae,isBaiduTraffic:se,getReferrerEqid:oe,getReferrerEqidType:ce,getBaiduKeyword:Ze,getCookieTopLevelDomain:ue,isReferralTraffic:le,getReferrer:pe,getKeywordFromReferrer:fe,getWxAdIdFromUrl:_e,getReferSearchEngine:de,getSourceFromReferrer:he,info:Ge,autoExeQueue:ge,formatString:G,addEvent:be,addHashEvent:Se,addSinglePageEvent:ke,listenPageState:Pe,bindReady:function(e,t){t=t||window;var r=!1,n=!0,i=t.document,a=i.documentElement,s=i.addEventListener,o=s?"addEventListener":"attachEvent",c=s?"removeEventListener":"detachEvent",u=s?"":"on",l=function(n){"readystatechange"==n.type&&"complete"!=i.readyState||(("load"==n.type?t:i)[c](u+n.type,l,!1),!r&&(r=!0)&&e.call(t,n.type||n))},p=function(){try{a.doScroll("left")}catch(e){return void setTimeout(p,50)}l("poll")};if("complete"==i.readyState)e.call(t,"lazy");else{if(!s&&a.doScroll){try{n=!t.frameElement}catch(e){$(e)}n&&p()}i[o](u+"DOMContentLoaded",l,!1),i[o](u+"readystatechange",l,!1),t[o](u+"load",l,!1)}},xhr:je,ajax:xe,jsonp:Ae,eventEmitter:tt},nt={checkIsAddSign:function(e){"track"===e.type&&(Qe.getNewUser()?e.properties.$is_first_day=!0:e.properties.$is_first_day=!1)},is_first_visit_time:!1,checkIsFirstTime:function(e){"track"===e.type&&"$pageview"===e.event&&(this.is_first_visit_time?(e.properties.$is_first_time=!0,this.is_first_visit_time=!1):e.properties.$is_first_time=!1)},setDeviceId:function(e){var t=null,r=Qe.get("sensorsdata2015jssdkcross"),n={};null!=(r=Qe.resolveValue(r))&&b(r)&&((n=JSON.parse(r)).$device_id&&(t=n.$device_id)),t=t||e,!0===Ne.para.cross_subdomain?Ne.store.set("$device_id",t):(n.$device_id=t,n=JSON.stringify(n),Ne.para.encrypt_cookie&&(n=Qe.encrypt(n)),Qe.set("sensorsdata2015jssdkcross",n,null,!0)),Ne.para.is_track_device_id&&(Ge.currentProps.$device_id=t)},storeInitCheck:function(){if(Ne.is_first_visitor){var e=new Date,t={h:23-e.getHours(),m:59-e.getMinutes(),s:59-e.getSeconds()};Qe.set(Qe.getCookieName("new_user"),"1",3600*t.h+60*t.m+t.s+"s"),this.is_first_visit_time=!0}else Qe.getNewUser()||(this.checkIsAddSign=function(e){"track"===e.type&&(e.properties.$is_first_day=!1)}),this.checkIsFirstTime=function(e){"track"===e.type&&"$pageview"===e.event&&(e.properties.$is_first_time=!1)}},checkIsFirstLatest:function(){var e=Ge.pageProp.url_domain,r={};""===e&&(e="url解析失败");var n=fe(document.referrer,!0);if(Ne.para.preset_properties.search_keyword_baidu?le(document.referrer)&&(!se()||d(n)&&n.active?Ne.store._state&&Ne.store._state.props&&(Ne.store._state.props.$search_keyword_id&&delete Ne.store._state.props.$search_keyword_id,Ne.store._state.props.$search_keyword_id_type&&delete Ne.store._state.props.$search_keyword_id_type,Ne.store._state.props.$search_keyword_id_hash&&delete Ne.store._state.props.$search_keyword_id_hash):(r.$search_keyword_id=Ze.id(),r.$search_keyword_id_type=Ze.type(),r.$search_keyword_id_hash=k(r.$search_keyword_id))):Ne.store._state&&Ne.store._state.props&&(Ne.store._state.props.$search_keyword_id&&delete Ne.store._state.props.$search_keyword_id,Ne.store._state.props.$search_keyword_id_type&&delete Ne.store._state.props.$search_keyword_id_type,Ne.store._state.props.$search_keyword_id_hash&&delete Ne.store._state.props.$search_keyword_id_hash),Ne.store.save(),t(Ne.para.preset_properties,(function(n,i){if(-1===i.indexOf("latest_"))return!1;if(i=i.slice(7),n){if("wx_ad_click_id"===i&&"not_collect"===n)return!1;if("utm"!==i&&"url解析失败"===e)"wx_ad_click_id"===i?(r._latest_wx_ad_click_id="url的domain解析失败",r._latest_wx_ad_hash_key="url的domain解析失败",r._latest_wx_ad_callbacks="url的domain解析失败"):r["$latest_"+i]="url的domain解析失败";else if(le(document.referrer))switch(i){case"traffic_source_type":r.$latest_traffic_source_type=he();break;case"referrer":r.$latest_referrer=Ge.pageProp.referrer;break;case"search_keyword":fe()?r.$latest_search_keyword=fe():d(Ne.store._state)&&d(Ne.store._state.props)&&Ne.store._state.props.$latest_search_keyword&&delete Ne.store._state.props.$latest_search_keyword;break;case"landing_page":r.$latest_landing_page=z();break;case"wx_ad_click_id":var a=_e(location.href);r._latest_wx_ad_click_id=a.click_id,r._latest_wx_ad_hash_key=a.hash_key,r._latest_wx_ad_callbacks=a.callbacks}}else if("utm"===i&&Ne.store._state&&Ne.store._state.props)for(var s in Ne.store._state.props)(0===s.indexOf("$latest_utm")||0===s.indexOf("_latest_")&&s.indexOf("_latest_wx_ad_")<0)&&delete Ne.store._state.props[s];else if(Ne.store._state&&Ne.store._state.props&&"$latest_"+i in Ne.store._state.props)delete Ne.store._state.props["$latest_"+i];else if("wx_ad_click_id"==i&&Ne.store._state&&Ne.store._state.props&&!1===n){t(["_latest_wx_ad_click_id","_latest_wx_ad_hash_key","_latest_wx_ad_callbacks"],(function(e){e in Ne.store._state.props&&delete Ne.store._state.props[e]}))}})),Ne.register(r),Ne.para.preset_properties.latest_utm){var i=Ge.campaignParamsStandard("$latest_","_latest_"),a=i.$utms,s=i.otherUtms;f(a)||Ne.register(a),f(s)||Ne.register(s)}}},it={requests:[],_sessionState:{},_state:{distinct_id:"",first_id:"",props:{}},getProps:function(){return this._state.props||{}},getSessionProps:function(){return this._sessionState},getDistinctId:function(){return this._state._distinct_id||this._state.distinct_id},getUnionId:function(){var e={},t=this._state._first_id||this._state.first_id,r=this._state._distinct_id||this._state.distinct_id;return t&&r?(e.login_id=r,e.anonymous_id=t):e.anonymous_id=r,e},getFirstId:function(){return this._state._first_id||this._state.first_id},toState:function(e){var t=null;if(null!=e&&b(e))if(t=JSON.parse(e),this._state=n(t),t.distinct_id){if("object"==typeof t.props){for(var r in t.props)"string"==typeof t.props[r]&&(t.props[r]=t.props[r].slice(0,Ne.para.max_referrer_string_length));this.save()}}else this.set("distinct_id",Xe()),Ne.debug.distinct_id("1",e);else this.set("distinct_id",Xe()),Ne.debug.distinct_id("2",e)},initSessionState:function(){var e=Qe.get("sensorsdata2015session"),t=null;null!==e&&"object"==typeof(t=JSON.parse(e))&&(this._sessionState=t||{})},setOnce:function(e,t){e in this._state||this.set(e,t)},set:function(e,t){this._state=this._state||{};var r=this._state.distinct_id;this._state[e]=t,"first_id"===e?delete this._state._first_id:"distinct_id"===e&&delete this._state._distinct_id,this.save(),"distinct_id"===e&&r&&Ne.events.tempAdd("changeDistinctId",t)},change:function(e,t){this._state["_"+e]=t},setSessionProps:function(e){var t=this._sessionState;n(t,e),this.sessionSave(t)},setSessionPropsOnce:function(e){var t=this._sessionState;i(t,e),this.sessionSave(t)},setProps:function(e,t){var r={};for(var i in r=t?e:n(this._state.props||{},e))"string"==typeof r[i]&&(r[i]=r[i].slice(0,Ne.para.max_referrer_string_length));this.set("props",r)},setPropsOnce:function(e){var t=this._state.props||{};i(t,e),this.set("props",t)},clearAllProps:function(e){var t;if(this._sessionState={},Je(e)&&e.length>0)for(t=0;t<e.length;t++)h(e[t])&&-1===e[t].indexOf("latest_")&&d(this._state.props)&&e[t]in this._state.props&&delete this._state.props[e[t]];else if(d(this._state.props))for(t in this._state.props)1!==t.indexOf("latest_")&&delete this._state.props[t];this.sessionSave({}),this.save()},sessionSave:function(e){this._sessionState=e,Qe.set("sensorsdata2015session",JSON.stringify(this._sessionState),0)},save:function(){var e=JSON.parse(JSON.stringify(this._state));delete e._first_id,delete e._distinct_id;var t=JSON.stringify(e);Ne.para.encrypt_cookie&&(t=Qe.encrypt(t)),Qe.set(this.getCookieName(),t,73e3,Ne.para.cross_subdomain)},getCookieName:function(){var e="";if(!1===Ne.para.cross_subdomain){try{e=F(location.href).hostname}catch(e){Ne.log(e)}e="string"==typeof e&&""!==e?"sa_jssdk_2015_"+e.replace(/\./g,"_"):"sa_jssdk_2015_root"}else e="sensorsdata2015jssdkcross";return e},init:function(){this.initSessionState();var e=Xe(),t=Qe.get(this.getCookieName());null===(t=Qe.resolveValue(t))?(Ne.is_first_visitor=!0,this.set("distinct_id",e)):(b(t)&&JSON.parse(t).distinct_id||(Ne.is_first_visitor=!0),this.toState(t)),nt.setDeviceId(e),nt.storeInitCheck(),nt.checkIsFirstLatest()}},at={otherTags:[],getTargetElement:function(e,t){var r=this,n=e;if("object"!=typeof n)return null;if("string"!=typeof n.tagName)return null;var i=n.tagName.toLowerCase();if("body"===i.toLowerCase()||"html"===i.toLowerCase())return null;if(!n||!n.parentNode||!n.parentNode.children)return null;var a=n.parentNode,s=r.hasElement({event:t&&t.originalEvent||t,element:e},(function(e){return"a"===e.tagName.toLowerCase()||E(e,Ne.para.heatmap.track_attr)})),o=r.otherTags;if("a"===i||"button"===i||"input"===i||"textarea"===i)return n;if(u(o,i)>-1)return n;if("button"===a.tagName.toLowerCase()||"a"===a.tagName.toLowerCase())return a;if("area"===i&&"map"===a.tagName.toLowerCase()&&R(a).prev().tagName&&"img"===R(a).prev().tagName.toLowerCase())return R(a).prev();if(s)return s;if("div"===i&&Ne.para.heatmap.collect_tags.div&&r.isDivLevelValid(n))return(Ne.para.heatmap&&Ne.para.heatmap.collect_tags&&Ne.para.heatmap.collect_tags.div&&Ne.para.heatmap.collect_tags.div.max_level||1)>1||r.isCollectableDiv(n)?n:null;if(r.isStyleTag(i)&&Ne.para.heatmap.collect_tags.div){var c=r.getCollectableParent(n);if(c&&r.isDivLevelValid(c))return c}return null},getDivLevels:function(e,r){var n=at.getElementPath(e,!0,r).split(" > "),i=0;return t(n,(function(e){"div"===e&&i++})),i},isDivLevelValid:function(e){for(var t=Ne.para.heatmap&&Ne.para.heatmap.collect_tags&&Ne.para.heatmap.collect_tags.div&&Ne.para.heatmap.collect_tags.div.max_level||1,r=e.getElementsByTagName("div"),n=r.length-1;n>=0;n--)if(at.getDivLevels(r[n],e)>t)return!1;return!0},getElementPath:function(e,t,r){for(var n=[];e.parentNode;){if(e.id&&!t&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.id)){n.unshift(e.tagName.toLowerCase()+"#"+e.id);break}if(r&&e===r){n.unshift(e.tagName.toLowerCase());break}if(e===document.body){n.unshift("body");break}n.unshift(e.tagName.toLowerCase()),e=e.parentNode}return n.join(" > ")},getClosestLi:function(e){return function(e,t){for(;e&&e!==document&&1===e.nodeType;e=e.parentNode)if(e.tagName.toLowerCase()===t)return e;return null}(e,"li")},getElementPosition:function(e,t,r){var n=Ne.heatmap.getClosestLi(e);if(!n)return null;var i=e.tagName.toLowerCase(),a=n.getElementsByTagName(i),s=a.length,o=[];if(s>1){for(var c=0;c<s;c++){Ne.heatmap.getElementPath(a[c],r)===t&&o.push(a[c])}if(o.length>1)return u(o,e)}return function(e){if(!e.parentNode)return"";if(1===R(e).getSameTypeSiblings().length)return 0;for(var t=0,r=e;R(r).previousElementSibling().ele;r=R(r).previousElementSibling().ele,t++);return t}(n)},setNotice:function(e){Ne.is_heatmap_render_mode=!0,Ne.para.heatmap||(Ne.errorMsg="您SDK没有配置开启点击图，可能没有数据！"),e&&e[0]&&e[1]&&"http:"===e[1].slice(0,5)&&"https:"===location.protocol&&(Ne.errorMsg="您的当前页面是https的地址，神策分析环境也必须是https！"),Ne.para.heatmap_url||(Ne.para.heatmap_url=location.protocol+"//static.sensorsdata.cn/sdk/"+Ne.lib_version+"/heatmap.min.js")},getDomIndex:function(e){if(!e.parentNode)return-1;for(var t=0,r=e.tagName,n=e.parentNode.children,i=0;i<n.length;i++)if(n[i].tagName===r){if(e===n[i])return t;t++}return-1},selector:function(e,t){var r=e.parentNode&&9==e.parentNode.nodeType?-1:this.getDomIndex(e);return e.getAttribute&&e.getAttribute("id")&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.getAttribute("id"))&&(!Ne.para.heatmap||Ne.para.heatmap&&"not_use_id"!==Ne.para.heatmap.element_selector)&&!t?"#"+e.getAttribute("id"):e.tagName.toLowerCase()+(~r?":nth-of-type("+(r+1)+")":"")},getDomSelector:function(e,t,r){if(!e||!e.parentNode||!e.parentNode.children)return!1;t=t&&t.join?t:[];var n=e.nodeName.toLowerCase();return e&&"body"!==n&&1==e.nodeType?(t.unshift(this.selector(e,r)),e.getAttribute&&e.getAttribute("id")&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.getAttribute("id"))&&Ne.para.heatmap&&"not_use_id"!==Ne.para.heatmap.element_selector&&!r?t.join(" > "):this.getDomSelector(e.parentNode,t,r)):(t.unshift("body"),t.join(" > "))},na:function(){var e=document.documentElement.scrollLeft||window.pageXOffset;return parseInt(isNaN(e)?0:e,10)},i:function(){var e=0;try{e=o.documentElement&&o.documentElement.scrollTop||m.pageYOffset,e=isNaN(e)?0:e}catch(t){e=0}return parseInt(e,10)},getBrowserWidth:function(){var e=window.innerWidth||document.body.clientWidth;return isNaN(e)?0:parseInt(e,10)},getBrowserHeight:function(){var e=window.innerHeight||document.body.clientHeight;return isNaN(e)?0:parseInt(e,10)},getScrollWidth:function(){var e=parseInt(document.body.scrollWidth,10);return isNaN(e)?0:e},getEleDetail:function(e){var t=this.getDomSelector(e),r=ae({target:e});r.$element_selector=t||"",r.$element_path=Ne.heatmap.getElementPath(e,Ne.para.heatmap&&"not_use_id"===Ne.para.heatmap.element_selector);var n=Ne.heatmap.getElementPosition(e,r.$element_path,Ne.para.heatmap&&"not_use_id"===Ne.para.heatmap.element_selector);return y(n)&&(r.$element_position=n),r},start:function(e,t,r,i,s){var o=d(i)?i:{},c=a(s)?s:a(i)?i:void 0;if(Ne.para.heatmap&&Ne.para.heatmap.collect_element&&!Ne.para.heatmap.collect_element(t))return!1;var u=this.getEleDetail(t);if(Ne.para.heatmap&&Ne.para.heatmap.custom_property){var l=Ne.para.heatmap.custom_property(t);d(l)&&(u=n(u,l))}u=n(u,o),"a"===r&&Ne.para.heatmap&&!0===Ne.para.heatmap.isTrackLink?Ne.trackLink({event:e,target:t},"$WebClick",u):Ne.track("$WebClick",u,c)},hasElement:function(e,t){var r;if(e.event){var n=e.event;r=n.path||n._getPath&&n._getPath()}else e.element&&(r=R(e.element).getParents());if(r&&Je(r)&&r.length>0)for(var i=0;i<r.length;i++)if("object"==typeof r[i]&&1===r[i].nodeType&&t(r[i]))return r[i]},isStyleTag:function(e,t){return!(u(["a","div","input","button","textarea"],e)>-1)&&(!t||Ne.para.heatmap&&Ne.para.heatmap.collect_tags&&Ne.para.heatmap.collect_tags.div?!!(d(Ne.para.heatmap)&&d(Ne.para.heatmap.collect_tags)&&d(Ne.para.heatmap.collect_tags.div)&&u(Ne.para.heatmap.collect_tags.div.ignore_tags,e)>-1):u(["mark","/mark","strong","b","em","i","u","abbr","ins","del","s","sup"],e)>-1)},isCollectableDiv:function(e,t){try{if(0===e.children.length)return!0;for(var r=0;r<e.children.length;r++)if(1===e.children[r].nodeType){var n=e.children[r].tagName.toLowerCase(),i=Ne.para&&Ne.para.heatmap&&Ne.para.heatmap.collect_tags&&Ne.para.heatmap.collect_tags.div&&Ne.para.heatmap.collect_tags.div.max_level;if(!("div"===n&&i>1||this.isStyleTag(n,t)))return!1;if(!this.isCollectableDiv(e.children[r],t))return!1}return!0}catch(e){Ne.log(e)}return!1},getCollectableParent:function(e,t){try{var r=e.parentNode,n=r?r.tagName.toLowerCase():"";if("body"===n)return!1;var i=Ne.para&&Ne.para.heatmap&&Ne.para.heatmap.collect_tags&&Ne.para.heatmap.collect_tags.div&&Ne.para.heatmap.collect_tags.div.max_level;if(n&&"div"===n&&(i>1||this.isCollectableDiv(r,t)))return r;if(r&&this.isStyleTag(n,t))return this.getCollectableParent(r,t)}catch(e){Ne.log(e)}return!1},initScrollmap:function(){if(!d(Ne.para.heatmap)||"default"!==Ne.para.heatmap.scroll_notice_map)return!1;var e=function(){return!(Ne.para.scrollmap&&a(Ne.para.scrollmap.collect_url)&&!Ne.para.scrollmap.collect_url())},t=function(e){var t={};return t.timeout=e.timeout||1e3,t.func=e.func,t.hasInit=!1,t.inter=null,t.main=function(e,t){this.func(e,t),this.inter=null},t.go=function(e){var r={};this.inter||(r.$viewport_position=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||0,r.$viewport_position=Math.round(r.$viewport_position)||0,r.$viewport_height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,r.$viewport_width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,e?t.main(r,!0):this.inter=setTimeout((function(){t.main(r)}),this.timeout))},t}({timeout:1e3,func:function(e,t){var r=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||0,n=new Date,i=n-this.current_time;(i>Ne.para.heatmap.scroll_delay_time&&r-e.$viewport_position!=0||t)&&(e.$url=z(),e.$title=document.title,e.$url_path=location.pathname,e.event_duration=Math.min(Ne.para.heatmap.scroll_event_duration,parseInt(i)/1e3),e.event_duration=e.event_duration<0?0:e.event_duration,Ne.track("$WebStay",e)),this.current_time=n}});t.current_time=new Date,be(window,"scroll",(function(){return!!e()&&void t.go()})),be(window,"unload",(function(){return!!e()&&void t.go("notime")}))},initHeatmap:function(){var e=this;return!(!d(Ne.para.heatmap)||"default"!==Ne.para.heatmap.clickmap)&&!(a(Ne.para.heatmap.collect_url)&&!Ne.para.heatmap.collect_url())&&("all"===Ne.para.heatmap.collect_elements?Ne.para.heatmap.collect_elements="all":Ne.para.heatmap.collect_elements="interact",void("all"===Ne.para.heatmap.collect_elements?be(document,"click",(function(t){var r=t||window.event;if(!r)return!1;var n=r.target||r.srcElement;if("object"!=typeof n)return!1;if("string"!=typeof n.tagName)return!1;var i=n.tagName.toLowerCase();if("body"===i||"html"===i)return!1;if(!n||!n.parentNode||!n.parentNode.children)return!1;var a=n.parentNode.tagName.toLowerCase();"a"===a||"button"===a?e.start(r,n.parentNode,a):e.start(r,n,i)})):be(document,"click",(function(t){var r=t||window.event;if(!r)return!1;var n=r.target||r.srcElement,i=Ne.heatmap.getTargetElement(n,t);i?e.start(r,i,i.tagName.toLowerCase()):w(n)&&"div"===n.tagName.toLowerCase()&&d(Ne.para.heatmap)&&Ne.para.heatmap.get_vtrack_config&&Ne.unlimitedDiv.events.length>0&&Ne.unlimitedDiv.isTargetEle(n)&&e.start(r,n,n.tagName.toLowerCase(),{$lib_method:"vtrack"})}))))}},st={regChecks:{regName:/^((?!^distinct_id$|^original_id$|^time$|^properties$|^id$|^first_id$|^second_id$|^users$|^events$|^event$|^user_id$|^date$|^datetime$)[a-zA-Z_$][a-zA-Z\d_$]{0,99})$/i},checkPropertiesKey:function(e){var r=this,n=!0;return t(e,(function(e,t){r.regChecks.regName.test(t)||(n=!1)})),n},check:function(e,t){return"string"==typeof this[e]?this[this[e]](t):a(this[e])?this[e](t):void 0},str:function(e){return!(!h(e)||""===e)||($("请检查参数格式,必须是字符串且有值"),!1)},properties:function(e){return Y(e),!(e&&(d(e)?!this.checkPropertiesKey(e)&&($("properties 里的自定义属性名需要是合法的变量名，不能以数字开头，且只包含：大小写字母、数字、下划线，自定义属性不能以 $ 开头"),0):($("properties可以没有，但有的话必须是对象"),0)))},propertiesMust:function(e){return Y(e),void 0===e||!d(e)||f(e)?($("properties必须是对象且有值"),!0):!!this.checkPropertiesKey(e)||($("properties 里的自定义属性名需要是合法的变量名，不能以数字开头，且只包含：大小写字母、数字、下划线，自定义属性不能以 $ 开头"),!0)},event:function(e){return!(!h(e)||!this.regChecks.regName.test(e))||($("请检查参数格式，eventName 必须是字符串，且需是合法的变量名，即不能以数字开头，且只包含：大小写字母、数字、下划线和 $,其中以 $ 开头的表明是系统的保留字段，自定义事件名请不要以 $ 开头"),!0)},item_type:"str",item_id:"str",distinct_id:function(e){return!(!h(e)||!/^.{1,255}$/.test(e))||($("distinct_id必须是不能为空，且小于255位的字符串"),!1)}},ot={check:function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&!st.check(t,e[t]))return!1;return!0},sendItem:function(e){var t={lib:{$lib:"js",$lib_method:"code",$lib_version:String(Ne.lib_version)},time:1*new Date};n(t,e),te(t.properties),X(t),Q(t),t.properties&&"$project"in t.properties&&(t.project=String(t.properties.$project),delete t.properties.$project),Ne.sendState.getSendCall(t)},send:function(e,t){var r=Ne.kit.buildData(e);Ne.kit.sendData(r,t)},debugPath:function(e){var t=e;xe({url:-1!==Ne.para.debug_mode_url.indexOf("?")?Ne.para.debug_mode_url+"&data="+encodeURIComponent(A(e)):Ne.para.debug_mode_url+"?data="+encodeURIComponent(A(e)),type:"GET",cors:!0,header:{"Dry-Run":String(Ne.para.debug_mode_upload)},success:function(e){!0===f(e)?alert("debug数据发送成功"+t):alert("debug失败 错误原因"+JSON.stringify(e))}})}},ct={setOnlineState:function(e){if(!0===e&&d(Ne.para.jsapp)&&"function"==typeof Ne.para.jsapp.getData){Ne.para.jsapp.isOnline=!0;var r=Ne.para.jsapp.getData();Je(r)&&r.length>0&&t(r,(function(e){b(e)&&Ne.sendState.realtimeSend(JSON.parse(e))}))}else Ne.para.jsapp.isOnline=!1},autoTrackIsUsed:!1,isReady:function(e){e()},getUtm:function(){return Ge.campaignParams()},getStayTime:function(){return(new Date-Ne._t)/1e3},setProfileLocal:function(e){if(!Ye.isSupport())return Ne.setProfile(e),!1;if(!d(e)||f(e))return!1;var t=Ye.parse("sensorsdata_2015_jssdk_profile"),r=!1;if(d(t)&&!f(t)){for(var n in e)(!(n in t)||t[n]===e[n])&&n in t||(t[n]=e[n],r=!0);r&&(Ye.set("sensorsdata_2015_jssdk_profile",JSON.stringify(t)),Ne.setProfile(e))}else Ye.set("sensorsdata_2015_jssdk_profile",JSON.stringify(e)),Ne.setProfile(e)},setInitReferrer:function(){var e=pe();Ne.setOnceProfile({_init_referrer:e,_init_referrer_host:Ge.pageProp.referrer_host})},setSessionReferrer:function(){var e=pe();Ne.store.setSessionPropsOnce({_session_referrer:e,_session_referrer_host:Ge.pageProp.referrer_host})},setDefaultAttr:function(){Ge.register({_current_url:location.href,_referrer:pe(),_referring_host:Ge.pageProp.referrer_host})},trackHeatMap:function(e,t,r){if("object"==typeof e&&e.tagName){var n=e.tagName.toLowerCase(),i=e.parentNode.tagName.toLowerCase(),a=Ne.para.heatmap&&Ne.para.heatmap.track_attr?Ne.para.heatmap.track_attr:["data-sensors-click"];"button"===n||"a"===n||"a"===i||"button"===i||"input"===n||"textarea"===n||E(e,a)||at.start(null,e,n,t,r)}},trackAllHeatMap:function(e,t,r){if("object"==typeof e&&e.tagName){var n=e.tagName.toLowerCase();at.start(null,e,n,t,r)}},autoTrackSinglePage:function(e,r){function i(){var e=Ge.campaignParams(),r={};return t(e,(function(e,t,n){-1!==(" "+Ne.source_channel_standard+" ").indexOf(" "+t+" ")?r["$"+t]=n[t]:r[t]=n[t]})),r}function a(e,t){Ne.track("$pageview",n({$referrer:s,$url:z(),$url_path:location.pathname,$title:document.title},e,i()),t),s=z()}var s;s=this.autoTrackIsUsed?Ge.pageProp.url:Ge.pageProp.referrer;var o=!(e=d(e)?e:{}).not_set_profile;if(e.not_set_profile&&delete e.not_set_profile,a(e,r),this.autoTrackSinglePage=a,Ne.is_first_visitor&&o){var c={};Ne.para.preset_properties.search_keyword_baidu&&le(document.referrer)&&se()&&(c.$search_keyword_id=Ze.id(),c.$search_keyword_id_type=Ze.type(),c.$search_keyword_id_hash=k(c.$search_keyword_id)),Ne.setOnceProfile(n({$first_visit_time:new Date,$first_referrer:pe(),$first_browser_language:navigator.language||"取值异常",$first_browser_charset:"string"==typeof document.charset?document.charset.toUpperCase():"取值异常",$first_traffic_source_type:he(),$first_search_keyword:fe()},i(),c)),Ne.is_first_visitor=!1}},autoTrackWithoutProfile:function(e,t){e=d(e)?e:{},this.autoTrack(n(e,{not_set_profile:!0}),t)},autoTrack:function(e,r){e=d(e)?e:{};var i=Ge.campaignParams(),a={};t(i,(function(e,t,r){-1!==(" "+Ne.source_channel_standard+" ").indexOf(" "+t+" ")?a["$"+t]=r[t]:a[t]=r[t]}));var s=!e.not_set_profile;e.not_set_profile&&delete e.not_set_profile;var o=location.href;if(Ne.para.is_single_page&&Se((function(){var t=pe(o);Ne.track("$pageview",n({$referrer:t,$url:z(),$url_path:location.pathname,$title:document.title},a,e),r),o=z()})),Ne.track("$pageview",n({$referrer:pe(),$url:z(),$url_path:location.pathname,$title:document.title},a,e),r),Ne.is_first_visitor&&s){var c={};Ne.para.preset_properties.search_keyword_baidu&&le(document.referrer)&&se()&&(c.$search_keyword_id=Ze.id(),c.$search_keyword_id_type=Ze.type(),c.$search_keyword_id_hash=k(c.$search_keyword_id)),Ne.setOnceProfile(n({$first_visit_time:new Date,$first_referrer:pe(),$first_browser_language:navigator.language||"取值异常",$first_browser_charset:"string"==typeof document.charset?document.charset.toUpperCase():"取值异常",$first_traffic_source_type:he(),$first_search_keyword:fe()},a,c)),Ne.is_first_visitor=!1}this.autoTrackIsUsed=!0},getAnonymousID:function(){return f(Ne.store._state)?"请先初始化SDK":Ne.store._state._first_id||Ne.store._state.first_id||Ne.store._state._distinct_id||Ne.store._state.distinct_id},setPlugin:function(e){return!!d(e)&&void t(e,(function(e,t){a(e)&&(d(window.SensorsDataWebJSSDKPlugin)&&window.SensorsDataWebJSSDKPlugin[t]?e(window.SensorsDataWebJSSDKPlugin[t]):Ne.log(t+"没有获取到,请查阅文档，调整"+t+"的引入顺序！"))}))},useModulePlugin:function(){Ne.use.apply(Ne,arguments)},useAppPlugin:function(){this.setPlugin.apply(this,arguments)}};Ne.para_default={preset_properties:{search_keyword_baidu:!1,latest_utm:!0,latest_traffic_source_type:!0,latest_search_keyword:!0,latest_referrer:!0,latest_referrer_host:!1,latest_landing_page:!1,latest_wx_ad_click_id:void 0,url:!0,title:!0},encrypt_cookie:!1,img_use_crossorigin:!1,name:"sa",max_referrer_string_length:200,max_string_length:500,cross_subdomain:!0,show_log:!1,is_debug:!1,debug_mode:!1,debug_mode_upload:!1,source_channel:[],send_type:"image",vtrack_ignore:{},auto_init:!0,is_track_single_page:!1,is_single_page:!1,batch_send:!1,source_type:{},callback_timeout:200,datasend_timeout:8e3,is_track_device_id:!1,ignore_oom:!0,app_js_bridge:!1},Ne.addReferrerHost=function(e){var t="取值异常";d(e.properties)&&(e.properties.$first_referrer&&(e.properties.$first_referrer_host=W(e.properties.$first_referrer,t)),"track"!==e.type&&"track_signup"!==e.type||("$referrer"in e.properties&&(e.properties.$referrer_host=""===e.properties.$referrer?"":W(e.properties.$referrer,t)),Ne.para.preset_properties.latest_referrer&&Ne.para.preset_properties.latest_referrer_host&&(e.properties.$latest_referrer_host=""===e.properties.$latest_referrer?"":W(e.properties.$latest_referrer,t))))},Ne.addPropsHook=function(e){Ne.para.preset_properties&&Ne.para.preset_properties.url&&("track"===e.type||"track_signup"===e.type)&&void 0===e.properties.$url&&(e.properties.$url=z()),Ne.para.preset_properties&&Ne.para.preset_properties.title&&("track"===e.type||"track_signup"===e.type)&&void 0===e.properties.$title&&(e.properties.$title=document.title)},Ne.initPara=function(e){n(Ke,e||Ne.para||{}),Ne.para=Ke;var t,r={};if(d(Ne.para.is_track_latest))for(var i in Ne.para.is_track_latest)r["latest_"+i]=Ne.para.is_track_latest[i];for(t in Ne.para.preset_properties=n({},Ne.para_default.preset_properties,r,Ne.para.preset_properties||{}),Ne.para_default)void 0===Ne.para[t]&&(Ne.para[t]=Ne.para_default[t]);"string"==typeof Ne.para.server_url&&(Ne.para.server_url=p(Ne.para.server_url),Ne.para.server_url&&("://"===Ne.para.server_url.slice(0,3)?Ne.para.server_url=location.protocol.slice(0,-1)+Ne.para.server_url:"//"===Ne.para.server_url.slice(0,2)?Ne.para.server_url=location.protocol+Ne.para.server_url:"http"!==Ne.para.server_url.slice(0,4)&&(Ne.para.server_url=""))),"string"!=typeof Ne.para.web_url||"://"!==Ne.para.web_url.slice(0,3)&&"//"!==Ne.para.web_url.slice(0,2)||("://"===Ne.para.web_url.slice(0,3)?Ne.para.web_url=location.protocol.slice(0,-1)+Ne.para.web_url:Ne.para.web_url=location.protocol+Ne.para.web_url),"image"!==Ne.para.send_type&&"ajax"!==Ne.para.send_type&&"beacon"!==Ne.para.send_type&&(Ne.para.send_type="image"),Ne.debug.protocol.serverUrl(),Ne.bridge.initPara(),Ne.bridge.initState();var a={datasend_timeout:6e3,send_interval:6e3};Ye.isSupport()&&me()&&"object"==typeof localStorage?!0===Ne.para.batch_send?Ne.para.batch_send=n({},a):"object"==typeof Ne.para.batch_send&&(Ne.para.batch_send=n({},a,Ne.para.batch_send)):Ne.para.batch_send=!1;var s=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],o=["www.baidu.","m.baidu.","m.sm.cn","so.com","sogou.com","youdao.com","google.","yahoo.com/","bing.com/","ask.com/"],c=["weibo.com","renren.com","kaixin001.com","douban.com","qzone.qq.com","zhihu.com","tieba.baidu.com","weixin.qq.com"],f={baidu:["wd","word","kw","keyword"],google:"q",bing:"q",yahoo:"p",sogou:["query","keyword"],so:"q",sm:"q"};"object"==typeof Ne.para.source_type&&(Ne.para.source_type.utm=Je(Ne.para.source_type.utm)?Ne.para.source_type.utm.concat(s):s,Ne.para.source_type.search=Je(Ne.para.source_type.search)?Ne.para.source_type.search.concat(o):o,Ne.para.source_type.social=Je(Ne.para.source_type.social)?Ne.para.source_type.social.concat(c):c,Ne.para.source_type.keyword=d(Ne.para.source_type.keyword)?n(f,Ne.para.source_type.keyword):f);var _=["mark","/mark","strong","b","em","i","u","abbr","ins","del","s","sup"];if(Ne.para.heatmap&&!d(Ne.para.heatmap)&&(Ne.para.heatmap={}),d(Ne.para.heatmap)){Ne.para.heatmap.clickmap=Ne.para.heatmap.clickmap||"default",Ne.para.heatmap.scroll_notice_map=Ne.para.heatmap.scroll_notice_map||"default",Ne.para.heatmap.scroll_delay_time=Ne.para.heatmap.scroll_delay_time||4e3,Ne.para.heatmap.scroll_event_duration=Ne.para.heatmap.scroll_event_duration||18e3,Ne.para.heatmap.renderRefreshTime=Ne.para.heatmap.renderRefreshTime||1e3,Ne.para.heatmap.loadTimeout=Ne.para.heatmap.loadTimeout||1e3,!0!==Ne.para.heatmap.get_vtrack_config&&(Ne.para.heatmap.get_vtrack_config=!1);var h=Je(Ne.para.heatmap.track_attr)?l(Ne.para.heatmap.track_attr,(function(e){return e&&"string"==typeof e})):[];if(h.push("data-sensors-click"),Ne.para.heatmap.track_attr=h,d(Ne.para.heatmap.collect_tags))if(!0===Ne.para.heatmap.collect_tags.div)Ne.para.heatmap.collect_tags.div={ignore_tags:_,max_level:1};else if(d(Ne.para.heatmap.collect_tags.div)){if(Ne.para.heatmap.collect_tags.div.ignore_tags?Je(Ne.para.heatmap.collect_tags.div.ignore_tags)||(Ne.log("ignore_tags 参数必须是数组格式"),Ne.para.heatmap.collect_tags.div.ignore_tags=_):Ne.para.heatmap.collect_tags.div.ignore_tags=_,Ne.para.heatmap.collect_tags.div.max_level){-1===u([1,2,3],Ne.para.heatmap.collect_tags.div.max_level)&&(Ne.para.heatmap.collect_tags.div.max_level=1)}}else Ne.para.heatmap.collect_tags.div=!1;else Ne.para.heatmap.collect_tags={div:!1}}if(Je(Ne.para.server_url)&&Ne.para.server_url.length)for(t=0;t<Ne.para.server_url.length;t++)/sa\.gif[^\/]*$/.test(Ne.para.server_url[t])||(Ne.para.server_url[t]=Ne.para.server_url[t].replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));else/sa\.gif[^\/]*$/.test(Ne.para.server_url)||"string"!=typeof Ne.para.server_url||(Ne.para.server_url=Ne.para.server_url.replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));"string"==typeof Ne.para.server_url&&(Ne.para.debug_mode_url=Ne.para.debug_mode_url||Ne.para.server_url.replace("sa.gif","debug")),!0===Ne.para.noCache?Ne.para.noCache="?"+(new Date).getTime():Ne.para.noCache="",Ne.para.callback_timeout>Ne.para.datasend_timeout&&(Ne.para.datasend_timeout=Ne.para.callback_timeout)},Ne.readyState={state:0,historyState:[],stateType:{1:"1-init未开始",2:"2-init开始",3:"3-store完成"},getState:function(){return this.historyState.join("\n")},setState:function(e){String(e)in this.stateType&&(this.state=e),this.historyState.push(this.stateType[e])}},Ne.setPreConfig=function(e){Ne.para=e.para,Ne._q=e._q},Ne.setInitVar=function(){Ne._t=Ne._t||1*new Date,Ne.lib_version=Ve,Ne.is_first_visitor=!1,Ne.source_channel_standard=ze},Ne.log=$,Ne.enableLocalLog=function(){if(et.isSupport())try{sessionStorage.setItem("sensorsdata_jssdk_debug","true")}catch(e){Ne.log("enableLocalLog error: "+e.message)}},Ne.disableLocalLog=function(){et.isSupport()&&sessionStorage.removeItem("sensorsdata_jssdk_debug")},Ne.debug=qe,Ne.quick=function(){var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1);return"string"==typeof t&&ct[t]?ct[t].apply(ct,r):void("function"==typeof t?t.apply(Ne,r):Ne.log("quick方法中没有这个功能"+e[0]))},Ne.use=function(e,t){return h(e)?d(window.SensorsDataWebJSSDKPlugin)&&d(window.SensorsDataWebJSSDKPlugin[e])&&a(window.SensorsDataWebJSSDKPlugin[e].init)?(window.SensorsDataWebJSSDKPlugin[e].init(Ne,t),window.SensorsDataWebJSSDKPlugin[e]):d(Ne.modules)&&d(Ne.modules[e])&&a(Ne.modules[e].init)?(Ne.modules[e].init(Ne,t),Ne.modules[e]):void Ne.log(e+"没有获取到,请查阅文档，调整"+e+"的引入顺序！"):(Ne.log("use插件名称必须是字符串！"),!1)},Ne.track=function(e,t,r){ot.check({event:e,properties:t})&&ot.send({type:"track",event:e,properties:t},r)},Ne.trackLink=function(e,t,r){function n(e,t,r){function n(e){function n(){a||(a=!0,location.href=i.href)}e.stopPropagation(),e.preventDefault();var a=!1;setTimeout(n,1e3),Ne.track(t,r,n)}var i=null;return(e=e||{}).ele&&(i=e.ele),e.event&&(i=e.target?e.target:e.event.target),r=r||{},!(!i||"object"!=typeof i)&&(!i.href||/^javascript/.test(i.href)||i.target||i.download||i.onclick?(Ne.track(t,r),!1):(e.event&&n(e.event),void(e.ele&&be(e.ele,"click",(function(e){n(e)})))))}"object"==typeof e&&e.tagName?n({ele:e},t,r):"object"==typeof e&&e.target&&e.event&&n(e,t,r)},Ne.trackLinks=function(e,t,r){return r=r||{},!(!e||"object"!=typeof e)&&!(!e.href||/^javascript/.test(e.href)||e.target)&&void be(e,"click",(function(n){function i(){a||(a=!0,location.href=e.href)}n.preventDefault();var a=!1;setTimeout(i,1e3),Ne.track(t,r,i)}))},Ne.setItem=function(e,t,r){ot.check({item_type:e,item_id:t,properties:r})&&ot.sendItem({type:"item_set",item_type:e,item_id:t,properties:r||{}})},Ne.deleteItem=function(e,t){ot.check({item_type:e,item_id:t})&&ot.sendItem({type:"item_delete",item_type:e,item_id:t})},Ne.setProfile=function(e,t){ot.check({propertiesMust:e})&&ot.send({type:"profile_set",properties:e},t)},Ne.setOnceProfile=function(e,t){ot.check({propertiesMust:e})&&ot.send({type:"profile_set_once",properties:e},t)},Ne.appendProfile=function(e,r){ot.check({propertiesMust:e})&&(t(e,(function(t,r){h(t)?e[r]=[t]:Je(t)?e[r]=t:(delete e[r],Ne.log("appendProfile属性的值必须是字符串或者数组"))})),f(e)||ot.send({type:"profile_append",properties:e},r))},Ne.incrementProfile=function(e,t){var r=e;h(e)&&((e={})[r]=1),ot.check({propertiesMust:e})&&(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&!/-*\d+/.test(String(e[t])))return!1;return!0}(e)?ot.send({type:"profile_increment",properties:e},t):Ne.log("profile_increment的值只能是数字"))},Ne.deleteProfile=function(e){ot.send({type:"profile_delete"},e),it.set("distinct_id",Xe()),it.set("first_id","")},Ne.unsetProfile=function(e,r){var n=e,i={};h(e)&&(e=[]).push(n),Je(e)?(t(e,(function(e){h(e)?i[e]=!0:Ne.log("profile_unset给的数组里面的值必须时string,已经过滤掉",e)})),ot.send({type:"profile_unset",properties:i},r)):Ne.log("profile_unset的参数是数组")},Ne.identify=function(e,t){"number"==typeof e&&(e=String(e));var r=it.getFirstId();if(void 0===e){var n=Xe();r?it.set("first_id",n):it.set("distinct_id",n)}else ot.check({distinct_id:e})?!0===t?r?it.set("first_id",e):it.set("distinct_id",e):r?it.change("first_id",e):it.change("distinct_id",e):Ne.log("identify的参数必须是字符串")},Ne.trackSignup=function(e,t,r,n){if(ot.check({distinct_id:e,event:t,properties:r})){var i=it.getFirstId()||it.getDistinctId();it.set("distinct_id",e),ot.send({original_id:i,distinct_id:e,type:"track_signup",event:t,properties:r},n)}},Ne.registerPage=function(e){ot.check({properties:e})?n(Ge.currentProps,e):Ne.log("register输入的参数有误")},Ne.clearAllRegister=function(e){it.clearAllProps(e)},Ne.clearPageRegister=function(e){var t;if(Je(e)&&e.length>0)for(t=0;t<e.length;t++)h(e[t])&&e[t]in Ge.currentProps&&delete Ge.currentProps[e[t]];else if(!0===e)for(t in Ge.currentProps)delete Ge.currentProps[t]},Ne.register=function(e){ot.check({properties:e})?it.setProps(e):Ne.log("register输入的参数有误")},Ne.registerOnce=function(e){ot.check({properties:e})?it.setPropsOnce(e):Ne.log("registerOnce输入的参数有误")},Ne.registerSession=function(e){ot.check({properties:e})?it.setSessionProps(e):Ne.log("registerSession输入的参数有误")},Ne.registerSessionOnce=function(e){ot.check({properties:e})?it.setSessionPropsOnce(e):Ne.log("registerSessionOnce输入的参数有误")},Ne.login=function(e,t){if("number"==typeof e&&(e=String(e)),ot.check({distinct_id:e})){var r=it.getFirstId(),n=it.getDistinctId();e!==n?(r||it.set("first_id",n),Ne.trackSignup(e,"$SignUp",{},t)):t&&t()}else Ne.log("login的参数必须是字符串"),t&&t()},Ne.logout=function(e){var t=it.getFirstId();if(t)if(it.set("first_id",""),!0===e){var r=Xe();it.set("distinct_id",r)}else it.set("distinct_id",t);else Ne.log("没有first_id，logout失败")},Ne.getPresetProperties=function(){var e={$is_first_day:Qe.getNewUser(),$referrer:Ge.pageProp.referrer||"",$referrer_host:Ge.pageProp.referrer?W(Ge.pageProp.referrer):"",$url:z(),$url_path:location.pathname,$title:document.title||"",_distinct_id:it.getDistinctId()},r=n({},Ge.properties(),Ne.store.getProps(),function(){var e=Ge.campaignParams(),r={};return t(e,(function(e,t,n){-1!==(" "+Ne.source_channel_standard+" ").indexOf(" "+t+" ")?r["$"+t]=n[t]:r[t]=n[t]})),r}(),e);return Ne.para.preset_properties.latest_referrer&&Ne.para.preset_properties.latest_referrer_host&&(r.$latest_referrer_host=""===r.$latest_referrer?"":W(r.$latest_referrer)),r},Ne.detectMode=function(){var e={searchKeywordMatch:location.search.match(/sa-request-id=([^&#]+)/),isSeachHasKeyword:function(){var e=this.searchKeywordMatch;return!!(e&&e[0]&&e[1])&&("string"==typeof sessionStorage.getItem("sensors-visual-mode")&&sessionStorage.removeItem("sensors-visual-mode"),!0)},hasKeywordHandle:function(){var e=this.searchKeywordMatch,t=location.search.match(/sa-request-type=([^&#]+)/),r=location.search.match(/sa-request-url=([^&#]+)/);at.setNotice(r),et.isSupport()&&(r&&r[0]&&r[1]&&sessionStorage.setItem("sensors_heatmap_url",decodeURIComponent(r[1])),sessionStorage.setItem("sensors_heatmap_id",e[1]),t&&t[0]&&t[1]?"1"===t[1]||"2"===t[1]||"3"===t[1]?(t=t[1],sessionStorage.setItem("sensors_heatmap_type",t)):t=null:t=null!==sessionStorage.getItem("sensors_heatmap_type")?sessionStorage.getItem("sensors_heatmap_type"):null),this.isReady(e[1],t)},isReady:function(e,t,r){Ne.para.heatmap_url?L({success:function(){setTimeout((function(){"undefined"!=typeof sa_jssdk_heatmap_render&&(sa_jssdk_heatmap_render(Ne,e,t,r),"object"==typeof console&&"function"==typeof console.log&&(Ne.heatmap_version&&Ne.heatmap_version===Ne.lib_version||console.log("heatmap.js与sensorsdata.js版本号不一致，可能存在风险!")))}),0)},error:function(){},type:"js",url:Ne.para.heatmap_url}):Ne.log("没有指定heatmap_url的路径")},isStorageHasKeyword:function(){return et.isSupport()&&"string"==typeof sessionStorage.getItem("sensors_heatmap_id")},storageHasKeywordHandle:function(){at.setNotice(),e.isReady(sessionStorage.getItem("sensors_heatmap_id"),sessionStorage.getItem("sensors_heatmap_type"),location.href)}},r={isStorageHasKeyword:function(){return et.isSupport()&&"string"==typeof sessionStorage.getItem("sensors-visual-mode")},isSearchHasKeyword:function(){return!!location.search.match(/sa-visual-mode=true/)&&("string"==typeof sessionStorage.getItem("sensors_heatmap_id")&&sessionStorage.removeItem("sensors_heatmap_id"),!0)},loadVtrack:function(){L({success:function(){},error:function(){},type:"js",url:Ne.para.vtrack_url?Ne.para.vtrack_url:location.protocol+"//static.sensorsdata.cn/sdk/"+Ne.lib_version+"/vtrack.min.js"})},messageListener:function(e){if("sa-fe"!==e.data.source)return!1;if("v-track-mode"===e.data.type){if(e.data.data&&e.data.data.isVtrack)if(et.isSupport()&&sessionStorage.setItem("sensors-visual-mode","true"),e.data.data.userURL&&location.search.match(/sa-visual-mode=true/)){var t=function(e){return Fe.isHttpUrl(e)?Fe.removeScriptProtocol(e):(Ne.log("可视化模式检测 URL 失败"),!1)}(e.data.data.userURL);t&&(window.location.href=t)}else r.loadVtrack();window.removeEventListener("message",r.messageListener,!1)}},removeMessageHandle:function(){window.removeEventListener&&window.removeEventListener("message",r.messageListener,!1)},verifyVtrackMode:function(){window.addEventListener&&window.addEventListener("message",r.messageListener,!1),r.postMessage()},postMessage:function(){window.parent&&window.parent.postMessage&&window.parent.postMessage({source:"sa-web-sdk",type:"v-is-vtrack",data:{sdkversion:"1.19.3"}},"*")},notifyUser:function(){var e=function(t){return"sa-fe"===t.data.source&&void("v-track-mode"===t.data.type&&(t.data.data&&t.data.data.isVtrack&&alert("当前版本不支持，请升级部署神策数据治理"),window.removeEventListener("message",e,!1)))};window.addEventListener&&window.addEventListener("message",e,!1),r.postMessage()}},i=function(e){function t(){var e=[];r.touch_app_bridge||e.push(Ne.debug.defineMode("1")),d(Ne.para.app_js_bridge)||(e.push(Ne.debug.defineMode("2")),r.verify_success=!1),d(Ne.para.heatmap)&&"default"==Ne.para.heatmap.clickmap||e.push(Ne.debug.defineMode("3")),"fail"===r.verify_success&&e.push(Ne.debug.defineMode("4"));var t={callType:"app_alert",data:e};SensorsData_App_Visual_Bridge&&SensorsData_App_Visual_Bridge.sensorsdata_visualized_alert_info?SensorsData_App_Visual_Bridge.sensorsdata_visualized_alert_info(JSON.stringify(t)):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage(JSON.stringify(t))}var r=Ne.bridge.bridge_info;if(d(window.SensorsData_App_Visual_Bridge)&&window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode&&(!0===window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode||window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode()))if(d(Ne.para.heatmap)&&"default"==Ne.para.heatmap.clickmap)if(d(Ne.para.app_js_bridge)&&"success"===r.verify_success)if(e)sa_jssdk_app_define_mode(Ne,e);else{var n=location.protocol;L({success:function(){setTimeout((function(){"undefined"!=typeof sa_jssdk_app_define_mode&&sa_jssdk_app_define_mode(Ne,e)}),0)},error:function(){},type:"js",url:(n=u(["http:","https:"],n)>-1?n:"https:")+"//static.sensorsdata.cn/sdk/"+Ne.lib_version+"/vapph5define.min.js"})}else t();else t()};Ne.para.heatmap&&Ne.para.heatmap.collect_tags&&d(Ne.para.heatmap.collect_tags)&&t(Ne.para.heatmap.collect_tags,(function(e,t){"div"!==t&&e&&Ne.heatmap.otherTags.push(t)})),e.isSeachHasKeyword()?e.hasKeywordHandle():window.parent!==self&&r.isSearchHasKeyword()?r.verifyVtrackMode():e.isStorageHasKeyword()?e.storageHasKeywordHandle():window.parent!==self&&r.isStorageHasKeyword()?r.verifyVtrackMode():(Ne.readyState.setState(3),new Ne.JSBridge({type:"visualized",app_call_js:function(){i("undefined"!=typeof sa_jssdk_app_define_mode)}}),i(!1),Ne.bridge.app_js_bridge_v1(),Ge.initPage(),Ne.para.is_track_single_page&&ke((function(e){var t=function(t){t=t||{},e!==location.href&&(Ge.pageProp.referrer=z(e),Ne.quick("autoTrack",n({$url:z(),$referrer:z(e)},t)))};if("boolean"==typeof Ne.para.is_track_single_page)t();else if("function"==typeof Ne.para.is_track_single_page){var r=Ne.para.is_track_single_page();d(r)?t(r):!0===r&&t()}})),Ne.para.batch_send&&(be(window,"onpagehide"in window?"pagehide":"unload",(function(){Ne.batchSend.clearPendingStatus()})),Ne.batchSend.batchInterval()),Ne.store.init(),Ne.vtrackBase.init(),Ne.readyState.setState(4),Ne._q&&Je(Ne._q)&&Ne._q.length>0&&t(Ne._q,(function(e){Ne[e[0]].apply(Ne,Array.prototype.slice.call(e[1]))})),d(Ne.para.heatmap)&&(at.initHeatmap(),at.initScrollmap()),r.notifyUser())},Ne.iOSWebClickPolyfill=function(){var e="",r=" { cursor: pointer; -webkit-tap-highlight-color: rgba(0,0,0,0); }";Ne.heatmap&&Je(Ne.heatmap.otherTags)&&t(Ne.heatmap.otherTags,(function(t){e+=t+r})),Ne._.isIOS()&&Ne._.getIOSVersion()&&Ne._.getIOSVersion()<13&&(Ne.para.heatmap&&Ne.para.heatmap.collect_tags&&Ne.para.heatmap.collect_tags.div&&Ne._.setCssStyle("div, [data-sensors-click]"+r),Ne.para.heatmap&&Ne.para.heatmap.track_attr&&Ne._.setCssStyle("["+Ne.para.heatmap.track_attr.join("], [")+"]"+r),""!==e&&Ne._.setCssStyle(e))};var ut={buildData:function(e){var t={distinct_id:Ne.store.getDistinctId(),lib:{$lib:"js",$lib_method:"code",$lib_version:String(Ne.lib_version)},properties:{}};return d(e)&&d(e.properties)&&!f(e.properties)&&(e.properties.$lib_detail&&(t.lib.$lib_detail=e.properties.$lib_detail,delete e.properties.$lib_detail),e.properties.$lib_method&&(t.lib.$lib_method=e.properties.$lib_method,delete e.properties.$lib_method)),n(t,Ne.store.getUnionId(),e),d(e.properties)&&!f(e.properties)&&n(t.properties,e.properties),e.type&&"profile"===e.type.slice(0,7)||(t.properties=n({},Ge.properties(),it.getProps(),it.getSessionProps(),Ge.currentProps,t.properties),Ne.para.preset_properties.latest_referrer&&!h(t.properties.$latest_referrer)&&(t.properties.$latest_referrer="取值异常"),Ne.para.preset_properties.latest_search_keyword&&!h(t.properties.$latest_search_keyword)&&(Ne.para.preset_properties.search_keyword_baidu&&h(t.properties.$search_keyword_id)&&y(t.properties.$search_keyword_id_hash)&&h(t.properties.$search_keyword_id_type)||(t.properties.$latest_search_keyword="取值异常")),Ne.para.preset_properties.latest_traffic_source_type&&!h(t.properties.$latest_traffic_source_type)&&(t.properties.$latest_traffic_source_type="取值异常"),Ne.para.preset_properties.latest_landing_page&&!h(t.properties.$latest_landing_page)&&(t.properties.$latest_landing_page="取值异常"),"not_collect"===Ne.para.preset_properties.latest_wx_ad_click_id?(delete t.properties._latest_wx_ad_click_id,delete t.properties._latest_wx_ad_hash_key,delete t.properties._latest_wx_ad_callbacks):Ne.para.preset_properties.latest_wx_ad_click_id&&!h(t.properties._latest_wx_ad_click_id)&&(t.properties._latest_wx_ad_click_id="取值异常",t.properties._latest_wx_ad_hash_key="取值异常",t.properties._latest_wx_ad_callbacks="取值异常"),h(t.properties._latest_wx_ad_click_id)&&(t.properties.$url=z())),t.properties.$time&&g(t.properties.$time)?(t.time=1*t.properties.$time,delete t.properties.$time):t.time=1*new Date,Ne.vtrackBase.addCustomProps(t),ee(t),te(t.properties),X(t),Q(t),Z(t),nt.checkIsAddSign(t),nt.checkIsFirstTime(t),Ne.addReferrerHost(t),Ne.addPropsHook(t),t},sendData:function(e,t){var r=re(e.properties);!0===Ne.para.debug_mode?(Ne.log(e),Ne.saEvent.debugPath(JSON.stringify(e),t)):Ne.sendState.getSendCall(e,r,t)}},lt=function(e){this.callback=e.callback,this.img=document.createElement("img"),this.img.width=1,this.img.height=1,Ne.para.img_use_crossorigin&&(this.img.crossOrigin="anonymous"),this.data=e.data,this.server_url=function(e,t){var r=A(t),n="crc="+k(r);return-1!==e.indexOf("?")?e+"&data="+encodeURIComponent(r)+"&ext="+encodeURIComponent(n):e+"?data="+encodeURIComponent(r)+"&ext="+encodeURIComponent(n)}(e.server_url,e.data)};lt.prototype.start=function(){var e=this;Ne.para.ignore_oom&&(this.img.onload=function(){this.onload=null,this.onerror=null,this.onabort=null,e.isEnd()},this.img.onerror=function(){this.onload=null,this.onerror=null,this.onabort=null,e.isEnd()},this.img.onabort=function(){this.onload=null,this.onerror=null,this.onabort=null,e.isEnd()}),this.img.src=this.server_url},lt.prototype.lastClear=function(){this.img.src=""};var pt=function(e){this.callback=e.callback,this.server_url=e.server_url,this.data=Oe(e.data)};pt.prototype.start=function(){var e=this;xe({url:this.server_url,type:"POST",data:this.data,credentials:!1,timeout:Ne.para.datasend_timeout,cors:!0,success:function(){e.isEnd()},error:function(){e.isEnd()}})};var dt=function(e){this.callback=e.callback,this.server_url=e.server_url,this.data=Oe(e.data)};dt.prototype.start=function(){var e=this;"object"==typeof navigator&&"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(this.server_url,this.data),setTimeout((function(){e.isEnd()}),40)};var ft={queue:{items:[],enqueue:function(e){this.items.push(e),this.start()},dequeue:function(){return this.items.shift()},getCurrentItem:function(){return this.items[0]},isRun:!1,start:function(){this.items.length>0&&!this.isRun&&(this.isRun=!0,this.getCurrentItem().start())},close:function(){this.dequeue(),this.isRun=!1,this.start()}},getSendCall:function(e,t,r){if(Ne.is_heatmap_render_mode)return!1;if(Ne.readyState.state<3)return Ne.log("初始化没有完成"),!1;e._track_id=Number(String(P()).slice(2,5)+String(P()).slice(2,4)+String((new Date).getTime()).slice(-4)),e._flush_time=(new Date).getTime();var n=e;e=JSON.stringify(e);var i={data:n,config:t,callback:r};return Ne.events.tempAdd("send",n),!Ne.para.app_js_bridge&&Ne.para.batch_send&&localStorage.length<200?(Ne.log(n),Ne.batchSend.add(i.data),!1):("item_set"===n.type||"item_delete"===n.type?this.prepareServerUrl(i):Ne.bridge.dataSend(i,this,r),void Ne.log(n))},prepareServerUrl:function(e){if("object"==typeof e.config&&e.config.server_url)this.sendCall(e,e.config.server_url,e.callback);else if(Je(Ne.para.server_url)&&Ne.para.server_url.length)for(var t=0;t<Ne.para.server_url.length;t++)this.sendCall(e,Ne.para.server_url[t]);else"string"==typeof Ne.para.server_url&&""!==Ne.para.server_url?this.sendCall(e,Ne.para.server_url,e.callback):Ne.log("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！")},sendCall:function(e,t,r){var n={server_url:t,data:JSON.stringify(e.data),callback:r,config:e.config};d(Ne.para.jsapp)&&!Ne.para.jsapp.isOnline&&"function"==typeof Ne.para.jsapp.setData?(delete n.callback,n=JSON.stringify(n),Ne.para.jsapp.setData(n)):this.realtimeSend(n)}};ft.realtimeSend=function(e){var t=function(e){var t=De(e),r=t.start;return t.start=function(){var e=this;r.apply(this,arguments),setTimeout((function(){e.isEnd(!0)}),Ne.para.callback_timeout)},t.end=function(){this.callback&&this.callback();var e=this;setTimeout((function(){e.lastClear&&e.lastClear()}),Ne.para.datasend_timeout-Ne.para.callback_timeout)},t.isEnd=function(){this.received||(this.received=!0,this.end())},t}(e);t.start()},Ce.prototype={add:function(e){d(e)&&(this.writeStore(e),"track_signup"!==e.type&&"$pageview"!==e.event||this.sendStrategy())},clearPendingStatus:function(){this.sendingItemKeys.length&&this.removePendingItems(this.sendingItemKeys)},remove:function(e){this.sendingData>0&&--this.sendingData,Je(e)&&e.length>0&&t(e,(function(e){Ye.remove(e)}))},send:function(e){var t=this;return h(Ne.para.server_url)&&""!==Ne.para.server_url||Je(Ne.para.server_url)&&Ne.para.server_url.length?void xe({url:Je(Ne.para.server_url)?Ne.para.server_url[0]:Ne.para.server_url,type:"POST",data:"data_list="+encodeURIComponent(A(JSON.stringify(e.vals))),credentials:!1,timeout:Ne.para.batch_send.datasend_timeout,cors:!0,success:function(){t.remove(e.keys),t.removePendingItems(e.keys)},error:function(){t.sendingData>0&&--t.sendingData,t.removePendingItems(e.keys)}}):void Ne.log("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！")},appendPendingItems:function(e){if(!1!==Je(e)){this.sendingItemKeys=x(this.sendingItemKeys.concat(e));try{var t=x(this.getPendingItems().concat(e));localStorage.setItem("sawebjssdk-sendingitems",JSON.stringify(t))}catch(e){}}},removePendingItems:function(e){if(!1!==Je(e)){this.sendingItemKeys.length&&(this.sendingItemKeys=l(this.sendingItemKeys,(function(t){return-1===u(e,t)})));try{var t=l(this.getPendingItems(),(function(t){return-1===u(e,t)}));localStorage.setItem("sawebjssdk-sendingitems",JSON.stringify(t))}catch(e){}}},getPendingItems:function(){var e=[];try{var t=localStorage.getItem("sawebjssdk-sendingitems");t&&(e=JSON.parse(t))}catch(e){}return e},sendPrepare:function(e){this.appendPendingItems(e.keys);var t=e.vals;t.length>0&&this.send({keys:e.keys,vals:t})},sendStrategy:function(){if(!1===document.hasFocus())return!1;var e=this.readStore();e.keys.length>0&&0===this.sendingData&&(this.sendingData=1,this.sendPrepare(e))},batchInterval:function(){var e=this;setInterval((function(){e.sendStrategy()}),Ne.para.batch_send.send_interval)},readStore:function(){for(var e=[],t=[],r=null,n=(new Date).getTime(),i=localStorage.length,a=this.getPendingItems(),s=0;s<i;s++){var o=localStorage.key(s);if(0===o.indexOf("sawebjssdk-")&&/^sawebjssdk\-\d+$/.test(o)){if(a.length&&u(a,o)>-1)continue;(r=localStorage.getItem(o))?(r=S(r))&&d(r)?(r._flush_time=n,e.push(o),t.push(r)):(localStorage.removeItem(o),Ne.log("localStorage-数据parse异常"+r)):(localStorage.removeItem(o),Ne.log("localStorage-数据取值异常"+r))}}return{keys:e,vals:t}},writeStore:function(e){var t=String(P()).slice(2,5)+String(P()).slice(2,5)+String((new Date).getTime()).slice(3);localStorage.setItem("sawebjssdk-"+t,JSON.stringify(e))}};var _t=new Ce,ht={bridge_info:{touch_app_bridge:!1,verify_success:!1,platform:""},is_verify_success:!1,initPara:function(){var e={is_send:!0,white_list:[],is_mui:!1};"object"==typeof Ne.para.app_js_bridge?Ne.para.app_js_bridge=n({},e,Ne.para.app_js_bridge):!0===Ne.para.use_app_track||!0===Ne.para.app_js_bridge||"only"===Ne.para.use_app_track?(!1!==Ne.para.use_app_track_is_send&&"only"!==Ne.para.use_app_track||(e.is_send=!1),Ne.para.app_js_bridge=n({},e)):"mui"===Ne.para.use_app_track&&(e.is_mui=!0,Ne.para.app_js_bridge=n({},e)),!1===Ne.para.app_js_bridge.is_send&&Ne.log("设置了 is_send:false,如果打通失败，数据将被丢弃！")},initState:function(){function e(e){function t(e){var t={hostname:"",project:""};try{t.hostname=F(e).hostname,t.project=F(e).searchParams.get("project")||"default"}catch(e){Ne.log(e)}return t}var r=t(e),n=t(Ne.para.server_url);if(r.hostname===n.hostname&&r.project===n.project)return!0;if(Ne.para.app_js_bridge.white_list.length>0)for(var i=0;i<Ne.para.app_js_bridge.white_list.length;i++){var a=t(Ne.para.app_js_bridge.white_list[i]);if(a.hostname===r.hostname&&a.project===r.project)return!0}return!1}if(d(Ne.para.app_js_bridge)&&!Ne.para.app_js_bridge.is_mui)if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&d(window.SensorsData_iOS_JS_Bridge)&&window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url)e(window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url)&&(Ne.bridge.is_verify_success=!0);else if(d(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_get_server_url&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_track){var t=window.SensorsData_APP_New_H5_Bridge.sensorsdata_get_server_url();t&&e(t)&&(Ne.bridge.is_verify_success=!0)}this.bridge_info=this.initDefineBridgeInfo()},initDefineBridgeInfo:function(){var e={touch_app_bridge:!0,verify_success:!1,platform:""};return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage&&d(window.SensorsData_iOS_JS_Bridge)&&window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url?(e.platform="ios",Ne.bridge.is_verify_success?e.verify_success="success":e.verify_success="fail"):d(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_get_server_url&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_track?(e.platform="android",Ne.bridge.is_verify_success?e.verify_success="success":e.verify_success="fail"):"object"==typeof SensorsData_APP_JS_Bridge&&(SensorsData_APP_JS_Bridge.sensorsdata_verify&&SensorsData_APP_JS_Bridge.sensorsdata_visual_verify||SensorsData_APP_JS_Bridge.sensorsdata_track)?(e.platform="android",SensorsData_APP_JS_Bridge.sensorsdata_verify&&SensorsData_APP_JS_Bridge.sensorsdata_visual_verify?SensorsData_APP_JS_Bridge.sensorsdata_visual_verify(JSON.stringify({server_url:Ne.para.server_url}))?e.verify_success="success":e.verify_success="fail":e.verify_success="success"):!/sensors-verify/.test(navigator.userAgent)&&!/sa-sdk-ios/.test(navigator.userAgent)||window.MSStream?e.touch_app_bridge=!1:(e.platform="ios",Ne.bridge.iOS_UA_bridge()?e.verify_success="success":e.verify_success="fail"),e},iOS_UA_bridge:function(){if(/sensors-verify/.test(navigator.userAgent)){var e=navigator.userAgent.match(/sensors-verify\/([^\s]+)/);if(e&&e[0]&&"string"==typeof e[1]&&2===e[1].split("?").length){e=e[1].split("?");var t=null,r=null;try{t=F(Ne.para.server_url).hostname,r=F(Ne.para.server_url).searchParams.get("project")||"default"}catch(e){Ne.log(e)}return!(!t||t!==e[0]||!r||r!==e[1])}return!1}return!!/sa-sdk-ios/.test(navigator.userAgent)},dataSend:function(e,t,r){var i=e.data;if(d(Ne.para.app_js_bridge)&&!Ne.para.app_js_bridge.is_mui)if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage&&d(window.SensorsData_iOS_JS_Bridge)&&window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url)Ne.bridge.is_verify_success?(window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage(JSON.stringify({callType:"app_h5_track",data:n({server_url:Ne.para.server_url},i)})),"function"==typeof r&&r()):Ne.para.app_js_bridge.is_send?(Ne.debug.apph5({data:i,step:"4.1",output:"all"}),t.prepareServerUrl(e)):"function"==typeof r&&r();else if(d(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_get_server_url&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_track)Ne.bridge.is_verify_success?(SensorsData_APP_New_H5_Bridge.sensorsdata_track(JSON.stringify(n({server_url:Ne.para.server_url},i))),"function"==typeof r&&r()):Ne.para.app_js_bridge.is_send?(Ne.debug.apph5({data:i,step:"4.2",output:"all"}),t.prepareServerUrl(e)):"function"==typeof r&&r();else if("object"==typeof SensorsData_APP_JS_Bridge&&(SensorsData_APP_JS_Bridge.sensorsdata_verify||SensorsData_APP_JS_Bridge.sensorsdata_track))SensorsData_APP_JS_Bridge.sensorsdata_verify?SensorsData_APP_JS_Bridge.sensorsdata_verify(JSON.stringify(n({server_url:Ne.para.server_url},i)))?"function"==typeof r&&r():Ne.para.app_js_bridge.is_send?(Ne.debug.apph5({data:i,step:"3.1",output:"all"}),t.prepareServerUrl(e)):"function"==typeof r&&r():(SensorsData_APP_JS_Bridge.sensorsdata_track(JSON.stringify(n({server_url:Ne.para.server_url},i))),"function"==typeof r&&r());else if(!/sensors-verify/.test(navigator.userAgent)&&!/sa-sdk-ios/.test(navigator.userAgent)||window.MSStream)d(Ne.para.app_js_bridge)&&!0===Ne.para.app_js_bridge.is_send?(Ne.debug.apph5({data:i,step:"2",output:"all"}),t.prepareServerUrl(e)):"function"==typeof r&&r();else{var a=null;if(Ne.bridge.iOS_UA_bridge()){a=document.createElement("iframe");var s=function(e){var t=JSON.stringify(n({server_url:Ne.para.server_url},e));return t=t.replaceAll(/\r\n/g,""),"sensorsanalytics://trackEvent?event="+encodeURIComponent(t)}(i);a.setAttribute("src",s),document.documentElement.appendChild(a),a.parentNode.removeChild(a),a=null,"function"==typeof r&&r()}else Ne.para.app_js_bridge.is_send?(Ne.debug.apph5({data:i,step:"3.2",output:"all"}),t.prepareServerUrl(e)):"function"==typeof r&&r()}else d(Ne.para.app_js_bridge)&&Ne.para.app_js_bridge.is_mui?d(window.plus)&&window.plus.SDAnalytics&&window.plus.SDAnalytics.trackH5Event?(window.plus.SDAnalytics.trackH5Event(e),"function"==typeof r&&r()):d(Ne.para.app_js_bridge)&&!0===Ne.para.app_js_bridge.is_send?t.prepareServerUrl(e):"function"==typeof r&&r():(Ne.debug.apph5({data:i,step:"1",output:"code"}),t.prepareServerUrl(e))},app_js_bridge_v1:function(){var e=null,t=null;window.sensorsdata_app_js_bridge_call_js=function(r){!function(r){b(e=r)&&(e=JSON.parse(e)),t&&(t(e),t=null,e=null)}(r)},Ne.getAppStatus=function(r){return function(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var e=document.createElement("iframe");e.setAttribute("src","sensorsanalytics://getAppInfo"),document.documentElement.appendChild(e),e.parentNode.removeChild(e),e=null}}(),"object"==typeof window.SensorsData_APP_JS_Bridge&&window.SensorsData_APP_JS_Bridge.sensorsdata_call_app&&b(e=SensorsData_APP_JS_Bridge.sensorsdata_call_app())&&(e=JSON.parse(e)),r?void(null===e?t=r:(r(e),e=null)):e}},supportAppCallJs:function(){window.sensorsdata_app_call_js=function(e,t){if(e in window.sensorsdata_app_call_js.modules)return window.sensorsdata_app_call_js.modules[e](t)},window.sensorsdata_app_call_js.modules={}}},gt=function(e){this.list={},this.type=e.type,this.app_call_js=a(e.app_call_js)?e.app_call_js:function(){},this.init()};gt.prototype.init=function(){var e=this;window.sensorsdata_app_call_js.modules[this.type]||(window.sensorsdata_app_call_js.modules[this.type]=function(t){return e.app_call_js(t)})},gt.prototype.jsCallApp=function(e){var t={callType:this.type,data:e};if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage)window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage(JSON.stringify(t));else{if(!d(window.SensorsData_APP_New_H5_Bridge)||!window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app)return Ne.log("数据发往App失败，App没有暴露bridge"),!1;window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app(JSON.stringify(t))}},gt.prototype.getAppData=function(){return d(window.SensorsData_APP_New_H5_Bridge)?a(window.SensorsData_APP_New_H5_Bridge[this.type])?window.SensorsData_APP_New_H5_Bridge[this.type]():window.SensorsData_APP_New_H5_Bridge[this.type]:d(window.SensorsData_APP_JS_Bridge)&&a(window.SensorsData_APP_JS_Bridge[this.type])?window.SensorsData_APP_JS_Bridge[this.type]():void 0},gt.prototype.hasAppBridge=function(){return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage?"ios":d(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app?"android":(Ne.log("App端bridge未暴露"),!1)},gt.prototype.requestToApp=function(e){var t=this,r=d(e.data)?e.data:{};a(e.callback)||(e.callback=function(){}),d(e.timeout)&&y(e.timeout.time)&&(a(e.timeout.callback)||(e.timeout.callback=function(){}),e.timer=setTimeout((function(){e.timeout.callback(),delete t.list[n]}),e.timeout.time));var n=(new Date).getTime().toString(16)+"-"+String(P()).replace(".","").slice(1,8);this.list[n]=e;var i={callType:this.type,data:r};if(i.data.message_id=n,window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage)window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage(JSON.stringify(i));else{if(!d(window.SensorsData_APP_New_H5_Bridge)||!window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app)return Ne.log("数据发往App失败，App没有暴露bridge"),!1;window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app(JSON.stringify(i))}},gt.prototype.double=function(e){if(e.message_id){var t=this.list[e.message_id];t&&(t.timer&&clearTimeout(t.timer),t.callback(e),delete this.list[e.message_id])}};var vt={initUrl:function(){var e,t,r={server_url:{project:"",host:""},page_url:{host:"",pathname:""}};if(!h(Ne.para.server_url))return Ne.log("----vcollect---server_url必须为字符串"),!1;try{e=F(Ne.para.server_url),r.server_url.project=e.searchParams.get("project")||"default",r.server_url.host=e.host}catch(e){return Ne.log("----vcollect---server_url解析异常",e),!1}try{t=F(location.href),r.page_url.host=t.hostname,r.page_url.pathname=t.pathname}catch(e){return Ne.log("----vcollect---页面地址解析异常",e),!1}return r},isDiv:function(e){if(e.element_path&&"div"!==p(e.element_path.split(">").pop()).slice(0,3))return!1;return!0},configIsMatch:function(e,t){if(!t.element_path)return!1;if(t.limit_element_content&&t.element_content!==e.$element_content)return!1;if(t.limit_element_position&&t.element_position!==String(e.$element_position))return!1;if(void 0!==e.$element_position){if(t.element_path!==e.$element_path)return!1}else if(vt.isDiv({element_path:t.element_path})){if(e.$element_path.indexOf(t.element_path)<0)return!1}else if(t.element_path!==e.$element_path)return!1;return!0},filterConfig:function(e,r,n){var i=[];if(!n){var a=vt.initUrl();if(!a)return[];n=a.page_url}return"$WebClick"===e.event&&t(r,(function(t){d(t)&&("webclick"===t.event_type||"appclick"===t.event_type)&&d(t.event)&&t.event.url_host===n.host&&t.event.url_path===n.pathname&&vt.configIsMatch(e.properties,t.event)&&i.push(t)})),i},getPropElInLi:function(e,t){if(!(e&&w(e)&&h(t)))return null;if("li"!==e.tagName.toLowerCase())return null;var r=Ne.heatmap.getDomSelector(e);if(r){var n=H(r+t);return n||null}return Ne.log("----custom---获取同级属性元素失败，selector信息异常",r,t),null},getProp:function(e,t){if(!d(e))return!1;if(!(h(e.name)&&e.name.length>0))return Ne.log("----vcustom----属性名不合法,属性抛弃",e.name),!1;var r,n,i={};if("content"===e.method){var a;if(h(e.element_selector)&&e.element_selector.length>0)a=H(e.element_selector);else{if(!t||!h(e.list_selector))return Ne.log("----vcustom----属性配置异常，属性抛弃",e.name),!1;var s=H(t.properties.$element_selector);if(!s)return Ne.log("----vcustom----点击元素获取异常，属性抛弃",e.name),!1;var o=Ne.heatmap.getClosestLi(s);a=vt.getPropElInLi(o,e.list_selector)}if(!a||!w(a))return Ne.log("----vcustom----属性元素获取失败，属性抛弃",e.name),!1;if("input"===a.tagName.toLowerCase())r=a.value||"";else if("select"===a.tagName.toLowerCase()){var c=a.selectedIndex;y(c)&&w(a[c])&&(r=T(a[c],"select"))}else r=T(a,a.tagName.toLowerCase());if(e.regular){try{n=new RegExp(e.regular).exec(r)}catch(t){return Ne.log("----vcustom----正则处理失败，属性抛弃",e.name),!1}if(null===n)return Ne.log("----vcustom----属性规则处理，未匹配到结果,属性抛弃",e.name),!1;if(!Je(n)||!h(n[0]))return Ne.log("----vcustom----正则处理异常，属性抛弃",e.name,n),!1;r=n[0]}if("STRING"===e.type)i[e.name]=r;else if("NUMBER"===e.type){if(r.length<1)return Ne.log("----vcustom----未获取到数字内容，属性抛弃",e.name,r),!1;if(isNaN(Number(r)))return Ne.log("----vcustom----数字类型属性转换失败，属性抛弃",e.name,r),!1;i[e.name]=Number(r)}return i}return Ne.log("----vcustom----属性不支持此获取方式",e.name,e.method),!1},getAssignConfigs:function(e,r){var n=vt.initUrl();if(!n||!n.page_url)return[];if(!d(r))return[];var i=[];return r.events=r.events||r.eventList,Je(r.events)&&r.events.length>0?(t(r.events,(function(t){d(t)&&d(t.event)&&t.event.url_host===n.page_url.host&&t.event.url_path===n.page_url.pathname&&e(t)&&i.push(t)})),i):[]},addCustomProps:function(e){if("success"===Ne.bridge.bridge_info.verify_success){var t=Ne.vapph5collect.customProp.geth5Props(JSON.parse(JSON.stringify(e)));d(t)&&!f(t)&&(e.properties=n(e.properties,t))}var r=Ne.vtrackcollect.customProp.getVtrackProps(JSON.parse(JSON.stringify(e)));return d(r)&&!f(r)&&(e.properties=n(e.properties,r)),e},init:function(){Ne.vtrackcollect.init(),"success"===Ne.bridge.bridge_info.verify_success&&Ne.vapph5collect.init()}},mt={events:[],init:function(e){this.filterWebClickEvents(e)},filterWebClickEvents:function(e){this.events=Ne.vtrackcollect.getAssignConfigs((function(e){return!(!d(e)||!0!==e.event.unlimited_div||"webclick"!==e.event_type)}),e)},isTargetEle:function(e){var t=Ne.heatmap.getEleDetail(e);if(!d(t)||!h(t.$element_path))return!1;for(var r=0;r<this.events.length;r++)if(d(this.events[r])&&d(this.events[r].event)&&Ne.vtrackcollect.configIsMatch(t,this.events[r].event))return!0;return!1}},yt={events:[],configSwitch:!1,collectAble:function(){return this.configSwitch&&d(Ne.para.heatmap)&&Ne.para.heatmap.get_vtrack_config},updateEvents:function(e){this.events=Ne.vtrackcollect.getAssignConfigs((function(e){return!!(d(e)&&Je(e.properties)&&e.properties.length>0)}),e),this.events.length?this.configSwitch=!0:this.configSwitch=!1},getVtrackProps:function(e){var t={};return this.collectAble()?("$WebClick"===e.event&&(t=this.clickCustomPropMaker(e,this.events)),t):{}},clickCustomPropMaker:function(e,r,i){var a=this;i=i||this.filterConfig(e,r,Ne.vtrackcollect.url_info.page_url);var s={};return i.length?(t(i,(function(r){Je(r.properties)&&r.properties.length>0&&t(r.properties,(function(t){var r=a.getProp(t,e);d(r)&&n(s,r)}))})),s):{}},getProp:vt.getProp,getPropElInLi:vt.getPropElInLi,filterConfig:vt.filterConfig},wt={unlimitedDiv:mt,config:{},storageEnable:!0,storage_name:"webjssdkvtrackcollect",para:{session_time:18e5,timeout:5e3,update_interval:18e5},url_info:{},timer:null,update_time:null,customProp:yt,initUrl:function(){var e=vt.initUrl();if(e){var t;try{(t=new M(Ne.para.server_url))._values.Path="/config/visualized/Web.conf",e.api_url=t.getUrl()}catch(e){return Ne.log("----vtrackcollect---API地址解析异常",e),!1}this.url_info=e}return e},init:function(){if(!d(Ne.para.heatmap)||!Ne.para.heatmap.get_vtrack_config)return!1;if(Ye.isSupport()||(this.storageEnable=!1),!this.initUrl())return Ne.log("----vtrackcustom----初始化失败，url信息解析失败"),!1;if(this.storageEnable){var e=Ye.parse(this.storage_name);if(d(e)&&d(e.data))if(this.serverUrlIsSame(e.serverUrl)){this.config=e.data,this.update_time=e.updateTime,this.updateConfig(e.data);var t=(new Date).getTime()-this.update_time;if(y(t)&&t>0&&t<this.para.session_time){var r=this.para.update_interval-t;this.setNextFetch(r)}else this.getConfigFromServer()}else this.getConfigFromServer();else this.getConfigFromServer()}else this.getConfigFromServer();this.pageStateListenner()},serverUrlIsSame:function(e){return!!d(e)&&e.host===this.url_info.server_url.host&&e.project===this.url_info.server_url.project},getConfigFromServer:function(){var e=this;this.sendRequest((function(t,r){e.update_time=(new Date).getTime();var n={};200===t?r&&d(r)&&"Web"===r.os&&(n=r,e.updateConfig(n)):205===t?e.updateConfig(n):304===t?n=e.config:(Ne.log("----vtrackcustom----数据异常",t),e.updateConfig(n)),e.updateStorage(n),e.setNextFetch()}),(function(t){e.update_time=(new Date).getTime(),Ne.log("----vtrackcustom----配置拉取失败",t),e.setNextFetch()}))},setNextFetch:function(e){var t=this;this.timer&&(clearTimeout(this.timer),this.timer=null),e=e||this.para.update_interval,this.timer=setTimeout((function(){t.getConfigFromServer()}),e)},pageStateListenner:function(){var e=this;Pe({visible:function(){var t=(new Date).getTime()-e.update_time;if(y(t)&&t>0&&t<e.para.update_interval){var r=e.para.update_interval-t;e.setNextFetch(r)}else e.getConfigFromServer()},hidden:function(){e.timer&&(clearTimeout(e.timer),e.timer=null)}})},updateConfig:function(e){return!!d(e)&&(this.config=e,this.customProp.updateEvents(e),void this.unlimitedDiv.init(e))},updateStorage:function(e){if(!this.storageEnable)return!1;if(!d(e))return!1;var t;if(this.url_info.server_url)t=this.url_info.server_url;else{var r=Ne.vtrackcollect.initUrl();if(!r)return!1;t=r.server_url}var n={updateTime:(new Date).getTime(),data:e,serverUrl:t};Ye.set(this.storage_name,JSON.stringify(n))},sendRequest:function(e,t){var r={app_id:this.url_info.page_url.host};this.config.version&&(r.v=this.config.version),Ae({url:this.url_info.api_url,callbackName:"saJSSDKVtrackCollectConfig",data:r,timeout:this.para.timeout,success:function(t,r){e(t,r)},error:function(e){t(e)}})},getAssignConfigs:vt.getAssignConfigs,configIsMatch:vt.configIsMatch},bt={events:[],getAssignConfigs:vt.getAssignConfigs,filterConfig:vt.filterConfig,getProp:vt.getProp,initUrl:vt.initUrl,updateEvents:function(e){Je(e)&&(this.events=e)},init:function(){this.initAppGetPropsBridge()},geth5Props:function(e){var r={},i=[],a=this;if(!this.events.length)return{};if("$WebClick"===e.event){var s=this.filterConfig(e,this.events);if(!s.length)return{};t(s,(function(s){d(s)&&(Je(s.properties)&&s.properties.length>0&&t(s.properties,(function(t){if(d(t))if(!1===t.h5)Je(r.sensorsdata_app_visual_properties)||(r.sensorsdata_app_visual_properties=[]),r.sensorsdata_app_visual_properties.push(t);else{var i=a.getProp(t,e);d(i)&&(r=n(r,i))}})),h(s.event_name)&&i.push(s.event_name))})),d(window.SensorsData_App_Visual_Bridge)&&window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode&&(!0===window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode||window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode())&&(r.sensorsdata_web_visual_eventName=i)}return r.sensorsdata_app_visual_properties&&(r.sensorsdata_app_visual_properties=A(JSON.stringify(r.sensorsdata_app_visual_properties))),r},initAppGetPropsBridge:function(){var e=this;return new Ne.JSBridge({type:"getJSVisualProperties",app_call_js:function(r){var i={};try{r=JSON.parse(O(r))}catch(e){Ne.log("getJSVisualProperties data parse error!")}if(d(r)){var s=r.sensorsdata_js_visual_properties,o=e.initUrl();o&&(o=o.page_url,Je(s)&&s.length>0&&t(s,(function(t){if(d(t)&&t.url_host===o.host&&t.url_path===o.pathname&&t.h5){var r=e.getProp(t);d(r)&&(i=n(i,r))}})))}if("android"===Ne.bridge.bridge_info.platform){var c={callType:"getJSVisualProperties",data:i};d(r)&&r.message_id&&(c.message_id=r.message_id),d(window.SensorsData_APP_New_H5_Bridge)&&a(SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app)?SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app(JSON.stringify(c)):d(window.SensorsData_APP_JS_Bridge)&&a(SensorsData_APP_JS_Bridge.sensorsdata_js_call_app)&&SensorsData_APP_JS_Bridge.sensorsdata_js_call_app(JSON.stringify(c))}return i}})}},St={events:[],customProp:bt,getAssignConfigs:vt.getAssignConfigs,initUrl:vt.initUrl,init:function(){if(this.initUrl()){var e=this.getConfigFromApp();e&&this.updateConfigs(e),this.customProp.init(),this.initAppUpdateConfigBridge()}},initAppUpdateConfigBridge:function(){var e=this;return new Ne.JSBridge({type:"updateH5VisualConfig",app_call_js:function(t){if(t){try{t=JSON.parse(O(t))}catch(e){return void Ne.log("updateH5VisualConfig result parse error！")}e.updateConfigs(t)}}})},getConfigFromApp:function(){var e=new Ne.JSBridge({type:"sensorsdata_get_app_visual_config"}).getAppData();if(e)try{e=JSON.parse(O(e))}catch(t){e=null,Ne.log("getAppVisualConfig result parse error！")}return e},updateConfigs:function(e){this.events=this.filterConfigs(e),this.customProp.updateEvents(this.events)},filterConfigs:function(e){return this.getAssignConfigs((function(e){return!(!d(e)||!1===e.h5)}),e)}};Ne.modules={},Ne._=rt,Ne.kit=ut,Ne.saEvent=ot,Ne.sendState=ft,Ne.events=new tt,Ne.batchSend=_t,Ne.bridge=ht,Ne.JSBridge=gt,Ne.store=it,Ne.vtrackBase=vt,Ne.unlimitedDiv=mt,Ne.customProp=yt,Ne.vtrackcollect=wt,Ne.vapph5collect=St,Ne.heatmap=at,Ne.init=function(e){return!(Ne.readyState&&Ne.readyState.state&&Ne.readyState.state>=2)&&(Ne.setInitVar(),Ne.readyState.setState(2),Ne.initPara(e),Ne.bridge.supportAppCallJs(),Ne.detectMode(),void Ne.iOSWebClickPolyfill())};t(["setItem","deleteItem","getAppStatus","track","quick","register","registerPage","registerOnce","trackSignup","setProfile","setOnceProfile","appendProfile","incrementProfile","deleteProfile","unsetProfile","identify","login","logout","trackLink","clearAllRegister","clearPageRegister"],(function(e){var t=Ne[e];Ne[e]=function(){if(Ne.readyState.state<3)return Je(Ne._q)||(Ne._q=[]),Ne._q.push([e,arguments]),!1;if(Ne.readyState.getState())return t.apply(Ne,arguments);try{console.error("请先初始化神策JS SDK")}catch(e){Ne.log(e)}}})),e.exports=function(){try{if(Ne.modules.Amp=function(){var e={sd:null,init:function(e){if(this.sd)return!1;if(this.sd=e,!this.sd||!this.sd._)return!1;var t=this.sd._.cookie.get("sensors_amp_id"),r=this.sd.store._state.distinct_id;if(t&&t.length>0){var n="amp-"===t.slice(0,4);if(t!==r){if(!n)return!1;this.sd.store._state.first_id?(this.sd.identify(t,!0),this.sd.saEvent.send({original_id:t,distinct_id:r,type:"track_signup",event:"$SignUp",properties:{}},null),this.setAmpId(r)):this.sd.identify(t,!0)}}else this.setAmpId(r);this.addListener()},addListener:function(){var e=this;this.sd.events.on("changeDistinctId",(function(t){e.setAmpId(t)})),this.sd.events.isReady()},setAmpId:function(e){this.sd._.cookie.set("sensors_amp_id",e)}};return window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.Amp=window.SensorsDataWebJSSDKPlugin.Amp||e:window.SensorsDataWebJSSDKPlugin={Amp:e},e}(),Ne.modules.Channel=function(){var e,t,r={event_list:[],latest_event_initial_time:null,max_save_time:2592e6,init:function(r){return!t&&!!(t=r)&&!!(e=t._).localStorage.isSupport()&&(t.para.max_string_length=1024,this.eventList.init(),this.addLatestChannelUrl(),void this.addIsChannelCallbackEvent())},addIsChannelCallbackEvent:function(){t.registerPage({$is_channel_callback_event:function(e){if(e.event&&"$WebClick"!==e.event&&"$pageview"!==e.event&&"$WebStay"!==e.event&&"$SignUp"!==e.event)return!r.eventList.hasEvent(e.event)&&(r.eventList.add(e.event),!0)}})},addLatestChannelUrl:function(){var n=this.getUrlDomain(),i=this.cookie.getChannel();if("url解析失败"===n)this.registerAndSave({_sa_channel_landing_url:"",_sa_channel_landing_url_error:"url的domain解析失败"});else if(e.isReferralTraffic(document.referrer)){var a=e.getQueryParam(location.href,"sat_cf");e.isString(a)&&a.length>0?(this.registerAndSave({_sa_channel_landing_url:location.href}),r.channelLinkHandler()):this.registerAndSave({_sa_channel_landing_url:""})}else i?t.registerPage(i):t.registerPage({_sa_channel_landing_url:"",_sa_channel_landing_url_error:"取值异常"})},registerAndSave:function(e){t.registerPage(e),this.cookie.saveChannel(e)},cookie:{getChannel:function(){var r;try{r=JSON.parse(e.cookie.get("sensorsdata2015jssdkchannel"))}catch(e){t.log(e)}return!(!e.isObject(r)||!r.prop)&&r.prop},saveChannel:function(t){var r={prop:t};e.cookie.set("sensorsdata2015jssdkchannel",JSON.stringify(r))}},channelLinkHandler:function(){this.eventList.reset(),t.track("$ChannelLinkReaching")},getUrlDomain:function(){var t=e.info.pageProp.url_domain;return""===t&&(t="url解析失败"),t},eventList:{init:function(){var t=this.get(),n=(new Date).getTime();if(t&&e.isNumber(t.latest_event_initial_time)&&e.isArray(t.eventList)){var i=n-t.latest_event_initial_time;i>0&&i<r.max_save_time?(r.event_list=t.eventList,r.latest_event_initial_time=t.latest_event_initial_time):this.reset()}else this.reset()},get:function(){var r={};try{r=JSON.parse(e.localStorage.get("sawebjssdkchannel"))}catch(e){t.log(e)}return r},add:function(e){r.event_list.push(e),this.save()},save:function(){var t={latest_event_initial_time:r.latest_event_initial_time,eventList:r.event_list};e.localStorage.set("sawebjssdkchannel",JSON.stringify(t))},reset:function(){r.event_list=[],r.latest_event_initial_time=(new Date).getTime(),this.save()},hasEvent:function(t){var n=!1;return e.each(r.event_list,(function(e){e===t&&(n=!0)})),n}}};return window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.SensorsChannel=window.SensorsDataWebJSSDKPlugin.SensorsChannel||r:window.SensorsDataWebJSSDKPlugin={SensorsChannel:r},r}(),Ne.modules.Deeplink=function(){function e(){return void 0!==t&&document[t]}var t,r=(/micromessenger\/([\d.]+)/i.test(navigator.userAgent||""),function(){var e={};return void 0!==document.hidden?(e.hidden="hidden",e.visibilityChange="visibilitychange"):void 0!==document.msHidden?(e.hidden="msHidden",e.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(e.hidden="webkitHidden",e.visibilityChange="webkitvisibilitychange"),e});t=r().hidden;var n={android:/Android/i,iOS:/iPhone|iPad|iPod/i},i=function(){for(var e in n)if(navigator.userAgent.match(n[e]))return e;return""},a=i(),s=function(){return n.hasOwnProperty(a)},o=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},c=function(e){var t=/\/sd\/(\w+)\/(\w+)$/;return e.match(t)},u=function(e){var t=e._.URL(e.para.server_url);return{origin:t.origin,project:t.searchParams.get("project")||"default"}},l=function(r,n,i){r.log("尝试唤起 android app");var a=n;r.log("唤起APP的地址："+a),window.location=a,r.timer=setTimeout((function(){var n=e();return r.log("hide:"+t+":"+document[t]),n?(r.log("The page is hidden, stop navigating to download page"),!1):(r.log("App可能未安装，跳转到下载地址"),void(window.location=i))}),r.timeout)},p=function(t,r,n){t.log("尝试唤起 iOS app:"+r),window.location.href=r,t.timer=setTimeout((function(){return e()?(t.log("The page is hidden, stop navigating to download page"),!1):(t.log("App可能未安装，跳转到下载地址"),void(window.location.href=n))}),t.timeout),t.log("new timer:"+t.timer)},d={key:null,timer:null,sd:null,data:null,timeout:2500,apiURL:"{origin}/sdk/deeplink/param?key={key}&system_type=JS&project={project}",init:function(){if(this.sd)return this.log("deeplink已经初始化"),!1;if(o(sensorsDataAnalytic201505)&&(this.sd=sensorsDataAnalytic201505),this.log("init()"),null===this.sd)return this.log("神策JS SDK未成功引入"),!1;var e={};if(arguments.length>0&&(1===arguments.length&&o(arguments[0])?e=arguments[0]:arguments.length>=2&&o(arguments[1])&&(e=arguments[1])),!s())return this.log("不支持当前系统，目前只支持Android和iOS"),!1;if(o(e)&&this.sd._.isNumber(e.timeout)&&e.timeout>=2500&&(this.timeout=e.timeout),!this.sd.para.server_url)return this.log("神策JS SDK配置项server_url未正确配置"),!1;var t=u(this.sd);this.apiURL=this.apiURL.replace("{origin}",t.origin).replace("{project}",t.project);var r=this.sd._.URL(window.location.href).searchParams.get("deeplink");if(!r)return this.log("当前页面缺少deeplink参数"),!1;r=window.decodeURIComponent(r);var n=c(r);return n?(this.key=n[2],this.apiURL=this.apiURL.replace("{key}",window.encodeURIComponent(n[2])),this.sd._.ajax({url:this.apiURL,type:"GET",cors:!0,credentials:!1,success:function(e){return e.errorMsg?(d.log("API报错："+e.errorMsg),!1):(d.data=e,d.log("API查询成功，数据："+JSON.stringify(e,null,"  ")),void(this.data.app_key&&(this.data.android_info&&this.data.android_info.url_schemes&&(this.data.android_info.url_schemes+="://sensorsdata/sd/"+this.data.app_key+"/"+this.key),this.data.ios_info&&this.data.ios_info.url_schemes&&(this.data.ios_info.url_schemes+="://sensorsdata/sd/"+this.data.app_key+"/"+this.key))))}.bind(this),error:function(){d.log("API查询出错")}}),void this.addListeners()):(this.log("当前页面的deeplink参数无效"),!1)},openDeepLink:function(){if(this.log("openDeeplink()"),!this.data)return this.log("没有Deep link数据!"),!1;if("iOS"===a){this.log("当前系统是iOS");var e=this.sd&&this.sd._&&this.sd._.getIOSVersion()>=9&&this.data.ios_info.ios_wake_url?this.data.ios_info.ios_wake_url:this.data.ios_info.url_schemes;this.log("唤起APP的地址："+e),p(this,e,this.data.ios_info.download_url)}else this.log("当前系统是 android"),l(this,this.data.android_info.url_schemes,this.data.android_info.download_url)},log:function(e){this.sd&&this.sd.log(e)},addListeners:function(){var e=r().visibilityChange;e&&document.addEventListener(e,function(){clearTimeout(this.timer),this.log("visibilitychange, clear timeout:"+this.timer)}.bind(this),!1),window.addEventListener("pagehide",function(){this.log("page hide, clear timeout:"+this.timer),clearTimeout(this.timer)}.bind(this),!1)}};return o(window.SensorsDataWebJSSDKPlugin)?(window.SensorsDataWebJSSDKPlugin.Deeplink=window.SensorsDataWebJSSDKPlugin.Deeplink||d,window.SensorsDataWebJSSDKPlugin.deeplink=window.SensorsDataWebJSSDKPlugin.deeplink||d):window.SensorsDataWebJSSDKPlugin={Deeplink:d,deeplink:d},d}(),Ne.modules.Pageleave=function(){function e(){this.sd=null,this.start_time=+new Date,this.page_show_status=!0,this.page_hidden_status=!1,this._={},this.timer=null,this.current_page_url=document.referrer,this.url=location.href,this.option={},this.heartbeat_interval_time=5e3,this.heartbeat_interval_timer=null,this.page_id=null,this.storage_name="sawebjssdkpageleave"}var t=500;e.prototype.init=function(e,t){if(e){this.sd=e,this._=this.sd._;var r=this;if(t){this.option=t;var n=t.heartbeat_interval_time;n&&(this._.isNumber(n)||this._.isNumber(1*n))&&1*n>0&&(this.heartbeat_interval_time=1e3*n)}this.page_id=Number(String(rt.getRandom()).slice(2,5)+String(rt.getRandom()).slice(2,4)+String((new Date).getTime()).slice(-4)),r.addEventListener(),r.addHeartBeatInterval(),this.log("PageLeave初始化完毕")}else this.log("神策JS SDK未成功引入")},e.prototype.log=function(e){this.sd&&this.sd.log(e)},e.prototype.getSingleStatus=function(){var e=this.sd.para.is_track_single_page;if(e&&this._.isBoolean(e))return!0;if(this._.isFunction(e)){var t=e();if(this._.isObject(t)||!0===t)return!0}return!1},e.prototype.refreshPageEndTimer=function(){var e=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((function(){e.page_hidden_status=!1}),t)},e.prototype.pageStartHandler=function(){this.start_time=+new Date,this.page_show_status=!0},e.prototype.pageEndHandlear=function(){if(!0!==this.page_hidden_status){var e=this.getPageLeaveProperties();!1===this.page_show_status&&delete e.event_duration,this.page_show_status=!1,this.page_hidden_status=!0,this.sd.track("$WebPageLeave",e),this.refreshPageEndTimer(),this.delHeartBeatData()}},e.prototype.addEventListener=function(){this.addPageStartListener(),this.addPageSwitchListener(),this.addPageEndListener()},e.prototype.addPageStartListener=function(){var e=this;"onpageshow"in window&&this._.addEvent(window,"pageshow",(function(){e.pageStartHandler()}))},e.prototype.addSinglePageListener=function(){var e=this;this._.addSinglePageEvent((function(t){e.getSingleStatus()&&t!==location.href&&(e.url=t,e.pageEndHandlear(),e.pageStartHandler(),e.current_page_url=e.url)}))},e.prototype.addPageEndListener=function(){var e=this;this._.each(["pagehide","beforeunload","unload"],(function(t){"on"+t in window&&e._.addEvent(window,t,(function(){e.pageEndHandlear()}))}))},e.prototype.addPageSwitchListener=function(){var e=this;this._.listenPageState({visible:function(){e.pageStartHandler(),e.startHeartBeatInterval()},hidden:function(){e.url=location.href,e.pageEndHandlear(),e.stopHeartBeatInterval()}})},e.prototype.addHeartBeatInterval=function(){this._.localStorage.isSupport()&&this.startHeartBeatInterval()},e.prototype.startHeartBeatInterval=function(){var e=this;this.heartbeat_interval_timer&&this.stopHeartBeatInterval(),this.heartbeat_interval_timer=setInterval((function(){e.saveHeartBeatData(),e.reissueHeartBeatData()}),this.heartbeat_interval_time),this.saveHeartBeatData("is_first_heartbeat"),this.reissueHeartBeatData()},e.prototype.stopHeartBeatInterval=function(){clearInterval(this.heartbeat_interval_timer),this.heartbeat_interval_timer=null},e.prototype.saveHeartBeatData=function(e){var t=this.getPageLeaveProperties();t.$time=new Date,"is_first_heartbeat"===e&&(t.event_duration=3.14);var r=this.sd.kit.buildData({type:"track",event:"$WebPageLeave",properties:t});r.heartbeat_interval_time=this.heartbeat_interval_time,this._.localStorage.set(this.storage_name+"-"+this.page_id,JSON.stringify(r))},e.prototype.delHeartBeatData=function(e){this._.localStorage.remove(e||this.storage_name+"-"+this.page_id)},e.prototype.reissueHeartBeatData=function(){for(var e=window.localStorage.length,t=0;t<e;t++){var r=window.localStorage.key(t);if(r&&r!==this.storage_name+"-"+this.page_id&&0===r.indexOf(this.storage_name+"-")){var n=this._.localStorage.parse(r);this._.isObject(n)&&1*new Date-n.time>n.heartbeat_interval_time+5e3&&(delete n.heartbeat_interval_time,this.sd.kit.sendData(n),this.delHeartBeatData(r))}}},e.prototype.getPageLeaveProperties=function(){var e=(+new Date-this.start_time)/1e3;(isNaN(e)||e<0)&&(e=0),e=Number(e.toFixed(3));var t=this._.getReferrer(this.current_page_url),r={$title:document.title,$url:this._.getURL(),$url_path:location.pathname,$referrer_host:t?this._.getHostname(t):"",$referrer:t};return 0!==e&&(r.event_duration=e),this._.extend(r,this.option.custom_props)};var r=new e;return window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.PageLeave=window.SensorsDataWebJSSDKPlugin.PageLeave||r:window.SensorsDataWebJSSDKPlugin={PageLeave:r},r}(),Ne.modules.SiteLinker=function(){var e={getPart:function(e){var t=!1,r=this.option.length;if(r)for(var n=0;n<r;n++)if(e.indexOf(this.option[n].part_url)>-1)return!0;return t},getPartHash:function(e){var t=this.option.length,r=!1;if(t)for(var n=0;n<t;n++)if(e.indexOf(this.option[n].part_url)>-1)return this.option[n].after_hash;return!!r},getCurrenId:function(){var e=this.store.getDistinctId()||"",t=this.store.getFirstId()||"";return this._.urlSafeBase64&&this._.urlSafeBase64.encode?e=e?this._.urlSafeBase64.trim(this._.urlSafeBase64.encode(rt.base64Encode(e))):"":this._.rot13obfs&&(e=e?this._.rot13obfs(e):""),encodeURIComponent(t?"f"+e:"d"+e)},rewireteUrl:function(e,t){var r=/([^?#]+)(\?[^#]*)?(#.*)?/.exec(e),n="";if(r){var i,a=r[1]||"",s=r[2]||"",o=r[3]||"";return this.getPartHash(e)?(i=o.indexOf("_sasdk"),n=o.indexOf("?")>-1?i>-1?a+s+"#"+o.substring(1,i)+"_sasdk="+this.getCurrenId():a+s+"#"+o.substring(1)+"&_sasdk="+this.getCurrenId():a+s+"#"+o.substring(1)+"?_sasdk="+this.getCurrenId()):(i=s.indexOf("_sasdk"),n=/^\?(\w)+/.test(s)?i>-1?a+"?"+s.substring(1,i)+"_sasdk="+this.getCurrenId()+o:a+"?"+s.substring(1)+"&_sasdk="+this.getCurrenId()+o:a+"?"+s.substring(1)+"_sasdk="+this.getCurrenId()+o),t&&(t.href=n),n}},getUrlId:function(){var e=location.href.match(/_sasdk=([aufd][^\?\#\&\=]+)/);if(this._.isArray(e)&&e[1]){var t=decodeURIComponent(e[1]);return!t||"f"!==t.substring(0,1)&&"d"!==t.substring(0,1)||(this._.urlSafeBase64&&this._.urlSafeBase64.isUrlSafeBase64&&this._.urlSafeBase64.isUrlSafeBase64(t)?t=t.substring(0,1)+rt.base64Decode(this._.urlSafeBase64.decode(t.substring(1))):this._.rot13defs&&(t=t.substring(0,1)+this._.rot13defs(t.substring(1)))),t}return""},setRefferId:function(){var e=this.store.getDistinctId(),t=this.getUrlId();if(""===t)return!1;var r="a"===t.substring(0,1)||"d"===t.substring(0,1);return(t=t.substring(1))!==e&&(t&&r&&this.store.getFirstId()&&(this.sd.identify(t,!0),this.sd.saEvent.send({original_id:t,distinct_id:e,type:"track_signup",event:"$SignUp",properties:{}},null)),t&&r&&!this.store.getFirstId()&&this.sd.identify(t,!0),void(!t||r||this.store.getFirstId()||this.sd.login(t)))},addListen:function(){var e=this,t=function(t){var r,n,i=t.target,a=i.tagName.toLowerCase(),s=i.parentNode;if("a"===a&&i.href||s&&s.tagName&&"a"===s.tagName.toLowerCase()&&s.href){"a"===a&&i.href?(r=i.href,n=i):(r=s.href,n=s);var o=e._.URL(r).protocol;"http:"!==o&&"https:"!==o||e.getPart(r)&&e.rewireteUrl(r,n)}};e._.addEvent(document,"mousedown",t),window.PointerEvent&&"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>=0&&e._.addEvent(document,"pointerdown",t)},init:function(e,t){function r(t){for(var r=t.length,n=[],i=0;i<r;i++)/[A-Za-z0-9]+\./.test(t[i].part_url)&&"[object Boolean]"==Object.prototype.toString.call(t[i].after_hash)?n.push(t[i]):e.log("linker 配置的第 "+(i+1)+" 项格式不正确，请检查参数格式！");return n}return this.sd=e,this._=e._,this.store=e.store,this.para=e.para,this._.isObject(t)&&this._.isArray(t.linker)&&t.linker.length>0?(this.setRefferId(),this.addListen(),this.option=t.linker,void(this.option=r(this.option))):void e.log("请配置打通域名参数！")}};return rt.isObject(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.SiteLinker=window.SensorsDataWebJSSDKPlugin.SiteLinker||e:window.SensorsDataWebJSSDKPlugin={SiteLinker:e},e}(),"string"!=typeof window.sensorsDataAnalytic201505)return void 0===window.sensorsDataAnalytic201505?(window.sensorsDataAnalytic201505=Ne,Ne):window.sensorsDataAnalytic201505;Ne.setPreConfig(window[sensorsDataAnalytic201505]),window[sensorsDataAnalytic201505]=Ne,window.sensorsDataAnalytic201505=Ne,Ne.init()}catch(e){if("object"==typeof console&&console.log)try{console.log(e)}catch(e){Ne.log(e)}}}()}()}(t);var r=t.exports;function n(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var i={exports:{}},a=i.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a);var s={exports:{}},c=s.exports={version:"2.6.12"};"number"==typeof __e&&(__e=c);var u={},l=function(e){return"object"==typeof e?null!==e:"function"==typeof e},p=l,d=function(e){if(!p(e))throw TypeError(e+" is not an object!");return e},f=function(e){try{return!!e()}catch(e){return!0}},_=!f((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),h=l,g=i.exports.document,v=h(g)&&h(g.createElement),y=function(e){return v?g.createElement(e):{}},w=!_&&!f((function(){return 7!=Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a})),b=l,S=d,k=w,P=function(e,t){if(!b(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!b(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!b(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!b(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},j=Object.defineProperty;u.f=_?Object.defineProperty:function(e,t,r){if(S(e),t=P(t,!0),S(r),k)try{return j(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e};var x=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},A=u,O=x,D=_?function(e,t,r){return A.f(e,t,O(1,r))}:function(e,t,r){return e[t]=r,e},C={exports:{}},N={}.hasOwnProperty,$=function(e,t){return N.call(e,t)},E=0,I=Math.random(),T=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++E+I).toString(36))},L={exports:{}},R=s.exports,H=i.exports,U="__core-js_shared__",J=H[U]||(H[U]={});(L.exports=function(e,t){return J[e]||(J[e]=void 0!==t?t:{})})("versions",[]).push({version:R.version,mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"});var B=L.exports("native-function-to-string",Function.toString),M=i.exports,K=D,F=$,W=T("src"),q=B,z="toString",V=(""+q).split(z);s.exports.inspectSource=function(e){return q.call(e)},(C.exports=function(e,t,r,n){var i="function"==typeof r;i&&(F(r,"name")||K(r,"name",t)),e[t]!==r&&(i&&(F(r,W)||K(r,W,e[t]?""+e[t]:V.join(String(t)))),e===M?e[t]=r:n?e[t]?e[t]=r:K(e,t,r):(delete e[t],K(e,t,r)))})(Function.prototype,z,(function(){return"function"==typeof this&&this[W]||q.call(this)}));var X=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},Z=X,G=function(e,t,r){if(Z(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},Q=i.exports,Y=s.exports,ee=D,te=C.exports,re=G,ne=function(e,t,r){var n,i,a,s,o=e&ne.F,c=e&ne.G,u=e&ne.S,l=e&ne.P,p=e&ne.B,d=c?Q:u?Q[t]||(Q[t]={}):(Q[t]||{}).prototype,f=c?Y:Y[t]||(Y[t]={}),_=f.prototype||(f.prototype={});for(n in c&&(r=t),r)a=((i=!o&&d&&void 0!==d[n])?d:r)[n],s=p&&i?re(a,Q):l&&"function"==typeof a?re(Function.call,a):a,d&&te(d,n,a,e&ne.U),f[n]!=a&&ee(f,n,s),l&&_[n]!=a&&(_[n]=a)};Q.core=Y,ne.F=1,ne.G=2,ne.S=4,ne.P=8,ne.B=16,ne.W=32,ne.U=64,ne.R=128;var ie,ae=ne,se={}.toString,oe=function(e){return se.call(e).slice(8,-1)},ce=oe,ue=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==ce(e)?e.split(""):Object(e)},le=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},pe=ue,de=le,fe=function(e){return pe(de(e))},_e=Math.ceil,he=Math.floor,ge=function(e){return isNaN(e=+e)?0:(e>0?he:_e)(e)},ve=ge,me=Math.min,ye=function(e){return e>0?me(ve(e),9007199254740991):0},we=ge,be=Math.max,Se=Math.min,ke=fe,Pe=ye,je=function(e,t){return(e=we(e))<0?be(e+t,0):Se(e,t)},xe=L.exports("keys"),Ae=T,Oe=function(e){return xe[e]||(xe[e]=Ae(e))},De=$,Ce=fe,Ne=(ie=!1,function(e,t,r){var n,i=ke(e),a=Pe(i.length),s=je(r,a);if(ie&&t!=t){for(;a>s;)if((n=i[s++])!=n)return!0}else for(;a>s;s++)if((ie||s in i)&&i[s]===t)return ie||s||0;return!ie&&-1}),$e=Oe("IE_PROTO"),Ee=function(e,t){var r,n=Ce(e),i=0,a=[];for(r in n)r!=$e&&De(n,r)&&a.push(r);for(;t.length>i;)De(n,r=t[i++])&&(~Ne(a,r)||a.push(r));return a},Ie="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Te=Ee,Le=Ie,Re=Object.keys||function(e){return Te(e,Le)},He={};He.f=Object.getOwnPropertySymbols;var Ue={};Ue.f={}.propertyIsEnumerable;var Je=le,Be=function(e){return Object(Je(e))},Me=_,Ke=Re,Fe=He,We=Ue,qe=Be,ze=ue,Ve=Object.assign,Xe=!Ve||f((function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=Ve({},e)[r]||Object.keys(Ve({},t)).join("")!=n}))?function(e,t){for(var r=qe(e),n=arguments.length,i=1,a=Fe.f,s=We.f;n>i;)for(var o,c=ze(arguments[i++]),u=a?Ke(c).concat(a(c)):Ke(c),l=u.length,p=0;l>p;)o=u[p++],Me&&!s.call(c,o)||(r[o]=c[o]);return r}:Ve,Ze=ae;Ze(Ze.S+Ze.F,"Object",{assign:Xe});var Ge={exports:{}};!function(t,r){var n="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",s="[object Function]",o="[object Object]",c=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l[a]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l[s]=l["[object Map]"]=l["[object Number]"]=l[o]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1;var p="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,f=p||d||Function("return this")(),_=r&&!r.nodeType&&r,h=_&&t&&!t.nodeType&&t,g=h&&h.exports===_,v=g&&p.process,m=function(){try{var e=h&&h.require&&h.require("util").types;return e||v&&v.binding&&v.binding("util")}catch(e){}}(),y=m&&m.isTypedArray;function w(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var b,S,k=Array.prototype,P=Function.prototype,j=Object.prototype,x=f["__core-js_shared__"],A=P.toString,O=j.hasOwnProperty,D=function(){var e=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),C=j.toString,N=A.call(Object),$=RegExp("^"+A.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),E=g?f.Buffer:void 0,I=f.Symbol,T=f.Uint8Array,L=E?E.allocUnsafe:void 0,R=(b=Object.getPrototypeOf,S=Object,function(e){return b(S(e))}),H=Object.create,U=j.propertyIsEnumerable,J=k.splice,B=I?I.toStringTag:void 0,M=function(){try{var e=_e(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),K=E?E.isBuffer:void 0,F=Math.max,W=Date.now,q=_e(f,"Map"),z=_e(Object,"create"),V=function(){function e(){}return function(t){if(!xe(t))return{};if(H)return H(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function X(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Z(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function G(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Q(e){var t=this.__data__=new Z(e);this.size=t.size}function Y(e,t){var r=be(e),n=!r&&we(e),i=!r&&!n&&ke(e),a=!r&&!n&&!i&&Oe(e),s=r||n||i||a,o=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=o.length;for(var u in e)!t&&!O.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||he(u,c))||o.push(u);return o}function ee(e,t,r){(void 0!==r&&!ye(e[t],r)||void 0===r&&!(t in e))&&ne(e,t,r)}function te(e,t,r){var n=e[t];O.call(e,t)&&ye(n,r)&&(void 0!==r||t in e)||ne(e,t,r)}function re(e,t){for(var r=e.length;r--;)if(ye(e[r][0],t))return r;return-1}function ne(e,t,r){"__proto__"==t&&M?M(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}X.prototype.clear=function(){this.__data__=z?z(null):{},this.size=0},X.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},X.prototype.get=function(e){var t=this.__data__;if(z){var r=t[e];return r===n?void 0:r}return O.call(t,e)?t[e]:void 0},X.prototype.has=function(e){var t=this.__data__;return z?void 0!==t[e]:O.call(t,e)},X.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=z&&void 0===t?n:t,this},Z.prototype.clear=function(){this.__data__=[],this.size=0},Z.prototype.delete=function(e){var t=this.__data__,r=re(t,e);return!(r<0)&&(r==t.length-1?t.pop():J.call(t,r,1),--this.size,!0)},Z.prototype.get=function(e){var t=this.__data__,r=re(t,e);return r<0?void 0:t[r][1]},Z.prototype.has=function(e){return re(this.__data__,e)>-1},Z.prototype.set=function(e,t){var r=this.__data__,n=re(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},G.prototype.clear=function(){this.size=0,this.__data__={hash:new X,map:new(q||Z),string:new X}},G.prototype.delete=function(e){var t=fe(this,e).delete(e);return this.size-=t?1:0,t},G.prototype.get=function(e){return fe(this,e).get(e)},G.prototype.has=function(e){return fe(this,e).has(e)},G.prototype.set=function(e,t){var r=fe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Q.prototype.clear=function(){this.__data__=new Z,this.size=0},Q.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Q.prototype.get=function(e){return this.__data__.get(e)},Q.prototype.has=function(e){return this.__data__.has(e)},Q.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Z){var n=r.__data__;if(!q||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new G(n)}return r.set(e,t),this.size=r.size,this};var ie,ae=function(e,t,r){for(var n=-1,i=Object(e),a=r(e),s=a.length;s--;){var o=a[ie?s:++n];if(!1===t(i[o],o,i))break}return e};function se(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":B&&B in Object(e)?function(e){var t=O.call(e,B),r=e[B];try{e[B]=void 0;var n=!0}catch(e){}var i=C.call(e);n&&(t?e[B]=r:delete e[B]);return i}(e):function(e){return C.call(e)}(e)}function oe(e){return Ae(e)&&se(e)==a}function ce(e){return!(!xe(e)||function(e){return!!D&&D in e}(e))&&(Pe(e)?$:c).test(function(e){if(null!=e){try{return A.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function ue(e){if(!xe(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ge(e),r=[];for(var n in e)("constructor"!=n||!t&&O.call(e,n))&&r.push(n);return r}function le(e,t,r,n,i){e!==t&&ae(t,(function(a,s){if(i||(i=new Q),xe(a))!function(e,t,r,n,i,a,s){var c=ve(e,r),u=ve(t,r),l=s.get(u);if(l)return void ee(e,r,l);var p=a?a(c,u,r+"",e,t,s):void 0,d=void 0===p;if(d){var f=be(u),_=!f&&ke(u),h=!f&&!_&&Oe(u);p=u,f||_||h?be(c)?p=c:Ae(w=c)&&Se(w)?p=function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(c):_?(d=!1,p=function(e,t){if(t)return e.slice();var r=e.length,n=L?L(r):new e.constructor(r);return e.copy(n),n}(u,!0)):h?(d=!1,g=u,v=!0?(m=g.buffer,y=new m.constructor(m.byteLength),new T(y).set(new T(m)),y):g.buffer,p=new g.constructor(v,g.byteOffset,g.length)):p=[]:function(e){if(!Ae(e)||se(e)!=o)return!1;var t=R(e);if(null===t)return!0;var r=O.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&A.call(r)==N}(u)||we(u)?(p=c,we(c)?p=function(e){return function(e,t,r,n){var i=!r;r||(r={});var a=-1,s=t.length;for(;++a<s;){var o=t[a],c=n?n(r[o],e[o],o,r,e):void 0;void 0===c&&(c=e[o]),i?ne(r,o,c):te(r,o,c)}return r}(e,De(e))}(c):xe(c)&&!Pe(c)||(p=function(e){return"function"!=typeof e.constructor||ge(e)?{}:V(R(e))}(u))):d=!1}var g,v,m,y;var w;d&&(s.set(u,p),i(p,u,n,a,s),s.delete(u));ee(e,r,p)}(e,t,s,r,le,n,i);else{var c=n?n(ve(e,s),a,s+"",e,t,i):void 0;void 0===c&&(c=a),ee(e,s,c)}}),De)}function pe(e,t){return me(function(e,t,r){return t=F(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=F(n.length-t,0),s=Array(a);++i<a;)s[i]=n[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=n[i];return o[t]=r(s),w(e,this,o)}}(e,t,$e),e+"")}var de=M?function(e,t){return M(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:$e;function fe(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function _e(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return ce(r)?r:void 0}function he(e,t){var r=typeof e;return!!(t=null==t?i:t)&&("number"==r||"symbol"!=r&&u.test(e))&&e>-1&&e%1==0&&e<t}function ge(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||j)}function ve(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var me=function(e){var t=0,r=0;return function(){var n=W(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(de);function ye(e,t){return e===t||e!=e&&t!=t}var we=oe(function(){return arguments}())?oe:function(e){return Ae(e)&&O.call(e,"callee")&&!U.call(e,"callee")},be=Array.isArray;function Se(e){return null!=e&&je(e.length)&&!Pe(e)}var ke=K||function(){return!1};function Pe(e){if(!xe(e))return!1;var t=se(e);return t==s||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function je(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function xe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ae(e){return null!=e&&"object"==typeof e}var Oe=y?function(e){return function(t){return e(t)}}(y):function(e){return Ae(e)&&je(e.length)&&!!l[se(e)]};function De(e){return Se(e)?Y(e,!0):ue(e)}var Ce,Ne=(Ce=function(e,t,r){le(e,t,r)},pe((function(e,t){var r=-1,n=t.length,i=n>1?t[n-1]:void 0,a=n>2?t[2]:void 0;for(i=Ce.length>3&&"function"==typeof i?(n--,i):void 0,a&&function(e,t,r){if(!xe(r))return!1;var n=typeof t;return!!("number"==n?Se(r)&&he(t,r.length):"string"==n&&t in r)&&ye(r[t],e)}(t[0],t[1],a)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var s=t[r];s&&Ce(e,s,r,i)}return e})));function $e(e){return e}t.exports=Ne}(Ge,Ge.exports);var Qe=Ge.exports,Ye="default",et="not_collect",tt=["de","en","es","fr","ko","nl","pt","ru","tr","vi","zh-hans","zh-hant","it","id","ms","hi","th","ja","bn","pl","fil"],rt={exports:{}},nt=L.exports("wks"),it=T,at=i.exports.Symbol,st="function"==typeof at;(rt.exports=function(e){return nt[e]||(nt[e]=st&&at[e]||(st?at:it)("Symbol."+e))}).store=nt;var ot=oe,ct=rt.exports("toStringTag"),ut="Arguments"==ot(function(){return arguments}()),lt=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),ct))?r:ut?ot(t):"Object"==(n=ot(t))&&"function"==typeof t.callee?"Arguments":n},pt=lt,dt={};dt[rt.exports("toStringTag")]="z",dt+""!="[object z]"&&C.exports(Object.prototype,"toString",(function(){return"[object "+pt(this)+"]"}),!0);var ft=d,_t=function(){var e=ft(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};_&&"g"!=/./g.flags&&u.f(RegExp.prototype,"flags",{configurable:!0,get:_t});var ht=d,gt=_t,vt=_,mt="toString",yt=/./.toString,wt=function(e){C.exports(RegExp.prototype,mt,e,!0)};f((function(){return"/a/b"!=yt.call({source:"a",flags:"b"})}))?wt((function(){var e=ht(this);return"/".concat(e.source,"/","flags"in e?e.flags:!vt&&e instanceof RegExp?gt.call(e):void 0)})):yt.name!=mt&&wt((function(){return yt.call(this)}));var bt="",St="",kt=function(){return St},Pt=function(e){bt=e},jt=ae,xt=s.exports,At=f,Ot=Be,Dt=Re;!function(e,t){var r=(xt.Object||{})[e]||Object[e],n={};n[e]=t(r),jt(jt.S+jt.F*At((function(){r(1)})),"Object",n)}("keys",(function(){return function(e){return Dt(Ot(e))}}));var Ct=l,Nt=oe,$t=rt.exports("match"),Et=function(e){var t;return Ct(e)&&(void 0!==(t=e[$t])?!!t:"RegExp"==Nt(e))},It=d,Tt=X,Lt=rt.exports("species"),Rt=ge,Ht=le,Ut=function(e){return function(t,r){var n,i,a=String(Ht(t)),s=Rt(r),o=a.length;return s<0||s>=o?e?"":void 0:(n=a.charCodeAt(s))<55296||n>56319||s+1===o||(i=a.charCodeAt(s+1))<56320||i>57343?e?a.charAt(s):n:e?a.slice(s,s+2):i-56320+(n-55296<<10)+65536}},Jt=Ut(!0),Bt=function(e,t,r){return t+(r?Jt(e,t).length:1)},Mt=lt,Kt=RegExp.prototype.exec,Ft=function(e,t){var r=e.exec;if("function"==typeof r){var n=r.call(e,t);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==Mt(e))throw new TypeError("RegExp#exec called on incompatible receiver");return Kt.call(e,t)},Wt=_t,qt=RegExp.prototype.exec,zt=String.prototype.replace,Vt=qt,Xt=function(){var e=/a/,t=/b*/g;return qt.call(e,"a"),qt.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Zt=void 0!==/()??/.exec("")[1];(Xt||Zt)&&(Vt=function(e){var t,r,n,i,a=this;return Zt&&(r=new RegExp("^"+a.source+"$(?!\\s)",Wt.call(a))),Xt&&(t=a.lastIndex),n=qt.call(a,e),Xt&&n&&(a.lastIndex=a.global?n.index+n[0].length:t),Zt&&n&&n.length>1&&zt.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n});var Gt=Vt;ae({target:"RegExp",proto:!0,forced:Gt!==/./.exec},{exec:Gt});var Qt=C.exports,Yt=D,er=f,tr=le,rr=rt.exports,nr=Gt,ir=rr("species"),ar=!er((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),sr=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}(),or=function(e,t,r){var n=rr(e),i=!er((function(){var t={};return t[n]=function(){return 7},7!=""[e](t)})),a=i?!er((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[ir]=function(){return r}),r[n](""),!t})):void 0;if(!i||!a||"replace"===e&&!ar||"split"===e&&!sr){var s=/./[n],o=r(tr,n,""[e],(function(e,t,r,n,a){return t.exec===nr?i&&!a?{done:!0,value:s.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}})),c=o[0],u=o[1];Qt(String.prototype,e,c),Yt(RegExp.prototype,n,2==t?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)})}},cr=Et,ur=d,lr=function(e,t){var r,n=It(e).constructor;return void 0===n||null==(r=It(n)[Lt])?t:Tt(r)},pr=Bt,dr=ye,fr=Ft,_r=Gt,hr=f,gr=Math.min,vr=[].push,mr=4294967295,yr=!hr((function(){RegExp(mr,"y")}));or("split",2,(function(e,t,r,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!cr(e))return r.call(n,e,t);for(var i,a,s,o=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,l=void 0===t?mr:t>>>0,p=new RegExp(e.source,c+"g");(i=_r.call(p,n))&&!((a=p.lastIndex)>u&&(o.push(n.slice(u,i.index)),i.length>1&&i.index<n.length&&vr.apply(o,i.slice(1)),s=i[0].length,u=a,o.length>=l));)p.lastIndex===i.index&&p.lastIndex++;return u===n.length?!s&&p.test("")||o.push(""):o.push(n.slice(u)),o.length>l?o.slice(0,l):o}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,n){var a=e(this),s=null==r?void 0:r[t];return void 0!==s?s.call(r,a,n):i.call(String(a),r,n)},function(e,t){var a=n(i,e,this,t,i!==r);if(a.done)return a.value;var s=ur(e),o=String(this),c=lr(s,RegExp),u=s.unicode,l=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(yr?"y":"g"),p=new c(yr?s:"^(?:"+s.source+")",l),d=void 0===t?mr:t>>>0;if(0===d)return[];if(0===o.length)return null===fr(p,o)?[o]:[];for(var f=0,_=0,h=[];_<o.length;){p.lastIndex=yr?_:0;var g,v=fr(p,yr?o:o.slice(_));if(null===v||(g=gr(dr(p.lastIndex+(yr?0:_)),o.length))===f)_=pr(o,_,u);else{if(h.push(o.slice(f,_)),h.length===d)return h;for(var m=1;m<=v.length-1;m++)if(h.push(v[m]),h.length===d)return h;_=f=g}}return h.push(o.slice(f)),h}]}));var wr=oe,br=Array.isArray||function(e){return"Array"==wr(e)},Sr=l,kr=br,Pr=rt.exports("species"),jr=function(e){var t;return kr(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!kr(t.prototype)||(t=void 0),Sr(t)&&null===(t=t[Pr])&&(t=void 0)),void 0===t?Array:t},xr=G,Ar=ue,Or=Be,Dr=ye,Cr=function(e,t){return new(jr(e))(t)},Nr=function(e,t){var r=1==e,n=2==e,i=3==e,a=4==e,s=6==e,o=5==e||s,c=t||Cr;return function(t,u,l){for(var p,d,f=Or(t),_=Ar(f),h=xr(u,l,3),g=Dr(_.length),v=0,m=r?c(t,g):n?c(t,0):void 0;g>v;v++)if((o||v in _)&&(d=h(p=_[v],v,f),e))if(r)m[v]=d;else if(d)switch(e){case 3:return!0;case 5:return p;case 6:return v;case 2:m.push(p)}else if(a)return!1;return s?-1:i||a?a:m}},$r=rt.exports("unscopables"),Er=Array.prototype;null==Er[$r]&&D(Er,$r,{});var Ir=function(e){Er[$r][e]=!0},Tr=ae,Lr=Nr(5),Rr="find",Hr=!0;Rr in[]&&Array(1).find((function(){Hr=!1})),Tr(Tr.P+Tr.F*Hr,"Array",{find:function(e){return Lr(this,e,arguments.length>1?arguments[1]:void 0)}}),Ir(Rr);var Ur=l,Jr=d,Br=function(e,t){if(Jr(e),!Ur(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},Mr={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return Br(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:Br},Kr=l,Fr=Mr.set,Wr=function(e,t,r){var n,i=t.constructor;return i!==r&&"function"==typeof i&&(n=i.prototype)!==r.prototype&&Kr(n)&&Fr&&Fr(e,n),e},qr={},zr=Ee,Vr=Ie.concat("length","prototype");qr.f=Object.getOwnPropertyNames||function(e){return zr(e,Vr)};var Xr=i.exports,Zr=u,Gr=_,Qr=rt.exports("species"),Yr=i.exports,en=Wr,tn=u.f,rn=qr.f,nn=Et,an=_t,sn=Yr.RegExp,on=sn,cn=sn.prototype,un=/a/g,ln=/a/g,pn=new sn(un)!==un;if(_&&(!pn||f((function(){return ln[rt.exports("match")]=!1,sn(un)!=un||sn(ln)==ln||"/a/i"!=sn(un,"i")})))){sn=function(e,t){var r=this instanceof sn,n=nn(e),i=void 0===t;return!r&&n&&e.constructor===sn&&i?e:en(pn?new on(n&&!i?e.source:e,t):on((n=e instanceof sn)?e.source:e,n&&i?an.call(e):t),r?this:cn,sn)};for(var dn=function(e){e in sn||tn(sn,e,{configurable:!0,get:function(){return on[e]},set:function(t){on[e]=t}})},fn=rn(on),_n=0;fn.length>_n;)dn(fn[_n++]);cn.constructor=sn,sn.prototype=cn,C.exports(Yr,"RegExp",sn)}!function(e){var t=Xr[e];Gr&&t&&!t[Qr]&&Zr.f(t,Qr,{configurable:!0,get:function(){return this}})}("RegExp");var hn=d,gn=Be,vn=ye,mn=ge,yn=Bt,wn=Ft,bn=Math.max,Sn=Math.min,kn=Math.floor,Pn=/\$([$&`']|\d\d?|<[^>]*>)/g,jn=/\$([$&`']|\d\d?)/g;or("replace",2,(function(e,t,r,n){return[function(n,i){var a=e(this),s=null==n?void 0:n[t];return void 0!==s?s.call(n,a,i):r.call(String(a),n,i)},function(e,t){var a=n(r,e,this,t);if(a.done)return a.value;var s=hn(e),o=String(this),c="function"==typeof t;c||(t=String(t));var u=s.global;if(u){var l=s.unicode;s.lastIndex=0}for(var p=[];;){var d=wn(s,o);if(null===d)break;if(p.push(d),!u)break;""===String(d[0])&&(s.lastIndex=yn(o,vn(s.lastIndex),l))}for(var f,_="",h=0,g=0;g<p.length;g++){d=p[g];for(var v=String(d[0]),m=bn(Sn(mn(d.index),o.length),0),y=[],w=1;w<d.length;w++)y.push(void 0===(f=d[w])?f:String(f));var b=d.groups;if(c){var S=[v].concat(y,m,o);void 0!==b&&S.push(b);var k=String(t.apply(void 0,S))}else k=i(v,o,m,y,b,t);m>=h&&(_+=o.slice(h,m)+k,h=m+v.length)}return _+o.slice(h)}];function i(e,t,n,i,a,s){var o=n+e.length,c=i.length,u=jn;return void 0!==a&&(a=gn(a),u=Pn),r.call(s,u,(function(r,s){var u;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(o);case"<":u=a[s.slice(1,-1)];break;default:var l=+s;if(0===l)return r;if(l>c){var p=kn(l/10);return 0===p?r:p<=c?void 0===i[p-1]?s.charAt(1):i[p-1]+s.charAt(1):r}u=i[l-1]}return void 0===u?"":u}))}}));var xn=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},An=d,On=xn,Dn=Ft;function Cn(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var i=1,a="";if("?"===e[o=r+1])throw new TypeError('Pattern cannot start with "?" at '+o);for(;o<e.length;)if("\\"!==e[o]){if(")"===e[o]){if(0==--i){o++;break}}else if("("===e[o]&&(i++,"?"!==e[o+1]))throw new TypeError("Capturing groups are not allowed at "+o);a+=e[o++]}else a+=e[o++]+e[o++];if(i)throw new TypeError("Unbalanced pattern at "+r);if(!a)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:a}),r=o}else{for(var s="",o=r+1;o<e.length;){var c=e.charCodeAt(o);if(!(c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||95===c))break;s+=e[o++]}if(!s)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:s}),r=o}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,i=void 0===n?"./":n,a="[^"+Nn(t.delimiter||"/#?")+"]+?",s=[],o=0,c=0,u="",l=function(e){if(c<r.length&&r[c].type===e)return r[c++].value},p=function(e){var t=l(e);if(void 0!==t)return t;var n=r[c],i=n.type,a=n.index;throw new TypeError("Unexpected "+i+" at "+a+", expected "+e)},d=function(){for(var e,t="";e=l("CHAR")||l("ESCAPED_CHAR");)t+=e;return t};c<r.length;){var f=l("CHAR"),_=l("NAME"),h=l("PATTERN");if(_||h){var g=f||"";-1===i.indexOf(g)&&(u+=g,g=""),u&&(s.push(u),u=""),s.push({name:_||o++,prefix:g,suffix:"",pattern:h||a,modifier:l("MODIFIER")||""})}else{var v=f||l("ESCAPED_CHAR");if(v)u+=v;else if(u&&(s.push(u),u=""),l("OPEN")){g=d();var m=l("NAME")||"",y=l("PATTERN")||"",w=d();p("CLOSE"),s.push({name:m||(y?o++:""),pattern:m&&!y?a:y,prefix:g,suffix:w,modifier:l("MODIFIER")||""})}else p("END")}}return s}function Nn(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function $n(e){return e&&e.sensitive?"":"i"}function En(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,i=void 0!==n&&n,a=r.start,s=void 0===a||a,o=r.end,c=void 0===o||o,u=r.encode,l=void 0===u?function(e){return e}:u,p="["+Nn(r.endsWith||"")+"]|$",d="["+Nn(r.delimiter||"/#?")+"]",f=s?"^":"",_=0,h=e;_<h.length;_++){var g=h[_];if("string"==typeof g)f+=Nn(l(g));else{var v=Nn(l(g.prefix)),m=Nn(l(g.suffix));if(g.pattern)if(t&&t.push(g),v||m)if("+"===g.modifier||"*"===g.modifier){var y="*"===g.modifier?"?":"";f+="(?:"+v+"((?:"+g.pattern+")(?:"+m+v+"(?:"+g.pattern+"))*)"+m+")"+y}else f+="(?:"+v+"("+g.pattern+")"+m+")"+g.modifier;else f+="("+g.pattern+")"+g.modifier;else f+="(?:"+v+m+")"+g.modifier}}if(c)i||(f+=d+"?"),f+=r.endsWith?"(?="+p+")":"$";else{var w=e[e.length-1],b="string"==typeof w?d.indexOf(w[w.length-1])>-1:void 0===w;i||(f+="(?:"+d+"(?="+p+"))?"),b||(f+="(?="+d+"|"+p+")")}return new RegExp(f,$n(r))}(Cn(e,r),t,r)}function In(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,i=r.exec(e.source);i;)t.push({name:i[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),i=r.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return In(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",$n(r))}(e,t,r):En(e,t,r)}or("search",1,(function(e,t,r,n){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=n(r,e,this);if(t.done)return t.value;var i=An(e),a=String(this),s=i.lastIndex;On(s,0)||(i.lastIndex=0);var o=Dn(i,a);return On(i.lastIndex,s)||(i.lastIndex=s),null===o?-1:o.index}]}));var Tn=d,Ln=ye,Rn=Bt,Hn=Ft;or("match",1,(function(e,t,r,n){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=n(r,e,this);if(t.done)return t.value;var i=Tn(e),a=String(this);if(!i.global)return Hn(i,a);var s=i.unicode;i.lastIndex=0;for(var o,c=[],u=0;null!==(o=Hn(i,a));){var l=String(o[0]);c[u]=l,""===l&&(i.lastIndex=Rn(a,Ln(i.lastIndex),s)),u++}return 0===u?null:c}]}));var Un=function(){return window.navigator.userAgent.indexOf("KuCoin")>-1},Jn=function(e){return!!Array.isArray(e)&&!!e.some((function(e){return Array.isArray(e)}))};function Bn(){}var Mn="",Kn={},Fn=function(){return console.warn("[kc sensors]: invalid spm argument, please pass spm argument like [blockId(String), eleId(String)] or [pageId(String), [blockId(String), eleId(String)]]")},Wn=function(e,t){return void 0===t&&(t=!1),!(!Array.isArray(e)||2!==e.length||!e.every((function(e){return"string"==typeof e})))||(t&&Fn(),!1)},qn=function(e){if(Array.isArray(e)){if(Jn(e)){var t=e[0],r=e[1];return!("string"!=typeof t||!Wn(r))||(Fn(),!1)}return Wn(e,!0)}return Fn(),!1},zn=function(e){Mn=e},Vn=function(){return Mn},Xn=function(e){Kn=e},Zn=function(e){var t=Object.keys(Kn),r=e||window.location.pathname,n=r.split("/")[1],i=tt.find((function(e){return e===n}));if(i){var a=new RegExp("^/"+i+"/?");r=r.replace(a,"/")}r="/"===r?r:r.replace(/\/$/,"");var s=t.find((function(e){return In(e).test(r)}));return s?Kn[s]:""},Gn=function(e){var t=e||window.location.search;try{return new URLSearchParams(t).get("spm")||""}catch(e){return""}},Qn=function(e){if(Jn(e)){var t=e[0],r=e[1];return Mn+"."+(Zn()||t)+"."+r.join(".")}return Mn+"."+Zn()+"."+e.join(".")},Yn=function(e){return function(t){if("$pageview"===t.event)return e()}},ei=Object.freeze({__proto__:null,validateSpm:qn,setSiteId:zn,getSiteId:Vn,setPageIdMap:Xn,getPageId:Zn,getPreSpmCode:Gn,compose:Qn,wrapPv:Yn}),ti=function(){function e(){this.cache={}}var t=e.prototype;return t.on=function(e,t){this.cache[e]=this.cache[e]||[];var r=this.cache[e];return-1===r.indexOf(t)&&r.push(t),this},t.emit=function(e){for(var t=this,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a=this.cache[e];return Array.isArray(a)&&a.forEach((function(e){e.apply(t,n)})),this},t.off=function(e,t){var r=this.cache[e];if(Array.isArray(r))if(t){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}else r.length=0;return this},e}(),ri=!1,ni=new ti;function ii(e){var t=window.history[e];return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=t.apply(this,n),s=new window.Event(e.toLowerCase());return s.arguments=n,window.dispatchEvent(s),a}}window.history.pushState=ii("pushState"),window.history.replaceState=ii("replaceState"),window.addEventListener("load",(function(e){ni.emit("$enter",e)})),window.addEventListener("beforeunload",(function(e){ri=!0,ni.emit("$leave",e)})),document.addEventListener("visibilitychange",(function(e){"visible"===document.visibilityState&&ni.emit("$enter",e),"hidden"===document.visibilityState&&(ri||ni.emit("$leave",e))}));["pushstate","popstate","replacestate"].forEach((function(e){window.addEventListener(e,(function(e){ni.emit("$leave",e),ni.emit("$enter",e)}))}));var ai={t0:Date.now(),originPathname:window.location.pathname,originSearch:window.location.search},si=function(){ai.t0=Date.now(),ai.originPathname=window.location.pathname,ai.originSearch=window.location.search},oi=function(){t.exports.track("web_page_leave",{pre_spm_id:Gn(ai.originSearch),site_id:Vn(),page_id:Zn(ai.originPathname),event_duration:(Date.now()-ai.t0)/1e3})},ci=["env","send_url","page_view","web_click","web_stay","web_page_leave","log","spa"],ui={exports:{}},li=T("meta"),pi=l,di=$,fi=u.f,_i=0,hi=Object.isExtensible||function(){return!0},gi=!f((function(){return hi(Object.preventExtensions({}))})),vi=function(e){fi(e,li,{value:{i:"O"+ ++_i,w:{}}})},mi=ui.exports={KEY:li,NEED:!1,fastKey:function(e,t){if(!pi(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!di(e,li)){if(!hi(e))return"F";if(!t)return"E";vi(e)}return e[li].i},getWeak:function(e,t){if(!di(e,li)){if(!hi(e))return!0;if(!t)return!1;vi(e)}return e[li].w},onFreeze:function(e){return gi&&mi.NEED&&hi(e)&&!di(e,li)&&vi(e),e}},yi=C.exports,wi=function(e,t,r){for(var n in t)yi(e,n,t[n],r);return e},bi=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e},Si={exports:{}},ki=d,Pi={},ji=Pi,xi=rt.exports("iterator"),Ai=Array.prototype,Oi=lt,Di=rt.exports("iterator"),Ci=Pi,Ni=s.exports.getIteratorMethod=function(e){if(null!=e)return e[Di]||e["@@iterator"]||Ci[Oi(e)]},$i=G,Ei=function(e,t,r,n){try{return n?t(ki(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&ki(i.call(e)),t}},Ii=function(e){return void 0!==e&&(ji.Array===e||Ai[xi]===e)},Ti=d,Li=ye,Ri=Ni,Hi={},Ui={},Ji=Si.exports=function(e,t,r,n,i){var a,s,o,c,u=i?function(){return e}:Ri(e),l=$i(r,n,t?2:1),p=0;if("function"!=typeof u)throw TypeError(e+" is not iterable!");if(Ii(u)){for(a=Li(e.length);a>p;p++)if((c=t?l(Ti(s=e[p])[0],s[1]):l(e[p]))===Hi||c===Ui)return c}else for(o=u.call(e);!(s=o.next()).done;)if((c=Ei(o,l,s.value,t))===Hi||c===Ui)return c};Ji.BREAK=Hi,Ji.RETURN=Ui;var Bi=l,Mi=function(e,t){if(!Bi(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},Ki=wi,Fi=ui.exports.getWeak,Wi=d,qi=l,zi=bi,Vi=Si.exports,Xi=Nr,Zi=$,Gi=Mi,Qi=Xi(5),Yi=Xi(6),ea=0,ta=function(e){return e._l||(e._l=new ra)},ra=function(){this.a=[]},na=function(e,t){return Qi(e.a,(function(e){return e[0]===t}))};ra.prototype={get:function(e){var t=na(this,e);if(t)return t[1]},has:function(e){return!!na(this,e)},set:function(e,t){var r=na(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=Yi(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}};var ia={getConstructor:function(e,t,r,n){var i=e((function(e,a){zi(e,i,t,"_i"),e._t=t,e._i=ea++,e._l=void 0,null!=a&&Vi(a,r,e[n],e)}));return Ki(i.prototype,{delete:function(e){if(!qi(e))return!1;var r=Fi(e);return!0===r?ta(Gi(this,t)).delete(e):r&&Zi(r,this._i)&&delete r[this._i]},has:function(e){if(!qi(e))return!1;var r=Fi(e);return!0===r?ta(Gi(this,t)).has(e):r&&Zi(r,this._i)}}),i},def:function(e,t,r){var n=Fi(Wi(t),!0);return!0===n?ta(e).set(t,r):n[e._i]=r,e},ufstore:ta},aa=rt.exports("iterator"),sa=!1;try{var oa=[7][aa]();oa.return=function(){sa=!0},Array.from(oa,(function(){throw 2}))}catch(e){}var ca,ua=u.f,la=$,pa=rt.exports("toStringTag"),da=function(e,t,r){e&&!la(e=r?e:e.prototype,pa)&&ua(e,pa,{configurable:!0,value:t})},fa=i.exports,_a=ae,ha=C.exports,ga=wi,va=ui.exports,ma=Si.exports,ya=bi,wa=l,ba=f,Sa=function(e,t){if(!t&&!sa)return!1;var r=!1;try{var n=[7],i=n[aa]();i.next=function(){return{done:r=!0}},n[aa]=function(){return i},e(n)}catch(e){}return r},ka=da,Pa=Wr,ja=i.exports,xa=Nr(0),Aa=C.exports,Oa=ui.exports,Da=Xe,Ca=ia,Na=l,$a=Mi,Ea=Mi,Ia=!ja.ActiveXObject&&"ActiveXObject"in ja,Ta="WeakMap",La=Oa.getWeak,Ra=Object.isExtensible,Ha=Ca.ufstore,Ua=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},Ja={get:function(e){if(Na(e)){var t=La(e);return!0===t?Ha($a(this,Ta)).get(e):t?t[this._i]:void 0}},set:function(e,t){return Ca.def($a(this,Ta),e,t)}},Ba=function(e,t,r,n,i,a){var s=fa[e],o=s,c=i?"set":"add",u=o&&o.prototype,l={},p=function(e){var t=u[e];ha(u,e,"delete"==e||"has"==e?function(e){return!(a&&!wa(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return a&&!wa(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof o&&(a||u.forEach&&!ba((function(){(new o).entries().next()})))){var d=new o,f=d[c](a?{}:-0,1)!=d,_=ba((function(){d.has(1)})),h=Sa((function(e){new o(e)})),g=!a&&ba((function(){for(var e=new o,t=5;t--;)e[c](t,t);return!e.has(-0)}));h||((o=t((function(t,r){ya(t,o,e);var n=Pa(new s,t,o);return null!=r&&ma(r,i,n[c],n),n}))).prototype=u,u.constructor=o),(_||g)&&(p("delete"),p("has"),i&&p("get")),(g||f)&&p(c),a&&u.clear&&delete u.clear}else o=n.getConstructor(t,e,i,c),ga(o.prototype,r),va.NEED=!0;return ka(o,e),l[e]=o,_a(_a.G+_a.W+_a.F*(o!=s),l),a||n.setStrong(o,e,i),o}(Ta,Ua,Ja,Ca,!0,!0);Ea&&Ia&&(Da((ca=Ca.getConstructor(Ua,Ta)).prototype,Ja),Oa.NEED=!0,xa(["delete","has","get","set"],(function(e){var t=Ba.prototype,r=t[e];Aa(t,e,(function(t,n){if(Na(t)&&!Ra(t)){this._f||(this._f=new ca);var i=this._f[e](t,n);return"set"==e?this:i}return r.call(this,t,n)}))})));var Ma=u,Ka=d,Fa=Re,Wa=_?Object.defineProperties:function(e,t){Ka(e);for(var r,n=Fa(t),i=n.length,a=0;i>a;)Ma.f(e,r=n[a++],t[r]);return e},qa=i.exports.document,za=qa&&qa.documentElement,Va=d,Xa=Wa,Za=Ie,Ga=Oe("IE_PROTO"),Qa=function(){},Ya=function(){var e,t=y("iframe"),r=Za.length;for(t.style.display="none",za.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Ya=e.F;r--;)delete Ya.prototype[Za[r]];return Ya()},es=Object.create||function(e,t){var r;return null!==e?(Qa.prototype=Va(e),r=new Qa,Qa.prototype=null,r[Ga]=e):r=Ya(),void 0===t?r:Xa(r,t)},ts=x,rs=da,ns={};D(ns,rt.exports("iterator"),(function(){return this}));var is=$,as=Be,ss=Oe("IE_PROTO"),os=Object.prototype,cs=Object.getPrototypeOf||function(e){return e=as(e),is(e,ss)?e[ss]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?os:null},us=ae,ls=C.exports,ps=D,ds=Pi,fs=function(e,t,r){e.prototype=es(ns,{next:ts(1,r)}),rs(e,t+" Iterator")},_s=da,hs=cs,gs=rt.exports("iterator"),vs=!([].keys&&"next"in[].keys()),ms="keys",ys="values",ws=function(){return this},bs=function(e,t,r,n,i,a,s){fs(r,t,n);var o,c,u,l=function(e){if(!vs&&e in _)return _[e];switch(e){case ms:case ys:return function(){return new r(this,e)}}return function(){return new r(this,e)}},p=t+" Iterator",d=i==ys,f=!1,_=e.prototype,h=_[gs]||_["@@iterator"]||i&&_[i],g=h||l(i),v=i?d?l("entries"):g:void 0,m="Array"==t&&_.entries||h;if(m&&(u=hs(m.call(new e)))!==Object.prototype&&u.next&&(_s(u,p,!0),"function"!=typeof u[gs]&&ps(u,gs,ws)),d&&h&&h.name!==ys&&(f=!0,g=function(){return h.call(this)}),(vs||f||!_[gs])&&ps(_,gs,g),ds[t]=g,ds[p]=ws,i)if(o={values:d?g:l(ys),keys:a?g:l(ms),entries:v},s)for(c in o)c in _||ls(_,c,o[c]);else us(us.P+us.F*(vs||f),t,o);return o},Ss=Ut(!0);bs(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=Ss(t,r),this._i+=e.length,{value:e,done:!1})}));var ks=Ir,Ps=function(e,t){return{value:t,done:!!e}},js=Pi,xs=fe,As=bs(Array,"Array",(function(e,t){this._t=xs(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,Ps(1)):Ps(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values");js.Arguments=js.Array,ks("keys"),ks("values"),ks("entries");for(var Os=As,Ds=Re,Cs=C.exports,Ns=i.exports,$s=D,Es=Pi,Is=rt.exports,Ts=Is("iterator"),Ls=Is("toStringTag"),Rs=Es.Array,Hs={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Us=Ds(Hs),Js=0;Js<Us.length;Js++){var Bs,Ms=Us[Js],Ks=Hs[Ms],Fs=Ns[Ms],Ws=Fs&&Fs.prototype;if(Ws&&(Ws[Ts]||$s(Ws,Ts,Rs),Ws[Ls]||$s(Ws,Ls,Ms),Es[Ms]=Rs,Ks))for(Bs in Os)Ws[Bs]||Cs(Ws,Bs,Os[Bs],!0)}var qs,zs,Vs=Function.prototype,Xs=Object.prototype,Zs=Vs.toString,Gs=Xs.hasOwnProperty,Qs=Zs.call(Object),Ys=Xs.toString,eo=(qs=Object.getPrototypeOf,zs=Object,function(e){return qs(zs(e))});var to=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=Ys.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=eo(e);if(null===t)return!0;var r=Gs.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Zs.call(r)==Qs},ro=["spm"],no={sensors:r,init:function(e,t,i){var a=e.env,s=e.send_url,o=void 0===s?null:s,c=e.page_view,u=void 0===c||c,l=e.web_click,p=void 0!==l&&l,d=e.web_stay,f=void 0!==d&&d,_=e.web_page_leave,h=void 0===_||_,g=e.log,v=void 0===g||g,m=e.spa,y=void 0===m||m,w=n(e,ci);void 0===i&&(i={});var b="https://bigdata-scfx-push.kucoin.plus/sa?project=default";return"production"===a&&(b="https://bigdata-scfx-push.kucoin.plus/sa?project=production"),"string"==typeof proxy_url&&(b=o),zn(t),Xn(i),r.init(Qe({server_url:b,send_type:"beacon",show_log:v&&"development"===a,is_track_single_page:y,is_track_device_id:!0,heatmap:{clickmap:p?Ye:et,scroll_notice_map:f?Ye:et},app_js_bridge:Un()},w)),function(e){var t,n,i,a,s;return void 0===e&&(e={app_name:""}),e.app_name||console.warn("[kc sensors]: please set the public property app_name (package.json name)"),r.registerPage(Object.assign({},e,{is_login:function(){return!!bt},is_vip:function(){var e=kt();return!!e&&"0"!==e},vip_level:function(){return kt()},pre_spm_id:Yn(Gn),site_id:Yn(Vn),page_id:Yn(Zn),JS_env:(t=window.navigator.userAgent,n=!!t.match(/AppleWebKit.*Mobile.*/),i=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),a=t.indexOf("Android")>-1||t.indexOf("Linux")>-1,s=Un(),n?s&&a?"androidApp":s&&i?"iOSApp":!s&&a?"androidBrowser":!s&&i?"iOSBrowser":"pcBrowser":"pcBrowser")})),u&&r.quick("autoTrack"),h&&(ni.on("$enter",si),ni.on("$leave",oi)),r}},trackClick:function(e,r){qn(e)&&t.exports.track("page_click",Object.assign({spm_id:Qn(e)},r))},observeExpose:function(e){var r=new WeakMap,i=Object.create({observe:Bn,unobserve:Bn});return IntersectionObserver&&(i=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var i=r.get(e.target);if("function"==typeof i){var a=i();if(to(a)&&qn(a.spm)){var s=a.spm,o=n(a,ro);t.exports.track("expose",Object.assign({spm_id:Qn(s)},o))}}}}))}),e)),function(e,t){return function(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}(e)&&"function"==typeof t&&(r.set(e,t),i.observe(e)),function(){try{r.delete(e),i.unobserve(e)}catch(e){}}}},getAnonymousID:function(){return r.quick("getAnonymousID")},login:function(e,r){void 0===e&&(e=""),void 0===r&&(r="0"),Pt(e),St=r.toString(),e&&t.exports.login(e)},track:t.exports.track,spm:ei};return no}));
