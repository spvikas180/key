(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9538],{43172:function(e,n,t){"use strict";t.d(n,{r:function(){return c}});var r=t(87757),a=t.n(r),o=t(27812),i=t(50029),s=t(2761),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=function(){var n=(0,i.Z)(a().mark((function n(){var r,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(3714),t.e(3610),t.e(4512)]).then(t.bind(t,50014));case 2:if(r=n.sent,window.xchg={},r.default(window.xchg),i=window.xchg.i){n.next=8;break}throw new Error("Failed to load xchgId");case 8:i.init.apply(i,(0,o.Z)(e));case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),r=(0,s.OT)({onMount:n});return{ref:r,generateDeviceFingerprint:function(e){var n=window.xchg.i;return n&&n.submit?n.submit(e):""}}}},81336:function(e,n,t){"use strict";t.d(n,{$:function(){return h}});var r=t(36864),a=t(16835),o=t(4730),i=(t(2784),t(72779)),s=t.n(i),c=t(93692),l=t(34775),u=t(7206),d=t(84144),m=t(41492),g=t.n(m),p=t(52322),f=["className"],h=function(e){var n=e.className,t=(0,o.Z)(e,f),i=Array.from(u.V1).map((function(e){var n=(0,a.Z)(e,2);return{value:n[0],label:n[1]}}));return(0,p.jsx)(d.A.Consumer,{children:function(e){var a=e.language,o=e.setLanguage;return(0,p.jsx)(l.L,(0,r.Z)({className:s()(n,g().languageSelector),onChange:function(e){return o(e.target.value)},value:a,options:i,position:c.Kp,showCheckmark:!0},t))}})}},85569:function(e,n,t){"use strict";t.d(n,{y:function(){return d}});var r=t(16835),a=t(2784),o=t(72779),i=t.n(o),s=t(8648),c=t(25526),l=t.n(c),u=t(52322),d=function(e){var n=e.className,t=a.useState(!1),o=(0,r.Z)(t,2),c=o[0],d=o[1];return a.useEffect((function(){var e=setTimeout((function(){return d(!0)}),500);return function(){e&&clearTimeout(e)}})),c?(0,u.jsx)("div",{className:i()(l().loadingSpinner,n),"data-testid":"loading-spinner",children:(0,u.jsx)(s.T,{})}):null}},10109:function(e,n,t){"use strict";t.d(n,{S:function(){return u}});var r=t(36864),a=t(4730),o=(t(2784),t(41664)),i=t(11163),s=t(97029),c=t(52322),l=["href"],u=function(e){var n=e.href,t=(0,a.Z)(e,l),u=(0,i.useRouter)();return n?"string"===typeof n?(0,c.jsx)(o.default,(0,r.Z)({href:(0,s.UY)(n,u)},t)):(n.pathname&&(n.pathname=(0,s.UY)(n.pathname,u)),(0,c.jsx)(o.default,(0,r.Z)({href:n},t))):(0,c.jsx)(o.default,(0,r.Z)({href:""},t))}},54149:function(e,n,t){"use strict";var r;t.d(n,{Q:function(){return r}}),function(e){e.Personal="personal",e.Corporate="corporate"}(r||(r={}))},49538:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return Le},default:function(){return Ie}});var r=t(2784),a=t(87757),o=t.n(a),i=t(50029),s=t(16835),c=t(1566),l=t(10370),u=t(11163),d=t(72779),m=t.n(d),g=t(41435),p=t(97439),f=t(67589),h=t(12638),v=t(50594),x=t(2761),C=t(97029),y=t(85569),b=t(54149),S=t(81336),k=t(10109),_=t(36864),j=t(4730),w=t(8094),F=t(70542),N=t(2007),A=t(15150),T=t(81657),B=t(34336),P=function(e){var n;if(!e||r.Children.count(e)>1)return!1;var t=(0,B.Z)(e)?e[0]:e;return"string"==typeof t||"number"==typeof t||!!(null===t||void 0===t||null===(n=t.props)||void 0===n?void 0:n.langKey)},L=t(52322),I=["target","rel","children"],Z=r.forwardRef((function(e,n){var t=e.target,r=void 0===t?"_BLANK":t,a=e.rel,o=void 0===a?"nooopener noreferrer":a,i=e.children,s=(0,j.Z)(e,I);return(0,L.jsx)("a",(0,_.Z)({ref:n,target:r,rel:o},s,{className:m()(s.className,P(i)&&"text-tab-highlight"),children:i}))})),U=t(83772),E=t(8648),R=t(71824),D=t(84144),W=t(30436),O=t(83865),q=t(43172),M=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,V=/^([0-9a-zA-Z-_])*$/,H=function(e){return e.length>=5&&e.length<=32},z=function(e){return V.test(e)},K=function(e){return/kraken/i.test(e)},Y=function(e){return e.length>=12&&e.length<=128},J=function(e){return/[a-zA-Z]/.test(e)},Q=function(e){return/[0-9]/.test(e)},G=function(e){return/\W/.test(e)},$=function(e){var n={};return e.email?M.test(e.email)||(n.email="validation:FieldEmail:Email"):n.email="required",e.username?H(e.username)?z(e.username)?K(e.username)&&(n.username="validation:UsernameNotKraken"):n.username="validation:UsernameAllowedCharacters":n.username="validation:UsernameLength":n.username="required",e.password?Y(e.password)?J(e.password)?Q(e.password)?G(e.password)||(n.password="validation:PasswordOneSymbol"):n.password="validation:PasswordOneNumber":n.password="validation:PasswordOneLetter":n.password="validation:PasswordMinLength":n.password="required",e.country||(n.country="required"),(0,F.HH)(e.country)&&!e.province&&(n.province="required"),e.agreement||(n.agreement="required"),n},X=t(26893),ee=["color"],ne=r.forwardRef((function(e,n){var t=e.color,r=(0,j.Z)(e,ee);return(0,L.jsx)("svg",(0,_.Z)({},(0,X.ti)(r),{ref:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,L.jsx)("path",{d:"M5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21ZM10.5 16.991L5.79289 12.2839L7.20711 10.8696L10.5 14.1625L16.7929 7.86965L18.2071 9.28386L10.5 16.991Z",fill:t})}))}));ne.displayName="CheckChecked";var te=["color"],re=r.forwardRef((function(e,n){var t=e.color,r=(0,j.Z)(e,te);return(0,L.jsx)("svg",(0,_.Z)({},(0,X.ti)(r),{ref:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,L.jsx)("path",{d:"M19 5V19H5V5H19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z",fill:t})}))}));re.displayName="CheckUnchecked";var ae=t(16484),oe=t.n(ae),ie=["size","className","disabled","data-testid"],se=function(e){var n=e.size,t=e.className,r=e.disabled,a=e["data-testid"],o=(0,j.Z)(e,ie);return(0,L.jsx)("div",{className:m()(oe().checkbox,r&&oe().disabled,"flex-shrink-0",t),"data-testid":a,children:(0,L.jsxs)("div",{className:oe().checkboxWrapper,children:[e.checked?(0,L.jsx)(ne,{size:n}):(0,L.jsx)(re,{size:n}),(0,L.jsx)("input",(0,_.Z)({className:"pointer no-tab-highlight",disabled:r},o,{"data-testid":"checkbox-input-".concat(a),type:"checkbox","aria-checked":e.checked,autoFocus:e.autoFocus}))]})})},ce=t(59499),le=t(55816),ue=t.n(le),de=function(e){var n=e.checked,t=e.onChange,a=e.accountType,o=(0,c.$G)().t,i=r.useState({"account:CreateAccount:Disclosures:JP:PreContractDocuments":!1,"account:CreateAccount:Disclosures:JP:TOS":!1,"account:CreateAccount:Disclosures:JP:PrivacyNotice":!1}),l=(0,s.Z)(i,2),u=l[0],d=l[1];r.useEffect((function(){var e=Object.values(u).every((function(e){return!0===e}));e!==n&&t(e)}),[u,n,t]);var g=function(e){d((function(n){return(0,_.Z)({},n,(0,ce.Z)({},e,!n[e]))}))},p={"account:CreateAccount:Disclosures:JP:PreContractDocuments":o("account:CreateAccount:Disclosures:JP:PreContractDocumentsLink"),"account:CreateAccount:Disclosures:JP:TOS":o("account:CreateAccount:Disclosures:JP:TOSLink"),"account:CreateAccount:Disclosures:JP:PrivacyNotice":o("account:CreateAccount:Disclosures:JP:PrivacyNoticeLink")};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("p",{className:"mb2 body-1",children:(0,L.jsx)(c.cC,{i18nKey:"account:CreateAccount:LimitedServicesTooltip:JP",children:(0,L.jsx)(Z,{className:m()(ue().link,ue().underlineFocus),href:o("account:CreateAccount:LimitedServicesSupportArticle:JP"),children:" "})})}),(0,L.jsxs)("div",{className:"border-radius ba bw1 pa2 bg-NT200 body-1",children:[(0,L.jsx)("p",{className:"mb1",children:a===b.Q.Corporate?o("account:CreateAccount:Disclosures:JP:HeaderCorporate"):o("account:CreateAccount:Disclosures:JP:Header")}),Object.entries(u).map((function(e){var n=(0,s.Z)(e,2),t=n[0],r=n[1];return(0,L.jsxs)("div",{className:"flex items-center",children:[(0,L.jsx)(se,{name:"tos",className:m()(ue().linkFocusCheckbox,"mr1"),checked:r,onChange:function(){return g(t)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),g(t))}}),(0,L.jsx)("label",{htmlFor:"tos",children:(0,L.jsx)(c.cC,{i18nKey:t,children:(0,L.jsx)(Z,{className:m()(ue().link,ue().underlineFocus),href:p[t]})})})]},t)}))]})]})},me=["onChange","toggleHandler","country","accountType"],ge=function(e){var n=e.onChange,t=e.toggleHandler,r=e.country,a=e.accountType,o=(0,j.Z)(e,me),i=(0,c.$G)().t;if("JP"===r)return(0,L.jsx)(de,(0,_.Z)({},o,{accountType:a,onChange:n}));return(0,L.jsxs)("label",{htmlFor:"agreement","data-testid":"agreement-checkbox",className:"flex items-center",children:[(0,L.jsx)(se,(0,_.Z)({},o,{className:m()(ue().linkFocusCheckbox,"mr1"),onChange:function(){n(!o.checked)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),t(!o.checked))}})),(0,L.jsx)("p",{className:"caption-2 text-N400",children:(0,L.jsxs)(c.cC,{i18nKey:"account:CreateAccount:Agreement",children:[(0,L.jsx)(Z,{className:m()(ue().link,ue().underlineFocus),href:i("locale:ToSURL")}),(0,L.jsx)(Z,{className:m()(ue().link,ue().underlineFocus),href:i("locale:PrivacyPolicyURL")})]})})]})},pe=["color"],fe=r.forwardRef((function(e,n){var t=e.color,r=(0,j.Z)(e,pe);return(0,L.jsx)("svg",(0,_.Z)({},(0,X.ti)(r),{ref:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,L.jsx)("path",{d:"M16.2072 9.70712L10.5001 15.4142L7.29297 12.2071L8.70718 10.7929L10.5001 12.5858L14.793 8.29291L16.2072 9.70712Z",fill:t})}))}));fe.displayName="CheckSmall";var he=["color"],ve=r.forwardRef((function(e,n){var t=e.color,r=(0,j.Z)(e,he);return(0,L.jsx)("svg",(0,_.Z)({},(0,X.ti)(r),{ref:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,L.jsx)("path",{d:"M16 12L10 17L10 7L16 12Z",fill:t})}))}));ve.displayName="CaretRight";var xe,Ce=function(e){return(0,L.jsxs)("p",{className:m()("flex items-center label-1",e.valid?"text-G200":"text-NT300"),children:[e.valid?(0,L.jsx)(fe,{}):(0,L.jsx)(ve,{}),e.text]})},ye=function(e){var n=(0,c.$G)().t;return(0,L.jsxs)("div",{children:[(0,L.jsx)("p",{className:"text-NT300 label-2",children:n("account:CreateAccount:PasswordRequirementsTitle")}),(0,L.jsx)(Ce,{valid:Y(e.value),text:n("account:CreateAccount:PasswordRequirementMinLength")}),(0,L.jsx)(Ce,{valid:J(e.value),text:n("account:CreateAccount:PasswordRequirementLetter")}),(0,L.jsx)(Ce,{valid:Q(e.value),text:n("account:CreateAccount:PasswordRequirementNumber")}),(0,L.jsx)(Ce,{valid:G(e.value),text:n("account:CreateAccount:PasswordRequirementSymbol")})]})};!function(e){e.DuplicateUsername="Username not available",e.CommonPassword="Password must not contain commonly used words/names"}(xe||(xe={}));var be,Se=function(e){var n,t,a=(0,x.Sl)().track,l=r.useState({}),u=(0,s.Z)(l,2),d=u[0],g=u[1],p=r.useState(""),h=(0,s.Z)(p,2),C=h[0],y=h[1],S=(0,c.$G)().t,k=r.useState(!1),j=(0,s.Z)(k,2),B=j[0],P=j[1],I=(0,q.r)(),M=I.generateDeviceFingerprint,V=I.ref,H=r.useContext(D.A).language,z=(0,O.S)(),K=z.solutions,Y=z.refreshSolutions,J=r.useRef(null),Q=r.useRef(null);r.useEffect((function(){var e;null===J||void 0===J||null===(e=J.current)||void 0===e||e.focus()}),[]);var G=r.useMemo((function(){return(0,F.wp)(f.R,S)}),[S]),X=(null===(n=e.localeConfig)||void 0===n?void 0:n.provinces)?null===(t=e.localeConfig)||void 0===t?void 0:t.provinces.map((function(e){return{label:e.label,value:e.value}})):[],ee=function(){var n=(0,i.Z)(o().mark((function n(t,r){var i,s,c,l,u,d,m;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,g({}),y(""),n.next=5,K.current;case 5:return i=n.sent,s=i.challenge2Solution,c=(0,_.Z)({username:t.username,password:t.password,email:t.email,country:t.country},""!==t.province&&null!==t.province&&{province:t.province},{corporate:e.accountType===b.Q.Corporate,challenge2:s,csr:M(t),language:H}),e.onCreateAccountSubmit&&e.onCreateAccountSubmit(c),n.next=11,(0,R.o1m)(c);case 11:a({eventType:"UserAction",eventName:W.s.SignUpFormSubmission,params:{country:t.country,province:t.province?t.province:"",accountType:e.accountType}}),e.onCreateAccountComplete(t.email),n.next=20;break;case 15:n.prev=15,n.t0=n.catch(0),Y(),(null===(l=n.t0.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.errors.some((function(e){return e.type===xe.DuplicateUsername})))?(g({username:xe.DuplicateUsername}),y(t.username)):(null===(d=n.t0.response)||void 0===d||null===(m=d.data)||void 0===m?void 0:m.errors.some((function(e){return e.error===xe.CommonPassword})))?(g({password:xe.CommonPassword}),r.setFieldValue("password","")):g({general:"error:ServerError"}),r.setSubmitting(!1);case 20:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e,t){return n.apply(this,arguments)}}(),ne=r.useMemo((function(){return{email:e.email||"",username:"",password:"",country:e.country,province:e.region||"",agreement:!1,accountType:b.Q.Personal}}),[e.email,e.country,e.region]);return(0,L.jsxs)("div",{className:v.y0.retailFormWrapper,children:[(0,L.jsx)("h2",{className:v.y0.retailTitle,children:e.accountType===b.Q.Personal?S("account:CreateAccount:PageHeader"):S("account:CreateAccount:PageTitleBusiness")}),(0,L.jsx)(w.J9,{initialValues:ne,validateOnMount:!1,validate:$,onSubmit:ee,children:function(n){return(0,L.jsxs)("form",{ref:V,onSubmit:n.handleSubmit,className:v.y0.retailForm,children:[(0,L.jsxs)("div",{className:"mb3",children:[(0,L.jsx)(v.gx,{id:"email",name:"email",value:n.values.email,onChange:n.handleChange,onBlur:function(e){var t;n.handleBlur(e),n.setFieldValue("email",null===(t=e.target.value)||void 0===t?void 0:t.trim())},floating:!0,error:Boolean(n.touched.email&&n.errors.email),children:(0,L.jsxs)(v.gx.Floating,{children:[(0,L.jsx)(v.gx.FloatingLabel,{children:S("account:CreateAccount:Email")}),(0,L.jsx)(v.gx.TextInput,{ref:J,"data-testid":"signup-email-field"})]})}),n.values.email&&n.touched.email&&n.errors.email&&(0,L.jsx)(v.gx.ErrorText,{className:"hide-when-predecessor-has-focus",children:S(n.errors.email)})]}),(0,L.jsxs)("div",{className:ue().usernamePasswordFields,children:[(0,L.jsx)("div",{className:ue().usernameField,children:(0,L.jsxs)("div",{children:[(0,L.jsx)(v.gx,{id:"username",name:"username",value:n.values.username,onChange:function(e){n.handleChange(e),d.username&&g((function(e){return(0,_.Z)({},e,{username:""})}))},onBlur:n.handleBlur,floating:!0,error:Boolean(n.touched.username&&n.errors.username),children:(0,L.jsxs)(v.gx.Floating,{children:[(0,L.jsx)(v.gx.FloatingLabel,{children:S("account:CreateAccount:Username")}),(0,L.jsx)(v.gx.TextInput,{ref:Q,"data-testid":"signup-username-field"})]})}),d&&d.username===xe.DuplicateUsername&&(0,L.jsxs)("div",{className:m()("hide-when-predecessor-has-focus",ue().backendErrorWrapper),children:[(0,L.jsx)(v.gx.ErrorText,{children:S("account:CreateAccount:DuplicateUsername")}),(0,L.jsx)("button",{type:"button","data-testid":"suggest-username-button",className:ue().suggestUsername,onClick:function(){var e;n.setFieldValue("username",""!==n.values.username?function(e){var n=e.replace(/[^0-9a-zA-Z-._]/g,"").substr(0,27),t=Math.random().toString().substr(2,5);return"".concat(n).concat(t)}(C):function(e){var n=e.substring(0,e.lastIndexOf("@")).replace(/[^a-zA-Z0-9]/g,"").substr(0,27),t=Math.random().toString().substr(2,5);return"".concat(n).concat(t)}(n.values.email)),g({}),null===Q||void 0===Q||null===(e=Q.current)||void 0===e||e.focus()},children:(0,L.jsx)("p",{children:S("account:CreateAccount:SuggestUsername")})})]}),n.values.username&&n.touched.username&&n.errors.username&&(0,L.jsx)(v.gx.ErrorText,{className:"hide-when-predecessor-has-focus",children:S(n.errors.username)})]})}),(0,L.jsx)(N.u,{className:"starboard-root",label:(0,L.jsx)(ye,{value:n.values.password}),forceVisible:B,children:(0,L.jsxs)("div",{className:ue().passwordField,children:[(0,L.jsx)(v.gx,{id:"password",name:"password",value:n.values.password,onChange:n.handleChange,onFocus:function(){return P(!0)},onBlur:function(e){P(!1),n.handleBlur(e)},floating:!0,error:Boolean(n.touched.password&&n.errors.password),children:(0,L.jsxs)(v.gx.Floating,{children:[(0,L.jsx)(v.gx.FloatingLabel,{children:S("login:Password")}),(0,L.jsx)(v.gx.PasswordInput,{tabIndex:0,"data-testid":"signup-password-field"})]})}),""===n.values.password&&d.password===xe.CommonPassword&&(0,L.jsx)(v.gx.ErrorText,{className:"hide-when-predecessor-has-focus",children:S("password:PasswordContainsCommonText")}),n.values.password&&n.touched.password&&n.errors.password&&(0,L.jsx)(v.gx.ErrorText,{className:"hide-when-predecessor-has-focus",children:S(n.errors.password)})]})})]}),(0,L.jsx)(v.Lt,{id:"country",name:"country",className:"mb3",portalClassName:"z-999",menuClassName:"h-dropdown",isSearchable:!0,"data-testid":"country-selector",label:S("account:CreateAccount:Country"),value:n.values.country||"",options:G,filter:F.bW,hasError:Boolean(n.touched.country&&n.errors.country),onChange:function(t){e.onChangeCountry(t.target.value),n.setFieldValue("province",null),n.setFieldValue("agreement",!1),n.handleChange(t)},onBlur:n.handleBlur,toggleOnKeypress:!0,enhancedSortConfig:A.v.country}),(0,F.HH)(n.values.country)&&X.length>0&&(0,L.jsx)(v.Lt,{id:"province",name:"province",className:"mb3",portalClassName:"z-999",menuClassName:"h-dropdown",isSearchable:!0,"data-testid":"province-selector",label:S("account:Address:State"),value:n.values.province,options:X,filter:F.o2,hasError:Boolean(n.touched.province&&n.errors.province),onChange:function(t){n.handleChange(t),e.onChangeRegion({country:n.values.country,region:t.target.value})},onBlur:n.handleBlur,disabled:e.fetchingLocaleConfig,toggleOnKeypress:!0,enhancedSortConfig:A.v.country}),e.fetchingBaselRisk?null:e.isRedLocation&&(e.isBlacklisted?(0,L.jsx)(T.q,{kind:"error",className:"mb4","data-testid":"restricted-location",children:(0,L.jsx)(c.cC,{i18nKey:"account:CreateAccount:BaselRedWarning",children:(0,L.jsx)(Z,{href:S("account:CreateAccount:BaselSupportArticle")})})}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("p",{className:"text-R300 caption-2 mb2",children:S("account:CreateAccount:BaselRedUnavailable")}),(0,L.jsx)("p",{className:"caption-2 mb4",children:(0,L.jsx)(c.cC,{i18nKey:"account:CreateAccount:BaselRedCreateAccount",children:(0,L.jsx)(Z,{href:S("account:CreateAccount:BaselSupportArticle")})})})]})),(0,L.jsx)("div",{className:"mb3",children:(0,L.jsx)(ge,{id:"agreement",name:"agreement",accountType:e.accountType,country:n.values.country,checked:n.values.agreement,onChange:function(e){n.setFieldValue("agreement",e)},toggleHandler:function(e){n.setFieldValue("agreement",e)}})}),d.general&&(0,L.jsx)("p",{className:"text-negative body-1 mb6",children:S(d.general)}),(0,L.jsx)("div",{className:m()(v.y0.confirmationWrapper),children:(0,L.jsx)(U.T,{"data-testid":"submit-button",innerClassName:m()(v.y0.confirmationButton),confirmButtonText:n.isSubmitting?(0,L.jsx)(E.T,{skinny:!0,size:25,"data-testid":"submit-button-spinner"}):S("account:CreateAccount:Submit"),isLoading:!1,confirmDisabled:e.isBlacklisted||!n.isValid||n.isSubmitting||e.fetchingLocaleConfig||e.fetchingBaselRisk})}),(0,L.jsx)("div",{className:ue().accountTypeSelector,children:(0,L.jsx)("button",{className:m()("text-brand caption-2",ue().link,ue().underlineFocus),onClick:function(){var n=e.accountType===b.Q.Personal?b.Q.Corporate:b.Q.Personal;e.onChangeAccountType(n)},type:"button",children:(0,L.jsxs)("p",{children:[e.accountType===b.Q.Personal?S("account:CreateAccount:LinkCorporateForm"):S("account:CreateAccount:LinkPersonalForm"),"\xa0\xbb"]})})})]})}})]})},ke=["detectedCountry","detectedRegion","email"],_e=[f.C.AS,f.C.GU,f.C.MP,f.C.PR,f.C.VI],je=function(e){var n=e.country,t=e.region;if(n===f.C.US&&t){if("string"===typeof t)return"".concat(n,":").concat(t);if(t.ISO)return"".concat(n,":").concat(t.ISO)}return _e.includes(n)?"US:".concat(n):n},we=function(e){return"{{ region }}"===e?void 0:e},Fe=function(e){var n=e.detectedCountry,t=e.detectedRegion,a=e.email,o=(0,j.Z)(e,ke),i=r.useState(function(e){return void 0===e||""===e||"{{ country }}"===e?f.C.US:e}(n)),c=(0,s.Z)(i,2),l=c[0],u=c[1],d=r.useState(void 0),m=(0,s.Z)(d,2),g=m[0],p=m[1],h=r.useState(je({country:l,region:we(t)})),v=(0,s.Z)(h,2),C=v[0],y=v[1],b=(0,x.zT)(l),S=(0,x.Bx)(C).baselRisk;return r.useEffect((function(){if(b.localeConfig&&""!==t&&!g){var e,n,r,a=void 0===t||null===(e=b.localeConfig)||void 0===e||null===(n=e.provinces)||void 0===n?void 0:n.find((function(e){return e.ISO===t}));p(null!==(r=null===a||void 0===a?void 0:a.value)&&void 0!==r?r:""),y(je({country:l,region:a}))}}),[b]),""===t||void 0!==g?(0,L.jsx)(Se,(0,_.Z)({},o,{email:a,country:l,region:g,onChangeCountry:function(e){u(e),y(je({country:e,region:void 0}))},onChangeRegion:function(e){var n,t,r=e.country,a=e.region,o=null===(n=b.localeConfig)||void 0===n||null===(t=n.provinces)||void 0===t?void 0:t.find((function(e){return e.value===a}));y(je({country:r,region:o})),p(a)},localeConfig:b.localeConfig,fetchingLocaleConfig:!b.localeConfig,isBlacklisted:(null===S||void 0===S?void 0:S.restricted)||!1,isRedLocation:"red"===(null===S||void 0===S?void 0:S.code)||(null===S||void 0===S?void 0:S.restricted)||!1,fetchingBaselRisk:"US"!==C&&!S})):(0,L.jsx)(L.Fragment,{})},Ne=t(19171),Ae=t.n(Ne),Te=function(e){return new Promise((function(n){return setTimeout(n,e)}))};!function(e){e.Business="business",e.Personal="personal"}(be||(be={}));var Be=function(e){return e&&e.type&&e.type===be.Business?b.Q.Corporate:b.Q.Personal},Pe=function(){var e,n=(0,c.$G)().t,t=(0,u.useRouter)(),a=(0,x.jq)().meta,d=r.useState(null===(e=t.query)||void 0===e?void 0:e.email),_=(0,s.Z)(d,2),j=_[0],w=_[1],F=r.useState(Be(t.query)),N=(0,s.Z)(F,2),A=N[0],T=N[1],B=r.useState(!1),P=(0,s.Z)(B,2),I=P[0],Z=P[1];r.useEffect((function(){var e=t.query;(null===e||void 0===e?void 0:e.mpId)&&(0,h.Zo)("mpid",e.mpId,365),(null===e||void 0===e?void 0:e.clickId)&&(0,h.Zo)("clickid",e.clickId,365),(null===e||void 0===e?void 0:e.email)&&w(e.email)}),[t.query]),r.useEffect((function(){var e=Be(t.query);e!==A&&T(e)}),[t.query]);var U=function(){var e=(0,i.Z)(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.next=3,Te(400);case 3:r=n===b.Q.Corporate?be.Business:be.Personal,t.push({pathname:"".concat((0,C.UY)(g.R.SignUp,t)),query:{type:r}},void 0,{shallow:!0}),Z(!1);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,L.jsx)("div",{className:Ae().accountTypeTransitionBackground,children:(0,L.jsx)(l.Z,{in:I,timeout:800,classNames:{enter:Ae().changeAccountTypeEnter,enterActive:Ae().changeAccountTypeEnterActive,exit:Ae().changeAccountTypeExit,exitActive:Ae().changeAccountTypeExitActive},children:(0,L.jsx)(p.v,{illustration:A===b.Q.Personal?p.r.Pro:p.r.Corporate,languageSelector:(0,L.jsx)(S.$,{className:m()(Ae().langSelector)}),linkLogoTo:(0,C.UY)("/",t),linkElsewhere:(0,L.jsx)(k.S,{href:g.R.SignIn,passHref:!0,shallow:!0,children:(0,L.jsx)("a",{href:"replace",className:m()(Ae().signInLink,"caption-link-3 text-pure-white"),children:n("general:Login")})}),children:a?(0,L.jsx)(Fe,{email:"object"===typeof j?j[0]:j,accountType:A,detectedCountry:""===a.cc?f.C.US:a.cc,detectedRegion:a.region,onChangeAccountType:U,onCreateAccountComplete:function(e){window.sessionStorage.setItem(C.BU.ActivationPageEmail,encodeURIComponent(e)),t.push((0,C.UY)(g.R.ActivateAccount,t))}}):(0,L.jsx)("div",{className:m()(v.y0.retailFormWrapper),children:(0,L.jsx)(y.y,{})})})})})},Le=!0,Ie=function(){return(0,L.jsx)(Pe,{})}},30436:function(e,n,t){"use strict";var r;t.d(n,{s:function(){return r}}),function(e){e.SignUpFormSubmission="Sign Up Form Submission",e.EmailConfirmed="Email Confirmed",e.SignInSubmitClick="Sign In Submit Click",e.YubikeyTap="Yubikey Tap",e.EnterYubikeyManuallyClick="Enter Yubikey Manually Click",e.ManualYubikeySubmitClick="Manual Yubikey Submit Click",e.OtpSubmitClick="OTP Submit Click",e.StaticPasswordSubmitClick="Static Password Submit Click",e.SignInComplete="Sign In Complete",e.SignInError="Sign In Error",e.ForgotPasswordSubmitClick="Forgot Password Submit Click",e.ForgotPasswordComplete="Forgot Password Complete",e.ForgotPasswordError="Forgot Password Error",e.ForgotUsernameSubmitClick="Forgot Username Submit Click",e.ForgotUsernameComplete="Forgot Username Complete",e.ForgotUsernameError="Forgot Username Error",e.BypassTfaOtpSubmitClick="Bypass 2FA OTP Submit Click",e.BypassTfaOtpComplete="Bypass 2FA OTP Complete",e.BypassTfaOtpError="Bypass 2FA OTP Error",e.BypassTfaSignInSubmitClick="Bypass 2FA Sign In Submit Click",e.BypassTfaSignInComplete="Bypass 2FA Sign In Complete",e.BypassTfaSignInError="Bypass 2FA Sign In Error",e.ContactSupportLinkClick="Contact Support Link Click",e.DeviceIdReset="Device ID Reset",e.SucessfulFormSubmission="Successful Form Submission"}(r||(r={}))},97029:function(e,n,t){"use strict";t.d(n,{BU:function(){return r},UY:function(){return a},RH:function(){return s}});t(73708),t(87757);var r;function a(e,n){var t=n.pathname.startsWith("/[lang]")?n.asPath.match(/^\/(.*)\//):null;return t?"/".concat(t[1]).concat(e):e}!function(e){e.ActivationPageEmail="acpaem"}(r||(r={}));var o=t(92742),i=t.n(o),s=function(e){return function(n){var t=e.setFieldValue,r=e.handleBlur,a=n.target,o=a.name,s=a.value;t(o,i()(s)),r(n)}}},83772:function(e,n,t){"use strict";t.d(n,{T:function(){return v}});var r=t(59499),a=t(36864),o=t(4730),i=(t(2784),t(72779)),s=t.n(i),c=t(81562),l=t(98626),u=t(41087),d=t.n(u),m=t(8648),g=t(52322),p=["wideConfirm","loadingMessage","className"],f=function(e){var n=e.wideConfirm,t=e.loadingMessage,r=e.className,i=(0,o.Z)(e,p);return(0,g.jsxs)("div",(0,a.Z)({"data-testid":"loading indicator",className:s()({"mb3/2":n},d().loadingIndicator,r)},i,{children:[(0,g.jsx)("div",{className:s()(d().loadingSpinner,"relative","dib","vertical-middle"),children:(0,g.jsx)(m.T,{skinny:!0})}),t&&(0,g.jsx)("span",{className:"label-2 text-I200 ml1",children:t})]}))},h=["confirmButtonText","cancelButtonText","onConfirm","onCancel","className","innerClassName","isLoading","loadingMessage","wideConfirm","confirmDisabled","buttonSize"],v=function(e){var n=e.confirmButtonText,t=e.cancelButtonText,i=e.onConfirm,l=e.onCancel,u=e.className,m=e.innerClassName,p=e.isLoading,v=e.loadingMessage,x=e.wideConfirm,C=e.confirmDisabled,y=e.buttonSize,b=void 0===y?"extra-large":y,S=(0,o.Z)(e,h);return(0,g.jsxs)("div",(0,a.Z)({className:s()("flex","w-100","items-center",{"flex-column":x,"justify-end":!p,"justify-between":p},u,d().confirmation)},S,{children:[p&&(0,g.jsx)(f,{wideConfirm:x,loadingMessage:v}),(0,g.jsxs)("div",{className:s()({"w-100":x},d().buttons),children:[l&&!p&&!x&&(0,g.jsx)(c.z,(0,a.Z)({size:b,"data-testid":"cancel button"},p?{disabled:!0}:{},{kind:"cancel",onClick:l,className:s()("mr3",d().cancelButton),innerClassName:m,type:"button",children:t})),(0,g.jsx)(c.z,(0,a.Z)({size:b,"data-testid":"confirm button"},p||C?{disabled:!0}:{},{type:i?void 0:"submit",onClick:i,className:s()(d().confirmButton,(0,r.Z)({"w-100":x},d().tallButton,x)),innerClassName:m,children:n}))]})]}))};v.defaultProps={confirmButtonText:(0,g.jsx)(l.x,{langKey:"general:Confirm"}),cancelButtonText:(0,g.jsx)(l.x,{langKey:"general:Cancel"})}},97439:function(e,n,t){"use strict";t.d(n,{v:function(){return x},r:function(){return a}});var r,a,o=t(59499),i=t(2784),s=t(72779),c=t.n(s),l=t(35317),u=t(16835),d=t(83353),m=t.n(d),g=t(52322),p=function(e){var n=e.children,t=e.className,r=e.classFocus,a=void 0===r?m().divFocus:r,o=i.useState(!1),s=(0,u.Z)(o,2),l=s[0],d=s[1];return(0,g.jsx)("div",{role:"button",tabIndex:-1,className:c()(t,l?null:a),onClick:function(){d(!0)},onBlur:function(){d(!1)},onKeyDown:function(e){[" ","Enter"].includes(e.key)&&d((function(e){return!e}))},children:n})},f=t(79574),h=t.n(f);!function(e){e[e.Pro=0]="Pro",e[e.Retail=1]="Retail",e[e.Corporate=2]="Corporate",e[e.SignIn=3]="SignIn"}(a||(a={}));var v=(r={},(0,o.Z)(r,a.Pro,h().proIllustrationBackground),(0,o.Z)(r,a.Retail,h().retailIllustrationBackground),(0,o.Z)(r,a.Corporate,h().corporateIllustrationBackground),(0,o.Z)(r,a.SignIn,h().signInIllustrationBackground),r),x=function(e){var n=e.children,t=e.className,r=e.illustration,a=e.languageSelector,o=e.linkElsewhere,i=e.linkLogoTo,s=e.topArea;return(0,g.jsx)("div",{className:c()("starboard-root",h().onboardingLayout,v[r]),children:(0,g.jsxs)("div",{className:h().contentWrapper,children:[(0,g.jsxs)("div",{className:c()("flex items-center",h().topBar),children:[i?(0,g.jsx)(p,{className:h().logoButton,children:(0,g.jsx)("a",{href:i,className:h().logoLink,children:(0,g.jsx)(l.T,{className:c()("brand-color",h().logo)})})}):(0,g.jsx)(l.T,{className:c()("brand-color",h().logo)}),(0,g.jsxs)("div",{className:c()("ml-auto flex items-center",h().topArea),children:[s,a?(0,g.jsx)(p,{className:c()(h().linkFocusLeft),children:a}):null,o?(0,g.jsx)(p,{className:c()(h().linkFocusRight),children:o}):null]})]}),(0,g.jsx)("div",{className:c()(h().contentArea,t),children:(0,g.jsx)("div",{className:h().scrollableArea,children:n})})]})})}},12638:function(e,n,t){"use strict";t.d(n,{Zo:function(){return a},ej:function(){return o}});var r=t(16835),a=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:365,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",a=new Date;a.setDate(a.getDate()+t),"undefined"!==typeof document&&(document.cookie="".concat(e,"=").concat(n,";expires=").concat(a.toUTCString(),";path=").concat(r,";samesite=lax"))},o=function(e){if("undefined"!==typeof document){for(var n,t=document.cookie.split("; ")||[],a=0;a<t.length;a++){var o=t[a].split("="),i=(0,r.Z)(o,2),s=i[0],c=i[1];if(s===e){n=c;break}}return n}return""}},41492:function(e){e.exports={languageSelector:"LanguageSelector_languageSelector__WtqNz"}},25526:function(e){e.exports={loadingSpinner:"VerifyLoadingSpinner_loadingSpinner__wsZyl"}},55816:function(e){e.exports={form:"SignUpForm_form__h5fRP",link:"SignUpForm_link__TQpg3",backendErrorWrapper:"SignUpForm_backendErrorWrapper__amFqB",suggestUsername:"SignUpForm_suggestUsername__HbwrO",linkFocusCheckbox:"SignUpForm_linkFocusCheckbox__b2L28",underlineFocus:"SignUpForm_underlineFocus__97Cki","focus-visible":"SignUpForm_focus-visible__87YUW",accountTypeSelector:"SignUpForm_accountTypeSelector__xiKCd",usernamePasswordFields:"SignUpForm_usernamePasswordFields__a0PiL",usernameField:"SignUpForm_usernameField__xTGnb",passwordField:"SignUpForm_passwordField__q_o42"}},19171:function(e){e.exports={signInLink:"SignUpPage_signInLink__k0rw4",langSelector:"SignUpPage_langSelector__pkTG7",accountTypeTransitionBackground:"SignUpPage_accountTypeTransitionBackground__u_ckJ",changeAccountTypeEnter:"SignUpPage_changeAccountTypeEnter__NmtFk",changeAccountTypeEnterActive:"SignUpPage_changeAccountTypeEnterActive__bYVxw",changeAccountTypeExit:"SignUpPage_changeAccountTypeExit__SLF4K",changeAccountTypeExitActive:"SignUpPage_changeAccountTypeExitActive__I76bB"}},16484:function(e){e.exports={checkbox:"Checkbox_checkbox__DYI2W",disabled:"Checkbox_disabled__UMu6x",checkboxWrapper:"Checkbox_checkboxWrapper__UjCV6"}},41087:function(e){e.exports={confirmation:"Confirmation_confirmation__F3OO5",loadingIndicator:"Confirmation_loadingIndicator__203mC",buttons:"Confirmation_buttons__edg5G",cancelButton:"Confirmation_cancelButton__0W_qg",confirmButton:"Confirmation_confirmButton__yDr0o",loadingSpinner:"Confirmation_loadingSpinner__CT8dY"}},83353:function(e){e.exports={divFocus:"FocusDiv_divFocus__0fCpI"}},79574:function(e){e.exports={onboardingLayout:"FullScreenLayoutWithIllustration_onboardingLayout__fqjf7",logo:"FullScreenLayoutWithIllustration_logo__FzG60",logoButton:"FullScreenLayoutWithIllustration_logoButton__fZXpf",logoLink:"FullScreenLayoutWithIllustration_logoLink__edbfU",contentWrapper:"FullScreenLayoutWithIllustration_contentWrapper__LTwqH",topBar:"FullScreenLayoutWithIllustration_topBar__IdE0Y",topArea:"FullScreenLayoutWithIllustration_topArea__cuWbF",linkFocusLeft:"FullScreenLayoutWithIllustration_linkFocusLeft__DCcqq",linkFocusRight:"FullScreenLayoutWithIllustration_linkFocusRight__12572",contentArea:"FullScreenLayoutWithIllustration_contentArea__ca4Mw",scrollableArea:"FullScreenLayoutWithIllustration_scrollableArea__Ku8ry",verticalCenteredSpinner:"FullScreenLayoutWithIllustration_verticalCenteredSpinner__RB4lc",proIllustrationBackground:"FullScreenLayoutWithIllustration_proIllustrationBackground__rHI7A",corporateIllustrationBackground:"FullScreenLayoutWithIllustration_corporateIllustrationBackground__dAmDS",retailIllustrationBackground:"FullScreenLayoutWithIllustration_retailIllustrationBackground__1yOGZ",signInIllustrationBackground:"FullScreenLayoutWithIllustration_signInIllustrationBackground__OB43_"}}}]);