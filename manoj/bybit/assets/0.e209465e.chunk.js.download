(this.webpackJsonpb322f0b5=this.webpackJsonpb322f0b5||[]).push([[0],{601:function(t,e,a){"use strict";a.r(e),a.d(e,"CacheMapKey",(function(){return d})),a.d(e,"captchaInstance",(function(){return w})),a.d(e,"default",(function(){return y}));var n=a(22),c=a(69),r=a(119),i=(a(0),a(90),a(2),a(11),a(55),a(194),a(153),a(125),a(196),a(126),a(199),a(200),Object.defineProperty),o=function(t,e,a){return function(t,e,a){e in t?i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a}(t,"symbol"!==typeof e?e+"":e,a),a};function s(t,e,a,n){return new Promise((function(n,c){if(function(t){for(var e=Array.from(document.getElementsByTagName("script")),a=!1,n=0,c=e.length;n<c&&!(a=e[n].src.replace("http:","https:")===t.replace("http:","https:"));n++);return a}(e))return n(t);var r=document.head||document.getElementsByTagName("body")[0],i=document.createElement("script");i.async=!0,i.src=e,Object.assign(i,a),r.appendChild(i),i.onload=function(){var e;null==(e=null==window?void 0:window.dataLayer)||e.push({event:"GAEvent",eventAction:"onload",eventCategory:"CaptchaValidation_".concat(t,"_initiated"),eventLabel:"loaded.".concat(t)}),n(t)},i.onerror=function(){c()}})).catch((function(){var e,a;if(null==(e=null==window?void 0:window.dataLayer)||e.push({event:"GAEvent",eventAction:"error",eventCategory:"CaptchaValidation_".concat(t,"_failed_load"),eventLabel:"error.".concat(t)}),n.get(d.INDEX)+1<n.get(d.REGISTER_LIST).length){console.warn(t,"not loaded, loading next script.");var c=n.get(d.INDEX)+1;return n.set(d.INDEX,c),l(n)}null==(a=null==window?void 0:window.dataLayer)||a.push({event:"GAEvent",eventAction:"error",eventCategory:"CaptchaValidation_all_failed_load",eventLabel:"error.captcha"}),console.warn("All captchas not loaded.")}))}function l(t){var e=t.get(d.INDEX),a=t.get(d.REGISTER_LIST)[e];return s(a.key,a.src,{},t).then((function(t){return t})).catch(console.warn)}function p(t){return!!t&&("object"===typeof t||"function"===typeof t)&&(t.constructor&&"Promise"===t.constructor.name||"function"===typeof t.then)}var h,d=function(t){return t.REGISTER_LIST="registeredCaptchaList",t.NOTIFY_LIST="scriptLoadedNotifyList",t.INDEX="captchaIndex",t}(d||{}),u="notLoad",f=new Map;f.set("registeredCaptchaList",[]),f.set("scriptLoadedNotifyList",[]),f.set("captchaIndex",0);var y=function(){function t(e){var a=e.captchaType,c=e.cb;Object(n.a)(this,t),o(this,"scriptReady"),o(this,"captchaType"),o(this,"id"),o(this,"setting"),o(this,"realCallback"),this.scriptReady=!1,this.captchaType=a,this.id="captcha-"+String(Math.round(1e4*Math.random())),this.setting="",this.realCallback=c,this.init()}return Object(c.a)(t,[{key:"init",value:function(){var e=this;if("notLoad"===u)u="loading",f.get("scriptLoadedNotifyList").push(this),l(f).then((function(e){u="loaded",t.notifyValidationsAndInit(e)}));else if("loading"===u)f.get("scriptLoadedNotifyList").push(this);else{var a=f.get("registeredCaptchaList").find((function(t){return t.key===h}));this.captchaType=h,this.setting=a;var n=a.init.call(null,this,a.options,this.callbackHandler);p(n)?n.then((function(){e.scriptReady=!0})).catch(console.error):this.scriptReady=!0}}},{key:"show",value:function(t,e,a){this.scriptReady&&(!this.realCallback&&(this.realCallback=t),this.setting.show.call(null,this),e&&e("exposure","captcha_open"),a&&a())}},{key:"callbackHandler",value:function(t){var e,a=Object.assign({},{type:this.captchaType,key_version:"v2"},t);null==(e=this.realCallback)||e.call(this,a)}}],[{key:"notifyValidationsAndInit",value:function(t){h=t;var e=f.get("registeredCaptchaList").find((function(e){return e.key===t}));f.get("scriptLoadedNotifyList").forEach((function(a){a.captchaType=t,a.setting=e,a.callbackHandler=function(t){var e=Object.assign({},{type:a.captchaType,key_version:"v2"},t);a.realCallback.call(null,e)};var n=null==e?void 0:e.init.call(null,a,e.options,a.callbackHandler);p(n)?n.then((function(){a.scriptReady=!0})).catch(console.error):a.scriptReady=!0}))}},{key:"_registerCaptcha",value:function(t){f.get("registeredCaptchaList").findIndex((function(e){return e.key===t.key}))>-1?console.warn("[Captcha Validation]: Duplicated captcha registry"):(t.scriptId="script-"+String(Math.round(1e4*Math.random())),f.get("registeredCaptchaList").push(t))}},{key:"_configCaptcha",value:function(t,e){var a=f.get("registeredCaptchaList").find((function(e){return e.key===t}));a?a.options=e:console.warn("[Captcha Validation]: Can't find corresponding item, did you register ",t," captcha?")}},{key:"initRegisterCaptcha",value:function(e,a){t._registerCaptcha(a),t._registerCaptcha(e)}},{key:"initCaptchaConfig",value:function(){var e="www.bybit.com",a={"bybit.com":"2019476340","bycloud.org":"2065949062"}[(e=window.location.hostname||e).split(".").slice(-2).join(".")]||"2019476340";t._configCaptcha(r.a.QQ,{key:a}),t._configCaptcha(r.a.GOOGLE,{siteKey:"6LeNsZIUAAAAANOHTT1IaGp-RlIFHP2-YyaponYD"})}}]),t}(),g={key:r.a.QQ,src:"https://ssl.captcha.qq.com/TCaptcha.js",init:function(t,e,a){try{t.captcha=new window.TencentCaptcha(e.key,(function(t){var e;0===t.ret&&a({ticket:t.ticket,randstr:t.randstr,type:"qqcaptcha"}),0!==t.ret&&(null==(e=null==window?void 0:window.dataLayer)||e.push({event:"GAEvent",eventAction:"error",eventCategory:"CaptchaValidation_qqcaptcha_ontrigger_error",eventLabel:"error.qqcaptcha.".concat((null==t?void 0:t.errorMessage)||"none")}),a({failure_reason:null==t?void 0:t.errorMessage}))}))}catch(n){console.error("QQ Captcha Init",n)}},show:function(t){try{t.captcha.show()}catch(e){console.error("QQ Captcha Show Error",e)}}},v={key:r.a.GOOGLE,src:"https://www.google.com/recaptcha/api.js?render=explicit",init:function(t,e,a){return t.recaptchaElm=document.createElement("div"),t.recaptchaElm.id=t.id,t.recaptchaElm.style.position="fixed",t.recaptchaElm.style.top="75px",t.recaptchaElm.dataset.sitekey=e.siteKey,document.body.appendChild(t.recaptchaElm),new Promise((function(n){window.grecaptcha.ready((function(){t.captcha=window.grecaptcha.render(t.id,{sitekey:e.siteKey,size:"invisible",classes:"zs-test",callback:function(e){a({g_recaptcha_response:e,type:"recaptcha"}),window.grecaptcha.reset(t.captcha)},"expired-callback":function(){console.error("Google ReCAPTCHA expired callback"),a({failure_reason:"Google ReCAPTCHA expired"}),window.grecaptcha.reset(t.captcha)},"error-callback":function(){var e;console.error("Google ReCAPTCHA error callback"),a({failure_reason:"Google ReCAPTCHA error"}),null==(e=null==window?void 0:window.dataLayer)||e.push({event:"GAEvent",eventAction:"error",eventCategory:"CaptchaValidation_recaptcha_ontrigger_error",eventLabel:"error.recaptcha"}),window.grecaptcha.reset(t.captcha)}}),n("google recaptcha success.")}))})).catch((function(t){console.error("ReCAPTCHA trigger Init Promise error",t)}))},show:function(t){try{window.grecaptcha.execute(t.captcha)}catch(e){console.error("ReCAPTCHA trigger Show error",e)}}};y.initRegisterCaptcha(g,v),y.initCaptchaConfig();var w=new y({captchaType:r.a.GT})}}]);
//# sourceMappingURL=~/uniframe/static/js/0.e209465e.chunk.js.map
//# sourceMappingURL=0.e209465e.chunk.js.map