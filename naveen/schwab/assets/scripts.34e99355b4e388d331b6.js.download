function onAbrSubmit(t){var e,n=abrPost.bind(null,(function(){clearTimeout(e),t()}));return e=window.setTimeout(n,5e3),schwab.setResource("https://www.schwab.com/abr/resource.png",!0,n),!1}function abrPost(){return'{"vendor":"41st","data":"'+schwab.schwabform()+'"}'}(function(){"use strict";var t,e="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function o(){o=function(){},e.Symbol||(e.Symbol=s)}var r,i,s=(r=0,function(t){return"jscomp_symbol_"+(t||"")+r++});function a(){o();var t=e.Symbol.iterator;t||(t=e.Symbol.iterator=e.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&n(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return u(this)}}),a=function(){}}function u(t){var n=0;return function(t){return a(),(t={next:t})[e.Symbol.iterator]=function(){return this},t}((function(){return n<t.length?{done:!1,value:t[n++]}:{done:!0}}))}function c(t){a();var e=t[Symbol.iterator];return e?e.call(t):u(t)}function l(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}if("function"==typeof Object.setPrototypeOf)i=Object.setPrototypeOf;else{var p;t:{var h={};try{h.__proto__={Ga:!0},p=h.Ga;break t}catch(r){}p=!1}i=p?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var d=i;function f(){this.f=!1,this.b=null,this.aa=void 0,this.a=1,this.F=0,this.c=null}function m(t){if(t.f)throw new TypeError("Generator is already running");t.f=!0}function g(t,e){t.c={Ja:e,Na:!0},t.a=t.F}function v(t,e){return t.a=3,{value:e}}function _(t){this.a=new f,this.b=t}function y(t,e,n,o){try{var r=e.call(t.a.b,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return t.a.f=!1,r;var i=r.value}catch(s){return t.a.b=null,g(t.a,s),b(t)}return t.a.b=null,o.call(t.a,i),b(t)}function b(t){for(;t.a.a;)try{var e=t.b(t.a);if(e)return t.a.f=!1,{value:e.value,done:!1}}catch(n){t.a.aa=void 0,g(t.a,n)}if(t.a.f=!1,t.a.c){if(e=t.a.c,t.a.c=null,e.Na)throw e.Ja;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function A(t){this.next=function(e){return m(t.a),t.a.b?e=y(t,t.a.b.next,e,t.a.u):(t.a.u(e),e=b(t)),e},this.throw=function(e){return m(t.a),t.a.b?e=y(t,t.a.b.throw,e,t.a.u):(g(t.a,e),e=b(t)),e},this.return=function(e){return function(t,e){m(t.a);var n=t.a.b;return n?y(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.a.return):(t.a.return(e),b(t))}(t,e)},a(),this[Symbol.iterator]=function(){return this}}function S(t,e){return e=new A(new _(e)),d&&d(e,t.prototype),e}f.prototype.u=function(t){this.aa=t},f.prototype.return=function(t){this.c={return:t},this.a=this.F},function(){if(!function(){var t=document.createEvent("Event");return t.initEvent("foo",!0,!0),t.preventDefault(),t.defaultPrevented}()){var t=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(t.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var e=/Trident/.test(navigator.userAgent);if(!window.Event||e&&"function"!=typeof window.Event){var n=window.Event;if(window.Event=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,!!e.bubbles,!!e.cancelable),n},n){for(var o in n)window.Event[o]=n[o];window.Event.prototype=n.prototype}}if((!window.CustomEvent||e&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!!e.bubbles,!!e.cancelable,e.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.MouseEvent||e&&"function"!=typeof window.MouseEvent){if(e=window.MouseEvent,window.MouseEvent=function(t,e){e=e||{};var n=document.createEvent("MouseEvent");return n.initMouseEvent(t,!!e.bubbles,!!e.cancelable,e.view||window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),n},e)for(o in e)window.MouseEvent[o]=e[o];window.MouseEvent.prototype=e.prototype}Array.from||(Array.from=function(t){return[].slice.call(t)}),Object.assign||(Object.assign=function(t,e){for(var n,o=[].slice.call(arguments,1),r=0;r<o.length;r++)if(n=o[r])for(var i=t,s=n,a=Object.getOwnPropertyNames(s),u=0;u<a.length;u++)i[n=a[u]]=s[n];return t})}(),function(){function t(){}function e(t,e){if(!t.childNodes.length)return[];switch(t.nodeType){case Node.DOCUMENT_NODE:return m.call(t,e);case Node.DOCUMENT_FRAGMENT_NODE:return g.call(t,e);default:return f.call(t,e)}}var n="undefined"==typeof HTMLTemplateElement,o=!(document.createDocumentFragment().cloneNode()instanceof DocumentFragment),r=!1;/Trident/.test(navigator.userAgent)&&function(){function t(t,e){if(t instanceof DocumentFragment)for(var o;o=t.firstChild;)n.call(this,o,e);else n.call(this,t,e);return t}r=!0;var e=Node.prototype.cloneNode;Node.prototype.cloneNode=function(t){return t=e.call(this,t),this instanceof DocumentFragment&&(t.__proto__=DocumentFragment.prototype),t},DocumentFragment.prototype.querySelectorAll=HTMLElement.prototype.querySelectorAll,DocumentFragment.prototype.querySelector=HTMLElement.prototype.querySelector,Object.defineProperties(DocumentFragment.prototype,{nodeType:{get:function(){return Node.DOCUMENT_FRAGMENT_NODE},configurable:!0},localName:{get:function(){},configurable:!0},nodeName:{get:function(){return"#document-fragment"},configurable:!0}});var n=Node.prototype.insertBefore;Node.prototype.insertBefore=t;var o=Node.prototype.appendChild;Node.prototype.appendChild=function(e){return e instanceof DocumentFragment?t.call(this,e,null):o.call(this,e),e};var i=Node.prototype.removeChild,s=Node.prototype.replaceChild;Node.prototype.replaceChild=function(e,n){return e instanceof DocumentFragment?(t.call(this,e,n),i.call(this,n)):s.call(this,e,n),n},Document.prototype.createDocumentFragment=function(){var t=this.createElement("df");return t.__proto__=DocumentFragment.prototype,t};var a=Document.prototype.importNode;Document.prototype.importNode=function(t,e){return e=a.call(this,t,e||!1),t instanceof DocumentFragment&&(e.__proto__=DocumentFragment.prototype),e}}();var i=Node.prototype.cloneNode,s=Document.prototype.createElement,a=Document.prototype.importNode,u=Node.prototype.removeChild,c=Node.prototype.appendChild,l=Node.prototype.replaceChild,p=DOMParser.prototype.parseFromString,h=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML")||{get:function(){return this.innerHTML},set:function(t){this.innerHTML=t}},d=Object.getOwnPropertyDescriptor(window.Node.prototype,"childNodes")||{get:function(){return this.childNodes}},f=Element.prototype.querySelectorAll,m=Document.prototype.querySelectorAll,g=DocumentFragment.prototype.querySelectorAll,v=function(){if(!n){var t=document.createElement("template"),e=document.createElement("template");return e.content.appendChild(document.createElement("div")),t.content.appendChild(e),0===(t=t.cloneNode(!0)).content.childNodes.length||0===t.content.firstChild.content.childNodes.length||o}}();if(n){var _=document.implementation.createHTMLDocument("template"),y=!0,b=document.createElement("style");b.textContent="template{display:none;}";var A=document.head;A.insertBefore(b,A.firstElementChild),t.prototype=Object.create(HTMLElement.prototype);var S=!document.createElement("div").hasOwnProperty("innerHTML");t.S=function(e){if(!e.content&&e.namespaceURI===document.documentElement.namespaceURI){e.content=_.createDocumentFragment();for(var n;n=e.firstChild;)c.call(e.content,n);if(S)e.__proto__=t.prototype;else if(e.cloneNode=function(e){return t.b(this,e)},y)try{C(e),E(e)}catch(o){y=!1}t.a(e.content)}};var w={option:["select"],thead:["table"],col:["colgroup","table"],tr:["tbody","table"],th:["tr","tbody","table"],td:["tr","tbody","table"]},C=function(e){Object.defineProperty(e,"innerHTML",{get:function(){return D(this)},set:function(e){var n=w[(/<([a-z][^/\0>\x20\t\r\n\f]+)/i.exec(e)||["",""])[1].toLowerCase()];if(n)for(var o=0;o<n.length;o++)e="<"+n[o]+">"+e+"</"+n[o]+">";for(_.body.innerHTML=e,t.a(_);this.content.firstChild;)u.call(this.content,this.content.firstChild);if(e=_.body,n)for(o=0;o<n.length;o++)e=e.lastChild;for(;e.firstChild;)c.call(this.content,e.firstChild)},configurable:!0})},E=function(t){Object.defineProperty(t,"outerHTML",{get:function(){return"<template>"+this.innerHTML+"</template>"},set:function(t){if(!this.parentNode)throw Error("Failed to set the 'outerHTML' property on 'Element': This element has no parent node.");for(_.body.innerHTML=t,t=this.ownerDocument.createDocumentFragment();_.body.firstChild;)c.call(t,_.body.firstChild);l.call(this.parentNode,t,this)},configurable:!0})};C(t.prototype),E(t.prototype),t.a=function(n){for(var o,r=0,i=(n=e(n,"template")).length;r<i&&(o=n[r]);r++)t.S(o)},document.addEventListener("DOMContentLoaded",(function(){t.a(document)})),Document.prototype.createElement=function(){var e=s.apply(this,arguments);return"template"===e.localName&&t.S(e),e},DOMParser.prototype.parseFromString=function(){var e=p.apply(this,arguments);return t.a(e),e},Object.defineProperty(HTMLElement.prototype,"innerHTML",{get:function(){return D(this)},set:function(e){h.set.call(this,e),t.a(this)},configurable:!0,enumerable:!0});var I=/[&\u00A0"]/g,k=/[&\u00A0<>]/g,R=function(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"\xa0":return"&nbsp;"}},P=(b=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return e})("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),T=b("style script xmp iframe noembed noframes plaintext noscript".split(" ")),D=function(t,e){"template"===t.localName&&(t=t.content);for(var n,o="",r=e?e(t):d.get.call(t),i=0,s=r.length;i<s&&(n=r[i]);i++){t:{var a=n,u=t,c=e;switch(a.nodeType){case Node.ELEMENT_NODE:for(var l=a.localName,p="<"+l,h=a.attributes,f=0;u=h[f];f++)p+=" "+u.name+'="'+u.value.replace(I,R)+'"';p+=">",a=P[l]?p:p+D(a,c)+"</"+l+">";break t;case Node.TEXT_NODE:a=a.data,a=u&&T[u.localName]?a:a.replace(k,R);break t;case Node.COMMENT_NODE:a="\x3c!--"+a.data+"--\x3e";break t;default:throw window.console.error(a),Error("not implemented")}}o+=a}return o}}if(n||v){t.b=function(t,e){var n=i.call(t,!1);return this.S&&this.S(n),e&&(c.call(n.content,i.call(t.content,!0)),F(n.content,t.content)),n};var F=function(n,o){if(o.querySelectorAll&&0!==(o=e(o,"template")).length)for(var r,i,s=0,a=(n=e(n,"template")).length;s<a;s++)i=o[s],r=n[s],t&&t.S&&t.S(i),l.call(r.parentNode,L.call(i,!0),r)},L=Node.prototype.cloneNode=function(e){if(!r&&o&&this instanceof DocumentFragment){if(!e)return this.ownerDocument.createDocumentFragment();var n=x.call(this.ownerDocument,this,!0)}else n=this.nodeType===Node.ELEMENT_NODE&&"template"===this.localName&&this.namespaceURI==document.documentElement.namespaceURI?t.b(this,e):i.call(this,e);return e&&F(n,this),n},x=Document.prototype.importNode=function(n,o){if(o=o||!1,"template"===n.localName)return t.b(n,o);var r=a.call(this,n,o);if(o){F(r,n),n=e(r,'script:not([type]),script[type="application/javascript"],script[type="text/javascript"]');for(var i,u=0;u<n.length;u++){i=n[u],(o=s.call(document,"script")).textContent=i.textContent;for(var c,p=i.attributes,h=0;h<p.length;h++)o.setAttribute((c=p[h]).name,c.value);l.call(i.parentNode,o,i)}}return r}}n&&(window.HTMLTemplateElement=t)}();var w=setTimeout;function C(){}function E(t){if(!(this instanceof E))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this.I=0,this.oa=!1,this.w=void 0,this.U=[],D(t,this)}function I(t,e){for(;3===t.I;)t=t.w;0===t.I?t.U.push(e):(t.oa=!0,F((function(){var n=1===t.I?e.Pa:e.Qa;if(null===n)(1===t.I?k:R)(e.ma,t.w);else{try{var o=n(t.w)}catch(r){return void R(e.ma,r)}k(e.ma,o)}})))}function k(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof E)return t.I=3,t.w=e,void P(t);if("function"==typeof n)return void D(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t.I=1,t.w=e,P(t)}catch(o){R(t,o)}}function R(t,e){t.I=2,t.w=e,P(t)}function P(t){2===t.I&&0===t.U.length&&F((function(){t.oa||"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t.w)}));for(var e=0,n=t.U.length;e<n;e++)I(t,t.U[e]);t.U=null}function T(t,e,n){this.Pa="function"==typeof t?t:null,this.Qa="function"==typeof e?e:null,this.ma=n}function D(t,e){var n=!1;try{t((function(t){n||(n=!0,k(e,t))}),(function(t){n||(n=!0,R(e,t))}))}catch(o){n||(n=!0,R(e,o))}}E.prototype.catch=function(t){return this.then(null,t)},E.prototype.then=function(t,e){var n=new this.constructor(C);return I(this,new T(t,e,n)),n},E.prototype.finally=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))};var F="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){w(t,0)};if(!window.Promise){window.Promise=E,E.prototype.then=E.prototype.then,E.all=function(t){return new E((function(e,n){function o(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(e){o(t,e)}),n)}r[t]=s,0==--i&&e(r)}catch(u){n(u)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);for(var i=r.length,s=0;s<r.length;s++)o(s,r[s])}))},E.race=function(t){return new E((function(e,n){for(var o=0,r=t.length;o<r;o++)t[o].then(e,n)}))},E.resolve=function(t){return t&&"object"==typeof t&&t.constructor===E?t:new E((function(e){e(t)}))},E.reject=function(t){return new E((function(e,n){n(t)}))};var L=document.createTextNode(""),x=[];new MutationObserver((function(){for(var t=x.length,e=0;e<t;e++)x[e]();x.splice(0,t)})).observe(L,{characterData:!0}),F=function(t){x.push(t),L.textContent=0<L.textContent.length?"":"a"}}!function(t,e){if(!(e in t)){var n=typeof global==typeof n?window:global,o=0,r=""+Math.random(),i="__\x01symbol@@"+r,s=t.getOwnPropertyNames,a=t.getOwnPropertyDescriptor,u=t.create,c=t.keys,l=t.freeze||t,p=t.defineProperty,h=t.defineProperties,d=a(t,"getOwnPropertyNames"),f=t.prototype,m=f.hasOwnProperty,g=f.propertyIsEnumerable,v=f.toString,_=function(t,e,n){m.call(t,i)||p(t,i,{enumerable:!1,configurable:!1,writable:!1,value:{}}),t[i]["@@"+e]=n},y=function(t,e){var n=u(t);return s(e).forEach((function(t){w.call(e,t)&&P(n,t,e[t])})),n},b=function(){},A=function(t){return t!=i&&!m.call(I,t)},S=function(t){return t!=i&&m.call(I,t)},w=function(t){var e=""+t;return S(e)?m.call(this,e)&&this[i]["@@"+e]:g.call(this,t)},C=function(e){return p(f,e,{enumerable:!1,configurable:!0,get:b,set:function(t){D(this,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),_(this,e,!0)}}),l(I[e]=p(t(e),"constructor",k))},E=function(t){if(this&&this!==n)throw new TypeError("Symbol is not a constructor");return C("__\x01symbol:".concat(t||"",r,++o))},I=u(null),k={value:E},R=function(t){return I[t]},P=function(t,e,n){var o=""+e;if(S(o)){if(e=D,n.enumerable){var r=u(n);r.enumerable=!1}else r=n;e(t,o,r),_(t,o,!!n.enumerable)}else p(t,e,n);return t},T=function(t){return s(t).filter(S).map(R)};d.value=P,p(t,"defineProperty",d),d.value=T,p(t,e,d),d.value=function(t){return s(t).filter(A)},p(t,"getOwnPropertyNames",d),d.value=function(t,e){var n=T(e);return n.length?c(e).concat(n).forEach((function(n){w.call(e,n)&&P(t,n,e[n])})):h(t,e),t},p(t,"defineProperties",d),d.value=w,p(f,"propertyIsEnumerable",d),d.value=E,p(n,"Symbol",d),d.value=function(t){return(t="__\x01symbol:".concat("__\x01symbol:",t,r))in f?I[t]:C(t)},p(E,"for",d),d.value=function(t){if(A(t))throw new TypeError(t+" is not a symbol");return m.call(I,t)?t.slice(20,-r.length):void 0},p(E,"keyFor",d),d.value=function(t,e){var n=a(t,e);return n&&S(e)&&(n.enumerable=w.call(t,e)),n},p(t,"getOwnPropertyDescriptor",d),d.value=function(t,e){return 1===arguments.length?u(t):y(t,e)},p(t,"create",d),d.value=function(){var t=v.call(this);return"[object String]"===t&&S(this)?"[object Symbol]":t},p(f,"toString",d);try{var D=u(p({},"__\x01symbol:",{get:function(){return p(this,"__\x01symbol:",{value:!1})["__\x01symbol:"]}}))["__\x01symbol:"]||p}catch(F){D=function(t,e,n){var o=a(f,e);delete f[e],p(t,e,n),p(f,e,o)}}}}(Object,"getOwnPropertySymbols"),function(t){var e,n=t.defineProperty,o=t.prototype,r=o.toString;"iterator match replace search split hasInstance isConcatSpreadable unscopables species toPrimitive toStringTag".split(" ").forEach((function(i){if(!(i in Symbol))switch(n(Symbol,i,{value:Symbol(i)}),i){case"toStringTag":(e=t.getOwnPropertyDescriptor(o,"toString")).value=function(){var t=r.call(this),e=this[Symbol.toStringTag];return void 0===e?t:"[object "+e+"]"},n(o,"toString",e)}}))}(Object,Symbol),function(t,e,n){function o(){return this}e[t]||(e[t]=function(){var e=0,n=this,r={next:function(){var t=n.length<=e;return t?{done:t}:{done:t,value:n[e++]}}};return r[t]=o,r}),n[t]||(n[t]=function(){var e=String.fromCodePoint,n=this,r=0,i=n.length,s={next:function(){var t=i<=r,o=t?"":e(n.codePointAt(r));return r+=o.length,t?{done:t}:{done:t,value:o}}};return s[t]=o,s})}(Symbol.iterator,Array.prototype,String.prototype);var N=Object.prototype.toString;Object.prototype.toString=function(){return void 0===this?"[object Undefined]":null===this?"[object Null]":N.call(this)},Object.keys=function(t){return Object.getOwnPropertyNames(t).filter((function(e){return(e=Object.getOwnPropertyDescriptor(t,e))&&e.enumerable}))};var O=window.Symbol.iterator;String.prototype[O]&&String.prototype.codePointAt||(String.prototype[O]=function t(){var e,n=this;return S(t,(function(t){if(1==t.a&&(e=0),3!=t.a)return e<n.length?t=v(t,n[e]):(t.a=0,t=void 0),t;e++,t.a=2}))}),Set.prototype[O]||(Set.prototype[O]=function t(){var e,n,o=this;return S(t,(function(t){if(1==t.a&&(e=[],o.forEach((function(t){e.push(t)})),n=0),3!=t.a)return n<e.length?t=v(t,e[n]):(t.a=0,t=void 0),t;n++,t.a=2}))}),Map.prototype[O]||(Map.prototype[O]=function t(){var e,n,o=this;return S(t,(function(t){if(1==t.a&&(e=[],o.forEach((function(t,n){e.push([n,t])})),n=0),3!=t.a)return n<e.length?t=v(t,e[n]):(t.a=0,t=void 0),t;n++,t.a=2}))}),window.WebComponents=window.WebComponents||{flags:{}};var M=document.querySelector('script[src*="webcomponents-bundle"]'),q=/wc-(.+)/,U={};if(!U.noOpts){if(location.search.slice(1).split("&").forEach((function(t){var e;(t=t.split("="))[0]&&(e=t[0].match(q))&&(U[e[1]]=t[1]||!0)})),M)for(var B=0,H=void 0;H=M.attributes[B];B++)"src"!==H.name&&(U[H.name]=H.value||!0);if(U.log&&U.log.split){var K=U.log.split(",");U.log={},K.forEach((function(t){U.log[t]=!0}))}else U.log={}}window.WebComponents.flags=U;var j=U.shadydom;j&&(window.ShadyDOM=window.ShadyDOM||{},window.ShadyDOM.force=j);var W=U.register||U.ce;function V(){}function G(t){return t.__shady||(t.__shady=new V),t.__shady}function z(t){return t&&t.__shady}W&&window.customElements&&(window.customElements.forcePolyfill=W),V.prototype.toJSON=function(){return{}};var J=window.ShadyDOM||{};J.La=!(!Element.prototype.attachShadow||!Node.prototype.getRootNode);var Q=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild");J.D=!!(Q&&Q.configurable&&Q.get),J.ka=J.force||!J.La,J.M=J.noPatch||!1,J.ta=J.preferPerformance;var X=navigator.userAgent.match("Trident");function $(t){return(t=z(t))&&void 0!==t.firstChild}function Y(t){return"ShadyRoot"===t.Da}function Z(t){return(t=(t=z(t))&&t.root)&&on(t)}J.ya=X;var tt=Element.prototype,et=tt.matches||tt.matchesSelector||tt.mozMatchesSelector||tt.msMatchesSelector||tt.oMatchesSelector||tt.webkitMatchesSelector,nt=document.createTextNode(""),ot=0,rt=[];function it(t){rt.push(t),nt.textContent=ot++}new MutationObserver((function(){for(;rt.length;)try{rt.shift()()}catch(r){throw nt.textContent=ot++,r}})).observe(nt,{characterData:!0});var st=!!document.contains;function at(t,e){for(;e;){if(e==t)return!0;e=e.__shady_parentNode}return!1}function ut(t){for(var e=t.length-1;0<=e;e--){var n=t[e],o=n.getAttribute("id")||n.getAttribute("name");o&&"length"!==o&&isNaN(o)&&(t[o]=n)}return t.item=function(e){return t[e]},t.namedItem=function(e){if("length"!==e&&isNaN(e)&&t[e])return t[e];for(var n=c(t),o=n.next();!o.done;o=n.next())if(((o=o.value).getAttribute("id")||o.getAttribute("name"))==e)return o;return null},t}function ct(t){var e=[];for(t=t.__shady_native_firstChild;t;t=t.__shady_native_nextSibling)e.push(t);return e}function lt(t){var e=[];for(t=t.__shady_firstChild;t;t=t.__shady_nextSibling)e.push(t);return e}function pt(t,e,n,o){for(var r in n=void 0===n?"":n,e){var i=e[r];if(!(o&&0<=o.indexOf(r))){i.configurable=!0;var s=n+r;if(i.value)t[s]=i.value;else try{Object.defineProperty(t,s,i)}catch(a){}}}}function ht(t){var e={};return Object.getOwnPropertyNames(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e}var dt,ft=[];function mt(t){dt||(dt=!0,it(gt)),ft.push(t)}function gt(){dt=!1;for(var t=!!ft.length;ft.length;)ft.shift()();return t}function vt(){this.a=!1,this.addedNodes=[],this.removedNodes=[],this.$=new Set}gt.list=ft,vt.prototype.flush=function(){if(this.a){this.a=!1;var t=this.takeRecords();t.length&&this.$.forEach((function(e){e(t)}))}},vt.prototype.takeRecords=function(){if(this.addedNodes.length||this.removedNodes.length){var t=[{addedNodes:this.addedNodes,removedNodes:this.removedNodes}];return this.addedNodes=[],this.removedNodes=[],t}return[]};var _t=/[&\u00A0"]/g,yt=/[&\u00A0<>]/g;function bt(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"\xa0":return"&nbsp;"}}function At(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return e}var St=At("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),wt=At("style script xmp iframe noembed noframes plaintext noscript".split(" "));function Ct(t,e){"template"===t.localName&&(t=t.content);for(var n="",o=e?e(t):t.childNodes,r=0,i=o.length,s=void 0;r<i&&(s=o[r]);r++){t:{var a=s,u=t,c=e;switch(a.nodeType){case Node.ELEMENT_NODE:for(var l,p="<"+(u=a.localName),h=a.attributes,d=0;l=h[d];d++)p+=" "+l.name+'="'+l.value.replace(_t,bt)+'"';p+=">",a=St[u]?p:p+Ct(a,c)+"</"+u+">";break t;case Node.TEXT_NODE:a=a.data,a=u&&wt[u.localName]?a:a.replace(yt,bt);break t;case Node.COMMENT_NODE:a="\x3c!--"+a.data+"--\x3e";break t;default:throw window.console.error(a),Error("not implemented")}}n+=a}return n}var Et=J.D,It={querySelector:function(t){return this.__shady_native_querySelector(t)},querySelectorAll:function(t){return this.__shady_native_querySelectorAll(t)}},kt={};function Rt(t){kt[t]=function(e){return e["__shady_native_"+t]}}function Pt(t,e){for(var n in pt(t,e,"__shady_native_"),e)Rt(n)}function Tt(t,e){e=void 0===e?[]:e;for(var n=0;n<e.length;n++){var o=e[n],r=Object.getOwnPropertyDescriptor(t,o);r&&(Object.defineProperty(t,"__shady_native_"+o,r),r.value?It[o]||(It[o]=r.value):Rt(o))}}var Dt=document.createTreeWalker(document,NodeFilter.SHOW_ALL,null,!1),Ft=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT,null,!1),Lt=document.implementation.createHTMLDocument("inert");function xt(t){for(var e;e=t.__shady_native_firstChild;)t.__shady_native_removeChild(e)}var Nt,Ot=["firstElementChild","lastElementChild","children","childElementCount"],Mt=["querySelector","querySelectorAll"],qt=ht({get childNodes(){return this.__shady_childNodes},get firstChild(){return this.__shady_firstChild},get lastChild(){return this.__shady_lastChild},get childElementCount(){return this.__shady_childElementCount},get children(){return this.__shady_children},get firstElementChild(){return this.__shady_firstElementChild},get lastElementChild(){return this.__shady_lastElementChild},get shadowRoot(){return this.__shady_shadowRoot}}),Ut=ht({get textContent(){return this.__shady_textContent},set textContent(t){this.__shady_textContent=t},get innerHTML(){return this.__shady_innerHTML},set innerHTML(t){return this.__shady_innerHTML=t}}),Bt=ht({get parentElement(){return this.__shady_parentElement},get parentNode(){return this.__shady_parentNode},get nextSibling(){return this.__shady_nextSibling},get previousSibling(){return this.__shady_previousSibling},get nextElementSibling(){return this.__shady_nextElementSibling},get previousElementSibling(){return this.__shady_previousElementSibling},get className(){return this.__shady_className},set className(t){return this.__shady_className=t}});for(Nt in qt)qt[Nt].enumerable=!1;for(var Ht in Ut)Ut[Ht].enumerable=!1;for(var Kt in Bt)Bt[Kt].enumerable=!1;var jt=J.D||J.M,Wt=jt?function(){}:function(t){var e=G(t);e.Aa||(e.Aa=!0,pt(t,Bt))},Vt=jt?function(){}:function(t){var e=G(t);e.za||(e.za=!0,pt(t,qt),window.customElements&&!J.M||pt(t,Ut))},Gt="__eventWrappers"+Date.now(),zt=function(){var t=Object.getOwnPropertyDescriptor(Event.prototype,"composed");return t?function(e){return t.get.call(e)}:null}(),Jt=function(){function t(){}var e=!1,n={get capture(){e=!0}};return window.addEventListener("test",t,n),window.removeEventListener("test",t,n),e}();function Qt(t){if(t&&"object"==typeof t)var e=!!t.capture,n=!!t.once,o=!!t.passive,r=t.O;else e=!!t,o=n=!1;return{ua:r,capture:e,once:n,passive:o,sa:Jt?t:e}}var Xt={blur:!0,focus:!0,focusin:!0,focusout:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,wheel:!0,beforeinput:!0,input:!0,keydown:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0,pointerover:!0,pointerenter:!0,pointerdown:!0,pointermove:!0,pointerup:!0,pointercancel:!0,pointerout:!0,pointerleave:!0,gotpointercapture:!0,lostpointercapture:!0,dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0,DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,keypress:!0},$t={DOMAttrModified:!0,DOMAttributeNameChanged:!0,DOMCharacterDataModified:!0,DOMElementNameChanged:!0,DOMNodeInserted:!0,DOMNodeInsertedIntoDocument:!0,DOMNodeRemoved:!0,DOMNodeRemovedFromDocument:!0,DOMSubtreeModified:!0};function Yt(t){return t instanceof Node?t.__shady_getRootNode():t}function Zt(t,e){var n=[],o=t;for(t=Yt(t);o;)n.push(o),o=o.__shady_assignedSlot?o.__shady_assignedSlot:o.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&o.host&&(e||o!==t)?o.host:o.__shady_parentNode;return n[n.length-1]===document&&n.push(window),n}function te(t,e){if(!Y)return t;t=Zt(t,!0);for(var n,o,r=0,i=void 0,s=void 0;r<e.length;r++)if((o=Yt(n=e[r]))!==i&&(s=t.indexOf(o),i=o),!Y(o)||-1<s)return n}function ee(t){function e(e,n){return(e=new t(e,n)).__composed=n&&!!n.composed,e}return e.__proto__=t,e.prototype=t.prototype,e}var ne={focus:!0,blur:!0};function oe(t){return t.__target!==t.target||t.__relatedTarget!==t.relatedTarget}function re(t,e,n){if(n=e.__handlers&&e.__handlers[t.type]&&e.__handlers[t.type][n])for(var o,r=0;(o=n[r])&&(!oe(t)||t.target!==t.relatedTarget)&&(o.call(e,t),!t.__immediatePropagationStopped);r++);}function ie(t){var e,n=t.composedPath();Object.defineProperty(t,"currentTarget",{get:function(){return r},configurable:!0});for(var o=n.length-1;0<=o;o--){var r=n[o];if(re(t,r,"capture"),t.ga)return}for(Object.defineProperty(t,"eventPhase",{get:function(){return Event.AT_TARGET}}),o=0;o<n.length;o++){var i=z(r=n[o]);if(i=i&&i.root,(0===o||i&&i===e)&&(re(t,r,"bubble"),r!==window&&(e=r.__shady_getRootNode()),t.ga))break}}function se(t,e,n,o,r,i){for(var s=0;s<t.length;s++){var a=t[s];if(e===a.node&&n===a.type&&o===a.capture&&r===a.once&&i===a.passive)return s}return-1}function ae(t,e,n){var o=Qt(n),r=o.capture,i=o.once,s=o.passive,a=o.ua;if(o=o.sa,e){var u=typeof e;if(("function"===u||"object"===u)&&("object"!==u||e.handleEvent&&"function"==typeof e.handleEvent)){if($t[t])return this.__shady_native_addEventListener(t,e,o);var c=a||this;if(a=e[Gt]){if(-1<se(a,c,t,r,i,s))return}else e[Gt]=[];a=function(o){if(i&&this.__shady_removeEventListener(t,e,n),o.__target||le(o),c!==this){var r=Object.getOwnPropertyDescriptor(o,"currentTarget");Object.defineProperty(o,"currentTarget",{get:function(){return c},configurable:!0})}if(o.__previousCurrentTarget=o.currentTarget,(!Y(c)&&"slot"!==c.localName||-1!=o.composedPath().indexOf(c))&&(o.composed||-1<o.composedPath().indexOf(c)))if(oe(o)&&o.target===o.relatedTarget)o.eventPhase===Event.BUBBLING_PHASE&&o.stopImmediatePropagation();else if(o.eventPhase===Event.CAPTURING_PHASE||o.bubbles||o.target===c||c instanceof Window){var s="function"===u?e.call(c,o):e.handleEvent&&e.handleEvent(o);return c!==this&&(r?(Object.defineProperty(o,"currentTarget",r),r=null):delete o.currentTarget),s}},e[Gt].push({node:c,type:t,capture:r,once:i,passive:s,ab:a}),ne[t]?(this.__handlers=this.__handlers||{},this.__handlers[t]=this.__handlers[t]||{capture:[],bubble:[]},this.__handlers[t][r?"capture":"bubble"].push(a)):this.__shady_native_addEventListener(t,a,o)}}}function ue(t,e,n){if(e){var o=Qt(n);n=o.capture;var r=o.once,i=o.passive,s=o.ua;if(o=o.sa,$t[t])return this.__shady_native_removeEventListener(t,e,o);var a=s||this;s=void 0;var u=null;try{u=e[Gt]}catch(c){}u&&-1<(r=se(u,a,t,n,r,i))&&(s=u.splice(r,1)[0].ab,u.length||(e[Gt]=void 0)),this.__shady_native_removeEventListener(t,s||e,o),s&&ne[t]&&this.__handlers&&this.__handlers[t]&&-1<(e=(t=this.__handlers[t][n?"capture":"bubble"]).indexOf(s))&&t.splice(e,1)}}var ce=ht({get composed(){return void 0===this.__composed&&(zt?this.__composed="focusin"===this.type||"focusout"===this.type||zt(this):!1!==this.isTrusted&&(this.__composed=Xt[this.type])),this.__composed||!1},composedPath:function(){return this.__composedPath||(this.__composedPath=Zt(this.__target,this.composed)),this.__composedPath},get target(){return te(this.currentTarget||this.__previousCurrentTarget,this.composedPath())},get relatedTarget(){return this.__relatedTarget?(this.__relatedTargetComposedPath||(this.__relatedTargetComposedPath=Zt(this.__relatedTarget,!0)),te(this.currentTarget||this.__previousCurrentTarget,this.__relatedTargetComposedPath)):null},stopPropagation:function(){Event.prototype.stopPropagation.call(this),this.ga=!0},stopImmediatePropagation:function(){Event.prototype.stopImmediatePropagation.call(this),this.ga=this.__immediatePropagationStopped=!0}});function le(t){if(t.__target=t.target,t.__relatedTarget=t.relatedTarget,J.D){var e=Object.getPrototypeOf(t);if(!Object.hasOwnProperty(e,"__shady_patchedProto")){var n=Object.create(e);n.__shady_sourceProto=e,pt(n,ce),e.__shady_patchedProto=n}t.__proto__=e.__shady_patchedProto}else pt(t,ce)}var pe=ee(Event),he=ee(CustomEvent),de=ee(MouseEvent),fe=Object.getOwnPropertyNames(Document.prototype).filter((function(t){return"on"===t.substring(0,2)}));function me(t,e){return{index:t,W:[],Z:e}}function ge(t,e,n,o){var r=0,i=0,s=0,a=0,u=Math.min(e-r,o-i);if(0==r&&0==i)t:{for(s=0;s<u;s++)if(t[s]!==n[s])break t;s=u}if(e==t.length&&o==n.length){a=t.length;for(var c=n.length,l=0;l<u-s&&ve(t[--a],n[--c]);)l++;a=l}if(i+=s,o-=a,0==(e-=a)-(r+=s)&&0==o-i)return[];if(r==e){for(e=me(r,0);i<o;)e.W.push(n[i++]);return[e]}if(i==o)return[me(r,e-r)];for(o=o-(s=i)+1,a=e-(u=r)+1,e=Array(o),c=0;c<o;c++)e[c]=Array(a),e[c][0]=c;for(c=0;c<a;c++)e[0][c]=c;for(c=1;c<o;c++)for(l=1;l<a;l++)if(t[u+l-1]===n[s+c-1])e[c][l]=e[c-1][l-1];else{var p=e[c-1][l]+1,h=e[c][l-1]+1;e[c][l]=p<h?p:h}for(o=e[u=e.length-1][s=e[0].length-1],t=[];0<u||0<s;)0==u?(t.push(2),s--):0==s?(t.push(3),u--):(a=e[u-1][s-1],(p=(c=e[u-1][s])<(l=e[u][s-1])?c<a?c:a:l<a?l:a)==a?(a==o?t.push(0):(t.push(1),o=a),u--,s--):p==c?(t.push(3),u--,o=c):(t.push(2),s--,o=l));for(t.reverse(),e=void 0,u=[],s=0;s<t.length;s++)switch(t[s]){case 0:e&&(u.push(e),e=void 0),r++,i++;break;case 1:e||(e=me(r,0)),e.Z++,r++,e.W.push(n[i]),i++;break;case 2:e||(e=me(r,0)),e.Z++,r++;break;case 3:e||(e=me(r,0)),e.W.push(n[i]),i++}return e&&u.push(e),u}function ve(t,e){return t===e}function _e(t,e,n,o){Wt(t),o=o||null;var r=G(t),i=o?G(o):null;r.previousSibling=o?i.previousSibling:e.__shady_lastChild,(i=z(r.previousSibling))&&(i.nextSibling=t),(i=z(r.nextSibling=o))&&(i.previousSibling=t),r.parentNode=e,o?o===n.firstChild&&(n.firstChild=t):(n.lastChild=t,n.firstChild||(n.firstChild=t)),n.childNodes=null}function ye(t,e){var n=G(t);if(e||void 0===n.firstChild){n.childNodes=null;var o=n.firstChild=t.__shady_native_firstChild;for(n.lastChild=t.__shady_native_lastChild,Vt(t),n=o,o=void 0;n;n=n.__shady_native_nextSibling){var r=G(n);r.parentNode=e||t,r.nextSibling=n.__shady_native_nextSibling,r.previousSibling=o||null,o=n,Wt(n)}}}var be=null;function Ae(){return be||(be=window.ShadyCSS&&window.ShadyCSS.ScopingShim),be||null}function Se(t,e){var n=Ae();n&&n.unscopeNode(t,e)}function we(t){if(t.nodeType!==Node.ELEMENT_NODE)return"";var e=Ae();return e?e.currentScopeForNode(t):""}function Ce(t,e){if(t)for(t.nodeType===Node.ELEMENT_NODE&&e(t),t=t.__shady_firstChild;t;t=t.__shady_nextSibling)t.nodeType===Node.ELEMENT_NODE&&Ce(t,e)}var Ee=window.document,Ie=J.ta,ke=Object.getOwnPropertyDescriptor(Node.prototype,"isConnected"),Re=ke&&ke.get;function Pe(t){for(var e;e=t.__shady_firstChild;)t.__shady_removeChild(e)}function Te(t,e,n){(t=(t=z(t))&&t.V)&&(e&&t.addedNodes.push(e),n&&t.removedNodes.push(n),function(t){t.a||(t.a=!0,it((function(){t.flush()})))}(t))}var De=ht({get parentNode(){var t=z(this);return void 0!==(t=t&&t.parentNode)?t:this.__shady_native_parentNode},get firstChild(){var t=z(this);return void 0!==(t=t&&t.firstChild)?t:this.__shady_native_firstChild},get lastChild(){var t=z(this);return void 0!==(t=t&&t.lastChild)?t:this.__shady_native_lastChild},get nextSibling(){var t=z(this);return void 0!==(t=t&&t.nextSibling)?t:this.__shady_native_nextSibling},get previousSibling(){var t=z(this);return void 0!==(t=t&&t.previousSibling)?t:this.__shady_native_previousSibling},get childNodes(){if($(this)){var t=z(this);if(!t.childNodes){t.childNodes=[];for(var e=this.__shady_firstChild;e;e=e.__shady_nextSibling)t.childNodes.push(e)}var n=t.childNodes}else n=this.__shady_native_childNodes;return n.item=function(t){return n[t]},n},get parentElement(){var t=z(this);return(t=t&&t.parentNode)&&t.nodeType!==Node.ELEMENT_NODE&&(t=null),void 0!==t?t:this.__shady_native_parentElement},get isConnected(){if(Re&&Re.call(this))return!0;if(this.nodeType==Node.DOCUMENT_FRAGMENT_NODE)return!1;var t=this.ownerDocument;if(st){if(t.__shady_native_contains(this))return!0}else if(t.documentElement&&t.documentElement.__shady_native_contains(this))return!0;for(t=this;t&&!(t instanceof Document);)t=t.__shady_parentNode||(Y(t)?t.host:void 0);return!!(t&&t instanceof Document)},get textContent(){if($(this)){for(var t=[],e=this.__shady_firstChild;e;e=e.__shady_nextSibling)e.nodeType!==Node.COMMENT_NODE&&t.push(e.__shady_textContent);return t.join("")}return this.__shady_native_textContent},set textContent(t){switch(null==t&&(t=""),this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:if(!$(this)&&J.D){var e=this.__shady_firstChild;(e!=this.__shady_lastChild||e&&e.nodeType!=Node.TEXT_NODE)&&Pe(this),this.__shady_native_textContent=t}else Pe(this),(0<t.length||this.nodeType===Node.ELEMENT_NODE)&&this.__shady_insertBefore(document.createTextNode(t));break;default:this.nodeValue=t}},insertBefore:function(t,e){if(this.ownerDocument!==Ee&&t.ownerDocument!==Ee)return this.__shady_native_insertBefore(t,e),t;if(t===this)throw Error("Failed to execute 'appendChild' on 'Node': The new child element contains the parent.");if(e){var n=z(e);if(void 0!==(n=n&&n.parentNode)&&n!==this||void 0===n&&e.__shady_native_parentNode!==this)throw Error("Failed to execute 'insertBefore' on 'Node': The node before which the new node is to be inserted is not a child of this node.")}if(e===t)return t;var o=[],r=(n=un(this))?n.host.localName:we(this),i=t.__shady_parentNode;if(i){var s=we(t),a=!!n||!un(t)||Ie&&void 0!==this.__noInsertionPoint;i.__shady_removeChild(t,a)}i=!0;var u=(!Ie||void 0===t.__noInsertionPoint&&void 0===this.__noInsertionPoint)&&!function t(e,n){var o=Ae();if(!o)return!0;if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(o=!0,e=e.__shady_firstChild;e;e=e.__shady_nextSibling)o=o&&t(e,n);return o}return e.nodeType!==Node.ELEMENT_NODE||o.currentScopeForNode(e)===n}(t,r),p=n&&!t.__noInsertionPoint&&(!Ie||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE);return(p||u)&&(u&&(s=s||we(t)),Ce(t,(function(t){if(p&&"slot"===t.localName&&o.push(t),u){var e=s;Ae()&&(e&&Se(t,e),(e=Ae())&&e.scopeNode(t,r))}}))),o.length&&(Ze(n),n.c.push.apply(n.c,o instanceof Array?o:l(c(o))),Je(n)),$(this)&&(function(t,e,n){Vt(e);var o=G(e);if(void 0!==o.firstChild&&(o.childNodes=null),t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(t=t.__shady_native_firstChild;t;t=t.__shady_native_nextSibling)_e(t,e,o,n);else _e(t,e,o,n)}(t,this,e),n=z(this),Z(this)?(Je(n.root),i=!1):n.root&&(i=!1)),i?(n=Y(this)?this.host:this,e?(e=function t(e){var n=e;return e&&"slot"===e.localName&&(n=(n=(n=z(e))&&n.T)&&n.length?n[0]:t(e.__shady_nextSibling)),n}(e),n.__shady_native_insertBefore(t,e)):n.__shady_native_appendChild(t)):t.ownerDocument!==this.ownerDocument&&this.ownerDocument.adoptNode(t),Te(this,t),t},appendChild:function(t){if(this!=t||!Y(t))return this.__shady_insertBefore(t)},removeChild:function(t,e){if(e=void 0!==e&&e,this.ownerDocument!==Ee)return this.__shady_native_removeChild(t);if(t.__shady_parentNode!==this)throw Error("The node to be removed is not a child of this node: "+t);var n=un(t),o=n&&function(t,e){if(t.a){tn(t);var n,o=t.b;for(n in o)for(var r=o[n],i=0;i<r.length;i++){var s=r[i];if(at(e,s)){r.splice(i,1);var a=t.a.indexOf(s);if(0<=a&&(t.a.splice(a,1),(a=z(s.__shady_parentNode))&&a.Y&&a.Y--),i--,a=(s=z(s)).T)for(var u=0;u<a.length;u++){var c=a[u],l=c.__shady_native_parentNode;l&&l.__shady_native_removeChild(c)}s.T=[],s.assignedNodes=[],a=!0}}return a}}(n,t),r=z(this);if($(this)&&(function(t,e){var n=G(t);t===(e=G(e)).firstChild&&(e.firstChild=n.nextSibling),t===e.lastChild&&(e.lastChild=n.previousSibling);var o=n.nextSibling;(t=n.previousSibling)&&(G(t).nextSibling=o),o&&(G(o).previousSibling=t),n.parentNode=n.previousSibling=n.nextSibling=void 0,void 0!==e.childNodes&&(e.childNodes=null)}(t,this),Z(this))){Je(r.root);var i=!0}if(Ae()&&!e&&n&&t.nodeType!==Node.TEXT_NODE){var s=we(t);Ce(t,(function(t){Se(t,s)}))}return function t(e){var n=z(e);if(n&&void 0!==n.ca)for(n=e.__shady_firstChild;n;n=n.__shady_nextSibling)t(n);(e=z(e))&&(e.ca=void 0)}(t),n&&((e=this&&"slot"===this.localName)&&(i=!0),(o||e)&&Je(n)),i||(i=Y(this)?this.host:this,(!r.root&&"slot"!==t.localName||i===t.__shady_native_parentNode)&&i.__shady_native_removeChild(t)),Te(this,null,t),t},replaceChild:function(t,e){return this.__shady_insertBefore(t,e),this.__shady_removeChild(e),t},cloneNode:function(t){if("template"==this.localName)return this.__shady_native_cloneNode(t);var e=this.__shady_native_cloneNode(!1);if(t&&e.nodeType!==Node.ATTRIBUTE_NODE){t=this.__shady_firstChild;for(var n;t;t=t.__shady_nextSibling)n=t.__shady_cloneNode(!0),e.__shady_appendChild(n)}return e},getRootNode:function(t){if(this&&this.nodeType){var e=G(this),n=e.ca;return void 0===n&&(Y(this)?e.ca=n=this:(n=(n=this.__shady_parentNode)?n.__shady_getRootNode(t):this,document.documentElement.__shady_native_contains(this)&&(e.ca=n))),n}},contains:function(t){return at(this,t)}});function Fe(t,e,n){var o=[];return function t(e,n,o,r){for(e=e.__shady_firstChild;e;e=e.__shady_nextSibling){var i;if(i=e.nodeType===Node.ELEMENT_NODE){var s=n,a=o,u=r,c=s(i=e);c&&u.push(i),a&&a(c)?i=c:(t(i,s,a,u),i=void 0)}if(i)break}}(t,e,n,o),o}var Le=ht({get firstElementChild(){var t=z(this);if(t&&void 0!==t.firstChild){for(t=this.__shady_firstChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__shady_nextSibling;return t}return this.__shady_native_firstElementChild},get lastElementChild(){var t=z(this);if(t&&void 0!==t.lastChild){for(t=this.__shady_lastChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__shady_previousSibling;return t}return this.__shady_native_lastElementChild},get children(){return $(this)?ut(Array.prototype.filter.call(lt(this),(function(t){return t.nodeType===Node.ELEMENT_NODE}))):this.__shady_native_children},get childElementCount(){var t=this.__shady_children;return t?t.length:0}}),xe=ht({querySelector:function(t){return Fe(this,(function(e){return et.call(e,t)}),(function(t){return!!t}))[0]||null},querySelectorAll:function(t,e){if(e){e=Array.prototype.slice.call(this.__shady_native_querySelectorAll(t));var n=this.__shady_getRootNode();return e.filter((function(t){return t.__shady_getRootNode()==n}))}return Fe(this,(function(e){return et.call(e,t)}))}}),Ne=J.ta&&!J.M?Object.assign({},Le):Le;Object.assign(Le,xe);var Oe=ht({getElementById:function(t){return""===t?null:Fe(this,(function(e){return e.id==t}),(function(t){return!!t}))[0]||null}}),Me=ht({get activeElement(){var t=J.D?document.__shady_native_activeElement:document.activeElement;if(!t||!t.nodeType)return null;var e=!!Y(this);if(!(this===document||e&&this.host!==t&&this.host.__shady_native_contains(t)))return null;for(e=un(t);e&&e!==this;)e=un(t=e.host);return this===document?e?null:t:e===this?t:null}}),qe=document.implementation.createHTMLDocument("inert"),Ue=ht({get innerHTML(){return $(this)?Ct("template"===this.localName?this.content:this,lt):this.__shady_native_innerHTML},set innerHTML(t){if("template"===this.localName)this.__shady_native_innerHTML=t;else{Pe(this);var e=this.localName||"div";for(e=this.namespaceURI&&this.namespaceURI!==qe.namespaceURI?qe.createElementNS(this.namespaceURI,e):qe.createElement(e),J.D?e.__shady_native_innerHTML=t:e.innerHTML=t;t=e.__shady_firstChild;)this.__shady_insertBefore(t)}}}),Be=ht({addEventListener:function(t,e,n){"object"!=typeof n&&(n={capture:!!n}),n.O=n.O||this,this.host.__shady_addEventListener(t,e,n)},removeEventListener:function(t,e,n){"object"!=typeof n&&(n={capture:!!n}),n.O=n.O||this,this.host.__shady_removeEventListener(t,e,n)}});function He(t,e){pt(t,Be,e),pt(t,Me,e),pt(t,Ue,e),pt(t,Le,e),J.M&&!e?(pt(t,De,e),pt(t,Oe,e)):J.D||(pt(t,Bt),pt(t,qt),pt(t,Ut))}var Ke,je={},We=J.deferConnectionCallbacks&&"loading"===document.readyState;function Ve(t){var e=[];do{e.unshift(t)}while(t=t.__shady_parentNode);return e}function Ge(t,e,n){if(t!==je)throw new TypeError("Illegal constructor");this.a=null,ze(this,e,n)}function ze(t,e,n){if(t.Da="ShadyRoot",t.host=e,t.mode=n&&n.mode,ye(t.host),(e=G(t.host)).root=t,e.Ta="closed"!==t.mode?t:null,(e=G(t)).firstChild=e.lastChild=e.parentNode=e.nextSibling=e.previousSibling=null,J.preferPerformance)for(;e=t.host.__shady_native_firstChild;)t.host.__shady_native_removeChild(e);else Je(t)}function Je(t){t.R||(t.R=!0,mt((function(){return Qe(t)})))}function Qe(t){var e;if(e=t.R){for(var n;t;)t.R&&(n=t),Y(t=(e=t).host.__shady_getRootNode())&&(e=z(e.host))&&0<e.Y||(t=void 0);e=n}(n=e)&&n._renderSelf()}function Xe(t,e,n){var o=G(e),r=o.ha;o.ha=null,n||(n=(t=t.b[e.__shady_slot||"__catchall"])&&t[0]),n?(G(n).assignedNodes.push(e),o.assignedSlot=n):o.assignedSlot=void 0,r!==o.assignedSlot&&o.assignedSlot&&(G(o.assignedSlot).ja=!0)}function $e(t,e,n){for(var o=0,r=void 0;o<n.length&&(r=n[o]);o++)if("slot"==r.localName){var i=z(r).assignedNodes;i&&i.length&&$e(t,e,i)}else e.push(n[o])}function Ye(t,e){e.__shady_native_dispatchEvent(new Event("slotchange")),(e=z(e)).assignedSlot&&Ye(t,e.assignedSlot)}function Ze(t){t.c=t.c||[],t.a=t.a||[],t.b=t.b||{}}function tn(t){if(t.c&&t.c.length){for(var e,n=t.c,o=0;o<n.length;o++){var r=n[o];ye(r);var i=r.__shady_parentNode;ye(i),(i=z(i)).Y=(i.Y||0)+1,i=en(r),t.b[i]?((e=e||{})[i]=!0,t.b[i].push(r)):t.b[i]=[r],t.a.push(r)}if(e)for(var s in e)t.b[s]=nn(t.b[s]);t.c=[]}}function en(t){var e=t.name||t.getAttribute("name")||"__catchall";return t.Ba=e}function nn(t){return t.sort((function(t,e){t=Ve(t);for(var n=Ve(e),o=0;o<t.length;o++){var r=n[o];if((e=t[o])!==r)return(t=lt(e.__shady_parentNode)).indexOf(e)-t.indexOf(r)}}))}function on(t){return tn(t),!(!t.a||!t.a.length)}if(Ge.prototype._renderSelf=function(){var t=We;if(We=!0,this.R=!1,this.a){tn(this);for(var e,n=0;n<this.a.length;n++){var o=z(e=this.a[n]),r=o.assignedNodes;if(o.assignedNodes=[],o.T=[],o.qa=r)for(o=0;o<r.length;o++){var i=z(r[o]);i.ha=i.assignedSlot,i.assignedSlot===e&&(i.assignedSlot=null)}}for(n=this.host.__shady_firstChild;n;n=n.__shady_nextSibling)Xe(this,n);for(n=0;n<this.a.length;n++){if(!(r=z(e=this.a[n])).assignedNodes.length)for(o=e.__shady_firstChild;o;o=o.__shady_nextSibling)Xe(this,o,e);if((o=(o=z(e.__shady_parentNode))&&o.root)&&(on(o)||o.R)&&o._renderSelf(),$e(this,r.T,r.assignedNodes),o=r.qa){for(i=0;i<o.length;i++)z(o[i]).ha=null;r.qa=null,o.length>r.assignedNodes.length&&(r.ja=!0)}r.ja&&(r.ja=!1,Ye(this,e))}for(e=this.a,n=[],r=0;r<e.length;r++)(i=z(o=e[r].__shady_parentNode))&&i.root||!(0>n.indexOf(o))||n.push(o);for(e=0;e<n.length;e++){for(r=(i=n[e])===this?this.host:i,o=[],i=i.__shady_firstChild;i;i=i.__shady_nextSibling)if("slot"==i.localName)for(var s=z(i).T,a=0;a<s.length;a++)o.push(s[a]);else o.push(i);i=ct(r),s=ge(o,o.length,i,i.length);for(var u=a=0,c=void 0;a<s.length&&(c=s[a]);a++){for(var l=0,p=void 0;l<c.W.length&&(p=c.W[l]);l++)p.__shady_native_parentNode===r&&r.__shady_native_removeChild(p),i.splice(c.index+u,1);u-=c.Z}for(u=0,c=void 0;u<s.length&&(c=s[u]);u++)for(a=i[c.index],l=c.index;l<c.index+c.Z;l++)r.__shady_native_insertBefore(p=o[l],a),i.splice(l,0,p)}}if(!J.preferPerformance&&!this.pa)for(n=this.host.__shady_firstChild;n;n=n.__shady_nextSibling)e=z(n),n.__shady_native_parentNode!==this.host||"slot"!==n.localName&&e.assignedSlot||this.host.__shady_native_removeChild(n);this.pa=!0,We=t,Ke&&Ke()},function(t){t.__proto__=DocumentFragment.prototype,He(t,"__shady_"),He(t),Object.defineProperties(t,{nodeType:{value:Node.DOCUMENT_FRAGMENT_NODE,configurable:!0},nodeName:{value:"#document-fragment",configurable:!0},nodeValue:{value:null,configurable:!0}}),["localName","namespaceURI","prefix"].forEach((function(e){Object.defineProperty(t,e,{value:void 0,configurable:!0})})),["ownerDocument","baseURI","isConnected"].forEach((function(e){Object.defineProperty(t,e,{get:function(){return this.host[e]},configurable:!0})}))}(Ge.prototype),window.customElements&&J.ka&&!J.preferPerformance){var rn=new Map;Ke=function(){var t=[];rn.forEach((function(e,n){t.push([n,e])})),rn.clear();for(var e=0;e<t.length;e++){var n=t[e][0];t[e][1]?n.__shadydom_connectedCallback():n.__shadydom_disconnectedCallback()}},We&&document.addEventListener("readystatechange",(function(){We=!1,Ke()}),{once:!0});var sn=window.customElements.define,an=function(t,e){var n=e.prototype.connectedCallback,o=e.prototype.disconnectedCallback;sn.call(window.customElements,t,function(t,e,n){var o=0,r="__isConnected"+o++;return(e||n)&&(t.prototype.connectedCallback=t.prototype.__shadydom_connectedCallback=function(){We?rn.set(this,!0):this[r]||(this[r]=!0,e&&e.call(this))},t.prototype.disconnectedCallback=t.prototype.__shadydom_disconnectedCallback=function(){We?this.isConnected||rn.set(this,!1):this[r]&&(this[r]=!1,n&&n.call(this))}),t}(e,n,o)),e.prototype.connectedCallback=n,e.prototype.disconnectedCallback=o};window.customElements.define=an,Object.defineProperty(window.CustomElementRegistry.prototype,"define",{value:an,configurable:!0})}function un(t){if(Y(t=t.__shady_getRootNode()))return t}function cn(t){this.node=t}(t=cn.prototype).addEventListener=function(t,e,n){return this.node.__shady_addEventListener(t,e,n)},t.removeEventListener=function(t,e,n){return this.node.__shady_removeEventListener(t,e,n)},t.appendChild=function(t){return this.node.__shady_appendChild(t)},t.insertBefore=function(t,e){return this.node.__shady_insertBefore(t,e)},t.removeChild=function(t){return this.node.__shady_removeChild(t)},t.replaceChild=function(t,e){return this.node.__shady_replaceChild(t,e)},t.cloneNode=function(t){return this.node.__shady_cloneNode(t)},t.getRootNode=function(t){return this.node.__shady_getRootNode(t)},t.contains=function(t){return this.node.__shady_contains(t)},t.dispatchEvent=function(t){return this.node.__shady_dispatchEvent(t)},t.setAttribute=function(t,e){this.node.__shady_setAttribute(t,e)},t.getAttribute=function(t){return this.node.__shady_native_getAttribute(t)},t.hasAttribute=function(t){return this.node.__shady_native_hasAttribute(t)},t.removeAttribute=function(t){this.node.__shady_removeAttribute(t)},t.attachShadow=function(t){return this.node.__shady_attachShadow(t)},t.focus=function(){this.node.__shady_native_focus()},t.blur=function(){this.node.__shady_blur()},t.importNode=function(t,e){if(this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_importNode(t,e)},t.getElementById=function(t){if(this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_getElementById(t)},t.querySelector=function(t){return this.node.__shady_querySelector(t)},t.querySelectorAll=function(t,e){return this.node.__shady_querySelectorAll(t,e)},t.assignedNodes=function(t){if("slot"===this.node.localName)return this.node.__shady_assignedNodes(t)},e.Object.defineProperties(cn.prototype,{activeElement:{configurable:!0,enumerable:!0,get:function(){if(Y(this.node)||this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_activeElement}},_activeElement:{configurable:!0,enumerable:!0,get:function(){return this.activeElement}},host:{configurable:!0,enumerable:!0,get:function(){if(Y(this.node))return this.node.host}},parentNode:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_parentNode}},firstChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_firstChild}},lastChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_lastChild}},nextSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_nextSibling}},previousSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_previousSibling}},childNodes:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_childNodes}},parentElement:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_parentElement}},firstElementChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_firstElementChild}},lastElementChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_lastElementChild}},nextElementSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_nextElementSibling}},previousElementSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_previousElementSibling}},children:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_children}},childElementCount:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_childElementCount}},shadowRoot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_shadowRoot}},assignedSlot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_assignedSlot}},isConnected:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_isConnected}},innerHTML:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_innerHTML},set:function(t){this.node.__shady_innerHTML=t}},textContent:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_textContent},set:function(t){this.node.__shady_textContent=t}},slot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_slot},set:function(t){this.node.__shady_slot=t}},className:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_className},set:function(t){return this.node.__shady_className=t}}}),fe.forEach((function(t){Object.defineProperty(cn.prototype,t,{get:function(){return this.node["__shady_"+t]},set:function(e){this.node["__shady_"+t]=e},configurable:!0})}));var ln=new WeakMap,pn=ht({dispatchEvent:function(t){return gt(),this.__shady_native_dispatchEvent(t)},addEventListener:ae,removeEventListener:ue}),hn=ht({get assignedSlot(){var t=this.__shady_parentNode;return(t=t&&t.__shady_shadowRoot)&&Qe(t),(t=z(this))&&t.assignedSlot||null}}),dn=window.document;function fn(t,e){if("slot"===e)Z(t=t.__shady_parentNode)&&Je(z(t).root);else if("slot"===t.localName&&"name"===e&&(e=un(t))){if(e.a){tn(e);var n=t.Ba,o=en(t);if(o!==n){var r=(n=e.b[n]).indexOf(t);0<=r&&n.splice(r,1),(n=e.b[o]||(e.b[o]=[])).push(t),1<n.length&&(e.b[o]=nn(n))}}Je(e)}}var mn=ht({get previousElementSibling(){var t=z(this);if(t&&void 0!==t.previousSibling){for(t=this.__shady_previousSibling;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__shady_previousSibling;return t}return this.__shady_native_previousElementSibling},get nextElementSibling(){var t=z(this);if(t&&void 0!==t.nextSibling){for(t=this.__shady_nextSibling;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__shady_nextSibling;return t}return this.__shady_native_nextElementSibling},get slot(){return this.getAttribute("slot")},set slot(t){this.__shady_setAttribute("slot",t)},get shadowRoot(){var t=z(this);return t&&t.Ta||null},get className(){return this.getAttribute("class")||""},set className(t){this.__shady_setAttribute("class",t)},setAttribute:function(t,e){var n;this.ownerDocument!==dn?this.__shady_native_setAttribute(t,e):((n=Ae())&&"class"===t?(n.setElementClass(this,e),n=!0):n=!1,n||(this.__shady_native_setAttribute(t,e),fn(this,t)))},removeAttribute:function(t){this.__shady_native_removeAttribute(t),fn(this,t)},attachShadow:function(t){if(!this)throw Error("Must provide a host.");if(!t)throw Error("Not enough arguments.");if(t.shadyUpgradeFragment&&!J.ya){var e=t.shadyUpgradeFragment;if(e.__proto__=ShadowRoot.prototype,ze(e,this,t),ye(e,e),t=e.__noInsertionPoint?null:e.querySelectorAll("slot"),e.__noInsertionPoint=void 0,t&&t.length){var n=e;Ze(n),n.c.push.apply(n.c,t instanceof Array?t:l(c(t))),Je(e)}e.host.__shady_native_appendChild(e)}else e=new Ge(je,this,t);return e}}),gn=ht({blur:function(){var t=z(this);(t=(t=t&&t.root)&&t.activeElement)?t.__shady_blur():this.__shady_native_blur()}});fe.forEach((function(t){gn[t]={set:function(e){var n=G(this),o=t.substring(2);n.N||(n.N={}),n.N[t]&&this.removeEventListener(o,n.N[t]),this.__shady_addEventListener(o,e),n.N[t]=e},get:function(){var e=z(this);return e&&e.N&&e.N[t]},configurable:!0}}));var vn=ht({assignedNodes:function(t){if("slot"===this.localName){var e=this.__shady_getRootNode();return e&&Y(e)&&Qe(e),(e=z(this))&&(t&&t.flatten?e.T:e.assignedNodes)||[]}},addEventListener:function(t,e,n){if("slot"!==this.localName||"slotchange"===t)ae.call(this,t,e,n);else{"object"!=typeof n&&(n={capture:!!n});var o=this.__shady_parentNode;if(!o)throw Error("ShadyDOM cannot attach event to slot unless it has a `parentNode`");n.O=this,o.__shady_addEventListener(t,e,n)}},removeEventListener:function(t,e,n){if("slot"!==this.localName||"slotchange"===t)ue.call(this,t,e,n);else{"object"!=typeof n&&(n={capture:!!n});var o=this.__shady_parentNode;if(!o)throw Error("ShadyDOM cannot attach event to slot unless it has a `parentNode`");n.O=this,o.__shady_removeEventListener(t,e,n)}}}),_n=window.document,yn=ht({importNode:function(t,e){if(t.ownerDocument!==_n||"template"===t.localName)return this.__shady_native_importNode(t,e);var n=this.__shady_native_importNode(t,!1);if(e)for(t=t.__shady_firstChild;t;t=t.__shady_nextSibling)e=this.__shady_importNode(t,!0),n.__shady_appendChild(e);return n}}),bn=ht({addEventListener:ae.bind(window),removeEventListener:ue.bind(window)}),An={};Object.getOwnPropertyDescriptor(HTMLElement.prototype,"parentElement")&&(An.parentElement=De.parentElement),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"contains")&&(An.contains=De.contains),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"children")&&(An.children=Le.children),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"innerHTML")&&(An.innerHTML=Ue.innerHTML),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"className")&&(An.className=mn.className);var Sn={EventTarget:[pn],Node:[De,window.EventTarget?null:pn],Text:[hn],Element:[mn,Le,hn,!J.D||"innerHTML"in Element.prototype?Ue:null,window.HTMLSlotElement?null:vn],HTMLElement:[gn,An],HTMLSlotElement:[vn],DocumentFragment:[Ne,Oe],Document:[yn,Ne,Oe,Me],Window:[bn]},wn=J.D?null:["innerHTML","textContent"];function Cn(t){var e,n=t?null:wn,o={};for(e in Sn)o.ea=window[e]&&window[e].prototype,Sn[e].forEach(function(e){return function(o){return e.ea&&o&&pt(e.ea,o,t,n)}}(o)),o={ea:o.ea}}J.ka&&(window.ShadyDOM={inUse:J.ka,patch:function(t){return Vt(t),Wt(t),t},isShadyRoot:Y,enqueue:mt,flush:gt,flushInitial:function(t){!t.pa&&t.R&&Qe(t)},settings:J,filterMutations:function(t,e){var n=e.getRootNode();return t.map((function(t){var e=n===t.target.getRootNode();if(e&&t.addedNodes){if((e=Array.from(t.addedNodes).filter((function(t){return n===t.getRootNode()}))).length)return t=Object.create(t),Object.defineProperty(t,"addedNodes",{value:e,configurable:!0}),t}else if(e)return t})).filter((function(t){return t}))},observeChildren:function(t,e){var n=G(t);n.V||(n.V=new vt),n.V.$.add(e);var o=n.V;return{Ca:e,P:o,Ea:t,takeRecords:function(){return o.takeRecords()}}},unobserveChildren:function(t){var e=t&&t.P;e&&(e.$.delete(t.Ca),e.$.size||(G(t.Ea).V=null))},deferConnectionCallbacks:J.deferConnectionCallbacks,preferPerformance:J.preferPerformance,handlesDynamicScoping:!0,wrap:J.M?function(t){if(Y(t)||t instanceof cn)return t;var e=ln.get(t);return e||(e=new cn(t),ln.set(t,e)),e}:function(t){return t},Wrapper:cn,composedPath:function(t){return t.__composedPath||(t.__composedPath=Zt(t.target,!0)),t.__composedPath},noPatch:J.M,nativeMethods:It,nativeTree:kt},function(){var t=["dispatchEvent","addEventListener","removeEventListener"];window.EventTarget?Tt(window.EventTarget.prototype,t):(Tt(Node.prototype,t),Tt(Window.prototype,t)),Et?Tt(Node.prototype,"parentNode firstChild lastChild previousSibling nextSibling childNodes parentElement textContent".split(" ")):Pt(Node.prototype,{parentNode:{get:function(){return Dt.currentNode=this,Dt.parentNode()}},firstChild:{get:function(){return Dt.currentNode=this,Dt.firstChild()}},lastChild:{get:function(){return Dt.currentNode=this,Dt.lastChild()}},previousSibling:{get:function(){return Dt.currentNode=this,Dt.previousSibling()}},nextSibling:{get:function(){return Dt.currentNode=this,Dt.nextSibling()}},childNodes:{get:function(){var t=[];Dt.currentNode=this;for(var e=Dt.firstChild();e;)t.push(e),e=Dt.nextSibling();return t}},parentElement:{get:function(){return Ft.currentNode=this,Ft.parentNode()}},textContent:{get:function(){switch(this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:for(var t,e=document.createTreeWalker(this,NodeFilter.SHOW_TEXT,null,!1),n="";t=e.nextNode();)n+=t.nodeValue;return n;default:return this.nodeValue}},set:function(t){switch(null==t&&(t=""),this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:xt(this),(0<t.length||this.nodeType===Node.ELEMENT_NODE)&&this.__shady_native_insertBefore(document.createTextNode(t),void 0);break;default:this.nodeValue=t}}}}),Tt(Node.prototype,"appendChild insertBefore removeChild replaceChild cloneNode contains".split(" ")),Tt(HTMLElement.prototype,["parentElement","contains"]),t={firstElementChild:{get:function(){return Ft.currentNode=this,Ft.firstChild()}},lastElementChild:{get:function(){return Ft.currentNode=this,Ft.lastChild()}},children:{get:function(){var t=[];Ft.currentNode=this;for(var e=Ft.firstChild();e;)t.push(e),e=Ft.nextSibling();return ut(t)}},childElementCount:{get:function(){return this.children?this.children.length:0}}},Et?(Tt(Element.prototype,Ot),Tt(Element.prototype,["previousElementSibling","nextElementSibling","innerHTML","className"]),Tt(HTMLElement.prototype,["children","innerHTML","className"])):(Pt(Element.prototype,t),Pt(Element.prototype,{previousElementSibling:{get:function(){return Ft.currentNode=this,Ft.previousSibling()}},nextElementSibling:{get:function(){return Ft.currentNode=this,Ft.nextSibling()}},innerHTML:{get:function(){return Ct(this,ct)},set:function(t){var e="template"===this.localName?this.content:this;xt(e);var n=this.localName||"div";for((n=this.namespaceURI&&this.namespaceURI!==Lt.namespaceURI?Lt.createElementNS(this.namespaceURI,n):Lt.createElement(n)).innerHTML=t,t="template"===this.localName?n.content:n;n=t.__shady_native_firstChild;)e.__shady_native_insertBefore(n,void 0)}},className:{get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)}}})),Tt(Element.prototype,"setAttribute getAttribute hasAttribute removeAttribute focus blur".split(" ")),Tt(Element.prototype,Mt),Tt(HTMLElement.prototype,["focus","blur"]),window.HTMLTemplateElement&&Tt(window.HTMLTemplateElement.prototype,["innerHTML"]),Et?Tt(DocumentFragment.prototype,Ot):Pt(DocumentFragment.prototype,t),Tt(DocumentFragment.prototype,Mt),Et?(Tt(Document.prototype,Ot),Tt(Document.prototype,["activeElement"])):Pt(Document.prototype,t),Tt(Document.prototype,["importNode","getElementById"]),Tt(Document.prototype,Mt)}(),Cn("__shady_"),Object.defineProperty(document,"_activeElement",Me.activeElement),pt(Window.prototype,bn,"__shady_"),J.M||(Cn(),function(){if(!zt&&Object.getOwnPropertyDescriptor(Event.prototype,"isTrusted")){var t=function(){var t=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!0});this.__shady_dispatchEvent(t)};Element.prototype.click?Element.prototype.click=t:HTMLElement.prototype.click&&(HTMLElement.prototype.click=t)}}()),function(){for(var t in ne)window.__shady_native_addEventListener(t,(function(t){t.__target||(le(t),ie(t))}),!0)}(),window.Event=pe,window.CustomEvent=he,window.MouseEvent=de,window.ShadowRoot=Ge);var En=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));function In(t){var e=En.has(t);return t=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(t),!e&&t}function kn(t){var e=t.isConnected;if(void 0!==e)return e;for(;t&&!(t.__CE_isImportDocument||t instanceof Document);)t=t.parentNode||(window.ShadowRoot&&t instanceof ShadowRoot?t.host:void 0);return!(!t||!(t.__CE_isImportDocument||t instanceof Document))}function Rn(t,e){for(;e&&e!==t&&!e.nextSibling;)e=e.parentNode;return e&&e!==t?e.nextSibling:null}function Pn(t,e,n){n=void 0===n?new Set:n;for(var o=t;o;){if(o.nodeType===Node.ELEMENT_NODE){var r=o;e(r);var i=r.localName;if("link"===i&&"import"===r.getAttribute("rel")){if((o=r.import)instanceof Node&&!n.has(o))for(n.add(o),o=o.firstChild;o;o=o.nextSibling)Pn(o,e,n);o=Rn(t,r);continue}if("template"===i){o=Rn(t,r);continue}if(r=r.__CE_shadowRoot)for(r=r.firstChild;r;r=r.nextSibling)Pn(r,e,n)}o=o.firstChild?o.firstChild:Rn(t,o)}}function Tn(t,e,n){t[e]=n}function Dn(){this.a=new Map,this.u=new Map,this.c=[],this.f=[],this.b=!1}function Fn(t,e){t.b&&Pn(e,(function(e){return Ln(t,e)}))}function Ln(t,e){if(t.b&&!e.__CE_patched){e.__CE_patched=!0;for(var n=0;n<t.c.length;n++)t.c[n](e);for(n=0;n<t.f.length;n++)t.f[n](e)}}function xn(t,e){var n=[];for(Pn(e,(function(t){return n.push(t)})),e=0;e<n.length;e++){var o=n[e];1===o.__CE_state?t.connectedCallback(o):Mn(t,o)}}function Nn(t,e){var n=[];for(Pn(e,(function(t){return n.push(t)})),e=0;e<n.length;e++){var o=n[e];1===o.__CE_state&&t.disconnectedCallback(o)}}function On(t,e,n){var o=(n=void 0===n?{}:n).$a||new Set,r=n.fa||function(e){return Mn(t,e)},i=[];if(Pn(e,(function(e){if("link"===e.localName&&"import"===e.getAttribute("rel")){var n=e.import;n instanceof Node&&(n.__CE_isImportDocument=!0,n.__CE_hasRegistry=!0),n&&"complete"===n.readyState?n.__CE_documentLoadHandled=!0:e.addEventListener("load",(function(){var n=e.import;if(!n.__CE_documentLoadHandled){n.__CE_documentLoadHandled=!0;var i=new Set(o);i.delete(n),On(t,n,{$a:i,fa:r})}}))}else i.push(e)}),o),t.b)for(e=0;e<i.length;e++)Ln(t,i[e]);for(e=0;e<i.length;e++)r(i[e])}function Mn(t,e){if(void 0===e.__CE_state){var n=e.ownerDocument;if((n.defaultView||n.__CE_isImportDocument&&n.__CE_hasRegistry)&&(n=t.a.get(e.localName))){n.constructionStack.push(e);var o=n.constructorFunction;try{try{if(new o!==e)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{n.constructionStack.pop()}}catch(s){throw e.__CE_state=2,s}if(e.__CE_state=1,e.__CE_definition=n,n.attributeChangedCallback)for(n=n.observedAttributes,o=0;o<n.length;o++){var r=n[o],i=e.getAttribute(r);null!==i&&t.attributeChangedCallback(e,r,null,i,null)}kn(e)&&t.connectedCallback(e)}}}function qn(t){var e=document;this.b=t,this.a=e,this.P=void 0,On(this.b,this.a),"loading"===this.a.readyState&&(this.P=new MutationObserver(this.c.bind(this)),this.P.observe(this.a,{childList:!0,subtree:!0}))}function Un(t){t.P&&t.P.disconnect()}function Bn(){var t=this;this.a=this.w=void 0,this.b=new Promise((function(e){t.a=e,t.w&&e(t.w)}))}function Hn(t){this.c=!1,this.a=t,this.F=new Map,this.f=function(t){return t()},this.b=!1,this.u=[],this.aa=new qn(t)}Dn.prototype.connectedCallback=function(t){var e=t.__CE_definition;e.connectedCallback&&e.connectedCallback.call(t)},Dn.prototype.disconnectedCallback=function(t){var e=t.__CE_definition;e.disconnectedCallback&&e.disconnectedCallback.call(t)},Dn.prototype.attributeChangedCallback=function(t,e,n,o,r){var i=t.__CE_definition;i.attributeChangedCallback&&-1<i.observedAttributes.indexOf(e)&&i.attributeChangedCallback.call(t,e,n,o,r)},qn.prototype.c=function(t){var e=this.a.readyState;for("interactive"!==e&&"complete"!==e||Un(this),e=0;e<t.length;e++)for(var n=t[e].addedNodes,o=0;o<n.length;o++)On(this.b,n[o])},Bn.prototype.resolve=function(t){if(this.w)throw Error("Already resolved.");this.w=t,this.a&&this.a(t)},(t=Hn.prototype).wa=function(t,e){var n=this;if(!(e instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!In(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(this.a.a.get(t))throw Error("A custom element with name '"+t+"' has already been defined.");if(this.c)throw Error("A custom element is already being defined.");this.c=!0;try{var o=function(t){var e=r[t];if(void 0!==e&&!(e instanceof Function))throw Error("The '"+t+"' callback must be a function.");return e},r=e.prototype;if(!(r instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var i=o("connectedCallback"),s=o("disconnectedCallback"),a=o("adoptedCallback"),u=o("attributeChangedCallback"),c=e.observedAttributes||[]}catch(l){return}finally{this.c=!1}(function(t,e,n){t.a.set(e,n),t.u.set(n.constructorFunction,n)})(this.a,t,e={localName:t,constructorFunction:e,connectedCallback:i,disconnectedCallback:s,adoptedCallback:a,attributeChangedCallback:u,observedAttributes:c,constructionStack:[]}),this.u.push(e),this.b||(this.b=!0,this.f((function(){return function(t){if(!1!==t.b){t.b=!1;for(var e=t.u,n=[],o=new Map,r=0;r<e.length;r++)o.set(e[r].localName,[]);for(On(t.a,document,{fa:function(e){if(void 0===e.__CE_state){var r=e.localName,i=o.get(r);i?i.push(e):t.a.a.get(r)&&n.push(e)}}}),r=0;r<n.length;r++)Mn(t.a,n[r]);for(;0<e.length;){var i=e.shift();r=i.localName,i=o.get(i.localName);for(var s=0;s<i.length;s++)Mn(t.a,i[s]);(r=t.F.get(r))&&r.resolve(void 0)}}}(n)})))},t.fa=function(t){On(this.a,t)},t.get=function(t){if(t=this.a.a.get(t))return t.constructorFunction},t.xa=function(t){if(!In(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var e=this.F.get(t);return e||(e=new Bn,this.F.set(t,e),this.a.a.get(t)&&!this.u.some((function(e){return e.localName===t}))&&e.resolve(void 0)),e.b},t.Ra=function(t){Un(this.aa);var e=this.f;this.f=function(n){return t((function(){return e(n)}))}},window.CustomElementRegistry=Hn,Hn.prototype.define=Hn.prototype.wa,Hn.prototype.upgrade=Hn.prototype.fa,Hn.prototype.get=Hn.prototype.get,Hn.prototype.whenDefined=Hn.prototype.xa,Hn.prototype.polyfillWrapFlushCallback=Hn.prototype.Ra;var Kn=window.Document.prototype.createElement,jn=window.Document.prototype.createElementNS,Wn=window.Document.prototype.importNode,Vn=window.Document.prototype.prepend,Gn=window.Document.prototype.append,zn=window.DocumentFragment.prototype.prepend,Jn=window.DocumentFragment.prototype.append,Qn=window.Node.prototype.cloneNode,Xn=window.Node.prototype.appendChild,$n=window.Node.prototype.insertBefore,Yn=window.Node.prototype.removeChild,Zn=window.Node.prototype.replaceChild,to=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),eo=window.Element.prototype.attachShadow,no=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),oo=window.Element.prototype.getAttribute,ro=window.Element.prototype.setAttribute,io=window.Element.prototype.removeAttribute,so=window.Element.prototype.getAttributeNS,ao=window.Element.prototype.setAttributeNS,uo=window.Element.prototype.removeAttributeNS,co=window.Element.prototype.insertAdjacentElement,lo=window.Element.prototype.insertAdjacentHTML,po=window.Element.prototype.prepend,ho=window.Element.prototype.append,fo=window.Element.prototype.before,mo=window.Element.prototype.after,go=window.Element.prototype.replaceWith,vo=window.Element.prototype.remove,_o=window.HTMLElement,yo=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),bo=window.HTMLElement.prototype.insertAdjacentElement,Ao=window.HTMLElement.prototype.insertAdjacentHTML,So=new function(){};function wo(t,e,n){function o(e){return function(n){for(var o=[],r=0;r<arguments.length;++r)o[r]=arguments[r];r=[];for(var i=[],s=0;s<o.length;s++){var a=o[s];if(a instanceof Element&&kn(a)&&i.push(a),a instanceof DocumentFragment)for(a=a.firstChild;a;a=a.nextSibling)r.push(a);else r.push(a)}for(e.apply(this,o),o=0;o<i.length;o++)Nn(t,i[o]);if(kn(this))for(o=0;o<r.length;o++)(i=r[o])instanceof Element&&xn(t,i)}}void 0!==n.da&&(e.prepend=o(n.da)),void 0!==n.append&&(e.append=o(n.append))}var Co=window.customElements;if(!Co||Co.forcePolyfill||"function"!=typeof Co.define||"function"!=typeof Co.get){var Eo=new Dn;!function(){var t=Eo;window.HTMLElement=function(){function e(){var e=this.constructor,n=t.u.get(e);if(!n)throw Error("The custom element being constructed was not registered with `customElements`.");var o=n.constructionStack;if(0===o.length)return o=Kn.call(document,n.localName),Object.setPrototypeOf(o,e.prototype),o.__CE_state=1,o.__CE_definition=n,Ln(t,o),o;var r=o[n=o.length-1];if(r===So)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return o[n]=So,Object.setPrototypeOf(r,e.prototype),Ln(t,r),r}return e.prototype=_o.prototype,Object.defineProperty(e.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:e}),e}()}(),function(){var t=Eo;Tn(Document.prototype,"createElement",(function(e){if(this.__CE_hasRegistry){var n=t.a.get(e);if(n)return new n.constructorFunction}return e=Kn.call(this,e),Ln(t,e),e})),Tn(Document.prototype,"importNode",(function(e,n){return e=Wn.call(this,e,!!n),this.__CE_hasRegistry?On(t,e):Fn(t,e),e})),Tn(Document.prototype,"createElementNS",(function(e,n){if(this.__CE_hasRegistry&&(null===e||"http://www.w3.org/1999/xhtml"===e)){var o=t.a.get(n);if(o)return new o.constructorFunction}return e=jn.call(this,e,n),Ln(t,e),e})),wo(t,Document.prototype,{da:Vn,append:Gn})}(),wo(Eo,DocumentFragment.prototype,{da:zn,append:Jn}),function(){function t(t,n){Object.defineProperty(t,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(t){if(this.nodeType===Node.TEXT_NODE)n.set.call(this,t);else{var o=void 0;if(this.firstChild){var r=this.childNodes,i=r.length;if(0<i&&kn(this)){o=Array(i);for(var s=0;s<i;s++)o[s]=r[s]}}if(n.set.call(this,t),o)for(t=0;t<o.length;t++)Nn(e,o[t])}}})}var e=Eo;Tn(Node.prototype,"insertBefore",(function(t,n){if(t instanceof DocumentFragment){var o=Array.prototype.slice.apply(t.childNodes);if(t=$n.call(this,t,n),kn(this))for(n=0;n<o.length;n++)xn(e,o[n]);return t}return o=kn(t),n=$n.call(this,t,n),o&&Nn(e,t),kn(this)&&xn(e,t),n})),Tn(Node.prototype,"appendChild",(function(t){if(t instanceof DocumentFragment){var n=Array.prototype.slice.apply(t.childNodes);if(t=Xn.call(this,t),kn(this))for(var o=0;o<n.length;o++)xn(e,n[o]);return t}return n=kn(t),o=Xn.call(this,t),n&&Nn(e,t),kn(this)&&xn(e,t),o})),Tn(Node.prototype,"cloneNode",(function(t){return t=Qn.call(this,!!t),this.ownerDocument.__CE_hasRegistry?On(e,t):Fn(e,t),t})),Tn(Node.prototype,"removeChild",(function(t){var n=kn(t),o=Yn.call(this,t);return n&&Nn(e,t),o})),Tn(Node.prototype,"replaceChild",(function(t,n){if(t instanceof DocumentFragment){var o=Array.prototype.slice.apply(t.childNodes);if(t=Zn.call(this,t,n),kn(this))for(Nn(e,n),n=0;n<o.length;n++)xn(e,o[n]);return t}o=kn(t);var r=Zn.call(this,t,n),i=kn(this);return i&&Nn(e,n),o&&Nn(e,t),i&&xn(e,t),r})),to&&to.get?t(Node.prototype,to):function(t,e){t.b=!0,t.c.push(e)}(e,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var t=[],e=0;e<this.childNodes.length;e++){var n=this.childNodes[e];n.nodeType!==Node.COMMENT_NODE&&t.push(n.textContent)}return t.join("")},set:function(t){for(;this.firstChild;)Yn.call(this,this.firstChild);null!=t&&""!==t&&Xn.call(this,document.createTextNode(t))}})}))}(),function(){function t(t,e){Object.defineProperty(t,"innerHTML",{enumerable:e.enumerable,configurable:!0,get:e.get,set:function(t){var n=this,r=void 0;if(kn(this)&&(r=[],Pn(this,(function(t){t!==n&&r.push(t)}))),e.set.call(this,t),r)for(var i=0;i<r.length;i++){var s=r[i];1===s.__CE_state&&o.disconnectedCallback(s)}return this.ownerDocument.__CE_hasRegistry?On(o,this):Fn(o,this),t}})}function e(t,e){Tn(t,"insertAdjacentElement",(function(t,n){var r=kn(n);return t=e.call(this,t,n),r&&Nn(o,n),kn(t)&&xn(o,n),t}))}function n(t,e){function n(t,e){for(var n=[];t!==e;t=t.nextSibling)n.push(t);for(e=0;e<n.length;e++)On(o,n[e])}Tn(t,"insertAdjacentHTML",(function(t,o){if("beforebegin"===(t=t.toLowerCase())){var r=this.previousSibling;e.call(this,t,o),n(r||this.parentNode.firstChild,this)}else if("afterbegin"===t)r=this.firstChild,e.call(this,t,o),n(this.firstChild,r);else if("beforeend"===t)r=this.lastChild,e.call(this,t,o),n(r||this.firstChild,null);else{if("afterend"!==t)throw new SyntaxError("The value provided ("+String(t)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");r=this.nextSibling,e.call(this,t,o),n(this.nextSibling,r)}}))}var o=Eo;eo&&Tn(Element.prototype,"attachShadow",(function(t){t=eo.call(this,t);var e=o;if(e.b&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.c.length;n++)e.c[n](t)}return this.__CE_shadowRoot=t})),no&&no.get?t(Element.prototype,no):yo&&yo.get?t(HTMLElement.prototype,yo):function(t,e){t.b=!0,t.f.push(e)}(o,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){return Qn.call(this,!0).innerHTML},set:function(t){var e="template"===this.localName,n=e?this.content:this,o=jn.call(document,this.namespaceURI,this.localName);for(o.innerHTML=t;0<n.childNodes.length;)Yn.call(n,n.childNodes[0]);for(t=e?o.content:o;0<t.childNodes.length;)Xn.call(n,t.childNodes[0])}})})),Tn(Element.prototype,"setAttribute",(function(t,e){if(1!==this.__CE_state)return ro.call(this,t,e);var n=oo.call(this,t);ro.call(this,t,e),e=oo.call(this,t),o.attributeChangedCallback(this,t,n,e,null)})),Tn(Element.prototype,"setAttributeNS",(function(t,e,n){if(1!==this.__CE_state)return ao.call(this,t,e,n);var r=so.call(this,t,e);ao.call(this,t,e,n),n=so.call(this,t,e),o.attributeChangedCallback(this,e,r,n,t)})),Tn(Element.prototype,"removeAttribute",(function(t){if(1!==this.__CE_state)return io.call(this,t);var e=oo.call(this,t);io.call(this,t),null!==e&&o.attributeChangedCallback(this,t,e,null,null)})),Tn(Element.prototype,"removeAttributeNS",(function(t,e){if(1!==this.__CE_state)return uo.call(this,t,e);var n=so.call(this,t,e);uo.call(this,t,e);var r=so.call(this,t,e);n!==r&&o.attributeChangedCallback(this,e,n,r,t)})),bo?e(HTMLElement.prototype,bo):co?e(Element.prototype,co):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),Ao?n(HTMLElement.prototype,Ao):lo?n(Element.prototype,lo):console.warn("Custom Elements: `Element#insertAdjacentHTML` was not patched."),wo(o,Element.prototype,{da:po,append:ho}),function(t){function e(e){return function(n){for(var o=[],r=0;r<arguments.length;++r)o[r]=arguments[r];r=[];for(var i=[],s=0;s<o.length;s++){var a=o[s];if(a instanceof Element&&kn(a)&&i.push(a),a instanceof DocumentFragment)for(a=a.firstChild;a;a=a.nextSibling)r.push(a);else r.push(a)}for(e.apply(this,o),o=0;o<i.length;o++)Nn(t,i[o]);if(kn(this))for(o=0;o<r.length;o++)(i=r[o])instanceof Element&&xn(t,i)}}var n=Element.prototype;void 0!==fo&&(n.before=e(fo)),void 0!==fo&&(n.after=e(mo)),void 0!==go&&Tn(n,"replaceWith",(function(e){for(var n=[],o=0;o<arguments.length;++o)n[o]=arguments[o];o=[];for(var r=[],i=0;i<n.length;i++){var s=n[i];if(s instanceof Element&&kn(s)&&r.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)o.push(s);else o.push(s)}for(i=kn(this),go.apply(this,n),n=0;n<r.length;n++)Nn(t,r[n]);if(i)for(Nn(t,this),n=0;n<o.length;n++)(r=o[n])instanceof Element&&xn(t,r)})),void 0!==vo&&Tn(n,"remove",(function(){var e=kn(this);vo.call(this),e&&Nn(t,this)}))}(o)}(),document.__CE_hasRegistry=!0;var Io=new Hn(Eo);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:Io})}function ko(){this.end=this.start=0,this.rules=this.parent=this.previous=null,this.cssText=this.parsedCssText="",this.atRule=!1,this.type=0,this.parsedSelector=this.selector=this.keyframesName=""}function Ro(t){var e=Po,n=t=t.replace(Oo,"").replace(Mo,""),o=new ko;o.start=0,o.end=n.length;for(var r=o,i=0,s=n.length;i<s;i++)if("{"===n[i]){r.rules||(r.rules=[]);var a=r,u=a.rules[a.rules.length-1]||null;(r=new ko).start=i+1,r.parent=a,r.previous=u,a.rules.push(r)}else"}"===n[i]&&(r.end=i+1,r=r.parent||o);return e(o,t)}function Po(t,e){var n=e.substring(t.start,t.end-1);if(t.parsedCssText=t.cssText=n.trim(),t.parent&&(n=(n=(n=function(t){return t.replace(/\\([0-9a-f]{1,6})\s/gi,(function(t,e){for(e=6-(t=e).length;e--;)t="0"+t;return"\\"+t}))}(n=e.substring(t.previous?t.previous.end:t.parent.start,t.start-1))).replace(jo," ")).substring(n.lastIndexOf(";")+1),n=t.parsedSelector=t.selector=n.trim(),t.atRule=0===n.indexOf("@"),t.atRule?0===n.indexOf("@media")?t.type=xo:n.match(Ko)&&(t.type=Lo,t.keyframesName=t.selector.split(jo).pop()):t.type=0===n.indexOf("--")?No:Fo),n=t.rules)for(var o=0,r=n.length,i=void 0;o<r&&(i=n[o]);o++)Po(i,e);return t}var To,Do,Fo=1,Lo=7,xo=4,No=1e3,Oo=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,Mo=/@import[^;]*;/gim,qo=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,Uo=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,Bo=/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,Ho=/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,Ko=/^@[^\s]*keyframes/,jo=/\s+/g,Wo=!(window.ShadyDOM&&window.ShadyDOM.inUse);function Vo(t){To=(!t||!t.shimcssproperties)&&(Wo||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.cssBuild&&(Do=window.ShadyCSS.cssBuild);var Go=!(!window.ShadyCSS||!window.ShadyCSS.disableRuntime);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?To=window.ShadyCSS.nativeCss:window.ShadyCSS?(Vo(window.ShadyCSS),window.ShadyCSS=void 0):Vo(window.WebComponents&&window.WebComponents.flags);var zo=To,Jo=Do,Qo=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,Xo=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,$o=/(--[\w-]+)\s*([:,;)]|$)/gi,Yo=/(animation\s*:)|(animation-name\s*:)/,Zo=/@media\s(.*)/,tr=/\{[^}]*\}/g,er=new Set;function nr(t,e){return t?("string"==typeof t&&(t=Ro(t)),e&&ir(t,e),function t(e,n,o){o=void 0===o?"":o;var r="";if(e.cssText||e.rules){var i,s=e.rules;if((i=s)&&(i=!((i=s[0])&&i.selector&&0===i.selector.indexOf("--"))),i){i=0;for(var a=s.length,u=void 0;i<a&&(u=s[i]);i++)r=t(u,n,r)}else(r=(n=n?e.cssText:(n=(n=e.cssText).replace(qo,"").replace(Uo,"")).replace(Bo,"").replace(Ho,"")).trim())&&(r="  "+r+"\n")}return r&&(e.selector&&(o+=e.selector+" {\n"),o+=r,e.selector&&(o+="}\n\n")),o}(t,zo)):""}function or(t){return!t.__cssRules&&t.textContent&&(t.__cssRules=Ro(t.textContent)),t.__cssRules||null}function rr(t){return!!t.parent&&t.parent.type===Lo}function ir(t,e,n,o){if(t){var r=!1,i=t.type;if(o&&i===xo){var s=t.selector.match(Zo);s&&(window.matchMedia(s[1]).matches||(r=!0))}if(i===Fo?e(t):n&&i===Lo?n(t):i===No&&(r=!0),(t=t.rules)&&!r)for(r=0,i=t.length,s=void 0;r<i&&(s=t[r]);r++)ir(s,e,n,o)}}function sr(t,e,n,o){var r=document.createElement("style");return e&&r.setAttribute("scope",e),r.textContent=t,cr(r,n,o),r}var ar=null;function ur(t){t=document.createComment(" Shady DOM styles for "+t+" ");var e=document.head;return e.insertBefore(t,(ar?ar.nextSibling:null)||e.firstChild),ar=t}function cr(t,e,n){(e=e||document.head).insertBefore(t,n&&n.nextSibling||e.firstChild),ar?t.compareDocumentPosition(ar)===Node.DOCUMENT_POSITION_PRECEDING&&(ar=t):ar=t}function lr(t,e){for(var n=0,o=t.length;e<o;e++)if("("===t[e])n++;else if(")"===t[e]&&0==--n)return e;return-1}function pr(t,e){Wo?t.setAttribute("class",e):window.ShadyDOM.nativeMethods.setAttribute.call(t,"class",e)}var hr=window.ShadyDOM&&window.ShadyDOM.wrap||function(t){return t};function dr(t){var e=t.localName,n="";return e?-1<e.indexOf("-")||(n=e,e=t.getAttribute&&t.getAttribute("is")||""):(e=t.is,n=t.extends),{is:e,X:n}}function fr(t){for(var e=[],n="",o=0;0<=o&&o<t.length;o++)if("("===t[o]){var r=lr(t,o);n+=t.slice(o,r+1),o=r}else","===t[o]?(e.push(n),n=""):n+=t[o];return n&&e.push(n),e}function mr(t){if(void 0!==Jo)return Jo;if(void 0===t.__cssBuild){var e=t.getAttribute("css-build");if(e)t.__cssBuild=e;else{if(""!==(e=(e="template"===t.localName?t.content.firstChild:t.firstChild)instanceof Comment&&"css-build"===(e=e.textContent.trim().split(":"))[0]?e[1]:"")){var n="template"===t.localName?t.content.firstChild:t.firstChild;n.parentNode.removeChild(n)}t.__cssBuild=e}}return t.__cssBuild||""}function gr(t){return!(""===(t=void 0===t?"":t)||!zo)&&(Wo?"shadow"===t:"shady"===t)}function vr(){}function _r(t,e,n){var o;if(e.nodeType===Node.ELEMENT_NODE&&n(e),o="template"===e.localName?(e.content||e._content||e).childNodes:e.children||e.childNodes)for(e=0;e<o.length;e++)_r(t,o[e],n)}function yr(t,e,n){if(e)if(t.classList)n?(t.classList.remove("style-scope"),t.classList.remove(e)):(t.classList.add("style-scope"),t.classList.add(e));else if(t.getAttribute){var o=t.getAttribute("class");n?o&&pr(t,e=o.replace("style-scope","").replace(e,"")):pr(t,(o?o+" ":"")+"style-scope "+e)}}function br(t,e,n){_r(Or,t,(function(t){yr(t,e,!0),yr(t,n)}))}function Ar(t,e){_r(Or,t,(function(t){yr(t,e||"",!0)}))}function Sr(t,e,n,o,r){var i=Or;return""===(r=void 0===r?"":r)&&(r=Wo||"shady"===(void 0===o?"":o)?nr(e,n):function(t,e,n,o,r){var i=wr(n,o);return n=n?"."+n:"",nr(e,(function(e){e.c||(e.selector=e.C=Cr(t,e,t.b,n,i),e.c=!0),r&&r(e,n,i)}))}(i,e,(t=dr(t)).is,t.X,n)+"\n\n"),r.trim()}function wr(t,e){return e?"[is="+t+"]":t}function Cr(t,e,n,o,r){var i=fr(e.selector);if(!rr(e)){e=0;for(var s=i.length,a=void 0;e<s&&(a=i[e]);e++)i[e]=n.call(t,a,o,r)}return i.filter((function(t){return!!t})).join(",")}function Er(t){return t.replace(Rr,(function(t,e,n){return-1<n.indexOf("+")?n=n.replace(/\+/g,"___"):-1<n.indexOf("___")&&(n=n.replace(/___/g,"+")),":"+e+"("+n+")"}))}function Ir(t,e){t=t.split(/(\[.+?\])/);for(var n=[],o=0;o<t.length;o++)if(1==o%2)n.push(t[o]);else{var r=t[o];""===r&&o===t.length-1||((r=r.split(":"))[0]+=e,n.push(r.join(":")))}return n.join("")}function kr(t){":root"===t.selector&&(t.selector="html")}vr.prototype.b=function(t,e,n){var o=!1;t=t.trim();var r=Rr.test(t);r&&(t=Er(t=t.replace(Rr,(function(t,e,n){return":"+e+"("+n.replace(/\s/g,"")+")"}))));var i=Nr.test(t);if(i){var s=function(t){for(var e,n=[];e=t.match(Nr);){var o=e.index,r=lr(t,o);if(-1===r)throw Error(e.input+" selector missing ')'");e=t.slice(o,r+1),t=t.replace(e,"\ue000"),n.push(e)}return{na:t,matches:n}}(t);t=s.na,s=s.matches}return t=(t=t.replace(Dr,":host $1")).replace(Pr,(function(t,r,i){return o||(t=function(t,e,n,o){var r=t.indexOf("::slotted");if(0<=t.indexOf(":host")?t=function(t,e){var n=t.match(Fr);return(n=n&&n[2].trim()||"")?n[0].match(Tr)?t.replace(Fr,(function(t,n,o){return e+o})):n.split(Tr)[0]===e?n:"should_not_match":t.replace(":host",e)}(t,o):0!==r&&(t=n?Ir(t,n):t),n=!1,0<=r&&(e="",n=!0),n){var i=!0;n&&(t=t.replace(Lr,(function(t,e){return" > "+e})))}return{value:t,Ha:e,stop:i}}(i,r,e,n),o=o||t.stop,r=t.Ha,i=t.value),r+i})),i&&(t=function(t,e){var n=t.split("\ue000");return e.reduce((function(t,e,o){return t+e+n[o+1]}),n[0])}(t,s)),r&&(t=Er(t)),t.replace(xr,(function(t,e,n,o){return'[dir="'+n+'"] '+e+o+", "+e+'[dir="'+n+'"]'+o}))},vr.prototype.c=function(t){return t.match(":host")?"":t.match("::slotted")?this.b(t,":not(.style-scope)"):Ir(t.trim(),":not(.style-scope)")},e.Object.defineProperties(vr.prototype,{a:{configurable:!0,enumerable:!0,get:function(){return"style-scope"}}});var Rr=/:(nth[-\w]+)\(([^)]+)\)/,Pr=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=[])+)/g,Tr=/[[.:#*]/,Dr=/^(::slotted)/,Fr=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,Lr=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,xr=/(.*):dir\((?:(ltr|rtl))\)(.*)/,Nr=/:(?:matches|any|-(?:webkit|moz)-any)/,Or=new vr;function Mr(t,e,n,o,r){this.L=t||null,this.b=e||null,this.la=n||[],this.G=null,this.cssBuild=r||"",this.X=o||"",this.a=this.H=this.K=null}function qr(t){return t?t.__styleInfo:null}function Ur(t,e){return t.__styleInfo=e}function Br(t){var e=this.matches||this.matchesSelector||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector;return e&&e.call(this,t)}Mr.prototype._getStyleRules=Mr.prototype.c=function(){return this.L};var Hr=navigator.userAgent.match("Trident");function Kr(){}function jr(t){if(!t.A){var e={},n={};Wr(t,n)&&(e.J=n,t.rules=null),e.cssText=t.parsedCssText.replace(tr,"").replace(Qo,""),t.A=e}}function Wr(t,e){var n=t.A;if(!n){n=t.parsedCssText;for(var o;t=Qo.exec(n);)"inherit"===(o=(t[2]||t[3]).trim())&&"unset"===o||(e[t[1].trim()]=o),o=!0;return o}if(n.J)return Object.assign(e,n.J),!0}function Vr(t,e,n){return e&&(e=0<=e.indexOf(";")?Gr(t,e,n):function t(e,n){var o=e.indexOf("var(");if(-1===o)return n(e,"","","");var r=lr(e,o+3),i=e.substring(o+4,r);return o=e.substring(0,o),e=t(e.substring(r+1),n),-1===(r=i.indexOf(","))?n(o,i.trim(),"",e):n(o,i.substring(0,r).trim(),i.substring(r+1).trim(),e)}(e,(function(e,o,r,i){return o?((o=Vr(t,n[o],n))&&"initial"!==o?"apply-shim-inherit"===o&&(o="inherit"):o=Vr(t,n[r]||r,n)||r,e+(o||"")+i):e+i}))),e&&e.trim()||""}function Gr(t,e,n){e=e.split(";");for(var o,r,i=0;i<e.length;i++)if(o=e[i]){if(Xo.lastIndex=0,r=Xo.exec(o))o=Vr(t,n[r[1]],n);else if(-1!==(r=o.indexOf(":"))){var s=o.substring(r);s=Vr(t,s=s.trim(),n)||s,o=o.substring(0,r)+s}e[i]=o&&o.lastIndexOf(";")===o.length-1?o.slice(0,-1):o||""}return e.join(";")}function zr(t){return function(e){return e.replace(t.f,t.a)}}function Jr(t,e){var n=Qr,o=or(t);t.textContent=nr(o,(function(t){var o=t.cssText=t.parsedCssText;t.A&&t.A.cssText&&(o=o.replace(qo,"").replace(Uo,""),t.cssText=Gr(n,o,e))}))}e.Object.defineProperties(Kr.prototype,{a:{configurable:!0,enumerable:!0,get:function(){return"x-scope"}}});var Qr=new Kr,Xr={},$r=window.customElements;if($r&&!Wo&&!Go){var Yr=$r.define;$r.define=function(t,e,n){Xr[t]||(Xr[t]=ur(t)),Yr.call($r,t,e,n)}}function Zr(){this.cache={}}function ti(){}Zr.prototype.store=function(t,e,n,o){var r=this.cache[t]||[];r.push({J:e,styleElement:n,H:o}),100<r.length&&r.shift(),this.cache[t]=r};var ei=new RegExp(Or.a+"\\s*([^\\s]*)");function ni(t){return(t=(t.classList&&t.classList.value?t.classList.value:t.getAttribute("class")||"").match(ei))?t[1]:""}function oi(t){var e=hr(t).getRootNode();return e===t||e===t.ownerDocument?"":(t=e.host)?dr(t).is:""}function ri(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.target!==document.documentElement&&n.target!==document.head)for(var o=0;o<n.addedNodes.length;o++){var r=n.addedNodes[o];if(r.nodeType===Node.ELEMENT_NODE){var i=r.getRootNode(),s=ni(r);if(s&&i===r.ownerDocument&&("style"!==r.localName&&"template"!==r.localName||""===mr(r)))Ar(r,s);else if(i instanceof ShadowRoot)for((i=oi(r))!==s&&br(r,s,i),r=window.ShadyDOM.nativeMethods.querySelectorAll.call(r,":not(."+Or.a+")"),s=0;s<r.length;s++){var a=oi(i=r[s]);a&&yr(i,a)}}}}}if(!(Wo||window.ShadyDOM&&window.ShadyDOM.handlesDynamicScoping)){var ii=new MutationObserver(ri),si=function(t){ii.observe(t,{childList:!0,subtree:!0})};if(window.customElements&&!window.customElements.polyfillWrapFlushCallback)si(document);else{var ai=function(){si(document.body)};window.HTMLImports?window.HTMLImports.whenReady(ai):requestAnimationFrame((function(){if("loading"===document.readyState){var t=function(){ai(),document.removeEventListener("readystatechange",t)};document.addEventListener("readystatechange",t)}else ai()}))}ti=function(){ri(ii.takeRecords())}}var ui=ti,ci={},li=Promise.resolve();function pi(t){(t=ci[t])&&(t._applyShimCurrentVersion=t._applyShimCurrentVersion||0,t._applyShimValidatingVersion=t._applyShimValidatingVersion||0,t._applyShimNextVersion=(t._applyShimNextVersion||0)+1)}function hi(t){return t._applyShimCurrentVersion===t._applyShimNextVersion}var di={},fi=new Zr;function mi(){this.F={},this.c=document.documentElement;var t=new ko;t.rules=[],this.f=Ur(this.c,new Mr(t)),this.u=!1,this.b=this.a=null}function gi(t){var e=dr(t),n=e.is;e=e.X;var o=Xr[n]||null,r=ci[n];if(r)return Ur(t,e=new Mr(n=r._styleAst,o,r.a,e,r=mr(r))),e}function vi(t){!t.a&&window.ShadyCSS&&window.ShadyCSS.ApplyShim&&(t.a=window.ShadyCSS.ApplyShim,t.a.invalidCallback=pi),function(t){!t.b&&window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface&&(t.b=window.ShadyCSS.CustomStyleInterface,t.b.transformCallback=function(e){t.va(e)},t.b.validateCallback=function(){requestAnimationFrame((function(){(t.b.enqueued||t.u)&&t.flushCustomStyles()}))})}(t)}function _i(t,e,n){var o=dr(e).is;if(n.G){var r,i=n.G;for(r in i)null===r?e.style.removeProperty(r):e.style.setProperty(r,i[r])}!(i=ci[o])&&e!==t.c||i&&""!==mr(i)||!i||!i._style||hi(i)||((hi(i)||i._applyShimValidatingVersion!==i._applyShimNextVersion)&&(vi(t),t.a&&t.a.transformRules(i._styleAst,o),i._style.textContent=Sr(e,n.L),function(t){t._applyShimValidatingVersion=t._applyShimNextVersion,t._validating||(t._validating=!0,li.then((function(){t._applyShimCurrentVersion=t._applyShimNextVersion,t._validating=!1})))}(i)),Wo&&(t=e.shadowRoot)&&(t=t.querySelector("style"))&&(t.textContent=Sr(e,n.L)),n.L=i._styleAst)}function yi(t,e){return(e=hr(e).getRootNode().host)?qr(e)||gi(e)?e:yi(t,e):t.c}function bi(t,e,n){var o=yi(t,e),r=qr(o),i=r.K;for(var s in o===t.c||i||(bi(t,o,r),i=r.K),t=Object.create(i||null),o=function(t,e,n){var o={},r={};return ir(e,(function(e){!function(t,e,n,o){if(e.A||jr(e),e.A.J){var r=dr(t);t=r.is,r=r.X,r=t?wr(t,r):"html";var i=e.parsedSelector,s=":host > *"===i||"html"===i,a=0===i.indexOf(":host")&&!s;"shady"===n&&(a=!(s=i===r+" > *."+r||-1!==i.indexOf("html"))&&0===i.indexOf(r)),(s||a)&&(n=r,a&&(e.C||(e.C=Cr(Or,e,Or.b,t?"."+t:"",r)),n=e.C||r),o({na:n,Oa:a,bb:s}))}}(t,e,n,(function(n){Br.call(t._element||t,n.na)&&Wr(e,n.Oa?o:r)}))}),null,!0),{Ua:r,Ma:o}}(e,n.L,n.cssBuild),e=function(t,e){var n={},o=[];return ir(t,(function(t){t.A||jr(t);var r=t.C||t.parsedSelector;e&&t.A.J&&r&&Br.call(e,r)&&(Wr(t,n),t=t.index,r=parseInt(t/32,10),o[r]=(o[r]||0)|1<<t%32)}),null,!0),{J:n,key:o}}(r.L,e).J,Object.assign(t,o.Ma,e,o.Ua),e=n.G)((r=e[s])||0===r)&&(t[s]=r);for(s=Qr,e=Object.getOwnPropertyNames(t),r=0;r<e.length;r++)t[o=e[r]]=Vr(s,t[o],t);n.K=t}(t=mi.prototype).flush=function(){ui()},t.Ka=function(t){return or(t)},t.Ya=function(t){return nr(t)},t.prepareTemplate=function(t,e,n){this.prepareTemplateDom(t,e),this.prepareTemplateStyles(t,e,n)},t.prepareTemplateStyles=function(t,e,n){if(!t._prepared&&!Go){Wo||Xr[e]||(Xr[e]=ur(e)),t._prepared=!0,t.name=e,t.extends=n,ci[e]=t;var o=mr(t),r=gr(o);n={is:e,extends:n};for(var i=[],s=t.content.querySelectorAll("style"),a=0;a<s.length;a++){var u=s[a];if(u.hasAttribute("shady-unscoped")){if(!Wo){var c=u.textContent;er.has(c)||(er.add(c),c=u.cloneNode(!0),document.head.appendChild(c)),u.parentNode.removeChild(u)}}else i.push(u.textContent),u.parentNode.removeChild(u)}i=i.join("").trim()+(di[e]||""),vi(this),r||((s=!o)&&(s=Xo.test(i)||Qo.test(i),Xo.lastIndex=0,Qo.lastIndex=0),a=Ro(i),s&&zo&&this.a&&this.a.transformRules(a,e),t._styleAst=a),s=[],zo||(s=function(t){var e={},n=[],o=0;for(var r in ir(t,(function(t){jr(t),t.index=o++,t=t.A.cssText;for(var n;n=$o.exec(t);)":"!==n[2]&&(e[n[1]]=!0)}),(function(t){n.push(t)})),t.b=n,t=[],e)t.push(r);return t}(t._styleAst)),s.length&&!zo||(a=Wo?t.content:null,e=Xr[e]||null,o=(o=Sr(n,t._styleAst,null,o,r?i:"")).length?sr(o,n.is,a,e):null,t._style=o),t.a=s}},t.Sa=function(t,e){di[e]=t.join(" ")},t.prepareTemplateDom=function(t,e){if(!Go){var n=mr(t);Wo||"shady"===n||t._domPrepared||(t._domPrepared=!0,function(t,e){_r(Or,t,(function(t){yr(t,e||"")}))}(t.content,e))}},t.flushCustomStyles=function(){if(!Go&&(vi(this),this.b)){var t=this.b.processStyles();if(this.b.enqueued&&!gr(this.f.cssBuild)){if(zo){if(!this.f.cssBuild)for(var e=0;e<t.length;e++){var n=this.b.getStyleForCustomStyle(t[e]);if(n&&zo&&this.a){var o=or(n);vi(this),this.a.transformRules(o),n.textContent=nr(o)}}}else{for(bi(this,this.c,this.f),e=0;e<t.length;e++)(n=this.b.getStyleForCustomStyle(t[e]))&&Jr(n,this.f.K);this.u&&this.styleDocument()}this.b.enqueued=!1}}},t.styleElement=function(t,e){if(Go){if(e){qr(t)||Ur(t,new Mr(null));var n=qr(t);n.G=n.G||{},Object.assign(n.G,e),_i(this,t,n)}}else if(n=qr(t)||gi(t))if(t!==this.c&&(this.u=!0),e&&(n.G=n.G||{},Object.assign(n.G,e)),zo)_i(this,t,n);else if(this.flush(),bi(this,t,n),n.la&&n.la.length){var o;e=dr(t).is;t:{if(o=fi.cache[e])for(var r=o.length-1;0<=r;r--){var i=o[r];e:{for(var s=n.la,a=0;a<s.length;a++){var u=s[a];if(i.J[u]!==n.K[u]){s=!1;break e}}s=!0}if(s){o=i;break t}}o=void 0}s=o?o.styleElement:null,r=n.H,(i=o&&o.H)||(i=e+"-"+(i=this.F[e]=(this.F[e]||0)+1)),n.H=i,i=n.H,a=Qr,a=s?s.textContent||"":function(t,e,n,o){var r=dr(e),i=wr(r.is,r.X),s=new RegExp("(?:^|[^.#[:])"+(e.extends?"\\"+i.slice(0,-1)+"\\]":i)+"($|[.:[\\s>+~])"),a=qr(e);r=a.L,a=a.cssBuild;var u=function(t,e){t=t.b;var n={};if(!Wo&&t)for(var o=0,r=t[o];o<t.length;r=t[++o]){var i=r,s=e;i.f=new RegExp("\\b"+i.keyframesName+"(?!\\B|-)","g"),i.a=i.keyframesName+"-"+s,i.C=i.C||i.selector,i.selector=i.C.replace(i.keyframesName,i.a),n[r.keyframesName]=zr(r)}return n}(r,o);return Sr(e,r,(function(e){var r="";if(e.A||jr(e),e.A.cssText&&(r=Gr(t,e.A.cssText,n)),e.cssText=r,!Wo&&!rr(e)&&e.cssText){var a=r=e.cssText;if(null==e.ra&&(e.ra=Yo.test(r)),e.ra)if(null==e.ba)for(var c in e.ba=[],u)r!==(a=(a=u[c])(r))&&(r=a,e.ba.push(c));else{for(c=0;c<e.ba.length;++c)r=(a=u[e.ba[c]])(r);a=r}e.cssText=a,e.C=e.C||e.selector,r="."+o,a=0;for(var l=(c=fr(e.C)).length,p=void 0;a<l&&(p=c[a]);a++)c[a]=p.match(s)?p.replace(i,r):r+" "+p;e.selector=c.join(",")}}),a)}(a,t,n.K,i);var c=(u=qr(t)).a;c&&!Wo&&c!==s&&(c._useCount--,0>=c._useCount&&c.parentNode&&c.parentNode.removeChild(c)),Wo?u.a?(u.a.textContent=a,s=u.a):a&&(s=sr(a,i,t.shadowRoot,u.b)):s?s.parentNode||(Hr&&-1<a.indexOf("@media")&&(s.textContent=a),cr(s,null,u.b)):a&&(s=sr(a,i,null,u.b)),s&&(s._useCount=s._useCount||0,u.a!=s&&s._useCount++,u.a=s),i=s,Wo||(s=n.H,u=a=t.getAttribute("class")||"",r&&(u=a.replace(new RegExp("\\s*x-scope\\s*"+r+"\\s*","g")," ")),a!==(u+=(u?" ":"")+"x-scope "+s)&&pr(t,u)),o||fi.store(e,n.K,i,n.H)}},t.styleDocument=function(t){this.styleSubtree(this.c,t)},t.styleSubtree=function(t,e){var n=hr(t),o=n.shadowRoot;if((o||t===this.c)&&this.styleElement(t,e),t=o&&(o.children||o.childNodes))for(n=0;n<t.length;n++)this.styleSubtree(t[n]);else if(n=n.children||n.childNodes)for(t=0;t<n.length;t++)this.styleSubtree(n[t])},t.va=function(t){var e=this,n=mr(t);if(n!==this.f.cssBuild&&(this.f.cssBuild=n),!gr(n)){var o=or(t);ir(o,(function(t){if(Wo)kr(t);else{var o=Or;t.selector=t.parsedSelector,kr(t),t.selector=t.C=Cr(o,t,o.c,void 0,void 0)}zo&&""===n&&(vi(e),e.a&&e.a.transformRule(t))})),zo?t.textContent=nr(o):this.f.L.rules.push(o)}},t.getComputedStyleValue=function(t,e){var n;return zo||(n=(qr(t)||qr(yi(this,t))).K[e]),(n=n||window.getComputedStyle(t).getPropertyValue(e))?n.trim():""},t.Xa=function(t,e){var n=hr(t).getRootNode();if(e=e?e.split(/\s/):[],!(n=n.host&&n.host.localName)){var o=t.getAttribute("class");if(o){o=o.split(/\s/);for(var r=0;r<o.length;r++)if(o[r]===Or.a){n=o[r+1];break}}}n&&e.push(Or.a,n),zo||(n=qr(t))&&n.H&&e.push(Qr.a,n.H),pr(t,e.join(" "))},t.Fa=function(t){return qr(t)},t.Wa=function(t,e){yr(t,e)},t.Za=function(t,e){yr(t,e,!0)},t.Va=function(t){return oi(t)},t.Ia=function(t){return ni(t)},mi.prototype.flush=mi.prototype.flush,mi.prototype.prepareTemplate=mi.prototype.prepareTemplate,mi.prototype.styleElement=mi.prototype.styleElement,mi.prototype.styleDocument=mi.prototype.styleDocument,mi.prototype.styleSubtree=mi.prototype.styleSubtree,mi.prototype.getComputedStyleValue=mi.prototype.getComputedStyleValue,mi.prototype.setElementClass=mi.prototype.Xa,mi.prototype._styleInfoForNode=mi.prototype.Fa,mi.prototype.transformCustomStyleForDocument=mi.prototype.va,mi.prototype.getStyleAst=mi.prototype.Ka,mi.prototype.styleAstToString=mi.prototype.Ya,mi.prototype.flushCustomStyles=mi.prototype.flushCustomStyles,mi.prototype.scopeNode=mi.prototype.Wa,mi.prototype.unscopeNode=mi.prototype.Za,mi.prototype.scopeForNode=mi.prototype.Va,mi.prototype.currentScopeForNode=mi.prototype.Ia,mi.prototype.prepareAdoptedCssText=mi.prototype.Sa,Object.defineProperties(mi.prototype,{nativeShadow:{get:function(){return Wo}},nativeCss:{get:function(){return zo}}});var Ai,Si,wi=new mi;window.ShadyCSS&&(Ai=window.ShadyCSS.ApplyShim,Si=window.ShadyCSS.CustomStyleInterface),window.ShadyCSS={ScopingShim:wi,prepareTemplate:function(t,e,n){wi.flushCustomStyles(),wi.prepareTemplate(t,e,n)},prepareTemplateDom:function(t,e){wi.prepareTemplateDom(t,e)},prepareTemplateStyles:function(t,e,n){wi.flushCustomStyles(),wi.prepareTemplateStyles(t,e,n)},styleSubtree:function(t,e){wi.flushCustomStyles(),wi.styleSubtree(t,e)},styleElement:function(t){wi.flushCustomStyles(),wi.styleElement(t)},styleDocument:function(t){wi.flushCustomStyles(),wi.styleDocument(t)},flushCustomStyles:function(){wi.flushCustomStyles()},getComputedStyleValue:function(t,e){return wi.getComputedStyleValue(t,e)},nativeCss:zo,nativeShadow:Wo,cssBuild:Jo,disableRuntime:Go},Ai&&(window.ShadyCSS.ApplyShim=Ai),Si&&(window.ShadyCSS.CustomStyleInterface=Si),function(t){function e(t){return""==t&&(i.call(this),this.i=!0),t.toLowerCase()}function n(t){var e=t.charCodeAt(0);return 32<e&&127>e&&-1==[34,35,60,62,63,96].indexOf(e)?t:encodeURIComponent(t)}function o(t){var e=t.charCodeAt(0);return 32<e&&127>e&&-1==[34,35,60,62,96].indexOf(e)?t:encodeURIComponent(t)}function r(t,r,s){function a(t){v.push(t)}var u=r||"scheme start",d=0,f="",m=!1,g=!1,v=[];t:for(;(null!=t[d-1]||0==d)&&!this.i;){var _=t[d];switch(u){case"scheme start":if(!_||!p.test(_)){if(r){a("Invalid scheme.");break t}f="",u="no scheme";continue}f+=_.toLowerCase(),u="scheme";break;case"scheme":if(_&&h.test(_))f+=_.toLowerCase();else{if(":"!=_){if(r){null!=_&&a("Code point not allowed in scheme: "+_);break t}f="",d=0,u="no scheme";continue}if(this.h=f,f="",r)break t;void 0!==c[this.h]&&(this.B=!0),u="file"==this.h?"relative":this.B&&s&&s.h==this.h?"relative or authority":this.B?"authority first slash":"scheme data"}break;case"scheme data":"?"==_?(this.o="?",u="query"):"#"==_?(this.v="#",u="fragment"):null!=_&&"\t"!=_&&"\n"!=_&&"\r"!=_&&(this.ia+=n(_));break;case"no scheme":if(s&&void 0!==c[s.h]){u="relative";continue}a("Missing scheme."),i.call(this),this.i=!0;break;case"relative or authority":if("/"!=_||"/"!=t[d+1]){a("Expected /, got: "+_),u="relative";continue}u="authority ignore slashes";break;case"relative":if(this.B=!0,"file"!=this.h&&(this.h=s.h),null==_){this.j=s.j,this.m=s.m,this.l=s.l.slice(),this.o=s.o,this.s=s.s,this.g=s.g;break t}if("/"==_||"\\"==_)"\\"==_&&a("\\ is an invalid code point."),u="relative slash";else if("?"==_)this.j=s.j,this.m=s.m,this.l=s.l.slice(),this.o="?",this.s=s.s,this.g=s.g,u="query";else{if("#"!=_){u=t[d+1];var y=t[d+2];("file"!=this.h||!p.test(_)||":"!=u&&"|"!=u||null!=y&&"/"!=y&&"\\"!=y&&"?"!=y&&"#"!=y)&&(this.j=s.j,this.m=s.m,this.s=s.s,this.g=s.g,this.l=s.l.slice(),this.l.pop()),u="relative path";continue}this.j=s.j,this.m=s.m,this.l=s.l.slice(),this.o=s.o,this.v="#",this.s=s.s,this.g=s.g,u="fragment"}break;case"relative slash":if("/"!=_&&"\\"!=_){"file"!=this.h&&(this.j=s.j,this.m=s.m,this.s=s.s,this.g=s.g),u="relative path";continue}"\\"==_&&a("\\ is an invalid code point."),u="file"==this.h?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=_){a("Expected '/', got: "+_),u="authority ignore slashes";continue}u="authority second slash";break;case"authority second slash":if(u="authority ignore slashes","/"!=_){a("Expected '/', got: "+_);continue}break;case"authority ignore slashes":if("/"!=_&&"\\"!=_){u="authority";continue}a("Expected authority, got: "+_);break;case"authority":if("@"==_){for(m&&(a("@ already seen."),f+="%40"),m=!0,_=0;_<f.length;_++)"\t"==(y=f[_])||"\n"==y||"\r"==y?a("Invalid whitespace in authority."):":"==y&&null===this.g?this.g="":(y=n(y),null!==this.g?this.g+=y:this.s+=y);f=""}else{if(null==_||"/"==_||"\\"==_||"?"==_||"#"==_){d-=f.length,f="",u="host";continue}f+=_}break;case"file host":if(null==_||"/"==_||"\\"==_||"?"==_||"#"==_){2!=f.length||!p.test(f[0])||":"!=f[1]&&"|"!=f[1]?(0!=f.length&&(this.j=e.call(this,f),f=""),u="relative path start"):u="relative path";continue}"\t"==_||"\n"==_||"\r"==_?a("Invalid whitespace in file host."):f+=_;break;case"host":case"hostname":if(":"!=_||g){if(null==_||"/"==_||"\\"==_||"?"==_||"#"==_){if(this.j=e.call(this,f),f="",u="relative path start",r)break t;continue}"\t"!=_&&"\n"!=_&&"\r"!=_?("["==_?g=!0:"]"==_&&(g=!1),f+=_):a("Invalid code point in host/hostname: "+_)}else if(this.j=e.call(this,f),f="",u="port","hostname"==r)break t;break;case"port":if(/[0-9]/.test(_))f+=_;else{if(null==_||"/"==_||"\\"==_||"?"==_||"#"==_||r){if(""!=f&&((f=parseInt(f,10))!=c[this.h]&&(this.m=f+""),f=""),r)break t;u="relative path start";continue}"\t"==_||"\n"==_||"\r"==_?a("Invalid code point in port: "+_):(i.call(this),this.i=!0)}break;case"relative path start":if("\\"==_&&a("'\\' not allowed in path."),u="relative path","/"!=_&&"\\"!=_)continue;break;case"relative path":null!=_&&"/"!=_&&"\\"!=_&&(r||"?"!=_&&"#"!=_)?"\t"!=_&&"\n"!=_&&"\r"!=_&&(f+=n(_)):("\\"==_&&a("\\ not allowed in relative path."),(y=l[f.toLowerCase()])&&(f=y),".."==f?(this.l.pop(),"/"!=_&&"\\"!=_&&this.l.push("")):"."==f&&"/"!=_&&"\\"!=_?this.l.push(""):"."!=f&&("file"==this.h&&0==this.l.length&&2==f.length&&p.test(f[0])&&"|"==f[1]&&(f=f[0]+":"),this.l.push(f)),f="","?"==_?(this.o="?",u="query"):"#"==_&&(this.v="#",u="fragment"));break;case"query":r||"#"!=_?null!=_&&"\t"!=_&&"\n"!=_&&"\r"!=_&&(this.o+=o(_)):(this.v="#",u="fragment");break;case"fragment":null!=_&&"\t"!=_&&"\n"!=_&&"\r"!=_&&(this.v+=_)}d++}}function i(){this.s=this.ia=this.h="",this.g=null,this.m=this.j="",this.l=[],this.v=this.o="",this.B=this.i=!1}function s(t,e){void 0===e||e instanceof s||(e=new s(String(e))),this.a=t,i.call(this),t=this.a.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,""),r.call(this,t,null,e)}var a=!1;try{var u=new URL("b","http://a");u.pathname="c%20d",a="http://a/c%20d"===u.href}catch(f){}if(!a){var c=Object.create(null);c.ftp=21,c.file=0,c.gopher=70,c.http=80,c.https=443,c.ws=80,c.wss=443;var l=Object.create(null);l["%2e"]=".",l[".%2e"]="..",l["%2e."]="..",l["%2e%2e"]="..";var p=/[a-zA-Z]/,h=/[a-zA-Z0-9\+\-\.]/;s.prototype={toString:function(){return this.href},get href(){if(this.i)return this.a;var t="";return""==this.s&&null==this.g||(t=this.s+(null!=this.g?":"+this.g:"")+"@"),this.protocol+(this.B?"//"+t+this.host:"")+this.pathname+this.o+this.v},set href(t){i.call(this),r.call(this,t)},get protocol(){return this.h+":"},set protocol(t){this.i||r.call(this,t+":","scheme start")},get host(){return this.i?"":this.m?this.j+":"+this.m:this.j},set host(t){!this.i&&this.B&&r.call(this,t,"host")},get hostname(){return this.j},set hostname(t){!this.i&&this.B&&r.call(this,t,"hostname")},get port(){return this.m},set port(t){!this.i&&this.B&&r.call(this,t,"port")},get pathname(){return this.i?"":this.B?"/"+this.l.join("/"):this.ia},set pathname(t){!this.i&&this.B&&(this.l=[],r.call(this,t,"relative path start"))},get search(){return this.i||!this.o||"?"==this.o?"":this.o},set search(t){!this.i&&this.B&&(this.o="?","?"==t[0]&&(t=t.slice(1)),r.call(this,t,"query"))},get hash(){return this.i||!this.v||"#"==this.v?"":this.v},set hash(t){this.i||(t?(this.v="#","#"==t[0]&&(t=t.slice(1)),r.call(this,t,"fragment")):this.v="")},get origin(){var t;if(this.i||!this.h)return"";switch(this.h){case"data":case"file":case"javascript":case"mailto":return"null"}return(t=this.host)?this.h+"://"+t:""}};var d=t.URL;d&&(s.createObjectURL=function(t){return d.createObjectURL.apply(d,arguments)},s.revokeObjectURL=function(t){d.revokeObjectURL(t)}),t.URL=s}}(window),Object.getOwnPropertyDescriptor(Node.prototype,"baseURI")||Object.defineProperty(Node.prototype,"baseURI",{get:function(){var t=(this.ownerDocument||this).querySelector("base[href]");return t&&t.href||window.location.href},configurable:!0,enumerable:!0});var Ci=document.createElement("style");Ci.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var Ei=document.querySelector("head");Ei.insertBefore(Ci,Ei.firstChild);var Ii=window.customElements,ki=!1,Ri=null;function Pi(){window.HTMLTemplateElement.bootstrap&&window.HTMLTemplateElement.bootstrap(window.document),Ri&&Ri(),ki=!0,window.WebComponents.ready=!0,document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))}Ii.polyfillWrapFlushCallback&&Ii.polyfillWrapFlushCallback((function(t){Ri=t,ki&&t()})),"complete"!==document.readyState?(window.addEventListener("load",Pi),window.addEventListener("DOMContentLoaded",(function(){window.removeEventListener("load",Pi),Pi()}))):Pi()}).call(this),function(t){var e=function(){try{return!!Symbol.iterator}catch(t){return!1}}(),n=function(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(n[Symbol.iterator]=function(){return n}),n},o=function(t){return encodeURIComponent(t).replace(/%20/g,"+")},r=function(t){return decodeURIComponent(String(t).replace(/\+/g," "))};(function(){try{var e=t.URLSearchParams;return"a=1"===new e("?a=1").toString()&&"function"==typeof e.prototype.set&&"function"==typeof e.prototype.entries}catch(n){return!1}})()||function(){var r=function(t){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var e=typeof t;if("undefined"===e);else if("string"===e)""!==t&&this._fromString(t);else if(t instanceof r){var n=this;t.forEach((function(t,e){n.append(e,t)}))}else{if(null===t||"object"!==e)throw new TypeError("Unsupported input's type for URLSearchParams");if("[object Array]"===Object.prototype.toString.call(t))for(var o=0;o<t.length;o++){var i=t[o];if("[object Array]"!==Object.prototype.toString.call(i)&&2===i.length)throw new TypeError("Expected [string, any] as entry at index "+o+" of URLSearchParams's input");this.append(i[0],i[1])}else for(var s in t)t.hasOwnProperty(s)&&this.append(s,t[s])}},i=r.prototype;i.append=function(t,e){t in this._entries?this._entries[t].push(String(e)):this._entries[t]=[String(e)]},i.delete=function(t){delete this._entries[t]},i.get=function(t){return t in this._entries?this._entries[t][0]:null},i.getAll=function(t){return t in this._entries?this._entries[t].slice(0):[]},i.has=function(t){return t in this._entries},i.set=function(t,e){this._entries[t]=[String(e)]},i.forEach=function(t,e){var n;for(var o in this._entries)if(this._entries.hasOwnProperty(o)){n=this._entries[o];for(var r=0;r<n.length;r++)t.call(e,n[r],o,this)}},i.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),n(t)},i.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),n(t)},i.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),n(t)},e&&(i[Symbol.iterator]=i.entries),i.toString=function(){var t=[];return this.forEach((function(e,n){t.push(o(n)+"="+o(e))})),t.join("&")},t.URLSearchParams=r}();var i=t.URLSearchParams.prototype;"function"!=typeof i.sort&&(i.sort=function(){var t=this,e=[];this.forEach((function(n,o){e.push([o,n]),t._entries||t.delete(o)})),e.sort((function(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:0})),t._entries&&(t._entries={});for(var n=0;n<e.length;n++)this.append(e[n][0],e[n][1])}),"function"!=typeof i._fromString&&Object.defineProperty(i,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(t){if(this._entries)this._entries={};else{var e=[];this.forEach((function(t,n){e.push(n)}));for(var n=0;n<e.length;n++)this.delete(e[n])}var o,i=(t=t.replace(/^\?/,"")).split("&");for(n=0;n<i.length;n++)o=i[n].split("="),this.append(r(o[0]),o.length>1?r(o[1]):"")}})}("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this),function(t){if(function(){try{var e=new t.URL("b","http://a");return e.pathname="c d","http://a/c%20d"===e.href&&e.searchParams}catch(n){return!1}}()||function(){var e=t.URL,n=function(e,n){"string"!=typeof e&&(e=String(e)),n&&"string"!=typeof n&&(n=String(n));var o,r=document;if(n&&(void 0===t.location||n!==t.location.href)){n=n.toLowerCase(),(o=(r=document.implementation.createHTMLDocument("")).createElement("base")).href=n,r.head.appendChild(o);try{if(0!==o.href.indexOf(n))throw new Error(o.href)}catch(h){throw new Error("URL unable to set base "+n+" due to "+h)}}var i=r.createElement("a");i.href=e,o&&(r.body.appendChild(i),i.href=i.href);var s=r.createElement("input");if(s.type="url",s.value=e,":"===i.protocol||!/:/.test(i.href)||!s.checkValidity()&&!n)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:i});var a=new t.URLSearchParams(this.search),u=!0,c=!0,l=this;["append","delete","set"].forEach((function(t){var e=a[t];a[t]=function(){e.apply(a,arguments),u&&(c=!1,l.search=a.toString(),c=!0)}})),Object.defineProperty(this,"searchParams",{value:a,enumerable:!0});var p=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==p&&(p=this.search,c&&(u=!1,this.searchParams._fromString(this.search),u=!0))}})},o=n.prototype;["hash","host","hostname","port","protocol"].forEach((function(t){!function(t){Object.defineProperty(o,t,{get:function(){return this._anchorElement[t]},set:function(e){this._anchorElement[t]=e},enumerable:!0})}(t)})),Object.defineProperty(o,"search",{get:function(){return this._anchorElement.search},set:function(t){this._anchorElement.search=t,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(o,{toString:{get:function(){var t=this;return function(){return t.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(t){this._anchorElement.href=t,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(t){this._anchorElement.pathname=t},enumerable:!0},origin:{get:function(){return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(this._anchorElement.port!={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol]&&""!==this._anchorElement.port?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(t){},enumerable:!0},username:{get:function(){return""},set:function(t){},enumerable:!0}}),n.createObjectURL=function(t){return e.createObjectURL.apply(e,arguments)},n.revokeObjectURL=function(t){return e.revokeObjectURL.apply(e,arguments)},t.URL=n}(),void 0!==t.location&&!("origin"in t.location)){var e=function(){return t.location.protocol+"//"+t.location.hostname+(t.location.port?":"+t.location.port:"")};try{Object.defineProperty(t.location,"origin",{get:e,enumerable:!0})}catch(n){setInterval((function(){t.location.origin=e()}),100)}}}("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this),function(t){var e,n,o,r,i,s,a,u,c,l,p,h;e=function(t){function e(t){if(!a.test(t))throw Error();t=t.split(".");for(var e=window,n=0;n<t.length;n++)e=e[t[n]];return e}function n(t,e){return"string"==typeof t&&"string"==typeof e&&t.length>=e.length&&t.substr(0,e.length)===e}var o=/^\/\//,r=/^[^:]+:/,i=/^https?:\/\/[^\/]+/,s=/ (?:MSIE |Trident\/7\.0;.* rv:)(\d+)/,a=/^[^.]+(?:\.[^.]+)*$/;return{ja:function(t){var e;try{null==(e=document.getElementById(t))&&(e=document.getElementsByName(t)[0])}catch(s){}if(null==e)for(var n=0;n<document.forms.length;n++)for(var o=document.forms[n],r=0;r<o.elements.length;r++){var i=o[r];if(i.name===t||i.id===t)return i}return e},startsWith:n,N:function(t){for(var n=0;n<t.length;n++)try{var o=e(t[n]);if(o)return o}catch(r){}return""},a:e,aa:function(t){return o.test(t)&&(t=document.URL.match(r)[0]+t),!((t=t.match(i))&&!n(document.URL,t[0]))},P:function(){var t=navigator.userAgent.match(s);return t?parseInt(t[1],10):null},R:function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},ba:function(t,e,n){function o(){t.onreadystatechange=null,null!==a&&(clearTimeout(a),a=null),u=!0}var r=!1,i=!1,s=!1,a=null,u=!1;try{t.onreadystatechange=function(){u||4!==t.readyState||(o(),t=null,n(i,s))},0!==e&&(a=setTimeout((function(){u||(i=!0,o(),t.abort(),t=null,n(i,s))}),e)),t.send(),r=!0}catch(c){s=!0,o(),t=null}finally{r||n(i,s)}},S:function(t,e,n,o){for(e="boolean"==typeof o&&o?t.split(e):-1===(o=t.indexOf(e))?[t]:[t.substring(0,o),t.substring(o+e.length)],t=e[0],o=1;o<e.length;o++)t+=n+e[o];return t},ob:function(t){if(!t)return 0;if(Array.prototype.reduce)return t.split("").reduce((function(t,e){return(t=(t<<5)-t+e.charCodeAt(0))&t}),0);for(var e=0,n=0,o=t.length;n<o;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e},U:function(t){return 0<=window.navigator.userAgent.indexOf(t)}}}(),n=function(t){t=("0000000"+((t/1e3|0)>>>0).toString(16)).slice(-8)+"-";for(var e=9;36>e;e++){var n;13===e||18===e||23===e?n="-":14===e?n="4":(n=16*Math.random()|0,19===e&&(n=3&n|8),n=n.toString(16)),t+=n}return t},r=function t(){function e(t,e,n){if(0===i)for(i=t,r=n;e.length;)e.shift().call(u,n)}function n(t,e){setTimeout((function(){try{var n=e.call(null,r);n instanceof Object&&n.then&&n.then instanceof Function?n.then(t.O,t.reject):t.O(n)}catch(o){t.reject(o)}}),0)}function o(t,e,o){i===o?n(t,e):(1===o?s:a).push((function(){n(t,e)}))}var r,i=0,s=[],a=[],u=this;this.O=function(t){e(1,s,t)},this.reject=function(t){e(-1,a,t)},this.then=function(e,n){var r=new t;return e instanceof Function&&o(r,e,1),n instanceof Function&&o(r,n,-1),r}},i={xb:h=function(t){function e(){null!==a&&(clearTimeout(a),a=null);try{"function"==typeof t.finish&&t.finish(n)}catch(s){}o=!0,i.O()}var n,o=!1,i=new r,s=!1,a=null,u=!1;n={g:function(){return o},b:function(){o||e()},va:function(t){i.then((function(){t()}))},pa:function(){o||(s=!0,e())},da:function(){return s},Pb:function(){return u}},0<t.v&&(a=setTimeout((function(){a=null,o||(u=!0,e())}),t.v));try{t.start(n)}catch(c){n.b()}return n},ub:function(t){var e=[];return{start:function(n){for(var o=0;o<t.length;o++)e.push(h(t[o]));if(e.length){var r=e.length,i=function(){!n.g()&&0<r&&0==--r&&n.b()};for(o=0;o<e.length;o++)e[o].va(i)}else n.b()},finish:function(t){if(t.da())for(t=0;t<e.length;t++)e[t].pa()}}}},s=function(t,e){var n,o,r;return n=3,r=null,o="",{o:function(){var i=e.j[5],s=null;return{start:function(a){n=3,r=null,o="";var u=!1;try{var c=function(e){if(!e)return n=4,null;if(e=!t.aa(e)){var o=t.P();if(null!==o&&10>o)return n=8,null}return e}(i);if(null!==c){try{s=t.R()}catch(l){return void(n=9)}try{s.open("GET",i,!0)}catch(l){return void(n=1)}t.ba(s,e.l,(function(t,i){try{a.g()||(t?n=2:i?n=6:(n=s.status,200===s.status&&((o=s.getResponseHeader("ETag")||"")?o=o.replace(/"/g,""):n=7),o&&(r=c)))}catch(e){n=6}finally{a.b()}})),u=!0}}catch(l){n=6}finally{u||a.b()}},finish:function(t){t.da()&&(n=5),s=null}}},Za:function(){return o},Z:function(){return r},$:function(){return n}}}(e,o={j:[],X:[],l:9e3,K:null,ca:[],J:null,vb:"@_PAYLOADINPUTID_@"}),a=function(t,e){var n=null;return{o:function(){return{start:function(o){try{var r,i=e.j[1],s=e.j[2];i&&s?function(n,o){!function(e){return!t.aa(e)&&(8===(e=t.P())||9===e)}(n)?((r=t.R()).open("POST",n,!0),t.ba(r,e.l,(function(){o(200===r.status)}))):((r=new XDomainRequest).open("POST",n),function(t,e,n){function o(){t&&!i&&(t.onload=t.onerror=t.ontimeout=null,i=!0),t=null,n(r)}var r=!1,i=!1,s=!1;try{t.onload=function(){r=!0,o()},t.onerror=t.ontimeout=o,t.timeout=e,t.send(),s=!0}catch(a){}finally{s||o()}}(r,e.l,o))}(i,(function(i){var a=new Date;if(!o.g()){try{if(i&&r.responseText){var u=r.responseText.replace(/[^ -~](?:.|\n)*/,"");t.ja(s).value=u,n=a}}catch(e){}o.b()}})):o.b()}catch(a){o.b()}}}},Xa:function(){return n}}}(e,o),p={h:[],T:[],wa:function(t){return{Ca:t,W:[],zb:function(t,e){for(var n=0;n<e.length;n++)this.W[t+n]=e[n]},sa:function(t){this.zb(this.W.length,t)},L:function(){for(var t=this.W,e=this.Ca.toString(),n=0;n<t.length;n++)try{var o=e+="&",r=""+t[n](),i="",s=/[%&]+/g,a=void 0,u=0;for(a=s.exec(r);null!==a;)i+=r.substring(u,a.index)+encodeURIComponent(a[0]),u=s.lastIndex,a=s.exec(r);e=o+(i+=r.substring(u))}catch(c){}return e}}}},u=function(t,e){var n=!1,o=!1;return{La:function(){return{start:function(t){n=!1;try{(window.requestFileSystem||window.webkitRequestFileSystem)(0,0,(function(){t.b()}),(function(){t.g()||(n=!0,t.b())}))}catch(e){t.b()}},v:e.l}},Ja:function(){var t,r=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;return{start:function(e){o=!1;try{(t=r.open("pbtest")).onsuccess=function(){if(!e.g())try{t.result.close()}finally{e.b()}},t.onerror=function(){e.g()||(o=!0,e.b())}}catch(n){e.b()}},finish:function(){t&&(t=t.onsuccess=t.onerror=null),r&&r.deleteDatabase("pbtest")},v:e.l}},Y:function(){var e;if(!(e=n||o))t:{if(e=window.localStorage)try{e.setItem("pbtest",1),e.removeItem("pbtest")}catch(r){e=!0;break t}e=!1}return e||window.indexedDB||(e=null!==(e=t.P())&&10<=e||t.U("Edge/")),e||(e=t.U("Focus/")),e}}}(e,o),c=function(t,e,n,o,r,i,s,a,u,c,l,p){function h(t){f(),t=t||r.vb;try{if(!t)return g();var e;if(null==(e=n.ja(t)))return g();try{var i=g();return e.value=i}catch(o){e.value=escape(o.message)}}catch(o){}}function d(t,e){f();var n=Math.random()+1&&["https://globalsiteanalytics.com/resource/resource.png","https://globalsiteanalytics.com/service/hdim","user_prefs2"];for(r.j=e||("string"!=typeof n?n:[]),m(r.X,t),n=0;n<r.ca.length;n++)r.ca[n]()}function f(){r.K&&(r.K.pa(),r.K=null)}function m(t,e){for(var n=[],i=0;i<t.length;i++)try{n.push(t[i]())}catch(o){}n=u.ub(n),n=u.xb(n),"function"==typeof e&&n.va(e),r.K=n}function g(){_=new Date,c.yb(_),s.Oa();for(var t="",n=0;n<i.h.length;n++){var o;try{o=i.h[n]()}catch(d){o=""}t+=escape(o),t+=";"}for(t+=escape(r.J.L())+";",n=0;n<i.T.length;n++)t=i.T[n](t);return y?e.fa(t):t}function v(t){return function(){return t}}var _,y=!0,b={},A="",S=v("");return r.J=new i.wa(3),r.J.sa([function(){return A},function(){return a.Wa()},function(){return a.lb().replace(/ *(\d{3}) [^ ]*( "[^"\\]*(\\(.|\n)[^"\\]*)*"){1,2} */g,(function(t,e){return e}))},function(){return a.nb()},function(){return a.kb()},function(){var e=t.Y();return"boolean"==typeof e?0+e:""},function(){return n.a("devicePixelRatio")},function(){return Math.round(window.screen.width*o.M())},function(){return Math.round(window.screen.height*o.M())},function(){return n.a("screen.left")},function(){return n.a("screen.top")},function(){return n.a("innerWidth")},function(){return n.a("outerWidth")},function(){return o.zoom().toFixed(2)},function(){return n.a("navigator.languages")}]),i.h=[v("TF1"),v("030"),function(){return ScriptEngineMajorVersion()},function(){return ScriptEngineMinorVersion()},function(){return ScriptEngineBuildVersion()},function(){return s.f("{7790769C-0471-11D2-AF11-00C04FA35D02}")},function(){return s.f("{89820200-ECBD-11CF-8B85-00AA005B4340}")},function(){return s.f("{283807B5-2C60-11D0-A31D-00AA00B92C03}")},function(){return s.f("{4F216970-C90C-11D1-B5C7-0000F8051515}")},function(){return s.f("{44BBA848-CC51-11CF-AAFA-00AA00B6015C}")},function(){return s.f("{9381D8F2-0288-11D0-9501-00AA00B911A5}")},function(){return s.f("{4F216970-C90C-11D1-B5C7-0000F8051515}")},function(){return s.f("{5A8D6EE0-3E18-11D0-821E-444553540000}")},function(){return s.f("{89820200-ECBD-11CF-8B85-00AA005B4383}")},function(){return s.f("{08B0E5C0-4FCB-11CF-AAA5-00401C608555}")},function(){return s.f("{45EA75A0-A269-11D1-B5BF-0000F8051515}")},function(){return s.f("{DE5AED00-A4BF-11D1-9948-00C04F98BBC9}")},function(){return s.f("{22D6F312-B0F6-11D0-94AB-0080C74C7E95}")},function(){return s.f("{44BBA842-CC51-11CF-AAFA-00AA00B6015B}")},function(){return s.f("{3AF36230-A269-11D1-B5BF-0000F8051515}")},function(){return s.f("{44BBA840-CC51-11CF-AAFA-00AA00B6015C}")},function(){return s.f("{CC2A9BA0-3BDD-11D0-821E-444553540000}")},function(){return s.f("{08B0E5C0-4FCB-11CF-AAA5-00401C608500}")},function(){return n.a("navigator.appCodeName")},function(){return n.a("navigator.appName")},function(){return n.a("navigator.appVersion")},function(){return n.N(["navigator.productSub","navigator.appMinorVersion"])},function(){return n.a("navigator.browserLanguage")},function(){return n.a("navigator.cookieEnabled")},function(){return n.N(["navigator.oscpu","navigator.cpuClass"])},S,function(){return n.a("navigator.platform")},function(){return n.a("navigator.systemLanguage")},function(){return p.L()},function(){return n.N(["navigator.language","navigator.userLanguage"])},function(){return n.a("document.defaultCharset")},function(){return n.a("document.domain")},function(){return n.a("screen.deviceXDPI")},function(){return n.a("screen.deviceYDPI")},function(){return n.a("screen.fontSmoothingEnabled")},function(){return n.a("screen.updateInterval")},function(){return c.rb()},function(){return c.qb()},function(){return"@UTC@"},function(){return-c.gb()/60},function(){return new Date(2005,5,7,21,33,44,888).toLocaleString().replace(/\u200e/g,"")},function(){return n.a("screen.width")},function(){return n.a("screen.height")},function(){return s.s("Acrobat")},function(){return s.s("Flash")},function(){return s.s("QuickTime")},function(){return s.s("Java Plug-in")},function(){return s.s("Director")},function(){return s.s("Office")},function(){return"@CT@"},function(){return c.mb()},function(){return c.hb()},function(){return _.toLocaleString().replace(/\u200e/g,"")},function(){return n.a("screen.colorDepth")},function(){return n.a("screen.availWidth")},function(){return n.a("screen.availHeight")},function(){return n.a("screen.availLeft")},function(){return n.a("screen.availTop")},function(){return s.c("Acrobat")},function(){return s.c("Adobe SVG")},function(){return s.c("Authorware")},function(){return s.c("Citrix ICA")},function(){return s.c("Director")},function(){return s.c("Flash")},function(){return s.c("MapGuide")},function(){return s.c("MetaStream")},function(){return s.c("PDF Viewer")},function(){return s.c("QuickTime")},function(){return s.c("RealOne")},function(){return s.c("RealPlayer Enterprise")},function(){return s.c("RealPlayer Plugin")},function(){return s.c("Seagate Software Report")},function(){return s.c("Silverlight")},function(){return s.c("Windows Media")},function(){return s.c("iPIX")},function(){return s.c("nppdf.so")},function(){var t=document.createElement("span");t.innerHTML="&nbsp;",t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var e=t.offsetHeight;return document.body.removeChild(t),e},S,S,S,S,S,S,S,S,S,S,S,S,S,S,function(){return"7.3.0"},S,function(){return a.$a()},S,S,S,S,S,function(){var t=a.Z();return"boolean"==typeof t?0+t:""},function(){return a.$()},function(){return"0"},S,S,S,S,function(){return(n.ob(s.bb())>>>0).toString(16)+""},function(){return n.N(["navigator.doNotTrack","navigator.msDoNotTrack"])},S,S,S,S,S,S,function(){return l.sb()},function(){return l.ia()},function(){return l.Va()},function(){return l.na()},function(){return l.oa()},function(){return l.ga()},function(){return l.ma()},function(){return l.ka()},function(){return l.ha()},function(){return l.la()}],i.T=[function(t){return n.S(t,escape("@UTC@"),(new Date).getTime())},function(t){return n.S(t,escape("@CT@"),(new Date).getTime()-_.getTime())}],r.X.push(a.o,(function(){return{start:function(t){A="";try{navigator.getBattery().then((function(e){t.g()||(A=[e.charging,e.chargingTime,e.dischargingTime,e.level].join(),t.b())}))}catch(r){t.b()}},v:r.l}}),t.Ka,l.Na),b.schwabform=h,b.f1b5=e.fa,b.initiate=d,b.setResource=function(t,e,n){f(),r.j=[t],2<arguments.length?m([a.o],n):a.Ab()},function(t){var e=(t=t||{}).ctx||window;return y=!t.hasOwnProperty("compress")||t.compress,e.schwab=b,y&&(t=navigator.userAgent.toLowerCase(),"Gecko"===navigator.product&&2>=parseInt(t.substring(t.indexOf("rv:")+3,t.indexOf(")",t.indexOf("rv:")+3)).split(".")[0],10)&&h()),{L:h,Ob:d}}}(c=function(t){var e=null;return{Ka:function(){var n,o=null;return{start:function(r){e=null;try{(n=document.createElement("div")).setAttribute("class","pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links adsbox"),n.setAttribute("style",t.S("width:1px;height:1px;position:absolute;left:-10000px;right:-1000px;",";","!important;",!0)),document.body.appendChild(n),o=setTimeout((function(){if(o=null,!r.g())try{e=!(n&&n.parentNode&&!n.getAttribute("abp")&&n.offsetParent&&0!==n.offsetWidth&&0!==n.offsetHeight&&0!==n.clientWidth&&0!==n.clientHeight)}finally{r.b()}}),100)}catch(i){r.b()}},finish:function(){n&&(n.parentNode&&n.parentNode.removeChild(n),n=null),null!==o&&(clearTimeout(o),o=null)}}},Y:function(){return e}}}(e),function(){function t(t){return String.fromCharCode(37>t?11>t?t?t+47:46:t+54:38>t?95:t+59)}function e(e){function o(e){for(i=i<<e[0]|e[1],s+=e[0];6<=s;)r+=t(e=i>>s-6&63),i^=e<<(s-=6)}var r="",i=0,s=0;o([6,(7&e.length)<<3|0]),o([6,56&e.length|1]);for(var a=0;a<e.length;a++){if(void 0===n[e.charCodeAt(a)])return;o(n[e.charCodeAt(a)])}return o(n[0]),0<s&&o([6-s,0]),r}var n={1:[4,15],110:[8,239],74:[8,238],57:[7,118],56:[7,117],71:[8,233],25:[8,232],101:[5,28],104:[7,111],4:[7,110],105:[6,54],5:[7,107],109:[7,106],103:[9,423],82:[9,422],26:[8,210],6:[7,104],46:[6,51],97:[6,50],111:[6,49],7:[7,97],45:[7,96],59:[5,23],15:[7,91],11:[8,181],72:[8,180],27:[8,179],28:[8,178],16:[7,88],88:[10,703],113:[11,1405],89:[12,2809],107:[13,5617],90:[14,11233],42:[15,22465],64:[16,44929],0:[16,44928],81:[9,350],29:[8,174],118:[8,173],30:[8,172],98:[8,171],12:[8,170],99:[7,84],117:[6,41],112:[6,40],102:[9,319],68:[9,318],31:[8,158],100:[7,78],84:[6,38],55:[6,37],17:[7,73],8:[7,72],9:[7,71],77:[7,70],18:[7,69],65:[7,68],48:[6,33],116:[6,32],10:[7,63],121:[8,125],78:[8,124],80:[7,61],69:[7,60],119:[7,59],13:[8,117],79:[8,116],19:[7,57],67:[7,56],114:[6,27],83:[6,26],115:[6,25],14:[6,24],122:[8,95],95:[8,94],76:[7,46],24:[7,45],37:[7,44],50:[5,10],51:[5,9],108:[6,17],22:[7,33],120:[8,65],66:[8,64],21:[7,31],106:[7,30],47:[6,14],53:[5,6],49:[5,5],86:[8,39],85:[8,38],23:[7,18],75:[7,17],20:[7,16],2:[5,3],73:[8,23],43:[9,45],87:[9,44],70:[7,10],3:[6,4],52:[5,1],54:[5,0]},o="%20 ;;; %3B %2C und fin ed; %28 %29 %3A /53 ike Web 0; .0 e; on il ck 01 in Mo fa 00 32 la .1 ri it %u le".split(" ");return{fa:function(n){for(var r=n,i=0;o[i];i++)r=r.split(o[i]).join(String.fromCharCode(i+1));if(void 0===(r=e(r)))return n;i=65535;for(var s=0;s<n.length;s++)i=65535&(i>>>8|i<<8),i^=255&n.charCodeAt(s),i^=(255&i)>>4,i^=i<<12&65535,i^=(255&i)<<5&65535;return n=""+t((i&=65535)>>>12),r+((n+=t(i>>>6&63))+t(63&i))}}}(),e,function(t){function e(){d||(d=p);try{isNaN(screen.logicalXDPI)||isNaN(screen.systemXDPI)?window.navigator.msMaxTouchPoints?d=c:!window.chrome||window.opera||t.U(" Opera")?0<=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")?d=a:"orientation"in window&&"webkitRequestAnimationFrame"in window?d=s:"webkitRequestAnimationFrame"in window?d=i:t.U("Opera")?d=n:window.devicePixelRatio?d=o:.001<r().zoom&&(d=r):d=u:d=l}catch(e){}return d()}function n(){var t=window.top.outerWidth/window.top.innerWidth;return{zoom:t=Math.round(100*t)/100,i:t*h()}}function o(){return{zoom:r().zoom,i:h()}}function r(){var t=function(){var t,e,n,o;window.matchMedia?t=window.matchMedia:(e=document.getElementsByTagName("head")[0],n=document.createElement("style"),e.appendChild(n),(o=document.createElement("div")).className="mediaQueryBinarySearch",o.style.display="none",document.body.appendChild(o),t=function(t){return n.sheet.insertRule("@media "+t+"{.mediaQueryBinarySearch {text-decoration: underline} }",0),t="underline"===getComputedStyle(o,null).textDecoration,n.sheet.deleteRule(0),{matches:t}});var r=function e(n,o,r){var i=(n+o)/2;return 0>=r||1e-4>o-n?i:t("(min--moz-device-pixel-ratio:"+i+")").matches?e(i,o,r-1):e(n,i,r-1)}(0,10,20);return o&&(e.removeChild(n),document.body.removeChild(o)),r}();return{zoom:t=Math.round(100*t)/100,i:t}}function i(){var t=document.createElement("div");t.innerHTML="1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0",t.setAttribute("style","font: 100px/1em sans-serif; -webkit-text-size-adjust: none; text-size-adjust: none; height: auto; width: 1em; padding: 0; overflow: visible;".replace(/;/g," !important;"));var e=document.createElement("div");return e.setAttribute("style","width:0; height:0; overflow:hidden; visibility:hidden; position: absolute;".replace(/;/g," !important;")),e.appendChild(t),document.body.appendChild(e),t=1e3/t.clientHeight,t=Math.round(100*t)/100,document.body.removeChild(e),{zoom:t,i:t*h()}}function s(){var t=(90==Math.abs(window.orientation)?screen.height:screen.width)/window.innerWidth;return{zoom:t,i:t*h()}}function a(){var t=Math.round(document.documentElement.clientWidth/window.innerWidth*100)/100;return{zoom:t,i:t*h()}}function u(){var t=Math.round(window.outerWidth/window.innerWidth*100)/100;return{zoom:t,i:t*h()}}function c(){var t=Math.round(document.documentElement.offsetHeight/window.innerHeight*100)/100;return{zoom:t,i:t*h()}}function l(){var t=Math.round(screen.deviceXDPI/screen.logicalXDPI*100)/100;return{zoom:t,i:t*h()}}function p(){return{zoom:1,i:1}}function h(){return window.devicePixelRatio||1}var d;return{zoom:function(){return e().zoom},M:function(){return e().i}}}(e),o,p,function(){var t,e={Flash:["ShockwaveFlash.ShockwaveFlash",function(t){return t.getVariable("$version")}],Director:["SWCtl.SWCtl",function(t){return t.ShockwaveVersion("")}]};try{void 0!==(t=document.createElement("span")).addBehavior&&t.addBehavior("#default#clientCaps")}catch(o){}var n={};return{f:function(e){var n="";try{void 0!==t.getComponentVersion&&(n=t.getComponentVersion(e,"ComponentID"))}catch(o){e=o.message.length,n=escape(o.message.substr(0,40<e?40:e))}return n},s:function(t){return n[t]},Oa:function(){for(var t="Acrobat;Flash;QuickTime;Java Plug-in;Director;Office".split(";"),o=0;o<t.length;o++){var r=s=t[o],i=s,s="";try{if(navigator.plugins&&navigator.plugins.length){var a=new RegExp(i+".* ([0-9._]+)");for(i=0;i<navigator.plugins.length;i++){var u=a.exec(navigator.plugins[i].name);null===u&&(u=a.exec(navigator.plugins[i].description)),u&&(s=u[1])}}else if(window.ActiveXObject&&e[i])try{var c=new ActiveXObject(e[i][0]);s=e[i][1](c)}catch(l){s=""}}catch(l){s=l.message}n[r]=s}},c:function(t){try{if(navigator.plugins&&navigator.plugins.length)for(var e=0;e<navigator.plugins.length;e++){var n=navigator.plugins[e];if(0<=n.name.indexOf(t))return n.name+(n.description?"|"+n.description:"")}}catch(o){}return""},bb:function(){var t="";if(navigator.plugins&&navigator.plugins.length)for(var e=0;e<navigator.plugins.length;e++){var n=navigator.plugins[e];n&&(t+=n.name+n.filename+n.description+n.version)}return t}}}(),function(t,e){function n(e){i=e.status;var n=["","",""];try{u=e.getResponseHeader("cache-control");for(var o=e.getAllResponseHeaders().toLowerCase().split("\n"),r=["warning","x-cache","via"],a=0;a<r.length;a++)for(var h=0;h<o.length;h++)if(t.startsWith(o[h],r[a]+":")){n[a]=e.getResponseHeader(r[a]);break}}catch(d){}c=n[0],l=n[1],p=n[2],200===e.status&&((e=e.getResponseHeader("Last-Modified"))||((e=(void 0).getResponseHeader("Expires"))?((e=new Date(e)).setTime(e.getTime()-31536e6),e=e.toUTCString()):e=void 0),(s=e||"")||(i=7))}function o(e){if(!e)return i=4,null;if(e=!t.aa(e)){var n=t.P();if(null!==n&&10>n)return i=8,null}return e}function r(){i=3,a=null,s=u=c=l=p=""}var i,s,a,u,c,l,p;return r(),{o:function(){var u=e.j[0],c=null;return{start:function(l){r();var p=!1;try{var h=o(u);if(null!==h){try{c=t.R()}catch(d){return void(i=9)}try{c.open("GET",u,!0)}catch(d){return void(i=1)}t.ba(c,e.l,(function(t,e){try{l.g()||(t?i=2:e?i=6:(n(c),s&&(a=h)))}catch(o){i=6}finally{l.b()}})),p=!0}}catch(d){i=6}finally{p||l.b()}},finish:function(t){t.da()&&(i=5),c=null}}},Ab:function(){try{var u=e.j[0];r();var l=o(u);if(null!==l){var p;try{p=t.R()}catch(c){return void(i=9)}try{p.open("GET",u,!1)}catch(c){return void(i=1)}p.send(),n(p),s&&(a=l)}}catch(c){i=6}},$a:function(){return s},Z:function(){return a},$:function(){return i},Wa:function(){return u},lb:function(){return c},nb:function(){return l},kb:function(){return p}}}(e,o),i,function(){function t(t){n=new Date(t.getTime()),o=e(1),r=e(7)}function e(t){t--;var e=n.getTime(),o=n.getFullYear(),r=new Date(o,t,15),i=r,s=r;return r.getTime()<=e?s=new Date(o+1,t,15):i=new Date(o-1,t,15),(e-i.getTime()<s.getTime()-e?i:s).getTimezoneOffset()}var n,o,r;return t(new Date),{yb:t,mb:function(){return o},hb:function(){return r},rb:function(){return r!==o},qb:function(){return r!==o&&n.getTimezoneOffset()===Math.min(o,r)},gb:function(){return Math.max(o,r)}}}(),l=function(t){function e(t){return void 0!==navigator.userAgentData&&"function"==typeof t?t.apply(this):""}var n={platform:"",platformVersion:"",architecture:"",model:"",uaFullVersion:"",bitness:"",fullVersionList:""};return{Ha:void 0!==navigator.userAgentData,sb:function(){return e((function(){try{return navigator.userAgentData.mobile}catch(t){return""}}))},ia:function(){return e((function(){try{return function(){for(var e=navigator.userAgentData.brands,n=0;n<e.length;n++)switch(e[n].brand){case t.B:return t.B.replace("Google ","");case t.G:return t.G;case t.D:return t.D.replace("Microsoft ","");case t.I:return t.I;case t.w:return t.w;case t.A:return t.A;case t.C:return t.C;case t.H:return t.H;case t.F:return t.F}return t.V}()}catch(e){return""}}))},Va:function(){return e((function(){try{var e;t:{for(var n=navigator.userAgentData.brands,o=0,r=0,i=0;i<n.length;i++){switch(n[i].brand){case t.B:case t.G:case t.D:case t.I:case t.w:case t.A:case t.C:case t.H:case t.F:o=n[i].version;break;case t.V:r=n[i].version}if(0!==o){e=o;break t}}e=0!==r?r:n[0].version}return e}catch(s){return""}}))},Na:function(){return{start:function(t){try{void 0!==navigator.userAgentData?navigator.userAgentData.getHighEntropyValues(Object.keys(n)).then((function(e){t.g()||(n=e,t.b())})):t.b()}catch(e){t.b()}}}},na:function(){return n.platform},oa:function(){return n.platformVersion},ga:function(){return n.architecture},ma:function(){return n.model},ka:function(){var e;t:if(e=n.fullVersionList,null==e||0===e.length)e=n.uaFullVersion;else{for(var o=0,r=0,i=0;i<e.length;i++){switch(e[i].brand){case t.B:case t.G:case t.D:case t.I:case t.w:case t.A:case t.C:case t.H:case t.F:o=e[i].version;break;case t.V:r=e[i].version}if(0!==o){e=o;break t}}e=0!==r?r:e[0].version}return e},ha:function(){return n.bitness},la:function(){return""===n.fullVersionList?n.fullVersionList:JSON.stringify(n.fullVersionList)}}}({B:"Google Chrome",V:"Chromium",G:"Opera",D:"Microsoft Edge",I:"Vivaldi",w:"Blisk",A:"Brave",C:"Colibri",H:"SamsungBrowser",F:"HuaweiBrowser"}),function(t,e,n,o,r){return{L:function(){if(!t.Ha)return e.a("navigator.userAgent");if((i=new r).ua(e.a("navigator.userAgent")),null===(i=i.eb()).qa.version||null===i.ta.version||null===i.ea.version)return e.a("navigator.userAgent");var i,s={Da:t.ga(),platform:t.na(),wb:t.oa(),Ga:t.ia(),Qa:t.ka(),tb:t.ma(),Ea:t.ha(),Hb:t.la()};return-1<(s=(i=o.Ra(s,i)).CH_platform).toLowerCase().indexOf("macos")||-1<s.toLowerCase().indexOf("mac os")?o.u(n.ya,i):-1<s.toLowerCase().indexOf("windows")?o.u(n.Ba,i):-1<s.toLowerCase().indexOf("android")?(i.CH_platformVersion=o.Pa(i.CH_platformVersion),o.u(n.za,i)):-1<s.toLowerCase().indexOf("iphone")||-1<s.toLowerCase().indexOf("ipod")||-1<s.toLowerCase().indexOf("ipad")||-1<s.toLowerCase().indexOf("ios")?e.a("navigator.userAgent"):-1<s.toLowerCase().indexOf("linux")?o.u(n.xa,i):o.u(n.Aa,i)}}}(l,e,{ya:"Mozilla/{{Mozilla_version}} (Macintosh; {{CH_architecture}} Mac OS X {{CH_platformVersion}}) AppleWebKit/{{AppleWebKit_version}} (KHTML, like Gecko) {{CH_BrowserName}}/{{CH_UAFullVersion}} Safari/{{Safari_version}}",Ba:"Mozilla/{{Mozilla_version}} ({{CH_platform}} NT {{CH_platformVersion}}; {{CH_architecture}}) AppleWebKit/{{AppleWebKit_version}} (KHTML, like Gecko) {{CH_BrowserName}}/{{CH_UAFullVersion}} Safari/{{Safari_version}}",za:"Mozilla/{{Mozilla_version}} (Linux; {{CH_platform}} {{CH_platformVersion}}; {{CH_model}}) AppleWebKit/{{AppleWebKit_version}} (KHTML, like Gecko) {{CH_BrowserName}}/{{CH_UAFullVersion}} Mobile Safari/{{Safari_version}}",Bb:"Mozilla/{{Mozilla_version}} ({{CH_model}}; {{CH_architecture}} {{CH_platform}} {{CH_platformVersion}}) AppleWebKit/{{AppleWebKit_version}} (KHTML, like Gecko) {{CH_BrowserName}}/{{CH_UAFullVersion}} Mobile Safari/{{Safari_version}}",xa:"Mozilla/{{Mozilla_version}} (X11; {{CH_platform}} {{CH_platformVersion}}; {{CH_architecture}}_{{CH_bitness}}) AppleWebKit/{{AppleWebKit_version}} (KHTML, like Gecko) {{CH_BrowserName}}/{{CH_UAFullVersion}} Safari/{{Safari_version}}",Aa:"Mozilla/{{Mozilla_version}} ({{CH_platform}} {{CH_platformVersion}}; {{CH_model}} {{CH_architecture}}) AppleWebKit/{{AppleWebKit_version}} (KHTML, like Gecko) {{CH_BrowserName}}/{{CH_UAFullVersion}} Safari/{{Safari_version}}"},{u:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t=t.replace("{{"+n+"}}",e[n]));return t},Ra:function(t,e){var n=t.platform,o=t.wb,r=t.Qa,i=t.tb,s=e.qa.version,a=e.ea.version,u=e.ta.version;return null!=s&&""!==s||(s="5.0"),null!=a&&""!==a||(a="537.36"),null!=u&&""!==u||(u="537.36"),null!=n&&""!==n||(n=e.ra.name),null!=o&&""!==o||(o=e.ra.version),null!=r&&""!==r||(r=e.Fa.version),null!=i&&""!==i||(i=e.M.model),{CH_architecture:t.Da,CH_platform:n,CH_platformVersion:o,CH_BrowserName:t.Ga,CH_UAFullVersion:r,CH_model:i,CH_bitness:t.Ea,Mozilla_version:s,AppleWebKit_version:a,Safari_version:u}},Pa:function(t){var e=+(r=t.match(/\d*\.|\d+/g)||[])[0]||0,n=+r[1]||0,o=+r[2]||0,r=+r[3]||0;return 8>=e?t:t=(r?[e,n,o,r]:o?[e,n,o]:n?[e,n]:[e]).join(".")}},function(){function t(t){var e=t||("undefined"!=typeof window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"");return this.Ua=function(){var t={name:null,version:null};return n.call(t,e,i),t},this.Ya=function(){var t={vendor:null,model:null,type:null};return n.call(t,e,s),t},this.ab=function(){var t={name:null,version:null};return n.call(t,e,u),t},this.Ta=function(){var t={name:null,version:null};return n.call(t,e,a),t},this.fb=function(){var t={name:null,version:null};return n.call(t,e,c),t},this.cb=function(){var t={name:null,version:null};return n.call(t,e,l),t},this.eb=function(){return{Qb:this.ib(),Fa:this.Ua(),qa:this.ab(),ea:this.Ta(),ta:this.fb(),ra:this.cb(),M:this.Ya()}},this.ib=function(){return e},this.ua=function(t){e="string"==typeof t&&255<t.length?o(t,255):t},this.ua(e),this}function e(t,e){for(var n in e)if("object"==typeof e[n]&&0<e[n].length){for(var o=0;o<e[n].length;o++)if(r(e[n][o],t))return"?"===n?void 0:n}else if(r(e[n],t))return"?"===n?void 0:n;return t}function n(t,e){for(var n,o,r,i,s,a,u=0;u<e.length&&!s;){var c=e[u],l=e[u+1];for(n=o=0;n<c.length&&!s;)if(s=c[n].exec(t),n++,s)for(r=0;r<l.length;r++)a=s[++o],"object"==typeof(i=l[r])&&0<i.length?2===i.length?this[i[0]]="function"==typeof i[1]?i[1].call(this,a):i[1]:3===i.length?this[i[0]]="function"!=typeof i[1]||i[1].exec&&i[1].test?a?a.replace(i[1],i[2]):void 0:a?i[1].call(this,a,i[2]):void 0:4===i.length&&(this[i[0]]=a?i[3].call(this,a.replace(i[1],i[2])):void 0):this[i]=a||void 0;u+=2}}function o(t,e){return"string"==typeof t?(t=t.replace(/^\s\s*/,"").replace(/\s\s*$/,""),void 0===e?t:t.substring(0,255)):""}function r(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())}var i=[[/\b(?:crmo|crios)\/([\w\.]+)/i],["version",["name","Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],["version",["name","Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],["name","version"],[/opios[\/ ]+([\w\.]+)/i],["version",["name","Opera Mini"]],[/\bopr\/([\w\.]+)/i],["version",["name","Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],["name","version"],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],["version",["name","UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],["version",["name","WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],["version",["name","WeChat"]],[/konqueror\/([\w\.]+)/i],["version",["name","Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],["version",["name","IE"]],[/yabrowser\/([\w\.]+)/i],["version",["name","Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[["name",/(.+)/,"$1 Secure Browser"],"version"],[/\bfocus\/([\w\.]+)/i],["version",["name","Firefox Focus"]],[/\bopt\/([\w\.]+)/i],["version",["name","Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],["version",["name","Coc Coc"]],[/dolfin\/([\w\.]+)/i],["version",["name","Dolphin"]],[/coast\/([\w\.]+)/i],["version",["name","Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/fxios\/([-\w\.]+)/i],["version",["name","Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[["name","360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[["name",/(.+)/,"$1 Browser"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],["name","version"],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],["name"],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[["name","Facebook"],"version"],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],["name","version"],[/\bgsa\/([\w\.]+) .*safari\//i],["version",["name","GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],["version",["name","Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[["name","Chrome WebView"],"version"],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],["version",["name","Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],["name","version"],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],["version","name"],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],["name",["version",e,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[["name","Netscape"],"version"],[/mobile vr; rv:([\w\.]+)\).+firefox/i],["version",["name","Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],["name","version"]],s=[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],["model",["vendor","Samsung"],["type","tablet"]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],["model",["vendor","Samsung"],["type","mobile"]],[/\((ip(?:hone|od)[\w ]*);/i],["model",["vendor","Apple"],["type","mobile"]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],["model",["vendor","Apple"],["type","tablet"]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],["model",["vendor","Huawei"],["type","tablet"]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],["model",["vendor","Huawei"],["type","mobile"]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","tablet"]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],["model",["vendor","OPPO"],["type","mobile"]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],["model",["vendor","Vivo"],["type","mobile"]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],["model",["vendor","Realme"],["type","mobile"]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],["model",["vendor","Motorola"],["type","mobile"]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],["model",["vendor","Motorola"],["type","tablet"]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],["model",["vendor","LG"],["type","tablet"]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],["model",["vendor","LG"],["type","mobile"]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],["model",["vendor","Lenovo"],["type","tablet"]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[["model",/_/g," "],["vendor","Nokia"],["type","mobile"]],[/(pixel c)\b/i],["model",["vendor","Google"],["type","tablet"]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],["model",["vendor","Google"],["type","mobile"]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],["model",["vendor","Sony"],["type","mobile"]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[["model","Xperia Tablet"],["vendor","Sony"],["type","tablet"]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],["model",["vendor","OnePlus"],["type","mobile"]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[["model",/(.+)/g,"Fire Phone $1"],["vendor","Amazon"],["type","mobile"]],[/(playbook);[-\w\),; ]+(rim)/i],["model","vendor",["type","tablet"]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],["model",["vendor","ASUS"],["type","tablet"]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],["model",["vendor","ASUS"],["type","mobile"]],[/(nexus 9)/i],["model",["vendor","HTC"],["type","tablet"]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],["vendor",["model",/_/g," "],["type","mobile"]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],["model",["vendor","Acer"],["type","tablet"]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],["model",["vendor","Meizu"],["type","mobile"]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],["model",["vendor","Sharp"],["type","mobile"]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],["vendor","model",["type","mobile"]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],["vendor","model",["type","tablet"]],[/(surface duo)/i],["model",["vendor","Microsoft"],["type","tablet"]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],["model",["vendor","Fairphone"],["type","mobile"]],[/(u304aa)/i],["model",["vendor","AT&T"],["type","mobile"]],[/\bsie-(\w*)/i],["model",["vendor","Siemens"],["type","mobile"]],[/\b(rct\w+) b/i],["model",["vendor","RCA"],["type","tablet"]],[/\b(venue[\d ]{2,7}) b/i],["model",["vendor","Dell"],["type","tablet"]],[/\b(q(?:mv|ta)\w+) b/i],["model",["vendor","Verizon"],["type","tablet"]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],["model",["vendor","Barnes & Noble"],["type","tablet"]],[/\b(tm\d{3}\w+) b/i],["model",["vendor","NuVision"],["type","tablet"]],[/\b(k88) b/i],["model",["vendor","ZTE"],["type","tablet"]],[/\b(nx\d{3}j) b/i],["model",["vendor","ZTE"],["type","mobile"]],[/\b(gen\d{3}) b.+49h/i],["model",["vendor","Swiss"],["type","mobile"]],[/\b(zur\d{3}) b/i],["model",["vendor","Swiss"],["type","tablet"]],[/\b((zeki)?tb.*\b) b/i],["model",["vendor","Zeki"],["type","tablet"]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[["vendor","Dragon Touch"],"model",["type","tablet"]],[/\b(ns-?\w{0,9}) b/i],["model",["vendor","Insignia"],["type","tablet"]],[/\b((nxa|next)-?\w{0,9}) b/i],["model",["vendor","NextBook"],["type","tablet"]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[["vendor","Voice"],"model",["type","mobile"]],[/\b(lvtel\-)?(v1[12]) b/i],[["vendor","LvTel"],"model",["type","mobile"]],[/\b(ph-1) /i],["model",["vendor","Essential"],["type","mobile"]],[/\b(v(100md|700na|7011|917g).*\b) b/i],["model",["vendor","Envizen"],["type","tablet"]],[/\b(trio[-\w\. ]+) b/i],["model",["vendor","MachSpeed"],["type","tablet"]],[/\btu_(1491) b/i],["model",["vendor","Rotor"],["type","tablet"]],[/(shield[\w ]+) b/i],["model",["vendor","Nvidia"],["type","tablet"]],[/(sprint) (\w+)/i],["vendor","model",["type","mobile"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],["model",["vendor","Zebra"],["type","tablet"]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],["model",["vendor","Zebra"],["type","mobile"]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],["vendor","model",["type","console"]],[/droid.+; (shield) bui/i],["model",["vendor","Nvidia"],["type","console"]],[/(playstation [345portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],["model",["vendor","Microsoft"],["type","console"]],[/smart-tv.+(samsung)/i],["vendor",["type","smarttv"]],[/hbbtv.+maple;(\d+)/i],[["model",/^/,"SmartTV"],["vendor","Samsung"],["type","smarttv"]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[["vendor","LG"],["type","smarttv"]],[/(apple) ?tv/i],["vendor",["model","Apple TV"],["type","smarttv"]],[/crkey/i],[["model","Chromecast"],["vendor","Google"],["type","smarttv"]],[/droid.+aft(\w)( bui|\))/i],["model",["vendor","Amazon"],["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[["vendor",o],["model",o],["type","smarttv"]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[["type","smarttv"]],[/((pebble))app/i],["vendor","model",["type","wearable"]],[/droid.+; (glass) \d/i],["model",["vendor","Google"],["type","wearable"]],[/droid.+; (wt63?0{2,3})\)/i],["model",["vendor","Zebra"],["type","wearable"]],[/(quest( 2)?)/i],["model",["vendor","Facebook"],["type","wearable"]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],["vendor",["type","embedded"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],["model",["type","mobile"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],["model",["type","tablet"]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[["type","tablet"]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[["type","mobile"]],[/(android[-\w\. ]{0,9});.+buil/i],["model",["vendor","Generic"]]],a=[[/(applewebkit)\/([\w\.]+)/i],["name","version"]],u=[[/(mozilla)\/([\w\.]+)/i],["name","version"]],c=[[/(safari)\/([\w\.]+)/i],["name","version"]],l=[[/microsoft (windows) (vista|xp)/i],["name","version"],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],["name","version"],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[["name","Windows"],["version",e,{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[["version",/_/g,"."],["name","iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[["name","Mac OS"],["version",/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],["version","name"],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],["name","version"],[/\(bb(10);/i],["version",["name","BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],["version",["name","Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],["version",["name","Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],["version",["name","webOS"]],[/crkey\/([\d\.]+)/i],["version",["name","Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],["name","version"],[/(sunos) ?([\w\.\d]*)/i],[["name","Solaris"],"version"],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],["name","version"]];return t.Eb=["name","version","major"],t.Fb="model vendor type console mobile smarttv tablet wearable embedded".split(" "),t.Gb=["name","version"],t.Db=["name","version"],t.Nb=["name","version"],t.Ib=["name","version"],t}())),function(t){t()}(function(t,e,n,o,r,i,s,a,u,c,l){var p="",h="";return i.T[0]=function(e){return t.S(e,escape("@UTC@"),(r.Xa()||new Date).getTime())},i.h[106]=function(){return"1"},i.h[108]=function(){return p},i.h[109]=function(){return h},i.h[110]=function(){return e((new Date).getTime())},i.h[113]=function(){return 0+s.Y()},i.h[114]=function(){return n.Za()},i.h[115]=function(){var t=n.Z();return"boolean"==typeof t?0+t:""},i.h[116]=function(){return n.$()},i.h[118]=function(){return l.jb()||""},o.J.sa([function(){return c.Sa()}]),o.X.push(r.o,n.o,c.Ma,s.Ja,s.La),o.ca.push((function(){p=h="";var t=o.j,n=t[3];if(n){t=t[4];t:{for(var r=n+"=",i=document.cookie.split(/; */g),s=0;s<i.length;s++){var a=i[s];if(0===a.indexOf(r)){h=a.substring(r.length,a.length);break t}}h=""}h?p="0":(r=(new Date).getTime(),h=e(r),document.cookie=n+"="+h+"; expires="+new Date(r+63072e6).toUTCString()+(t?"; domain=."+t:"")+"; path=/",p="1")}})),function(t){a(t)}}(e,n,s,o,a,p,u,c,0,function(t,e){function n(t,n,o){function r(t){s.reject(t)}function i(t){s.O(t)}var s=new e;try{try{t[n].apply(t,o).then(i,r)}catch(a){t[n].apply(t,o.concat([i,r]))}}catch(a){r(a)}return s}var o=window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection,r=[];return{Ma:function(){var i=null,s=null;return{start:function(t){try{r=[],(i=new o({iceServers:[]})).onicecandidate=function(n){if(!t.g()){var o;t:{try{var i=n.candidate;if(i){var s=i.candidate;if(s){r.push(s),o=!0;break t}}}catch(e){}o=!1}o||t.b()}},s=i.createDataChannel(""),n(i,"createOffer",[]).then((function(e){if(!t.g())return n(i,"setLocalDescription",[e])})).then(null,(function(){t.g()||t.b()}))}catch(e){t.b()}},finish:function(){i&&(i.onicecandidate=null,s&&(s.close(),s=null),i.close(),i=null)},v:t.l}},Sa:function(){for(var t="",e="",n=0;n<r.length;n++){var o=r[n].replace(/^[^:]*:/,"").split(" ");8<=o.length&&(t+=e+o[4]+" "+o[7],e=",")}return t}}}(o,r),function(){var t=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=/android|\badr\b|silk|kindle/i;return{jb:function(){if(window.WebGLRenderingContext&&!e.test(navigator.userAgent)){for(var n=document.createElement("canvas"),o=null,r=0;r<t.length&&!o;r++)o=n.getContext(t[r]);if(null!==o&&o.getExtension("WEBGL_debug_renderer_info"))return o.getParameter(37446)}return null},Cb:function(){if(!window.WebGLRenderingContext)throw Error();var e={m:null,Ia:null,Lb:function(t){return this.m.getParameter(t)},Jb:function(t){return this.m.getContextAttributes()[t]},Mb:function(t,e){return this.m.getShaderPrecisionFormat(t,e)},Kb:function(){return this.m.getSupportedExtensions()},pb:function(){if(!this.m){for(var e=document.createElement("canvas"),n=0;n<t.length;n++){var o=t[n];if(this.m=e.getContext(o))return void(this.Ia=o)}throw Error()}}};return e.pb(),e}}}()))}(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).xmsdk={})}(this,(function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}var i=function(){function t(e){n(this,t),this._host=e}return r(t,[{key:"extractHeaders",value:function(t){return t.trim().split(/[\r\n]+/).map((function(t){var e=t.split(": "),n=e.shift(),o=e.join(": "),r=new com.ts.mobile.sdk.TransportHeader;return r.setName(n),r.setValue(o),r}))}},{key:"sendRequest",value:function(t){var e=this;return new Promise((function(n,o){var r=new XMLHttpRequest,i=function(){o(new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.Communication,r.responseText))};r.open(t.getMethod(),t.getUrl(),!0),r.withCredentials=!0,r.onreadystatechange=function(){if(4===r.readyState)try{if(0===r.status)return e._host.log(com.ts.mobile.sdk.LogLevel.Error,"transport","Destination server is invalid or the server does not support access-control-allow-origin."),o(new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.Communication,r.responseText));JSON.parse(r.responseText);var s=new com.ts.mobile.sdk.TransportResponse;s.setStatus(r.status),s.setMethod(t.getMethod()),s.setHeaders(e.extractHeaders(r.getAllResponseHeaders())),s.setBodyJson(r.responseText),n(s)}catch(t){i()}},r.onerror=function(){i()},t.getHeaders().forEach((function(t){r.setRequestHeader(t.getName(),t.getValue())})),r.setRequestHeader("Content-Type","application/json"),r.send(t.getBodyJson())}))}}]),t}(),s={ts_gen_back:"BACK",ts_gen_skip:"SKIP",ts_gen_continue:"Continue",ts_gen_cancel:"CANCEL",ts_gen_close:"CLOSE",ts_gen_ok:"OK",ts_gen_default:"Default",ts_gen_restart:"RESTART",ts_gen_expired:"Authenticator expired. Please reregister.",ts_gen_cancel_authentication:"CANCEL",ts_gen_change_authenticator:"CHANGE METHOD",ts_gen_select_authenticator:"CHANGE METHOD",ts_gen_retry_authenticator:"TRY AGAIN",ts_gen_dismiss:"DISMISS",ts_authenticator_device_biometrics:"Device Biometrics",ts_authenticator_password:"Password",ts_authenticator_pin:"PIN",ts_authenticator_pattern:"Pattern",ts_authenticator_otp:"OTP",ts_authenticator_fingerprint:"Fingerprint",ts_authenticator_question:"Security Questions",ts_authenticator_face_id:"Face ID",ts_authenticator_touch_id:"Touch ID",ts_authenticator_totp:"Soft Token",ts_authenticator_pattern_centralized:"Pattern",ts_authenticator_pin_centralized:"PIN",ts_authenticator_voice_server:"Voice",ts_authenticator_fido2:"FIDO2",ts_authenticator_mobile_approve:"Mobile Approve",ts_authenticator_face_server:"Face",ts_authenticator_fido_fidopin:"PIN",ts_authenticator_fido_fidoface:"Face ID",ts_authenticator_fido_fidofp:"Fingerprint",ts_authenticator_device_biometrics_description:"Use the biometric sensors registered on your device",ts_authenticator_password_description:"",ts_authenticator_pin_description:"Numeric PIN code",ts_authenticator_pin_centralized_description:"Numeric PIN code",ts_authenticator_pattern_description:"Visual pattern",ts_authenticator_pattern_centralized_description:"Visual pattern",ts_authenticator_otp_description:"One time password sent to your phone or email",ts_authenticator_voice_description:"Use your voice print",ts_authenticator_voice_server_description:"Use your voice print",ts_authenticator_questions_description:"Knowledge based questions",ts_authenticator_face_description:"Use your smartphone's camera",ts_authenticator_fingerprint_description:"Use your smartphone's biometric sensor",ts_authenticator_face_id_description:"Use Face ID",ts_authenticator_touch_id_description:"Use Touch ID",ts_authenticator_totp_description:"Use soft token",ts_authenticator_mobile_approve_description:"Use mobile approve",ts_authenticator_fido2_description:"Use a security key",ts_authenticator_password_title_auth:"Authenticate with Password",ts_authenticator_password_title_reg:"Register Password",ts_authenticator_password_intro_auth:"",ts_authenticator_password_intro_reg:"",ts_authenticator_password_field_hint:"Password",ts_authenticator_password_reg_field_hint:"Repeat password",ts_authenticator_password_cta_positive:"CONTINUE",ts_authenticator_password_error_too_short:"Password too short!",ts_authenticator_password_error_reg_no_match:"Passwords don't match!",ts_authenticator_password_error_reg_strength_validation_failed:"Password must be at least 6 characters long, and contain a mix of lowercase characters, uppercase characters, and digits.",ts_authenticator_pin_title_auth:"Authenticate with PIN Code",ts_authenticator_pin_title_reg:"Register PIN Code",ts_authenticator_pin_intro_auth:"Enter your PIN Code to proceed",ts_authenticator_pin_intro_reg:"Enter your new PIN Code to proceed",ts_authenticator_pin_intro_repeat:"Re-enter your new PIN Code",ts_authenticator_pin_error_reg_no_match:"Codes don't match!",ts_authenticator_pin_code_length:"Enter your %1$s-digit PIN code",ts_authenticator_otp_title_auth:"Authenticate with OTP",ts_authenticator_otp_qr_title:"Authenticate with QR",ts_authenticator_otp_targets_intro:"Please select how you want us to deliver a One Time Password to you.",ts_authenticator_otp_sms_title:"SMS",ts_authenticator_otp_email_title:"EMAIL",ts_authenticator_otp_voice_title:"VOICE",ts_authenticator_otp_push_title:"PUSH",ts_authenticator_otp_unknown_title:"Unknown",ts_authenticator_otp_sms_sent:"A text message with a code was sent to your phone. Please type it here.",ts_authenticator_otp_email_sent:"A code was sent to your email. Please type it here.",ts_authenticator_otp_push_sent:"A push notification with a code was sent to your phone. Please type it here.",ts_authenticator_otp_voice_sent:"A voice message with a code is being delivered to your phone. Please type it here.",ts_authenticator_otp_qr_sent:"A QR code was sent to your email. Please scan it.",ts_authenticator_otp_external_numeric_sent:"A code is being delivered to you. Please type it here.",ts_authenticator_otp_external_qr_sent:"Please scan the QR code to proceed",ts_authenticator_otp_resend:"RESEND OTP",ts_authenticator_otp_resend_message:"Didn't get the code?",ts_authenticator_otp_resend_intro:"Code resent.",ts_authenticator_otp_error_qr_permission:"Using QR to authenticate requires permission to access your phone's camera",ts_authenticator_otp_error_code_expired:"Your code is no longer valid, please request a new one",ts_authenticator_otp_code_length:"Enter the %1$s-digit code",ts_authenticator_pattern_title_auth:"Authenticate with Pattern",ts_authenticator_pattern_title_reg:"Register Pattern",ts_authenticator_pattern_intro_auth:"Draw your pattern to proceed",ts_authenticator_pattern_intro_reg:"Draw your new pattern to proceed",ts_authenticator_pattern_mismatch:"Patterns don't match. Re-draw your new pattern to proceed.",ts_authenticator_pattern_error_min_points:"Pattern is too short. Try again",ts_authenticator_pattern_intro_repeat:"Re-draw your pattern",ts_authenticator_pattern_cta_reset:"RESTART",ts_authenticator_fingerprint_title_auth:"Authenticate with Fingerprint",ts_authenticator_fingerprint_title_reg:"Confirm fingerprint to continue",ts_authenticator_fingerprint_status_hint:"Touch sensor",ts_authenticator_faceid_title_auth:"Authenticate with Face ID",ts_authenticator_faceid_title_reg:"Confirm Face ID to continue",ts_authenticator_touchid_title_reg:"Authenticate with Touch ID",ts_authenticator_touchid_title_auth:"Confirm Touch ID to continue",ts_authenticator_device_biometrics_title_auth:"Authenticate with device biometrics",ts_authenticator_device_biometrics_title_reg:"Confirm device biometrics to continue",ts_authenticator_device_biometrics_intro_auth:"Authenticate biometric to continue",ts_authenticator_device_biometrics_intro_reg:"Register biometric to continue",ts_authenticator_device_biometrics_prompt:"Follow biometric instructions",ts_authenticator_device_biometrics_cancel_cta:"Cancel biometric",ts_authenticator_questions_title_auth:"Authenticate with Security Questions",ts_authenticator_questions_title_reg:"Register Security Questions",ts_authenticator_questions_intro_auth:"Answer the question below to proceed",ts_authenticator_questions_intro_reg:"You have to answer at least %1$s of %2$s questions specified below to proceed.",ts_authenticator_questions_left:"%1$s of %2$s questions answered",ts_authenticator_questions_error_answer_empty:"Please provide an answer",ts_authenticator_voice_title_auth:"Authenticate with Voice",ts_authenticator_voice_title_reg:"Register Voice",ts_authenticator_voice_intro_auth:"Follow instructions to authenticate with your voice signature",ts_authenticator_voice_intro_reg:"Follow instructions to register your voice signature",ts_authenticator_voice_passphrase:"Hold to record and repeat the following passphrase %1$s.",ts_authenticator_voice_passphrase_subtitle:"You might be prompted to say it more than once.",ts_authenticator_voice_instructions:"Please record again.",ts_authenticator_voice_record_start:"Hold to record",ts_authenticator_voice_record_stop:"Release to stop",ts_authenticator_voice_request_audio_permission:"Recording voice requires permission to access your phone's microphone",ts_authenticator_voice_error_too_long:"The recording is too long",ts_authenticator_voice_error_too_short:"Recording too short",ts_authenticator_voice_error_too_loud:"Recording too loud",ts_authenticator_voice_error_too_weak:"Recording too weak",ts_authenticator_voice_error_too_noisy:"Recording too noisy",ts_authenticator_voice_error_invalid:"Wrong passphrase!",ts_authenticator_face_title_auth:"Authenticate with Face",ts_authenticator_face_title_reg:"Register Face",ts_authenticator_face_intro_auth:"Capture a selfie in order to proceed",ts_authenticator_face_intro_reg:"Capture a selfie in order to proceed",ts_authenticator_face_error_invalid:"Could not find a match, please try again",ts_authenticator_totp_title:"Authenticate with Soft Token",ts_authenticator_totp_targets_intro:"Please select device",ts_authenticator_totp_input_intro:"Please input code",ts_authenticator_totp_input_with_challenge_intro:"Please use challenge and input code",ts_authenticator_totp_input_with_qr_challenge_intro:"Please scan QR challenge and input code",ts_authenticator_totp_qrcode_challenge_step1_message:"Step 1: Scan this QR code using your mobile app",ts_authenticator_totp_qrcode_challenge_step2_message:"Step 2: Enter the code generated by your mobile app",ts_authenticator_totp_code_challenge_step1_message:"Step 1: Enter this key into your mobile app",ts_authenticator_totp_code_challenge_step2_message:"Step 2: Enter the code generated by your mobile app",ts_authenticator_totp_input_hint:"Insert code",ts_authenticator_totp_targets_recently_used:"Recently used: %1$s",ts_authenticator_totp_targets_current_device:"Current Device",ts_authenticator_mobile_approve_title:"Mobile Approve",ts_authenticator_mobile_approve_fetching_data:"Please wait... Fetching data",ts_authenticator_mobile_approve_send:"SEND",ts_authenticator_mobile_approve_send_to_all:"SEND TO ALL",ts_authenticator_mobile_approve_targets_intro:"Please select device",ts_authenticator_mobile_approve_targets_recently_used:"Recently used: %1$s",ts_authenticator_mobile_approve_targets_current_device:"Current Device",ts_authenticator_mobile_approve_resend_message:"Didn't get the approval request?",ts_authenticator_mobile_approve_resend_cta:"RESEND",ts_session_config_title:"Authenticator configuration",ts_session_config_intro:"Register, remove or change your authenticators.",ts_session_config_item_action_register:"REGISTER",ts_session_config_item_action_unregister:"UNREGISTER",ts_session_config_item_action_reregister:"CHANGE",ts_session_config_item_action_set_as_default:"SET AS DEFAULT",ts_session_config_item_register_result:"%1$s registered successfully",ts_session_config_item_reregister_result:"%1$s changed successfully",ts_session_config_item_unregister_result:"%1$s unregistered successfully",ts_session_config_item_default_result:"%1$s is now the default authenticator",ts_session_config_item_register_failed:"%1$s registration failed. %2$s",ts_session_config_item_reregister_failed:"%1$s change failed. %2$s",ts_session_config_item_unregister_failed:"%1$s unregistration failed. %2$s",ts_session_config_item_default_failed:"Failed to make %1$s the default authenticator. %2$s",ts_session_config_item_unregister_dialog_title:"Are your sure?",ts_session_config_item_unregister_dialog_message:"Do you want to unregister %1$s?",ts_session_config_item_unregister_dialog_cta:"UNREGISTER",ts_session_config_error_dialog_title:"Something went wrong",ts_session_totp_title:"Generate Soft Token",ts_session_totp_content:"Your code is being reset every %1$s seconds.",ts_session_totp_unbound_title:"Unbound TOTP Generation",ts_session_totp_unbound_content:"Your TOTP code has been generated",ts_session_totp_unbound_code:"Your TOTP code is: %1$s",ts_session_totp_nottl_content:"Please use this code.",ts_session_totp_provision_sa_title:"Select Authenticator for Provisioning Soft Token",ts_session_totp_provision_password_title:"Provision Soft Token With Password",ts_session_totp_provision_pattern_title:"Provision Soft Token With Pattern",ts_session_totp_provision_pin_title:"Provision Soft Token With PIN",ts_session_totp_generation_sa_title:"Generate Soft Token with Authenticator",ts_session_totp_generation_password_title:"Generate Soft Token with Password",ts_session_totp_generation_pattern_title:"Generate Soft Token with Pattern",ts_session_totp_generation_pin_title:"Generate Soft Token with PIN",ts_session_totp_generation_fingerprint_title:"Generate Soft Token with Fingerprint",ts_session_totp_generation_device_biometrics_title:"Generate Soft Token with Device Biometrics",ts_session_totp_challenge_title_list:"Soft Token with Challenge",ts_session_totp_challenge_intro_list:"Choose challenge type",ts_session_totp_challenge_title_textual:"Textual",ts_session_totp_challenge_intro_textual:"Enter the challenge to proceed",ts_session_totp_challenge_title_qr:"QR Code",ts_session_totp_challenge_intro_qr:"Scan the QR code to proceed",ts_session_approval_approve:"APPROVE",ts_session_approval_deny:"DENY",ts_session_approval_completed_title:"Success",ts_session_approval_completed_subtitle:"The request has been successfully approved. Please return to the requesting application.",ts_session_approval_completed_denied_subtitle:"The request has been successfully denied. Please return to the requesting application.",ts_session_approval_dialog_title:"Deny approval",ts_session_approval_dialog_message:"Deny approval",ts_session_approval_dialog_cta:"DENY",ts_session_approval_approve_failed:"'%1$s' failed to approve",ts_session_approval_deny_failed:"'%1$s' failed to deny",ts_session_approval_approve_failed_title:"An Error Occurred",ts_session_approval_deny_failed_title:"An Error Occurred",ts_session_approval_approve_failed_cta:"CLOSE",ts_session_approval_deny_failed_cta:"CLOSE",ts_session_approval_username:"Username",ts_session_approval_service:"Service",ts_session_approval_description:"Details",ts_session_approval_requested_device:"Requesting Device",ts_session_approval_expiry:"Expiry",ts_session_approval_requested_location:"Request Location",ts_session_approval_request_expires_time:"Your request expires in %1$s",ts_session_approval_request_has_expired:"Your request has expired",ts_session_dm_title:"Your Devices",ts_session_dm_intro:"These are the devices you've used to log into our applications. Click on a device for more information and options.",ts_session_dm_section_current:"This device",ts_session_dm_section_others:"Other devices",ts_session_dm_last_used_date:"Last used: %1$s",ts_session_dm_last_used_location:"at %1$s",ts_session_dm_added_at:"Added at: %1$s",ts_session_dm_details_title:"Your Device Details",ts_session_dm_details_subtitle:"Details about your device",ts_session_dm_details_current_device:"Current device",ts_session_dm_details_push_title:"Find my phone",ts_session_dm_details_push_subtitle:"Click this button to send a push notification to this device",ts_session_dm_details_push_action:"SEND",ts_session_dm_details_rename_action:"RENAME",ts_session_dm_details_remove_subtitle:"You can remove this device if you're not using it anymore.",ts_session_dm_details_remove_action:"REMOVE",ts_session_dm_details_no_other_devices_available:"No other devices available at the moment",ts_session_dm_item_action_dialog_remove_title:"Remove '%1$s'",ts_session_dm_item_action_dialog_remove_message:"Are you sure you want to remove this device?",ts_session_dm_item_action_dialog_remove_cta:"REMOVE",ts_session_dm_item_action_dialog_rename_title:"Rename '%1$s'",ts_session_dm_item_action_dialog_rename_cta:"RENAME",ts_session_dm_details_rename_input_hint:"New Device Name",ts_session_dm_item_action_rename_result_positive:"Device %1$s was renamed successfully to %2$s",ts_session_dm_item_action_rename_result_negative:"Failed to rename %1$s. %2$s",ts_session_dm_item_action_remove_result_positive:"Device %1$s was removed successfully",ts_session_dm_item_action_remove_result_negative:"Failed to remove %1$s. %2$s",ts_session_dm_item_action_identify_result_positive:"Sent mobile notification to device %1$s successfully",ts_session_dm_item_action_identify_result_negative:"Failed to send push notification to %1$s. %2$s",ts_session_dm_error_dialog_title:"Something went wrong",ts_session_promotion_title:"Promotion",ts_session_promotion_intro:"Select authentication method to register",ts_session_promotion_skip:"SKIP",ts_session_promotion_abort:"ABORT",ts_promise_sa_title:"Verify It's You",ts_promise_sa_content:"Choose how you want to verify yourself",ts_promise_co_title_auth:"Authentication canceled!",ts_promise_co_title_reg:"Registration canceled!",ts_promise_fallback_title:"%1$s failed.",ts_promise_fallback_content:"Would you like to try a different method?",ts_promise_fallback_action_fallback:"TRY ANOTHER METHOD",ts_promise_fallback_action_menu:"CHANGE METHOD",ts_promise_fallback_action_retry:"TRY AGAIN",ts_promise_fallback_action_cancel:"CANCEL",ts_promise_co_content:"What would you like to do?",ts_promise_co_abort:"ABORT",ts_promise_co_select:"SELECT METHOD",ts_promise_co_change:"CHANGE METHOD",ts_promise_co_retry:"RETRY METHOD",ts_promise_error_default_title_auth:"Authentication failed",ts_promise_error_default_title_reg:"Registration failed",ts_promise_error_default_content_auth:"%1$s",ts_promise_error_default_content_reg:"%1$s",ts_promise_error_lock_title:"Authenticator Locked!",ts_promise_error_lock_content:"Too many failed attempts",ts_promise_invalid_authenticator_title:"%1$s invalidated",ts_promise_invalid_authenticator_content:"This authenticator has became invalid and is no longer available.",ts_promise_invalid_authenticator_cta:"CONTINUE",ts_promise_rejection_policy_title:"Error",ts_promise_rejection_policy_content:"Configuration error, please contact support",ts_promise_rejection_policy_cta:"CONTINUE",ts_promise_rejection_locked_user_title:"User Locked",ts_promise_rejection_locked_user_content:"You have been locked, please contact support",ts_promise_rejection_locked_user_cta:"CONTINUE",ts_promise_rejection_locked_device_title:"Device Locked",ts_promise_rejection_locked_device_content:"Your device has been locked, please contact support",ts_promise_rejection_locked_device_cta:"CONTINUE",ts_promise_rejection_locked_application_title:"Application Locked",ts_promise_rejection_locked_application_content:"Your application has been locked, please contact support",ts_promise_rejection_locked_application_cta:"CONTINUE",ts_promise_rejection_approval_expired_title:"Expired",ts_promise_rejection_approval_expired_content:"Request has expired, please try again",ts_promise_rejection_approval_expired_cta:"CONTINUE",ts_session_authenticator_expired_title:"%1$s Expired",ts_session_authenticator_expired_content:"Click continue to reregister",ts_promise_rejection_feature_not_supported_title:"Upgrade Required",ts_promise_rejection_feature_not_supported_content:"Your application is too old, please upgrade",ts_promise_rejection_feature_not_supported_cta:"CONTINUE",ts_promise_rejection_cannot_consume_ticket_title:"Error",ts_promise_rejection_cannot_consume_ticket_content:"Configuration error, please contact support",ts_promise_rejection_cannot_consume_ticket_cta:"CONTINUE",ts_promise_rejection_username_already_exists_title:"User Already Exists",ts_promise_rejection_username_already_exists_content:"The user %1$s already exists.",ts_promise_rejection_username_already_exists_cta:"CLOSE",ts_promise_rejection_authenticator_fatal_error_title:"An Error Occurred",ts_promise_rejection_authenticator_fatal_error_content:"Something went wrong when trying to add or verify using this method. ",ts_promise_rejection_authenticator_fatal_error_cta:"CLOSE",ts_accessibility_totp_reset:"New code is %1$s. %2$s seconds left before reset.",ts_accessibility_totp_reader:"Code is %1$s. %2$s seconds left.",ts_accessibility_totp_no_ttl:"Your code is %1$s.",ts_accessibility_configuration_cta_register:"Register %1$s",ts_accessibility_configuration_cta_unregister:"Unregister %1$s",ts_accessibility_configuration_cta_reregister:"Change %1$s",ts_accessibility_input_reader:"%1$s cells filled, %2$s cells remaining",ts_accessibility_input_pin_cell:"Cell filled",ts_accessibility_input_reset:"Cells were reset.",ts_accessibility_authenticator_list_locked:"%1$s authenticator is locked. selection disabled.",ts_accessibility_authenticator_list_disabled:"%1$s authenticator is unregistered. selection disabled.",ts_accessibility_authenticator_list_enabled:"%1$s authenticator. double tap to authenticate",ts_accessibility_authenticator_list_default:"%1$s authenticator is the Default authenticator. double tap to authenticate",ts_accessibility_hide_input_field:"Hide Input field",ts_accessibility_show_input_field:"Show Input field",ts_accessibility_back:"Back",ts_accessibility_cancel:"Cancel",ts_accessibility_password_enter_password:"Enter your new password",ts_accessibility_password_enter_password_again:"Enter your new password again",ts_accessibility_password_error_reg_no_match:"Passwords don't match. Try again",ts_plugin_dynamic_form_mandatory:"%1$s *",ts_plugin_dynamic_form_error_mandatory:"'%1$s' is mandatory!",ts_plugin_dynamic_form_error_invalid:"'%1$s' invalid value",ts_plugin_dynamic_form_error_too_long:"'%1$s' is too long",ts_plugin_dynamic_form_error_not_phone:"'%1$s' isn't a valid phone number",ts_plugin_dynamic_form_error_not_email:"'%1$s' isn't a valid Email address",ts_plugin_dynamic_form_error_else:"Something went wrong",ts_plugin_dynamic_form_table_title:"Add row",ts_plugin_dynamic_form_table_title_item:"Add row to %1$s",ts_plugin_dynamic_form_error_general:"Failed to read '%1$s' value",ts_plugin_dynamic_form_item_cta_positive:"OK",ts_plugin_dynamic_form_item_cta_cancel:"Dismiss",ts_plugin_dynamic_form_item_cta_select_all:"Select All",ts_plugin_dynamic_form_item_cta_clear_all:"Clear All",ts_plugin_dynamic_form_item_phone_prefix:"%1$s +%2$s",ts_plugin_dynamic_form_item_phone_prefix_dialog_title:"Select country",ts_session_scan_qr_title:"Scan QR",ts_session_scan_qr_hint:"No QR code detected",ts_gen_recovery:"Forgot my %1$s"},a=function(){function t(){n(this,t)}return r(t,[{key:"formatAsTwoDigits",value:function(t){return t.toLocaleString("EN",{minimumIntegerDigits:2,useGrouping:!1})}},{key:"logDateFormat",value:function(t){var e=t.getFullYear(),n=this.formatAsTwoDigits(t.getMonth()+1),o=this.formatAsTwoDigits(t.getDate()),r=this.formatAsTwoDigits(t.getHours()),i=this.formatAsTwoDigits(t.getMinutes()),s=this.formatAsTwoDigits(t.getSeconds()),a=t.getMilliseconds().toLocaleString("EN",{minimumIntegerDigits:3,useGrouping:!1});return"".concat(e,"-").concat(n,"-").concat(o," ").concat(r,":").concat(i,":").concat(s,".").concat(a)}},{key:"log",value:function(t,e,n){var o=com.ts.mobile.sdk.LogLevel[t].toUpperCase();console.log("".concat(this.logDateFormat(new Date),"\t").concat(o,"\t").concat(e,":\t").concat(n))}}]),t}();function u(t,e,n){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(n=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var o=0,r={};o<arguments.length;o++){var i=arguments[o];for(var s in i)r[s]=i[s]}return r}({path:"/"},{},n)).expires){var r=new Date;r.setMilliseconds(r.getMilliseconds()+864e5*n.expires),n.expires=r}n.expires=n.expires?n.expires.toUTCString():"";try{o=JSON.stringify(e),/^[\{\[]/.test(o)&&(e=o)}catch(t){}e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var i="";for(var s in n)n[s]&&(i+="; "+s,!0!==n[s]&&(i+="="+n[s]));return document.cookie=t+"="+e+i}t||(o={});for(var a=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,c=0;c<a.length;c++){var l=a[c].split("="),p=l.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{var h=l[0].replace(u,decodeURIComponent);if(p=p.replace(u,decodeURIComponent),t===h){o=p;break}t||(o[h]=p)}catch(t){}}return o}}var c={set:u,get:function(t){return u.call(u,t)},remove:function(t){u(t,"",{expires:-1})}},l=function(){function t(e){n(this,t),this._persistent=e}return r(t,[{key:"setItem",value:function(t,e){var n=btoa(e);this._persistent?c.set(t,n,{expires:365}):c.set(t,n)}},{key:"removeItem",value:function(t){c.remove(t)}},{key:"getItem",value:function(t){var e=c.get(t);return e&&(e=atob(e)),e}}]),t}(),p=function(){function t(){n(this,t),this._memStore={}}return r(t,[{key:"setItem",value:function(t,e){this._memStore[t]=e}},{key:"removeItem",value:function(t){delete this._memStore[t]}},{key:"getItem",value:function(t){return this._memStore[t]}}]),t}(),h=function(){function t(e){if(n(this,t),"undefined"!=typeof window)try{this.currentStorage=window[e],this.currentStorage.setItem("ts:test","ok"),this.currentStorage.removeItem("ts:test")}catch(t){console.warn("Failed to use browser storage. Resorting to cookies."),this.currentStorage=new l("localStorage"==e)}else this.currentStorage=new p}return r(t,[{key:"setItem",value:function(t,e){this.currentStorage.setItem(t,e)}},{key:"getItem",value:function(t){return this.currentStorage.getItem(t)}},{key:"removeItem",value:function(t){this.currentStorage.removeItem(t)}}]),t}();h.localStorage=new h("localStorage"),h.sessionStorage=new h("sessionStorage");var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function f(t,e){return t(e={exports:{}},e.exports),e.exports}var m=f((function(t){!function(e,n,o){t.exports?t.exports=o():n.exports?n.exports=o():n.Fingerprint2=o()}(0,d,(function(){var t=function(t,e){var n=[0,0,0,0];return n[3]+=(t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]])[3]+(e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]])[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},e=function(t,e){var n=[0,0,0,0];return n[3]+=(t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]])[3]*(e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]])[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},n=function(t,e){return 32==(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:[t[1]<<(e-=32)|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e]},o=function(t,e){return 0==(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]},r=function(t,e){return[t[0]^e[0],t[1]^e[1]]},i=function(t){return t=r(t,[0,t[0]>>>1]),t=e(t,[4283543511,3981806797]),t=r(t,[0,t[0]>>>1]),t=e(t,[3301882366,444984403]),r(t,[0,t[0]>>>1])},s=function(s,a){for(var u=(s=s||"").length%16,c=s.length-u,l=[0,a=a||0],p=[0,a],h=[0,0],d=[0,0],f=[2277735313,289559509],m=[1291169091,658871167],g=0;g<c;g+=16)h=[255&s.charCodeAt(g+4)|(255&s.charCodeAt(g+5))<<8|(255&s.charCodeAt(g+6))<<16|(255&s.charCodeAt(g+7))<<24,255&s.charCodeAt(g)|(255&s.charCodeAt(g+1))<<8|(255&s.charCodeAt(g+2))<<16|(255&s.charCodeAt(g+3))<<24],d=[255&s.charCodeAt(g+12)|(255&s.charCodeAt(g+13))<<8|(255&s.charCodeAt(g+14))<<16|(255&s.charCodeAt(g+15))<<24,255&s.charCodeAt(g+8)|(255&s.charCodeAt(g+9))<<8|(255&s.charCodeAt(g+10))<<16|(255&s.charCodeAt(g+11))<<24],h=e(h,f),h=n(h,31),h=e(h,m),l=r(l,h),l=n(l,27),l=t(l,p),l=t(e(l,[0,5]),[0,1390208809]),d=e(d,m),d=n(d,33),d=e(d,f),p=r(p,d),p=n(p,31),p=t(p,l),p=t(e(p,[0,5]),[0,944331445]);switch(h=[0,0],d=[0,0],u){case 15:d=r(d,o([0,s.charCodeAt(g+14)],48));case 14:d=r(d,o([0,s.charCodeAt(g+13)],40));case 13:d=r(d,o([0,s.charCodeAt(g+12)],32));case 12:d=r(d,o([0,s.charCodeAt(g+11)],24));case 11:d=r(d,o([0,s.charCodeAt(g+10)],16));case 10:d=r(d,o([0,s.charCodeAt(g+9)],8));case 9:d=r(d,[0,s.charCodeAt(g+8)]),d=e(d,m),d=n(d,33),d=e(d,f),p=r(p,d);case 8:h=r(h,o([0,s.charCodeAt(g+7)],56));case 7:h=r(h,o([0,s.charCodeAt(g+6)],48));case 6:h=r(h,o([0,s.charCodeAt(g+5)],40));case 5:h=r(h,o([0,s.charCodeAt(g+4)],32));case 4:h=r(h,o([0,s.charCodeAt(g+3)],24));case 3:h=r(h,o([0,s.charCodeAt(g+2)],16));case 2:h=r(h,o([0,s.charCodeAt(g+1)],8));case 1:h=r(h,[0,s.charCodeAt(g)]),h=e(h,f),h=n(h,31),h=e(h,m),l=r(l,h)}return l=r(l,[0,s.length]),p=r(p,[0,s.length]),l=t(l,p),p=t(p,l),l=i(l),p=i(p),l=t(l,p),p=t(p,l),("00000000"+(l[0]>>>0).toString(16)).slice(-8)+("00000000"+(l[1]>>>0).toString(16)).slice(-8)+("00000000"+(p[0]>>>0).toString(16)).slice(-8)+("00000000"+(p[1]>>>0).toString(16)).slice(-8)},a={preprocessor:null,audio:{timeout:1e3,excludeIOS11:!0},fonts:{swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",userDefinedFonts:[],extendedJsFonts:!1},screen:{detectScreenOrientation:!0},plugins:{sortPluginsFor:[/palemoon/i],excludeIE:!1},extraComponents:[],excludes:{enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0},NOT_AVAILABLE:"not available",ERROR:"error",EXCLUDED:"excluded"},u=function(t,e){if(Array.prototype.forEach&&t.forEach===Array.prototype.forEach)t.forEach(e);else if(t.length===+t.length)for(var n=0,o=t.length;n<o;n++)e(t[n],n,t);else for(var r in t)t.hasOwnProperty(r)&&e(t[r],r,t)},c=function(t,e){var n=[];return null==t?n:Array.prototype.map&&t.map===Array.prototype.map?t.map(e):(u(t,(function(t,o,r){n.push(e(t,o,r))})),n)},l=function(t){if(null==navigator.plugins)return t.NOT_AVAILABLE;for(var e=[],n=0,o=navigator.plugins.length;n<o;n++)navigator.plugins[n]&&e.push(navigator.plugins[n]);return p(t)&&(e=e.sort((function(t,e){return t.name>e.name?1:t.name<e.name?-1:0}))),c(e,(function(t){var e=c(t,(function(t){return[t.type,t.suffixes]}));return[t.name,t.description,e]}))},p=function(t){for(var e=!1,n=0,o=t.plugins.sortPluginsFor.length;n<o;n++)if(navigator.userAgent.match(t.plugins.sortPluginsFor[n])){e=!0;break}return e},h=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},d=function(){if(!h())return!1;var t=f();return!!window.WebGLRenderingContext&&!!t},f=function(){var t=document.createElement("canvas"),e=null;try{e=t.getContext("webgl")||t.getContext("experimental-webgl")}catch(t){}return e||(e=null),e},m=[{key:"userAgent",getData:function(t){t(navigator.userAgent)}},{key:"webdriver",getData:function(t,e){t(null==navigator.webdriver?e.NOT_AVAILABLE:navigator.webdriver)}},{key:"language",getData:function(t,e){t(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||e.NOT_AVAILABLE)}},{key:"colorDepth",getData:function(t,e){t(window.screen.colorDepth||e.NOT_AVAILABLE)}},{key:"deviceMemory",getData:function(t,e){t(navigator.deviceMemory||e.NOT_AVAILABLE)}},{key:"pixelRatio",getData:function(t,e){t(window.devicePixelRatio||e.NOT_AVAILABLE)}},{key:"hardwareConcurrency",getData:function(t,e){t(function(t){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:t.NOT_AVAILABLE}(e))}},{key:"screenResolution",getData:function(t,e){t(function(t){var e=[window.screen.width,window.screen.height];return t.screen.detectScreenOrientation&&e.sort().reverse(),e}(e))}},{key:"availableScreenResolution",getData:function(t,e){t(function(t){if(window.screen.availWidth&&window.screen.availHeight){var e=[window.screen.availHeight,window.screen.availWidth];return t.screen.detectScreenOrientation&&e.sort().reverse(),e}return t.NOT_AVAILABLE}(e))}},{key:"timezoneOffset",getData:function(t){t((new Date).getTimezoneOffset())}},{key:"timezone",getData:function(t,e){window.Intl&&window.Intl.DateTimeFormat?t((new window.Intl.DateTimeFormat).resolvedOptions().timeZone):t(e.NOT_AVAILABLE)}},{key:"sessionStorage",getData:function(t,e){t(function(t){try{return!!window.sessionStorage}catch(e){return t.ERROR}}(e))}},{key:"localStorage",getData:function(t,e){t(function(t){try{return!!window.localStorage}catch(e){return t.ERROR}}(e))}},{key:"indexedDb",getData:function(t,e){t(function(t){try{return!!window.indexedDB}catch(e){return t.ERROR}}(e))}},{key:"addBehavior",getData:function(t){t(!(!document.body||!document.body.addBehavior))}},{key:"openDatabase",getData:function(t){t(!!window.openDatabase)}},{key:"cpuClass",getData:function(t,e){t(function(t){return navigator.cpuClass||t.NOT_AVAILABLE}(e))}},{key:"platform",getData:function(t,e){t(function(t){return navigator.platform?navigator.platform:t.NOT_AVAILABLE}(e))}},{key:"doNotTrack",getData:function(t,e){t(function(t){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:t.NOT_AVAILABLE}(e))}},{key:"plugins",getData:function(t,e){"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?t(e.plugins.excludeIE?e.EXCLUDED:function(t){var e=[];return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window?e=c(["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"],(function(e){try{return new window.ActiveXObject(e),e}catch(e){return t.ERROR}})):e.push(t.NOT_AVAILABLE),navigator.plugins&&(e=e.concat(l(t))),e}(e)):t(l(e))}},{key:"canvas",getData:function(t,e){h()?t(function(t){var e=[],n=document.createElement("canvas");n.width=2e3,n.height=200,n.style.display="inline";var o=n.getContext("2d");return o.rect(0,0,10,10),o.rect(2,2,6,6),e.push("canvas winding:"+(!1===o.isPointInPath(5,5,"evenodd")?"yes":"no")),o.textBaseline="alphabetic",o.fillStyle="#f60",o.fillRect(125,1,62,20),o.fillStyle="#069",o.font=t.dontUseFakeFontInCanvas?"11pt Arial":"11pt no-real-font-123",o.fillText("Cwm fjordbank glyphs vext quiz, ????",2,15),o.fillStyle="rgba(102, 204, 0, 0.2)",o.font="18pt Arial",o.fillText("Cwm fjordbank glyphs vext quiz, ????",4,45),o.globalCompositeOperation="multiply",o.fillStyle="rgb(255,0,255)",o.beginPath(),o.arc(50,50,50,0,2*Math.PI,!0),o.closePath(),o.fill(),o.fillStyle="rgb(0,255,255)",o.beginPath(),o.arc(100,50,50,0,2*Math.PI,!0),o.closePath(),o.fill(),o.fillStyle="rgb(255,255,0)",o.beginPath(),o.arc(75,100,50,0,2*Math.PI,!0),o.closePath(),o.fill(),o.fillStyle="rgb(255,0,255)",o.arc(75,75,75,0,2*Math.PI,!0),o.arc(75,75,25,0,2*Math.PI,!0),o.fill("evenodd"),n.toDataURL&&e.push("canvas fp:"+n.toDataURL()),e}(e)):t(e.NOT_AVAILABLE)}},{key:"webgl",getData:function(t,e){d()?t(function(){var t,e=function(e){return t.clearColor(0,0,0,1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),"["+e[0]+", "+e[1]+"]"};if(!(t=f()))return null;var n=[],o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o);var r=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),o.itemSize=3,o.numItems=3;var i=t.createProgram(),s=t.createShader(t.VERTEX_SHADER);t.shaderSource(s,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),t.compileShader(s);var a=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(a,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),t.compileShader(a),t.attachShader(i,s),t.attachShader(i,a),t.linkProgram(i),t.useProgram(i),i.vertexPosAttrib=t.getAttribLocation(i,"attrVertex"),i.offsetUniform=t.getUniformLocation(i,"uniformOffset"),t.enableVertexAttribArray(i.vertexPosArray),t.vertexAttribPointer(i.vertexPosAttrib,o.itemSize,t.FLOAT,!1,0,0),t.uniform2f(i.offsetUniform,1,1),t.drawArrays(t.TRIANGLE_STRIP,0,o.numItems);try{n.push(t.canvas.toDataURL())}catch(e){}n.push("extensions:"+(t.getSupportedExtensions()||[]).join(";")),n.push("webgl aliased line width range:"+e(t.getParameter(t.ALIASED_LINE_WIDTH_RANGE))),n.push("webgl aliased point size range:"+e(t.getParameter(t.ALIASED_POINT_SIZE_RANGE))),n.push("webgl alpha bits:"+t.getParameter(t.ALPHA_BITS)),n.push("webgl antialiasing:"+(t.getContextAttributes().antialias?"yes":"no")),n.push("webgl blue bits:"+t.getParameter(t.BLUE_BITS)),n.push("webgl depth bits:"+t.getParameter(t.DEPTH_BITS)),n.push("webgl green bits:"+t.getParameter(t.GREEN_BITS)),n.push("webgl max anisotropy:"+function(t){var e=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic");if(e){var n=t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return 0===n&&(n=2),n}return null}(t)),n.push("webgl max combined texture image units:"+t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),n.push("webgl max cube map texture size:"+t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE)),n.push("webgl max fragment uniform vectors:"+t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS)),n.push("webgl max render buffer size:"+t.getParameter(t.MAX_RENDERBUFFER_SIZE)),n.push("webgl max texture image units:"+t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),n.push("webgl max texture size:"+t.getParameter(t.MAX_TEXTURE_SIZE)),n.push("webgl max varying vectors:"+t.getParameter(t.MAX_VARYING_VECTORS)),n.push("webgl max vertex attribs:"+t.getParameter(t.MAX_VERTEX_ATTRIBS)),n.push("webgl max vertex texture image units:"+t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),n.push("webgl max vertex uniform vectors:"+t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS)),n.push("webgl max viewport dims:"+e(t.getParameter(t.MAX_VIEWPORT_DIMS))),n.push("webgl red bits:"+t.getParameter(t.RED_BITS)),n.push("webgl renderer:"+t.getParameter(t.RENDERER)),n.push("webgl shading language version:"+t.getParameter(t.SHADING_LANGUAGE_VERSION)),n.push("webgl stencil bits:"+t.getParameter(t.STENCIL_BITS)),n.push("webgl vendor:"+t.getParameter(t.VENDOR)),n.push("webgl version:"+t.getParameter(t.VERSION));try{var c=t.getExtension("WEBGL_debug_renderer_info");c&&(n.push("webgl unmasked vendor:"+t.getParameter(c.UNMASKED_VENDOR_WEBGL)),n.push("webgl unmasked renderer:"+t.getParameter(c.UNMASKED_RENDERER_WEBGL)))}catch(e){}return t.getShaderPrecisionFormat&&u(["FLOAT","INT"],(function(e){u(["VERTEX","FRAGMENT"],(function(o){u(["HIGH","MEDIUM","LOW"],(function(r){u(["precision","rangeMin","rangeMax"],(function(i){var s=t.getShaderPrecisionFormat(t[o+"_SHADER"],t[r+"_"+e])[i];"precision"!==i&&(i="precision "+i);var a=["webgl ",o.toLowerCase()," shader ",r.toLowerCase()," ",e.toLowerCase()," ",i,":",s].join("");n.push(a)}))}))}))})),n}()):t(e.NOT_AVAILABLE)}},{key:"webglVendorAndRenderer",getData:function(t){d()?t(function(){try{var t=f(),e=t.getExtension("WEBGL_debug_renderer_info");return t.getParameter(e.UNMASKED_VENDOR_WEBGL)+"~"+t.getParameter(e.UNMASKED_RENDERER_WEBGL)}catch(t){return null}}()):t()}},{key:"adBlock",getData:function(t){t(function(){var t=document.createElement("div");t.innerHTML="&nbsp;";var e=!(t.className="adsbox");try{document.body.appendChild(t),e=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(t)}catch(t){e=!1}return e}())}},{key:"hasLiedLanguages",getData:function(t){t(function(){if(void 0!==navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(t){return!0}return!1}())}},{key:"hasLiedResolution",getData:function(t){t(window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight)}},{key:"hasLiedOs",getData:function(t){t(function(){var t,e=navigator.userAgent.toLowerCase(),n=navigator.oscpu,o=navigator.platform.toLowerCase();if(t=0<=e.indexOf("windows phone")?"Windows Phone":0<=e.indexOf("win")?"Windows":0<=e.indexOf("android")?"Android":0<=e.indexOf("linux")||0<=e.indexOf("cros")?"Linux":0<=e.indexOf("iphone")||0<=e.indexOf("ipad")?"iOS":0<=e.indexOf("mac")?"Mac":"Other",("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&"Windows Phone"!==t&&"Android"!==t&&"iOS"!==t&&"Other"!==t)return!0;if(void 0!==n){if(0<=(n=n.toLowerCase()).indexOf("win")&&"Windows"!==t&&"Windows Phone"!==t)return!0;if(0<=n.indexOf("linux")&&"Linux"!==t&&"Android"!==t)return!0;if(0<=n.indexOf("mac")&&"Mac"!==t&&"iOS"!==t)return!0;if((-1===n.indexOf("win")&&-1===n.indexOf("linux")&&-1===n.indexOf("mac"))!=("Other"===t))return!0}return 0<=o.indexOf("win")&&"Windows"!==t&&"Windows Phone"!==t||(0<=o.indexOf("linux")||0<=o.indexOf("android")||0<=o.indexOf("pike"))&&"Linux"!==t&&"Android"!==t||(0<=o.indexOf("mac")||0<=o.indexOf("ipad")||0<=o.indexOf("ipod")||0<=o.indexOf("iphone"))&&"Mac"!==t&&"iOS"!==t||(o.indexOf("win")<0&&o.indexOf("linux")<0&&o.indexOf("mac")<0&&o.indexOf("iphone")<0&&o.indexOf("ipad")<0)!=("Other"===t)||void 0===navigator.plugins&&"Windows"!==t&&"Windows Phone"!==t}())}},{key:"hasLiedBrowser",getData:function(t){t(function(){var t,e=navigator.userAgent.toLowerCase(),n=navigator.productSub;if(("Chrome"==(t=0<=e.indexOf("firefox")?"Firefox":0<=e.indexOf("opera")||0<=e.indexOf("opr")?"Opera":0<=e.indexOf("chrome")?"Chrome":0<=e.indexOf("safari")?"Safari":0<=e.indexOf("trident")?"Internet Explorer":"Other")||"Safari"===t||"Opera"===t)&&"20030107"!==n)return!0;var o,r=eval.toString().length;if(37===r&&"Safari"!==t&&"Firefox"!==t&&"Other"!==t)return!0;if(39===r&&"Internet Explorer"!==t&&"Other"!==t)return!0;if(33===r&&"Chrome"!==t&&"Opera"!==t&&"Other"!==t)return!0;try{throw"a"}catch(t){try{t.toSource(),o=!0}catch(t){o=!1}}return o&&"Firefox"!==t&&"Other"!==t}())}},{key:"touchSupport",getData:function(t){t(function(){var t,e=0;void 0!==navigator.maxTouchPoints?e=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(e=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch(e){t=!1}return[e,t,"ontouchstart"in window]}())}},{key:"fonts",getData:function(t,e){var n=["monospace","sans-serif","serif"],o=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];e.fonts.extendedJsFonts&&(o=o.concat(["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"])),o=(o=o.concat(e.fonts.userDefinedFonts)).filter((function(t,e){return o.indexOf(t)===e}));var r=document.getElementsByTagName("body")[0],i=document.createElement("div"),s=document.createElement("div"),a={},u={},c=function(){var t=document.createElement("span");return t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="72px",t.style.fontStyle="normal",t.style.fontWeight="normal",t.style.letterSpacing="normal",t.style.lineBreak="auto",t.style.lineHeight="normal",t.style.textTransform="none",t.style.textAlign="left",t.style.textDecoration="none",t.style.textShadow="none",t.style.whiteSpace="normal",t.style.wordBreak="normal",t.style.wordSpacing="normal",t.innerHTML="mmmmmmmmmmlli",t},l=function(t){for(var e=!1,o=0;o<n.length;o++)if(e=t[o].offsetWidth!==a[n[o]]||t[o].offsetHeight!==u[n[o]])return e;return e},p=function(){for(var t=[],e=0,o=n.length;e<o;e++){var r=c();r.style.fontFamily=n[e],i.appendChild(r),t.push(r)}return t}();r.appendChild(i);for(var h=0,d=n.length;h<d;h++)a[n[h]]=p[h].offsetWidth,u[n[h]]=p[h].offsetHeight;var f=function(){for(var t,e,r,i={},a=0,u=o.length;a<u;a++){for(var l=[],p=0,h=n.length;p<h;p++){var d=(t=o[a],e=n[p],r=void 0,(r=c()).style.fontFamily="'"+t+"',"+e,r);s.appendChild(d),l.push(d)}i[o[a]]=l}return i}();r.appendChild(s);for(var m=[],g=0,v=o.length;g<v;g++)l(f[o[g]])&&m.push(o[g]);r.removeChild(s),r.removeChild(i),t(m)},pauseBefore:!0},{key:"fontsFlash",getData:function(t,e){return void 0!==window.swfobject?window.swfobject.hasFlashPlayerVersion("9.0.0")?e.fonts.swfPath?void function(t,e){var n="___fp_swf_loaded";window[n]=function(e){t(e)};var o,r=e.fonts.swfContainerId;(o=document.createElement("div")).setAttribute("id",(void 0).fonts.swfContainerId),document.body.appendChild(o),window.swfobject.embedSWF(e.fonts.swfPath,r,"1","1","9.0.0",!1,{onReady:n},{allowScriptAccess:"always",menu:"false"},{})}((function(e){t(e)}),e):t("missing options.fonts.swfPath"):t("flash not installed"):t("swf object not loaded")},pauseBefore:!0},{key:"audio",getData:function(t,e){var n=e.audio;if(n.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return t(e.EXCLUDED);var o=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(null==o)return t(e.NOT_AVAILABLE);var r=new o(1,44100,44100),i=r.createOscillator();i.type="triangle",i.frequency.setValueAtTime(1e4,r.currentTime);var s=r.createDynamicsCompressor();u([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],(function(t){void 0!==s[t[0]]&&"function"==typeof s[t[0]].setValueAtTime&&s[t[0]].setValueAtTime(t[1],r.currentTime)})),i.connect(s),s.connect(r.destination),i.start(0),r.startRendering();var a=setTimeout((function(){return console.warn('Audio fingerprint timed out. Please report bug at https://github.com/Valve/fingerprintjs2 with your user agent: "'+navigator.userAgent+'".'),r.oncomplete=function(){},r=null,t("audioTimeout")}),n.timeout);r.oncomplete=function(e){var n;try{clearTimeout(a),n=e.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce((function(t,e){return t+Math.abs(e)}),0).toString(),i.disconnect(),s.disconnect()}catch(e){return void t(e)}t(n)}}},{key:"enumerateDevices",getData:function(t,e){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return t(e.NOT_AVAILABLE);navigator.mediaDevices.enumerateDevices().then((function(e){t(e.map((function(t){return"id="+t.deviceId+";gid="+t.groupId+";"+t.kind+";"+t.label})))})).catch((function(e){t(e)}))}}],g=function(t){throw new Error("'new Fingerprint()' is deprecated, see https://github.com/Valve/fingerprintjs2#upgrade-guide-from-182-to-200")};return g.get=function(t,e){e?t||(t={}):(e=t,t={}),function(t,e){var n,o;if(null!=e)for(o in e)null==(n=e[o])||Object.prototype.hasOwnProperty.call(t,o)||(t[o]=n)}(t,a),t.components=t.extraComponents.concat(m);var n={data:[],addPreprocessedComponent:function(e,o){"function"==typeof t.preprocessor&&(o=t.preprocessor(e,o)),n.data.push({key:e,value:o})}},o=-1;!function r(i){if((o+=1)>=t.components.length)e(n.data);else{var s=t.components[o];if(t.excludes[s.key])r(!1);else{if(!i&&s.pauseBefore)return o-=1,void setTimeout((function(){r(!0)}),1);try{s.getData((function(t){n.addPreprocessedComponent(s.key,t),r(!1)}),t)}catch(i){n.addPreprocessedComponent(s.key,String(i)),r(!1)}}}}(!1)},g.getPromise=function(t){return new Promise((function(e,n){g.get(t,e)}))},g.getV18=function(t,e){return null==e&&(e=t,t={}),g.get(t,(function(n){for(var o=[],r=0;r<n.length;r++){var i=n[r];if(i.value===(t.NOT_AVAILABLE||"not available"))o.push({key:i.key,value:"unknown"});else if("plugins"===i.key)o.push({key:"plugins",value:c(i.value,(function(t){var e=c(t[2],(function(t){return t.join?t.join("~"):t})).join(",");return[t[0],t[1],e].join("::")}))});else if(-1!==["canvas","webgl"].indexOf(i.key))o.push({key:i.key,value:i.value.join("~")});else if(-1!==["sessionStorage","localStorage","indexedDb","addBehavior","openDatabase"].indexOf(i.key)){if(!i.value)continue;o.push({key:i.key,value:1})}else o.push(i.value?i.value.join?{key:i.key,value:i.value.join(";")}:i:{key:i.key,value:i.value})}var a=s(c(o,(function(t){return t.value})).join("~~~"),31);e(a,o)}))},g.x64hash128=s,g.VERSION="2.1.0",g}))})),g=f((function(t,n){!function(o,r){var i="model",s="name",a="type",u="vendor",c="version",l="mobile",p="tablet",h="smarttv",d={extend:function(t,e){var n={};for(var o in t)n[o]=e[o]&&e[o].length%2==0?e[o].concat(t[o]):t[o];return n},has:function(t,e){return"string"==typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()},major:function(t){return"string"===e(t)?t.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},f={rgx:function(t,n){for(var o,r,i,s,a,u,c=0;c<n.length&&!a;){var l=n[c],p=n[c+1];for(o=r=0;o<l.length&&!a;)if(a=l[o++].exec(t))for(i=0;i<p.length;i++)u=a[++r],"object"===e(s=p[i])&&s.length>0?2==s.length?this[s[0]]="function"==e(s[1])?s[1].call(this,u):s[1]:3==s.length?this[s[0]]="function"!==e(s[1])||s[1].exec&&s[1].test?u?u.replace(s[1],s[2]):void 0:u?s[1].call(this,u,s[2]):void 0:4==s.length&&(this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):void 0):this[s]=u||void 0;c+=2}},str:function(t,n){for(var o in n)if("object"===e(n[o])&&n[o].length>0){for(var r=0;r<n[o].length;r++)if(d.has(n[o][r],t))return"?"===o?void 0:o}else if(d.has(n[o],t))return"?"===o?void 0:o;return t}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},g={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,c],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[s,c],[/(konqueror)\/([\w\.]+)/i],[[s,"Konqueror"],c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],c],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],c],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],c],[/(Avast)\/([\w\.]+)/i],[[s,"Avast Secure Browser"],c],[/(AVG)\/([\w\.]+)/i],[[s,"AVG Secure Browser"],c],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],c],[/(focus)\/([\w\.]+)/i],[[s,"Firefox Focus"],c],[/(opt)\/([\w\.]+)/i],[[s,"Opera Touch"],c],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(windowswechat qbcore)\/([\w\.]+)/i],[[s,"WeChat(Win) Desktop"],c],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],c],[/(brave)\/([\w\.]+)/i],[[s,"Brave"],c],[/(qqbrowserlite)\/([\w\.]+)/i],[s,c],[/(QQ)\/([\d\.]+)/i],[s,c],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,c],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[s,c],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,c],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[c,[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[s,c],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[c,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],c],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],c],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[s,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[s,"Sailfish Browser"],c],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,c],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],c],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[s,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],c],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],c],[/fxios\/([\w\.-]+)/i],[c,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[c,f.str,m.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[i,u,[a,p]],[/applecoremedia\/[\w\.]+ \((ipad)/],[i,[u,"Apple"],[a,p]],[/(apple\s{0,1}tv)/i],[[i,"Apple TV"],[u,"Apple"],[a,h]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,i,[a,p]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[i,[u,"Amazon"],[a,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[i,f.str,m.device.amazon.model],[u,"Amazon"],[a,l]],[/android.+aft([bms])\sbuild/i],[i,[u,"Amazon"],[a,h]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[i,u,[a,l]],[/\((ip[honed|\s\w*]+);/i],[i,[u,"Apple"],[a,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,i,[a,l]],[/\(bb10;\s(\w+)/i],[i,[u,"BlackBerry"],[a,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[i,[u,"Asus"],[a,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[i,"Xperia Tablet"],[a,p]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[i,[u,"Sony"],[a,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,i,[a,"console"]],[/android.+;\s(shield)\sbuild/i],[i,[u,"Nvidia"],[a,"console"]],[/(playstation\s[34portablevi]+)/i],[i,[u,"Sony"],[a,"console"]],[/(sprint\s(\w+))/i],[[u,f.str,m.device.sprint.vendor],[i,f.str,m.device.sprint.model],[a,l]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[u,[i,/_/g," "],[a,l]],[/(nexus\s9)/i],[i,[u,"HTC"],[a,p]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[i,[u,"Huawei"],[a,l]],[/android.+(bah2?-a?[lw]\d{2})/i],[i,[u,"Huawei"],[a,p]],[/(microsoft);\s(lumia[\s\w]+)/i],[u,i,[a,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[i,[u,"Microsoft"],[a,"console"]],[/(kin\.[onetw]{3})/i],[[i,/\./g," "],[u,"Microsoft"],[a,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[i,[u,"Motorola"],[a,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[i,[u,"Motorola"],[a,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,d.trim],[i,d.trim],[a,h]],[/hbbtv.+maple;(\d+)/i],[[i,/^/,"SmartTV"],[u,"Samsung"],[a,h]],[/\(dtv[\);].+(aquos)/i],[i,[u,"Sharp"],[a,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],i,[a,p]],[/smart-tv.+(samsung)/i],[u,[a,h],i],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[u,"Samsung"],i,[a,l]],[/sie-(\w*)/i],[i,[u,"Siemens"],[a,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[u,"Nokia"],i,[a,l]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[i,[u,"Acer"],[a,p]],[/android.+([vl]k\-?\d{3})\s+build/i],[i,[u,"LG"],[a,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],i,[a,p]],[/(lg) netcast\.tv/i],[u,i,[a,h]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[i,[u,"LG"],[a,l]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[u,i,[a,p]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[i,[u,"Lenovo"],[a,p]],[/(lenovo)[_\s-]?([\w-]+)/i],[u,i,[a,l]],[/linux;.+((jolla));/i],[u,i,[a,l]],[/((pebble))app\/[\d\.]+\s/i],[u,i,[a,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[u,i,[a,l]],[/crkey/i],[[i,"Chromecast"],[u,"Google"],[a,h]],[/android.+;\s(glass)\s\d/i],[i,[u,"Google"],[a,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[i,[u,"Google"],[a,p]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[i,[u,"Google"],[a,l]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[i,/_/g," "],[u,"Xiaomi"],[a,l]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[i,/_/g," "],[u,"Xiaomi"],[a,p]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[i,[u,"Meizu"],[a,l]],[/(mz)-([\w-]{2,})/i],[[u,"Meizu"],i,[a,l]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[i,[u,"OnePlus"],[a,l]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[i,[u,"RCA"],[a,p]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[i,[u,"Dell"],[a,p]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[i,[u,"Verizon"],[a,p]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[u,"Barnes & Noble"],i,[a,p]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[i,[u,"NuVision"],[a,p]],[/android.+;\s(k88)\sbuild/i],[i,[u,"ZTE"],[a,p]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[i,[u,"Swiss"],[a,l]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[i,[u,"Swiss"],[a,p]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[i,[u,"Zeki"],[a,p]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[u,"Dragon Touch"],i,[a,p]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[i,[u,"Insignia"],[a,p]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[i,[u,"NextBook"],[a,p]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[u,"Voice"],i,[a,l]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[u,"LvTel"],i,[a,l]],[/android.+;\s(PH-1)\s/i],[i,[u,"Essential"],[a,l]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[i,[u,"Envizen"],[a,p]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[u,i,[a,p]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[i,[u,"MachSpeed"],[a,p]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[u,i,[a,p]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[i,[u,"Rotor"],[a,p]],[/android.+(KS(.+))\s+build/i],[i,[u,"Amazon"],[a,p]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[u,i,[a,p]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[a,d.lowerize],u,i],[/[\s\/\(](smart-?tv)[;\)]/i],[[a,h]],[/(android[\w\.\s\-]{0,9});.+build/i],[i,[u,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[c,[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]{1,9}).+(gecko)/i],[c,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[c,f.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[c,f.str,m.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[s,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],c],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,c],[/(haiku)\s(\w+)/i],[s,c],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[c,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,c]]},v=function t(n,r){if("object"===e(n)&&(r=n,n=void 0),!(this instanceof t))return new t(n,r).getResult();var i=n||(o&&o.navigator&&o.navigator.userAgent?o.navigator.userAgent:""),s=r?d.extend(g,r):g;return this.getBrowser=function(){var t={name:void 0,version:void 0};return f.rgx.call(t,i,s.browser),t.major=d.major(t.version),t},this.getCPU=function(){var t={architecture:void 0};return f.rgx.call(t,i,s.cpu),t},this.getDevice=function(){var t={vendor:void 0,model:void 0,type:void 0};return f.rgx.call(t,i,s.device),t},this.getEngine=function(){var t={name:void 0,version:void 0};return f.rgx.call(t,i,s.engine),t},this.getOS=function(){var t={name:void 0,version:void 0};return f.rgx.call(t,i,s.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(t){return i=t,this},this};v.VERSION="0.7.21",v.BROWSER={NAME:s,MAJOR:"major",VERSION:c},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:i,VENDOR:u,TYPE:a,CONSOLE:"console",MOBILE:l,SMARTTV:h,TABLET:p,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:s,VERSION:c},v.OS={NAME:s,VERSION:c},t.exports&&(n=t.exports=v),n.UAParser=v;var _=o&&(o.jQuery||o.Zepto);if(_&&!_.ua){var y=new v;_.ua=y.getResult(),_.ua.get=function(){return y.getUA()},_.ua.set=function(t){y.setUA(t);var e=y.getResult();for(var n in e)_.ua[n]=e[n]}}}("object"===("undefined"==typeof window?"undefined":e(window))?window:d)})),v=Object.freeze({__proto__:null,default:g,__moduleExports:g,UAParser:g.UAParser}),_=void 0,y=void 0;function b(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function A(t,e,n,o,r,i){return b((s=b(b(e,t),b(o,i)))<<(a=r)|s>>>32-a,n);var s,a}function S(t,e,n,o,r,i,s){return A(e&n|~e&o,t,e,r,i,s)}function w(t,e,n,o,r,i,s){return A(e&o|n&~o,t,e,r,i,s)}function C(t,e,n,o,r,i,s){return A(e^n^o,t,e,r,i,s)}function E(t,e,n,o,r,i,s){return A(n^(e|~o),t,e,r,i,s)}function I(t){return function(t){return function(t){var e,n="",o=32*t.length;for(e=0;e<o;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}(function(t,e){var n,o,r,i,s;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var a=1732584193,u=-271733879,c=-1732584194,l=271733878;for(n=0;n<t.length;n+=16)o=a,r=u,i=c,s=l,a=S(a,u,c,l,t[n],7,-680876936),l=S(l,a,u,c,t[n+1],12,-389564586),c=S(c,l,a,u,t[n+2],17,606105819),u=S(u,c,l,a,t[n+3],22,-1044525330),a=S(a,u,c,l,t[n+4],7,-176418897),l=S(l,a,u,c,t[n+5],12,1200080426),c=S(c,l,a,u,t[n+6],17,-1473231341),u=S(u,c,l,a,t[n+7],22,-45705983),a=S(a,u,c,l,t[n+8],7,1770035416),l=S(l,a,u,c,t[n+9],12,-1958414417),c=S(c,l,a,u,t[n+10],17,-42063),u=S(u,c,l,a,t[n+11],22,-1990404162),a=S(a,u,c,l,t[n+12],7,1804603682),l=S(l,a,u,c,t[n+13],12,-40341101),c=S(c,l,a,u,t[n+14],17,-1502002290),a=w(a,u=S(u,c,l,a,t[n+15],22,1236535329),c,l,t[n+1],5,-165796510),l=w(l,a,u,c,t[n+6],9,-1069501632),c=w(c,l,a,u,t[n+11],14,643717713),u=w(u,c,l,a,t[n],20,-373897302),a=w(a,u,c,l,t[n+5],5,-701558691),l=w(l,a,u,c,t[n+10],9,38016083),c=w(c,l,a,u,t[n+15],14,-660478335),u=w(u,c,l,a,t[n+4],20,-405537848),a=w(a,u,c,l,t[n+9],5,568446438),l=w(l,a,u,c,t[n+14],9,-1019803690),c=w(c,l,a,u,t[n+3],14,-187363961),u=w(u,c,l,a,t[n+8],20,1163531501),a=w(a,u,c,l,t[n+13],5,-1444681467),l=w(l,a,u,c,t[n+2],9,-51403784),c=w(c,l,a,u,t[n+7],14,1735328473),a=C(a,u=w(u,c,l,a,t[n+12],20,-1926607734),c,l,t[n+5],4,-378558),l=C(l,a,u,c,t[n+8],11,-2022574463),c=C(c,l,a,u,t[n+11],16,1839030562),u=C(u,c,l,a,t[n+14],23,-35309556),a=C(a,u,c,l,t[n+1],4,-1530992060),l=C(l,a,u,c,t[n+4],11,1272893353),c=C(c,l,a,u,t[n+7],16,-155497632),u=C(u,c,l,a,t[n+10],23,-1094730640),a=C(a,u,c,l,t[n+13],4,681279174),l=C(l,a,u,c,t[n],11,-358537222),c=C(c,l,a,u,t[n+3],16,-722521979),u=C(u,c,l,a,t[n+6],23,76029189),a=C(a,u,c,l,t[n+9],4,-640364487),l=C(l,a,u,c,t[n+12],11,-421815835),c=C(c,l,a,u,t[n+15],16,530742520),a=E(a,u=C(u,c,l,a,t[n+2],23,-995338651),c,l,t[n],6,-198630844),l=E(l,a,u,c,t[n+7],10,1126891415),c=E(c,l,a,u,t[n+14],15,-1416354905),u=E(u,c,l,a,t[n+5],21,-57434055),a=E(a,u,c,l,t[n+12],6,1700485571),l=E(l,a,u,c,t[n+3],10,-1894986606),c=E(c,l,a,u,t[n+10],15,-1051523),u=E(u,c,l,a,t[n+1],21,-2054922799),a=E(a,u,c,l,t[n+8],6,1873313359),l=E(l,a,u,c,t[n+15],10,-30611744),c=E(c,l,a,u,t[n+6],15,-1560198380),u=E(u,c,l,a,t[n+13],21,1309151649),a=E(a,u,c,l,t[n+4],6,-145523070),l=E(l,a,u,c,t[n+11],10,-1120210379),c=E(c,l,a,u,t[n+2],15,718787259),u=E(u,c,l,a,t[n+9],21,-343485551),a=b(a,o),u=b(u,r),c=b(c,i),l=b(l,s);return[a,u,c,l]}(function(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var o=8*t.length;for(e=0;e<o;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}(t),8*t.length))}(function(t){return unescape(encodeURIComponent(t))}(t))}var k=function(){function t(){n(this,t),this.locales={}}return r(t,[{key:"getString",value:function(t,e){var n=this.locales[e||"en-US"];return n&&n.hasOwnProperty(t)?n[t]:t}},{key:"addDictionary",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",n=this.locales[e]||{},o=Object.assign(n,t);this.locales[e]=o}}]),t}(),R=function(){function t(e,o){n(this,t),this.navi=navigator,this.opType=e,this.options=o}return r(t,[{key:"b64Encode",value:function(t){for(var e="",n=new Uint8Array(t),o=n.byteLength,r=0;r<o;r++)e+=String.fromCharCode(n[r]);return window.btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},{key:"b64Decode",value:function(t){for(var e=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,""),n=window.atob(e),o=n.length,r=new Uint8Array(o),i=0;i<o;i++)r[i]=n.charCodeAt(i);return r.buffer}},{key:"publicKeyCredentialToJSON",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;if(t instanceof ArrayBuffer)return this.b64Encode(t);if(e<=0)return t;if(t instanceof Array){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var u=s.value;n.push(this.publicKeyCredentialToJSON(u),e-1)}}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}if(t instanceof Object){var c={};for(var l in t)"function"!=typeof t[l]&&(c[l]=this.publicKeyCredentialToJSON(t[l],e-1));return c}return t}},{key:"execute",value:function(){var t,e=this,n=JSON.parse(JSON.stringify(this.options));switch(this.opType){case com.ts.mobile.sdkhost.Fido2CredentialsOpType.Create:n.publicKey.challenge=this.b64Decode(n.publicKey.challenge),n.publicKey.user.id=this.b64Decode(n.publicKey.user.id),n.publicKey.excludeCredentials.map((function(t){return t.id=e.b64Decode(t.id),t})),t=this.navi.credentials.create(n).then((function(t){return t.clientExtensionResults=t.getClientExtensionResults(),e.publicKeyCredentialToJSON(t)}));break;case com.ts.mobile.sdkhost.Fido2CredentialsOpType.Get:n.publicKey.challenge=this.b64Decode(n.publicKey.challenge);var o=!0,r=!1,i=void 0;try{for(var s,a=n.publicKey.allowCredentials[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var u=s.value;u.id=this.b64Decode(u.id)}}catch(t){r=!0,i=t}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}t=this.navi.credentials.get(n).then((function(t){return t.clientExtensionResults=t.getClientExtensionResults(),e.publicKeyCredentialToJSON(t)}))}return t.catch((function(t){throw P.indexOf(t.name)>-1?new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.UserCanceled,"Received FIDO2 cancellation request from platform; Error: ".concat(t)):t}))}}]),t}(),P=["NotAllowedError","AbortError"],T=function(){function t(){n(this,t),this.logLevel=com.ts.mobile.sdk.LogLevel.Error,this.collectionResultsPromise=null,this.internalLogger=new a,this.externalLogger=null,this.localizer=new k,window.__XMSDK_PLUGINS={},this.localizer.addDictionary(s)}return r(t,[{key:"initialize",value:function(t){var e=this;return new Promise((function(n,o){e.enabledCollectors=t,n(!0)}))}},{key:"setLogLevel",value:function(t){this.logLevel=t}},{key:"log",value:function(t,e,n){t<=this.logLevel&&this.internalLogger.log(t,e,n),this.externalLogger&&this.externalLogger.log(t,e,n)}},{key:"readStorageKey",value:function(t){return JSON.parse(h.localStorage.getItem(t)||"{}")}},{key:"writeStorageKey",value:function(t,e){h.localStorage.setItem(t,JSON.stringify(e))}},{key:"deleteStorageKey",value:function(t){h.localStorage.removeItem(t)}},{key:"readSessionStorageKey",value:function(t){return JSON.parse(h.sessionStorage.getItem(t)||"{}")}},{key:"writeSessionStorageKey",value:function(t,e){h.sessionStorage.setItem(t,JSON.stringify(e))}},{key:"deleteSessionStorageKey",value:function(t){h.sessionStorage.removeItem(t)}},{key:"promiseCollectionResult",value:function(){var t=this;return new Promise((function(e,n){var o={location:{allow:t.enabledCollectors.indexOf(com.ts.mobile.sdk.CollectorType.Location)>=0,timeout:4e3,maximumAge:18e4},largeData:t.enabledCollectors.indexOf(com.ts.mobile.sdk.CollectorType.LargeData)>=0},r=new Promise((function(t,e){(function(t){var e=void 0,n=function(){e=void 0},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t||[];for(var n={},o=0;o<t.length;o++){var i=t[o],s=i.key;e&&(s=r(s)),n[s]=i.value}return n},r=function(t){return t.replace(/[\w]([A-Z])/g,(function(t){return t[0]+"_"+t[1]})).toLowerCase()},i=function(e,n,r){if(y)l(e,r);else{var i={};t.largeData||(i.excludes={canvas:!0,webgl:!0}),n.get(i,(function(t){y=o(t,!0),l(e,r)}))}},s=function(n,o){e=void 0;var r=t.location;if(!r.allow)return c(!1),void l(n,o);if(a(navigator.geolocation)||"function"!=typeof navigator.geolocation.getCurrentPosition)return c(!1),void l(n,o);var i=setTimeout((function(){s({code:3})}),r.timeout),s=function(t){clearTimeout(i),c(!0,void 0,void 0,u(t.code)),l(n,o)};navigator.geolocation.getCurrentPosition((function(t){clearTimeout(i),c(!0,t.coords.latitude,t.coords.longitude),l(n,o)}),s,r)},a=function(t){return null==t},u=function(t){return 1===t?"permission_denied":2===t?"position_unavailable":3===t?"timeout":"unknown"};function c(t,n,o,r){e={enabled:t||!1,lat:n,lng:o,error:r}}var l=function(t,o){if(!(a(y)||a(_)||a(e))){var r={metadata:{timestamp:Date.now()},content:{device_details:p(_,o),location:e},fp2:y};n(),t(r)}},p=function(t,e){var n={device_id:t.id},o=t.details,r=(new e.UAParser).setUA(navigator.userAgent).getResult();return n.os_type=r.os.name,n.os_version=r.os.version,n.device_model=r.browser.name+" "+r.browser.version,n.device_platform=o.navigator_platform,n.tampered=function(t){return t&&(t.has_lied_browser||t.has_lied_language||t.has_lied_os||t.has_lied_resolution)}(o),n.timezone_offset=o.timezone_offset,n};return(t=t||{}).location=function(t,e){var n={};for(var o in e=e||{},t=t||{})n[o]=t[o];for(var o in e)n[o]=e[o];return n}({allow:!1,timeout:4e3,maximumAge:18e4},t.location),n(),{get:function(t){(function(t,e,n){_?l(t,n):e.getV18({excludes:{userAgent:!0,screenResolution:!0,fonts:!0,fontsFlash:!0,plugins:!0,colorDepth:!0,webdriver:!0,audio:!0,deviceMemory:!0,enumerateDevices:!0,timezone:!0,webglVendorAndRenderer:!0}},(function(e,r){var i=o(r);_={id:e,details:i},l(t,n)}))})(t,m,v),i(t,m,v),s(t,v)}}})(o).get((function(e){t(e)}))}));t.collectionResultsPromise=Promise.all([r]).then((function(t){var e=Object.assign(t[0]);return e.toJson=function(){return e},e})),e(t.collectionResultsPromise)}))}},{key:"calcHexStringEncodedMd5Hash",value:function(t){return function(t,e,n){return function(t){var e,n,o="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),o+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return o}(I(t))}(com.ts.mobile.sdk.util.hexToAscii(t))}},{key:"generateRandomHexString",value:function(t){var e=new Uint8Array(t);(window.crypto||window.msCrypto).getRandomValues(e);for(var n="",o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],r=0;r<e.length;r++)n+=o[15&e[r]];return n}},{key:"queryHostInfo",value:function(t){switch(t){case com.ts.mobile.sdkhost.HostInformationKey.Version:return"5.2.0";case com.ts.mobile.sdkhost.HostInformationKey.Platform:return"web";case com.ts.mobile.sdkhost.HostInformationKey.FingerprintSupported:return"false";case com.ts.mobile.sdkhost.HostInformationKey.HostProvidedFeatures:return"";case com.ts.mobile.sdkhost.HostInformationKey.FaceIdKeyBioProtectionSupported:case com.ts.mobile.sdkhost.HostInformationKey.ImageAcquitisionSupported:return"false";case com.ts.mobile.sdkhost.HostInformationKey.AudioAcquitisionSupported:return"true";case com.ts.mobile.sdkhost.HostInformationKey.PersistentKeysSupported:case com.ts.mobile.sdkhost.HostInformationKey.FidoClientPresent:case com.ts.mobile.sdkhost.HostInformationKey.DyadicPresent:return"false";case com.ts.mobile.sdkhost.HostInformationKey.Fido2ClientPresent:return navigator.credentials&&window.PublicKeyCredential?"true":"false";case com.ts.mobile.sdkhost.HostInformationKey.DeviceBiometricsSupported:case com.ts.mobile.sdkhost.HostInformationKey.DeviceBiometricsFPContinuation:case com.ts.mobile.sdkhost.HostInformationKey.DeviceBiometricsUsesSign:return"false";case com.ts.mobile.sdkhost.HostInformationKey.DevicePersistenceMode:return"persistent";default:throw new Error("Info key is unsupported: ".concat(t))}}},{key:"queryAsyncHostInfo",value:function(t){var e=this;return new Promise((function(n,o){switch(t){case com.ts.mobile.sdkhost.AsyncHostInformationKey.Fido2UserVerifyingPlatformAuthenticatorAvailable:e.log(com.ts.mobile.sdk.LogLevel.Debug,"TransmitSDK/Tarsus","queryAsyncHostInfo() for Fido2UserVerifyingPlatformAuthenticatorAvailable invoked");var r=window.PublicKeyCredential;n(r?r.isUserVerifyingPlatformAuthenticatorAvailable().then((function(t){return t?"true":"false"})).catch((function(t){return"false"})):"false");break;default:e.log(com.ts.mobile.sdk.LogLevel.Debug,"not-implemented","queryAsyncHostInfo not implemented for key \n                            [".concat(com.ts.mobile.sdkhost.AsyncHostInformationKey[t],"] in tarsus-web")),o("Info key is unsupported: ".concat(t))}}))}},{key:"setExternalLogger",value:function(t){this.externalLogger=t}},{key:"getCurrentTime",value:function(){return Date.now()}},{key:"createDelayedPromise",value:function(t){return new Promise((function(e){setTimeout((function(){return e(t)}),t)}))}},{key:"calcHexStringEncodedHmacSha1HashWithHexEncodedKey",value:function(t,e){return this.log(com.ts.mobile.sdk.LogLevel.Error,"not-implemented","calcHexStringEncodedHmacSha1HashWithHexEncodedKey not implemented for tarsus-web"),null}},{key:"generatePbkdf2HmacSha1HexString",value:function(t,e,n,o){return Promise.reject("generatePbkdf2HmacSha1HexString not implemented for tarsus-web")}},{key:"fidoClientXact",value:function(t,e,n,o){return Promise.reject("fidoClientXact not implemented for tarsus-web")}},{key:"fido2CredentialsOp",value:function(t,e,n,o,r){return new R(o,r).execute()}},{key:"generateKeyPair",value:function(t,e,n,o){return Promise.reject("generateKeyPair not implemented for tarsus-web")}},{key:"getKeyPair",value:function(t,e,n){return this.log(com.ts.mobile.sdk.LogLevel.Error,"not-implemented","getKeyPair not implemented for tarsus-web"),null}},{key:"deleteKeyPair",value:function(t){this.log(com.ts.mobile.sdk.LogLevel.Error,"not-implemented","deleteKeyPair not implemented for tarsus-web")}},{key:"importSymmetricKey",value:function(t,e,n,o){return this.log(com.ts.mobile.sdk.LogLevel.Error,"not-implemented","importSymmetricKey not implemented for tarsus-web"),null}},{key:"calcHexStringEncodedSha256Hash",value:function(t){var e=com.ts.mobile.sdk.util.hexToAscii(t);return sha256(com.ts.mobile.sdk.util.toUTF8Array(e))}},{key:"calcHexStringEncodedSha512Hash",value:function(t){throw this.log(com.ts.mobile.sdk.LogLevel.Error,"not-implemented","calcHexStringEncodedSha512Hash not implemented for tarsus-web"),new Error("Method not implemented.")}},{key:"generateHexSeededKeyPairExternalRepresentation",value:function(t,e){return Promise.reject("Method not implemented.")}},{key:"generateKeyPairExternalRepresentation",value:function(t){return Promise.reject("Method not implemented.")}},{key:"importVolatileKeyPair",value:function(t,e){throw new Error("Method not implemented.")}},{key:"importVolatileSymmetricKey",value:function(t,e){throw new Error("Method not implemented.")}},{key:"loadPlugin",value:function(t){var e=window.__XMSDK_PLUGINS[t];return e?(this.log(com.ts.mobile.sdk.LogLevel.Debug,"plugins","Found defined plugin "+t),Promise.resolve(e)):(this.log(com.ts.mobile.sdk.LogLevel.Error,"plugins","Could not find defined plugin "+t),Promise.reject(new com.ts.mobile.sdk.impl.AuthenticationErrorImpl(com.ts.mobile.sdk.AuthenticationErrorCode.AppImplementation,"Could not find defined plugin "+t)))}},{key:"dyadicRefreshToken",value:function(t){throw new Error("Method not implemented.")}},{key:"dyadicEnroll",value:function(t,e){return Promise.reject("Method not implemented.")}},{key:"dyadicSign",value:function(t){return Promise.reject("Method not implemented.")}},{key:"dyadicDelete",value:function(){return Promise.reject("Method not implemented.")}},{key:"setDebugIndicatorVisible",value:function(t){t?this.debugIndicator||(this.debugIndicator=document.createElement("div"),Object.assign(this.debugIndicator.style,{position:"absolute",top:"5px",left:"5px",background:"black",opacity:"0.7",color:"white",borderRadius:"10px",padding:"12px",fontFamily:"sans-serif"}),this.debugIndicator.innerText="Transmit SDK: Journey is being debugged.",document.body.appendChild(this.debugIndicator)):this.debugIndicator&&(this.debugIndicator.remove(),this.debugIndicator=null)}},{key:"importVolatileKeyPairFromPublicKeyHex",value:function(t,e){throw new Error("Method not implemented.")}},{key:"getString",value:function(t,e){return this.localizer.getString(t,e)}},{key:"getPreferredLocale",value:function(){var t=window.navigator;return(window.navigator.languages?window.navigator.languages[0]:null)||t.language||t.browserLanguage||t.userLanguage}},{key:"transformApiPath",value:function(t){return t}},{key:"getUIStyles",value:function(){return"{}"}}]),t}();!function(t){!function(t){!function(t){!function(t){!function(t){var n={},o=function(){function t(t){t?(this._reading=!0,this._root=t):(this._reading=!1,this._root={}),this._currentContainer=this._root,this._otherContainerStack=[]}return Object.defineProperty(t.prototype,"serializedContent",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.enterContainer=function(t){var n=this._currentContainer[t];if(this._reading||n||(this._currentContainer[t]=n={}),"object"!=e(n))throw new Error("Attempt to enter non-container "+t);this._otherContainerStack.push(this._currentContainer),this._currentContainer=n},t.prototype.leaveContainer=function(){this._currentContainer=this._otherContainerStack.pop()},t.prototype.writePrimitive=function(t,e){this._currentContainer[t]=e},t.prototype.readPrimitive=function(t){return this._currentContainer[t]},t.prototype.writeObject=function(t,e){if(null!==e){var n=e.constructor.___serializationTag;if(!n)throw new Error("Invalid typetag for object passed to writeObject. Did you forget to decorate object with @Serializable?");this.enterContainer(t),this.writePrimitive("type",n),this.enterContainer("content"),e.serializeTo(this),this.leaveContainer(),this.leaveContainer()}else this.writePrimitive(t,null)},t.prototype.readObject=function(t,e){return this.internalReadObject(t,e)},t.prototype.readNonNullObject=function(t,e){var n=this.internalReadObject(t,e);if(!n)throw new Error("Invalid null object encountered");return n},t.prototype.internalReadObject=function(t,e){var o,r;if("string"==typeof t?(r=t,o=null):(o=t,r=e),null===this.readPrimitive(r))return null;this.enterContainer(r);var i=this.readPrimitive("type"),s=n[i];if(!s)throw new Error("Invalid class tag encountered in archive "+i);this.enterContainer("content");var a=new s(this);if(this.leaveContainer(),o&&!(a instanceof o))throw new Error("Found subclass of "+o+"; found "+s);return this.leaveContainer(),a},t}();t.SerializationContext=o,t.Serializable=function(t){return function(e){n[t]=e,e.___serializationTag=t}}}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Hide=0]="Hide",t[t.Action=1]="Action",t[t.Cancel=2]="Cancel",t[t.Custom=3]="Custom"}(t.ActionEscapeOptionPresentation||(t.ActionEscapeOptionPresentation={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.__tarsusInterfaceName="InputResponseType",t}();t.InputResponseType=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.__tarsusInterfaceName="AuthenticationActionParameter",t}();t.AuthenticationActionParameter=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={}));var D,F=d&&d.__extends||(D=function(t,e){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}D(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getAuthenticatorInput=function(){return this._authenticatorInput},n.prototype.setAuthenticatorInput=function(t){this._authenticatorInput=t},n.prototype.getSelectedTargets=function(){return this._selectedTargets},n.prototype.setSelectedTargets=function(t){this._selectedTargets=t},n.createAuthenticatorInput=function(e){return t.ts.mobile.sdk.impl.TargetBasedAuthenticatorInputImpl.createAuthenticatorInput(e)},n.createTargetSelectionRequest=function(e){return t.ts.mobile.sdk.impl.TargetBasedAuthenticatorInputImpl.createTargetSelectionRequest(e)},n.createTargetsSelectionRequest=function(e){return t.ts.mobile.sdk.impl.TargetBasedAuthenticatorInputImpl.createTargetsSelectionRequest(e)},n.__tarsusInterfaceName="TargetBasedAuthenticatorInput",n}(e.InputResponseType);e.TargetBasedAuthenticatorInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.__tarsusInterfaceName="OtpInput",e}(t.InputResponseType);t.OtpInput=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createSuccessResponse=function(e){return t.ts.mobile.sdk.impl.PlaceholderInputResponseImpl.createSuccessResponse(e)},n.createdFailedResponse=function(e,n){return t.ts.mobile.sdk.impl.PlaceholderInputResponseImpl.createdFailedResponse(e,n)},n.createFailedResponseWithServerProvidedStatus=function(e){return t.ts.mobile.sdk.impl.PlaceholderInputResponseImpl.createFailedResponseWithServerProvidedStatus(e)},n.__tarsusInterfaceName="PlaceholderInputResponse",n}(e.InputResponseType);e.PlaceholderInputResponse=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.__tarsusInterfaceName="PushRequestPayload",t}();t.PushRequestPayload=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createSuccessResponse=function(e){return t.ts.mobile.sdk.impl.FidoInputResponseImpl.createSuccessResponse(e)},n.createdFailedResponse=function(e,n){return t.ts.mobile.sdk.impl.FidoInputResponseImpl.createdFailedResponse(e,n)},n.__tarsusInterfaceName="FidoInputResponse",n}(e.InputResponseType);e.FidoInputResponse=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createWithUserId=function(e){return t.ts.mobile.sdk.impl.MobileApprovePushRequestPayloadImpl.createWithUserId(e)},n.createWithUserTicket=function(e){return t.ts.mobile.sdk.impl.MobileApprovePushRequestPayloadImpl.createWithUserTicket(e)},n.createWithJsonPayload=function(e){return t.ts.mobile.sdk.impl.MobileApprovePushRequestPayloadImpl.createWithJsonPayload(e)},n.__tarsusInterfaceName="MobileApprovePushRequestPayload",n}(e.PushRequestPayload);e.MobileApprovePushRequestPayload=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createSecurityQuestionAnswersInputResponse=function(e){return t.ts.mobile.sdk.impl.SecurityQuestionInputResponseImpl.createSecurityQuestionAnswersInputResponse(e)},n.__tarsusInterfaceName="SecurityQuestionInputResponse",n}(e.InputResponseType);e.SecurityQuestionInputResponse=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getAnswerText=function(){return this._answerText},e.createWithText=function(e){return t.ts.mobile.sdk.impl.SecurityQuestionAnswerImpl.createWithText(e)},e.__tarsusInterfaceName="SecurityQuestionAnswer",e}();e.SecurityQuestionAnswer=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getQuestion=function(){return this._question},e.prototype.getAnswer=function(){return this._answer},e.createAnswerToQuestion=function(e,n){return t.ts.mobile.sdk.impl.SecurityQuestionAndAnswerImpl.createAnswerToQuestion(e,n)},e.__tarsusInterfaceName="SecurityQuestionAndAnswer",e}();e.SecurityQuestionAndAnswer=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.createEscapeRequest=function(e){return t.ts.mobile.tarsusplugin.impl.TotpProvisionResultImpl.createEscapeRequest(e)},e.__tarsusInterfaceName="TotpProvisionResult",e}();e.TotpProvisionResult=n}(e.tarsusplugin||(e.tarsusplugin={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getAssertionData=function(){return this._assertionData},e.prototype.setAssertionData=function(t){this._assertionData=t},e.prototype.getStoredData=function(){return this._storedData},e.prototype.setStoredData=function(t){this._storedData=t},e.__tarsusInterfaceName="TotpProvisionOutput",e}(t.TotpProvisionResult);t.TotpProvisionOutput=e}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(t,e){this._stepTag=t,this._passphraseText=e}return t.prototype.getStepTag=function(){return this._stepTag},t.prototype.getAcquisitionChallenges=function(){return[]},t.prototype.getPassphraseText=function(){return this._passphraseText},t.__tarsusInterfaceName="AudioAcquisitionStepDescription",t}();t.AudioAcquisitionStepDescriptionImpl=e}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getTarget=function(){return this._target},n.create=function(e){return t.ts.mobile.sdk.impl.AuthenticationActionParameterTargetSelectionImpl.create(e)},n.__tarsusInterfaceName="AuthenticationActionParameterTargetSelection",n}(e.AuthenticationActionParameter);e.AuthenticationActionParameterTargetSelection=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(e){var n=t.call(this)||this;return n._target=e,n}return F(e,t),e.create=function(t){return new e(t)},e.__tarsusInterfaceName="AuthenticationActionParameterTargetSelection",e}(t.AuthenticationActionParameterTargetSelection);e.AuthenticationActionParameterTargetSelectionImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getErrorCode=function(){return this._errorCode},e.prototype.getMessage=function(){return this._message},e.prototype.getData=function(){return this._data},e.createApplicationGeneratedGeneralError=function(e,n){return t.ts.mobile.sdk.impl.AuthenticationErrorImpl.createApplicationGeneratedGeneralError(e,n)},e.createApplicationGeneratedCommunicationError=function(e,n){return t.ts.mobile.sdk.impl.AuthenticationErrorImpl.createApplicationGeneratedCommunicationError(e,n)},e.__tarsusInterfaceName="AuthenticationError",e}();e.AuthenticationError=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={}));var L=d&&d.__assign||function(){return(L=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(o){function r(t,e,n){var r=o.call(this)||this;return r._errorCode=t,r._message=e,r._data=n||{},r._data.public_properties||(r._data=L({},r._data,{public_properties:{}})),r}return F(r,o),r.errorForServerResponse=function(t){var n={server_error_code:t.error_code,server_error_message:t.error_message,server_error_data:t.data},o=t.error_message||"Internal error",i=e.AuthenticationErrorCode.Internal;switch(t.error_code){case 2009:i=e.AuthenticationErrorCode.DeviceNotFound;break;case 28:var s=new r(e.AuthenticationErrorCode.InvalidIdToken,o);return s.setPublicProperty(e.AuthenticationErrorProperty.InvalidIdTokenErrorReason,e.AuthenticationErrorPropertySymbol.InvalidIdTokenErrorReasonBadToken),s;case e.core.Protocol.ServerResponseErrorCode.UserIdTokenExpired:return(s=new r(e.AuthenticationErrorCode.InvalidIdToken,o)).setPublicProperty(e.AuthenticationErrorProperty.InvalidIdTokenErrorReason,e.AuthenticationErrorPropertySymbol.InvalidIdTokenErrorReasonExpiredToken),s;case 3001:case 3002:i=e.AuthenticationErrorCode.InvalidDeviceBinding;break;case 4e3:case 4002:i=e.AuthenticationErrorCode.ControlFlowExpired;break;case 4005:case 4006:i=e.AuthenticationErrorCode.SessionRequired;break;case 6001:case 6002:i=e.AuthenticationErrorCode.ApprovalWrongState}return new r(i,o,n)},r.createApplicationGeneratedGeneralError=function(t,n){return new r(e.AuthenticationErrorCode.Internal,t,n)},r.createApplicationGeneratedCommunicationError=function(t,n){return new r(e.AuthenticationErrorCode.Communication,t,n)},r.errorForSessionRejectionFailureData=function(t){var n=e.AuthenticationErrorCode.PolicyRejection,o="Session rejected by server.",i={failure_data:t};if(t&&t.source)switch(t.reason&&t.reason.type){case e.core.Protocol.FailureReasonType.ApprovalExpired:n=e.AuthenticationErrorCode.ApprovalWrongState,o="Approval expired.",i.approval_state="expired"}return new r(n,o,i)},r.errorForHostInternalBiometricErrorData=function(o,r){var i;switch(o[t.sdkhost.ErrorDataInternalError]){case t.sdkhost.InternalErrorBiometricInvalidated:i=new n.AuthenticationErrorImpl(e.AuthenticationErrorCode.AuthenticatorInvalidated,r+" registration invalidated.");break;case t.sdkhost.InternalErrorWrongBiometric:i=new n.AuthenticationErrorImpl(e.AuthenticationErrorCode.InvalidInput,"Invalid "+r+" was input.");break;case t.sdkhost.InternalErrorBiometricNotConfigured:(i=new n.AuthenticationErrorImpl(e.AuthenticationErrorCode.AuthenticatorExternalConfigError,r+" not configured on this device.")).setPublicProperty(e.AuthenticationErrorProperty.AuthenticatorExternalConfigErrorReason,e.AuthenticationErrorPropertySymbol.AuthenticatorExternalConfigErrorReasonBiometricsNotEnrolled);break;case t.sdkhost.InternalErrorBiometricOsLockTemporary:(i=new n.AuthenticationErrorImpl(e.AuthenticationErrorCode.AuthenticatorExternalConfigError,r+" authentication is temporarily locked by the OS.")).setPublicProperty(e.AuthenticationErrorProperty.AuthenticatorExternalConfigErrorReason,e.AuthenticationErrorPropertySymbol.AuthenticatorExternalConfigErrorReasonBiometricsOsLockTemporary);break;case t.sdkhost.InternalErrorBiometricOsLockPermanent:(i=new n.AuthenticationErrorImpl(e.AuthenticationErrorCode.AuthenticatorExternalConfigError,r+" authentication is permanently locked by the OS.")).setPublicProperty(e.AuthenticationErrorProperty.AuthenticatorExternalConfigErrorReason,e.AuthenticationErrorPropertySymbol.AuthenticatorExternalConfigErrorReasonBiometricsOsLockPermanent);break;default:i=null}return i},r.prototype.setPublicProperty=function(t,n){this._data.public_properties[e.AuthenticationErrorProperty[t]]=n},r.prototype.getPublicProperty=function(t){return this._data.public_properties[e.AuthenticationErrorProperty[t]]},r.prototype.getPublicBooleanProperty=function(t){var n=this.getPublicProperty(t);if(n&&"boolean"!=typeof n)throw new r(e.AuthenticationErrorCode.AppImplementation,"type of property "+e.AuthenticationErrorProperty[t]+" is not 'boolean'");return n},r.prototype.getPublicNumberProperty=function(t){var n=this.getPublicProperty(t);if(n&&"number"!=typeof n)throw new r(e.AuthenticationErrorCode.AppImplementation,"type of property "+e.AuthenticationErrorProperty[t]+" is not 'number'");return n},r.prototype.getPublicStringProperty=function(t){var n=this.getPublicProperty(t);if(n&&"string"!=typeof n)throw new r(e.AuthenticationErrorCode.AppImplementation,"type of property "+e.AuthenticationErrorProperty[t]+" is not 'string'");return n},r.prototype.getPublicSymbolicProperty=function(t){var n=this.getPublicProperty(t);if(n&&!e.AuthenticationErrorProperty[t])throw new r(e.AuthenticationErrorCode.AppImplementation,"type of property "+e.AuthenticationErrorProperty[t]+" is not 'AuthenticationErrorPropertySymbol'");return n},r.prototype.toString=function(){return"AuthenticationError<"+e.AuthenticationErrorCode[this._errorCode]+", "+this._message+", "+JSON.stringify(this._data)+">"},r.errorForAssertionResponse=function(t){var n;switch(t.assertion_error_code){case e.core.Protocol.AssertionErrorCode.FailedAssertion:n=e.AuthenticationErrorCode.InvalidInput;break;case e.core.Protocol.AssertionErrorCode.MethodLocked:n=e.AuthenticationErrorCode.AuthenticatorLocked;break;case e.core.Protocol.AssertionErrorCode.HistoryRepeat:n=e.AuthenticationErrorCode.RegisteredSecretAlreadyInHistory;break;default:n=e.AuthenticationErrorCode.Internal}return new r(n,t.assertion_error_message||"Assertion error code "+t.assertion_error_code,{assertion_error_code:t.assertion_error_code,additional_data:t.data})},r.appImplementationError=function(t){return new r(e.AuthenticationErrorCode.AppImplementation,t)},r.errorForTransportResponse=function(t){return new r(e.AuthenticationErrorCode.Communication,"HTTP response error",{status:t.getStatus(),body:t.getBodyJson()})},r.ensureAuthenticationError=function(t){if(r.dynamicCast(t))return t;var n={js_error_message:t.toString()};return t.stack&&(n.js_error_stack=t.stack),new r(e.AuthenticationErrorCode.Internal,"Internal error occurred ("+t.toString()+")",n)},r.augmentErrorData=function(t,e){var n,o={},i=t.getData();if(i)for(n in i)o[n]=i[n];for(n in e)o[n]=e[n];return new r(t.getErrorCode(),t.getMessage(),o)},r.dynamicCast=function(t){return void 0!==t.getErrorCode&&void 0!==t.getMessage&&void 0!==t.getData},r}(e.AuthenticationError);n.AuthenticationErrorImpl=o}(e.impl||(e.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(t,e){this._authenticator=t,this._suggestedParams=e}return t.prototype.getAuthenticator=function(){return this._authenticator},t.prototype.getSuggestedParameters=function(){return this._suggestedParams},t}();t.AuthenticationOptionImpl=e}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(t,e,n,o){this._appData=n||null,this._token=t||null,this._internalData=o||null,this._deviceId=e||null}return t.prototype.getToken=function(){return this._token||""},t.prototype.getDeviceId=function(){return this._deviceId||""},t.prototype.getData=function(){return this._appData||{}},t.prototype.getInternalData=function(){return this._internalData},t.fromCflowServerResponse=function(e,n){return new t(e.token,n,e.application_data,e.data)},t}();t.AuthenticationResultImpl=e}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getResultType=function(){return this._resultType},e.prototype.setResultType=function(t){this._resultType=t},e.prototype.getSelectedAuthenticator=function(){return this._selectedAuthenticator},e.prototype.setSelectedAuthenticator=function(t){this._selectedAuthenticator=t},e.prototype.getSelectedAuthenticationParameters=function(){return this._selectedAuthenticationParameters},e.prototype.setSelectedAuthenticationParameters=function(t){this._selectedAuthenticationParameters=t},e.prototype.getActionEscapeRequest=function(){return this._actionEscapeRequest},e.prototype.setActionEscapeRequest=function(t){this._actionEscapeRequest=t},e.createAbortRequest=function(){return t.ts.mobile.sdk.impl.AuthenticatorSelectionResultImpl.createAbortRequest()},e.createEscapeRequest=function(e,n){return t.ts.mobile.sdk.impl.AuthenticatorSelectionResultImpl.createEscapeRequest(e,n)},e.createSelectionRequest=function(e){return t.ts.mobile.sdk.impl.AuthenticatorSelectionResultImpl.createSelectionRequest(e)},e.createParameterizedSelectionRequest=function(e,n){return t.ts.mobile.sdk.impl.AuthenticatorSelectionResultImpl.createParameterizedSelectionRequest(e,n)},e.__tarsusInterfaceName="AuthenticatorSelectionResult",e}();e.AuthenticatorSelectionResult=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createAbortRequest=function(){var e=new n;return e.setResultType(t.AuthenticatorSelectionResultType.Abort),e},n.createSelectionRequest=function(e){var o=new n;return o.setResultType(t.AuthenticatorSelectionResultType.SelectAuthenticator),o.setSelectedAuthenticator(e),o},n.createEscapeRequest=function(e,o){var r=new n;return r._resultType=t.AuthenticatorSelectionResultType.Escape,r._actionEscapeRequest=new t.ActionEscapeRequest,r._actionEscapeRequest._escapeOption=e,r._actionEscapeRequest._escapeParameters=o,r},n}(t.AuthenticatorSelectionResult);e.AuthenticatorSelectionResultImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(t){this._acquisitionChallenges=t}return t.prototype.getStepTag=function(){return"imageAcquisition"},t.prototype.getAcquisitionChallenges=function(){return this._acquisitionChallenges},t.__tarsusInterfaceName="CameraAcquisitionStepDescription",t}();t.CameraAcquisitionStepDescriptionImpl=e}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getLocalEnrollmentKeySizeInBytes=function(){return this._localEnrollmentKeySizeInBytes},e.prototype.getLocalEnrollmentKeyIterationCount=function(){return this._localEnrollmentKeyIterationCount},e.prototype.setLocalEnrollmentKeyIterationCount=function(t){this._localEnrollmentKeyIterationCount=t},e.create=function(e){return t.ts.mobile.sdk.impl.ClientCryptoSettingsImpl.create(e)},e.__tarsusInterfaceName="ClientCryptoSettings",e}();e.ClientCryptoSettings=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.create=function(t){var n=new e;return n.setLocalEnrollmentKeyIterationCount(t),n._localEnrollmentKeySizeInBytes=32,n},e}(t.ClientCryptoSettings);e.ClientCryptoSettingsImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){function e(t,e){this._description=t,this._menuItemOptions=e||{}}return e.prototype.getDescription=function(){return this._description},e.prototype.getAvailableActions=function(){var e=this,n=[];switch(this._description.getRegistrationStatus()){case t.AuthenticatorRegistrationStatus.Registered:n=[t.AuthenticatorConfigurationAction.Reregister,t.AuthenticatorConfigurationAction.Unregister];break;case t.AuthenticatorRegistrationStatus.Unregistered:case t.AuthenticatorRegistrationStatus.LocallyInvalid:n=[t.AuthenticatorConfigurationAction.Register]}return n.filter((function(n){return n==t.AuthenticatorConfigurationAction.Reregister&&!e._menuItemOptions.hide_reregister||n==t.AuthenticatorConfigurationAction.Register&&!e._menuItemOptions.hide_register||n==t.AuthenticatorConfigurationAction.Unregister&&!e._menuItemOptions.hide_unregister}))},e}();e.ConfigurableAuthenticatorImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getUserChoice=function(){return this._userChoice},e.prototype.setUserChoice=function(t){this._userChoice=t},e.prototype.getActionEscapeRequest=function(){return this._actionEscapeRequest},e.prototype.setActionEscapeRequest=function(t){this._actionEscapeRequest=t},e.create=function(e){return t.ts.mobile.sdk.impl.ConfirmationInputImpl.create(e)},e.createEscapeRequest=function(e,n){return t.ts.mobile.sdk.impl.ConfirmationInputImpl.createEscapeRequest(e,n)},e.__tarsusInterfaceName="ConfirmationInput",e}();e.ConfirmationInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.create=function(t){var e=new n;return e.setUserChoice(t),e},n.createEscapeRequest=function(e,o){var r=new n,i=new t.ActionEscapeRequest;return i.setEscapeOption(e),i.setEscapeParameters(o),r.setActionEscapeRequest(i),r},n}(t.ConfirmationInput);e.ConfirmationInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getRequestType=function(){return this._requestType},e.prototype.setRequestType=function(t){this._requestType=t},e.create=function(e){return t.ts.mobile.sdk.impl.ControlRequestImpl.create(e)},e.__tarsusInterfaceName="ControlRequest",e}();e.ControlRequest=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.create=function(t){var n=new e;return n.setRequestType(t),n},e}(t.ControlRequest);e.ControlRequestImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getPrompt=function(){return this._prompt},n.prototype.setPrompt=function(t){this._prompt=t},n.prototype.getTitle=function(){return this._title},n.prototype.setTitle=function(t){this._title=t},n.prototype.getSubtitle=function(){return this._subtitle},n.prototype.setSubtitle=function(t){this._subtitle=t},n.prototype.getCancelButtonTitle=function(){return this._cancelButtonTitle},n.prototype.setCancelButtonTitle=function(t){this._cancelButtonTitle=t},n.create=function(e){return t.ts.mobile.sdk.impl.DeviceBiometricsInputImpl.create(e)},n.createFull=function(e,n,o,r){return t.ts.mobile.sdk.impl.DeviceBiometricsInputImpl.createFull(e,n,o,r)},n.__tarsusInterfaceName="DeviceBiometricsInput",n}(e.InputResponseType);e.DeviceBiometricsInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.create=function(t){var n=new e;return t&&n.setPrompt(t),n},e}(t.DeviceBiometricsInput);e.DeviceBiometricsInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(t,e){this._id=t,this._name=e}return t.prototype.getId=function(){return this._id},t.prototype.getName=function(){return this._name},t}();t.DeviceGroupImpl=e}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){function n(t){this.updateFromServer(t)}return n.prototype.getDeviceHwId=function(){return this._id},n.prototype.getName=function(){return this._name?this._name:this._model+" "+this._osType+" "+this._osVersion},n.prototype.getStatus=function(){return this._status},n.prototype.getLastAccess=function(){return this._lastAccess},n.prototype.getLastAccessLocation=function(){return this._lastAccessLocation},n.prototype.getLastAccessLocationAttributes=function(){return this._lastAccessLocationAttributes},n.prototype.getRegistered=function(){return this._registered},n.prototype.getModel=function(){return this._model},n.prototype.getOsType=function(){return this._osType},n.prototype.getOsVersion=function(){return this._osVersion},n.prototype.getUseCount=function(){return this._useCount},n.prototype.getIsCurrent=function(){return this._isCurrent},n.prototype.getDeviecId=function(){return this._id},n.prototype.setStatus=function(t){this._status=t},n.prototype.setName=function(t){this._name=t},n.prototype.forceCurrent=function(){this._isCurrent=!0},n.prototype.updateFromServer=function(n){switch(this._model=t.core.DeviceModelConverter.getDeviceModel(n.device_model,n.os_type),this._name=n.name,this._lastAccess=Date.parse(n.last_access),this._registered=Date.parse(n.registered),this._osType=t.core.DeviceModelConverter.getOsName(n.os_type),this._osVersion=n.os_version,this._useCount=n.use_count,this._isCurrent=n.cur_device,this._id=n.device_id,n.status){case t.core.Protocol.DeviceStatusServerFormat.Disabled:this._status=t.DeviceStatus.Disabled;break;case t.core.Protocol.DeviceStatusServerFormat.LongInactivity:this._status=t.DeviceStatus.LongInactivity;break;case t.core.Protocol.DeviceStatusServerFormat.NoRecentActivity:this._status=t.DeviceStatus.NoRecentActivity;break;case t.core.Protocol.DeviceStatusServerFormat.RecentlyUsed:this._status=t.DeviceStatus.RecentlyUsed;break;case t.core.Protocol.DeviceStatusServerFormat.Removed:this._status=t.DeviceStatus.Removed;break;default:throw new e.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Unknown device status "+n.status)}if(n.last_access_location){var o=new t.GeoLocation;o.longitude=n.last_access_location.lng,o.latitude=n.last_access_location.lat,this._lastAccessLocation=o,this._lastAccessLocationAttributes=new e.LocationAttributesImpl(n.last_access_location)}},n}();e.DeviceInfoImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.getOsName=function(t){var e=t;switch(t){case"iPhone":case"iPad":e="iOS"}return e},t.getDeviceModel=function(t,e){var n=t;if("iPhone"==e)switch(t){case"i386":case"x86_64":n="Simulator";break;case"iPod1,1":case"iPod2,1":case"iPod3,1":case"iPod4,1":case"iPod7,1":n="iPod Touch";break;case"iPhone1,1":case"iPhone1,2":case"iPhone2,1":n="iPhone";break;case"iPad1,1":n="iPad";break;case"iPad2,1":n="iPad 2";break;case"iPad3,1":n="iPad";break;case"iPhone3,1":case"iPhone3,3":n="iPhone 4";break;case"iPhone4,1":n="iPhone 4S";break;case"iPhone5,1":case"iPhone5,2":n="iPhone 5";break;case"iPad3,4":n="iPad";break;case"iPad2,5":n="iPad Mini";break;case"iPhone5,3":case"iPhone5,4":n="iPhone 5c";break;case"iPhone6,1":case"iPhone6,2":n="iPhone 5s";break;case"iPhone7,1":n="iPhone 6 Plus";break;case"iPhone7,2":n="iPhone 6";break;case"iPhone8,1":n="iPhone 6S";break;case"iPhone8,2":n="iPhone 6S Plus";break;case"iPhone8,4":n="iPhone SE";break;case"iPhone9,1":case"iPhone9,3":n="iPhone 7";break;case"iPhone9,2":case"iPhone9,4":n="iPhone 7 Plus";break;case"iPhone10,1":case"iPhone10,4":n="iPhone 8";break;case"iPhone10,2":case"iPhone10,5":n="iPhone 8 Plus";break;case"iPhone10,3":case"iPhone10,6":n="iPhone X";break;case"iPad4,1":case"iPad4,2":n="iPad Air";break;case"iPad4,4":case"iPad4,5":case"iPad4,7":n="iPad Mini";break;case"iPad6,7":case"iPad6,8":n='iPad Pro (12.9")';break;case"iPad6,3":case"iPad6,4":n='iPad Pro (9.7")';break;case"iPhone11,2":n="iPhone XS";break;case"iPhone11,6":case"iPhone11,4":n="iPhone XS Max";break;case"iPhone11,8":n="iPhone XR";break;case"iPad6,7":case"iPad6,8":n='iPad Pro (12.9")';break;case"iPad6,11":case"iPad6,12":n="iPad (2017)";break;case"iPad7,1":case"iPad7,2":n="iPad Pro 2nd Gen";break;case"iPad7,3":case"iPad7,4":n='iPad Pro (10.5")';break;case"iPad7,5":case"iPad7,6":n="iPad";break;case"iPad8,1":case"iPad8,2":case"iPad8,3":case"iPad8,4":n='iPad Pro (11")';break;case"iPad8,5":case"iPad8,6":case"iPad8,7":case"iPad8,8":n='iPad Pro (12.9")';break;case"iPhone12,1":n="iPhone 11";break;case"iPhone12,3":n="iPhone 11 Pro";break;case"iPhone12,5":n="iPhone 11 Pro Max"}return n},t}();t.DeviceModelConverter=e}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Password=0]="Password",t[t.Fingerprint=1]="Fingerprint",t[t.Pincode=2]="Pincode",t[t.Pattern=3]="Pattern",t[t.Otp=4]="Otp",t[t.Face=5]="Face",t[t.Voice=6]="Voice",t[t.Eye=7]="Eye",t[t.Emoji=8]="Emoji",t[t.Questions=9]="Questions",t[t.FaceID=10]="FaceID",t[t.Generic=11]="Generic",t[t.MobileApprove=12]="MobileApprove",t[t.Totp=13]="Totp",t[t.DeviceBiometrics=14]="DeviceBiometrics"}(t.AuthenticatorType||(t.AuthenticatorType={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.RedirectTypeBind=0]="RedirectTypeBind",t[t.RedirectTypeAuthenticate=1]="RedirectTypeAuthenticate",t[t.RedirectTypeBindOrAuthenticate=2]="RedirectTypeBindOrAuthenticate",t[t.RedirectTypeInvokePolicy=3]="RedirectTypeInvokePolicy"}(t.RedirectType||(t.RedirectType={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n,o;e.AuthTypeData={password:{authTypeEnum:t.AuthenticatorType.Password,authTypeName:"Password"},fingerprint:{authTypeEnum:t.AuthenticatorType.Fingerprint,authTypeName:"Fingerprint"},pin:{authTypeEnum:t.AuthenticatorType.Pincode,authTypeName:"PIN"},pin_centralized:{authTypeEnum:t.AuthenticatorType.Pincode,authTypeName:"PIN"},pattern:{authTypeEnum:t.AuthenticatorType.Pattern,authTypeName:"Pattern"},pattern_centralized:{authTypeEnum:t.AuthenticatorType.Pattern,authTypeName:"Pattern"},otp:{authTypeEnum:t.AuthenticatorType.Otp,authTypeName:"OTP"},face:{authTypeEnum:t.AuthenticatorType.Face,authTypeName:"Face"},face_server:{authTypeEnum:t.AuthenticatorType.Face,authTypeName:"Face"},voice_server:{authTypeEnum:t.AuthenticatorType.Voice,authTypeName:"Voice"},eye:{authTypeEnum:t.AuthenticatorType.Eye,authTypeName:"Eye"},emoji:{authTypeEnum:t.AuthenticatorType.Emoji,authTypeName:"Emoji"},question:{authTypeEnum:t.AuthenticatorType.Questions,authTypeName:"Questions"},face_id:{authTypeEnum:t.AuthenticatorType.FaceID,authTypeName:"FaceID"},mobile_approve:{authTypeEnum:t.AuthenticatorType.MobileApprove,authTypeName:"MobileApprove"},totp:{authTypeEnum:t.AuthenticatorType.Totp,authTypeName:"Totp"},device_biometrics:{authTypeEnum:t.AuthenticatorType.DeviceBiometrics,authTypeName:"DeviceBiometrics"},fido2:{authTypeEnum:t.AuthenticatorType.Generic,authTypeName:"FIDO2Authenticator"}},function(t){t.Closed="closed"}(e.SessionStateChangeState||(e.SessionStateChangeState={})),function(t){t.Pending="pending",t.Completed="completed",t.Rejected="rejected"}(e.AuthSessionState||(e.AuthSessionState={})),function(t){t.LOGINS="frequency_logins",t.DAYS="frequency_days"}(e.PromotionStrategyFrequency||(e.PromotionStrategyFrequency={})),function(t){t.Numeric="numeric",t.Alphanumeric="alphanumeric",t.Binary="binary"}(e.QrCodeFormatType||(e.QrCodeFormatType={})),function(t){t.Alphanumeric="alphanumeric",t.QrCode="qrcode"}(e.TicketIdFormatType||(e.TicketIdFormatType={})),function(t){t.ApprovalApprove="approval_approve"}(e.FailureSourceTransactionType||(e.FailureSourceTransactionType={})),function(t){t.AutoExecute="auto_execute",t.AssertionRejected="assertion_rejected",t.Policy="policy",t.Locked="locked",t.ApprovalExpired="approval_expired"}(e.FailureReasonType||(e.FailureReasonType={})),function(t){t.DefaultAuthenticator="default",t.AuthenticatorMenu="menu",t.FirstAuthenticator="first"}(e.AuthMenuPresentationMode||(e.AuthMenuPresentationMode={})),function(t){t.Registered="registered",t.Registering="registering",t.Unregistered="unregistered"}(e.AuthenticationMethodStatus||(e.AuthenticationMethodStatus={})),function(t){t.Validate="validate",t.Generate="generate"}(e.AuthenticationMethodOtpState||(e.AuthenticationMethodOtpState={})),function(t){t.None="none",t.Sms="sms",t.Email="email",t.Voice="voice",t.Push="push_notification"}(e.AuthenticationMethodOtpChannelType||(e.AuthenticationMethodOtpChannelType={})),function(t){t.Numeric="numeric",t.QrCode="qrcode",t.External="external",t.Unknown=""}(e.OtpFormatType||(e.OtpFormatType={})),function(t){t.WaitForApproval="wait_for_approval",t.WaitForAuthenticate="wait_for_authenticate"}(e.AuthenticationMethodMobileApproveState||(e.AuthenticationMethodMobileApproveState={})),function(t){t.AlphaNumeric="alpha_numeric",t.Numeric="numeric",t.QrCode="qrcode"}(e.TotpChallengeFormatType||(e.TotpChallengeFormatType={})),function(t){t.SelectTargets="select_targets",t.Validate="validate",t.Generate="generate"}(e.AuthenticationMethodTotpState||(e.AuthenticationMethodTotpState={})),function(t){t.RedirectTypeNameBind="bind",t.RedirectTypeNameAuthenticate="auth",t.RedirectTypeNameBindOrAuthenticate="bind_or_auth",t.RedirectTypeNameInvokePolicy="invoke"}(o=e.RedirectTypeName||(e.RedirectTypeName={})),e.RedirectTypeMap=((n={})[o.RedirectTypeNameBind]=t.RedirectType.RedirectTypeBind,n[o.RedirectTypeNameAuthenticate]=t.RedirectType.RedirectTypeAuthenticate,n[o.RedirectTypeNameBindOrAuthenticate]=t.RedirectType.RedirectTypeBindOrAuthenticate,n[o.RedirectTypeNameInvokePolicy]=t.RedirectType.RedirectTypeInvokePolicy,n),function(t){t[t.EncryptionStateError=23]="EncryptionStateError",t[t.UserIdTokenExpired=29]="UserIdTokenExpired",t[t.DeviceKeyExpired=2017]="DeviceKeyExpired"}(e.ServerResponseErrorCode||(e.ServerResponseErrorCode={})),function(t){t[t.NotRegistered=1]="NotRegistered",t[t.InvalidAction=2]="InvalidAction",t[t.BadConfig=3]="BadConfig",t[t.BadFch=4]="BadFch",t[t.FailedAssertion=5]="FailedAssertion",t[t.MethodLocked=6]="MethodLocked",t[t.DataMissing=7]="DataMissing",t[t.HistoryRepeat=11]="HistoryRepeat",t[t.ExternalProcessPending=13]="ExternalProcessPending",t[t.MustRegister=14]="MustRegister",t[t.NotFinished=16]="NotFinished",t[t.MissingQuestions=17]="MissingQuestions",t[t.RepeatCurrentStep=18]="RepeatCurrentStep",t[t.FailOver=19]="FailOver",t[t.AssertionContainerNotComplete=20]="AssertionContainerNotComplete",t[t.AckRequired=22]="AckRequired"}(e.AssertionErrorCode||(e.AssertionErrorCode={})),function(t){t.Pending="pending",t.Approved="approved",t.Denied="declined",t.Expired="expired"}(e.ServerResponseDataApprovalsApprovalStatus||(e.ServerResponseDataApprovalsApprovalStatus={})),function(t){t.RecentlyUsed="recently_used",t.NoRecentActivity="no_recent_activity",t.LongInactivity="long_inactivity",t.Disabled="disabled",t.Removed="removed"}(e.DeviceStatusServerFormat||(e.DeviceStatusServerFormat={})),function(t){t.Active="active",t.Disabled="disabled"}(e.CollectorState||(e.CollectorState={}))}(e.Protocol||(e.Protocol={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._styleSheet=n.merge.apply(n,t),this.replaceRefValues()}return n.prototype.getMatchingStyle=function(e){var n=this;if(null!=this._styleSheet.styles){var o={};return this._styleSheet.styles.forEach((function(t){var r=n.matchStyle(e,t);o=L({},o,r)})),new t.impl.UIStyleImpl(o)}return t.impl.UIStyleImpl.emptyStyle()},n.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n={styles:[],values:{}};return t.forEach((function(t){var e;(e=n.styles).push.apply(e,t.styles),n.values=L({},n.values,t.values)})),n},n.prototype.matchStyle=function(t,e){return e.rule.tags.every((function(e){return t.indexOf(e)>-1}))?e.properties:{}},n.prototype.replaceRefValues=function(){var t=this;null!=this._styleSheet.values&&this._styleSheet.styles&&this._styleSheet.styles.forEach((function(e){e.properties=t.replaceStyleProperties(e.properties)}))},n.prototype.replaceRef=function(t){return e.Protocol.isRefType(t)?this._styleSheet.values[t.ref]:t},n.prototype.replaceStyleProperties=function(t){var e=t;for(var n in t)e[n]=this.replaceRef(t[n]);return e},n}();e.UIStyleSheets=n}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n={hide:t.ActionEscapeOptionPresentation.Hide,action:t.ActionEscapeOptionPresentation.Action,cancel:t.ActionEscapeOptionPresentation.Cancel,custom:t.ActionEscapeOptionPresentation.Custom},o=function(){function t(t){this._id=t.id,this._displayName=t.display_name,this._presentation=n[t.presentation]}return t.prototype.getId=function(){return this._id},t.prototype.getDisplayName=function(){return this._displayName},t.prototype.getPresentation=function(){return this._presentation},t}();e.EscapeOptionImpl=o}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createSuccessResponse=function(e){return t.ts.mobile.sdk.impl.Fido2InputResponseImpl.createSuccessResponse(e)},n.createdFailedResponse=function(e){return t.ts.mobile.sdk.impl.Fido2InputResponseImpl.createdFailedResponse(e)},n.__tarsusInterfaceName="Fido2InputResponse",n}(e.InputResponseType);e.Fido2InputResponse=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createSuccessResponse=function(e){var n=new t.Fido2AuthenticatorSuccessResponse;return n.setFido2Response(e),n},n.createdFailedResponse=function(e){var n=new t.Fido2AuthenticationFailedResponse;return n.setFailureError(e),n},n}(t.Fido2InputResponse);e.Fido2InputResponseImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createSuccessResponse=function(e){var n=new t.FidoAuthSuccessResponse;return n.setFidoResponse(e),n},n.createdFailedResponse=function(e,n){var o=new t.FidoAuthFailureResponse;return o.setFailureError(n),o.setExpired(e.getExpired()),o.setLocked(e.getLocked()),o.setRegistered(e.getRegistered()),o.setRegistrationStatus(e.getRegistrationStatus()),o},n}(t.PlaceholderInputResponse);e.FidoInputResponseImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getPrompt=function(){return this._prompt},n.prototype.setPrompt=function(t){this._prompt=t},n.prototype.getCancelButtonTitle=function(){return this._cancelButtonTitle},n.prototype.setCancelButtonTitle=function(t){this._cancelButtonTitle=t},n.prototype.getFallbackButtonTitle=function(){return this._fallbackButtonTitle},n.prototype.setFallbackButtonTitle=function(t){this._fallbackButtonTitle=t},n.prototype.getFallbackControlRequestType=function(){return this._fallbackControlRequestType},n.prototype.setFallbackControlRequestType=function(t){this._fallbackControlRequestType=t},n.create=function(e){return t.ts.mobile.sdk.impl.FingerprintInputImpl.create(e)},n.createFallbackEnabledPrompt=function(e,n,o){return t.ts.mobile.sdk.impl.FingerprintInputImpl.createFallbackEnabledPrompt(e,n,o)},n.__tarsusInterfaceName="FingerprintInput",n}(e.InputResponseType);e.FingerprintInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.create=function(t){var e=new n;return t&&e.setPrompt(t),e},n.createFallbackEnabledPrompt=function(e,o,r){var i=new n;return e&&i.setPrompt(e),o&&i.setFallbackButtonTitle(o),i.setFallbackControlRequestType(r||t.ControlRequestType.SelectMethod),i},n}(t.FingerprintInput);e.FingerprintInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getJsonData=function(){return this._jsonData},e.prototype.setJsonData=function(t){this._jsonData=t},e.prototype.getControlRequest=function(){return this._controlRequest},e.prototype.setControlRequest=function(t){this._controlRequest=t},e.prototype.getActionEscapeRequest=function(){return this._actionEscapeRequest},e.prototype.setActionEscapeRequest=function(t){this._actionEscapeRequest=t},e.createFormInputSubmissionRequest=function(e){return t.ts.mobile.sdk.impl.FormInputImpl.createFormInputSubmissionRequest(e)},e.createFormCancellationRequest=function(){return t.ts.mobile.sdk.impl.FormInputImpl.createFormCancellationRequest()},e.createEscapeRequest=function(e,n){return t.ts.mobile.sdk.impl.FormInputImpl.createEscapeRequest(e,n)},e.__tarsusInterfaceName="FormInput",e}();e.FormInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createFormInputSubmissionRequest=function(e){var o=new n;return o.setJsonData(e),o.setControlRequest(t.FormControlRequest.Submit),o},n.createFormCancellationRequest=function(){var e=new n;return e.setControlRequest(t.FormControlRequest.Abort),e},n.createEscapeRequest=function(e,o){var r=new n,i=new t.ActionEscapeRequest;return i.setEscapeOption(e),i.setEscapeParameters(o),r.setActionEscapeRequest(i),r.setControlRequest(t.FormControlRequest.Escape),r},n}(t.FormInput);e.FormInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){t.GeoLocation=function(){}}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getResponse=function(){return this._response},e.prototype.setResponse=function(t){this._response=t},e.prototype.getControlRequest=function(){return this._controlRequest},e.prototype.setControlRequest=function(t){this._controlRequest=t},e.prototype.getActionEscapeRequest=function(){return this._actionEscapeRequest},e.prototype.setActionEscapeRequest=function(t){this._actionEscapeRequest=t},e.createControlResponse=function(e){return t.ts.mobile.sdk.impl.InputOrControlResponseImpl.createControlResponse(e)},e.createEscapeResponse=function(e,n){return t.ts.mobile.sdk.impl.InputOrControlResponseImpl.createEscapeResponse(e,n)},e.createInputResponse=function(e){return t.ts.mobile.sdk.impl.InputOrControlResponseImpl.createInputResponse(e)},e.__tarsusInterfaceName="InputOrControlResponse",e}();e.InputOrControlResponse=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createControlResponse=function(t){var e=new n;return e.setControlRequest(t),e},n.createInputResponse=function(t){var e=new n;return e.setResponse(t),e},n.createEscapeResponse=function(e,o){var r=new n;return r._actionEscapeRequest=new t.ActionEscapeRequest,r._actionEscapeRequest._escapeOption=e,r._actionEscapeRequest._escapeParameters=o,r},n.prototype.isControlRequest=function(){return!!this._controlRequest},n}(t.InputOrControlResponse);e.InputOrControlResponseImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getContinueProcessing=function(){return this._continueProcessing},e.prototype.setContinueProcessing=function(t){this._continueProcessing=t},e.create=function(e){return t.ts.mobile.sdk.impl.JsonDataProcessingResultImpl.create(e)},e.__tarsusInterfaceName="JsonDataProcessingResult",e}();e.JsonDataProcessingResult=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.create=function(t){var n=new e;return n.setContinueProcessing(t),n},e}(t.JsonDataProcessingResult);e.JsonDataProcessingResultImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(t){this.city=t.city,this.state=t.state,this.country=t.country}return t.prototype.getCity=function(){return this.city},t.prototype.getCountry=function(){return this.country},t.prototype.getState=function(){return this.state},t}();t.LocationAttributesImpl=e}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){function n(t){this._deviceInfo=new e.DeviceInfoImpl(t)}return n.prototype.getInfo=function(){return this._deviceInfo},n.prototype.getAvailableActions=function(){if(this._deviceInfo.getStatus()==t.DeviceStatus.Removed)return[];var e=[t.DeviceManagementAction.Rename];return this._deviceInfo.getIsCurrent()||e.push(t.DeviceManagementAction.Remove),e},n}();e.ManagedDeviceImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){function n(n){switch(this._approval=new e.MobileApprovalImpl(n),this._approval.getStatus()){case t.MobileApprovalStatus.Pending:this._availableActions=[t.MobileApprovalAction.Approve,t.MobileApprovalAction.Deny];break;default:this._availableActions=[]}}return n.prototype.getApproval=function(){return this._approval},n.prototype.getAvailableActions=function(){return this._availableActions},n}();e.ManagedMobileApprovalImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){function n(n){if(this._originDevice=null,this._approvalId=n.approval_id,this._source=n.source,this._title=n.title,this._details=n.details,this._creationTime=n.create,this._finishTime=n.finish,this._expiresAt=n.create+1e3*n.expiry_in,this._originAppId=n.origin_app_id,this._customParams=n.custom_params,n.origin_device&&(this._originDevice=t.TargetDeviceDetailsImpl.fromServerFormat(n.origin_device)),n.location){var o=new t.GeoLocation;o.longitude=n.location.lng,o.latitude=n.location.lat,this._location=o}switch(n.status){case t.core.Protocol.ServerResponseDataApprovalsApprovalStatus.Approved:this._status=t.MobileApprovalStatus.Approved;break;case t.core.Protocol.ServerResponseDataApprovalsApprovalStatus.Denied:this._status=t.MobileApprovalStatus.Denied;break;case t.core.Protocol.ServerResponseDataApprovalsApprovalStatus.Expired:this._status=t.MobileApprovalStatus.Expired;break;case t.core.Protocol.ServerResponseDataApprovalsApprovalStatus.Pending:this._status=t.MobileApprovalStatus.Pending;break;default:throw new e.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Unknown approval status "+n.status)}}return n.prototype.getApprovalId=function(){return this._approvalId},n.prototype.getSource=function(){return this._source},n.prototype.getTitle=function(){return this._title},n.prototype.getDetails=function(){return this._details},n.prototype.getCreationTime=function(){return this._creationTime},n.prototype.getFinishTime=function(){return this._finishTime},n.prototype.getExpiresAt=function(){return this._expiresAt},n.prototype.getOriginAppId=function(){return this._originAppId},n.prototype.getOriginDevice=function(){return this._originDevice},n.prototype.getLocation=function(){return this._location},n.prototype.getCustomParams=function(){return this._customParams},n.prototype.getStatus=function(){return this._status},n.prototype.isExpired=function(){return this._status==t.MobileApprovalStatus.Expired},n.prototype.updateStatus=function(t){this._status=t},n}();e.MobileApprovalImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.__tarsusInterfaceName="MobileApproveInput",e}(t.InputResponseType);t.MobileApproveInput=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getPollingTimeout=function(){return this._pollingTimeout},n.prototype.setPollingTimeout=function(t){this._pollingTimeout=t},n.createRequestPollingInput=function(){return t.ts.mobile.sdk.impl.MobileApproveInputRequestPollingImpl.createRequestPollingInput()},n.createRequestLongPollingInput=function(e){return t.ts.mobile.sdk.impl.MobileApproveInputRequestPollingImpl.createRequestLongPollingInput(e)},n.__tarsusInterfaceName="MobileApproveInputRequestPolling",n}(e.MobileApproveInput);e.MobileApproveInputRequestPolling=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.createRequestPollingInput=function(){var t=new e;return t.setPollingTimeout(0),t},e.createRequestLongPollingInput=function(t){var n=new e;return n.setPollingTimeout(t),n},e}(t.MobileApproveInputRequestPolling);e.MobileApproveInputRequestPollingImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){function e(t,e,n){this.value=t,this.format=e,this.alt=n}return e.prototype.getValue=function(){return this.value},e.prototype.getFormat=function(){return this.format},e.prototype.getQrAlternativeRepresentation=function(){return this.alt},e.createFromServerFormat=function(n){var o=t.OtpFormatImpl.fromAssertionFormat(n.format),r=null;return(n.alt||[]).forEach((function(t){"qr_text"===t.type&&(r=t.value)})),new e(n.value,o,r)},e}();e.MobileApproveOtpImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e,n;e=t.impl||(t.impl={}),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.userId=function(){return this._userId},e.prototype.title=function(){return this._title},e.prototype.body=function(){return this._body},e.prototype.source=function(){return this._source},e.prototype.ticket=function(){return this._ticket},e.createWithUserId=function(t){var n=new e;return n._userId=t,n},e.createWithUserTicket=function(t){var n=new e;return n._userId=t,n},e.createWithJsonPayload=function(t){var n=t,o=new e;return o._userId=n.user_id,o._title=n.body,o._body=n.details,o._source=n.source,o},e}(t.MobileApprovePushRequestPayload),e.MobileApprovePushRequestPayloadImpl=n}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getPrompt=function(){return this._prompt},n.prototype.setPrompt=function(t){this._prompt=t},n.prototype.getCancelButtonTitle=function(){return this._cancelButtonTitle},n.prototype.setCancelButtonTitle=function(t){this._cancelButtonTitle=t},n.prototype.getFallbackButtonTitle=function(){return this._fallbackButtonTitle},n.prototype.setFallbackButtonTitle=function(t){this._fallbackButtonTitle=t},n.prototype.getFallbackControlRequestType=function(){return this._fallbackControlRequestType},n.prototype.setFallbackControlRequestType=function(t){this._fallbackControlRequestType=t},n.create=function(e){return t.ts.mobile.sdk.impl.NativeFaceInputImpl.create(e)},n.createFallbackEnabledPrompt=function(e,n,o){return t.ts.mobile.sdk.impl.NativeFaceInputImpl.createFallbackEnabledPrompt(e,n,o)},n.__tarsusInterfaceName="NativeFaceInput",n}(e.InputResponseType);e.NativeFaceInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.create=function(t){var e=new n;return t&&e.setPrompt(t),e},n.createFallbackEnabledPrompt=function(e,o,r){var i=new n;return e&&i.setPrompt(e),o&&i.setFallbackButtonTitle(o),i.setFallbackControlRequestType(r||t.ControlRequestType.SelectMethod),i},n}(t.NativeFaceInput);e.NativeFaceInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function e(){}return e.fromAssertionFormat=function(e){switch(e.type){case t.core.Protocol.OtpFormatType.Numeric:return new n(e.length);case t.core.Protocol.OtpFormatType.QrCode:return new o;case t.core.Protocol.OtpFormatType.External:return new i(e.data);default:throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid format type encountered: "+e.type)}},e}();t.OtpFormatImpl=e;var n=function(){function t(t){this._length=t}return t.prototype.getOtpLength=function(){return this._length},t.prototype.getType=function(){return r.Numeric},t.__tarsusInterfaceName="OtpFormatNumeric",t}();t.OtpFormatNumericImpl=n;var o=function(){function t(){}return t.prototype.getType=function(){return r.QrCode},t.__tarsusInterfaceName="OtpFormatQr",t}();t.OtpFormatQrImpl=o;var r,i=function(){function t(t){this._data=t}return t.prototype.getData=function(){return this._data},t.prototype.getType=function(){return r.External},t.__tarsusInterfaceName="OtpFormatExternal",t}();t.OtpFormatExternalImpl=i,function(t){t[t.Numeric=0]="Numeric",t[t.QrCode=1]="QrCode",t[t.External=2]="External"}(r=t.OtpFormatType||(t.OtpFormatType={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getOtp=function(){return this._otp},n.prototype.setOtp=function(t){this._otp=t},n.createOtpSubmission=function(e){return t.ts.mobile.sdk.impl.OtpInputOtpSubmissionImpl.createOtpSubmission(e)},n.__tarsusInterfaceName="OtpInputOtpSubmission",n}(e.OtpInput);e.OtpInputOtpSubmission=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.createOtpSubmission=function(t){var n=new e;return n.setOtp(t),n},e}(t.OtpInputOtpSubmission);e.OtpInputOtpSubmissionImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createOtpResendRequest=function(){return t.ts.mobile.sdk.impl.OtpInputRequestResendImpl.createOtpResendRequest()},n.__tarsusInterfaceName="OtpInputRequestResend",n}(e.OtpInput);e.OtpInputRequestResend=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.createOtpResendRequest=function(){return new e},e}(t.OtpInputRequestResend);e.OtpInputRequestResendImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.__tarsusInterfaceName="OtpPushRequestPayload",e}(t.PushRequestPayload);t.OtpPushRequestPayload=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e,n;e=t.impl||(t.impl={}),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.userId=function(){return this._userId},e.prototype.title=function(){return this._title},e.prototype.body=function(){return this._body},e.createWithJsonPayload=function(t){var n=t,o=new e;return o._userId=n.user_id,o._title=n.title,o._body=n.body,o},e}(t.OtpPushRequestPayload),e.OtpPushRequestPayloadImpl=n}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getPassword=function(){return this._password},n.prototype.setPassword=function(t){this._password=t},n.create=function(e){return t.ts.mobile.sdk.impl.PasswordInputImpl.create(e)},n.__tarsusInterfaceName="PasswordInput",n}(e.InputResponseType);e.PasswordInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.create=function(t){var n=new e;return n.setPassword(t),n},e}(t.PasswordInput);e.PasswordInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getPatternDescription=function(){return this._patternDescription},n.prototype.setPatternDescription=function(t){this._patternDescription=t},n.create=function(e){return t.ts.mobile.sdk.impl.PatternInputImpl.create(e)},n.__tarsusInterfaceName="PatternInput",n}(e.InputResponseType);e.PatternInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return F(o,n),o.create=function(t){var e=new o;return e.setPatternDescription(t),e},o.validateFormat=function(t){return null!=t.getPatternDescription().match(/^(r:[0-9]+,c:[0-9]+)+$/)},o.getPatternLength=function(n){if(o.validateFormat(n))return n.getPatternDescription().match(/r/g).length;throw new e.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Invalid pattern input.")},o}(t.PatternInput);e.PatternInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getPin=function(){return this._pin},n.prototype.setPin=function(t){this._pin=t},n.create=function(e){return t.ts.mobile.sdk.impl.PinInputImpl.create(e)},n.__tarsusInterfaceName="PinInput",n}(e.InputResponseType);e.PinInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.create=function(t){var n=new e;return n.setPin(t),n},e}(t.PinInput);e.PinInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createSuccessResponse=function(e){var n=new t.PlaceholderAuthSuccessResponse;return n.setPlaceholderToken(e),n},n.createdFailedResponse=function(e,n){var o=new t.PlaceholderAuthFailureResponse;return o.setFailureError(n),o.setExpired(e.getExpired()),o.setLocked(e.getLocked()),o.setRegistered(e.getRegistered()),o.setRegistrationStatus(e.getRegistrationStatus()),o},n.createFailedResponseWithServerProvidedStatus=function(e){var n=new t.PlaceholderAuthFailureWithServerProvidedStatusResponse;return n.setFailureError(e),n},n}(t.PlaceholderInputResponse);e.PlaceholderInputResponseImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){};function n(t){return!!t.createContinuation}t.Continuation=e,t.IsResumableProcess=n;var o=function(){function t(t,e){this._ctxt=t}return Object.defineProperty(t.prototype,"rtContext",{get:function(){return this._ctxt},enumerable:!0,configurable:!0}),t.prototype.resume=function(t,e){return t instanceof s?(this._currentStep=t.currentStepContinuation.createResumableProcess(this),this.pumpSteps(this._currentStep.resume(t.currentStepContinuation,e))):Promise.reject("Attempt to resume a MultiStageResumableProcess with a bad continuation class.")},t.prototype.startWithStage=function(t){return this._currentStep=t,this.pumpSteps(t.run())},t.prototype.pumpSteps=function(t){var e=this;return t.then((function(t){return i(t)?(e._currentStep=t,e.pumpSteps(t.run())):t}))},t}();t.MultiStageResumableProcess=o;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e}(e);function i(t){return n(t)&&t.run}t.ResumableProcessStageContinuation=r,t.IsResumableProcessStage=i;var s=function(e){function n(n){var o=e.call(this)||this;return n instanceof t.SerializationContext?o.serializeFrom(n):o._currentStepContinuation=n._currentStep.createContinuation(),o}return F(n,e),n.prototype.serializeTo=function(t){t.writeObject("currentStepContinuation",this._currentStepContinuation)},n.prototype.serializeFrom=function(t){this._currentStepContinuation=t.readNonNullObject("currentStepContinuation")},Object.defineProperty(n.prototype,"currentStepContinuation",{get:function(){return this._currentStepContinuation},enumerable:!0,configurable:!0}),n}(e);t.MultiStageResumableProcessContinuation=s}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(){function e(t,e){this._controlFlowProcessor=t,this._action=e,this._sdk=this._controlFlowProcessor._sdk,this._uiHandler=this._controlFlowProcessor._uiHandler,this._clientContext=this._controlFlowProcessor._clientContext}return e.prototype.cancelRun=function(){},e.prototype.policyAction=function(){return this._policyAction||(this._policyAction=t.impl.PolicyActionImpl.fromServerAction(this._controlFlowProcessor,this._action)),this._policyAction},e.prototype.processEscapeRequest=function(e){var n=this;return new Promise((function(o,r){var i=e.getEscapeOption().getId();n._sdk.log(t.LogLevel.Debug,(function(){return"Processing escape reques "+i}));for(var s=n._policyAction.getEscapeOptions(),a=!1,u=0;u<s.length;u++)if(s[u].getId()===i){a=!0;break}a?n.sendAssertionEscapeRequest(e).then(o,r):r(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Attempt to invoke an invalid escape option "+i))}))},e.prototype.sendPollingRequest=function(e,n){var o=this._controlFlowProcessor.createPollingRequest(e,n);return t.util.wrapPromiseWithActivityIndicator(this._uiHandler,this.policyAction(),this._clientContext,this._controlFlowProcessor._session.performSessionExchange(o).then((function(t){return t.data})))},e.prototype.sendAssertionRequest=function(e,n,o){var r=this._controlFlowProcessor.createAssertionRequest(this._action,e,n,o);return t.util.wrapPromiseWithActivityIndicator(this._uiHandler,this.policyAction(),this._clientContext,this._controlFlowProcessor._session.performSessionExchange(r).then((function(e){if(!e.data)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Communication,"Invalid response to assertion.",{responseBody:JSON.stringify(e)});return e.data})))},e.prototype.sendErrorReportAssertionRequest=function(t){return this.sendAssertionRequest("report_error",{client_error:t})},e.prototype.sendAssertionEscapeRequest=function(e){var n=this._controlFlowProcessor.createAssertionRequest(this._action,"escape",{escape_id:e.getEscapeOption().getId(),escape_params:e.getEscapeParameters()});return t.util.wrapPromiseWithActivityIndicator(this._uiHandler,this.policyAction(),this._clientContext,this._controlFlowProcessor._session.performSessionExchange(n).then((function(e){if(!e.data)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Communication,"Invalid response to assertion.",{responseBody:JSON.stringify(e)});return e.data})))},e}();e.ActionDriver=n}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){};e.ResumableProcessActionDriverRuntimeContext=n;var o=function(e){function n(n){var o=e.call(this)||this;return n instanceof t.SerializationContext?o.serializeFrom(n):o._actionData=n,o}return F(n,e),n.prototype.serializeTo=function(t){t.writePrimitive("actionData",this._actionData)},n.prototype.serializeFrom=function(t){this._actionData=t.readPrimitive("actionData")},Object.defineProperty(n.prototype,"actionData",{get:function(){return this._actionData},enumerable:!0,configurable:!0}),n}(t.Continuation);e.ResumableProcessActionContinuation=o;var r=function(t){function e(e,r){return e instanceof n&&(e=e.controlFlowProcessor),r instanceof o&&(r=r.actionData),t.call(this,e,r)||this}return F(e,t),e}(e.ActionDriver);e.ResumableProcessActionDriver=r}(t.actiondrivers||(t.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={}));var x=d&&d.__decorate||function(t,n,o,r){var i,s=arguments.length,a=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,o):r;if("object"===("undefined"==typeof Reflect?"undefined":e(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,o,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(s<3?i(a):s>3?i(n,o,a):i(n,o))||a);return s>3&&a&&Object.defineProperty(n,o,a),a},N=d&&d.__metadata||function(t,n){if("object"===("undefined"==typeof Reflect?"undefined":e(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)};!function(t){!function(t){!function(t){var e;!function(t){var n=function(){};t.ControlFlowProcessorRuntimeContext=n;var o=function(){function n(n,o,r,i,s){if(n instanceof t.SerializationContext)this.serializeFrom(n);else{if(!(o&&r&&void 0!==i&&s))throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid arguments passed to ControlFlowProcessorContinuation ctor");this._initiatingRequest=n,this._initialCflowResponse=o,this._controlFlow=r,this._currentControlFlowStep=i,this._actionContinuation=s.createContinuation()}}return Object.defineProperty(n.prototype,"initiatingRequest",{get:function(){return this._initiatingRequest},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"initialCflowResponse",{get:function(){return this._initialCflowResponse},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"controlFlow",{get:function(){return this._controlFlow},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentControlFlowStep",{get:function(){return this._currentControlFlowStep},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"actionContinuation",{get:function(){return this._actionContinuation},enumerable:!0,configurable:!0}),n.prototype.createResumableProcess=function(t){return new r(t)},n.prototype.serializeTo=function(t){t.writeObject("intiatingRequest",this._initiatingRequest),t.writePrimitive("initialCflowResponse",this._initialCflowResponse),t.writePrimitive("controlFlow",this._controlFlow),t.writePrimitive("currentControlFlowStep",this._currentControlFlowStep),t.writeObject("actionContinuation",this._actionContinuation)},n.prototype.serializeFrom=function(e){this._initiatingRequest=e.readObject(t.SessionExchangeRequest,"intiatingRequest"),this._initialCflowResponse=e.readPrimitive("initialCflowResponse"),this._controlFlow=e.readPrimitive("controlFlow"),this._currentControlFlowStep=e.readPrimitive("currentControlFlowStep"),this._actionContinuation=e.readNonNullObject("actionContinuation")},x([t.Serializable("ControlFlowProcessorContinuation"),N("design:paramtypes",[Object,Object,Array,Number,t.actiondrivers.ResumableProcessActionDriver])],n)}(),r=function(){function r(t,e,o,r){if(this._cancelled=!1,!(t instanceof n)){var i=t;(t=new n).sdk=i,t.cflowRequestContext=r||null,t.clientContext=o,t.session=e,t.uiHandler=i.currentUiHandler}this._sdk=t.sdk,this._session=t.session,this._uiHandler=t.uiHandler,this._clientContext=t.clientContext,this._requestContext=t.cflowRequestContext}return r.findByClientContext=function(t){var e=r._allRunningControlFlows.filter((function(e){return e._clientContext==t}));return e.length?e[0]:null},r.prototype.createContinuation=function(){if(this._cancelled)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Cannot create continuation for cancelled control flow");if(!this._currentActionDriver)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Cannot create continuation for control flow without current action");if(this._currentActionDriver instanceof t.actiondrivers.ResumableProcessActionDriver)return new o(this._initiatingRequest,this._initialCflowResponse,this._controlFlow,this._currentControlFlowStep,this._currentActionDriver);throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Cannot create continuation for control flow running current action "+this._currentActionDriver._action.type)},Object.defineProperty(r.prototype,"sdk",{get:function(){return this._sdk},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"initiatingRequest",{get:function(){return this._initiatingRequest},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"requestContext",{get:function(){return this._requestContext},enumerable:!0,configurable:!0}),r.prototype.cancelFlow=function(){this._cancelled=!0,this._currentActionDriver&&this._currentActionDriver.cancelRun(),this._uiHandler.controlFlowCancelled(this._clientContext)},r.prototype.startControlFlow=function(t){var n=this;return this._cancelled?this.createExternalCancellationRejectionPromise():e.util.wrapPromiseWithActivityIndicator(this._uiHandler,null,this._clientContext,this._session.performSessionExchange(t)).then((function(e){return n._initialCflowResponse=e.data,n._initiatingRequest=t,n.executeControlFlow(n._initialCflowResponse)}))},r.prototype.resume=function(n,r){var i=this;return new Promise((function(s,a){if(!(n instanceof o))throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid continuation type provided to resume()");i._initiatingRequest=n.initiatingRequest,i._initialCflowResponse=n.initialCflowResponse,i._controlFlow=n.controlFlow,i._currentControlFlowStep=n.currentControlFlowStep;var u=new t.actiondrivers.ResumableProcessActionDriverRuntimeContext;u.controlFlowProcessor=i;var c=n.actionContinuation.createResumableProcess(u);i._currentActionDriver=c,c.resume(n.actionContinuation,r).then((function(t){return i.executeControlFlow(t)})).then(s,a)}))},Object.defineProperty(r.prototype,"challenge",{get:function(){return this._initialCflowResponse&&this._initialCflowResponse.challenge||null},enumerable:!0,configurable:!0}),r.prototype.executeControlFlow=function(t){var e=this;return new Promise((function(n,o){r._allRunningControlFlows.push(e),e._uiHandler.controlFlowStarting(e._clientContext),e.processSingleStepExchange(t).then((function(t){return e._uiHandler.controlFlowEnded(null,e._clientContext),t}),(function(t){throw e._uiHandler.controlFlowEnded(t,e._clientContext),t})).finally((function(){var t=r._allRunningControlFlows.indexOf(e);r._allRunningControlFlows.splice(t,1)})).then(n,o)}))},r.prototype.processSingleStepExchange=function(n){var o,r=this;return n.control_flow&&(this._controlFlow=n.control_flow,this._currentControlFlowStep=0,this._sdk.log(e.LogLevel.Debug,(function(){return"Got ControlFlow with "+r._controlFlow.length+" steps."}))),n.data&&n.data.json_data?(this._sdk.log(e.LogLevel.Debug,(function(){return"Got a JSON data attachment on control flow response. Processing."})),o=t.actiondrivers.ActionDriverJsonData.handleJsonDataByUiHandler(this._uiHandler,n,n.data.json_data,null,this._clientContext)):o=Promise.resolve(n),o.then((function(o){switch(n.state){case t.Protocol.AuthSessionState.Pending:return r._sdk.log(e.LogLevel.Debug,(function(){return"Execute step "+r._currentControlFlowStep+"."})),(i=r._controlFlow[r._currentControlFlowStep])?r._cancelled?r.createExternalCancellationRejectionPromise():r.promiseCancellableSingleActionProcessing(i).then((function(t){return r._currentControlFlowStep++,r.processSingleStepExchange(t)})):(r._sdk.log(e.LogLevel.Error,(function(){return"Step "+r._currentControlFlowStep+" nonexisting."})),Promise.reject(new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Session state is pending but no control flow.")));case t.Protocol.AuthSessionState.Rejected:r._sdk.log(e.LogLevel.Debug,(function(){return"Handle control flow rejection."}));var i=r._controlFlow&&r._controlFlow[r._currentControlFlowStep]||null;return r._uiHandler.handlePolicyRejection(n.rejection_data&&n.rejection_data.title||null,n.rejection_data&&n.rejection_data.text||null,n.rejection_data&&n.rejection_data.button_text||null,n.failure_data,i?e.impl.PolicyActionImpl.fromServerAction(r,i):e.impl.PolicyActionImpl.createPseudoAction(r._sdk,"rejection"),r._clientContext).then((function(t){if(-1!=t.getUserChoice())throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"ConfirmationInput.getUserChoice must be set to -1.");throw e.impl.AuthenticationErrorImpl.errorForSessionRejectionFailureData(n.failure_data)}));case t.Protocol.AuthSessionState.Completed:return r._sdk.log(e.LogLevel.Debug,(function(){return"Handle control flow completion."})),Promise.resolve(e.impl.AuthenticationResultImpl.fromCflowServerResponse(n,r._session.deviceId()))}}))},r.prototype.promiseCancellableSingleActionProcessing=function(n){var o=this,r=t.actiondrivers.ActionDrivers[n.type];if(!r)return Promise.reject(new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Don't know how to handle action.",{actionType:n.type}));var i=new r(this,n);return this._currentActionDriver=i,this._uiHandler.controlFlowActionStarting(i.policyAction(),this._clientContext),i.run().then((function(t){return o._uiHandler.controlFlowActionEnded(null,i.policyAction(),o._clientContext),t}),(function(t){var r=e.impl.AuthenticationErrorImpl.augmentErrorData(t,{});throw r.setPublicProperty(e.AuthenticationErrorProperty.AuthenticationErrorFailingActionType,n.type),o._uiHandler.controlFlowActionEnded(r,i.policyAction(),o._clientContext),r})).finally((function(){o._currentActionDriver=null}))},r.prototype.createAssertionRequest=function(n,o,r,i){if(!this.challenge)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to create an assertion request without an initial control flow request.");var s={action:n.type,assert:o||"action",assertion_id:n.assertion_id,fch:this.challenge};if(r&&(s.data=r),i){var a=s;for(var u in i)a[u]=i[u]}return new t.SessionExchangeRequest("POST","auth/assert",s)},r.prototype.createPollingRequest=function(e,n){var o={};return Object.keys(e).forEach((function(t){o[t]=e[t]})),o.polling_timeout=n,new t.SessionExchangeRequest("POST","auth/poll",o)},r.prototype.createExternalCancellationRejectionPromise=function(){return Promise.reject(this.createExternalCancellationError())},r.prototype.createExternalCancellationError=function(){return new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.UserCanceled,"Operation cancelled by user.",{control_flow_external_cancellation:!0})},r.prototype.generateDebugPin=function(){var e=this;return new Promise((function(n,o){e._session.performSessionExchange(new t.SessionExchangeRequest("POST","auth/create_debug_token",{})).then((function(t){return t.data.debug_pin})).then(n,o)}))},r._allRunningControlFlows=[],r}();t.ControlFlowProcessor=r}((e=t.sdk||(t.sdk={})).core||(e.core={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o;o=t.sdk||(t.sdk={}),e=o.impl||(o.impl={}),n=function(){function t(t,n,o,r,i,s){void 0===r&&(r=!1),void 0===i&&(i=null),void 0===s&&(s=null),this._isPseudoAction=!1,this._escapeOptions=[],this._actionType=n,this._isPseudoAction=r,this._actionLocalStrings=i,this._actionLocalStyles=s,this._uiContextImpl=new e.UIContextImpl(t,this._actionLocalStrings||void 0,this._actionLocalStyles),this._controlFlow=o}return t.prototype.getIsPseudoAction=function(){return this._isPseudoAction},t.prototype.getActionType=function(){return this._actionType},t.prototype.getAltLabel=function(){return""},t.prototype.getUiContext=function(){return this._uiContextImpl},t.prototype.getEscapeOptions=function(){return this._escapeOptions},t.prototype.escapeOptionById=function(t){var n=null;if(this._escapeOptions.forEach((function(e){e.getId()===t&&(n=e)})),!n)throw new e.AuthenticationErrorImpl(o.AuthenticationErrorCode.AppImplementation,"Invalid escape ID "+t+" for this action.");return n},Object.defineProperty(t.prototype,"controlFlow",{get:function(){return this._controlFlow},enumerable:!0,configurable:!0}),t.fromServerAction=function(n,o){var r=new t(n.sdk,o.type,n,!1,o.strings,o.styles);return o.escapes&&(r._escapeOptions=o.escapes.map((function(t){return new e.EscapeOptionImpl(t)}))),r},t.createPseudoAction=function(e,n){return new t(e,n,null,!0)},t}(),e.PolicyActionImpl=n}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getControlRequest=function(){return this._controlRequest},e.prototype.setControlRequest=function(t){this._controlRequest=t},e.prototype.getSelectedAuthenticator=function(){return this._selectedAuthenticator},e.prototype.setSelectedAuthenticator=function(t){this._selectedAuthenticator=t},e.prototype.getActionEscapeRequest=function(){return this._actionEscapeRequest},e.prototype.setActionEscapeRequest=function(t){this._actionEscapeRequest=t},e.createControlResponse=function(e){return t.ts.mobile.sdk.impl.PromotionInputImpl.createControlResponse(e)},e.createEscapeRequest=function(e,n){return t.ts.mobile.sdk.impl.PromotionInputImpl.createEscapeRequest(e,n)},e.createAuthenticatorDescription=function(e){return t.ts.mobile.sdk.impl.PromotionInputImpl.createAuthenticatorDescription(e)},e.__tarsusInterfaceName="PromotionInput",e}();e.PromotionInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.isControlRequest=function(){return!(null==this._controlRequest)},n.createControlResponse=function(t){var e=new n;return e.setControlRequest(t),e},n.createAuthenticatorDescription=function(t){var e=new n;return e.setSelectedAuthenticator(t),e},n.createEscapeRequest=function(e,o){var r=new n;return r._actionEscapeRequest=new t.ActionEscapeRequest,r._actionEscapeRequest._escapeOption=e,r._actionEscapeRequest._escapeParameters=o,r},n}(t.PromotionInput);e.PromotionInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function e(){}return e.fromAssertionFormat=function(e){switch(e){case t.core.Protocol.QrCodeFormatType.Numeric:return t.QrCodeFormat.Numeric;case t.core.Protocol.QrCodeFormatType.Alphanumeric:return t.QrCodeFormat.Alphanumeric;case t.core.Protocol.QrCodeFormatType.Binary:return t.QrCodeFormat.Binary;default:throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid qr code format type encountered: "+e.type)}},e}();t.QrCodeFormatImpl=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getQrCode=function(){return this._qrCode},e.prototype.getQrCodeFormat=function(){return this._qrCodeFormat},e.createQrCodeResult=function(e,n){return t.ts.mobile.sdk.impl.QrCodeResultImpl.createQrCodeResult(e,n)},e.__tarsusInterfaceName="QrCodeResult",e}();e.QrCodeResult=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.createQrCodeResult=function(t,n){var o=new e;return o._qrCode=t,o._qrCodeFormat=n,o},e}(t.QrCodeResult);e.QrCodeResultImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getRedirectResponse=function(){return this._redirectResponse},e.prototype.setRedirectResponse=function(t){this._redirectResponse=t},e.prototype.getAdditionalParametersOverride=function(){return this._additionalParametersOverride},e.prototype.setAdditionalParametersOverride=function(t){this._additionalParametersOverride=t},e.create=function(e){return t.ts.mobile.sdk.impl.RedirectInputImpl.create(e)},e.__tarsusInterfaceName="RedirectInput",e}();e.RedirectInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.create=function(t){var n=new e;return n.setRedirectResponse(t),n},e}(t.RedirectInput);e.RedirectInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getServerAddress=function(){return this._serverAddress},e.prototype.setServerAddress=function(t){this._serverAddress=t},e.prototype.getRealm=function(){return this._realm},e.prototype.setRealm=function(t){this._realm=t},e.prototype.getAppId=function(){return this._appId},e.prototype.setAppId=function(t){this._appId=t},e.prototype.getTokenName=function(){return this._tokenName},e.prototype.setTokenName=function(t){this._tokenName=t},e.prototype.getToken=function(){return this._token},e.prototype.setToken=function(t){this._token=t},e.prototype.getCryptoMode=function(){return this._cryptoMode},e.prototype.setCryptoMode=function(t){this._cryptoMode=t},e.create=function(e,n,o,r){return t.ts.mobile.sdk.impl.SDKConnectionSettingsImpl.create(e,n,o,r)},e.createWithCryptoMode=function(e,n,o,r,i){return t.ts.mobile.sdk.impl.SDKConnectionSettingsImpl.createWithCryptoMode(e,n,o,r,i)},e.__tarsusInterfaceName="SDKConnectionSettings",e}();e.SDKConnectionSettings=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.create=function(e,n,o,r){return this.createWithCryptoMode(e,n,o,r,t.ConnectionCryptoMode.None)},n.createWithCryptoMode=function(t,e,o,r,i){var s=new n;return s.setServerAddress(t),s.setAppId(e),s.setTokenName(o),s.setToken(r),s.setCryptoMode(i),s},n}(t.SDKConnectionSettings);e.SDKConnectionSettingsImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getQrCodeResult=function(){return this._qrCodeResult},n.prototype.setQrCodeResult=function(t){this._qrCodeResult=t},n.createScanQrCodeInput=function(e){return t.ts.mobile.sdk.impl.ScanQrCodeInputImpl.createScanQrCodeInput(e)},n.__tarsusInterfaceName="ScanQrCodeInput",n}(e.InputResponseType);e.ScanQrCodeInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.createScanQrCodeInput=function(t){var n=new e;return n.setQrCodeResult(t),n},e}(t.ScanQrCodeInput);e.ScanQrCodeInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.createAnswerToQuestion=function(t,n){var o=new e;return o._question=t,o._answer=n,o},e}(t.SecurityQuestionAndAnswer);e.SecurityQuestionAndAnswerImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.createWithText=function(t){var n=new e;return n._answerText=t,n},e}(t.SecurityQuestionAnswer);e.SecurityQuestionAnswerImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(t,e,n){this._id=t,this._text=e,this._registered=n}return t.prototype.getSecurityQuestionId=function(){return this._id},t.prototype.getSecurityQuestionText=function(){return this._text},t.__tarsusInterfaceName="SecurityQuestion",t}();t.SecurityQuestionImpl=e}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createSecurityQuestionAnswersInputResponse=function(e){var n=new t.SecurityQuestionAnswersInputResponse;return n._answers=e,n},n}(t.SecurityQuestionInputResponse);e.SecurityQuestionInputResponseImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.prototype.getStepTag=function(){return"question"},t.prototype.getSecurityQuestions=function(){return this._securityQuestions},t.prototype.getMinAnswersNeeded=function(){return this._minAnswers},t.createForAuthQuestion=function(e){var n=new t;return n._minAnswers=1,n._securityQuestions=[e],n},t.createForRegistrationQuestions=function(e,n){var o=new t;return o._minAnswers=n,o._securityQuestions=e,o},t.__tarsusInterfaceName="SecurityQuestionStepDescription",t}();t.SecurityQuestionStepDescriptionImpl=e}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){var e="undefined"!=typeof window?window:e;e.com=t}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(t){this._hex=t.hex||"",t.alpha&&(this._hex=this._hex.slice(0,1)+this.convertAlpha(t.alpha)+this._hex.slice(1))}return t.prototype.getHexValue=function(){return this._hex},t.prototype.convertAlpha=function(t){return Math.ceil(255*t).toString(16)},t}();t.TSColorImpl=e}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(e,n){var o=t.call(this)||this;return n&&(o._selectedTargets=n),e&&(o._authenticatorInput=e),o}return F(e,t),e.createAuthenticatorInput=function(t){return new e(t,null)},e.createTargetSelectionRequest=function(t){return new e(null,[t])},e.createTargetsSelectionRequest=function(t){return new e(null,t)},e}(t.TargetBasedAuthenticatorInput);e.TargetBasedAuthenticatorInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function e(e,n,o,r,i,s,a){this._deviceId=e,this._model=t.core.DeviceModelConverter.getDeviceModel(n,i),this._isCurrentDevice=r,this._osType=t.core.DeviceModelConverter.getOsName(i),this._osVersion=s,this._lastAccessed=o,this._alias=a}return e.prototype.getDeviceId=function(){return this._deviceId},e.prototype.getModel=function(){return this._model},e.prototype.getLastAccessed=function(){return this._lastAccessed},e.prototype.getIsCurrent=function(){return this._isCurrentDevice},e.prototype.getOsType=function(){return this._osType},e.prototype.getOsVersion=function(){return this._osVersion},e.prototype.getAlias=function(){return this._alias},e.prototype.describe=function(){var t=new Date(this._lastAccessed).toLocaleDateString();return(this._alias?this._alias+" : ":"")+this._model+" last accessed on "+t},e.fromServerFormat=function(t){return new e(t.device_id,t.model,t.last_access,t.current_device,t.os_type,t.os_version,t.alias||null)},e}();t.TargetDeviceDetailsImpl=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.createPollRequest=function(){return t.ts.mobile.sdk.impl.TicketWaitInputImpl.createPollRequest()},n.createLongPollRequest=function(e){return t.ts.mobile.sdk.impl.TicketWaitInputImpl.createLongPollRequest(e)},n.__tarsusInterfaceName="TicketWaitInput",n}(e.InputResponseType);e.TicketWaitInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getPollingTimeout=function(){return this._pollingTimeout},e.prototype.setPollingTimeout=function(t){this._pollingTimeout=t},e.__tarsusInterfaceName="TicketWaitInputPollRequest",e}(t.TicketWaitInput);t.TicketWaitInputPollRequest=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.createPollRequest=function(){var t=new o;return t.setPollingTimeout(0),t},e.createLongPollRequest=function(t){var e=new o;return e.setPollingTimeout(t),e},e}(t.TicketWaitInput);e.TicketWaitInputImpl=n;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.__tarsusInterfaceName="TicketWaitInputPollRequest",e}(t.TicketWaitInputPollRequest);e.TicketWaitInputPollRequestImpl=o}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Qr=0]="Qr",t[t.Alphanumeric=1]="Alphanumeric"}(t.TicketIdFormat||(t.TicketIdFormat={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){function e(t){this._ticketId=t}return e.prototype.getFormat=function(){switch(this._ticketId.format){case t.core.Protocol.TicketIdFormatType.Alphanumeric:return t.TicketIdFormat.Alphanumeric;case t.core.Protocol.TicketIdFormatType.QrCode:default:return t.TicketIdFormat.Qr}},e.prototype.getValue=function(){return this._ticketId.value},e.prototype.getValueAltRepresentation=function(){return this._ticketId.alt},e}();e.TicketIdImpl=n;var o=function(){function t(t){this._title=t.title,this._text=t.text,this._ticketId=t.ticket_id?new n(t.ticket_id):null}return t.prototype.getTitle=function(){return this._title},t.prototype.getText=function(){return this._text},t.prototype.getTicketId=function(){return this._ticketId},t}();e.TicketWaitingInformationImpl=o}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function e(){}return e.fromAssertionFormat=function(e){switch(e.type){case t.core.Protocol.TotpChallengeFormatType.Numeric:return new o;case t.core.Protocol.TotpChallengeFormatType.QrCode:return new i;case t.core.Protocol.TotpChallengeFormatType.AlphaNumeric:return new n;default:throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid format type encountered: "+e.type)}},e}();t.TotpChallengeFormatImpl=e;var n=function(){function t(){}return t.prototype.getType=function(){return r.AlphaNumeric},t.__tarsusInterfaceName="TotpChallengeFormatAlphaNumeric",t}();t.TotpChallengeFormatAlphaNumericImpl=n;var o=function(){function t(){}return t.prototype.getType=function(){return r.Numeric},t.__tarsusInterfaceName="TotpChallengeFormatNumeric",t}();t.TotpChallengeFormatNumericImpl=o;var r,i=function(){function t(){}return t.prototype.getType=function(){return r.QrCode},t.__tarsusInterfaceName="TotpChallengeFormatQr",t}();t.TotpChallengeFormatQrImpl=i,function(t){t[t.AlphaNumeric=0]="AlphaNumeric",t[t.Numeric=1]="Numeric",t[t.QrCode=2]="QrCode"}(r=t.TotpChallengeFormatType||(t.TotpChallengeFormatType={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getChallenge=function(){return this._challenge},n.prototype.setChallenge=function(t){this._challenge=t},n.create=function(e){return t.ts.mobile.sdk.impl.TotpChallengeInputImpl.create(e)},n.__tarsusInterfaceName="TotpChallengeInput",n}(e.InputResponseType);e.TotpChallengeInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.create=function(t){var n=new e;return n.setChallenge(t),n},e}(t.TotpChallengeInput);e.TotpChallengeInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.createTotpGenerationRequest=function(e,n,o){var r=new t;return r.setUserId(e.userHandle),r.setChallenge(n),r.setGeneratorName(o),r},t.prototype.getChallenge=function(){return this._challenge},t.prototype.getGeneratorName=function(){return this._generatorName},t.prototype.setGeneratorName=function(t){this._generatorName=t},t.prototype.setChallenge=function(t){this._challenge=t},t.prototype.setUserId=function(t){this._userId=t},t.prototype.getUserId=function(){return this._userId},t.prototype.setUserHandleType=function(t){this._userHandleType=t},t.prototype.getUserHandleType=function(){return this._userHandleType},t}();t.TotpGenerationRequestImpl=e}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.__tarsusInterfaceName="TotpInput",e}(t.InputResponseType);t.TotpInput=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getCode=function(){return this._code},n.prototype.setCode=function(t){this._code=t},n.createTotpCodeSubmission=function(e){return t.ts.mobile.sdk.impl.TotpInputCodeSubmissionImpl.createTotpCodeSubmission(e)},n.__tarsusInterfaceName="TotpInputCodeSubmission",n}(e.TotpInput);e.TotpInputCodeSubmission=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.createTotpCodeSubmission=function(t){var n=new e;return n.setCode(t),n},e}(t.TotpInputCodeSubmission);e.TotpInputCodeSubmissionImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){function e(){}return e.createEscapeRequest=function(e){var n=new t.TotpProvisionEscapeRequest;return n.setEscapeRequest(e),n},e}();e.TotpProvisionResultImpl=n}(t.impl||(t.impl={}))}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(e){var n=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._components=t}return t.prototype.toString=function(){return this._components.map((function(t){return t.replace(/([\\.])/g,(function(t){return"\\"+("."==t?"p":t)}))})).join(".")},t.fromString=function(e){return new(t.bind.apply(t,[void 0].concat(e.split("."))))},t.prototype.concat=function(e){return new(t.bind.apply(t,[void 0].concat(this._components.concat(e._components))))},t.prototype.component=function(t){return this._components[t]},t}();e.TarsusKeyPath=n;var o=function(){function e(t){this._host=t}return e.prototype.readStorageKey=function(t){return this._host.readStorageKey(t.toString())},e.prototype.writeStorageKey=function(t,e){this._host.writeStorageKey(t.toString(),e)},e.prototype.deleteStorageKey=function(t){this._host.deleteStorageKey(t.toString())},e.prototype.readSessionStorageKey=function(t){return this._host.readSessionStorageKey(t.toString())},e.prototype.writeSessionStorageKey=function(t,e){this._host.writeSessionStorageKey(t.toString(),e)},e.prototype.deleteSessionStorageKey=function(t){this._host.deleteSessionStorageKey(t.toString())},e.prototype.generateKeyPair=function(t,e,n,o){return this._host.generateKeyPair(t.toString(),e,n,o)},e.prototype.generateKeyPairExternalRepresentation=function(t){return this._host.generateKeyPairExternalRepresentation(t)},e.prototype.generateHexSeededKeyPairExternalRepresentation=function(t,e){return this._host.generateHexSeededKeyPairExternalRepresentation(t,e)},e.prototype.getKeyPair=function(t,e,n){return this._host.getKeyPair(t.toString(),e,n)},e.prototype.deleteKeyPair=function(t){this._host.deleteKeyPair(t.toString())},e.prototype.importVolatileSymmetricKey=function(t,e){return this._host.importVolatileSymmetricKey(t,e)},e.prototype.importVolatileKeyPair=function(t,e){return this._host.importVolatileKeyPair(t,e)},e.prototype.importVolatileKeyPairFromPublicKeyHex=function(t,e){return this._host.importVolatileKeyPairFromPublicKeyHex(t,e)},e.prototype.generatePbkdf2HmacSha1HexString=function(t,e,n,o){return this._host.generatePbkdf2HmacSha1HexString(t,e,n,o)},e.prototype.calcHexStringEncodedSha256Hash=function(t){return this._host.calcHexStringEncodedSha256Hash(t)},e.prototype.calcHexStringEncodedSha512Hash=function(t){return this._host.calcHexStringEncodedSha512Hash(t)},e.prototype.generateRandomHexString=function(t){return this._host.generateRandomHexString(t)},e.prototype.queryHostInfo=function(t){return this._host.queryHostInfo(t)},e.prototype.queryAsyncHostInfo=function(t){return this._host.queryAsyncHostInfo(t)},e.prototype.calcHexStringEncodedHmacSha1HashWithHexEncodedKey=function(t,e){return this._host.calcHexStringEncodedHmacSha1HashWithHexEncodedKey(t,e)},e.prototype.getCurrentTime=function(){return this._host.getCurrentTime()},e.prototype.createDelayedPromise=function(t){return this._host.createDelayedPromise(t)},e.prototype.fidoClientXact=function(t,e,n,o){return this._host.fidoClientXact(t,e,n,o)},e.prototype.fido2CredentialsOp=function(t,e,n,o,r){return this._host.fido2CredentialsOp(t,e,n,o,r)},e.prototype.dyadicEnroll=function(t,e){return this._host.dyadicEnroll(t,e)},e.prototype.dyadicSign=function(t,e){return this._host.dyadicSign(t,e)},e.prototype.dyadicDelete=function(t){return this._host.dyadicDelete(t)},e.prototype.dyadicRefreshToken=function(t){return this._host.dyadicRefreshToken(t)},e.prototype.log=function(t,e,n){return this._host.log(t,e,n)},e.prototype.setDebugIndicatorVisible=function(t){this._host.setDebugIndicatorVisible(t)},e.prototype.getUIStyles=function(){return this._host.getUIStyles()},e.prototype.getString=function(t,e){return this._host.getString(t,e)},e.prototype.loadPlugin=function(t){return this._host.loadPlugin(t)},e.prototype.deviceSupportsCryptoBind=function(){return"true"==this.queryHostInfo(t.sdkhost.HostInformationKey.PersistentKeysSupported)},e}();e.TarsusHostServices=o}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(t){this._strings=t}return Object.defineProperty(t.prototype,"strings",{get:function(){return this._strings},enumerable:!0,configurable:!0}),t.prototype.getString=function(t){return this._strings?this._strings[t]:null},t}();t.ClientStrings=e}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o;e=(o=t.sdk||(t.sdk={})).impl||(o.impl={}),n=function(){function t(t,e,n){this._sdk=t,this._contextLocalStrings=e||null,this._contextStylesheetJson=n||null}return t.prototype.getString=function(t){return this.internalFormatString(t,null)},t.prototype.formatString=function(t,e){return this.internalFormatString(t,e)},t.prototype.internalFormatString=function(t,e){var n;return null==(n=this.resolveStringKey(t))?t:e&&e.length>0?this.format(n,e):n},t.prototype.resolveStringKey=function(t){var e;if(null!=(e=this._contextLocalStrings&&this._contextLocalStrings[t]))return e;var n=this._sdk.uiAssetsData;return n?n.getString(t):(this._sdk.log(o.LogLevel.Warning,(function(){return"Attempt to get string value without initialized asset data."})),null)},t.prototype.format=function(t,e){var n=this,o=t;return o&&(o=o.replace(/%(\d+)\$s/g,(function(t,o){return n.stringForIndex(+o-1,e,t)}))),o},t.prototype.stringForIndex=function(t,e,n){return t>=0&&t<e.length?e[t]:n},t.prototype.getStyle=function(t){return this._contextStylesheet||(this._contextStylesheet=this._contextStylesheetJson?this._sdk.uiAssetsData.getUiStylesheetsWithOverrides(this._contextStylesheetJson):this._sdk.uiAssetsData.uiStylesheets),this._contextStylesheet.getMatchingStyle(t)},t}(),e.UIContextImpl=n}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(n){var o=new n.core.TarsusKeyPath("currentSession"),r=new n.core.TarsusKeyPath("continuations","default_cflow"),i=function(){function i(){this.mandatoryCollectors=[n.CollectorType.DeviceDetails,n.CollectorType.ExternalSDKDetails,n.CollectorType.HWAuthenticators,n.CollectorType.LocalEnrollments,n.CollectorType.Capabilities],this.uiAssetsDownloadMode=n.UIAssetsDownloadMode.DownloadOnInit,this._wasLocaleSet=!1}return i.prototype.pushRequestPayloadFromJSON=function(t){var e=t.push_type;switch(e){case"otp_notification":return n.impl.OtpPushRequestPayloadImpl.createWithJsonPayload(t);case"approval":return n.impl.MobileApprovePushRequestPayloadImpl.createWithJsonPayload(t)}throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Payload with type "+e+" isn't recognized")},Object.defineProperty(i.prototype,"apiLevel",{get:function(){if(null==this._apiLevel)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Attempt to access uninitialized API level");return this._apiLevel},enumerable:!0,configurable:!0}),i.prototype.setTarsusHost=function(t){this._nativeHost=t,this.host=new n.core.TarsusHostServices(t),this.setLogLevel(n.LogLevel.Debug),this.pluginManager=new n.core.TarsusPluginManager(this),this.enabledCollectors=[n.CollectorType.Accounts,n.CollectorType.DeviceDetails,n.CollectorType.Contacts,n.CollectorType.Owner,n.CollectorType.Software,n.CollectorType.Location,n.CollectorType.Bluetooth,n.CollectorType.ExternalSDKDetails,n.CollectorType.HWAuthenticators,n.CollectorType.FidoAuthenticators,n.CollectorType.Capabilities,n.CollectorType.LargeData,n.CollectorType.LocalEnrollments],this.currentPersistUserData=!0},Object.defineProperty(i.prototype,"fidoClient",{get:function(){return this._fidoClient||(this._fidoClient=new n.core.fidoclient.TarsusFidoClient(this)),this._fidoClient},enumerable:!0,configurable:!0}),i.prototype.setUiAssetsDownloadMode=function(t){this.uiAssetsDownloadMode=t},i.prototype.setLocale=function(t){var e=this;return this.log(n.LogLevel.Debug,(function(){return"Start setLocale with locale "+t})),t&&""!=t&&(this._wasLocaleSet=!0,(this.uiAssetsData&&this.uiAssetsData.locale)!=t||this.uiAssetsData.isServerClientStringsEmpty())?(this.log(n.LogLevel.Debug,(function(){return"Updating locale to "+t})),this.uiAssetsDownloadMode!==n.UIAssetsDownloadMode.Disable?this.loadUiAssetsFromServer(t).then((function(t){return Promise.resolve(t)})).catch((function(o){return e.log(n.LogLevel.Warning,(function(){return"Error loading locale from server; using empty locale "+t})),e.uiAssetsData=new n.core.UIAssetsData(e,t),Promise.reject(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(o))})):(this.uiAssetsData=new n.core.UIAssetsData(this,t),Promise.resolve(!0))):Promise.resolve(!1)},i.prototype.setConnectionSettings=function(t){this.connectionSettings=t},i.prototype.setClientCryptoSettings=function(t){this.cryptoSettings=t},i.prototype.setEnabledCollectors=function(t){this.enabledCollectors=t,this.addMandatoryCollectorsIfNeeded()},i.prototype.setLogLevel=function(t){this._logLevel=t,this._nativeHost.setLogLevel(this._logLevel)},i.prototype.setExternalLogger=function(t){this._nativeHost.setExternalLogger(t)},i.prototype.setTransportProvider=function(t){this.transportProvider=t},i.prototype.setUiHandler=function(t){this.currentUiHandler=t},i.prototype.setPushToken=function(t){this._lastReceivedPushToken=t},i.prototype.setPersistUserData=function(t){this.currentPersistUserData=t},i.prototype.setInvalidUserRecordRecoveryMode=function(t){if(null!=this.invalidUserRecoveryMode&&this.invalidUserRecoveryMode!=t)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Duplicate invocation of setInvalidUserRecordRecoveryMode.");this.invalidUserRecoveryMode=t},i.prototype.setClientApiLevel=function(e){if(null!=this._apiLevel&&this._apiLevel!=e)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Duplicate invocation of setClientApiLevel.");if(e>t.ts.mobile.sdk.core.API_LEVEL)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"This SDK does not support API level "+this.apiLevel+".");this._apiLevel=e},Object.defineProperty(i.prototype,"currentSession",{get:function(){return this._currentSession},enumerable:!0,configurable:!0}),i.prototype.installPlugin=function(t,e){this.pluginManager.installPlugin(t,e)},i.prototype.initialize=function(){var t=this;return new Promise((function(e,r){if(!t.host)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to initialize SDK without host.");if(!t.connectionSettings)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to initialize SDK without connection settings.");if(!t.transportProvider)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to initialize SDK without transport provider.");t.cryptoSettings||(t.cryptoSettings=n.ClientCryptoSettings.create(1e4)),t.applyConfigurationDefaultsAndLogConfiguration(),t._nativeHost.initialize(t.enabledCollectors).then((function(e){var r=null;if(!t._wasLocaleSet){var i=t._nativeHost.getPreferredLocale(),s=t.getFullLocale(i);t.uiAssetsDownloadMode===n.UIAssetsDownloadMode.DownloadOnInit?r=t.setLocale(s).catch((function(){return!1})):t.uiAssetsData=new n.core.UIAssetsData(t,s)}return r=r||Promise.resolve(!0),Promise.all([t.pluginManager.initializePlugins(),r]).then((function(){var e=t.host.readSessionStorageKey(o);if(e){t.log(n.LogLevel.Info,(function(){return"Loading existing session from session store"}));try{t._currentSession=n.core.Session.fromJson(t,e),t.log(n.LogLevel.Debug,(function(){return"Loaded existing session for user "+(t._currentSession.user&&t._currentSession.user.displayName)}))}catch(e){t.log(n.LogLevel.Warning,(function(){return"Failed to load existing session from session store. Discarding existing session "+e+"."}))}}return!0}))})).then(e,r)})).catch((function(t){return Promise.reject(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},i.prototype.getUsersInfo=function(){var t=[];return n.core.User.iterateUsers(this,(function(e){t.push(n.impl.UserInfoImpl.createWithUser(e))})),t},i.prototype.getUserInfo=function(t){var e=n.core.User.findUser(this,t);if(!e)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.UserNotFound,"Attempt to call getUserInfo with a non existing user.");return n.impl.UserInfoImpl.createWithUser(e)},i.prototype.isBoundForUser=function(t){var e=n.core.User.findUser(this,t);return!(!e||!e.deviceBound)},i.prototype.getBoundUserIds=function(){var t=[];return n.core.User.iterateUsers(this,(function(e){e.userId&&e.deviceBound&&t.push(e.userId)})),t},i.prototype.getKnownUserIds=function(){var t=[];return n.core.User.iterateUsers(this,(function(e){e.userId&&(e.hasLoggedIn||e.deviceBound)&&t.push(e.userId)})),t},i.prototype.logout=function(){var t=this;return new Promise((function(e,o){if(t._currentSession)if(t._currentSession.canTerminate()){var r,i=t._currentSession.createLogoutRequest(),s=t._currentSession;t._currentSession=null,t.saveCurrentSession(),s.invalidated?(t.log(n.LogLevel.Info,(function(){return"Logging out with an invalidated session; not issuing server request."})),r=Promise.resolve(!0)):r=s.performSessionExchange(i).then((function(t){return Promise.resolve(!0)})),r.then((function(t){return n.core.Session.notifySessionObserversOnMainSessionLogout(s),t})).then(e,o)}else o(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to logout with a locked session."));else o(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"No logged in user."))})).catch((function(t){return Promise.reject(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},i.prototype.isTotpProvisionedForUser=function(t,e){var o=n.core.User.findUser(this,t);if(!o)return this.log(n.LogLevel.Error,(function(){return"Can not find user record for <"+t+">"})),!1;var r=new n.core.LocalSession(this,o);return n.core.totp.TotpPropertiesProcessor.createWithUserWithoutUIInteraction(o,this,r).isTotpProvisionedForGenerator(e||n.core.totp.TotpPropertiesProcessor.BACKWARD_COMPATIBILITY_DEFAULT_GENERATOR)},i.prototype.getVersionInfo=function(){return this._versionInfo||(this._versionInfo=new n.impl.VersionInfoImpl(this.host.queryHostInfo(e.sdkhost.HostInformationKey.Platform),this.host.queryHostInfo(e.sdkhost.HostInformationKey.Version))),this._versionInfo},i.prototype.resolveUserForBind=function(t){var e=n.core.User.findUser(this,t);if(e&&e.deviceBound)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to bind an already bound user on this device.",{user:t});return e||(this.log(n.LogLevel.Debug,(function(){return"bind: Creating new user "+t})),e=n.core.User.createUserWithUserId(this,t)),e},i.prototype.resumableControlFlowRequestRuntimeContext=function(t){var e=this;return{clientContext:t,sdk:this,sdkSessionManagementServices:new(function(){function t(){}return t.prototype.setCurrentSession=function(t){e._currentSession=t},Object.defineProperty(t.prototype,"lastReceivedPushToken",{get:function(){return e._lastReceivedPushToken},enumerable:!0,configurable:!0}),t.prototype.saveCurrentSession=function(){e.saveCurrentSession()},t}()),uiHandler:this.currentUiHandler}},i.prototype.internalBind=function(t,e,o){return this.log(n.LogLevel.Debug,(function(){return"Bind for user "+(t.userId||t.idToken)})),new n.core.BindControlFlowRequest(this.resumableControlFlowRequestRuntimeContext(o)).run(t,e)},i.prototype.bind=function(t,e,o){try{var r=this.resolveUserForBind(t);return this.internalBind(r,e,o)}catch(t){return Promise.reject(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}},i.prototype.resolveUserForAuthenticate=function(t,e){var o;if(this.host.deviceSupportsCryptoBind())o=this.lookupBoundUser(t,e);else if(!(o=n.core.User.findUserWithType(this,t,e))){if(e!==n.UserHandleType.UserId)throw e===n.UserHandleType.IdToken?new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to authenticate with ID Token that is not provisioned on this device.",{uid_token:t}):new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Unsupported user handle type",{user_handle_type:e});this.log(n.LogLevel.Debug,(function(){return"authenticate: Creating new user "+t})),o=n.core.User.createUserWithUserId(this,t)}return o},i.prototype.internalAuthenticate=function(t,e,o,r){var i=this;return this.log(n.LogLevel.Debug,(function(){return"Authenticate for user "+(t.userId||t.idToken)+" with policy "+e})),new n.core.AuthenticateControlFlowRequest(this.resumableControlFlowRequestRuntimeContext(r)).run(t,e,o).catch((function(e){return i.applyInvalidUserRecordRecovery(t.userHandle,n.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},i.prototype.authenticate=function(t,e,o,r){try{var i=this.resolveUserForAuthenticate(t,n.UserHandleType.UserId);return this.internalAuthenticate(i,e,o,r)}catch(t){return Promise.reject(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}},i.prototype.authenticateWithIdToken=function(t,e,o,r){try{var i=this.resolveUserForAuthenticate(t,n.UserHandleType.IdToken);return this.internalAuthenticate(i,e,o,r)}catch(t){return Promise.reject(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}},i.prototype.invokePolicy=function(t,e,o){return this.log(n.LogLevel.Debug,(function(){return"Invoke policy "+t+" for current session."})),new n.core.InvokePolicyControlFlowRequest(this.resumableControlFlowRequestRuntimeContext(o)).run(t,e)},i.prototype.startTotpSessionForUser=function(t,e,o,r){var i=this;return o=o||n.core.totp.TotpPropertiesProcessor.BACKWARD_COMPATIBILITY_DEFAULT_GENERATOR,this.log(n.LogLevel.Debug,(function(){return"Start TOTP session for user "+t+", generator "+o})),new Promise((function(s,a){i.ensureConfigured(),i.log(n.LogLevel.Debug,(function(){return"Get TOTP data for <"+t+", "+o+">"}));var u=n.core.User.findUser(i,t);if(!u)throw i.log(n.LogLevel.Error,(function(){return"Can not find user record for <"+t+">"})),new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Can not find user <"+t+">");var c=new n.core.LocalSession(i,u);n.core.totp.TotpPropertiesProcessor.createWithUserHandle(t,i,c,r).runCodeGenerationSession(o,e,r,i.currentUiHandler).then(s,a)})).catch((function(t){return Promise.reject(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},i.prototype.totpGenerationRequestForUserFromCanonicalString=function(t,e){this.ensureConfigured(),this.log(n.LogLevel.Debug,(function(){return"Get TOTP request for <"+t+">"}));var o=n.core.User.findUser(this,t);if(!o)throw this.log(n.LogLevel.Error,(function(){return"Can not find user record for <"+t+">"})),new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Can not find user <"+t+">");var r=new n.core.LocalSession(this,o);return n.core.totp.TotpPropertiesProcessor.createWithUserWithoutUIInteraction(o,this,r).totpRequestFromCanonicalString(e)},i.prototype.startTotpSessionWithRequest=function(t,e){var o=this;return new Promise((function(r,i){o.ensureConfigured(),o.log(n.LogLevel.Debug,(function(){return"Start TOTP session for user "+t.getUserId()+", generator "+t.getGeneratorName()}));var s=n.core.User.findUser(o,t.getUserId());if(!s)throw o.log(n.LogLevel.Error,(function(){return"Can not find user record for <"+t.getUserId()+">"})),new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Can not find user <"+t.getUserId()+">");var a=new n.core.LocalSession(o,s);n.core.totp.TotpPropertiesProcessor.createWithUserHandle(t.getUserId(),o,a,e).runCodeGenerationSessionWithRequest(t,e,o.currentUiHandler).then(r,i)})).catch((function(t){return Promise.reject(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},i.prototype.startDeviceManagementSession=function(t){var e=this;return new Promise((function(o,r){e.ensureConfigured(),e.runWithCurrentSession((function(o){return e.log(n.LogLevel.Debug,(function(){return"User in current session: "+o.user.displayName})),new n.core.DeviceManagementSessionProcessor(e,o,t).run()})).then((function(t){switch(t){case n.core.DeviceManagementSessionProcessorReturnReason.CurrentDeviceDeleted:var o=e._currentSession&&e._currentSession.user;return e.log(n.LogLevel.Debug,(function(){return"Invalidating current session after deletion of current device."})),e._currentSession=null,e.saveCurrentSession(),o?(e.log(n.LogLevel.Debug,(function(){return"Clearing data for current user ("+o.displayName+") after deletion of current device."})),e.clearDataForUser(o.userHandle)):e.log(n.LogLevel.Warning,(function(){return"No current user after deletion of current device; not clearing sesison."})),!0;case n.core.DeviceManagementSessionProcessorReturnReason.FinishSession:return!0}})).then(o,r)})).catch((function(t){return Promise.reject(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},i.prototype.startAuthenticationConfiguration=function(t){var e=this;return this.log(n.LogLevel.Debug,(function(){return"Start authentication configuration for current session"})),new Promise((function(o,r){e.ensureConfigured(),e.runWithCurrentSession((function(o){return e.log(n.LogLevel.Debug,(function(){return"User in current session: "+o.user.displayName})),new n.core.AuthenticationConfigurationSessionProcessor(e,o,t).run()})).then(o,r)})).catch((function(t){return Promise.reject(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},i.prototype.startAuthenticationConfigurationWithToken=function(t,e){var o=this;return this.log(n.LogLevel.Debug,(function(){return"Start approval for provided session token"})),new Promise((function(r,i){o.ensureConfigured(),o.runWithCurrentSession((function(r){return o.log(n.LogLevel.Debug,(function(){return"User in current session: "+r.user.displayName})),new n.core.AuthenticationConfigurationSessionProcessor(o,r,e,t).run()})).then(r,i)})).catch((function(t){return Promise.reject(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},i.prototype.startApprovalsSessionForCurrentSession=function(t){var e=this;return this.log(n.LogLevel.Debug,(function(){return"Start approval for current session"})),new Promise((function(o,r){e.ensureConfigured(),e.runWithCurrentSession((function(o){return e.log(n.LogLevel.Debug,(function(){return"User in current session: "+o.user.displayName})),new n.core.ApprovalSessionProcessor(e,o,t).run()})).then(o,r)})).catch((function(t){return Promise.reject(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},i.prototype.startApprovalsSessionForPushedRequest=function(t,e){var o=this;return this.log(n.LogLevel.Debug,(function(){return"Start approval for push request"})),new Promise((function(r,i){if(o.ensureConfigured(),!t.userId())return t.ticket()?void i(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Mobile approval push by ticket not yet implemented.")):void i(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Unknown mobile approval push request."));o.log(n.LogLevel.Debug,(function(){return"startApprovalsSessionForPushedRequest with userid "+t.userId()}));var s=o.lookupBoundUser(t.userId()),a=new n.core.Session(o,s);new n.core.ApprovalSessionProcessor(o,a,e).run().then(r,i)})).catch((function(t){return Promise.reject(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},i.prototype.invokeAnonymousPolicy=function(t,e,o){return this.log(n.LogLevel.Debug,(function(){return"Start anonymous policy "+t})),new n.core.InvokeAnonymousPolicyControlFlowRequest(this.resumableControlFlowRequestRuntimeContext(o)).run(t,e)},i.prototype.cancelCurrentRunningControlFlow=function(){this.log(n.LogLevel.Debug,(function(){return"Cancel current running control flow requested."})),this._currentSession?this._currentSession.cancelCurrentControlFlow():this.log(n.LogLevel.Error,(function(){return"No current session"}))},i.prototype.ensureConfigured=function(){if(!this.currentUiHandler)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to start authentication without a registered UIHandler.")},i.prototype.getAppGlobalUIContext=function(){return this._appGlobalUiContext||(this._appGlobalUiContext=new n.impl.UIContextImpl(this)),this._appGlobalUiContext},i.prototype.userVaultExists=function(t,e){return n.UserVault.exists(this,t,e)},i.prototype.readUserVault=function(t,e,o){var r=this;return new Promise((function(i,s){n.UserVault.open(r,t,e).readData(o).then(i,s)}))},i.prototype.writeUserVault=function(t,e,o,r){var i=this;return new Promise((function(s,a){n.UserVault.open(i,t,e).writeData(o,r).then(s,a)}))},i.prototype.saveCurrentSession=function(){this._currentSession?this.host.writeSessionStorageKey(o,this._currentSession.toJson()):this.host.deleteSessionStorageKey(o)},i.prototype.runWithCurrentSession=function(t){var e=this;if(!this._currentSession)return Promise.reject(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.SessionRequired,"Operation requires an active session."));var o=this._currentSession;return o.lock(),t(o).finally((function(){o.unlock(),e.saveCurrentSession()}))},i.prototype.log=function(t,e){t<=this._logLevel&&this._nativeHost.log(t,"TransmitSDK/Tarsus",e())},i.prototype.promiseCollectionResult=function(){var t=this;return this._nativeHost.promiseCollectionResult().then((function(e){return t.addTarsusCollectedData(e)}))},i.prototype.getClientFeatureSet=function(){var t,o=this.host.queryHostInfo(e.sdkhost.HostInformationKey.HostProvidedFeatures);return t=o&&o.length?o.split(",").map((function(t){return parseInt(t)})):[],"true"==this.host.queryHostInfo(e.sdkhost.HostInformationKey.DeviceBiometricsFPContinuation)&&t.push(e.sdkhost.FeatureDeviceBiometricsFPContinuation),n.core.STATIC_FEATURE_SET.concat(t)},i.prototype.clearDataForUser=function(t){try{if(this.log(n.LogLevel.Debug,(function(){return"Delete data for user "+t+"."})),this._currentSession)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to call clearDataForUser with an active primary ongoing session.");var e=n.core.User.findUser(this,t);if(!e)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to call clearDataForUser with a non existing user.");try{this.host.deleteKeyPair(e.deviceSigningKeyTag)}catch(t){this.log(n.LogLevel.Warning,(function(){return"Can't delete device signing key."}))}try{this.host.deleteKeyPair(e.deviceEncryptionKeyTag)}catch(t){this.log(n.LogLevel.Warning,(function(){return"Can't delete device encryption key."}))}try{n.core.LocalEnrollment.deleteEnrollmentsForUser(e,this)}catch(t){this.log(n.LogLevel.Warning,(function(){return"Can't delete enrollments for user."}))}var o=new n.core.LocalSession(this,e);try{n.core.totp&&n.core.totp.TotpPropertiesProcessor.createWithUserWithoutUIInteraction(e,this,o).deleteAllProvisions()}catch(t){this.log(n.LogLevel.Warning,(function(){return"Can't delete enrollments for user."}))}n.core.User.deleteUser(e,this)}catch(e){throw this.log(n.LogLevel.Warning,(function(){return"Can't delete data for user "+t+": "+e})),e}},i.prototype.clearAllData=function(){var t=this;if(this._currentSession)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to call clearAllData with an active primary ongoing session.");this.log(n.LogLevel.Debug,(function(){return"Delete all data: collecting users"}));var e=[];n.core.User.iterateUsers(this,(function(t){e.push(t.userHandle)})),this.log(n.LogLevel.Debug,(function(){return"Delete all data: deleting users"})),e.forEach((function(e){try{t.clearDataForUser(e)}catch(o){t.log(n.LogLevel.Warning,(function(){return"Error when deleting user "+e+": "+o}))}}))},i.prototype.generateDebugPinForControlFlow=function(t){var e=this;return this.log(n.LogLevel.Debug,(function(){return"generateDebugPinForMainSession: Starting"})),new Promise((function(o,r){e.ensureConfigured();var i=n.core.ControlFlowProcessor.findByClientContext(t);if(!i)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to start debugging for an unknown control flow.");i.generateDebugPin().then(o,r)}))},i.prototype.lookupBoundUser=function(t,e){var o=n.core.User.findUserWithType(this,t,e);if(!o)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to authenticate with an unknown user on this device.",{user:t});if(!o.deviceBound)throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"Attempt to authenticate with an unbound user on this device.",{user:t});return o},i.prototype.addTarsusCollectedData=function(t){var e=this;return new Promise((function(o,r){var i=new Array,a=new Array;Object.keys(n.core.collectors.TarsusCollectors).forEach((function(t){var o=new n.core.collectors.TarsusCollectors[t].createCollector(e.enabledCollectors);o.isEnabled()&&(a.push(t),i.push(o.provide(e)))})),Promise.all(i.map((function(t){return t.catch((function(t){return new Error(t)}))}))).then((function(r){for(var i=t.toJson(),u=function(t){r[t]instanceof Error?e.log(n.LogLevel.Error,(function(){return"caught collection error "+r[t]})):(e.log(n.LogLevel.Debug,(function(){return"Tarsus collected from: "+a[t]+" "+JSON.stringify(r[t])})),i.content[a[t]]=e.mergeCollectedData(r[t],i.content[a[t]]))},c=0;c<r.length;c++)u(c);o(new s(i))})).catch((function(t){r(t)}))}))},i.prototype.mergeCollectedData=function(t,e){var n={};for(var o in t)n[o]=t[o];for(var o in e)n[o]=e[o];return n},i.prototype.addMandatoryCollectorsIfNeeded=function(){var t=this;this.mandatoryCollectors.forEach((function(e){t.enabledCollectors.indexOf(e)<0&&(t.enabledCollectors.push(e),t.log(n.LogLevel.Warning,(function(){return n.CollectorType[e]+" collector is mandatory, and will remain enabled."})))}))},i.prototype.loadUiAssetsFromServer=function(t){var e=this;try{this.log(n.LogLevel.Debug,(function(){return"Start ClientStrings request with locale: "+t}));var o=new n.core.PublicNetworkRequest(this),r=o.createClientStringsRequest(t);return o.performRequest(r).then((function(o){if(e.uiAssetsData=new n.core.UIAssetsData(e,t),o){var r=o&&o.data;if(r&&r.values)return e.uiAssetsData.setServerClientStrings(new n.core.ClientStrings(r.values)),!0;throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,o.error_message)}return!1}))}catch(t){return this.log(n.LogLevel.Error,(function(){return"ClientStrings general error: "+t.getMessage()})),Promise.reject(t)}},i.prototype.getFullLocale=function(t){return t&&t.indexOf("-")>=0&&(n.util.LANGUAGES[t]=t),n.util.LANGUAGES[t]||t},i.prototype.applyConfigurationDefaultsAndLogConfiguration=function(){var e=this;null==this._apiLevel&&(this._apiLevel=t.ts.mobile.sdk.core.API_LEVEL),null==this.invalidUserRecoveryMode&&(this.invalidUserRecoveryMode=this.apiLevel>=9?n.InvalidUserRecordRecoveryMode.RecoverDeviceAndBindingOnAuthenticate:n.InvalidUserRecordRecoveryMode.Disable),this.log(n.LogLevel.Debug,(function(){return"Using Client API Level "+e.apiLevel})),this.log(n.LogLevel.Debug,(function(){return"Using invalid user recovery mode "+n.InvalidUserRecordRecoveryMode[e.invalidUserRecoveryMode]}))},i.prototype.applyInvalidUserRecordRecovery=function(t,e){switch(this.invalidUserRecoveryMode){case n.InvalidUserRecordRecoveryMode.Disable:break;case n.InvalidUserRecordRecoveryMode.RecoverDeviceAndBindingOnAuthenticate:e.getErrorCode()!=n.AuthenticationErrorCode.DeviceNotFound&&e.getErrorCode()!=n.AuthenticationErrorCode.InvalidDeviceBinding||(this.log(n.LogLevel.Error,(function(){return"Resetting user record due to error "+e})),this.clearDataForUser(t),e instanceof n.impl.AuthenticationErrorImpl||(e=new n.impl.AuthenticationErrorImpl(e.getErrorCode(),e.getMessage(),e.getData())),e.setPublicProperty(n.AuthenticationErrorProperty.UserRecordDeleted,!0))}return Promise.reject(e)},i.prototype.suspendControlFlowToDefaultSuspensionContext=function(t){if(!(t instanceof n.impl.PolicyActionImpl))throw this.log(n.LogLevel.Error,(function(){return"Attempt to request continuation for an unknown PolicyAction implementation"})),new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Cannot prepare SDK for continuation in this context.");if(!(t.controlFlow&&t.controlFlow.requestContext&&t.controlFlow.requestContext instanceof n.core.ResumableControlFlowRequest))throw this.log(n.LogLevel.Error,(function(){return"Attempt to request continuation for a PolicyAction implementation without a control flow request context"})),new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Cannot prepare SDK for continuation in this context.");this.log(n.LogLevel.Debug,(function(){return"Preparing for continuation of "+t.controlFlow}));var e=t.controlFlow.requestContext.topmost.createContinuation(),o=new n.core.SerializationContext;o.writeObject("continuation",e),this.log(n.LogLevel.Debug,(function(){return"Storing continuation"})),this.host.writeStorageKey(r,o.serializedContent)},i.prototype.resumeSuspendedControlFlow=function(t,e,o){var i=this;return new Promise((function(t,s){i.log(n.LogLevel.Debug,(function(){return"resumeSuspendedControlFlow Fetching continuation and deleting it..."}));var a=i.host.readStorageKey(r);i.host.deleteStorageKey(r),i.log(n.LogLevel.Debug,(function(){return"Deserializing continuation"}));var u=new n.core.SerializationContext(a).readNonNullObject("continuation");i.log(n.LogLevel.Debug,(function(){return"Resuming process based on continuation"})),u.createResumableProcess(i.resumableControlFlowRequestRuntimeContext(o)).resume(u,e).then(t,s)})).catch((function(t){throw n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t)}))},i.__tarsusInterfaceName="TransmitSDKXm",i}();n.TransmitSDKXmImpl=i;var s=function(){function t(t){this.theResult=t}return t.prototype.toJson=function(){return this.theResult},t}();n.CollectionResultImpl=s,n.createSdk=function(){return new i}}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){function n(n){this._backgroundColor=n.backgroundColor&&new e.TSColorImpl(t.core.Protocol.unwrap(n.backgroundColor)),this._tintColor=n.tintColor&&new e.TSColorImpl(t.core.Protocol.unwrap(n.tintColor)),this._lineColor=n.lineColor&&new e.TSColorImpl(t.core.Protocol.unwrap(n.lineColor)),this._iconColor=n.iconColor&&new e.TSColorImpl(t.core.Protocol.unwrap(n.iconColor)),this._imageUrl=n.imageUrl&&t.core.Protocol.unwrap(n.imageUrl),this._fontName=n.fontName&&t.core.Protocol.unwrap(n.fontName),this._fontSize=n.fontSize&&t.core.Protocol.unwrap(n.fontSize),this._fontBold=n.fontBold&&t.core.Protocol.unwrap(n.fontBold),this._maskInput=n.maskInput&&t.core.Protocol.unwrap(n.maskInput),this._rawJson=JSON.stringify({backgroundColor:this._backgroundColor&&this._backgroundColor.getHexValue(),tintColor:this._tintColor&&this._tintColor.getHexValue(),lineColor:this._lineColor&&this._lineColor.getHexValue(),iconColor:this._iconColor&&this._iconColor.getHexValue(),imageUrl:this._imageUrl,fontName:this._fontName,fontSize:this._fontSize,fontBold:this._fontBold,maskInput:this._maskInput})}return n.prototype.getBackgroundColor=function(){return this._backgroundColor||null},n.prototype.getTintColor=function(){return this._tintColor||null},n.prototype.getLineColor=function(){return this._lineColor||null},n.prototype.getIconColor=function(){return this._iconColor||null},n.prototype.getImageUrl=function(){return this._imageUrl||null},n.prototype.getFontName=function(){return this._fontName||null},n.prototype.getFontSize=function(){return this._fontSize||0},n.prototype.getFontBold=function(){return this._fontBold||!1},n.prototype.getMaskInput=function(){return this._maskInput||!1},n.prototype.getRawJson=function(){return this._rawJson},n.emptyStyle=function(){return this._emptyStyle||(this._emptyStyle=new n({})),this._emptyStyle},n}();e.UIStyleImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getUserChoice=function(){return this._userChoice},e.prototype.setUserChoice=function(t){this._userChoice=t},e.create=function(e){return t.ts.mobile.sdk.impl.UnregistrationInputImpl.create(e)},e.__tarsusInterfaceName="UnregistrationInput",e}();e.UnregistrationInput=n}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.create=function(t){var n=new e;return n.setUserChoice(t),n},e}(t.UnregistrationInput);e.UnregistrationInputImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.prototype.getUserHandle=function(){return this._user.userHandle},t.prototype.getUserHandleType=function(){return this._user.userHandleType},t.prototype.getDisplayName=function(){return this._user.displayName},t.prototype.getDeviceBound=function(){return this._user.deviceBound},t.prototype.getHasLoggedIn=function(){return this._user.hasLoggedIn},t.createWithUser=function(e){var n=new t;return n._user=e,n},t}();t.UserInfoImpl=e}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o;e=t.sdk||(t.sdk={}),n=function(){function t(){}return t.prototype.getValidCancelOptions=function(){return null},t.prototype.getValidErrorRecoveryOptions=function(t){return[e.AuthenticationErrorRecovery.ChangeAuthenticator,e.AuthenticationErrorRecovery.SelectAuthenticator,e.AuthenticationErrorRecovery.Fail,e.AuthenticationErrorRecovery.RetryAuthenticator]},t}(),o=function(){function t(t,e){this._sdk=t,this._vault=e}return t.keyPathForUserVaultNamed=function(t){return new e.core.TarsusKeyPath("user_vaults",t)},t.isValidKeyPathForUserVault=function(t){return"user_vaults"==t.component(0)},t.open=function(o,r,i){var s=e.core.User.findUser(o,r);if(!s)throw o.log(e.LogLevel.Error,(function(){return"Can not find user record for <"+r+">"})),new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.InvalidInput,"Can not find user <"+r+">");return new t(o,e.core.vault.Vault.getVaultForUserWithId(s,this.keyPathForUserVaultNamed(i),new n,o,o.currentUiHandler))},t.exists=function(t,n,o){var r=e.core.User.findUser(t,n);return r?e.core.vault.Vault.vaultExists(r,this.keyPathForUserVaultNamed(o),t):(t.log(e.LogLevel.Error,(function(){return"Can not find user record for <"+n+">"})),!1)},t.prototype.readData=function(t){var n=this,o=e.impl.PolicyActionImpl.createPseudoAction(this._sdk,"user_vault_read");return this._vault.unlock(o,t,!0).then((function(t){if(t instanceof e.core.vault.VaultUnlockResultSuccessOrFailed&&t.successful){var o=n._vault.readVaultKey(e.core.vault.Vault.noIntegrityElementKey),r=e.util.hexToBase64(o);return n._vault.lock(),r}throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid response from vault unlock operation",{result:JSON.stringify(t)})}))},t.prototype.writeData=function(t,n){var o=this,r=e.impl.PolicyActionImpl.createPseudoAction(this._sdk,"user_vault_write");return this._vault.unlock(r,n,!0).then((function(n){if(n instanceof e.core.vault.VaultUnlockResultSuccessOrFailed&&n.successful){var r=e.util.base64ToHex(t);return o._vault.writeVaultKey(e.core.vault.Vault.noIntegrityElementKey,r).then((function(){return o._vault.lock()}))}throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid response from vault unlock operation")}))},t}(),e.UserVault=o}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){function e(t,e){this._sdkVersion=e,this._platformName=t}return e.prototype.getSdkVersion=function(){return this._sdkVersion},e.prototype.getTarsusVersion=function(){return t.core.TARSUS_VERSION},e.prototype.getPlatformName=function(){return this._platformName},e.prototype.getApiLevel=function(){return t.core.API_LEVEL},e}();e.VersionInfoImpl=n}(t.impl||(t.impl={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){var n="input is invalid type",o=!t.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,r="0123456789abcdef".split(""),i=[-2147483648,8388608,32768,128],s=[24,16,8,0],a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],u=["hex","array","digest","arrayBuffer"],c=[];!t.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!o||!t.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"===e(t)&&t.buffer&&t.buffer.constructor===ArrayBuffer});var l=function(t,e){return function(n){return new f(e,!0).update(n)[t]()}},p=function(t){var e=l("hex",t);e.create=function(){return new f(t)},e.update=function(t){return e.create().update(t)};for(var n=0;n<u.length;++n){var o=u[n];e[o]=l(o,t)}return e},h=function(t,e){return function(n,o){return new m(n,e,!0).update(o)[t]()}},d=function(t){var e=h("hex",t);e.create=function(e){return new m(e,t)},e.update=function(t,n){return e.create(t).update(n)};for(var n=0;n<u.length;++n){var o=u[n];e[o]=h(o,t)}return e};function f(t,e){e?(c[0]=c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0,this.blocks=c):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}function m(t,r,i){var s,a=e(t);if("string"===a){var u,c=[],l=t.length,p=0;for(s=0;s<l;++s)(u=t.charCodeAt(s))<128?c[p++]=u:u<2048?(c[p++]=192|u>>6,c[p++]=128|63&u):u<55296||u>=57344?(c[p++]=224|u>>12,c[p++]=128|u>>6&63,c[p++]=128|63&u):(u=65536+((1023&u)<<10|1023&t.charCodeAt(++s)),c[p++]=240|u>>18,c[p++]=128|u>>12&63,c[p++]=128|u>>6&63,c[p++]=128|63&u);t=c}else{if("object"!==a)throw new Error(n);if(null===t)throw new Error(n);if(o&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||o&&ArrayBuffer.isView(t)))throw new Error(n)}t.length>64&&(t=new f(r,!0).update(t).array());var h=[],d=[];for(s=0;s<64;++s){var m=t[s]||0;h[s]=92^m,d[s]=54^m}f.call(this,r,i),this.update(d),this.oKeyPad=h,this.inner=!0,this.sharedMemory=i}f.prototype.update=function(t){if(!this.finalized){var r,i=e(t);if("string"!==i){if("object"!==i)throw new Error(n);if(null===t)throw new Error(n);if(o&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||o&&ArrayBuffer.isView(t)))throw new Error(n);r=!0}for(var a,u,c=0,l=t.length,p=this.blocks;c<l;){if(this.hashed&&(this.hashed=!1,p[0]=this.block,p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0),r)for(u=this.start;c<l&&u<64;++c)p[u>>2]|=t[c]<<s[3&u++];else for(u=this.start;c<l&&u<64;++c)(a=t.charCodeAt(c))<128?p[u>>2]|=a<<s[3&u++]:a<2048?(p[u>>2]|=(192|a>>6)<<s[3&u++],p[u>>2]|=(128|63&a)<<s[3&u++]):a<55296||a>=57344?(p[u>>2]|=(224|a>>12)<<s[3&u++],p[u>>2]|=(128|a>>6&63)<<s[3&u++],p[u>>2]|=(128|63&a)<<s[3&u++]):(a=65536+((1023&a)<<10|1023&t.charCodeAt(++c)),p[u>>2]|=(240|a>>18)<<s[3&u++],p[u>>2]|=(128|a>>12&63)<<s[3&u++],p[u>>2]|=(128|a>>6&63)<<s[3&u++],p[u>>2]|=(128|63&a)<<s[3&u++]);this.lastByteIndex=u,this.bytes+=u-this.start,u>=64?(this.block=p[16],this.start=u-64,this.hash(),this.hashed=!0):this.start=u}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},f.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=i[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},f.prototype.hash=function(){var t,e,n,o,r,i,s,u,c,l=this.h0,p=this.h1,h=this.h2,d=this.h3,f=this.h4,m=this.h5,g=this.h6,v=this.h7,_=this.blocks;for(t=16;t<64;++t)e=((r=_[t-15])>>>7|r<<25)^(r>>>18|r<<14)^r>>>3,n=((r=_[t-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,_[t]=_[t-16]+e+_[t-7]+n<<0;for(c=p&h,t=0;t<64;t+=4)this.first?(this.is224?(i=300032,v=(r=_[0]-1413257819)-150054599<<0,d=r+24177077<<0):(i=704751109,v=(r=_[0]-210244248)-1521486534<<0,d=r+143694565<<0),this.first=!1):(o=(i=l&p)^l&h^c,v=d+(r=v+(n=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&m^~f&g)+a[t]+_[t])<<0,d=r+((e=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10))+o)<<0),o=(s=d&l)^d&p^i,g=h+(r=g+(n=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7))+(v&f^~v&m)+a[t+1]+_[t+1])<<0,e=((h=r+((e=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+o)<<0)>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),o=(u=h&d)^h&l^s,m=p+(r=m+(n=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&v^~g&f)+a[t+2]+_[t+2])<<0,e=((p=r+(e+o)<<0)>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),o=(c=p&h)^p&d^u,f=l+(r=f+(n=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&g^~m&v)+a[t+3]+_[t+3])<<0,l=r+(e+o)<<0;this.h0=this.h0+l<<0,this.h1=this.h1+p<<0,this.h2=this.h2+h<<0,this.h3=this.h3+d<<0,this.h4=this.h4+f<<0,this.h5=this.h5+m<<0,this.h6=this.h6+g<<0,this.h7=this.h7+v<<0},f.prototype.toString=f.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,o=this.h3,i=this.h4,s=this.h5,a=this.h6,u=this.h7,c=r[t>>28&15]+r[t>>24&15]+r[t>>20&15]+r[t>>16&15]+r[t>>12&15]+r[t>>8&15]+r[t>>4&15]+r[15&t]+r[e>>28&15]+r[e>>24&15]+r[e>>20&15]+r[e>>16&15]+r[e>>12&15]+r[e>>8&15]+r[e>>4&15]+r[15&e]+r[n>>28&15]+r[n>>24&15]+r[n>>20&15]+r[n>>16&15]+r[n>>12&15]+r[n>>8&15]+r[n>>4&15]+r[15&n]+r[o>>28&15]+r[o>>24&15]+r[o>>20&15]+r[o>>16&15]+r[o>>12&15]+r[o>>8&15]+r[o>>4&15]+r[15&o]+r[i>>28&15]+r[i>>24&15]+r[i>>20&15]+r[i>>16&15]+r[i>>12&15]+r[i>>8&15]+r[i>>4&15]+r[15&i]+r[s>>28&15]+r[s>>24&15]+r[s>>20&15]+r[s>>16&15]+r[s>>12&15]+r[s>>8&15]+r[s>>4&15]+r[15&s]+r[a>>28&15]+r[a>>24&15]+r[a>>20&15]+r[a>>16&15]+r[a>>12&15]+r[a>>8&15]+r[a>>4&15]+r[15&a];return this.is224||(c+=r[u>>28&15]+r[u>>24&15]+r[u>>20&15]+r[u>>16&15]+r[u>>12&15]+r[u>>8&15]+r[u>>4&15]+r[15&u]),c},f.prototype.array=f.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,o=this.h3,r=this.h4,i=this.h5,s=this.h6,a=this.h7,u=[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24&255,n>>16&255,n>>8&255,255&n,o>>24&255,o>>16&255,o>>8&255,255&o,r>>24&255,r>>16&255,r>>8&255,255&r,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24&255,s>>16&255,s>>8&255,255&s];return this.is224||u.push(a>>24&255,a>>16&255,a>>8&255,255&a),u},f.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t},(m.prototype=new f).finalize=function(){if(f.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();f.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),f.prototype.finalize.call(this)}};var g=p();g.sha256=g,g.sha224=p(!0),g.sha256.hmac=d(),g.sha224.hmac=d(!0),t.sha256=g.sha256,t.sha224=g.sha224}("undefined"!=typeof window?window:d),function(t){!function(t){!function(t){var e;!function(t){var n=function(){};t.ApprovalControlFlowExecutionContext=n;var o=function(){function t(t,n,o){this._session=n,this._sdk=t,this._clientContext=o,this._uiHandler=t.currentUiHandler,this._uiContextImpl=new e.impl.UIContextImpl(t)}return t.prototype.getUiContext=function(){return this._uiContextImpl},t.prototype.run=function(){var t=this;return this._sdk.log(e.LogLevel.Debug,(function(){return"approvals: Starting session"})),this.queryApprovalsFromServer().then((function(e){return new Promise((function(n,o){t._completeFn=n,t._rejectFn=o,t.kickStartSession(e)}))}))},t.prototype.approve=function(t,n){return this.changeApprovalStatus(t,e.MobileApprovalStatus.Approved,n)},t.prototype.deny=function(t){return this.changeApprovalStatus(t,e.MobileApprovalStatus.Denied).then((function(t){return!0}))},t.prototype.requestRefreshApprovals=function(){var t=this;return this.queryApprovalsFromServer().then((function(e){return t.updateManagedApprovals(e),!0}),(function(t){throw e.impl.AuthenticationErrorImpl.ensureAuthenticationError(t)}))},t.prototype.finishSession=function(){if(!this._appSession)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to finish a non started approval session.");this._appSession.endSession(),this._appSession=null,this._completeFn(!0)},t.prototype.kickStartSession=function(t){this._appSession=this._sdk.currentUiHandler.createApprovalsSession(this._session.user.displayName),this._appSession?(this.updateManagedApprovals(t),this._appSession.startSession(this,null,this._clientContext)):this._rejectFn(e.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createTicketWaitSession."))},t.prototype.updateManagedApprovals=function(t){if(this._managedApprovals=t,!this._appSession)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to update approvals on a non started approval session.");this._appSession.setSessionApprovalsList(t)},t.prototype.queryApprovalsFromServer=function(){var t=this;this._sdk.log(e.LogLevel.Debug,(function(){return"approvals: Initiating collection"}));var n=this._sdk.promiseCollectionResult();return e.util.wrapPromiseWithActivityIndicator(this._uiHandler,null,this._clientContext,n.then((function(n){t._sdk.log(e.LogLevel.Debug,(function(){return"approvals: Collection done; setting up request to query approvals"}));var o=t._session.createApprovalsFetchRequest(n);return t._sdk.log(e.LogLevel.Debug,(function(){return"approvals: Sending request to query approvals"})),t._session.performSessionExchange(o).then((function(t){return t.data.approvals.map((function(t){return new e.impl.ManagedMobileApprovalImpl(t)}))}))})))},t.prototype.changeApprovalStatus=function(t,o,r){var i=this;return this._sdk.log(e.LogLevel.Debug,(function(){return"approval: change status of approval "+t.getApproval().getApprovalId()+" to "+o})),this._sdk.log(e.LogLevel.Debug,(function(){return"approval: Initiating request promise"})),this._sdk.promiseCollectionResult().then((function(n){return i._sdk.log(e.LogLevel.Debug,(function(){return"approval: Collection done; setting up request"})),i._session.createApprovalReplyRequest(n,t.getApproval().getApprovalId(),o)})).then((function(s){i._sdk.log(e.LogLevel.Debug,(function(){return"approval: Initiating control flow"}));var a=new n;return a.approval=t.getApproval(),i._session.startControlFlow(s,a,r||i._clientContext).then((function(e){return t.getApproval().updateStatus(o),i.updateManagedApprovals(i._managedApprovals),e}),(function(t){var n=e.impl.AuthenticationErrorImpl.ensureAuthenticationError(t);throw i._sdk.log(e.LogLevel.Debug,(function(){return"approval: Got server error "+n})),n.getErrorCode()==e.AuthenticationErrorCode.Internal&&n.getData()&&6001==n.getData().server_error_code?(i._sdk.log(e.LogLevel.Debug,(function(){return"approval: Converting server error"})),new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.ApprovalWrongState,n.getMessage())):n}))}))},t}();t.ApprovalSessionProcessor=o}((e=t.sdk||(t.sdk={})).core||(e.core={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={}));var O,M=d&&d.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){t.done?r(t.value):new n((function(e){e(t.value)})).then(s,a)}u((o=o.apply(t,e||[])).next())}))},q=d&&d.__generator||function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};!function(t){!function(t){!function(t){var e;!function(t){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e}(t.MultiStageResumableProcessContinuation);t.ResumableControlFlowRequestContinuation=n;var o=function(e){function n(n){var o=e.call(this)||this;return n instanceof t.Session?o.initFromSession(n):o.serializeFrom(n),o}return F(n,e),Object.defineProperty(n.prototype,"userRecord",{get:function(){return this._userRecord},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"usedSessionJson",{get:function(){return this._sessionJson},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"controlFlowContinuation",{get:function(){return this._cflowContinuation},enumerable:!0,configurable:!0}),n.prototype.createUsedSession=function(e){var n=t.User.fromUserRecord(this._userRecord,e);return t.Session.fromJsonWithUser(e,this._sessionJson,n)},n.prototype.serializeTo=function(t){t.writePrimitive("user",this._userRecord),t.writePrimitive("session",this._sessionJson),t.writeObject("cflowContinuation",this._cflowContinuation)},n.prototype.serializeFrom=function(t){this._userRecord=t.readPrimitive("user"),this._sessionJson=t.readPrimitive("session"),this._cflowContinuation=t.readObject("cflowContinuation")},n.prototype.initFromSession=function(e){this._sessionJson=e.toJson(),this._userRecord=t.User.toUserRecord(e.user),this._cflowContinuation=e.createCurrentControlFlowContinuation()},n}(t.ResumableProcessStageContinuation);t.ExecuteControlFlowStageContinuation=o;var r=function(){function t(t){this._ownerRequest=t,this._rtContext=t.rtContext}return Object.defineProperty(t.prototype,"clientContext",{get:function(){return this._rtContext.clientContext},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sdk",{get:function(){return this._rtContext.sdk},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uiHandler",{get:function(){return this._rtContext.uiHandler},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sdkSessionManagementServices",{get:function(){return this._rtContext.sdkSessionManagementServices},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"session",{get:function(){return this._usedSession},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"user",{get:function(){return this._usedSession.user},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"additionalParameters",{get:function(){return this._additionalParameters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"policy",{get:function(){return this._policy},enumerable:!0,configurable:!0}),t.prototype.run=function(){return this.runOrContinue()},t.prototype.resume=function(t,n){var r=this;return new Promise((function(i,s){if(!(t instanceof o))return Promise.reject(new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid continuation type for resume"));r.restoreParametersFromContinuation(t),r.runOrContinue(t,n).then(i,s)}))},t.prototype.restoreParametersFromContinuation=function(t){this._usedSession=t.createUsedSession(this.sdk)},t.prototype.postProcessControlFlowResult=function(t){return t},t.prototype.prepareForControlFlowExecution=function(){},t.prototype.handleControlFlowError=function(t){},t.prototype.createNextStage=function(t){return new s(this._ownerRequest,this._usedSession,t)},t.prototype.runOrContinue=function(t,n){var o=this;return this._usedSession.lock(),new Promise((function(r,i){var s;o.sdk.log(e.LogLevel.Debug,(function(){return"Running "+o.opName+" for user "+(o.user.userId||o.user.idToken)+"; continuation: "+!!t})),o.sdk.ensureConfigured(),o.prepareForControlFlowExecution(),t?(o.sdk.log(e.LogLevel.Debug,(function(){return o.opName+": Resuming control flow from continuation"})),s=o._usedSession.continueControlFlow(t.controlFlowContinuation,n,o._ownerRequest,o.clientContext)):(o.sdk.log(e.LogLevel.Debug,(function(){return o.opName+": Non continuation, generating request and starting control flow"})),s=e.util.wrapPromiseWithActivityIndicator(o.uiHandler,null,o.clientContext,o.generateControlFlowRequest()).then((function(t){return o.sdk.log(e.LogLevel.Debug,(function(){return o.opName+": Sending request"})),o._usedSession.startControlFlow(t,o._ownerRequest,o.clientContext)}))),s.then((function(t){return r(o.postProcessControlFlowResult(t))}),(function(t){o.handleControlFlowError(t),i(t)}))})).finally((function(){o._usedSession.unlock()})).catch((function(t){return Promise.reject(e.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))})).then((function(t){return o.createNextStage(t)}))},t}();t.ExecuteControlFlowStage=r;var i=function(n){function o(t){var e=n.call(this)||this;return t instanceof s?e.initFromProc(t):e.serializeFrom(t),e}return F(o,n),Object.defineProperty(o.prototype,"redirectionContinuation",{get:function(){return this._redirectionContinuation},enumerable:!0,configurable:!0}),o.prototype.serializeTo=function(t){t.writeObject("redirectionContinuation",this._redirectionContinuation)},o.prototype.serializeFrom=function(t){this._redirectionContinuation=t.readNonNullObject("redirectionContinuation")},o.prototype.initFromProc=function(t){var n=t.requestProcess;if(!n)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid state for requesting contination");this._redirectionContinuation=n.createContinuation()},o.prototype.createResumableProcess=function(t){return new s(t)},x([t.Serializable("RunRedirectsStageContinuation"),N("design:paramtypes",[Object])],o)}(t.ResumableProcessStageContinuation),s=function(){function n(t,e,n){this._ownerRequest=t,this._rtContext=t.rtContext,this._usedSession=e||null,this._authResult=n||null;var o=n&&this._authResult.getInternalData();this._redirectData=o&&o.redirect&&o.redirect}return Object.defineProperty(n.prototype,"requestProcess",{get:function(){return this._requestProcess},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"clientContext",{get:function(){return this._rtContext.clientContext},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sdk",{get:function(){return this._rtContext.sdk},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"uiHandler",{get:function(){return this._rtContext.uiHandler},enumerable:!0,configurable:!0}),n.prototype.createContinuation=function(){return new i(this)},n.prototype.run=function(){return M(this,void 0,void 0,(function(){var n,o;return q(this,(function(r){switch(r.label){case 0:if(!this._authResult)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid resumable control flow request state");return this._redirectData?[3,1]:[2,this._authResult];case 1:return[4,this.uiHandler.handlePolicyRedirect(t.Protocol.RedirectTypeMap[(n=this._redirectData).redirect_type],n.policy_id||null,n.target.user_id||n.target.token||null,n.params,this.clientContext)];case 2:switch((o=r.sent()).getAdditionalParametersOverride()&&(n.params=o.getAdditionalParametersOverride()),o.getRedirectResponse()){case e.RedirectResponseType.RedirectToPolicy:return[2,this.processRedirectRequest(n)];case e.RedirectResponseType.CancelRedirect:throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.UserCanceled,"Redirection to next policy canceled.");default:throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid redirect response type.")}case 3:return[2]}}))}))},n.prototype.resume=function(t,n){return t instanceof i?(this._requestProcess=t.redirectionContinuation.createResumableProcess(this._rtContext),this._requestProcess.resume(t.redirectionContinuation,n)):Promise.reject(new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid continuation type for resume"))},n.prototype.runtimeContextForCallee=function(){return{clientContext:this.clientContext,sdk:this.sdk,sdkSessionManagementServices:this._ownerRequest.rtContext.sdkSessionManagementServices,uiHandler:this.uiHandler,caller:this._ownerRequest}},n.prototype.processRedirectRequest=function(n){return M(this,void 0,void 0,(function(){var o,r,i,s,a,u,c,l,p,h,d,f=this;return q(this,(function(m){if(!this._usedSession)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid resumable control flow request state");if(o=n.policy_id||null,r=n.params,i=this._usedSession.user,"current"==n.target.type);else if("user_id"==n.target.type){if(!(s=n.target.user_id||this._usedSession.user.userId))throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"failed to resolve user id for redirect request <"+n.redirect_type+", "+n.target.type+">");s!=this._usedSession.user.userId&&(this.sdk.log(e.LogLevel.Debug,(function(){return"User id in request is different than that of the current user <"+s+", "+f._usedSession.user.userId+">"})),i=t.User.findUser(this.sdk,s)||t.User.createUserWithUserId(this.sdk,s))}else{if("uid_token"!=n.target.type)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Unhandled redirect target type '"+n.target.type+"'");if(a=n.target.uid_hash,!(u=n.target.token||this._usedSession.user.idToken))throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"failed to resolve id token for redirect request <"+n.redirect_type+", "+n.target.type+">");u!=this._usedSession.user.idToken&&(this.sdk.log(e.LogLevel.Debug,(function(){return"Id token in request is different than that of the current user <"+u+", "+f._usedSession.user.idToken+">"})),i=a&&t.User.findUserByUidHash(this.sdk,a)||t.User.findUser(this.sdk,u)||t.User.createUserWithIdToken(this.sdk,u,a))}switch(this.sdk.log(e.LogLevel.Info,(function(){return"control flow || type:"+n.redirect_type+" policy: "+o})),(c=n.redirect_type)===t.Protocol.RedirectTypeName.RedirectTypeNameBindOrAuthenticate&&(c=i.deviceBound?t.Protocol.RedirectTypeName.RedirectTypeNameAuthenticate:t.Protocol.RedirectTypeName.RedirectTypeNameBind),l=this.runtimeContextForCallee(),c){case t.Protocol.RedirectTypeName.RedirectTypeNameAuthenticate:return p=new t.AuthenticateControlFlowRequest(l),this._requestProcess=p,[2,p.run(i,o,r)];case t.Protocol.RedirectTypeName.RedirectTypeNameBind:return h=new t.BindControlFlowRequest(l),this._requestProcess=h,[2,h.run(i,r)];case t.Protocol.RedirectTypeName.RedirectTypeNameInvokePolicy:return d=new t.InvokePolicyControlFlowRequest(l),this._requestProcess=d,[2,d.run(o,r)];default:throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Unhandled redirect type '"+n.redirect_type+"'")}}))}))},n}();t.RunRedirectsStage=s;var a=function(t){function e(e){return t.call(this,e)||this}return F(e,t),Object.defineProperty(e.prototype,"topmost",{get:function(){for(var t=this;t.rtContext.caller;)t=t.rtContext.caller;return t},enumerable:!0,configurable:!0}),e}(t.MultiStageResumableProcess);t.ResumableControlFlowRequest=a;var u=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return F(o,n),o.prototype.prepareForControlFlowExecution=function(){if(this.sdk.currentSession)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"Attempt to start a session (bind) with a current primary active session.");this.sdkSessionManagementServices.setCurrentSession(this._usedSession)},o.prototype.handleControlFlowError=function(t){this.sdk.log(e.LogLevel.Debug,(function(){return"Clearing session after error"})),this.sdkSessionManagementServices.setCurrentSession(null),this.sdkSessionManagementServices.saveCurrentSession()},o.prototype.postProcessControlFlowResult=function(e){return this._usedSession.persistUserData&&t.User.save(this.sdk,this._usedSession.user),this.sdkSessionManagementServices.saveCurrentSession(),t.Session.notifySessionObserversOnMainSessionLogin(this._usedSession),e},o.prototype.createNextStage=function(t){return new l(this._ownerRequest,this._usedSession,t)},o}(r);t.SessionSetupExecuteControlFlowStage=u;var c=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.createResumableProcess=function(t){return new l(t)},x([t.Serializable("SessionSetupProcessRedirectsStageContination")],n)}(i),l=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.resume=function(e,n){var o=this;return t.prototype.resume.call(this,e,n).catch((function(t){return o.handleRedirectionError(t)}))},n.prototype.processRedirectRequest=function(e){var n=this;return t.prototype.processRedirectRequest.call(this,e).catch((function(t){return n.handleRedirectionError(t)}))},n.prototype.createContinuation=function(){return new c(this)},n.prototype.handleRedirectionError=function(t){return this.sdk.apiLevel>=10?(this.sdk.log(e.LogLevel.Debug,(function(){return"Error in redirect after session establishing call. Logging out session."})),this.sdk.logout().then((function(e){throw t}),(function(e){throw t}))):Promise.reject(t)},n}(s);t.SessionSetupRunRedirectsStage=l;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e}(a);t.SessionSetupResumableControlFlowRequest=p}((e=t.sdk||(t.sdk={})).core||(e.core={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.createResumableProcess=function(t){return new o(t)},x([e.Serializable("AuthenticateRequestExecuteControlFlowStageContinuation")],n)}(e.ExecuteControlFlowStageContinuation);e.AuthenticateRequestExecuteControlFlowStageContinuation=n;var o=function(o){function r(t,e,n,r){void 0===r&&(r=null);var i=o.call(this,t)||this;return i.opName="authenticate",e&&(i._usedSession=e,i._additionalParameters=n,i._policy=r),i}return F(r,o),r.generateLoginRequest=function(t,n){var o={collection_result:t.toJson(),push_token:n.sdkSessionManagementServices.lastReceivedPushToken};return n.policy&&(o.policy_request_id=n.policy),n.additionalParameters&&(o.params=n.additionalParameters),new e.SessionExchangeRequest("POST","auth/login",o)},r.prototype.generateControlFlowRequest=function(){var e=this;return this.sdk.promiseCollectionResult().then((function(n){return e.sdk.log(t.LogLevel.Debug,(function(){return"authenticate: Collection done; setting up request"})),r.generateLoginRequest(n,e)}))},r.prototype.postProcessControlFlowResult=function(e){return this.sdk.log(t.LogLevel.Debug,(function(){return"authenticate: marking user has logged in after succesful completion"})),this.user.markLoggedIn(),o.prototype.postProcessControlFlowResult.call(this,e)},r.prototype.createContinuation=function(){return new n(this.session)},r}(e.SessionSetupExecuteControlFlowStage);e.AuthenticateRequestExecuteControlFlowStage=o;var r=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.createResumableProcess=function(t){return new i(t)},x([e.Serializable("AuthenticateControlFlowRequestContinuation")],n)}(e.ResumableControlFlowRequestContinuation),i=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.createContinuation=function(){return new r(this)},n.prototype.run=function(t,n,r){return this.startWithStage(new o(this,new e.Session(this.rtContext.sdk,t),r,n))},n}(e.SessionSetupResumableControlFlowRequest);e.AuthenticateControlFlowRequest=i}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){!function(n){!function(o){var r;!function(t){t[t.Builtin=0]="Builtin",t[t.Placeholder=1]="Placeholder",t[t.Fido=2]="Fido",t[t.OTP=3]="OTP",t[t.Totp=4]="Totp",t[t.MobileApprove=5]="MobileApprove"}(r=o.AuthenticatorPrototype||(o.AuthenticatorPrototype={}));var i=function(){function i(e,n,o,i){this._session=e,this._authenticatorId=n;var s=n.match(/^placeholder_(.*)$/);s?(this._authenticatorPrototype=r.Placeholder,this._placeholderId=s[1],this._authetnicationMethodTypeName=o.placeholder_type):n.match(/^fido_(.*)$/)?(this._authenticatorPrototype=r.Fido,this._authetnicationMethodTypeName=o.authenticator_type):n.match(/^otp_(.*)$/)?(this._authenticatorPrototype=r.OTP,this._authetnicationMethodTypeName=this.getAuthenticatorIdForMultiStep()):n.match(/^totp_(.*)$/)?(this._authenticatorPrototype=r.Totp,this._authetnicationMethodTypeName=this.getAuthenticatorIdForMultiStep()):n.match(/^mobile_approve_(.*)$/)?(this._authenticatorPrototype=r.MobileApprove,this._authetnicationMethodTypeName=this.getAuthenticatorIdForMobileApprove()):(this._authenticatorPrototype=r.Builtin,this._authetnicationMethodTypeName=this._authenticatorId),this._authenticatorMethodConfig=o,this._serverReportedRegistrationStatus=i.status,this._expired=i.expired||!1,this._locked=i.locked||!1,o.recovery_escape&&(this._recoveryEscapeOption=new t.ts.mobile.sdk.impl.EscapeOptionImpl(o.recovery_escape))}return Object.defineProperty(i.prototype,"authenticationDriverDescriptor",{get:function(){var e=this.internalAuthenticationDriverDescriptor();if(!e)throw new t.ts.mobile.sdk.impl.AuthenticationErrorImpl(t.ts.mobile.sdk.AuthenticationErrorCode.Internal,"Unhandled authenticator: "+this.getAuthenticatorId());return e},enumerable:!0,configurable:!0}),i.prototype.internalAuthenticationDriverDescriptor=function(){switch(this._authenticatorPrototype){case r.Placeholder:return o.AuthenticatorDrivers.__placeholder;case r.Fido:return new o.AuthenticationDriverDescriptorFido(this._authenticatorMethodConfig.fido_policy);case r.Totp:case r.OTP:var t=this.getAuthenticatorIdForMultiStep();return o.AuthenticatorDrivers[t];case r.MobileApprove:var e=this.getAuthenticatorIdForMobileApprove();return o.AuthenticatorDrivers[e];case r.Builtin:default:return o.AuthenticatorDrivers[this.getAuthenticatorId()]}},i.prototype.getAuthenticatorIdForMobileApprove=function(){var t=this._authenticatorId.split("_");return t[0]+"_"+t[1]},i.prototype.getAuthenticatorIdForMultiStep=function(){return""+this._authenticatorId.split("_")[0]},i.prototype.getAuthenticatorId=function(){return this._authenticatorId},i.prototype.getType=function(){var t=n.Protocol.AuthTypeData[this._authetnicationMethodTypeName];return t&&"authTypeEnum"in t?t.authTypeEnum:e.AuthenticatorType.Generic},i.prototype.getName=function(){var t=n.Protocol.AuthTypeData[this._authetnicationMethodTypeName];return t&&t.authTypeName||"Generic"},i.prototype.getExpired=function(){return this._expired},i.prototype.getRegistered=function(){return this.getRegistrationStatus()==e.AuthenticatorRegistrationStatus.Registered},i.prototype.getRegistrationStatus=function(){return this._serverReportedRegistrationStatus!=n.Protocol.AuthenticationMethodStatus.Registered?e.AuthenticatorRegistrationStatus.Unregistered:this.authenticationDriverDescriptor.evaluateLocalRegistrationStatus(this._session)},i.prototype.getLocked=function(){return this._locked},i.prototype.getDefaultAuthenticator=function(){return this._session.user.defaultAuthId==this.getAuthenticatorId()},i.prototype.getSupportedOnDevice=function(){return this.internalAuthenticationDriverDescriptor()&&this.authenticationDriverDescriptor.isSupportedOnDevice(this._session)},i.prototype.getPlaceholderId=function(){return this._placeholderId},i.prototype.updateWithAuthenticatorState=function(t){this._expired=t.expired||!1,this._locked=t.locked||!1,this._serverReportedRegistrationStatus=t.status},i.prototype.getCredentialRecoveryEscapeOption=function(){return this._recoveryEscapeOption},i}();o.AuthenticatorDescriptionImpl=i}(n.authenticationdrivers||(n.authenticationdrivers={}))}(e.core||(e.core={}))}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o,r;r=t.sdk||(t.sdk={}),e=r.core||(r.core={}),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getEnabled=function(){return this.getSupportedOnDevice()},e}(e.authenticationdrivers.AuthenticatorDescriptionImpl),o=function(){function t(t,e,n,o){this._sdk=t,this._session=e,this._token=o||null,this._clientContext=n,this._uiHandler=this._sdk.currentUiHandler,this._uiContextImpl=new r.impl.UIContextImpl(t)}return t.prototype.getUiContext=function(){return this._uiContextImpl},t.prototype.run=function(){var t=this;return this._sdk.log(r.LogLevel.Debug,(function(){return"configuration: Starting session"})),this.queryConfigMenuFromServerAndFilter().then((function(e){return new Promise((function(n,o){t.kickStartSession(e),t._completeFn=n,t._rejectFn=o}))}))},t.prototype.registerAuthenticator=function(t,e){return this.requestAuthenticatorRegistrationChange(t,!0,e)},t.prototype.reregisterAuthenticator=function(t,e){return this.requestAuthenticatorRegistrationChange(t,!0,e)},t.prototype.setDefaultAuthenticator=function(t){var n=this;return this._sdk.log(r.LogLevel.Info,(function(){return"Configuration: Updating user default authenticator."})),new Promise((function(o,r){if(!n._session.anonymous){var i=n._session.user;i.updateDefaultAuthId(t.getDescription().getAuthenticatorId()),n._session.persistUserData&&e.User.save(n._sdk,i)}o(!0),n.updateManagedAuthenticators(n._authenticators)}))},t.prototype.unregisterAuthenticator=function(t,e){return this.requestAuthenticatorRegistrationChange(t,!1,e).then((function(t){return!0}))},t.prototype.requestRefreshAuthenticators=function(){var t=this;return this.queryConfigMenuFromServerAndFilter().then((function(e){return t.updateManagedAuthenticators(e),!0}),(function(t){throw r.impl.AuthenticationErrorImpl.ensureAuthenticationError(t)}))},t.prototype.finishSession=function(){if(!this._appSession)throw new r.impl.AuthenticationErrorImpl(r.AuthenticationErrorCode.Internal,"Attempt to finish a non started config session.");this._appSession.endSession(),this._appSession=null,this._completeFn(!0)},t.prototype.kickStartSession=function(t){this._appSession=this._uiHandler.createAuthenticationConfigurationSession(this._session.user.displayName),this._appSession?(this._appSession.startSession(this,null,this._clientContext),this.updateManagedAuthenticators(t)):this._rejectFn(r.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createAuthenticationConfigurationSession."))},t.prototype.updateManagedAuthenticators=function(t){if(!this._appSession)throw new r.impl.AuthenticationErrorImpl(r.AuthenticationErrorCode.Internal,"Attempt to work with a non started config session.");var e={};t.forEach((function(t){e[t.getDescription().getAuthenticatorId()]=t})),this._authenticators=t,this._authenticatorsByName=e,this._appSession.setAuthenticatorsList(t)},t.prototype.queryConfigMenuFromServerAndFilter=function(){var t=this;this._sdk.log(r.LogLevel.Debug,(function(){return"configuration: Initiating collection"}));var e=this._sdk.promiseCollectionResult();return r.util.wrapPromiseWithActivityIndicator(this._uiHandler,null,this._clientContext,e.then((function(e){t._sdk.log(r.LogLevel.Debug,(function(){return"configuration: Collection done; setting up request to query for config menu"}));var o=t._session.createConfigMenuFetchRequest(e,t._token);return t._sdk.log(r.LogLevel.Debug,(function(){return"configuration: Sending request to query approvals"})),t._session.performSessionExchange(o).then((function(e){var o=e.data&&"configuration"==e.data.type&&e.data;if(!o)throw new r.impl.AuthenticationErrorImpl(r.AuthenticationErrorCode.Internal,"Invalid configuration screen structure encountered.");return o.methods.map((function(e){var o=new n(t._session,e.type,e,e);return new r.impl.ConfigurableAuthenticatorImpl(o,e.options)})).filter((function(t){return t.getDescription().getSupportedOnDevice()}))}))})))},t.prototype.requestAuthenticatorRegistrationChange=function(t,n,o){var i=this;this._sdk.log(r.LogLevel.Debug,(function(){return"configuration: Authenticator "+t.getDescription().getName()+" request (un)registration "+n})),this._sdk.log(r.LogLevel.Debug,(function(){return"configuration: Initiating registration request promise"}));var s=this._sdk.promiseCollectionResult().then((function(e){return i._sdk.log(r.LogLevel.Debug,(function(){return"configuration: Collection done; setting up request"})),i._session.createAuthRegistrationRequest(e,t.getDescription().getAuthenticatorId(),n,i._token)}));return this._sdk.log(r.LogLevel.Debug,(function(){return"configuration: Initiating control flow"})),s.then((function(s){return i._session.startControlFlow(s,null,o||i._clientContext).then((function(o){var s=o.getInternalData(),a=!1;if(s&&s.methods&&s.methods.length&&(i._sdk.log(r.LogLevel.Debug,(function(){return"configuration: Processing updates."})),s.methods.forEach((function(t){var e=i._authenticatorsByName[t.type];e&&(e.getDescription().updateWithAuthenticatorState(t),a=!0)}))),a){if(!n&&t.getDescription().getDefaultAuthenticator()&&!i._session.anonymous){var u=i._session.user;u.updateDefaultAuthId(""),i._session.persistUserData&&e.User.save(i._sdk,u)}i.updateManagedAuthenticators(i._authenticators)}return o}),(function(t){throw r.impl.AuthenticationErrorImpl.ensureAuthenticationError(t)}))}))},t}(),e.AuthenticationConfigurationSessionProcessor=o}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e;!function(t){var e=function(){function t(t,e){this._sdk=t,this._user=e}return Object.defineProperty(t.prototype,"user",{get:function(){return this._user},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sdk",{get:function(){return this._sdk},enumerable:!0,configurable:!0}),t}();t.BaseSession=e;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e}(e);t.LocalSession=n}((e=t.sdk||(t.sdk={})).core||(e.core={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.createResumableProcess=function(t){return new r(t)},x([n.Serializable("BindRequestExecuteControlFlowStageContinuation")],e)}(n.ExecuteControlFlowStageContinuation),r=function(r){function i(t,e,n){var o=r.call(this,t)||this;return o.opName="bind",e&&(o._usedSession=e,o._additionalParameters=n),o}return F(i,r),i.prototype.generateControlFlowRequest=function(){var o=this;this.sdk.log(e.LogLevel.Debug,(function(){return o.opName+": Generating new device keys for "+(o.user.userId||o.user.idToken)}));var r=this.sdk.host.generateKeyPair(this.user.deviceSigningKeyTag,t.sdkhost.KeyClass.StdSigningKey,t.sdkhost.KeyBiometricProtectionMode.None,!0),i=this.sdk.host.generateKeyPair(this.user.deviceEncryptionKeyTag,t.sdkhost.KeyClass.StdEncryptionKey,t.sdkhost.KeyBiometricProtectionMode.None,!0);return Promise.all([r,i]).then((function(t){var r=t[0],i=t[1];return o.sdk.log(e.LogLevel.Debug,(function(){return o.opName+": key generation done"})),o.sdk.promiseCollectionResult().then((function(t){o.sdk.log(e.LogLevel.Debug,(function(){return o.opName+": Collection result completed, Initiating request promise"}));var s={collection_result:t.toJson(),public_key:r.publicKeyToJson(),encryption_public_key:i.publicKeyToJson(),push_token:o.sdkSessionManagementServices.lastReceivedPushToken};return o.additionalParameters&&(s.params=o.additionalParameters),new n.SessionExchangeRequest("POST","auth/bind",s)}))}))},i.prototype.postProcessControlFlowResult=function(t){var n=this,o=this.sdk.currentSession&&this.sdk.currentSession.deviceId();return this.sdk.currentSession&&o&&(this.sdk.log(e.LogLevel.Debug,(function(){return n.opName+": binding device to user after succesful completion"})),this.sdk.currentSession.user.bindDeviceToUser(o)),r.prototype.postProcessControlFlowResult.call(this,t)},i.prototype.createContinuation=function(){return new o(this.session)},i}(n.SessionSetupExecuteControlFlowStage);n.BindRequestExecuteControlFlowStage=r;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.createResumableProcess=function(t){return new s(t)},x([n.Serializable("BindControlFlowRequestContinuation")],e)}(n.ResumableControlFlowRequestContinuation),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.createContinuation=function(){return new i(this)},e.prototype.run=function(t,e){return this.startWithStage(new r(this,new n.Session(this.rtContext.sdk,t),e))},e}(n.SessionSetupResumableControlFlowRequest);n.BindControlFlowRequest=s}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o;e=(o=t.sdk||(t.sdk={})).core||(o.core={}),n=function(){function t(t,e){if(this.sdk=t,this.ec=new elliptic.ec("secp256k1"),e&&(this.sessionId=e.session_id,this.aesKey=this.base64ToJsArray(e.key),!this.isReady()))throw new o.impl.AuthenticationErrorImpl(o.AuthenticationErrorCode.Internal,"Can't deserialize crypto session")}return t.prototype.getExchangeRequestHeader=function(){if(!this.kp){var t={entropy:this.sdk.host.generateRandomHexString(192),entropyEnc:"hex"};this.kp=this.ec.genKeyPair(t)}return{type:"key_exchange",scheme:2,y:this.jsArrayToBase64(this.kp.getPublic().encode())}},t.prototype.processExchangeResponseHeader=function(t){if(2!=t.scheme)throw"Unsupported crypto scheme "+t.scheme;this.sessionId=t.crypto_session_id;var e=this.kp.derive(this.ec.keyFromPublic(atob(t.y)).getPublic()),n=sha256.create();n.update(e.toArray("be",32)),this.aesKey=n.digest()},t.prototype.isReady=function(){return!(!this.aesKey||!this.sessionId)},t.prototype.decryptResponse=function(t){var e=null;if(t.headers.forEach((function(t){"encryption"==t.type&&(e=t)})),e){var n=this.base64ToJsArray(e.iv),o=new aesjs.ModeOfOperation.cbc(this.aesKey,n),r=this.base64ToJsArray(t.data),i=o.decrypt(r),s=aesjs.utils.utf8.fromBytes(i);s=this.pkcs7Unpad(s),t.data=JSON.parse(s)}return t},t.prototype.encryptRequest=function(t){var e=this,n=this.sdk.host.generateRandomHexString(32),r=aesjs.utils.hex.toBytes(n),i={type:"encryption",iv:o.util.hexToBase64(n),crypto_session_id:this.sessionId},s=t.headers.map((function(t){return e.encryptStringToBase64(JSON.stringify(t),r)})),a=JSON.stringify(t.data),u=this.encryptStringToBase64(a,r);t.headers=[i],t.enc_headers=s,t.data=u},t.prototype.encryptStringToBase64=function(t,e){var n=new aesjs.ModeOfOperation.cbc(this.aesKey,e),o=aesjs.utils.utf8.toBytes(t),r=this.pkcs7Pad(o),i=n.encrypt(r);return this.jsArrayToBase64(i)},t.prototype.toJson=function(){return{scheme:2,session_id:this.sessionId,key:this.jsArrayToBase64(this.aesKey)}},t.fromJson=function(e,n){return new t(e,n)},t.prototype.jsArrayToBase64=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)},t.prototype.base64ToJsArray=function(t){for(var e=atob(t),n=[],o=0;o<e.length;o++)n.push(e.charCodeAt(o));return n},t.prototype.pkcs7Pad=function(t){var e=16-t.length%16,n=new Uint8Array(t.length+e);n.set(t,0);for(var o=0;o<e;o++)n[t.length+o]=e;return n},t.prototype.pkcs7Unpad=function(t){var e=t.charCodeAt(t.length-1);return t.slice(0,-e)},t}(),e.Scheme2CryptoSession=n}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e;!function(t){var n;!function(t){t[t.FinishSession=0]="FinishSession",t[t.CurrentDeviceDeleted=1]="CurrentDeviceDeleted"}(n=t.DeviceManagementSessionProcessorReturnReason||(t.DeviceManagementSessionProcessorReturnReason={}));var o=function(){function t(t,n,o,r){this._sdk=t,this._session=n,this._clientContext=o,this._token=r||null,this._uiHandler=this._sdk.currentUiHandler,this._uiContextImpl=new e.impl.UIContextImpl(t)}return t.prototype.getUiContext=function(){return this._uiContextImpl},t.prototype.run=function(){var t=this;return this._sdk.log(e.LogLevel.Debug,(function(){return"device management: Starting session"})),this.queryDevicesFromServer().then((function(e){return new Promise((function(n,o){t._completeFn=n,t._rejectFn=o,t.kickStartSession(e)}))}))},t.prototype.removeDevice=function(t,n){var o=this;return new Promise((function(r,i){if(t.getInfo().getIsCurrent())throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"Illegal attempt to delete the current device using 'DeviceManagementSessionServices.removeDevice'. The current device must only be deleted using DeviceManagementSessionServices.removeCurrentDeviceAndFinishSession.");var s=o.ensureValidDevice(t);o.performDeviceAction(s,e.DeviceManagementAction.Remove,n,null).then((function(t){return o._sdk.log(e.LogLevel.Debug,(function(){return"device management: Updating device state locally"})),s.getInfo().setStatus(e.DeviceStatus.Removed),o.updateManagedDevices(o._managedDevices.filter((function(t){return t!=s}))),!0})).then(r,i)}))},t.prototype.removeCurrentDeviceAndFinishSession=function(t){var o,r=this;return this._appSession?(o=this._appSession,new Promise((function(i,s){r._sdk.log(e.LogLevel.Debug,(function(){return"device management: Start removing current device"}));var a=r._managedDevices.filter((function(t){return t.getInfo().getIsCurrent()}));if(1!=a.length)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Couldn't locate current device in device list.");var u=a[0];r.performDeviceAction(u,e.DeviceManagementAction.Remove,t,null).then((function(t){return r._sdk.log(e.LogLevel.Debug,(function(){return"device management: Updating device state locally"})),u.getInfo().setStatus(e.DeviceStatus.Removed),!0})).then((function(){i(!0),o.endSession(),r._appSession=null,r._completeFn(n.CurrentDeviceDeleted)})).catch(s)}))):Promise.reject(new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to finish a non started device management session."))},t.prototype.renameDevice=function(t,n,o){var r=this;return new Promise((function(i,s){var a=r.ensureValidDevice(t);return r.performDeviceAction(a,e.DeviceManagementAction.Rename,o,{name:n}).then((function(t){return r._sdk.log(e.LogLevel.Debug,(function(){return"device management: Updating device state locally"})),a.getInfo().setName(n),r.updateManagedDevices(r._managedDevices),!0})).then(i,s)}))},t.prototype.requestRefreshDevices=function(){var t=this;return this.queryDevicesFromServer().then((function(e){return t.updateManagedDevices(e),!0}),(function(t){throw e.impl.AuthenticationErrorImpl.ensureAuthenticationError(t)}))},t.prototype.finishSession=function(){if(!this._appSession)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to finish a non started device management session.");this._appSession.endSession(),this._appSession=null,this._completeFn(n.FinishSession)},t.prototype.kickStartSession=function(t){this._appSession=this._sdk.currentUiHandler.createDeviceManagementSession(this._session.user.displayName),this._appSession?(this.updateManagedDevices(t),this._appSession.startSession(this,null,this._clientContext)):this._rejectFn(e.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createDeviceManagementSession."))},t.prototype.updateManagedDevices=function(t){if(!this._appSession)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to update device list for a non started device management session.");this._managedDevices=t,this._appSession.setSessionDevicesList(t)},t.prototype.queryDevicesFromServer=function(){var t=this;this._sdk.log(e.LogLevel.Debug,(function(){return"device management: Initiating collection"}));var n=this._sdk.promiseCollectionResult();return e.util.wrapPromiseWithActivityIndicator(this._uiHandler,null,this._clientContext,n.then((function(n){t._sdk.log(e.LogLevel.Debug,(function(){return"device management: Collection done; setting up request to query devices"}));var o=t._session.createDevicesFetchRequest(n,t._token);return t._sdk.log(e.LogLevel.Debug,(function(){return"device management: Sending request to query devices"})),t._session.startControlFlow(o,null,t._clientContext).then((function(n){return t._uiHandler.endActivityIndicator(null,t._clientContext),n.getInternalData().devices.map((function(n){var o=new e.impl.ManagedDeviceImpl(n);return o.getInfo().getDeviecId()==t._session.user.deviceId&&o.getInfo().forceCurrent(),o}))}))})))},t.prototype.performDeviceAction=function(t,n,o,r){var i,s=this,a=o||this._clientContext;switch(n){case e.DeviceManagementAction.Remove:i="remove";break;case e.DeviceManagementAction.Rename:i="name";break;default:return Promise.reject(new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid device action specified "+n))}this._sdk.log(e.LogLevel.Debug,(function(){return"devices: action "+i+" on "+t.getInfo().getDeviecId()})),this._sdk.log(e.LogLevel.Debug,(function(){return"devices: Initiating collection"}));var u=this._sdk.promiseCollectionResult();return e.util.wrapPromiseWithActivityIndicator(this._uiHandler,null,a,u.then((function(n){s._sdk.log(e.LogLevel.Debug,(function(){return"devices: Collection done; setting up request"}));var o=s._session.createDeviceActionRequest(n,s._token,t.getInfo().getDeviecId(),i,r);return s._sdk.log(e.LogLevel.Debug,(function(){return"devices: Sending request"})),s._session.startControlFlow(o,null,a).then((function(t){return t.getInternalData()}))})).catch((function(t){throw e.impl.AuthenticationErrorImpl.ensureAuthenticationError(t)})))},t.prototype.ensureValidDevice=function(t){var n=this._managedDevices.indexOf(t);if(n<0)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"Attempt to perform a device action on a device not originally included in device management session.");return this._managedDevices[n]},t}();t.DeviceManagementSessionProcessor=o}((e=t.sdk||(t.sdk={})).core||(e.core={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){function e(t){this._name=t,this._extensions=[],e._extensionPoints[t]=this}return e.prototype.extend=function(t){this._extensions.push(t)},e.prototype.forEach=function(t){this._extensions.forEach(t)},e.prototype.first=function(t){var e=null;return this._extensions.forEach((function(n){!e&&t(n)&&(e=n)})),e},e.prototype.firstNonNull=function(t){var e=null;return this._extensions.forEach((function(n){e||(e=t(n))})),e},e.byName=function(e){var n=this._extensionPoints[e];if(!n)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid extension point requested: "+e);return n},e._extensionPoints={},e}();e.ExtensionPoint=n}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.createResumableProcess=function(t){return new o(t)},x([e.Serializable("InvokeAnonymousPolicyRequestExecuteControlFlowStageContinuation")],n)}(e.ExecuteControlFlowStageContinuation);e.InvokeAnonymousPolicyRequestExecuteControlFlowStageContinuation=n;var o=function(o){function r(t,e,n,r){void 0===r&&(r=null);var i=o.call(this,t)||this;return i.opName="invokeAnonymousPolicy",e&&(i._usedSession=e,i._additionalParameters=n,i._policy=r),i}return F(r,o),r.prototype.generateControlFlowRequest=function(){var n=this;return this.sdk.promiseCollectionResult().then((function(o){n.sdk.log(t.LogLevel.Debug,(function(){return"authenticate: Collection done; setting up request"}));var r={collection_result:o.toJson(),push_token:n.sdkSessionManagementServices.lastReceivedPushToken};return n.policy&&(r.policy_request_id=n.policy),n.additionalParameters&&(r.params=n.additionalParameters),new e.SessionExchangeRequest("POST","auth/anonymous_invoke",r)}))},r.prototype.createContinuation=function(){return new n(this.session)},r}(e.ExecuteControlFlowStage);e.InvokeAnonymousPolicyRequestExecuteControlFlowStage=o;var r=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.createResumableProcess=function(t){return new i(t)},x([e.Serializable("InvokeAnonymousPolicyControlFlowRequestContinuation")],n)}(e.ResumableControlFlowRequestContinuation),i=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.createContinuation=function(){return new r(this)},n.prototype.run=function(t,n){return this.startWithStage(new o(this,e.Session.createAnonymousSession(this.rtContext.sdk),n,t))},n}(e.ResumableControlFlowRequest);e.InvokeAnonymousPolicyControlFlowRequest=i}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.createResumableProcess=function(t){return new o(t)},x([e.Serializable("InvokePolicyRequestExecuteControlFlowStageContinuation")],n)}(e.ExecuteControlFlowStageContinuation),o=function(o){function r(t,e,n,r){void 0===r&&(r=null);var i=o.call(this,t)||this;return i.opName="invokePolicy",e&&(i._usedSession=e,i._additionalParameters=n,i._policy=r),i}return F(r,o),r.prototype.generateControlFlowRequest=function(){var n=this;return this.sdk.promiseCollectionResult().then((function(o){return n.sdk.log(t.LogLevel.Debug,(function(){return"invokePolicy: Collection done; setting up request"})),e.AuthenticateRequestExecuteControlFlowStage.generateLoginRequest(o,n)}))},r.prototype.restoreParametersFromContinuation=function(e){if(!this.sdk.currentSession)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to resume invokePolicy without an existing session.");o.prototype.restoreParametersFromContinuation.call(this,e);var n=this._usedSession;this._usedSession=this.sdk.currentSession,this.sdk.currentSession.updateFromContinuedSession(n)},r.prototype.createContinuation=function(){return new n(this.session)},r}(e.ExecuteControlFlowStage);e.InvokePolicyRequestControlFlowStage=o;var r=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.createResumableProcess=function(t){return new i(t)},x([e.Serializable("InvokePolicyControlFlowRequestContinuation")],n)}(e.ResumableControlFlowRequestContinuation),i=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.createContinuation=function(){return new r(this)},n.prototype.run=function(e,n){return this.rtContext.sdk.currentSession?this.startWithStage(new o(this,this.rtContext.sdk.currentSession,n,e)):Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to resume invokePolicy without an existing session."))},n}(e.ResumableControlFlowRequest);e.InvokePolicyControlFlowRequest=i}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o;e=(o=t.sdk||(t.sdk={})).core||(o.core={}),n=function(){function t(){}return t.installOnSdk=function(e){e.setExternalLogger(new t)},t.prototype.log=function(t,e,n){var r="["+e+"] "+n;switch(t){case o.LogLevel.Debug:console.log(r);break;case o.LogLevel.Info:console.info(r);break;case o.LogLevel.Warning:console.warn(r);break;case o.LogLevel.Error:case o.LogLevel.Critical:console.error(r)}},t}(),e.JsConsoleLogger=n}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e;!function(n){var o,r;!function(t){t.Registering="registering",t.Registered="registered",t.Unregistered="unregistered"}(o=n.LocalEnrollmentStatus||(n.LocalEnrollmentStatus={})),function(t){t.None="none",t.Validated="validated",t.Invalidated="invalidated"}(r=n.LocalEnrollmentValidationStatus||(n.LocalEnrollmentValidationStatus={}));var i=function(){function t(t,e){this.pbkdf_iterations_count=t,this.pbkdf_key_size=e}return t.prototype.duplicate=function(){return new t(this.pbkdf_iterations_count,this.pbkdf_key_size)},t.prototype.toRecordFormat=function(){return{pbkdf_iterations_count:this.pbkdf_iterations_count,pbkdf_key_size:this.pbkdf_key_size}},t}();n.ClientCryptoSettingsRecordFormat=i;var s=function(){function t(t,e,n,o,r,i,s){this.salt=t,this.status=e,this.version=n,this.authenticatorId=o,this.cryptoSettings=r,this.validationStatus=i,this.publicKeyHash=s}return t.prototype.duplicate=function(){var e=null;this.cryptoSettings&&(e=this.cryptoSettings.duplicate());var n=new t(this.salt,this.status,this.version,this.authenticatorId,e,this.validationStatus,this.publicKeyHash);return n.keyMeterial=this.keyMeterial,this.authenticatorConfig&&(n.authenticatorConfig=JSON.parse(JSON.stringify(this.authenticatorConfig))),n},t.prototype.toRecordFormat=function(){var t=null;return this.cryptoSettings&&(t=this.cryptoSettings.toRecordFormat()),{salt:this.salt,status:this.status,version:this.version,authenticatorId:this.authenticatorId,cryptoSettings:t,validationStatus:this.validationStatus,publicKeyHash:this.publicKeyHash,keyMeterial:this.keyMeterial,authenticatorConfig:this.authenticatorConfig}},t}();n.LocalEnrollmentRecordFormat=s;var a=function(){function a(){}return Object.defineProperty(a.prototype,"salt",{get:function(){return this._record.salt},set:function(t){this._record.salt=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"status",{get:function(){return this._record.status||o.Unregistered},set:function(t){this._record.status=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){return this._record.version},set:function(t){this._record.version=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"authenticatorId",{get:function(){return this._record.authenticatorId},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"validationStatus",{get:function(){return this._record.validationStatus},set:function(t){this._record.validationStatus=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"publicKeyHash",{get:function(){return this._record.publicKeyHash},set:function(t){this._record.publicKeyHash=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cryptoSettings",{get:function(){return this._record.cryptoSettings?e.ClientCryptoSettings.create(this._record.cryptoSettings.pbkdf_iterations_count):null},set:function(t){this._record.cryptoSettings=t?new i(t.getLocalEnrollmentKeyIterationCount(),t.getLocalEnrollmentKeySizeInBytes()):null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"keyMaterial",{get:function(){return this._record.keyMeterial},set:function(t){this._record.keyMeterial=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"authenticatorConfig",{get:function(){return this._record.authenticatorConfig},set:function(t){this._record.authenticatorConfig=t},enumerable:!0,configurable:!0}),a.prototype.setFingerprintDbSnapshot=function(t){this._record.fingerprintDbSsnapshot=t},a.enrollmentWithRecord=function(t){var e=new a,n=null;return t.cryptoSettings&&(n=new i(t.cryptoSettings.pbkdf_iterations_count,t.cryptoSettings.pbkdf_key_size)),e._record=new s(t.salt,t.status,t.version,t.authenticatorId,n,t.validationStatus,t.publicKeyHash),e.authenticatorConfig=t.authenticatorConfig,e.keyMaterial=t.keyMeterial,e},a.migrateFPEnrollmentsToDeviceBiometricsIfNeeded=function(o,r,i){var s=i.host.queryHostInfo(t.sdkhost.HostInformationKey.DeviceBiometricsSupported);if(s&&"false"!=s&&"true"==i.host.queryHostInfo(t.sdkhost.HostInformationKey.DeviceBiometricsFPContinuation)){var a=o[n.authenticationdrivers.AuthenticationDriverDescriptorFingerprint.authenticatorName];a&&(i.log(e.LogLevel.Debug,(function(){return"migrating Fingerprint enrollment to DeviceBiometrics for user "+r.displayName})),a.version="v0_"+a.version,a.authenticatorId=n.authenticationdrivers.AuthenticationDriverDescriptorDeviceBiometrics.authenticatorName,delete o[n.authenticationdrivers.AuthenticationDriverDescriptorFingerprint.authenticatorName],o[n.authenticationdrivers.AuthenticationDriverDescriptorDeviceBiometrics.authenticatorName]=a,i.host.writeStorageKey(this.storageKeyForEnrollmentsForUser(r.guid),o))}return o},a.enrollmentsForUser=function(t,n){var o={},r=n.host.readStorageKey(this.storageKeyForEnrollmentsForUser(t.guid));for(var i in r=a.migrateFPEnrollmentsToDeviceBiometricsIfNeeded(r,t,n),n.log(e.LogLevel.Debug,(function(){return"Got db "+JSON.stringify(r)})),r)n.log(e.LogLevel.Debug,(function(){return"Got db wEnrollmentKey"+i})),o[i]=a.enrollmentWithRecord(r[i]);return o},a.deleteEnrollmentsForUser=function(t,e){e.host.deleteStorageKey(this.storageKeyForEnrollmentsForUser(t.guid))},a.createNew=function(t,e,n,i,u){var c=new s(n,o.Unregistered,e,t,null,r.None,u),l=new a;return l._record=c,l},a.prototype.duplicate=function(){var t=new a;return t._record=this._record.duplicate(),t},a.updateEnrollmentsForUser=function(t,e,n){var o={};for(var r in e)o[r]=e[r]._record.toRecordFormat();n.host.writeStorageKey(this.storageKeyForEnrollmentsForUser(t.guid),o)},a.invalidateLocalRegistrationStatusAndNotifyUIHandler=function(t,n){return new Promise((function(o,i){if(!t)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"No user interaction session provider!");t._sdk.log(e.LogLevel.Info,(function(){return"Marking authenticator as invalidated and invoking UI Handler"}));var s=t._session.user.localEnrollments[n.getAuthenticatorId()];s.validationStatus=r.Invalidated,t._session.user.updateEnrollmentRecord(s),t._uiHandler.localAuthenticatorInvalidated(n,t._clientContext).then((function(t){o(t)}))}))},a.storageKeyForEnrollmentsForUser=function(t){return new n.TarsusKeyPath("per_user",t.toString(),"local_enrollments")},a.listInvalidatedLocalEnrollments=function(t){var e,n=new Array;for(var o in t.user.localEnrollments)(e=t.user.localEnrollments[o]).validationStatus==r.Invalidated&&n.push(e);return n},a}();n.LocalEnrollment=a}((e=t.sdk||(t.sdk={})).core||(e.core={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){function n(t){return void 0!==t.ref}e.isRefType=n,e.unwrap=function(e){if(n(e))throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"style property "+e+" is not the right format");return e}}(e.Protocol||(e.Protocol={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){t.TARSUS_EXTENSION_POINT_NAME_MESSAGE_FILTERS="com.ts.mobile.sdk.core.messageFilters",t.TARSUS_EXTENSION_POINT_NAME_SESSION_OBSERVERS="com.ts.mobile.sdk.core.sessionObservers",t.TARSUS_EXTENSION_POINT_NAME_PLACEHOLDER_EXTENSION="com.ts.mobile.sdk.core.placeholderExtension",t.TARSUS_EXTENSION_POINT_NAME_FORMS_EXTENSION="com.ts.mobile.plugins.form.settings",t.TARSUS_EXTENSION_POINT_NAME_IDP_LOGIN_PROVIDER="com.ts.mobile.plugins.providers.idp",t.TARSUS_EXTENSION_POINT_NAME_KYC="com.ts.mobile.plugins.kyc"}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o;o=t.sdk||(t.sdk={}),e=o.core||(o.core={}),n=function(){function t(t){this._sdk=t}return Object.defineProperty(t.prototype,"sdk",{get:function(){return this._sdk},enumerable:!0,configurable:!0}),t.prototype.createClientStringsRequest=function(t){return new e.PublicExchangeRequest("GET","resources/localization?locale="+t+"&v=1",{})},t.prototype.performRequest=function(t){var n=this;return this._sdk.log(o.LogLevel.Debug,(function(){return"Preprocess request "+JSON.stringify(t)})),this.createTransportRequestForPublicExchangeRequest(t).then((function(t){return n.prepareTransportRequest(t).then((function(t){return n._sdk.log(o.LogLevel.Debug,(function(){return"Will send request "+JSON.stringify(t)})),n._sdk.transportProvider.sendRequest(t).then((function(t){n._sdk.log(o.LogLevel.Debug,(function(){return"Got response "+JSON.stringify(t)}));try{var r=JSON.parse(t.getBodyJson())}catch(e){throw o.impl.AuthenticationErrorImpl.errorForTransportResponse(t)}var i=r.data&&r.data.state==e.Protocol.AuthSessionState.Rejected;if(200==t.getStatus()&&!r.error_code||401==t.getStatus()&&i)return r;throw 200==t.getStatus()||r.error_code?o.impl.AuthenticationErrorImpl.errorForServerResponse(r):o.impl.AuthenticationErrorImpl.errorForTransportResponse(t)}))}))}))},t.prototype.createTransportRequestForPublicExchangeRequest=function(t){var e=this;return new Promise((function(n,r){var i={headers:t.envelopeHeaders,data:t.body},s=new o.TransportRequest;s.setMethod(t.method);var a=e._sdk.connectionSettings.getRealm()||"",u=a.length?"/"+a:"";s.setUrl(""+e._sdk.connectionSettings.getServerAddress()+u+"/api/v2/"+t.serverRelativeUrl),s.setBodyJson(JSON.stringify(i)),n(s)}))},t.prototype.prepareTransportRequest=function(t){var e={aid:this._sdk.connectionSettings.getAppId()};t.setUrl(this.urlWithConcatenatedQuery(t.getUrl(),e));var n=t.getHeaders()||[];return t.setHeaders(n),Promise.resolve(t)},t.prototype.urlWithConcatenatedQuery=function(t,e){var n="";return t.indexOf("?")<0?n="?":"&"!=t[t.length-1]&&(n="&"),t+n+Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])})).join("&")},t}(),e.PublicNetworkRequest=n}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.prototype.getUrl=function(){return this._url},t.prototype.setUrl=function(t){this._url=t},t.prototype.getMethod=function(){return this._method},t.prototype.setMethod=function(t){this._method=t},t.prototype.getHeaders=function(){return this._headers},t.prototype.setHeaders=function(t){this._headers=t},t.prototype.getBodyJson=function(){return this._bodyJson},t.prototype.setBodyJson=function(t){this._bodyJson=t},t.__tarsusInterfaceName="TransportRequest",t}();t.TransportRequest=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e;!function(n){var o=function(o){function s(t,e){var n=o.call(this,t,e)||this;n._lockCount=0,n._invalidated=!1,n._persistUserData=t.currentPersistUserData;var r=t.host.deviceSupportsCryptoBind()?e&&e.deviceBound:e&&e.hasLoggedIn;return n._deviceId=r&&e.deviceId||null,n}return F(s,o),Object.defineProperty(s.prototype,"anonymous",{get:function(){return this._anonymous},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"invalidated",{get:function(){return this._invalidated},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"persistUserData",{get:function(){return this._persistUserData},enumerable:!0,configurable:!0}),s.createAnonymousSession=function(t){var e=new s(t,n.User.createEphemeralUser(t));return e._anonymous=!0,e},s.prototype.createLogoutRequest=function(){return new n.SessionExchangeRequest("POST","auth/logout",{})},s.prototype.createApprovalsFetchRequest=function(t){var e={collection_result:t.toJson()};return new n.SessionExchangeRequest("POST","approvals/actions/fetch",e)},s.prototype.createApprovalReplyRequest=function(t,o,r){var i={collection_result:t.toJson(),status:r==e.MobileApprovalStatus.Approved?n.Protocol.ServerResponseDataApprovalsApprovalStatus.Approved:n.Protocol.ServerResponseDataApprovalsApprovalStatus.Denied};return new n.SessionExchangeRequest("POST","auth/approve?apid="+o,i)},s.prototype.createSingleDeviceFetchRequest=function(t,e,o){var r={collection_result:t.toJson(),device_id:o};return e&&(r.token=e),new n.SessionExchangeRequest("POST","mobile/device",r)},s.prototype.createDevicesFetchRequest=function(t,e){var o={collection_result:t.toJson()};return e&&(o.token=e),new n.SessionExchangeRequest("POST","authenticate/physical/devices",o)},s.prototype.createDeviceActionRequest=function(t,e,o,r,i){var s={collection_result:t.toJson(),device_id:o};return e&&(s.token=e),i&&Object.keys(i).forEach((function(t){s[t]=i[t]})),new n.SessionExchangeRequest("POST","authenticate/physical/device/action?action="+r,s)},s.prototype.createConfigMenuFetchRequest=function(t,e){var o={collection_result:t.toJson()};return e&&(o.token=e),new n.SessionExchangeRequest("POST","auth/authenticator/config_menu",o)},s.prototype.createAuthRegistrationRequest=function(t,e,o,r){var i={collection_result:t.toJson(),type:e};return r&&(i.token=r),new n.SessionExchangeRequest("POST","auth/authenticator/"+(o?"register":"unregister"),i)},s.prototype.startControlFlow=function(t,e,o){var r=new n.ControlFlowProcessor(this.sdk,this,o,e);return this.runWithSessionControlFlow(r,(function(e){return e.startControlFlow(t)}))},s.prototype.continueControlFlow=function(t,e,o,r){var i=new n.ControlFlowProcessorRuntimeContext;i.cflowRequestContext=o,i.clientContext=r,i.sdk=this.sdk,i.session=this,i.uiHandler=this.sdk.currentUiHandler;var s=t.createResumableProcess(i);return this.runWithSessionControlFlow(s,(function(n){return n.resume(t,e)}))},s.prototype.createCurrentControlFlowContinuation=function(){if(!this._currentControlFlow)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to create continuation for a session without an active control flow");return this._currentControlFlow.createContinuation()},s.prototype.runWithSessionControlFlow=function(t,o){var r=this;return new Promise((function(i,s){if(r._currentControlFlow)throw r.sdk.log(e.LogLevel.Error,(function(){return"Attempt to start a control flow while an existing control flow ("+r._currentControlFlow.challenge+") is running."})),new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"Attempt to start a control flow while an existing control flow ("+r._currentControlFlow.challenge+") is running.");r._currentControlFlow=t,r.sdk.log(e.LogLevel.Debug,(function(){return"Start control flow"})),n.authenticationdrivers.SimpleAuthenticationDriverDescriptor.refreshInvalidatedAuthenticatorsEnrollments(r).catch((function(t){r.sdk.log(e.LogLevel.Warning,(function(){return"Could not refresh invalidated authenticators enrollments: "+t}))})).then((function(){return o(t)})).finally((function(){r.sdk.log(e.LogLevel.Debug,(function(){return"Done control flow "+t.challenge})),r._currentControlFlow=null})).then(i,s)}))},s.prototype.getCurrentUserInteractionSessionProvider=function(){return this._currentControlFlow},s.prototype.generateInvalidatedAuthenticatorsHeadersIfNeeded=function(){for(var t,o=new Array,r=0,i=n.LocalEnrollment.listInvalidatedLocalEnrollments(this);r<i.length;r++)t=i[r],this._sdk.log(e.LogLevel.Debug,(function(){return"Found invalidated authenticator: "+t.authenticatorId})),t.publicKeyHash&&o.push({type:"registration_invalidated",method:t.authenticatorId,registration_id:{type:"public_key_hash",hash:t.publicKeyHash}});return o},Object.defineProperty(s.prototype,"deviceSigningKeyPair",{get:function(){if(!this._deviceKeyPair&&!this._anonymous&&this._sdk.host.deviceSupportsCryptoBind()&&(this._deviceKeyPair=this._sdk.host.getKeyPair(this._user.deviceSigningKeyTag,t.sdkhost.KeyClass.StdSigningKey,t.sdkhost.KeyBiometricProtectionMode.None),!this._deviceKeyPair))throw this._sdk.log(e.LogLevel.Error,(function(){return"Could not load device signing key pair for this device."})),new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.InvalidDeviceBinding,"Invalid device signature - could not load device signing key pair.");return this._deviceKeyPair},enumerable:!0,configurable:!0}),s.prototype.performSessionExchange=function(t){return this.performSessionExchangeInternal(t,!0,!0,!0)},s.prototype.performSessionExchangeInternal=function(o,r,i,s){var a=this;return this._invalidated?(this._sdk.log(e.LogLevel.Error,(function(){return"Attempt to execute a session exchange from invalidated session."})),Promise.reject(new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.SessionRequired,"Session was invalidated by server."))):this.connectionSettings().getCryptoMode()==e.ConnectionCryptoMode.Full&&!this._currentCryptoSession&&s?this.performSessionExchangeInternal(new n.SessionExchangeRequest("POST","auth/key_exchange",{r:"Hello Encrypted World"}),r,i).then((function(t){return a.performSessionExchangeInternal(o,r)})):(this._sdk.log(e.LogLevel.Debug,(function(){return"Preprocess request "+JSON.stringify(o)})),this.preprocessSessionExchangeRequest(o).then((function(s){return a.promisePossiblyEncryptedTransportRequest(s).then((function(s){return a.preprocessTransportRequest(s).then((function(s){return a._sdk.log(e.LogLevel.Debug,(function(){return"Will send request "+JSON.stringify(s)})),a._sdk.transportProvider.sendRequest(s).then((function(s){a._sdk.log(e.LogLevel.Debug,(function(){return"Got response "+JSON.stringify(s)}));try{var u=JSON.parse(s.getBodyJson())}catch(t){throw e.impl.AuthenticationErrorImpl.errorForTransportResponse(s)}a.postprocessResponse(u);var c=(u=a.possiblyDecryptResponse(u)).data&&u.data.state==n.Protocol.AuthSessionState.Rejected;if(200==s.getStatus()&&!u.error_code||401==s.getStatus()&&c)return u;if(200==s.getStatus()||u.error_code){if(u.error_code==n.Protocol.ServerResponseErrorCode.EncryptionStateError&&i)return a._currentCryptoSession=null,a.performSessionExchangeInternal(o,r,!1,!0);if(u.error_code==n.Protocol.ServerResponseErrorCode.DeviceKeyExpired){if(a._sdk.log(e.LogLevel.Debug,(function(){return"DeviceKeyRoll: device key expired rejection received"})),r){var l=a._sdk.host.generateRandomHexString(24);return a._sdk.host.generateKeyPair(a._user.getPendingDeviceSigningKeyTag(l),t.sdkhost.KeyClass.StdSigningKey,t.sdkhost.KeyBiometricProtectionMode.None,!0).then((function(t){var n=void 0;return a.verifyDevicePublicKey(u.data.key_id)||(a._sdk.log(e.LogLevel.Warning,(function(){return"DeviceKeyRoll: server response device public key hash doesn't match."})),n="Device public key hash and server response public key hash do not match."),a._deviceKeyRollData={deviceKeyPair:t,salt:l,message:n},a.performSessionExchangeInternal(o,!1,!0,!0)}))}if(a._sdk.log(e.LogLevel.Warning,(function(){return"DeviceKeyRoll: already attempted to roll device key and failed. Aborting second attempt."})),a._deviceKeyRollData)try{a._sdk.host.deleteKeyPair(a._user.getPendingDeviceSigningKeyTag(a._deviceKeyRollData.salt))}catch(t){a._sdk.log(e.LogLevel.Warning,(function(){return"DeviceKeyRoll: Can't delete pending device signing key."}))}}else u.error_code==n.Protocol.ServerResponseErrorCode.UserIdTokenExpired&&n.User.resetUserIdTokenForSession(a);throw e.impl.AuthenticationErrorImpl.errorForServerResponse(u)}throw e.impl.AuthenticationErrorImpl.errorForTransportResponse(s)}))}))}))})))},s.prototype.cancelCurrentControlFlow=function(){this._currentControlFlow?this._currentControlFlow.cancelFlow():this._sdk.log(e.LogLevel.Error,(function(){return"No current control flow."}))},s.prototype.deviceId=function(){return this._deviceId},s.prototype.preprocessTransportRequest=function(t){var n=this,o={aid:this.connectionSettings().getAppId()};this._deviceId&&(o.did=this._deviceId),this._sessionId&&(o.sid=this._sessionId),this._sdk.uiAssetsData&&this._sdk.uiAssetsData.locale&&(o.locale=this._sdk.uiAssetsData.locale),t.setUrl(this.urlWithConcatenatedQuery(t.getUrl(),o));var r=t.getHeaders()||[],i=new e.TransportHeader;i.setName("X-TS-Client-Version"),i.setValue(this.clientVersionHeader),r.push(i);var s=new e.TransportHeader;s.setName("Authorization"),s.setValue("TSToken "+this.connectionSettings().getToken()+"; tid="+this.connectionSettings().getTokenName()),r.push(s);try{if(this._deviceId&&this.deviceSigningKeyPair)return this.generateSignatureForRequest(t).then((function(o){var i=e.util.calcPublicKeyHexStringEncodedSha256Hash(n.deviceSigningKeyPair,n._sdk),s=new e.TransportHeader;return s.setName("Content-Signature"),s.setValue("data:"+o+";key-id:"+i+";scheme:4"),r.push(s),t.setHeaders(r),t}))}catch(t){return Promise.reject(t)}return t.setHeaders(r),Promise.resolve(t)},s.prototype.postprocessResponse=function(t){var e=this;t.headers&&t.headers.forEach((function(t){s.headerProcessors[t.type].call(e,t)}))},s.prototype.encryptEnvelopedMessageIfNeeded=function(t){var e=this.generateKeyExchangeHeaderIfNeeded();this._currentCryptoSession&&this._currentCryptoSession.isReady()&&this._currentCryptoSession.encryptRequest(t),e&&t.headers.push(e)},s.prototype.promisePossiblyEncryptedTransportRequest=function(t){var n=this;return new Promise((function(o,r){var i={headers:t.envelopeHeaders,data:t.body};n.encryptEnvelopedMessageIfNeeded(i);var s=new e.TransportRequest;s.setMethod(t.method);var a=n._sdk.connectionSettings.getRealm()||"",u=a.length?"/"+a:"";s.setUrl(""+n._sdk.connectionSettings.getServerAddress()+u+"/api/v2/"+t.serverRelativeUrl),s.setBodyJson(JSON.stringify(i)),o(s)}))},s.prototype.possiblyDecryptResponse=function(t){return this._currentCryptoSession&&this._currentCryptoSession.isReady()&&(t=this._currentCryptoSession.decryptResponse(t)),t},s.prototype.generateKeyExchangeHeaderIfNeeded=function(){return this.connectionSettings().getCryptoMode()==e.ConnectionCryptoMode.None||this._currentCryptoSession?null:(this._currentCryptoSession=new n.Scheme2CryptoSession(this._sdk),this._currentCryptoSession.getExchangeRequestHeader())},s.prototype.preprocessSessionExchangeRequest=function(t){var n=this;return new Promise((function(o,r){var a=n.generateUserIDHeaderIfNeeded();a&&t.addEnvelopeHeader(a);var u=n.generateInvalidatedAuthenticatorsHeadersIfNeeded();if(u)for(var c=0,l=u;c<l.length;c++)t.addEnvelopeHeader(l[c]);var p=n.generateDeviceKeyRollHeaderIfNeeded();p&&t.addEnvelopeHeader(p);var h=Promise.resolve(!0),d=new i(t);s.messageFilteringExtensionPoint.forEach((function(t){h=h.then((function(o){return t.filterMessage(n.createPluginSessionInfo(),d).catch((function(t){return n.sdk.log(e.LogLevel.Warning,(function(){return"Error during message filtering: "+t})),!0}))}))})),h.then((function(e){return o(t)}),r)}))},s.prototype.generateDeviceKeyRollHeaderIfNeeded=function(){if(!this._deviceKeyRollData)return null;var t={type:"device_key_roll"};return t.device_key_roll=this._deviceKeyRollData.deviceKeyPair.publicKeyToJson(),this._deviceKeyRollData.message&&(t.message=this._deviceKeyRollData.message),t},s.prototype.generateUserIDHeaderIfNeeded=function(){if(this.connectionSettings().getCryptoMode()==e.ConnectionCryptoMode.Full&&!this._currentCryptoSession)return null;if(this._anonymous){if(this._user.ephemeralUserId)return{type:"uid",uid:this._user.ephemeralUserId}}else{if(this._user.userId)return{type:"uid",uid:this._user.userId};if(this._user.idToken)return{type:"uid_token",token:this._user.idToken}}return null},s.prototype.processKeyExchangeResponseHeader=function(t){this._currentCryptoSession&&this._currentCryptoSession.processExchangeResponseHeader(t)},s.prototype.generateSignatureForRequest=function(t){var n=t.getUrl(),o=n.indexOf("?");if(o>0){var r=t.getUrl().substring(o+1);n=t.getUrl().substring(0,o)+"?"+r.split("&").sort().join("&")}var i=/%%/g,s=n.substr(this.connectionSettings().getServerAddress().length).replace(i,"\\%")+"%%"+this.clientVersionHeader.replace(i,"\\%")+"%%"+t.getBodyJson().replace(i,"\\%"),a=e.util.asciiToHex(s);return this.deviceSigningKeyPair.signHex(a).then((function(t){return e.util.hexToBase64(t)}))},s.prototype.connectionSettings=function(){return this._sdk.connectionSettings},s.prototype.processSessionIdHeader=function(t){this._sdk.log(e.LogLevel.Debug,(function(){return"Processing session ID header "+t})),this._sessionId=t.session_id},s.prototype.processDeviceIdHeader=function(t){var n=this;this._sdk.log(e.LogLevel.Debug,(function(){return"Processing Device ID header "+t})),this._deviceId?this._deviceId!=t.device_id&&this._sdk.log(e.LogLevel.Warning,(function(){return"Received device ID "+t.device_id+" in a session with an existing device id "+n._deviceId})):(this._user.setProvisionalDeviceId(t.device_id),this._deviceId=t.device_id)},s.prototype.processSessionStateChangeHeader=function(t){switch(this._sdk.log(e.LogLevel.Debug,(function(){return"Processing session state change header "+t+" to state "+t.state})),t.state){case n.Protocol.SessionStateChangeState.Closed:this._sdk.log(e.LogLevel.Debug,(function(){return"Invalidating session."})),this._invalidated=!0;break;default:throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Communication,"Invalid session state change encountered in header.")}},s.prototype.processSessionEphemeralUserHeader=function(t){this._sdk.log(e.LogLevel.Debug,(function(){return"Processing ephemeral user Id header "+t})),this._user.updateEphemeralUserId(t.uid)},s.prototype.noHeaderProcessing=function(t){},s.prototype.processEncryptedSharedSecretHeader=function(t){},s.prototype.processDisplayNameHeader=function(t){this._sdk.log(e.LogLevel.Debug,(function(){return"Processing display name header '"+t.display_name+"'"})),n.User.updateUserDisplayName(t.display_name,this._user,this._sdk)},s.prototype.processUidTokenHeader=function(t){this._sdk.log(e.LogLevel.Debug,(function(){return"Processing uid_token header '"+t.token+"', uid hash '"+t.uid_hash+"'"})),n.User.updateUserIdTokenForSession(t.token,this,t.uid_hash)},s.prototype.processDeviceKeyRollSuccess=function(t){if(this._sdk.log(e.LogLevel.Debug,(function(){return"DeviceKeyRoll: Processing device_key_roll_success header. device_key_roll_success = '"+t.device_key_roll_success+"'."})),t.device_key_roll_success&&this._deviceKeyRollData){var n=this._user.deviceSigningKeyTag;this._user.updateDeviceKeyTagSaltAndSave(this._deviceKeyRollData.salt),this._deviceKeyPair=this._deviceKeyRollData.deviceKeyPair,this._deviceKeyRollData=null;try{this._sdk.host.deleteKeyPair(n)}catch(t){this._sdk.log(e.LogLevel.Warning,(function(){return"DeviceKeyRoll: Can't delete old device signing key."}))}}},s.prototype.verifyDevicePublicKey=function(t){var n=e.util.calcPublicKeyHexStringEncodedSha256Hash(this.deviceSigningKeyPair,this._sdk);return this._sdk.log(e.LogLevel.Debug,(function(){return"DeviceKeyRoll: verify server key hash matches device key hash: "+(n===t)})),n===t},s.prototype.urlWithConcatenatedQuery=function(t,e){var n="";return t.indexOf("?")<0?n="?":"&"!=t[t.length-1]&&(n="&"),t+n+Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])})).join("&")},Object.defineProperty(s.prototype,"clientVersionHeader",{get:function(){if(!this._cachedClientVersionHeader){var t=this._sdk.getClientFeatureSet().join(",");this._cachedClientVersionHeader=this._sdk.getVersionInfo().getSdkVersion()+";["+t+"]"}return this._cachedClientVersionHeader},enumerable:!0,configurable:!0}),s.prototype.createPluginSessionInfo=function(){return new r(this)},s.prototype.lock=function(){var t=this;this._sdk.log(e.LogLevel.Debug,(function(){return"Locking session "+t._sessionId})),this._lockCount++},s.prototype.unlock=function(){var t=this;if(this._sdk.log(e.LogLevel.Debug,(function(){return"Unlocking session "+t._sessionId})),this._lockCount--,this._lockCount<0)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Unbalanced session locking: Attempt to unlock an already unlocked sessoin.")},s.prototype.canTerminate=function(){return!this._lockCount},s.prototype.toJson=function(){var t={session_id:this._sessionId,user_guid:this._user.guid.toString(),device_id:this._deviceId,invalidated:this._invalidated,persistUserData:this._persistUserData,anonymous:this._anonymous};return this._persistUserData||(t.nonPersistentUser=n.User.toUserRecord(this._user)),this._currentCryptoSession&&this._currentCryptoSession.isReady()&&(t.c_session=this._currentCryptoSession.toJson()),t},s.fromJson=function(t,o){var r=o,i=r.persistUserData?n.User.findUserByGuid(t,n.UserGuid.createFromString(r.user_guid)):r.nonPersistentUser&&n.User.fromUserRecord(r.nonPersistentUser,t);if(!i)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Can't deserialize session -- user "+r.user_guid+" not found.");return this.fromJsonWithUser(t,o,i)},s.fromJsonWithUser=function(t,e,o){var r=e,i=new s(t,o);return i._sessionId=r.session_id,i._deviceId=r.device_id,i._invalidated=r.invalidated||!1,i._persistUserData=r.persistUserData||!0,i._anonymous=r.anonymous||!1,r.c_session&&(i._currentCryptoSession=n.Scheme2CryptoSession.fromJson(t,r.c_session)),i},s.prototype.updateFromContinuedSession=function(t){this.user.updateFromContinuedSessionUser(t.user)},s.notifySessionObserversOnMainSessionLogin=function(t){var e=t.createPluginSessionInfo();this.sessionObservationExtensionPoint.forEach((function(t){t.mainSessionStarted(e)}))},s.notifySessionObserversOnMainSessionLogout=function(t){var e=t.createPluginSessionInfo();this.sessionObservationExtensionPoint.forEach((function(t){t.mainSessionEnded(e)}))},s.headerProcessors={session_id:s.prototype.processSessionIdHeader,device_id:s.prototype.processDeviceIdHeader,encrypted_shared_secret:s.prototype.processEncryptedSharedSecretHeader,session_state:s.prototype.processSessionStateChangeHeader,ephemeral_uid:s.prototype.processSessionEphemeralUserHeader,key_exchange:s.prototype.processKeyExchangeResponseHeader,encryption:s.prototype.noHeaderProcessing,display_name:s.prototype.processDisplayNameHeader,uid_token:s.prototype.processUidTokenHeader,device_key_roll_success:s.prototype.processDeviceKeyRollSuccess},s.messageFilteringExtensionPoint=new n.ExtensionPoint(t.tarsusplugin.TARSUS_EXTENSION_POINT_NAME_MESSAGE_FILTERS),s.sessionObservationExtensionPoint=new n.ExtensionPoint(t.tarsusplugin.TARSUS_EXTENSION_POINT_NAME_SESSION_OBSERVERS),s}(n.BaseSession);n.Session=o;var r=function(){function t(t){this._underlying=t}return t.prototype.getUsername=function(){return this._underlying.user.displayName},t}(),i=function(){function t(t){this._underlying=t}return t.prototype.getMethod=function(){return this._underlying.method},t.prototype.getBody=function(){return this._underlying.body},t.prototype.getHeaders=function(){return this._underlying.envelopeHeaders},t.prototype.addHeader=function(t){this._underlying.addEnvelopeHeader(t)},t}()}((e=t.sdk||(t.sdk={})).core||(e.core={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(){function n(n,o,r,i){if(n instanceof e.SerializationContext)this.serializeFrom(n);else{if("string"!=typeof n||!o||!r)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid arguments for constructing session message");this._requestMethod=n,this._requestServerRelativeUrl=o,this._requestBody=r,this._envelopeHeaders=i||[]}}return n.prototype.addEnvelopeHeader=function(t){this._envelopeHeaders.push(t)},Object.defineProperty(n.prototype,"method",{get:function(){return this._requestMethod},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"serverRelativeUrl",{get:function(){return this._requestServerRelativeUrl},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"body",{get:function(){return this._requestBody},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"envelopeHeaders",{get:function(){return this._envelopeHeaders},enumerable:!0,configurable:!0}),n.prototype.serializeTo=function(t){t.writePrimitive("envelopeHeaders",this._envelopeHeaders),t.writePrimitive("requestBody",this._requestBody),t.writePrimitive("requestMethod",this._requestMethod),t.writePrimitive("requestServerRelativeUrl",this._requestServerRelativeUrl)},n.prototype.serializeFrom=function(t){this._envelopeHeaders=t.readPrimitive("envelopeHeaders"),this._requestBody=t.readPrimitive("requestBody"),this._requestMethod=t.readPrimitive("requestMethod"),this._requestServerRelativeUrl=t.readPrimitive("requestServerRelativeUrl")},x([e.Serializable("ExchangeRequest"),N("design:paramtypes",[Object,String,Object,Array])],n)}();e.BaseExchangeRequest=n;var o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),x([e.Serializable("SessionExchangeReqeust")],n)}(n);e.SessionExchangeRequest=o;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e}(n);e.PublicExchangeRequest=r}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e;!function(n){var o=function(){function t(t,e){this._sdk=t,this._hostedPluginName=e.getPluginInfo().getPluginName()}return t.prototype.extend=function(t,e){n.ExtensionPoint.byName(t).extend(e)},t.prototype.getSdk=function(){return this._sdk},t.prototype.generateRandomHexString=function(t){return this._sdk.host.generateRandomHexString(t)},t.prototype.suspendControlFlowToDefaultSuspensionContext=function(t){this._sdk.suspendControlFlowToDefaultSuspensionContext(t)},t.prototype.log=function(t,e){this._sdk.host.log(t,"TransmitSDK/Tarsus/Plugin/"+this._hostedPluginName,e)},t}();n.TarsusPluginHostImpl=o;var r=function(){function n(t){this._installedPluginsAndConfigs={},this._initializedPlugins=[],this._sdk=t}return n.prototype.getInitializedPlugins=function(){return this._initializedPlugins.concat([])},n.prototype.installPlugin=function(t,n){if(this._installedPluginsAndConfigs[t])throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"Attempt to install plugin "+t+" twice.");this._installedPluginsAndConfigs[t]=n},n.prototype.initializePlugins=function(){var n=this;this._sdk.log(e.LogLevel.Debug,(function(){return"Starting plugin initialization..."}));var r=Object.keys(this._installedPluginsAndConfigs).map((function(r){return n._sdk.log(e.LogLevel.Debug,(function(){return"Loading plugin "+r+"..."})),n._sdk.host.loadPlugin(r).then((function(i){var s=i.getPluginInfo(),a=t.tarsusplugin.impl.PluginInfoImpl.toString(s);if(i.getPluginInfo().getPluginName()!=r)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"Plugin "+r+": getPluginInfo() reported mismatched name -- "+a+".");n._sdk.log(e.LogLevel.Info,(function(){return"Initializing plugin "+a+"..."}));var u=new o(n._sdk,i);return i.initialize(u,n._installedPluginsAndConfigs[r]).then((function(){n._initializedPlugins.push(i)})).catch((function(t){n._sdk.log(e.LogLevel.Error,(function(){return"Couldn't initialize plugin "+a+": "+t}))}))}))}));return Promise.all(r).then((function(){n._sdk.log(e.LogLevel.Debug,(function(){return"Plugin initialization completed sucessfuly"}))}))},n}();n.TarsusPluginManager=r}((e=t.sdk||(t.sdk={})).core||(e.core={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o;o=t.sdk||(t.sdk={}),e=o.core||(o.core={}),n=function(){function t(t,n){this._locale=n,this._sdk=t,this._serverClientStrings=new e.ClientStrings({}),this._cachedClientStrings=new e.ClientStrings({})}return Object.defineProperty(t.prototype,"locale",{get:function(){return this._locale},enumerable:!0,configurable:!0}),t.prototype.isServerClientStringsEmpty=function(){var t=this._serverClientStrings.strings;return null==t||0===Object.keys(t).length&&t.constructor===Object},t.prototype.setServerClientStrings=function(t){this._serverClientStrings=t,this._cachedClientStrings=new e.ClientStrings({})},t.prototype.applyGlobalStyleSheetJson=function(t){this._styleSheetJson||(this._styleSheetJson=JSON.parse(this._sdk.host.getUIStyles())),this._styleSheetJson=e.UIStyleSheets.merge(this._styleSheetJson,t),this._cachedBaseStylesheet=null},Object.defineProperty(t.prototype,"uiStylesheets",{get:function(){return this.getUiStylesheetsWithOverrides()},enumerable:!0,configurable:!0}),t.prototype.getUiStylesheetsWithOverrides=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._styleSheetJson||(this._styleSheetJson=JSON.parse(this._sdk.host.getUIStyles())),t.length?new(e.UIStyleSheets.bind.apply(e.UIStyleSheets,[void 0,this._styleSheetJson].concat(t))):(this._cachedBaseStylesheet||(this._cachedBaseStylesheet=new e.UIStyleSheets(this._styleSheetJson)),this._cachedBaseStylesheet)},t.prototype.getString=function(t){var e=null;return(e=this._cachedClientStrings.getString(t))||(this._serverClientStrings&&(e=this._serverClientStrings.getString(t)),null==e&&(e=this._sdk.host.getString(t,this._locale)),e&&this.storeInLocalCache(t,e)),e},t.prototype.storeInLocalCache=function(t,e){e&&this._cachedClientStrings&&(this._cachedClientStrings.strings[t]=e)},t}(),e.UIAssetsData=n}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e;!function(t){var n=function(){function t(){}return t.prototype.toString=function(){return this._guidStr},t.prototype.equalString=function(t){return this._guidStr==t},t.prototype.equalsUserGuid=function(t){return this.toString()==t.toString()},t.createWithLength=function(e,n){var o=new t;return o._guidStr=n.host.generateRandomHexString(e),o},t.createFromString=function(e){var n=new t;return n._guidStr=e,n},t}();t.UserGuid=n;var o=function(){function o(){}return Object.defineProperty(o.prototype,"guid",{get:function(){return this._guid},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"userId",{get:function(){return this._userId},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"displayName",{get:function(){return(this._ephemeral?"anonymous":this._displayName)||this._userId},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"idToken",{get:function(){return this._idToken},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"uidHash",{get:function(){return this._uidHash},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"deviceId",{get:function(){return this._deviceId},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"phoneNumber",{get:function(){return this._phoneNumber},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"defaultAuthId",{get:function(){return this._defaultAuthId},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"deviceBound",{get:function(){return this._deviceBound},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hasLoggedIn",{get:function(){return this._hasLoggedIn},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"deviceEncryptionKeyTag",{get:function(){return new t.TarsusKeyPath("per_user",this._guid.toString(),"enc_enabled")},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ephemeralUserId",{get:function(){return this._ephemeralUserId},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"userHandle",{get:function(){return this._userId||this._idToken},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"userHandleType",{get:function(){return this._userId?e.UserHandleType.UserId:e.UserHandleType.IdToken},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"deviceSigningKeyTag",{get:function(){return this._deviceSigningKeyTagSalt?new t.TarsusKeyPath("per_user",this._guid.toString(),"device_key",this._deviceSigningKeyTagSalt):new t.TarsusKeyPath("per_user",this._guid.toString(),"device_key")},enumerable:!0,configurable:!0}),o.prototype.getPendingDeviceSigningKeyTag=function(e){return new t.TarsusKeyPath("per_user",this._guid.toString(),"device_key",e)},o.prototype.updateDeviceKeyTagSaltAndSave=function(t){this._deviceSigningKeyTagSalt=t,o.save(this._sdk,this)},Object.defineProperty(o.prototype,"localEnrollments",{get:function(){return this._localEnrollments||(this._localEnrollments=t.LocalEnrollment.enrollmentsForUser(this,this._sdk)),this._localEnrollments},enumerable:!0,configurable:!0}),o.prototype.updateDefaultAuthId=function(t){this._defaultAuthId=t},o.prototype.updateEphemeralUserId=function(t){if(!this._ephemeral)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid ephemeral user name update reaquest header, user is not ephemeral.");if(this._ephemeralUserId)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to set an ephemeral userId after it has already been updated once.");this._ephemeralUserId=t},o.updateUserDisplayName=function(t,e,n){e._displayName=t,n.currentSession&&n.currentSession.persistUserData&&o.save(n,e)},o.updateUserIdTokenForSession=function(t,e,n){var r=e.user;r._idToken=t,r._uidHash=n,delete r._userId,e.persistUserData&&o.save(e.sdk,r)},o.resetUserIdTokenForSession=function(t){var e=t.user;delete e._idToken,t.persistUserData&&o.save(t.sdk,e)},o.prototype.updateFromContinuedSessionUser=function(t){if(!this._guid.equalsUserGuid(t.guid))throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"GUID mismatch when updating user from continuation");this._defaultAuthId=t._defaultAuthId,this._deviceBound=t._deviceBound,this._hasLoggedIn=t._hasLoggedIn,this._deviceId=t._deviceId,this._phoneNumber=t._phoneNumber,this._userId=t._userId,this._idToken=t._idToken,this._displayName=t._displayName,this._uidHash=t._uidHash},o.prototype.setProvisionalDeviceId=function(t){if(this.deviceBound)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to record a provisional device ID for an already bound user record.",{});this._deviceId=t},o.prototype.bindDeviceToUser=function(t){if(this.deviceBound)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to record a device for an already bound user record.",{});if(this._deviceId!=t)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to bind user to a device ID different than provisional device ID.",{});this._deviceBound=!0},o.prototype.markLoggedIn=function(){this._hasLoggedIn=!0},o.iterateUsers=function(t,e){for(var n=t.host.readStorageKey(o.storageKey),r=t.currentSession&&t.currentSession.user,i=0;i<n.length;i++){var s=o.fromUserRecord(n[i],t),a=e(s);if(null!=a)return a;r&&r.guid.equalsUserGuid(s.guid)&&(r=null)}return r?e(r):null},o.findUserByUidToken=function(t,n){return o.iterateUsers(t,(function(o){return o.idToken&&o.idToken===n?(t.log(e.LogLevel.Debug,(function(){return"Located user based on id token, guid: '"+o.guid+"'"})),o):null}))},o.calculateUidHash=function(t,n){var o=n.toLowerCase(),r=e.util.hexToBase64(t.host.calcHexStringEncodedSha256Hash(e.util.asciiToHex(o)));return t.log(e.LogLevel.Debug,(function(){return"Calculated uid hash, input: '"+o+", hash: '"+r+"'"})),r},o.findUserByUidHash=function(t,n){var r=this;return t.log(e.LogLevel.Debug,(function(){return"Looking up user based on user id hash, hash: '"+n+"'"})),o.iterateUsers(t,(function(o){return n==o._uidHash?(t.log(e.LogLevel.Debug,(function(){return"Located user based on uid hash, guid: '"+o.guid+"'"})),o):o.userId&&r.calculateUidHash(t,o.userId)==n?(t.log(e.LogLevel.Debug,(function(){return"Located user with user id based on uid hash, guid: '"+o.guid+"'"})),o):null}))},o.findUserByUserId=function(t,n){var r=this.calculateUidHash(t,n);return t.log(e.LogLevel.Debug,(function(){return"Looking up user based on user id, userId: '"+n+"'"})),o.iterateUsers(t,(function(o){return o.userId&&o.userId.toLowerCase()===n.toLowerCase()?(t.log(e.LogLevel.Debug,(function(){return"Located user based on user id, guid: '"+o.guid+"'"})),o):o.userId||r!=o._uidHash?null:(t.log(e.LogLevel.Debug,(function(){return"Located user based on uid hash, guid: '"+o.guid+"'"})),o.idToken||(o._userId=n),o)}))},o.findUserByGuid=function(t,n){return o.iterateUsers(t,(function(o){return o.guid.equalsUserGuid(n)?(t.log(e.LogLevel.Debug,(function(){return"Located user based on guid, guid: '"+o.guid+"'"})),o):null}))},o.findUser=function(t,e){return 0==e.indexOf("uidt:")?this.findUserByUidToken(t,e):this.findUserByUserId(t,e)},o.findUserWithType=function(t,n,o){if(o){if(o===e.UserHandleType.IdToken)return this.findUserByUidToken(t,n);if(o===e.UserHandleType.UserId)return this.findUserByUserId(t,n);throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Unsupported user handle type",{user_handle_type:o})}return this.findUser(t,n)},o.createUserWithUserId=function(t,n){if(!n)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"userHandle must not be empty");var o=this.createBaseUser(t);return o._userId=n,o._uidHash=e.util.hexToBase64(t.host.calcHexStringEncodedSha256Hash(e.util.asciiToHex(n))),o},o.createUserWithIdToken=function(t,n,o){if(!n)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"userHandle must not be empty");var r=this.createBaseUser(t);return r._idToken=n,r._uidHash=o,r},o.createBaseUser=function(t){var e=new o;return e._guid=n.createWithLength(32,t),e._deviceBound=!1,e._hasLoggedIn=!1,e._phoneNumber="",e._sdk=t,e._ephemeral=!1,e._deviceSigningKeyTagSalt=t.host.generateRandomHexString(24),e},o.createEphemeralUser=function(t){var e=new o;return e._guid=n.createWithLength(32,t),e._deviceBound=!1,e._hasLoggedIn=!1,e._phoneNumber="",e._sdk=t,e._ephemeral=!0,e._ephemeralUserId=null,e},o.deleteUser=function(t,n){var r=n.host.readStorageKey(o.storageKey);n.log(e.LogLevel.Warning,(function(){return"=== CURRENTL LEN    "+r.length}));for(var i=0;i<r.length;i++){var s=o.fromUserRecord(r[i],n);if(t.guid.equalsUserGuid(s.guid))break}if(i<r.length){for(;i<r.length-1;)r[i]=r[i+1],i++;var a=r.length-1;delete r[r.length-1],r.length=a,n.host.writeStorageKey(o.storageKey,r)}else n.log(e.LogLevel.Warning,(function(){return"Attempt to delete nonexisting user "+t.userHandle}))},o.prototype.createEnrollmentRecord=function(e,n,o,r,i){var s=t.LocalEnrollment.createNew(e,n,o,this._sdk,i);return s.status=r,s},o.prototype.updateEnrollmentRecord=function(n){if(this._ephemeral)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to update enrollment record for ephemeral user.",{});var o={};for(var r in this.localEnrollments)o[r]=this.localEnrollments[r];o[n.authenticatorId]=n,t.LocalEnrollment.updateEnrollmentsForUser(this,o,this._sdk),this._localEnrollments=o},o.toUserRecord=function(t){var e={default_auth_id:t._defaultAuthId,device_bound:t._deviceBound,has_logged_in:t._hasLoggedIn,device_id:t._deviceId,last_auth:"<null>",guid:t._guid.toString(),user_id:t.userId,display_name:t._displayName,id_token:t._idToken,uid_hash:t._uidHash,user_number:t._phoneNumber,schemeVersion:"v1",device_signing_key_tag_salt:t._deviceSigningKeyTagSalt};return t._ephemeralUserId&&(e.ephemeral_id=t._ephemeralUserId),e},o.save=function(t,n){if(n._ephemeral)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to save ephemeral user record to persistent store.",{});var r=t.host.readStorageKey(o.storageKey);r.length=r.length||0;for(var i=0;i<r.length&&!o.fromUserRecord(r[i],t).guid.equalsUserGuid(n.guid);i++);r[i]=o.toUserRecord(n),r.length<i+1&&(r.length=i+1),t.host.writeStorageKey(o.storageKey,r)},o.fromUserRecord=function(t,e){var r=new o;return r._sdk=e,r._defaultAuthId=t.default_auth_id,r._deviceBound=t.device_bound,r._hasLoggedIn=t.has_logged_in,r._deviceId=t.device_id,r._phoneNumber=t.user_number,r._deviceSigningKeyTagSalt=t.device_signing_key_tag_salt,r._userId=t.user_id,r._idToken=t.id_token,r._uidHash=t.uid_hash,t.ephemeral_id&&(r._ephemeral=!0,r._ephemeralUserId=t.ephemeral_id),t.schemeVersion?(r._guid=n.createFromString(t.guid),r._displayName=t.display_name):(r._guid=n.createFromString(t.user_id),r._displayName=t.user_id),r},o.storageKey=new t.TarsusKeyPath("users"),o}();t.User=o}((e=t.sdk||(t.sdk={})).core||(e.core={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){t.InternalErrorWrongBiometric=1e3,t.InternalErrorBiometricInvalidated=1001,t.InternalErrorBiometricKeyStoreError=1002,t.InternalErrorBiometricNotConfigured=1003,t.InternalErrorBiometricOsLockTemporary=1004,t.InternalErrorBiometricOsLockPermanent=1005,t.InternalErrorBiometricFallbackPressed=1006,t.ErrorDataInternalError="internal_error",t.ErrorDataNumFailures="num_failures",t.ErrorDataServerErrorCode="server_error_code",t.ErrorDataServerErrorMessage="server_error_message",t.ErrorDataServerErrorData="server_error_data",t.ErrorDataRetriesLeft="retries",t.ErrorDataCommunicationError="communication_error",t.ErrorDataCommunicationSSL="ssl",t.FeatureCodeServerHeaders=1,t.FeatureCodeAuthFailover=2,t.FeatureCodeUnifiedRegFlow=3,t.FeatureCodePromotionAction=6,t.FeatureCodeSilentFingerprintRegistration=7,t.FeatureCodeMultiMethodRegistrationAction=8,t.FeatureCodeOtpCodeInvalidated=10,t.FeatureCodeEnvelopedClientRequest=11,t.FeatureCodeUnregistrationFlow=12,t.FeatureCodeFaceIdAuthentication=13,t.FeatureCodeDynamicPolicySupport=14,t.FeatureCodeAutoRequestForSignContent=19,t.FeatureDeviceBiometricsFPContinuation=27,t.FeatureCodeDebugBreakpointActionSupport=28,t.FeatureCodeFido2ClientEcKeyExtSupport=37,t.FeatureCodeMultiCredVaultFido2Support=38}(t.sdkhost||(t.sdkhost={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(e){e.TARSUS_VERSION="5.2.0",e.API_LEVEL=10,e.STATIC_FEATURE_SET=[t.sdkhost.FeatureCodeServerHeaders,t.sdkhost.FeatureCodeAuthFailover,t.sdkhost.FeatureCodeUnifiedRegFlow,t.sdkhost.FeatureCodePromotionAction,t.sdkhost.FeatureCodeSilentFingerprintRegistration,t.sdkhost.FeatureCodeMultiMethodRegistrationAction,t.sdkhost.FeatureCodeOtpCodeInvalidated,t.sdkhost.FeatureCodeEnvelopedClientRequest,t.sdkhost.FeatureCodeUnregistrationFlow,t.sdkhost.FeatureCodeDynamicPolicySupport,t.sdkhost.FeatureCodeDebugBreakpointActionSupport]}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(e){function n(n,o){var r=e.call(this,n,o)||this;return r._clientContext=r._controlFlowProcessor._clientContext,r._cancellationHolder=new t.util.CancelablePromiseHolder,r}return F(n,e),n.prototype.run=function(){var e=this;return this._cancellationHolder.resolveWith((function(t,n){e.doRunAction().then(t,n)})),this._cancellationHolder.cancellablePromise.catch((function(n){if(n==t.util.CancelablePromiseHolder.CancelRequest)return e._controlFlowProcessor.createExternalCancellationRejectionPromise();throw n}))},n.prototype.cancelRun=function(){this._cancellationHolder.cancel()},n}(e.ActionDriver);e.SimpleCancellationActionDriver=n}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(t){function e(e,n,o,r,i,s,a,u){var c=t.call(this,a._controlFlowProcessor._session,e,n,o)||this;return c._assertionId=r,c._retriesLeft=i,c._actionDriver=a,c._fallback=s,c._registration=u,c}return F(e,t),Object.defineProperty(e.prototype,"authDriver",{get:function(){return this._authDriver||(this._authDriver=this.authenticationDriverDescriptor.createAuthenticationDriver(this._actionDriver,this._authenticatorMethodConfig,this)),this._authDriver},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suggestedParameters",{get:function(){return this.getEnabled()?this.authenticationDriverDescriptor.suggestParameters(this._authenticatorMethodConfig,this):[]},enumerable:!0,configurable:!0}),e.prototype.getEnabled=function(){return(this._registration||this.getRegistered()&&!this.getLocked())&&this.getSupportedOnDevice()},Object.defineProperty(e.prototype,"fallback",{get:function(){return this._fallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assertionId",{get:function(){return this._assertionId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retriesLeft",{get:function(){return this._retriesLeft},enumerable:!0,configurable:!0}),e.prototype.updateWithAssertionResult=function(t){t.retries_left&&(this._retriesLeft=t.retries_left),t.locked&&(this._locked=t.locked)},e.fromUnregistrationAction=function(t,n){return new e(t.method,t,t,t.assertion_id,null,null,n,!1)},e.fromPromotionAction=function(t,n){return new e(t.method,t,t,t.assertion_id,t.retries_left,t.fallback||null,n,!0)},e.fromAuthenticationActionMenuOption=function(t,n){return new e(t.type,t,t,t.assertion_id,t.retries_left,t.fallback||null,n,!1)},e.fromRegistrationAction=function(t,n){return new e(t.method,t,t,t.assertion_id,null,null,n,!0)},e}(e.authenticationdrivers.AuthenticatorDescriptionImpl);n.AuthenticationMenuAuthenticator=o;var r=function(e){function n(t,n){var o=e.call(this,t,n)||this;return o._externallyCancelled=!1,o}return F(n,e),n.prototype.doRunAction=function(){var t=this;return new Promise((function(e,n){t._completionFunction=e,t._rejectionFunction=n,t.runActionWithCompletionFunctions()}))},Object.defineProperty(n.prototype,"availableAuthenticatorsForSwitching",{get:function(){return this.availableAuthenticators},enumerable:!0,configurable:!0}),n.prototype.sendPollingRequest=function(t,n){return e.prototype.sendPollingRequest.call(this,t,n)},n.prototype.sendAuthenticatorAssertionRequest=function(e,n,o,r){this._sdk.log(t.LogLevel.Debug,(function(){return"Sending authenticator asserion request for "+e.getAuthenticatorId()+": assert="+n}));var i={assertion_id:e.assertionId,method:e.getAuthenticatorId()};if(r)for(var s in r)i[s]=r[s];return this.sendAssertionRequest(n,o,i)},n.prototype.completeAuthenticationWithAssertionResult=function(t){this._completionFunction(t)},n.prototype.completeAuthenticationWithError=function(t){this._rejectionFunction(t)},n.prototype.completeWithEscapeRequest=function(t){var e=this;this.processEscapeRequest(t).then((function(t){e.completeAuthenticationWithAssertionResult(t)}),(function(t){e.completeAuthenticationWithError(t)}))},n.prototype.prepareForRunningAuthenticationDriver=function(t){return this._externallyCancelled?(this.completeAuthenticationWithError(this._controlFlowProcessor.createExternalCancellationError()),!1):(this._runningAuthenticatorDriver=t,!0)},n.prototype.cancelRun=function(){this._externallyCancelled=!0,this._runningAuthenticatorDriver&&this._runningAuthenticatorDriver.onCancelRun(),e.prototype.cancelRun.call(this)},n}(n.SimpleCancellationActionDriver);n.ActionDriverAuthenticatorOp=r}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(o){function r(t,e){return o.call(this,t,e)||this}return F(r,o),r.prototype.runActionWithCompletionFunctions=function(){var n=this._action;this._sdk.log(t.LogLevel.Debug,(function(){return"Loading authenticator descriptions"})),this.loadAuthenticatorDescriptionsFromAction(n),this._shouldUpdateDefaultAuth=n.options&&n.options.update_default,this._sdk.log(t.LogLevel.Debug,(function(){return"Starting auth presentation"})),this.runWithPresentationMode(n.options&&n.options.start_with||e.Protocol.AuthMenuPresentationMode.DefaultAuthenticator)},Object.defineProperty(r.prototype,"availableAuthenticators",{get:function(){return this.updateAvailableAuthenticatorsList(),this._availableAuthenticators.concat([])},enumerable:!0,configurable:!0}),r.prototype.runWithPresentationMode=function(n,o){var r=this;this.updateAvailableAuthenticatorsList();var i=n==e.Protocol.AuthMenuPresentationMode.AuthenticatorMenu&&this._uiHandler.shouldIncludeDisabledAuthenticatorsInMenu(this.policyAction(),this._clientContext)?this._allAuthenticators:this._availableAuthenticators;if(o&&(i=i.filter((function(t){return o.filter((function(e){return e.getAuthenticatorId()==t.getAuthenticatorId()})).length>0}))),i.length)switch(n){case e.Protocol.AuthMenuPresentationMode.AuthenticatorMenu:var s=i.map((function(e){return new t.impl.AuthenticationOptionImpl(e,e.suggestedParameters)}));this._uiHandler.selectAuthenticator(s,this.policyAction(),this._clientContext).then((function(e){switch(e.getResultType()){case t.AuthenticatorSelectionResultType.Abort:r.completeAuthenticationWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.UserCanceled,"Cancel during authenticator selection."));break;case t.AuthenticatorSelectionResultType.SelectAuthenticator:if(!(s.filter((function(t){return t.getAuthenticator()==e.getSelectedAuthenticator()})).length>0)){r.completeAuthenticationWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"selectAuthenticator returned an authenticator not within options."));break}if(!e.getSelectedAuthenticator().getEnabled()){r.completeAuthenticationWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"selectAuthenticator returned a non-enabled authenticator."));break}r.runAuthenticator(e.getSelectedAuthenticator(),e.getSelectedAuthenticationParameters());break;case t.AuthenticatorSelectionResultType.Escape:r.completeWithEscapeRequest(e.getActionEscapeRequest())}}));break;case e.Protocol.AuthMenuPresentationMode.DefaultAuthenticator:this._defaultAuthenticator&&this._availableAuthenticators.indexOf(this._defaultAuthenticator)>=0?this.runAuthenticator(this._defaultAuthenticator,[]):(this._sdk.log(t.LogLevel.Warning,(function(){return"Default authenticator for user not found. Falling back to first authenticator in list."})),this.runAuthenticator(this._availableAuthenticators[0],[]));break;case e.Protocol.AuthMenuPresentationMode.FirstAuthenticator:this.runAuthenticator(this._availableAuthenticators[0],[])}else this._allAuthenticators.filter((function(t){return t.getLocked()})).length>0?this.completeAuthenticationWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AllAuthenticatorsLocked,"All authenticators locked.")):this.completeAuthenticationWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.NoRegisteredAuthenticator,"No registered authenticator available."))},r.prototype.loadAuthenticatorDescriptionsFromAction=function(t){var e=this;this._allAuthenticators=t.methods.map((function(t){return n.AuthenticationMenuAuthenticator.fromAuthenticationActionMenuOption(t,e)}))},r.prototype.updateAvailableAuthenticatorsList=function(){var e=this;this._defaultAuthenticator=null,this._availableAuthenticators=[],this._allAuthenticators.forEach((function(t){t.getEnabled()&&e._availableAuthenticators.push(t),t.getDefaultAuthenticator()&&(e._defaultAuthenticator=t)})),this._defaultAuthenticator||(this._defaultAuthenticator=this._availableAuthenticators[0]),this._sdk.log(t.LogLevel.Debug,(function(){return"Updated available authenticators list; "+e._availableAuthenticators.length+" available authenticators"}))},r.prototype.runAuthenticator=function(n,o){var r=this,i=n.authDriver;this.prepareForRunningAuthenticationDriver(i)&&i.runAuthentication(o).then((function(o){if(o instanceof e.authenticationdrivers.AuthenticationDriverSessionResultSwitchAuthenticator)o.requiredAuthenticator?r.runAuthenticator(o.requiredAuthenticator,[]):r.runWithPresentationMode(e.Protocol.AuthMenuPresentationMode.AuthenticatorMenu,o.allowedAuthenticators);else if(o instanceof e.authenticationdrivers.AuthenticationDriverSessionResultAuthenticationCompleted){if(r._shouldUpdateDefaultAuth&&(r._sdk.log(t.LogLevel.Info,(function(){return"Updating user default authenticator."})),!r._controlFlowProcessor._session.anonymous)){var i=r._controlFlowProcessor._session.user;i.updateDefaultAuthId(n.getAuthenticatorId()),r._controlFlowProcessor._session.persistUserData&&e.User.save(r._sdk,i)}r.completeAuthenticationWithAssertionResult(o.assertionResult)}else o instanceof e.authenticationdrivers.AuthenticationDriverSessionResultEscapeRequested?r.completeWithEscapeRequest(o.escapeRequest):r.completeAuthenticationWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Unknown authentication driver result type encountered."))}),(function(e){r._sdk.log(t.LogLevel.Debug,(function(){return"Received authentication driver error "+e})),r.completeAuthenticationWithError(e)}))},r}(n.ActionDriverAuthenticatorOp);n.ActionDriverAuthentication=o}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(n){function o(t,e){return n.call(this,t,e)||this}return F(o,n),o.prototype.doRunAction=function(){var n=this;this._sdk.log(t.LogLevel.Debug,(function(){return"Executing confirmation action."}));var o=this._action;return this._uiHandler.getConfirmationInput(o.title,o.text,o.continue_button_text,o.cancel_button_text,this.policyAction(),this._clientContext).then((function(r){var i=r.getActionEscapeRequest();if(i)return n.processEscapeRequest(i);var s={user_cancelled:1==r.getUserChoice()},a=Promise.resolve(s);if(o.require_sign_content){var u={params:{title:o.title,text:o.text,continue_button_text:o.continue_button_text,cancel_button_text:o.cancel_button_text,parameters:o.parameters,image:o.image},user_input:s.user_cancelled?o.cancel_button_text:o.continue_button_text};a=a.then((function(t){return e.ActionDriverSignContent.augmentAssertionDataWithSignedContent(t,u,n._controlFlowProcessor._session.deviceSigningKeyPair,n._sdk)}))}return a.then((function(e){return n._sdk.log(t.LogLevel.Debug,(function(){return"Asserting confirmation: "+e})),n.sendAssertionRequest(null,e).then((function(t){return t}))}))}))},o}(e.SimpleCancellationActionDriver);e.ActionDriverConfirmation=n}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(n){function o(t,e){return n.call(this,t,e)||this}return F(o,n),o.prototype.doRunAction=function(){var e=this;return this._sdk.log(t.LogLevel.Debug,(function(){return"Executing debug break action."})),this._sdk.host.setDebugIndicatorVisible(!0),this.pollUntilDone().finally((function(){e._sdk.host.setDebugIndicatorVisible(!1)}))},o.prototype.pollUntilDone=function(){var n=this,o={};return t.util.wrapPromiseWithActivityIndicator(this._uiHandler,this._policyAction,this._clientContext,this._sdk.host.createDelayedPromise(250)).then((function(){return n.sendAssertionRequest(null,o)})).then((function(t){return t.assertion_error_code==e.Protocol.AssertionErrorCode.NotFinished?n.pollUntilDone():t}))},o}(n.SimpleCancellationActionDriver);n.ActionDriverDebugBreak=o}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(n){function o(t,e){return n.call(this,t,e)||this}return F(o,n),o.prototype.doRunAction=function(){var n=this;this._sdk.log(t.LogLevel.Debug,(function(){return"Executing disable TOTP action..."}));var o=this._action,r=e.totp.TotpPropertiesProcessor.createWithUser(this._controlFlowProcessor._session.user,this._sdk,this._clientContext,this._controlFlowProcessor._session);return this._sdk.log(t.LogLevel.Debug,(function(){return"Obtained TOTP processor."})),o.config_ids.forEach((function(e){n._sdk.log(t.LogLevel.Debug,(function(){return"Deleting TOTP processor "+e+"."})),r.deleteProvisionForGenerator(e),n._sdk.log(t.LogLevel.Debug,(function(){return"TOTP processor "+e+" deleted."}))})),this.sendAssertionRequest()},o}(n.SimpleCancellationActionDriver);n.ActionDriverDisableTotp=o}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(o){var r=function(o){function r(t,e){return o.call(this,t,e)||this}return F(r,o),r.prototype.doRunAction=function(){var t=this,n=this._action,o=r.formExtensionPoint.firstNonNull((function(t){return t.createFormSession(n.form_id,n.app_data)}));return o?(this._sdk.log(e.LogLevel.Debug,(function(){return'Using extension of type "com.ts.mobile.plugins.form.settings" for formId '+n.form_id})),this.session=o):this.session=this._uiHandler.createFormSession(n.form_id,n.app_data),this.session?new Promise((function(e,n){t.completionFunction=e,t.rejectionFunction=n,t.session.startSession(t._clientContext,t.policyAction()),t.session.promiseFormInput().then((function(e){return t.processPromiseResult(e)}),t.rejectionFunction)})):Promise.reject(e.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createFormSession."))},r.prototype.processPromiseResult=function(t){switch(t.getControlRequest()){case e.FormControlRequest.Submit:var n={input:t.getJsonData()};this.request(n);break;case e.FormControlRequest.Abort:this.terminateSession(),this.rejectionFunction(new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.UserCanceled,"User cancelled a form action."));break;case e.FormControlRequest.Escape:this.terminateSession(),this.processEscapeRequest(t.getActionEscapeRequest()).then(this.completionFunction,this.rejectionFunction)}},r.prototype.terminateSession=function(){this.session&&(this.session.endSession(),delete this.session)},r.prototype.request=function(t){var e=this;this.sendAssertionRequest(null,null,t).then((function(t){var o=t.data;switch(t.assertion_error_code){case n.Protocol.AssertionErrorCode.NotFinished:e.session.onContinue(o),e.session.promiseFormInput().then((function(t){return e.processPromiseResult(t)}),e.rejectionFunction);break;case n.Protocol.AssertionErrorCode.RepeatCurrentStep:e.session.onError(o),e.session.promiseFormInput().then((function(t){return e.processPromiseResult(t)}),e.rejectionFunction);break;default:e.terminateSession(),e.completionFunction(t)}})).catch((function(t){e.terminateSession(),e.rejectionFunction(t)}))},r.formExtensionPoint=new n.ExtensionPoint(t.tarsusplugin.TARSUS_EXTENSION_POINT_NAME_FORMS_EXTENSION),r}(o.SimpleCancellationActionDriver);o.ActionDriverForm=r}(n.actiondrivers||(n.actiondrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(e){function n(t,n){return e.call(this,t,n)||this}return F(n,e),n.prototype.doRunAction=function(){var e=this;this._sdk.log(t.LogLevel.Debug,(function(){return"Executing information action."}));var n=this._action;return this._uiHandler.getInformationResponse(n.title,n.text,n.button_text,this.policyAction(),this._clientContext).then((function(n){if(n.getActionEscapeRequest())return e.processEscapeRequest(n.getActionEscapeRequest());if(e._sdk.log(t.LogLevel.Debug,(function(){return"Asserting information"})),-1!=n.getUserChoice())throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"ConfirmationInput.getUserChoice must be set to -1.");return e.sendAssertionRequest()}))},n}(e.SimpleCancellationActionDriver);e.ActionDriverInformation=n}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(o){var r=function(t){function e(e,o){var r=t.call(this,e)||this;return e instanceof n.SerializationContext||(r._idpSessionContinuationData=o),r}return F(e,t),Object.defineProperty(e.prototype,"idpSessionContinuationData",{get:function(){return this._idpSessionContinuationData},enumerable:!0,configurable:!0}),e.prototype.createResumableProcess=function(t){return new i(t,this)},e.prototype.serializeTo=function(e){t.prototype.serializeTo.call(this,e),e.writePrimitive("idpSessionContinuation",this._idpSessionContinuationData)},e.prototype.serializeFrom=function(e){t.prototype.serializeFrom.call(this,e),this._idpSessionContinuationData=e.readPrimitive("idpSessionContinuation")},x([n.Serializable("ActionDriverInvokeIdpContinuation"),N("design:paramtypes",[Object,Object])],e)}(o.ResumableProcessActionContinuation);o.ActionDriverInvokeIdpContinuation=r;var i=function(o){function i(){return null!==o&&o.apply(this,arguments)||this}return F(i,o),i.prototype.extensionPointForIdp=function(){var t=this,n=i.idpExtensionPoint.first((function(e){return e.canHandleIdp(t.idpName)}));if(!n)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"Could not locate IDP handler plugin for idp "+this.idpName+".");return n},i.prototype.resume=function(t,n){var o=this;if(!(t instanceof r))throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid continuation type for ActionDriverInvokeIdp");return new Promise((function(e,r){o.extensionPointForIdp().resumeFromContinuation(t.idpSessionContinuationData,n).then((function(t){return o.processIdpResponse(t)})).then(e,r)}))},i.prototype.createContinuation=function(){return new r(this._action,this._activeIdpAuthSession&&this._activeIdpAuthSession.serializeContinuationData())},i.prototype.run=function(){var t=this;return new Promise((function(e,n){var o=t.extensionPointForIdp().createIdpAuthSession(t.idpName);t._activeIdpAuthSession=o,o.startSession(t._controlFlowProcessor._session.user.userHandle,t._action,t.policyAction(),t._clientContext),t._activeIdpAuthSession.invokeIdp().finally((function(){o.endSession(),t._activeIdpAuthSession=null})).then((function(e){return t.processIdpResponse(e)})).then(e,n)}))},Object.defineProperty(i.prototype,"idpName",{get:function(){return this._action.idp_name},enumerable:!0,configurable:!0}),i.prototype.processIdpResponse=function(t){return this.sendAssertionRequest(null,{idp_response:t.getResultPayload()})},i.idpExtensionPoint=new n.ExtensionPoint(t.tarsusplugin.TARSUS_EXTENSION_POINT_NAME_IDP_LOGIN_PROVIDER),i}(o.ResumableProcessActionDriver);o.ActionDriverInvokeIdp=i}(n.actiondrivers||(n.actiondrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(e){function n(t,n){return e.call(this,t,n)||this}return F(n,e),n.prototype.run=function(){var e=this;return this._sdk.log(t.LogLevel.Debug,(function(){return"Executing JSON data action."})),this.sendAssertionRequest().then((function(o){return e._sdk.log(t.LogLevel.Debug,(function(){return"Executing JSON data action: "+o})),n.handleJsonDataByUiHandler(e._uiHandler,o,o.data.json_data,e._policyAction,e._clientContext)}))},n.handleJsonDataByUiHandler=function(e,n,o,r,i){return e.processJsonData(o,r,i).then((function(e){if(e.getContinueProcessing())return n;throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.UserCanceled,"User cancelled a JSON action.")}))},n}(e.ActionDriver);e.ActionDriverJsonData=n}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(o){var r=function(o){function r(t,e){return o.call(this,t,e)||this}return F(r,o),r.prototype.doRunAction=function(){return M(this,void 0,void 0,(function(){var t,e,o,r,i;return q(this,(function(s){switch(s.label){case 0:t=this.extensionPointForKyc(),(e=t.createSession(this.action.vendor_name,this.action.payload)).startSession(this._controlFlowProcessor._clientContext,this.policyAction()),s.label=1;case 1:s.trys.push([1,8,9,10]),o=null,s.label=2;case 2:return o&&o.assertion_error_code!=n.Protocol.AssertionErrorCode.NotFinished?[3,7]:[4,e.collectKycData(o?o.data.payload:this.action.payload)];case 3:return(r=s.sent()).isControlRequest()?[2,this.handleControlRequest(r.getControlRequest())]:[3,4];case 4:return[4,this.handleUserResponse(r.getResponse())];case 5:o=s.sent(),s.label=6;case 6:return[3,2];case 7:return[2,o];case 8:return i=s.sent(),[2,Promise.reject(i)];case 9:return e.endSession(),[7];case 10:return[2]}}))}))},r.prototype.handleControlRequest=function(t){switch(this.logDebug((function(){return"Processing control request "+t.getRequestType()})),t.getRequestType()){case e.ControlRequestType.AbortAuthentication:return this.rejectedPromise(e.AuthenticationErrorCode.UserCanceled,"Scan qr code action canceled by user.");default:return this.rejectedPromise(e.AuthenticationErrorCode.AppImplementation,"Unsupported control request: "+t.getRequestType()+" for kyc action.")}},r.prototype.handleUserResponse=function(t){return M(this,void 0,void 0,(function(){var e,o;return q(this,(function(i){switch(i.label){case 0:return this.logDebug((function(){return"Processing kyc data"})),e=t.getPayload(),[4,this.sendAssertionRequest(r.AssertActionSendData,{payload:e})];case 1:o=i.sent(),this.logDebug((function(){return"Server result: "+o.assertion_error_code})),i.label=2;case 2:return o.assertion_error_code!=n.Protocol.AssertionErrorCode.ExternalProcessPending?[3,5]:[4,this.delay(3e3)];case 3:return i.sent(),[4,this.sendAssertionRequest(r.AssertActionPoll,{})];case 4:return o=i.sent(),this.logDebug((function(){return"Server result: "+o.assertion_error_code})),[3,2];case 5:return[2,o]}}))}))},r.prototype.extensionPointForKyc=function(){var t=this,n=r.kycExtensionPoint.firstNonNull((function(e){return e.canHandleProvider(t.action.vendor_name)?e:null}));if(!n)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"Could not locate KYC handler plugin for kyc provider "+this.action.vendor_name+".");return n},Object.defineProperty(r.prototype,"action",{get:function(){return this._action},enumerable:!0,configurable:!0}),r.prototype.rejectedPromise=function(t,n){return Promise.reject(new e.impl.AuthenticationErrorImpl(t,n))},r.prototype.logDebug=function(t){this._sdk.log(e.LogLevel.Debug,t)},r.prototype.delay=function(t){return this._sdk.host.createDelayedPromise(t)},r.AssertActionPoll="poll",r.AssertActionSendData="data",r.kycExtensionPoint=new n.ExtensionPoint(t.tarsusplugin.TARSUS_EXTENSION_POINT_NAME_KYC),r}(o.SimpleCancellationActionDriver);o.ActionDriverKyc=r}(n.actiondrivers||(n.actiondrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(o){function r(t,e){var n=o.call(this,t,e)||this;return n.isAssertionContainerNotComplete=!1,n}return F(r,o),r.prototype.strategyStatePerUserStorageKey=function(){return new e.TarsusKeyPath("per_user",this._controlFlowProcessor._session.user.guid.toString(),"promotion_strategy_state")},r.prototype.runActionWithCompletionFunctions=function(){var e=this;if(this._sdk.log(t.LogLevel.Debug,(function(){return"ActionDriverPromotion#runActionWithCompletionFunctions() started"})),this._action=this._action,this._action.assertions.length<1)return this._sdk.log(t.LogLevel.Info,(function(){return"runActionWithCompletionFunctions() Promotion has no assertions, finishing action."})),void this.completeWithDeclineAssertion();if(!this.shouldDisplayPromotion())return this._sdk.log(t.LogLevel.Info,(function(){return"runActionWithCompletionFunctions() Promotion stragety stop, finishing action."})),void this.completeWithDeclineAssertion();if(this._session=this._uiHandler.createRegistrationPromotionSession(this._controlFlowProcessor._session.user.displayName,this._policyAction),this._session){this._session.startSession(this._clientContext,this.policyAction());var o=this._action.options;this._session.promptIntroduction(o.title,o.text,o.ok_button,o.decline_button).then((function(t){if(e.handlePromotionInputControlOrEscapeRequest(t)){for(var o=e._action.assertions,r=new Array,i=0;i<o.length;i++){var s=n.AuthenticationMenuAuthenticator.fromPromotionAction(o[i],e);s.getSupportedOnDevice()&&r.push(s)}e._authenticatorList=r,e.suggestAuthenticators()}}))}else this._rejectionFunction(t.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createRegistrationPromotionSession."))},r.prototype.sendAssertionRequest=function(t,n,r){var i=this;return this.isAssertionContainerNotComplete=!1,o.prototype.sendAssertionRequest.call(this,t,n,r).then((function(t){return t.assertion_error_code==e.Protocol.AssertionErrorCode.AssertionContainerNotComplete&&(t.assertion_error_code=void 0,i.isAssertionContainerNotComplete=!0),t}))},r.prototype.suggestAuthenticators=function(n){var o=this;if(void 0===n&&(n=this._authenticatorList),this._currentAuthentictorSelected){var r=n.indexOf(this._currentAuthentictorSelected);r>-1&&n.splice(r,1)}this._session.setPromotedAuthenticators(n).then((function(n){if(o.handlePromotionInputControlOrEscapeRequest(n)){var r=n.getSelectedAuthenticator();o._currentAuthentictorSelected=r,o.prepareForRunningAuthenticationDriver(r.authDriver)&&r.authDriver.runRegistration().then((function(n){if(n instanceof e.authenticationdrivers.AuthenticationDriverSessionResultAuthenticationCompleted)o.isAssertionContainerNotComplete?(o._sdk.log(t.LogLevel.Debug,(function(){return"suggestAuthenticators() callback result: promotion not completed. showing list again."})),o.suggestAuthenticators()):(o._sdk.log(t.LogLevel.Debug,(function(){return"suggestAuthenticators() callback result: promotion completed. finishing"})),o.completeAuthenticationWithAssertionResult(n.assertionResult));else if(n instanceof e.authenticationdrivers.AuthenticationDriverSessionResultSwitchAuthenticator)if(n.allowedAuthenticators){o._sdk.log(t.LogLevel.Debug,(function(){return"suggestAuthenticators() callback result: switch authentciator with allowed authenticators called"}));var r=n.allowedAuthenticators;o._currentAuthentictorSelected=null,o.suggestAuthenticators(r)}else o._sdk.log(t.LogLevel.Debug,(function(){return"suggestAuthenticators() callback result: switch authentciator called"})),o._currentAuthentictorSelected=null,o.suggestAuthenticators();else n instanceof e.authenticationdrivers.AuthenticationDriverSessionResultEscapeRequested?o.completeWithEscapeRequest(n.escapeRequest):(o._sdk.log(t.LogLevel.Error,(function(){return"suggestAuthenticators() unexpected callback result: stopping with error.'"})),o.completeAuthenticationWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Unknown authentication driver result type encountered during registration.")))}),(function(e){o._sdk.log(t.LogLevel.Error,(function(){return"suggestAuthenticators() error callback result: stopping with error. error: '"+e._data+"'"})),o.completeAuthenticationWithError(e)}))}else o._sdk.log(t.LogLevel.Debug,(function(){return"suggestAuthenticators() stopped by ControlRequest of type "+n.getControlRequest()}))}))},r.prototype.handlePromotionInputControlOrEscapeRequest=function(e){if(e.getActionEscapeRequest())return this.completeWithEscapeRequest(e.getActionEscapeRequest()),!1;if(!e.isControlRequest())return!0;switch(e.getControlRequest()){case t.PromotionControlRequest.Continue:return!0;case t.PromotionControlRequest.Skip:return this.completeWithDeclineAssertion(),!1;case t.PromotionControlRequest.Abort:return this.completeAuthenticationWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.UserCanceled,"User aborted/canceled")),!1;default:return this._sdk.log(t.LogLevel.Warning,(function(){return"handlePromotionInputControlRequest() received invalid PromotionInput, unsupported ControlRequest"})),!1}},r.prototype.sendDeclineAssertion=function(){return this.sendAssertionRequest(r.ASSERT_DECLINE)},r.prototype.completeWithDeclineAssertion=function(){var t=this;this.sendDeclineAssertion().then((function(e){t.completeAuthenticationWithAssertionResult(e)})).catch((function(e){t.completeAuthenticationWithError(e)}))},r.prototype.completeAuthenticationWithAssertionResult=function(t){this.terminateSession(),o.prototype.completeAuthenticationWithAssertionResult.call(this,t)},r.prototype.completeAuthenticationWithError=function(t){this.terminateSession(),o.prototype.completeAuthenticationWithError.call(this,t)},r.prototype.terminateSession=function(){this._session&&(this._session.endSession(),delete this._session)},Object.defineProperty(r.prototype,"availableAuthenticatorsForSwitching",{get:function(){return this.availableAuthenticators},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"availableAuthenticators",{get:function(){return this._authenticatorList.concat([])},enumerable:!0,configurable:!0}),r.prototype.shouldDisplayPromotion=function(){var e=this.readStrategyState();if(null==e||null==e.lastPromotionDate||null==e.loginsCounter)return this._sdk.log(t.LogLevel.Debug,(function(){return"shouldDisplayPromotion() first promotion. Stored data was empty."})),this.updateStrategyState(e={loginsCounter:1,lastPromotionDate:0}),!0;for(var n=!0,o=function(o){if(0==r.checkStrategy(o,e))return r._sdk.log(t.LogLevel.Debug,(function(){return"shouldDisplayPromotion() strategy stopped promotion. strategy type: "+o.type})),n=!1,"break"},r=this,i=0,s=this._action.options.strategies;i<s.length&&"break"!==o(s[i]);i++);return e.loginsCounter+=1,this.updateStrategyState(e),n},r.prototype.updateStrategyState=function(t){this._sdk.host.writeStorageKey(this.strategyStatePerUserStorageKey(),t)},r.prototype.readStrategyState=function(){var e=this._sdk.host.readStorageKey(this.strategyStatePerUserStorageKey());return null!=e.lastPromotionDate&&null!=e.loginsCounter?(this._sdk.log(t.LogLevel.Debug,(function(){return"Stored state found, "+JSON.stringify(e)})),e):(this._sdk.log(t.LogLevel.Debug,(function(){return"No stored state, trying to read legacy format"})),this.readLegacyStrategyStateFormat())},r.prototype.readLegacyStrategyStateFormat=function(){var n=this._sdk.host.readStorageKey(new e.TarsusKeyPath("stragety"));return null!=n.days&&null!=n.logins?(this._sdk.log(t.LogLevel.Debug,(function(){return"Reading from legacy format, "+JSON.stringify(n)})),{loginsCounter:n.logins,lastPromotionDate:n.days}):null},r.prototype.checkStrategy=function(t,n){if(t.type==e.Protocol.PromotionStrategyFrequency.LOGINS)return n.loginsCounter%t.value==0;if(t.type==e.Protocol.PromotionStrategyFrequency.DAYS){var o=new Date,r=new Date;r.setTime(n.lastPromotionDate);var i=new Date;return i.setDate(r.getDate()+t.value),i.getTime()<=o.getTime()&&(n.lastPromotionDate=o.getTime(),!0)}return!1},r.ASSERT_DECLINE="decline",r.ACTION_REGISTRATION="registration",r.ACTION_PROMOTION="registration_promotion",r}(n.ActionDriverAuthenticatorOp);n.ActionDriverPromotion=o}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(o){var r=function(o){function r(t,e){return o.call(this,t,e)||this}return F(r,o),r.prototype.doRunAction=function(){var o=this;this._sdk.log(e.LogLevel.Debug,(function(){return"Executing provision TOTP action."})),this._cfmAction=this._action;var r=n.totp.TotpPropertiesProcessor.createWithUser(this._controlFlowProcessor._session.user,this._sdk,this._clientContext,this._controlFlowProcessor._session),i=r.createTotpDriver(this._cfmAction.generator,this._cfmAction.otp_type);return i?(r.deleteProvisionForGenerator(this._cfmAction.generator),i.promiseProvisionOutput(this._cfmAction,this.policyAction(),this._clientContext,this._uiHandler).then((function(n){if(n instanceof t.tarsusplugin.TotpProvisionOutput)return o.sendAssertionRequest(null,n.getAssertionData()).then((function(t){return n.finalize(t),r.updateWithProvisionedGenerator(o._cfmAction,n),t}));if(n instanceof t.tarsusplugin.TotpProvisionEscapeRequest)return o.processEscapeRequest(n.getEscapeRequest());throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid TOTP provision output response")}))):(this._sdk.log(e.LogLevel.Error,(function(){return"failed to create TOTP driver"})),Promise.reject(new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"failed to create TOTP driver")))},r}(o.SimpleCancellationActionDriver);o.ActionDriverProvisionTotp=r}(n.actiondrivers||(n.actiondrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(n){function o(t,e){return n.call(this,t,e)||this}return F(o,n),o.prototype.toValidVaultPath=function(n){var o=e.TarsusKeyPath.fromString(n);if(!t.UserVault.isValidKeyPathForUserVault(o))throw this._sdk.log(t.LogLevel.Error,(function(){return"Invalid user vault path "+o})),new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid user vault path "+o);return o},o.prototype.doRunAction=function(){var n=this;this._sdk.log(t.LogLevel.Debug,(function(){return"Executing provision TOTP action."})),this._vaultAction=this._action;var o=Promise.resolve();return this._vaultAction.new_vaults.forEach((function(r){o=o.then((function(){var o=n.toValidVaultPath(r.vault.vault_id);n._sdk.log(t.LogLevel.Debug,(function(){return"Will provision vault "+o}));var i=r.vault.vault_type,s=e.vault.VaultTypes[i];return s?s.createNew(n._controlFlowProcessor._session.user,o,n,n._sdk,n._controlFlowProcessor._uiHandler,!1,r).then((function(){})):(n._sdk.log(t.LogLevel.Error,(function(){return"failed to find vault driver for type "+i})),Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"failed to create TOTP driver for type "+i)))}))})),(o=o.then((function(o){n._vaultAction.deleted_vaults.forEach((function(o){var r=n.toValidVaultPath(o);n._sdk.log(t.LogLevel.Debug,(function(){return"Will delete vault "+r})),e.vault.Vault.deleteVaultForUserWithId(n._controlFlowProcessor._session.user,r,n._sdk)}))}))).then((function(){return n.sendAssertionRequest()}))},o.prototype.getValidCancelOptions=function(){return[t.ControlRequestType.SelectMethod,t.ControlRequestType.ChangeMethod,t.ControlRequestType.RetryAuthenticator,t.ControlRequestType.CancelAuthenticator]},o.prototype.getValidErrorRecoveryOptions=function(e){return[t.AuthenticationErrorRecovery.RetryAuthenticator,t.AuthenticationErrorRecovery.ChangeAuthenticator,t.AuthenticationErrorRecovery.SelectAuthenticator,t.AuthenticationErrorRecovery.Fail]},o}(n.SimpleCancellationActionDriver);n.ActionDriverProvisionUserVault=o}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(o){function r(t,e){return o.call(this,t,e)||this}return F(r,o),r.prototype.runActionWithCompletionFunctions=function(){var o=this,r=this._action;this._sdk.log(t.LogLevel.Debug,(function(){return"Loading and validating authenticator description"}));for(var i=0;i<r.assertions.length;i++){var s=n.AuthenticationMenuAuthenticator.fromRegistrationAction(r.assertions[i],this);if(s.getSupportedOnDevice()){this._registeredAuthenticator=s,this._silentRegistration=!!r.assertions[i].silent;break}}if(this._registeredAuthenticator){var a=this._registeredAuthenticator.authDriver;this.prepareForRunningAuthenticationDriver(a)&&(this._sdk.log(t.LogLevel.Debug,(function(){return"Starting auth registeration"})),a.runRegistration().then((function(n){n instanceof e.authenticationdrivers.AuthenticationDriverSessionResultAuthenticationCompleted?o.completeAuthenticationWithAssertionResult(n.assertionResult):n instanceof e.authenticationdrivers.AuthenticationDriverSessionResultEscapeRequested?o.completeWithEscapeRequest(n.escapeRequest):o.completeAuthenticationWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Unknown authentication driver result type encountered during registration."))}),(function(e){o._sdk.log(t.LogLevel.Debug,(function(){return"Received authentication driver error "+e})),o.completeAuthenticationWithError(e)})))}else this.completeAuthenticationWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"No supported authenticator listed in registeration request."))},Object.defineProperty(r.prototype,"availableAuthenticatorsForSwitching",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"availableAuthenticators",{get:function(){return[this._registeredAuthenticator]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isSilentRegistration",{get:function(){return this._silentRegistration},enumerable:!0,configurable:!0}),r}(n.ActionDriverAuthenticatorOp);n.ActionDriverRegistration=o}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(e){function n(t,n){return e.call(this,t,n)||this}return F(n,e),n.prototype.run=function(){var e=this;return this._sdk.log(t.LogLevel.Debug,(function(){return"Executing scan qr action."})),new Promise((function(n,o){var r=e._action,i=t.QrCodeFormat.Alphanumeric;if(r.qr_code_format_type&&(i=t.QrCodeFormatImpl.fromAssertionFormat(r.qr_code_format_type)),e._session=e._uiHandler.createScanQrSession(e._policyAction,e._clientContext),!e._session)throw t.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createScanQrSession.");e._session.startSession(e._clientContext,e.policyAction()),e._session.getScanQrResponse(r.instructions,i).then((function(n){if(n.isControlRequest())return e.processControlRequest(n.getControlRequest());if(null!=n.getActionEscapeRequest())return e.processEscapeRequest(n.getActionEscapeRequest());var o={qr_content:n.getResponse().getQrCodeResult().getQrCode()};return e._sdk.log(t.LogLevel.Debug,(function(){return"Asserting scan qr: "+o.qr_content})),e.sendAssertionRequest(null,o).catch((function(n){throw e._sdk.log(t.LogLevel.Error,(function(){return"Scan qr sendAssertionRequest error: "+n})),n}))})).catch((function(n){throw e._sdk.log(t.LogLevel.Error,(function(){return"Scan qr action error: "+n})),n})).finally((function(){e._session.endSession(),delete e._session})).then(n,o)}))},n.prototype.processControlRequest=function(e){var n=this;return new Promise((function(o,r){switch(n._sdk.log(t.LogLevel.Debug,(function(){return"Processing control request "+e.getRequestType()})),e.getRequestType()){case t.ControlRequestType.CancelAuthenticator:r(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.UserCanceled,"Scan qr code action canceled by user."));break;default:throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Unsupported control request: "+e.getRequestType()+" for scan qr action.")}}))},n}(e.ActionDriver);e.ActionDriverScanQr=n}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o,r;r=t.sdk||(t.sdk={}),n=function(t){function e(e,n){return t.call(this,e,n)||this}return F(e,t),e.augmentAssertionDataWithSignedContent=function(t,e,n,o){var i=JSON.stringify(e);o.log(r.LogLevel.Debug,(function(){return"Signing consent payload: "+i}));var s=r.util.asciiToHex(i);return n.signHex(s).then((function(e){var n=r.util.hexToBase64(e);return t.sign_content_data={payload:i,signed_payload:n},t}))},e.prototype.run=function(){var t=this;this._sdk.log(r.LogLevel.Debug,(function(){return"Executing consent action."}));var n={params:this._controlFlowProcessor.initiatingRequest.body.params||{}};if(this._controlFlowProcessor.requestContext&&this._controlFlowProcessor.requestContext instanceof o.ApprovalControlFlowExecutionContext){var i=this._controlFlowProcessor.requestContext.approval;n.approval={approval_id:i.getApprovalId(),message:{title:i.getTitle(),details:i.getDetails()}}}return e.augmentAssertionDataWithSignedContent({},n,this._controlFlowProcessor._session.deviceSigningKeyPair,this._sdk).then((function(e){return t.sendAssertionRequest(null,e)}))},e}((e=(o=r.core||(r.core={})).actiondrivers||(o.actiondrivers={})).ActionDriver),e.ActionDriverSignContent=n}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(n){function o(t,e){return n.call(this,t,e)||this}return F(o,n),o.prototype.doRunAction=function(){var e=this;return this._sdk.log(t.LogLevel.Debug,(function(){return"Executing ticket wait action."})),new Promise((function(n,o){var r=e._action;if(e._session=e._uiHandler.createTicketWaitSession(e._policyAction,e._clientContext),!e._session)throw t.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createTicketWaitSession.");e._session.setWaitingTicket(new t.impl.TicketWaitingInformationImpl(r)),e._session.startSession(e.policyAction(),e._clientContext),e.pollServer().then((function(t){n(t)})).finally((function(){e._session.endSession(),delete e._session})).catch((function(n){e._sdk.log(t.LogLevel.Error,(function(){return"Wait for ticket action error: "+n})),o(n)}))}))},o.prototype.pollServer=function(){var n=this;return this._sdk.log(t.LogLevel.Debug,(function(){return"Asserting ticket wait poll"})),this.sendAssertionRequest(null,{}).then((function(t){return t.assertion_error_code==e.Protocol.AssertionErrorCode.ExternalProcessPending?n.inputLoop():t}))},o.prototype.longPoll=function(t){var e=this;return this.sendPollingRequest({type:"ticket",ticket_id:this._action.raw_ticket_id},t).then((function(t){return t.change_detected?e.pollServer():e.inputLoop()}))},o.prototype.inputLoop=function(){var e=this;return this._session.promiseInput().then((function(n){if(n.isControlRequest())return e.processControlRequest(n.getControlRequest());if(null!=n.getActionEscapeRequest())return e.processEscapeRequest(n.getActionEscapeRequest());var o=n.getResponse();if(o instanceof t.TicketWaitInputPollRequest){var r=o.getPollingTimeout();return r?e.longPoll(r):e.pollServer()}throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Expected polling request input response but got: "+o)}))},o.prototype.processControlRequest=function(e){var n=this;return new Promise((function(o,r){switch(n._sdk.log(t.LogLevel.Debug,(function(){return"Processing control request "+e.getRequestType()})),e.getRequestType()){case t.ControlRequestType.CancelAuthenticator:case t.ControlRequestType.AbortAuthentication:r(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.UserCanceled,"Wait for ticket action canceled by user."));break;default:throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Unsupported control request: "+e.getRequestType()+" for ticket wait action.")}}))},o}(n.SimpleCancellationActionDriver);n.ActionDriverTicketWait=o}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(n){function o(t,e){return n.call(this,t,e)||this}return F(o,n),o.prototype.runActionWithCompletionFunctions=function(){this._action=this._action,this._sdk.log(t.LogLevel.Debug,(function(){return"Started unregister action!"})),e.AuthenticationMenuAuthenticator.fromUnregistrationAction(this._action,this).authDriver.runUnregistration().then(this._completionFunction,this._rejectionFunction)},Object.defineProperty(o.prototype,"availableAuthenticators",{get:function(){return this._availableAuthenticators.concat([])},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isSilentRegistration",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isPlaceholder",{get:function(){return 0==this._action.method.indexOf("placeholder")},enumerable:!0,configurable:!0}),o.prototype.sendUnregisterAssertion=function(){return this.sendAssertionRequest()},o}(e.ActionDriverAuthenticatorOp);e.ActionDriverUnregistration=n}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(n){var o,r;o=n.dyadic||(n.dyadic={}),r=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return F(o,n),o.prototype.run=function(){var n=this;return Promise.resolve().then((function(o){return"false"==n._sdk.host.queryHostInfo(t.sdkhost.HostInformationKey.DyadicPresent)?Promise.reject(new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Dyadic capability is not present (is Dyadic SDK integrated?)")):n.issueDyadicRequest().then((function(t){return n.sendAssertionRequest(null,n.buildAssertionData(t)).then((function(o){var r=n.dyadicServerResponseFromAssertionResponse(o);return r?t.finalize(r).then((function(t){return o})):Promise.reject(new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Dyadic data missing from server response"))}))}))})).catch((function(t){var o=e.impl.AuthenticationErrorImpl.ensureAuthenticationError(t),r={msg:o.getMessage(),code:o.getErrorCode(),data:o.getData()};return n.sendErrorReportAssertionRequest(r).finally((function(){throw t}))}))},o.prototype.dyadicServerResponseFromAssertionResponse=function(t){var e=t.data&&t.data.dyadic;return e&&e.server_response},o.prototype.buildAssertionData=function(t){var e={requestData:"request_data",requestPayload:"request_payload",proxyPayload:"proxy_payload"},n=t.getServerRequest();Object.keys(e).forEach((function(t){var o=e[t];n[o]=n[t],delete n[t];var r=n[o];r&&(r.original_data=r.originalData,delete r.originalData)}));var o={dyadic:n};return o.dyadic.token_uid=t.getTokenId()||this._controlFlowProcessor._session.deviceId(),o},o}(n.ActionDriver),o.ActionDriverDyadic=r}(n.actiondrivers||(n.actiondrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.issueDyadicRequest=function(){var t=this._action,e=this._controlFlowProcessor._session.user.guid.toString();return this._sdk.host.dyadicEnroll(e,t.server_info)},e}(t.ActionDriverDyadic);t.ActionDriverDyadicEnroll=e}(t.dyadic||(t.dyadic={}))}(t.actiondrivers||(t.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){!function(e){var n=function(){function t(){}return t.prototype.getServerRequest=function(){return this._serverRequest},t.prototype.getTokenId=function(){return this._signHandle.getTokenId()},t.prototype.finalize=function(t){var e=this,n=t,o=this._signHandle.finalize(n.server_response);return n.otp_token_refresh&&Object.keys(n.otp_token_refresh).forEach((function(t){o=o.then((function(o){return e._refreshTokenHandles[t].finalize(n.otp_token_refresh[t])}))})),o},t.create=function(e,n,o){var r=new t;return r._refreshTokenHandles=e,r._signHandle=n,r._serverRequest=o,r},t}(),o=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return F(o,e),o.prototype.issueDyadicRequest=function(){var e=this,o=this._action,r=t.util.asciiToHex(o.assertion_id+this._controlFlowProcessor.challenge),i=this._controlFlowProcessor._session.user.guid.toString();return this._sdk.host.dyadicSign(i,r).then((function(t){var r={},i=t.getServerRequest(),s=Promise.resolve(!0);return o.otp_token_uids&&0<o.otp_token_uids.length&&(i.otp_token_refresh={},o.otp_token_uids.forEach((function(t){s=s.then((function(n){return e._sdk.host.dyadicRefreshToken(t).then((function(e){return r[t]=e,i.otp_token_refresh[t]=e.getServerRequest(),!0}))}))}))),s.then((function(e){return n.create(r,t,i)}))}))},o.prototype.dyadicServerResponseFromAssertionResponse=function(t){return t.data&&t.data.dyadic},o}(e.ActionDriverDyadic);e.ActionDriverDyadicSign=o}(e.dyadic||(e.dyadic={}))}(e.actiondrivers||(e.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.issueDyadicRequest=function(){var t=this._controlFlowProcessor._session.user.guid.toString();return this._sdk.host.dyadicDelete(t)},e}(t.ActionDriverDyadic);t.ActionDriverDyadicDelete=e}(t.dyadic||(t.dyadic={}))}(t.actiondrivers||(t.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){!function(t){t.ActionDrivers={confirmation:t.ActionDriverConfirmation,information:t.ActionDriverInformation,json_data:t.ActionDriverJsonData,authentication:t.ActionDriverAuthentication,registration:t.ActionDriverRegistration,unregistration:t.ActionDriverUnregistration,provision_totp:t.ActionDriverProvisionTotp,disable_totp:t.ActionDriverDisableTotp,sign_content:t.ActionDriverSignContent,form:t.ActionDriverForm,registration_promotion:t.ActionDriverPromotion,scan_qr:t.ActionDriverScanQr,wait_for_ticket:t.ActionDriverTicketWait,dyadic_enroll:t.dyadic.ActionDriverDyadicEnroll,dyadic_sign:t.dyadic.ActionDriverDyadicSign,dyadic_un_enroll:t.dyadic.ActionDriverDyadicDelete,debug_break:t.ActionDriverDebugBreak,invoke_idp:t.ActionDriverInvokeIdp,provision_user_vault:t.ActionDriverProvisionUserVault,kyc:t.ActionDriverKyc}}(t.actiondrivers||(t.actiondrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(){function o(t,e,n){this._externalCancelled=!1,this._actionDriver=t,this._authenticatorConfig=e,this._authenticatorDescription=n,this._sdk=t._sdk,this._uiHandler=t._uiHandler,this._clientContext=t._clientContext}return o.prototype.runAuthentication=function(e){return this._authenticationParameters=e,this.runMode(t.AuthenticatorSessionMode.Authentication)},o.prototype.runRegistration=function(){if(this._actionDriver.isSilentRegistration){var e=this;return n.instanceOfAuthenticationDriverSilentRegistrationSupport(this)?(e._sdk.log(t.LogLevel.Debug,(function(){return"Invoking silent registration for "+e._authenticatorDescription.getAuthenticatorId()})),this.runSilentRegistration()):Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AuthenticatorError,"Silent registration not supported for this authenticator"))}return this.runMode(t.AuthenticatorSessionMode.Registration)},o.prototype.runUnregistration=function(){var e=this,n=this._actionDriver;return this._sdk.currentUiHandler.handleAuthenticatorUnregistration(this._authenticatorDescription,n.isPlaceholder,n.policyAction(),this._clientContext).then((function(o){if(e._sdk.log(t.LogLevel.Debug,(function(){return"handleAuthenticatorUnregistration() result: "+o})),0==o.getUserChoice())return n.sendUnregisterAssertion().then((function(t){return e.handleUnregistrationAssertionResult(t),t}));var r=new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Unregistration failed due to app implementation rejecting unregistertion.");return Promise.reject(r)}))},o.prototype.onCancelRun=function(){this._externalCancelled=!0},Object.defineProperty(o.prototype,"user",{get:function(){return this._actionDriver._controlFlowProcessor._session.user},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"operationMode",{get:function(){return this._operationMode},enumerable:!0,configurable:!0}),o.prototype.terminateSession=function(){this._inputSession&&(this._inputSession.endSession(),delete this._inputSession)},o.prototype.completeAuthenticatorSessionWithResult=function(t){this.terminateSession(),this._completionFunction(t)},o.prototype.completeAuthenticatorSessionWithError=function(e){try{this.terminateSession()}catch(e){this._sdk.log(t.LogLevel.Warning,(function(){return"Can't dismiss authenticator session during error reporting."}))}this._rejectionFunction(e)},o.prototype.handleInputOrControlResponse=function(e){try{e.isControlRequest()?this.processControlRequest(e.getControlRequest()):null!=e.getActionEscapeRequest()?this.completeAuthenticatorSessionWithResult(new n.AuthenticationDriverSessionResultEscapeRequested(e.getActionEscapeRequest())):this._operationMode==t.AuthenticatorSessionMode.Authentication?this.handleAuthenticationInputResponse(e.getResponse()):this.handleRegistrationInputResponse(e.getResponse())}catch(e){this.performErrorRecoveryForError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}},o.prototype.processRegisterAssertion=function(e,o){var r=this;this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"register",e,o).then((function(e){r.handleRegisterAssertionResult(e)||(r._sdk.log(t.LogLevel.Info,(function(){return"Registration session done."})),r.completeAuthenticatorSessionWithResult(new n.AuthenticationDriverSessionResultAuthenticationCompleted(e)))})).catch((function(e){r._sdk.log(t.LogLevel.Error,(function(){return"Perform error recovery with server error "+e})),r.performErrorRecoveryForError(e)}))},o.prototype.processAuthenticateAssertion=function(e,o){var r=this;this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"authenticate",e,o).then((function(i){r.handleAuthenticateAssertionResult(i,r._authenticatorDescription,"authenticate",e,o)||(r._sdk.log(t.LogLevel.Info,(function(){return"Authenticator session done."})),r.completeAuthenticatorSessionWithResult(new n.AuthenticationDriverSessionResultAuthenticationCompleted(i)))})).catch((function(e){r._sdk.log(t.LogLevel.Error,(function(){return"Perform error recovery with server error "+e})),r.performErrorRecoveryForError(e)}))},o.prototype.runMode=function(e){var n=this;return new Promise((function(o,r){if(n._completionFunction=o,n._rejectionFunction=r,n._operationMode=e,n._inputSession=n.createAuthenticatorSession(),!n._inputSession)throw t.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from authenticator session creation call.");n._inputSession.startSession(n._authenticatorDescription,n._operationMode,n._actionDriver.policyAction(),n._clientContext),n.authOrRegInStartedSession(!1)})).catch((function(e){throw t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e)}))},o.prototype.handleGeneralAssertionResult=function(o){return this._sdk.log(t.LogLevel.Debug,(function(){return"Authenticator assertion response "+JSON.stringify(o)})),o.data&&(this._sdk.log(t.LogLevel.Debug,(function(){return"Processing authenticator assertion response: updating assertion authenticator description"})),this._authenticatorDescription.updateWithAssertionResult(o.data)),o.state!=e.Protocol.AuthSessionState.Pending&&(this._sdk.log(t.LogLevel.Info,(function(){return"Authenticator session complete; status "+o.state})),this.completeAuthenticatorSessionWithResult(new n.AuthenticationDriverSessionResultAuthenticationCompleted(o)),!0)},o.prototype.handleUnregistrationAssertionResult=function(t){},o.prototype.handleRegisterAssertionResult=function(e){return!!this.handleGeneralAssertionResult(e)||!!e.assertion_error_code&&(this._sdk.log(t.LogLevel.Error,(function(){return"handleRegisterAssertionResult() Assertion error encoutered. Starting error recovery."})),this.performErrorRecoveryForError(t.impl.AuthenticationErrorImpl.errorForAssertionResponse(e)),!0)},o.prototype.handleAuthenticateAssertionResult=function(n,o,r,i,s){if(this.handleGeneralAssertionResult(n))return!0;if(n.assertion_error_code)switch(n.assertion_error_code){case e.Protocol.AssertionErrorCode.MustRegister:return this._sdk.log(t.LogLevel.Info,(function(){return"handleAuthenticateAssertionResult() Authenticator expired; must register"})),this.handleRegistrationDueToExpiration(),!0;case e.Protocol.AssertionErrorCode.FailOver:return this._sdk.log(t.LogLevel.Info,(function(){return"handleAuthenticateAssertionResult() Failover signalled"})),this.handleFallback(),!0;default:return this._sdk.log(t.LogLevel.Error,(function(){return"handleAuthenticateAssertionResult() Assertion error encoutered. Starting error recovery. 2"})),this.performErrorRecoveryForError(t.impl.AuthenticationErrorImpl.errorForAssertionResponse(n)),!0}else if(this._authenticatorDescription.getExpired())return this._sdk.log(t.LogLevel.Info,(function(){return"Authenticator expired; must register"})),this.handleRegistrationDueToExpiration(),!0;return!1},o.prototype.processAuthFailureAssertionAndHandleError=function(n,o){var r=this;this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"auth_failure",{num_of_failures:o}).then((function(o){if(!r.handleGeneralAssertionResult(o)){if(o.assertion_error_code)switch(o.assertion_error_code){case e.Protocol.AssertionErrorCode.FailOver:return r._sdk.log(t.LogLevel.Info,(function(){return"Failover signalled during local failure report"})),r.handleFallback(),!0}n=t.impl.AuthenticationErrorImpl.augmentErrorData(n,o.data),r.performErrorRecoveryForError(n)}}),(function(e){var n=t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e);r._sdk.log(t.LogLevel.Error,(function(){return"Error ${authError} signalled during local failure report"})),r.performErrorRecoveryForError(n,!0)}))},o.prototype.handleRegistrationDueToExpiration=function(){this._inputSession.changeSessionModeToRegistrationAfterExpiration(),this._operationMode=t.AuthenticatorSessionMode.Registration,this.registerInStartedSession(!1)},o.prototype.authOrRegInStartedSession=function(e){this._operationMode==t.AuthenticatorSessionMode.Authentication?this.authenticateInStartedSession(e):this.registerInStartedSession(e)},o.prototype.processControlRequest=function(e){switch(this._sdk.log(t.LogLevel.Debug,(function(){return"Processing control request "+e.getRequestType()})),e.getRequestType()){case t.ControlRequestType.AbortAuthentication:this.completeAuthenticatorSessionWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.UserCanceled,"Authentication cancelled due to abort control request."));break;case t.ControlRequestType.ChangeMethod:this.completeAuthenticatorSessionWithResult(new n.AuthenticationDriverSessionResultSwitchAuthenticator(null,this.getAuthenticationActionOtherAuthenticators()));break;case t.ControlRequestType.SelectMethod:this.completeAuthenticatorSessionWithResult(new n.AuthenticationDriverSessionResultSwitchAuthenticator);break;case t.ControlRequestType.CancelAuthenticator:this.invokeUiHandlerCancellation();break;case t.ControlRequestType.RetryAuthenticator:this.authOrRegInStartedSession(!0);break;default:this.completeAuthenticatorSessionWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid ControlRequestType value during authentication session."))}},o.prototype.invokeUiHandlerCancellation=function(){var e=this;if(this._externalCancelled)this.processControlRequest(t.ControlRequest.create(t.ControlRequestType.AbortAuthentication));else{var n=[t.ControlRequestType.RetryAuthenticator,t.ControlRequestType.AbortAuthentication];this.getAuthenticationActionOtherAuthenticators().length>0&&n.push(t.ControlRequestType.ChangeMethod),this._actionDriver.availableAuthenticatorsForSwitching.length>0&&n.push(t.ControlRequestType.SelectMethod),this._uiHandler.controlOptionForCancellationRequestInSession(n,this._inputSession).then((function(o){o.getRequestType()!=t.ControlRequestType.CancelAuthenticator?n.indexOf(o.getRequestType())<0?e.completeAuthenticatorSessionWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"controlOptionForCancellationRequestInSession returned an invalid option.")):e.processControlRequest(o):e.completeAuthenticatorSessionWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"controlOptionForCancellationRequestInSession returned CancelAuthenticator which is an invalid option."))}))}},o.prototype.getAuthenticationActionOtherAuthenticators=function(){var t=this;return this._actionDriver.availableAuthenticatorsForSwitching.filter((function(e){return e!=t._authenticatorDescription}))},o.prototype.handleFallback=function(){var e=this;if(this._authenticatorDescription.fallback){var o=[t.AuthenticatorFallbackAction.Retry,t.AuthenticatorFallbackAction.Cancel],r=null,i=this._authenticatorDescription.fallback.method;i?(r=this._actionDriver.availableAuthenticators.filter((function(t){return t.getAuthenticatorId()==i}))[0])&&o.push(t.AuthenticatorFallbackAction.Fallback):this.getAuthenticationActionOtherAuthenticators().length>0&&o.push(t.AuthenticatorFallbackAction.AuthMenu),this._uiHandler.selectAuthenticatorFallbackAction(o,r,this._inputSession,this._actionDriver.policyAction(),this._clientContext).then((function(i){switch(e._sdk.log(t.LogLevel.Debug,(function(){return"Fallback action selected "+i})),o.indexOf(i)<0&&(e._sdk.log(t.LogLevel.Error,(function(){return"Invalid fallback action selected: "+i+" not in "+o})),e.completeAuthenticatorSessionWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Invalid fallback action selected by callback."))),i){case t.AuthenticatorFallbackAction.Fallback:case t.AuthenticatorFallbackAction.AuthMenu:e.completeAuthenticatorSessionWithResult(new n.AuthenticationDriverSessionResultSwitchAuthenticator(r));break;case t.AuthenticatorFallbackAction.Retry:e.authOrRegInStartedSession(!0);break;case t.AuthenticatorFallbackAction.Cancel:e.completeAuthenticatorSessionWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.UserCanceled,"User cancel in response to fallback action."))}}))}else this.completeAuthenticatorSessionWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Cannot handle a fallback error without fallback specification in action."))},o.prototype.recoveryOptionsForError=function(e,n){var o=[t.AuthenticationErrorRecovery.Fail];return[t.AuthenticationErrorCode.AllAuthenticatorsLocked,t.AuthenticationErrorCode.AppImplementation,t.AuthenticationErrorCode.ControlFlowExpired,t.AuthenticationErrorCode.SessionRequired,t.AuthenticationErrorCode.InvalidDeviceBinding,t.AuthenticationErrorCode.UserCanceled].indexOf(e.getErrorCode())>=0||(n||!this._authenticatorDescription.getEnabled()||this._operationMode==t.AuthenticatorSessionMode.Authentication&&e.getErrorCode()==t.AuthenticationErrorCode.AuthenticatorExternalConfigError||o.push(t.AuthenticationErrorRecovery.RetryAuthenticator),this.getAuthenticationActionOtherAuthenticators().length>0&&o.push(t.AuthenticationErrorRecovery.ChangeAuthenticator),this._actionDriver.availableAuthenticatorsForSwitching.length>0&&o.push(t.AuthenticationErrorRecovery.SelectAuthenticator)),o},o.prototype.performErrorRecoveryForError=function(e,n){var o=this,r=this.recoveryOptionsForError(e,n),i=this.defaultRecoveryForError(e);r.indexOf(i)<0&&(i=r.indexOf(t.AuthenticationErrorRecovery.SelectAuthenticator)>=0?t.AuthenticationErrorRecovery.SelectAuthenticator:t.AuthenticationErrorRecovery.Fail),this._inputSession.promiseRecoveryForError(e,r,i).then((function(n){o._sdk.log(t.LogLevel.Debug,(function(){return"Error recovery selected "+n})),o._sdk.log(t.LogLevel.Debug,(function(){return"recover from error: "+e.getErrorCode()})),r.indexOf(n)<0&&(o._sdk.log(t.LogLevel.Error,(function(){return"Invalid error recovery option from callback: "+n+" not in "+r})),o.completeAuthenticatorSessionWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Invalid error recovery action selected by callback."))),o.handleErrorRecoveryAction(n,e)}))},o.prototype.handleErrorRecoveryAction=function(e,o){switch(e){case t.AuthenticationErrorRecovery.RetryAuthenticator:this.authOrRegInStartedSession(!0);break;case t.AuthenticationErrorRecovery.ChangeAuthenticator:this.completeAuthenticatorSessionWithResult(new n.AuthenticationDriverSessionResultSwitchAuthenticator(null,this.getAuthenticationActionOtherAuthenticators()));break;case t.AuthenticationErrorRecovery.SelectAuthenticator:this.completeAuthenticatorSessionWithResult(new n.AuthenticationDriverSessionResultSwitchAuthenticator);break;case t.AuthenticationErrorRecovery.Fail:default:this.completeAuthenticatorSessionWithError(o)}},o.prototype.defaultRecoveryForError=function(e){return this._operationMode==t.AuthenticatorSessionMode.Authentication?!this._authenticatorDescription.getLocked()&&this._authenticatorDescription.getRegistered()&&this._authenticatorDescription.getEnabled()&&e.getErrorCode()!=t.AuthenticationErrorCode.AuthenticatorLocked&&e.getErrorCode()!=t.AuthenticationErrorCode.AllAuthenticatorsLocked?t.AuthenticationErrorRecovery.RetryAuthenticator:e.getErrorCode()!=t.AuthenticationErrorCode.AllAuthenticatorsLocked?t.AuthenticationErrorRecovery.ChangeAuthenticator:t.AuthenticationErrorRecovery.Fail:t.AuthenticationErrorRecovery.RetryAuthenticator},o}();n.AuthenticationDriver=o}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(e){function n(t,n,o){return e.call(this,t,n,o)||this}return F(n,e),n.prototype.authenticateInStartedSession=function(e){var n=this;this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(e){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},n.prototype.registerInStartedSession=function(e){var n=this;this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(e){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},n.prototype.handleAuthenticationInputResponse=function(e){var n;try{n=this.generateAssertionDataForInputResponse(e)}catch(e){return void this.performErrorRecoveryForError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}this.processAuthenticateAssertion(n)},n.prototype.handleRegistrationInputResponse=function(e){try{var n=this.generateAssertionDataForInputResponse(e)}catch(e){return void this.performErrorRecoveryForError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}this.processRegisterAssertion(n)},n.prototype.generateAssertionDataForInputResponse=function(t){return{secret:this.generateSecretToSignForInputResponse(t)}},n}(e.AuthenticationDriver);e.AuthenticationDriverCentralizedSecretInputBased=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(){function n(t){this._authenticationDriverCtor=t}return n.prototype.createAuthenticationDriver=function(t,e,n){return new this._authenticationDriverCtor(t,e,n)},n.prototype.evaluateLocalRegistrationStatus=function(e){return t.AuthenticatorRegistrationStatus.Registered},n.prototype.isSupportedOnDevice=function(t){return!0},n.prototype.suggestParameters=function(t,e){return[]},n.refreshInvalidatedAuthenticatorsEnrollments=function(t){return new Promise((function(n,o){var r=new Array;for(var i in t.user.localEnrollments)r.push(e.AuthenticatorDrivers[t.user.localEnrollments[i].authenticatorId].checkAuthenticatorInvalidatedAndNotifyUIHandler(t));Promise.all(r).then((function(t){n(t)})).catch((function(t){o(t)}))}))},n.prototype.checkAuthenticatorInvalidatedAndNotifyUIHandler=function(t){return Promise.resolve(!0)},n}();e.SimpleAuthenticationDriverDescriptor=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.getEnabled=function(){return this.getSupportedOnDevice()},n.getDescription=function(t,o){return new n(t,o,{},{status:e.Protocol.AuthenticationMethodStatus.Unregistered})},n}(n.AuthenticatorDescriptionImpl),r=function(r){function i(t,e){var n=r.call(this,t)||this;return n._authenticatorType=e,n}return F(i,r),i.prototype.evaluateLocalRegistrationStatus=function(n){var o=n.user.localEnrollments[this._authenticatorType];return o?o.validationStatus==e.LocalEnrollmentValidationStatus.Invalidated?t.AuthenticatorRegistrationStatus.LocallyInvalid:t.AuthenticatorRegistrationStatus.Registered:t.AuthenticatorRegistrationStatus.LocallyInvalid},i.prototype.checkAuthenticatorInvalidatedAndNotifyUIHandler=function(r){var i=this;return new Promise((function(s,a){r.sdk.log(t.LogLevel.Info,(function(){return"Checking if authenticator "+i._authenticatorType+" has become invalidated."}));var u=r.user.localEnrollments[i._authenticatorType];if(u.status==e.LocalEnrollmentStatus.Registered&&u.validationStatus!=e.LocalEnrollmentValidationStatus.Invalidated)if(n.AuthenticatorDrivers[i._authenticatorType].evaluateLocalRegistrationStatus(r)==t.AuthenticatorRegistrationStatus.LocallyInvalid){r.sdk.log(t.LogLevel.Info,(function(){return"Authenticator "+i._authenticatorType+" already became invalidated. Invalidating enrollment record and notifying ui handler."}));var c=o.getDescription(r,u.authenticatorId);e.LocalEnrollment.invalidateLocalRegistrationStatusAndNotifyUIHandler(r.getCurrentUserInteractionSessionProvider(),c).then((function(t){s(t)})).catch((function(t){a(t)}))}else s(!1);else s(!1)}))},i}(n.SimpleAuthenticationDriverDescriptor);n.AuthenticationDriverDescriptorLocal=r}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(n){var o=function(o){function r(){return o.call(this,n.AuthenticationDriverDeviceBiometrics,r.authenticatorName)||this}return F(r,o),r.prototype.evaluateLocalRegistrationStatus=function(i){var s=o.prototype.evaluateLocalRegistrationStatus.call(this,i);if(s!=e.AuthenticatorRegistrationStatus.Registered)return s;var a=i.user.localEnrollments[r.authenticatorName],u=n.AuthenticationDriverDeviceBiometrics.authenticatorKeyTagForUser(i.user,a.version,a.salt),c=i.sdk.host.getKeyPair(u,t.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey,t.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb);return c?(c.closeKeyPair(),e.AuthenticatorRegistrationStatus.Registered):e.AuthenticatorRegistrationStatus.LocallyInvalid},r.prototype.isSupportedOnDevice=function(e){var n=e.sdk.host.queryHostInfo(t.sdkhost.HostInformationKey.DeviceBiometricsSupported);return!!n&&"false"!=n},r.authenticatorName="device_biometrics",r}(n.AuthenticationDriverDescriptorLocal);n.AuthenticationDriverDescriptorDeviceBiometrics=o}(n.authenticationdrivers||(n.authenticationdrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(e){!function(e){var n=function(n){function o(){return n.call(this,e.AuthenticationDriverFace)||this}return F(o,n),o.prototype.isSupportedOnDevice=function(e){return"true"==e.sdk.host.queryHostInfo(t.sdkhost.HostInformationKey.ImageAcquitisionSupported)},o}(e.SimpleAuthenticationDriverDescriptor);e.AuthenticationDriverDescriptorFace=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(n){function o(t){var o=n.call(this,e.AuthenticationDriverFido)||this;return o._fidoPolicy=t,o}return F(o,n),o.prototype.isSupportedOnDevice=function(n){var o=this;n.sdk.log(t.LogLevel.Debug,(function(){return"Check FIDO authenticator support for "+JSON.stringify(o._fidoPolicy)}));var r=e.AuthenticationDriverFido.hasEligibleClientProvidersForPolicy(n.sdk,this._fidoPolicy);return r||n.sdk.log(t.LogLevel.Info,(function(){return"Encountered non-supported FIDO request."})),r},o.prototype.evaluateLocalRegistrationStatus=function(e){return t.AuthenticatorRegistrationStatus.Registered},o}(e.SimpleAuthenticationDriverDescriptor);e.AuthenticationDriverDescriptorFido=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.isSupportedOnDevice=function(e){return"true"===e.sdk.host.queryHostInfo(t.sdkhost.HostInformationKey.Fido2ClientPresent)},n}(e.SimpleAuthenticationDriverDescriptor);e.AuthenticationDriverDescriptorFido2=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(n){var o=function(o){function r(){return o.call(this,n.AuthenticationDriverFingerprint,r.authenticatorName)||this}return F(r,o),r.prototype.evaluateLocalRegistrationStatus=function(i){var s=o.prototype.evaluateLocalRegistrationStatus.call(this,i);if(s!=e.AuthenticatorRegistrationStatus.Registered)return s;var a=i.user.localEnrollments[r.authenticatorName],u=n.AuthenticationDriverFingerprint.authenticatorKeyTagForUser(i.user,a.version,a.salt),c=i.sdk.host.getKeyPair(u,t.sdkhost.KeyClass.StdSigningKey,t.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb);return c?(c.closeKeyPair(),e.AuthenticatorRegistrationStatus.Registered):e.AuthenticatorRegistrationStatus.LocallyInvalid},r.prototype.isSupportedOnDevice=function(e){return"true"==e.sdk.host.queryHostInfo(t.sdkhost.HostInformationKey.FingerprintSupported)},r.authenticatorName="fingerprint",r}(n.AuthenticationDriverDescriptorLocal);n.AuthenticationDriverDescriptorFingerprint=o}(n.authenticationdrivers||(n.authenticationdrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(){function t(t,e){this._targetIdentifier=t,this._description=e.describe(),this._deviceDetails=e}return t.prototype.getDescription=function(){return this._description},t.prototype.getDeviceIdentifier=function(){return this._targetIdentifier},t.prototype.getDeviceDetails=function(){return this._deviceDetails},t.__tarsusInterfaceName="MobileApproveTarget",t}();e.MobileApproveTargetImpl=n;var o=function(){function o(){}return o.prototype.evaluateLocalRegistrationStatus=function(e){return t.AuthenticatorRegistrationStatus.Registered},o.prototype.isSupportedOnDevice=function(t){return!0},o.prototype.suggestParameters=function(e,n){return o.createTargetsFromConfig(e).map((function(e){return t.AuthenticationActionParameterTargetSelection.create(e)}))},o.prototype.createAuthenticationDriver=function(t,n,o){return new e.AuthenticationDriverMobileApprove(t,n,o)},o.createTargetsFromConfig=function(e){return e.selectable_devices.map((function(e,o){var r=t.TargetDeviceDetailsImpl.fromServerFormat(e);return new n(e.device_id,r)}))},o.prototype.checkAuthenticatorInvalidatedAndNotifyUIHandler=function(t){return Promise.resolve(!0)},o}();e.AuthenticationDriverDescriptorMobileApprove=o}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(n){var o=function(o){function r(){return o.call(this,n.AuthenticationDriverNativeFace,r.authenticatorName)||this}return F(r,o),r.prototype.evaluateLocalRegistrationStatus=function(i){var s=o.prototype.evaluateLocalRegistrationStatus.call(this,i);if(s!=e.AuthenticatorRegistrationStatus.Registered)return s;var a=i.user.localEnrollments[r.authenticatorName],u=n.AuthenticationDriverNativeFace.authenticatorKeyTagForUser(i.user,a.version,a.salt),c=i.sdk.host.getKeyPair(u,t.sdkhost.KeyClass.StdSigningKey,t.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb);return c?(c.closeKeyPair(),e.AuthenticatorRegistrationStatus.Registered):e.AuthenticatorRegistrationStatus.LocallyInvalid},r.prototype.isSupportedOnDevice=function(e){return"true"==e.sdk.host.queryHostInfo(t.sdkhost.HostInformationKey.FaceIdKeyBioProtectionSupported)},r.authenticatorName="face_id",r}(n.AuthenticationDriverDescriptorLocal);n.AuthenticationDriverDescriptorNativeFace=o}(n.authenticationdrivers||(n.authenticationdrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(){function t(t,e,n,o,r,i){this._channelIndex=t,this._channelAssertionId=e,this._targetIdentifier=n,this._description=o,this._channel=r,this._deviceDetails=i}return t.prototype.getDescription=function(){return this._description},t.prototype.getChannel=function(){return this._channel},t.prototype.getTargetIdentifier=function(){return this._targetIdentifier},t.prototype.getChannelAssertionId=function(){return this._channelAssertionId},t.prototype.getChannelIndex=function(){return this._channelIndex},t.prototype.getDeviceDetails=function(){return this._deviceDetails},t.__tarsusInterfaceName="OtpTarget",t}();n.OtpTargetImpl=o;var r=function(){function r(){}return r.prototype.evaluateLocalRegistrationStatus=function(e){return t.AuthenticatorRegistrationStatus.Registered},r.prototype.isSupportedOnDevice=function(t){return!0},r.prototype.suggestParameters=function(e,n){return this.createTargetsFromConfig(e).map((function(e){return t.AuthenticationActionParameterTargetSelection.create(e)}))},r.prototype.createAuthenticationDriver=function(t,e,o){var r=this.createTargetsFromConfig(e);return new n.AuthenticationDriverOtp(t,e,r,o)},r.prototype.createTargetsFromConfig=function(n){return n.channels.map((function(n){var r;switch(n.type){case e.Protocol.AuthenticationMethodOtpChannelType.Email:r=t.OtpChannel.Email;break;case e.Protocol.AuthenticationMethodOtpChannelType.Sms:r=t.OtpChannel.Sms;break;case e.Protocol.AuthenticationMethodOtpChannelType.Voice:r=t.OtpChannel.VoiceCall;break;case e.Protocol.AuthenticationMethodOtpChannelType.Push:r=t.OtpChannel.PushNotification;break;default:r=t.OtpChannel.Unknown}return!n.targets&&n.target&&(n.targets={},n.targets[0]=n.target),n.targets||(n.targets={}),Object.keys(n.targets).map((function(e,i){var s=n.targets[e];switch(r){case t.OtpChannel.PushNotification:var a=t.TargetDeviceDetailsImpl.fromServerFormat(s);return new o(i,n.assertion_id,e,a.describe(),r,a);default:return new o(i,n.assertion_id,e,s,r,null)}}))})).reduce((function(t,e){return t.concat(e)}),[])},r.prototype.checkAuthenticatorInvalidatedAndNotifyUIHandler=function(t){return Promise.resolve(!0)},r}();n.AuthenticationDriverDescriptorOtp=r}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(){function t(t,e){this._targetIdentifier=t,this._description=e.describe(),this._deviceDetails=e}return t.prototype.getDescription=function(){return this._description},t.prototype.getDeviceIdentifier=function(){return this._targetIdentifier},t.prototype.getDeviceDetails=function(){return this._deviceDetails},t.__tarsusInterfaceName="TotpTarget",t}();e.TotpTargetImpl=n;var o=function(){function o(){}return o.prototype.evaluateLocalRegistrationStatus=function(e){return t.AuthenticatorRegistrationStatus.Registered},o.prototype.isSupportedOnDevice=function(t){return!0},o.prototype.suggestParameters=function(e,n){return o.createTargetsFromConfig(e).map((function(e){return t.AuthenticationActionParameterTargetSelection.create(e)}))},o.prototype.createAuthenticationDriver=function(t,n,o){return new e.AuthenticationDriverTotp(t,n,o)},o.createTargetsFromConfig=function(e){return e.selectable_devices?e.selectable_devices.map((function(e,o){var r=t.TargetDeviceDetailsImpl.fromServerFormat(e);return new n(e.device_id,r)})):[]},o.prototype.checkAuthenticatorInvalidatedAndNotifyUIHandler=function(t){return Promise.resolve(!0)},o}();e.AuthenticationDriverDescriptorTotp=o}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(e){!function(e){var n=function(n){function o(){return n.call(this,e.AuthenticationDriverVoice)||this}return F(o,n),o.prototype.isSupportedOnDevice=function(e){return"true"==e.sdk.host.queryHostInfo(t.sdkhost.HostInformationKey.AudioAcquitisionSupported)},o}(e.SimpleAuthenticationDriverDescriptor);e.AuthenticationDriverDescriptorVoice=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(o){function r(t,e,n){return o.call(this,t,e,n)||this}return F(r,o),Object.defineProperty(r.prototype,"lastObtainedKeyPair",{get:function(){return this._lastObtainedKeyPair},set:function(t){this._lastObtainedKeyPair&&this._lastObtainedKeyPair!=t&&this._lastObtainedKeyPair.closeKeyPair(),this._lastObtainedKeyPair=t},enumerable:!0,configurable:!0}),r.prototype.completeAuthenticatorSessionWithResult=function(r){this.operationMode===t.AuthenticatorSessionMode.Registration&&r instanceof n.AuthenticationDriverSessionResultAuthenticationCompleted&&(!r.assertionResult.assertion_error_code||r.assertionResult.assertion_error_code===e.Protocol.AssertionErrorCode.AssertionContainerNotComplete)&&(this._enrollmentRecordToCommit?(this._sdk.log(t.LogLevel.Debug,(function(){return"Updating local enrollment record on registration"})),this.user.updateEnrollmentRecord(this._enrollmentRecordToCommit)):this._sdk.log(t.LogLevel.Warning,(function(){return"No enrollment record to update."}))),this._enrollmentRecordToCommit=null,this.lastObtainedKeyPair=null,o.prototype.completeAuthenticatorSessionWithResult.call(this,r)},r.prototype.completeAuthenticatorSessionWithError=function(t){this.lastObtainedKeyPair=null,o.prototype.completeAuthenticatorSessionWithError.call(this,t)},r.prototype.registerInStartedSession=function(t){this._enrollmentRecordToCommit=null},r.prototype.calculateAssertionFieldsWithAuthenticatorKey=function(e){var n=this;return new Promise((function(o,r){var i=t.util.asciiToHex(n.localAuthenticatorChallenge());e.signHex(i).then((function(e){return{fch:t.util.hexToBase64(e)}})).then(o,r)}))},r.prototype.handleAuthenticationInputResponse=function(n){var o=this,r=this.user.localEnrollments[this.authenticatorType];r||this.performErrorRecoveryForError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.NoRegisteredAuthenticator,"Missing key for "+this.authenticatorType+" authenticator")),this.getKeyForEnrollmentDataAndInput(r,n).then((function(i){return o._sdk.log(t.LogLevel.Debug,(function(){return"Local authenticator key obtained; signing challenge"})),o.addRolloverDataIfNeeded(i,r,n).then((function(n){return o._externalCancelled?Promise.reject(o._actionDriver._controlFlowProcessor.createExternalCancellationError()):(o.lastObtainedKeyPair=n.key,o.calculateAssertionFieldsWithAuthenticatorKey(o.lastObtainedKeyPair).then((function(i){var s={};if(n.rolloverKeyData){o._sdk.log(t.LogLevel.Info,(function(){return"Local authenticator rollover requested"}));var a={};n.rolloverKeyData.key&&(a.key=n.rolloverKeyData.key.publicKeyToJson(),a.version=n.rolloverKeyData.schemeVersion),n.rolloverReason&&(a.reason=n.rolloverReason),n.rolloverOldKeyHash&&(a.expired_key={hash:n.rolloverOldKeyHash}),s.rollover=a,o._enrollmentRecordToCommit=r.duplicate(),o._enrollmentRecordToCommit.status=e.LocalEnrollmentStatus.Registered,o._enrollmentRecordToCommit.validationStatus=e.LocalEnrollmentValidationStatus.Validated,o._enrollmentRecordToCommit.salt=n.rolloverKeyData.salt,o._enrollmentRecordToCommit.version=n.rolloverKeyData.schemeVersion,o._enrollmentRecordToCommit.keyMaterial=n.rolloverKeyData.keyMeterial,o._enrollmentRecordToCommit.cryptoSettings=o._sdk.cryptoSettings,o._enrollmentRecordToCommit.authenticatorConfig=n.rolloverKeyData.authenticatorConfig,o._enrollmentRecordToCommit.publicKeyHash=t.util.calcPublicKeyHexStringEncodedSha256Hash(n.rolloverKeyData.key,o._sdk)}o.processAuthenticateAssertion(s,i)}),(function(t){return Promise.reject(t)})))})).catch((function(e){o.processLocalAuthenticatorError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))})).catch((function(e){o.processLocalAuthenticatorError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},r.prototype.addRolloverDataIfNeeded=function(e,n,o){var r=this;if(this.rolloverNeeded(n)){var i=this.getRolloverReason(n);return this._sdk.log(t.LogLevel.Debug,(function(){return"AuthenticatorKeyRoll: "+i})),this.generatePendingEnrollment(o,!0).then((function(o){return e.rolloverKeyData=o,e.rolloverReason=i,e.rolloverOldKeyHash=n.publicKeyHash?n.publicKeyHash:t.util.calcPublicKeyHexStringEncodedSha256Hash(e.key,r._sdk),Promise.resolve(e)}))}return Promise.resolve(e)},r.prototype.getNewOrUpdatedEnrollmentRecord=function(n){var o=this;this._sdk.log(t.LogLevel.Debug,(function(){return"Register "+o.authenticatorType+": fetching local enrollment record"}));var r=this.user.localEnrollments[this.authenticatorType],i=t.util.calcPublicKeyHexStringEncodedSha256Hash(n.key,this._sdk);return r||(this._sdk.log(t.LogLevel.Debug,(function(){return"Register "+o.authenticatorType+": Generating new local enrollment record"})),r=this.user.createEnrollmentRecord(this.authenticatorType,n.schemeVersion,n.salt,e.LocalEnrollmentStatus.Unregistered,i)),r.status=e.LocalEnrollmentStatus.Registered,r.validationStatus=e.LocalEnrollmentValidationStatus.Validated,r.salt=n.salt,r.version=n.schemeVersion,r.cryptoSettings=this._sdk.cryptoSettings,r.publicKeyHash=i,r.keyMaterial=n.keyMeterial,r.authenticatorConfig=n.authenticatorConfig,r},r.prototype.handleRegistrationInputResponse=function(e){var n=this;this._sdk.log(t.LogLevel.Debug,(function(){return"Register "+n.authenticatorType+": Generating pending enrollment data"})),this.generatePendingEnrollment(e).then((function(e){n._sdk.log(t.LogLevel.Debug,(function(){return"Register "+n.authenticatorType+": Signing registration assertion"}));var o=n.getNewOrUpdatedEnrollmentRecord(e);return n._enrollmentRecordToCommit=o,t.util.asciiToHex(n.localAuthenticatorChallenge()),n._externalCancelled?Promise.reject(n._actionDriver._controlFlowProcessor.createExternalCancellationError()):(n.lastObtainedKeyPair=e.key,n.calculateAssertionFieldsWithAuthenticatorKey(n.lastObtainedKeyPair).then((function(o){n._sdk.log(t.LogLevel.Debug,(function(){return"Register "+n.authenticatorType+": Preparing registration assertion"}));try{var r=L({public_key:e.key.publicKeyToJson(),version:e.schemeVersion},o);n.processRegisterAssertion(null,r)}finally{n.lastObtainedKeyPair=null}}),(function(t){return n.lastObtainedKeyPair=null,Promise.reject(t)})))})).catch((function(e){n.processLocalAuthenticatorError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},r.prototype.handleRegisterAssertionResult=function(t){return t.data&&t.data.update_vaults&&e.vault.MultiCredsVault.updateVaultsProtectingCreds(this.user,t.data.update_vaults,this._uiHandler,this._sdk),o.prototype.handleRegisterAssertionResult.call(this,t)},r.prototype.handleUnregistrationAssertionResult=function(n){var r=this,i=this.user.localEnrollments[this.authenticatorType];i?(i.status=e.LocalEnrollmentStatus.Unregistered,this.user.updateEnrollmentRecord(i),this.unregisterEnrollmentAssets(i)):this._sdk.log(t.LogLevel.Warning,(function(){return"Failed to find enrollment record for "+r.authenticatorType})),n.data&&n.data.update_vaults&&e.vault.MultiCredsVault.updateVaultsProtectingCreds(this.user,n.data.update_vaults,this._uiHandler,this._sdk),o.prototype.handleUnregistrationAssertionResult.call(this,n)},r.prototype.handleAuthenticateAssertionResult=function(n,r,i,s,a){if(this._enrollmentRecordToCommit)if(n.assertion_error_code){if(n.assertion_error_code==e.Protocol.AssertionErrorCode.AckRequired)return this.user.updateEnrollmentRecord(this._enrollmentRecordToCommit),n.data&&n.data.update_vaults&&e.vault.MultiCredsVault.updateVaultsProtectingCreds(this.user,n.data.update_vaults,this._uiHandler,this._sdk),this.processRolloverAckAssertionRequest(this._enrollmentRecordToCommit.publicKeyHash,a),this._enrollmentRecordToCommit=null,!0}else this._sdk.log(t.LogLevel.Debug,(function(){return"Pending commit for enrollment; checking rollover status."})),n.data&&n.data.rollover&&0==n.data.rollover.code?(this._sdk.log(t.LogLevel.Info,(function(){return"Updating local enrollment record on authentication result"})),this.user.updateEnrollmentRecord(this._enrollmentRecordToCommit)):this._sdk.log(t.LogLevel.Error,(function(){return"Received a rollover failure response from the server; aboting rollover."}));return this._enrollmentRecordToCommit=null,o.prototype.handleAuthenticateAssertionResult.call(this,n,r,i,s,a)},r.prototype.processRolloverAckAssertionRequest=function(e,n){this._sdk.log(t.LogLevel.Info,(function(){return"AuthenticatorKeyRollover: Processing ack assertion request..."})),n&&n.fch?this.processAuthenticateAssertion({rollover_ack:{hash:e}},{fch:n.fch}):this.completeAuthenticatorSessionWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Invalid assertion fields - missing fch"))},r.prototype.processLocalAuthenticatorError=function(t){this.performErrorRecoveryForError(t)},r.prototype.localAuthenticatorChallenge=function(){return this._actionDriver._controlFlowProcessor.challenge+this._authenticatorDescription.assertionId},r.prototype.getAuthenticatorEnrollmentConfig=function(){return null},r.prototype.onCancelRun=function(){o.prototype.onCancelRun.call(this),this.lastObtainedKeyPair&&(this.lastObtainedKeyPair=null)},r.prototype.shouldAllowBiometricFallbackButton=function(n){var o=this;if(!n)return!1;var r=this._actionDriver.availableAuthenticatorsForSwitching.filter((function(t){return t!=o._authenticatorDescription}));if(this._actionDriver instanceof e.actiondrivers.ActionDriverRegistration||this._actionDriver instanceof e.actiondrivers.ActionDriverAuthentication&&0==r.length)return!1;var i=n,s=i.getFallbackButtonTitle();if(!(s&&s.length>0))return!1;var a=i.getFallbackControlRequestType();switch(null==a&&(a=t.ControlRequestType.SelectMethod),a){case t.ControlRequestType.ChangeMethod:case t.ControlRequestType.SelectMethod:return this._actionDriver.availableAuthenticators.length>1;default:return!0}},r.prototype.publicKeyExpired=function(e){var n=this;if(!this._authenticatorConfig.public_key_expired)return!1;var o=e===this._authenticatorConfig.public_key_expired.hash;return this._sdk.log(t.LogLevel.Debug,(function(){return"AuthenticatorKeyRoll: authenticator "+n.authenticatorType+" \n                                                key hash matching expired key hash received from server: "+o})),o},r.prototype.getRolloverReason=function(t){return this.publicKeyExpired(t.publicKeyHash)?"Rollover of "+this.authenticatorType+" authenticator public key due to expiration":"Upgrading "+this.authenticatorType+" authenticator scheme from "+t.version+" to "+this.currentScheme},r.prototype.rolloverNeeded=function(t){return this.publicKeyExpired(t.publicKeyHash)||this.schemeVersionRequiresRollover(t.version)},r}(n.AuthenticationDriver);n.AuthenticationDriverLocal=o}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){!function(t){t.instanceOfAuthenticationDriverSilentRegistrationSupport=function(t){return t.runSilentRegistration}}(t.authenticationdrivers||(t.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){!function(n){!function(n){var o=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return F(r,o),r.prototype.unregisterEnrollmentAssets=function(t){var e=this.authenticatorKeyTagForScheme(t.version,t.salt);this._sdk.host.deleteKeyPair(e)},r.prototype.invokeCancellationUiOrEscape=function(){var o=this._actionDriver._policyAction.getEscapeOptions().filter((function(e){return e.getPresentation()==t.ts.mobile.sdk.ActionEscapeOptionPresentation.Cancel}))[0];if(o){this._sdk.log(e.LogLevel.Debug,(function(){return"Got cancel escape option; responding with that."}));var r=new e.ActionEscapeRequest;r._escapeOption=o,r._escapeParameters=null,this.completeAuthenticatorSessionWithResult(new n.AuthenticationDriverSessionResultEscapeRequested(r))}else this._sdk.log(e.LogLevel.Debug,(function(){return"Invoking UI cancellation handler."})),this.invokeUiHandlerCancellation()},r}(n.AuthenticationDriverLocal);n.AuthenticationDriverLocalPersistentKeyPairBased=o}(n.authenticationdrivers||(n.authenticationdrivers={}))}(e.core||(e.core={}))}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(e){!function(e){var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.schemeVersionRequiresRollover=function(e){return"v0"==e||"v1"==e||"v2"==e&&"true"!=this._sdk.host.queryHostInfo(t.sdkhost.HostInformationKey.StdSigningKeyIsHardwareProtectedSignAndEncryptKey)},n}(e.AuthenticationDriverLocalPersistentKeyPairBased);e.AuthenticationDriverLocalPersistentKeyPairBasedPostV2Scheme=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(e){var n=function(){function e(){}return e.deviceBiometricInput=function(t){var n=e.newBiometricPromptInfo();return n.setLocalizedTitle(t.getTitle()),n.setLocalizedSubtitle(t.getSubtitle()),n.setLocalizedPrompt(t.getPrompt()),n.setCancelButtonTitle(t.getCancelButtonTitle()),n},e.fingerprintInput=function(t){var n=e.newBiometricPromptInfo();n.setLocalizedPrompt(t.getPrompt());var o=t.getCancelButtonTitle();o&&0<o.length&&n.setCancelButtonTitle(o);var r=t.getFallbackButtonTitle();return r&&0<r.length&&n.setFallbackButtonTitle(r),n},e.nativeFaceInput=function(t){var n=e.newBiometricPromptInfo();n.setLocalizedPrompt(t.getPrompt());var o=t.getCancelButtonTitle();o&&0<o.length&&n.setCancelButtonTitle(o);var r=t.getFallbackButtonTitle();return r&&0<r.length&&n.setFallbackButtonTitle(r),n},e.newBiometricPromptInfo=function(){var e=new t.sdkhost.BiometricPromptInfo;return e.setCancelButtonTitle(null),e.setFallbackButtonTitle(null),e.setLocalizedPrompt(null),e.setLocalizedSubtitle(null),e.setLocalizedTitle(null),e},e}();e.BiometricPromptInfoFrom=n}(e.util||(e.util={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(o){var r=function(r){function i(t,e,n){return r.call(this,t,e,n)||this}return F(i,r),i.authenticatorKeySchemeForMigratedEnrollment=function(t){if(0===t.indexOf("v0")){var e=t.split("_");return 1<e.length?e[1]:"v3"}return null},i.authenticatorKeyTagForUserForMigratedEnrollment=function(t,e,n){var r=i.authenticatorKeySchemeForMigratedEnrollment(e);return r?o.AuthenticationDriverFingerprint.authenticatorKeyTagForUser(t,r,n):null},i.authenticatorKeyTagForUser=function(t,e,r){return i.authenticatorKeyTagForUserForMigratedEnrollment(t,e,r)||new n.TarsusKeyPath("per_user",t.guid.toString(),"local_auth_keys",o.AuthenticationDriverDescriptorDeviceBiometrics.authenticatorName,e,r)},i.prototype.schemeVersionRequiresRollover=function(t){var e=i.authenticatorKeySchemeForMigratedEnrollment(t);return!(!e||!r.prototype.schemeVersionRequiresRollover.call(this,e))},Object.defineProperty(i.prototype,"signChallengeMode",{get:function(){var e=this._sdk.host.queryHostInfo(t.sdkhost.HostInformationKey.DeviceBiometricsUsesSign);return!!e&&"true"==e},enumerable:!0,configurable:!0}),i.prototype.runSilentRegistration=function(){var t=this;return this.generateAuthenticatorKey().then((function(n){var r=t.getNewOrUpdatedEnrollmentRecord(n),i={public_key:n.key.publicKeyToJson(),encrypted_challenge_mode:!t.signChallengeMode,version:n.schemeVersion};return t._actionDriver.sendAuthenticatorAssertionRequest(t._authenticatorDescription,"register",null,i).then((function(n){if(n.assertion_error_code)throw e.impl.AuthenticationErrorImpl.errorForAssertionResponse(n);return t.user.updateEnrollmentRecord(r),new o.AuthenticationDriverSessionResultAuthenticationCompleted(n)}))}))},i.prototype.createAuthenticatorSession=function(){return this._sdk.log(e.LogLevel.Debug,(function(){return"Create DSA session."})),this._uiHandler.createDeviceBiometricsAuthSession(o.AuthenticationDriverDescriptorDeviceBiometrics.authenticatorName,this.user.displayName)},i.prototype.authenticateInStartedSession=function(t){var n=this;this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(t){return n.completeAuthenticatorSessionWithError(e.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},i.prototype.registerInStartedSession=function(t){var n=this;this._sdk.log(e.LogLevel.Debug,(function(){return"Register DSA in started session."})),r.prototype.registerInStartedSession.call(this,t),this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(t){return n.completeAuthenticatorSessionWithError(e.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},Object.defineProperty(i.prototype,"authenticatorType",{get:function(){return o.AuthenticationDriverDescriptorDeviceBiometrics.authenticatorName},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentScheme",{get:function(){return"v1"},enumerable:!0,configurable:!0}),i.prototype.processLocalAuthenticatorError=function(o){var r=this,i=o,s=0,a=Promise.resolve();if(i.getErrorCode()==e.AuthenticationErrorCode.Internal&&i.getData()){var u=i.getData();s=u[t.sdkhost.ErrorDataNumFailures]||0,i=e.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(u,"Biometrics")||i,(u[t.sdkhost.ErrorDataInternalError]==t.sdkhost.InternalErrorBiometricInvalidated||u[t.sdkhost.ErrorDataInternalError]==t.sdkhost.InternalErrorBiometricNotConfigured&&this._authenticatorDescription.getRegistered())&&(this._sdk.log(e.LogLevel.Debug,(function(){return"Biometric invalidated "+u[t.sdkhost.ErrorDataInternalError]})),a=n.LocalEnrollment.invalidateLocalRegistrationStatusAndNotifyUIHandler(this._actionDriver._controlFlowProcessor,this._authenticatorDescription))}a.catch((function(t){r._sdk.log(e.LogLevel.Error,t)})),a.finally((function(){if(i.getData(),i.getErrorCode()==e.AuthenticationErrorCode.UserCanceled)return r._sdk.log(e.LogLevel.Debug,(function(){return"Device biometrics captured user cancel error code."})),void r.invokeCancellationUiOrEscape();s&&r._operationMode==e.AuthenticatorSessionMode.Authentication?r.processAuthFailureAssertionAndHandleError(i,s):r.performErrorRecoveryForError(i)}))},i.prototype.getKeyForEnrollmentDataAndInput=function(n,o){var r=this;return new Promise((function(i,s){var a=o,u=r.authenticatorKeyTagForScheme(n.version,n.salt),c=r._sdk.host.getKeyPair(u,t.sdkhost.KeyClass.StdSigningKey,t.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb);if(!c){var l={};throw l[t.sdkhost.ErrorDataInternalError]=t.sdkhost.InternalErrorBiometricInvalidated,new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to authenticate with invalidated  biometrics.",l)}c.setBiometricPromptInfo(e.util.BiometricPromptInfoFrom.deviceBiometricInput(a),null,null),i({key:c})}))},i.prototype.generatePendingEnrollment=function(t,n){return this.generateAuthenticatorKey().then((function(o){return n||o.key.setBiometricPromptInfo(e.util.BiometricPromptInfoFrom.deviceBiometricInput(t),null,null),o}))},i.prototype.generateAuthenticatorKey=function(){var n,o=this;n=this._sdk.host.generateRandomHexString(24);var r=this.authenticatorKeyTagForScheme(this.currentScheme,n);return e.util.wrapPromiseWithActivityIndicator(this._uiHandler,this._actionDriver.policyAction(),this._clientContext,this._sdk.host.generateKeyPair(r,t.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey,t.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb,!0).then((function(t){return{key:t,salt:n,schemeVersion:o.currentScheme}}),(function(t){if(t.getErrorCode()==e.AuthenticationErrorCode.Internal&&t.getData()){var n=t.getData(),o=e.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(n,"Biometrics");if(o)throw o}throw t})))},i.prototype.calculateAssertionFieldsWithAuthenticatorKey=function(t){var n=this._authenticatorConfig;if(!this.signChallengeMode){if(this.operationMode==e.AuthenticatorSessionMode.Registration)return Promise.resolve({data:{encrypted_challenge_mode:!0}});var o=n&&n.encrypted_challenge;return o?new Promise((function(n,r){var i=e.util.base64ToHex(o);t.decrypt(i).then((function(t){return{fch:e.util.hexToBase64(t)}})).then(n,r)})):Promise.reject(new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Invalid server response for decrypt-mode authenticator. Missing encrypted challenge."))}return r.prototype.calculateAssertionFieldsWithAuthenticatorKey.call(this,t)},i.prototype.authenticatorKeyTagForScheme=function(t,e){return i.authenticatorKeyTagForUser(this.user,t,e)},i}(o.AuthenticationDriverLocalPersistentKeyPairBasedPostV2Scheme);o.AuthenticationDriverDeviceBiometrics=r}(n.authenticationdrivers||(n.authenticationdrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(n){function o(t,e,o){return n.call(this,t,e,o)||this}return F(o,n),o.prototype.getMaxStep=function(){return-1},o.prototype.authenticateInStartedSession=function(t){t||this.initializeFirstStep(),this.pumpStep()},o.prototype.registerInStartedSession=function(t){t||this.initializeFirstStep(),this.pumpStep()},o.prototype.pumpStep=function(){var e=this,n=this._inputSession;n.setInputStep(this._currentStepIndex,this.getMaxStep(),this._currentStep),n.promiseInput().then((function(t){return e.handleInputOrControlResponse(t)}),(function(n){return e.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))}))},o.prototype.handleAuthenticateAssertionResult=function(t,e,o,r,i){return!!this.handleStepManagementAssertionResult(t)||n.prototype.handleAuthenticateAssertionResult.call(this,t,e,o,r,i)},o.prototype.handleRegisterAssertionResult=function(t){return!!this.handleStepManagementAssertionResult(t)||n.prototype.handleRegisterAssertionResult.call(this,t)},o.prototype.handleStepManagementAssertionResult=function(t){if(t.assertion_error_code==e.Protocol.AssertionErrorCode.NotFinished){var n=this.prepareNextAuthenticationStep(t);return n!=this._currentStep&&(this._currentStep=n,this._currentStepIndex++),this.pumpStep(),!0}return t.assertion_error_code==e.Protocol.AssertionErrorCode.RepeatCurrentStep&&(this._currentStep=this.updateCurrentAuthenticationStep(t,this._currentStep),this.pumpStep(),!0)},o.prototype.initializeFirstStep=function(){this._currentStep=this.createInitialInputStep(),this._currentStepIndex=0},o}(n.AuthenticationDriver);n.AuthenticationDriverMultiStep=o}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(e){function n(t,n,o){return e.call(this,t,n,o)||this}return F(n,e),n.prototype.createAuthenticatorSession=function(){return this._uiHandler.createFaceAuthSession("face",this.user.displayName)},n.prototype.createInitialInputStep=function(){return new t.impl.CameraAcquisitionStepDescriptionImpl(this._authenticatorConfig.acquisition_challenges)},n.prototype.prepareNextAuthenticationStep=function(t){return this.createInitialInputStep()},n.prototype.updateCurrentAuthenticationStep=function(t,e){return e},n.prototype.handleAuthenticationInputResponse=function(t){this.processAuthenticateAssertion(t.getAcquisitionResponse())},n.prototype.handleRegistrationInputResponse=function(t){this.processRegisterAssertion(t.getAcquisitionResponse())},n}(e.AuthenticationDriverMultiStep);e.AuthenticationDriverFace=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n;n=t.sdk||(t.sdk={}),function(o){var r=function(){function t(t,e,n,o,r,i){this._uiHandler=n,this._clientContext=o,this._actionContext=r,this._fidoRequest=i,this._user=e,this._sdk=t}return t.prototype.startSession=function(t,e,n,o){this._authDescription=t},t.prototype.changeSessionModeToRegistrationAfterExpiration=function(){throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.Internal,"Can't change FIDO asession mode from authentication to registration.")},t.prototype.promiseRecoveryForError=function(t,e,o){return Promise.resolve(n.AuthenticationErrorRecovery.Fail)},t.prototype.promiseInput=function(){var t=this;return this.fidoClientXact().then((function(t){return n.InputOrControlResponse.createInputResponse(n.FidoInputResponse.createSuccessResponse(t))}),(function(e){var o=n.impl.AuthenticationErrorImpl.ensureAuthenticationError(e);return t._sdk.log(n.LogLevel.Debug,(function(){return"Received FIDO error response from client: "+o})),o.getErrorCode()==n.AuthenticationErrorCode.UserCanceled?n.InputOrControlResponse.createControlResponse(n.impl.ControlRequestImpl.create(n.ControlRequestType.CancelAuthenticator)):n.InputOrControlResponse.createInputResponse(n.FidoInputResponse.createdFailedResponse(t._authDescription,o))}))},t.prototype.completeSuccessfulAuthenticatorSession=function(){return this.fidoClientSendCompletion({},1200)},t.prototype.endSession=function(){},t}(),i=function(t){function e(e,n,o,r,i,s){return t.call(this,e,n,o,r,i,s)||this}return F(e,t),e.prototype.fidoClientXact=function(){return this._sdk.host.fidoClientXact(this._uiHandler,this._clientContext,this._actionContext,this._fidoRequest)},e.prototype.fidoClientSendCompletion=function(t,e){return this._sdk.host.fidoClientXact(this._uiHandler,this._clientContext,this._actionContext,{__completion:{responseCode:e,message:t}}).then((function(t){return!0}))},e}(r),s=function(){function o(){}return o.prototype.createSession=function(t,e,n,o,r,s){return new i(t,e,n,o,r,s)},o.prototype.canHandlePolicy=function(t,n){return!e.fidoclient.TarsusFidoClient.isPolicyTransmitFidoClientExclusive(n)&&!!this.checkPlatformClientIsPresent(t)},o.prototype.getAvailableAuthenticatorsIds=function(t){var e=this;return new Promise((function(o,r){if(!e.checkPlatformClientIsPresent(t))return t.log(n.LogLevel.Debug,(function(){return"No platform FIDO client, therefore no available platform FIDO authenticators"})),o();var i=null;if(t.currentSession){var s=t.currentSession.getCurrentUserInteractionSessionProvider();s&&(i=s._clientContext)}e.requestFidoClientDiscovery(t,t.currentUiHandler,i,n.impl.PolicyActionImpl.createPseudoAction(t,"fido_client_discovery")).then((function(t){for(var e=t.availableAuthenticators,n=new Array,r=0,i=e;r<i.length;r++)n.push(i[r].aaid);o(n)}),(function(e){t.log(n.LogLevel.Debug,(function(){return"Received FIDO discovery error response from client: "+e})),r(e)}))}))},o.prototype.checkPlatformClientIsPresent=function(e){return null==this._hasPlatformClient&&(this._hasPlatformClient="true"===e.host.queryHostInfo(t.sdkhost.HostInformationKey.FidoClientPresent),this._hasPlatformClient||e.log(n.LogLevel.Info,(function(){return"No platform FIDO client."}))),this._hasPlatformClient},o.prototype.requestFidoClientDiscovery=function(t,e,n,o){return t.host.fidoClientXact(e,n,o,{discovery:!0})},o}(),a=function(t){function e(e,n,o,r,i,s){return t.call(this,e,n,o,r,i,s)||this}return F(e,t),e.prototype.fidoClientXact=function(){return this._sdk.fidoClient.fidoClientXact(this._authDescription,this._uiHandler,this._user,this._clientContext,this._actionContext,this._fidoRequest)},e.prototype.fidoClientSendCompletion=function(t,e){return Promise.resolve(!0)},e}(r),u=function(){function t(){}return t.prototype.createSession=function(t,e,n,o,r,i){return new a(t,e,n,o,r,i)},t.prototype.canHandlePolicy=function(t,e){return t.fidoClient.canHandlePolicy(e)},t.prototype.getAvailableAuthenticatorsIds=function(t){return new Promise((function(t,n){var o=new Array;Object.keys(e.fidoclient.FidoAuthenticators).forEach((function(t){o.push(t)})),t(o)}))},t}();o._fidoClientProviders=[new u,new s];var c=function(t){function r(e,n,o){return t.call(this,e,n,o)||this}return F(r,t),r.getEligibleClientProvidersForPolicy=function(t,e){return o._fidoClientProviders.filter((function(n){return n.canHandlePolicy(t,e)}))},r.hasEligibleClientProvidersForPolicy=function(t,e){return this.getEligibleClientProvidersForPolicy(t,e).length>0},r.prototype.runUnregistration=function(){var e=this;return t.prototype.runUnregistration.call(this).finally((function(){var t=e._authenticatorConfig;new Promise((function(o,i){var s=t.fido_policy;if(s.rejected||!s.accepted||1!=s.accepted.length)throw"Invalid fido policy (class 1)";if(1!=s.accepted[0].length||1!=Object.keys(s.accepted[0][0]).length||!s.accepted[0][0].aaid||1!=s.accepted[0][0].aaid.length)throw"Invalid fido policy (class 2)";var a=s.accepted[0][0].aaid[0];e._sdk.log(n.LogLevel.Debug,(function(){return"Will unregister AAID "+a+"."}));var u=r.getEligibleClientProvidersForPolicy(e._sdk,t.fido_policy);if(0==u.length)e._sdk.log(n.LogLevel.Warning,(function(){return"Can't find FIDO client for unregister op: "+JSON.stringify(t.fido_policy)+"."})),o();else{var c=t.fido_request;c.header.appID=t.fido_appid;var l=u[0].createSession(e._sdk,e.user,e._uiHandler,e._clientContext,e._actionDriver.policyAction(),c);l.startSession(e._authenticatorDescription,n.AuthenticatorSessionMode.Registration,e._actionDriver.policyAction(),e._clientContext),l.promiseInput().then((function(t){if(t.isControlRequest())throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AuthenticatorError,"Unexpected control response from FIDO client during unregistration.");var e=t.getResponse();if(e instanceof n.FidoAuthFailureResponse)throw e.getFailureError();return t})).finally((function(){l.endSession()})).then(o,i)}})).then((function(){e._sdk.log(n.LogLevel.Info,(function(){return"FIDO authenticator unregistered: "+JSON.stringify(t.fido_policy)+"."}))}),(function(t){var o=n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t);e._sdk.log(n.LogLevel.Error,(function(){return"Error during FIDO unregistration: "+o+"."}))}))}))},r.prototype.completeAuthenticatorSessionWithResult=function(e){var r=this;e instanceof o.AuthenticationDriverSessionResultAuthenticationCompleted?this._inputSession.completeSuccessfulAuthenticatorSession().then((function(n){t.prototype.completeAuthenticatorSessionWithResult.call(r,e)}),(function(e){t.prototype.completeAuthenticatorSessionWithError.call(r,n.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))})):t.prototype.completeAuthenticatorSessionWithResult.call(this,e)},r.prototype.createAuthenticatorSession=function(){var t=this._authenticatorConfig,e=r.getEligibleClientProvidersForPolicy(this._sdk,t.fido_policy);if(t.fido_request.header.appID=t.fido_appid,e.length>0)return e[0].createSession(this._sdk,this.user,this._uiHandler,this._clientContext,this._actionDriver.policyAction(),t.fido_request);throw new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AuthenticatorExternalConfigError,"Can't find FIDO client to handle FIDO request.",{fidoRequest:t.fido_request})},r.prototype.authenticateInStartedSession=function(t){var e=this;this._inputSession.promiseInput().then((function(t){return e.handleInputOrControlResponse(t)}),(function(t){return e.completeAuthenticatorSessionWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},r.prototype.registerInStartedSession=function(t){var e=this;this._inputSession.promiseInput().then((function(t){return e.handleInputOrControlResponse(t)}),(function(t){return e.completeAuthenticatorSessionWithError(n.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},r.prototype.handleAuthenticationInputResponse=function(t){t instanceof n.FidoAuthSuccessResponse?this.handleFidoSuccessAuthResponse(t):this.handleFidoError(t)},r.prototype.handleFidoSuccessAuthResponse=function(t){this.processAuthenticateAssertion({fido_response:t.getFidoResponse()})},r.prototype.handleFidoError=function(t){t instanceof n.FidoAuthFailureResponse?(this._sdk.log(n.LogLevel.Debug,(function(){return"FIDO session received FidoAuthFailureResponse."})),this.handleFidoFailureResponse(t)):(this._sdk.log(n.LogLevel.Error,(function(){return"FIDO session received unknkown response type."})),this.performErrorRecoveryForError(new n.impl.AuthenticationErrorImpl(n.AuthenticationErrorCode.AppImplementation,"FIDO session received unknkown response type.")))},r.prototype.handleFidoFailureResponse=function(t){var o={status:t.getRegistrationStatus()==n.AuthenticatorRegistrationStatus.Registered?e.Protocol.AuthenticationMethodStatus.Registered:e.Protocol.AuthenticationMethodStatus.Unregistered,expired:t.getExpired(),locked:t.getLocked(),last_used:0};this._authenticatorDescription.updateWithAuthenticatorState(o),this.performErrorRecoveryForError(t.getFailureError())},r.prototype.handleFidoSuccessRegResponse=function(t){this.processRegisterAssertion({fido_response:t.getFidoResponse()})},r.prototype.handleRegistrationInputResponse=function(t){t instanceof n.FidoAuthSuccessResponse?this.handleFidoSuccessRegResponse(t):this.handleFidoError(t)},r.prototype.defaultRecoveryForError=function(t){return this._operationMode==n.AuthenticatorSessionMode.Authentication?n.AuthenticationErrorRecovery.ChangeAuthenticator:n.AuthenticationErrorRecovery.Fail},r}(o.AuthenticationDriver);o.AuthenticationDriverFido=c}((e=n.core||(n.core={})).authenticationdrivers||(e.authenticationdrivers={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){var n,o;!function(n){var r=function(){function n(t,e,n,o,r,i){this.cancellationDOMErrorNames=["NotAllowedError","AbortError"],this.sdk=t,this.username=e,this.uiHandler=n,this.clientContext=o,this.actionContext=r,this.config=i}return n.prototype.startSession=function(t,e,n,o){this.description=t,this.mode=e,this.actionContext=n,this.clientContext=o},n.prototype.changeSessionModeToRegistrationAfterExpiration=function(){this.mode=t.ts.mobile.sdk.AuthenticatorSessionMode.Registration},n.prototype.promiseRecoveryForError=function(t,e,n){return Promise.resolve(o.AuthenticationErrorRecovery.Fail)},n.prototype.promiseInput=function(){var n,r,i=this;return this.mode===t.ts.mobile.sdk.AuthenticatorSessionMode.Authentication?(n=this.config.credentialRequestOptions,r=e.sdkhost.Fido2CredentialsOpType.Get):(n=this.config.credentialCreationOptions,r=e.sdkhost.Fido2CredentialsOpType.Create),this.sdk.host.fido2CredentialsOp(this.uiHandler,this.clientContext,this.actionContext,r,n).then((function(t){return o.InputOrControlResponse.createInputResponse(o.Fido2InputResponse.createSuccessResponse(t))})).catch((function(e){var n=t.ts.mobile.sdk.impl.AuthenticationErrorImpl.ensureAuthenticationError(e);if(n.getErrorCode()===o.AuthenticationErrorCode.UserCanceled){i.sdk.log(o.LogLevel.Debug,(function(){return"Received FIDO2 cancellation request."}));var r=i.actionContext.getEscapeOptions().filter((function(e){return e.getPresentation()==t.ts.mobile.sdk.ActionEscapeOptionPresentation.Cancel}))[0];return r?(i.sdk.log(o.LogLevel.Debug,(function(){return"Got cancel escape option; responding with that."})),o.InputOrControlResponse.createEscapeResponse(r,null)):(i.sdk.log(o.LogLevel.Debug,(function(){return"Responding with auth cancel control request."})),o.InputOrControlResponse.createControlResponse(o.ControlRequest.create(o.ControlRequestType.CancelAuthenticator)))}return i.sdk.log(o.LogLevel.Debug,(function(){return"Received FIDO2 error response from client: "+n})),o.InputOrControlResponse.createInputResponse(o.Fido2InputResponse.createdFailedResponse(n))}))},n.prototype.endSession=function(){},n}();n.Fido2AuthenticatorSession=r;var i=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.createAuthenticatorSession=function(){if("true"===this._sdk.host.queryHostInfo(e.sdkhost.HostInformationKey.Fido2ClientPresent))return new r(this._sdk,this.user.displayName,this._uiHandler,this._clientContext,this._actionDriver.policyAction(),this._authenticatorConfig);throw new o.impl.AuthenticationErrorImpl(o.AuthenticationErrorCode.AuthenticatorExternalConfigError,"Can't find FIDO2 client to handle FIDO2 authentication.")},n.prototype.authenticateInStartedSession=function(t){var e=this;this._inputSession.promiseInput().then((function(t){return e.handleInputOrControlResponse(t)}),(function(t){return e.completeAuthenticatorSessionWithError(o.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},n.prototype.handleAuthenticationInputResponse=function(t){if(t instanceof o.Fido2AuthenticatorSuccessResponse){this._sdk.log(o.LogLevel.Debug,(function(){return"Fido2 received Fido2AuthenticatorSuccessResponse."}));var e=t.getFido2Response();this.processAuthenticateAssertion({assertion_credential:{id:e.id,response:{authenticatorData:e.response.authenticatorData,clientDataJSON:e.response.clientDataJSON,signature:e.response.signature,userHandle:e.response.userHandle},type:e.type,clientExtensionResults:e.clientExtensionResults}})}else t instanceof o.Fido2AuthenticationFailedResponse?(this._sdk.log(o.LogLevel.Debug,(function(){return"Fido2 received Fido2AuthenticationFailedResponse."})),this.handleFido2FailureResponse(t)):(this._sdk.log(o.LogLevel.Error,(function(){return"Fido2 received unknkown response type."})),this.performErrorRecoveryForError(new o.impl.AuthenticationErrorImpl(o.AuthenticationErrorCode.AppImplementation,"Fido2 received unknkown response type.")))},n.prototype.registerInStartedSession=function(t){var e=this;this._inputSession.promiseInput().then((function(t){return e.handleInputOrControlResponse(t)}),(function(t){return e.completeAuthenticatorSessionWithError(o.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},n.prototype.handleRegistrationInputResponse=function(t){if(t instanceof o.Fido2AuthenticatorSuccessResponse){this._sdk.log(o.LogLevel.Debug,(function(){return"Fido2 received Fido2AuthenticatorSuccessResponse."}));var e=t.getFido2Response();this.processRegisterAssertion({attestation_credential:{id:e.id,response:{attestationObject:e.response.attestationObject,clientDataJSON:e.response.clientDataJSON},type:e.type,clientExtensionResults:e.clientExtensionResults}})}else t instanceof o.Fido2AuthenticationFailedResponse?(this._sdk.log(o.LogLevel.Debug,(function(){return"Fido2 received Fido2AuthenticationFailedResponse."})),this.handleFido2FailureResponse(t)):(this._sdk.log(o.LogLevel.Error,(function(){return"Fido2 received unknkown response type."})),this.performErrorRecoveryForError(new o.impl.AuthenticationErrorImpl(o.AuthenticationErrorCode.AppImplementation,"Fido2 received unknkown response type.")))},n.prototype.handleFido2FailureResponse=function(t){this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"auth_failure",{num_of_failures:1}),this.performErrorRecoveryForError(t.getFailureError())},n}(n.AuthenticationDriver);n.AuthenticationDriverFido2=i}((n=(o=e.sdk||(e.sdk={})).core||(o.core={})).authenticationdrivers||(n.authenticationdrivers={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(o){o.AUTHENTICATION_DRIVER_FINGERPRINT_CURRENT_SCHEME="v3";var r=function(r){function i(t,e,n){return r.call(this,t,e,n)||this}return F(i,r),i.prototype.getBiometricPromptFallbackControlType=function(){return null!=this._biometricPromptFallbackControlType?this._biometricPromptFallbackControlType:e.ControlRequestType.SelectMethod},i.authenticatorKeyTagForUser=function(t,e,r){return new n.TarsusKeyPath("per_user",t.guid.toString(),"local_auth_keys",o.AuthenticationDriverDescriptorFingerprint.authenticatorName,e,r)},i.prototype.shouldAllowBiometricFallbackButton=function(t){var o=this;if(!t)return!1;var r=this._actionDriver.availableAuthenticatorsForSwitching.filter((function(t){return t!=o._authenticatorDescription}));if(this._actionDriver instanceof n.actiondrivers.ActionDriverRegistration||this._actionDriver instanceof n.actiondrivers.ActionDriverAuthentication&&0==r.length)return!1;var i=t,s=i.getFallbackButtonTitle();if(!(s&&s.length>0))return!1;var a=i.getFallbackControlRequestType();switch(null==a&&(a=e.ControlRequestType.SelectMethod),a){case e.ControlRequestType.ChangeMethod:return this._actionDriver.availableAuthenticatorsForSwitching.filter((function(t){return t!=o._authenticatorDescription})).length>0;case e.ControlRequestType.SelectMethod:return this._actionDriver.availableAuthenticatorsForSwitching.length>0;default:return!0}},i.prototype.runSilentRegistration=function(){var t=this;return this.generateAuthenticatorKey().then((function(n){var r=t.getNewOrUpdatedEnrollmentRecord(n),i={public_key:n.key.publicKeyToJson(),version:n.schemeVersion};return t._actionDriver.sendAuthenticatorAssertionRequest(t._authenticatorDescription,"register",null,i).then((function(n){if(n.assertion_error_code)throw e.impl.AuthenticationErrorImpl.errorForAssertionResponse(n);return t.user.updateEnrollmentRecord(r),new o.AuthenticationDriverSessionResultAuthenticationCompleted(n)}))}))},i.prototype.createAuthenticatorSession=function(){return this._uiHandler.createFingerprintAuthSession(o.AuthenticationDriverDescriptorFingerprint.authenticatorName,this.user.displayName)},i.prototype.authenticateInStartedSession=function(t){var n=this;this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(t){return n.completeAuthenticatorSessionWithError(e.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},i.prototype.registerInStartedSession=function(t){var n=this;r.prototype.registerInStartedSession.call(this,t),this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(t){return n.completeAuthenticatorSessionWithError(e.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},Object.defineProperty(i.prototype,"authenticatorType",{get:function(){return o.AuthenticationDriverDescriptorFingerprint.authenticatorName},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentScheme",{get:function(){return o.AUTHENTICATION_DRIVER_FINGERPRINT_CURRENT_SCHEME},enumerable:!0,configurable:!0}),i.prototype.processLocalAuthenticatorError=function(o){var r=this,i=o,s=0,a=Promise.resolve();if(i.getErrorCode()==e.AuthenticationErrorCode.Internal&&i.getData()){var u=i.getData();s=u[t.sdkhost.ErrorDataNumFailures]||s,i=e.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(u,"Fingerprint")||i,(u[t.sdkhost.ErrorDataInternalError]==t.sdkhost.InternalErrorBiometricNotConfigured&&this._authenticatorDescription.getRegistered()||u[t.sdkhost.ErrorDataInternalError]==t.sdkhost.InternalErrorBiometricInvalidated)&&(a=n.LocalEnrollment.invalidateLocalRegistrationStatusAndNotifyUIHandler(this._actionDriver._controlFlowProcessor,this._authenticatorDescription))}a.catch((function(t){r._sdk.log(e.LogLevel.Error,t)})),a.finally((function(){var n=i.getData();if(!s||r._operationMode!=e.AuthenticatorSessionMode.Authentication)return n[t.sdkhost.ErrorDataInternalError]==t.sdkhost.InternalErrorBiometricFallbackPressed?(r._sdk.log(e.LogLevel.Debug,(function(){return"Biometric prompt fallback button pressed"})),void r.processControlRequest(e.ControlRequest.create(r.getBiometricPromptFallbackControlType()))):i.getErrorCode()==e.AuthenticationErrorCode.UserCanceled?(r._sdk.log(e.LogLevel.Debug,(function(){return"Fingerprint authenticator captured user cancel error code."})),void r.invokeCancellationUiOrEscape()):void r.performErrorRecoveryForError(i);r.processAuthFailureAssertionAndHandleError(i,s)}))},i.prototype.getKeyForEnrollmentDataAndInput=function(n,o){var r=this;return new Promise((function(i,s){var a=o;r.shouldAllowBiometricFallbackButton(a)&&(r._biometricPromptFallbackControlType=a.getFallbackControlRequestType());var u=r.authenticatorKeyTagForScheme(n.version,n.salt),c=r._sdk.host.getKeyPair(u,t.sdkhost.KeyClass.StdSigningKey,t.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb);if(!c){var l={};throw l[t.sdkhost.ErrorDataInternalError]=t.sdkhost.InternalErrorBiometricInvalidated,new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to authenticate with invalidated Fingerprint.",l)}c.setBiometricPromptInfo(e.util.BiometricPromptInfoFrom.fingerprintInput(a),r._uiHandler,r._inputSession),i({key:c})}))},i.prototype.generatePendingEnrollment=function(t,n){var o=this;return this.generateAuthenticatorKey().then((function(r){if(!n){var i=t;o.shouldAllowBiometricFallbackButton(i)&&(o._biometricPromptFallbackControlType=i.getFallbackControlRequestType()),r.key.setBiometricPromptInfo(e.util.BiometricPromptInfoFrom.fingerprintInput(i),o._uiHandler,o._inputSession)}return r}))},i.prototype.generateAuthenticatorKey=function(){var n,o=this;n=this._sdk.host.generateRandomHexString(24);var r=this.authenticatorKeyTagForScheme(this.currentScheme,n);return e.util.wrapPromiseWithActivityIndicator(this._uiHandler,this._actionDriver.policyAction(),this._clientContext,this._sdk.host.generateKeyPair(r,t.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey,t.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb,!0).then((function(t){return{key:t,salt:n,schemeVersion:o.currentScheme}}),(function(t){if(t.getErrorCode()==e.AuthenticationErrorCode.Internal&&t.getData()){var n=t.getData(),o=e.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(n,"Fingerprint");if(o)throw o}throw t})))},i.prototype.authenticatorKeyTagForScheme=function(t,e){return i.authenticatorKeyTagForUser(this.user,t,e)},i}(o.AuthenticationDriverLocalPersistentKeyPairBasedPostV2Scheme);o.AuthenticationDriverFingerprint=r}(n.authenticationdrivers||(n.authenticationdrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e;!function(t){function e(t){for(var e=[],n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?e.push(o):o<2048?e.push(192|o>>6,128|63&o):o<55296||o>=57344?e.push(224|o>>12,128|o>>6&63,128|63&o):(n++,o=65536+((1023&o)<<10|1023&t.charCodeAt(n)),e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o))}return e}function n(t){var e,n="";for(e=0;e<t.length;e++){var o=t[e];if(o<128)n+=String.fromCharCode(o);else if(o>191&&o<224)n+=String.fromCharCode((31&o)<<6|63&t[e+1]),e+=1;else if(o>223&&o<240)n+=String.fromCharCode((15&o)<<12|(63&t[e+1])<<6|63&t[e+2]),e+=2;else{var r=((7&o)<<18|(63&t[e+1])<<12|(63&t[e+2])<<6|63&t[e+3])-65536;n+=String.fromCharCode(r>>10|55296,1023&r|56320),e+=3}}return n}function o(t){for(var e="",n=0;n<t.length;n++){var o=t.charCodeAt(n).toString(16);o.length<2&&(o="0"+o),e+=o}return e}t.numberToHex=function(t,e){var n=t.toString(16);if(n.length>e/4)throw"Number out of range for bitcount.";for(;n.length<e/4;)n="0"+n;return n},t.toUTF8Array=e,t.fromUTF8Array=n,t.hexToAscii=function(t){for(var e=[],o=0;o<t.length;o+=2)e.push(parseInt(t.substr(o,2),16));return n(e)},t.asciiToHex=function(t){return e(t).map((function(t){var e=t.toString(16);return e.length<2&&(e="0"+e),e})).join("")},t.base64ToHex=function(t){return o(atob(t))},t.bytesToHex=o,t.hexToBase64=function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=0,r="",i=0;i<t.length;i++)n=(n<<4)+parseInt(t[i],16),(o+=4)>=6&&(r+=e[n>>o-6],n&=255>>8-(o-=6));for(o&&(r+=e[n<<6-o]);r.length%4;)r+="=";return r},t.isHexString=function(t){return new RegExp("^([0-9A-Fa-f]{2})+$").test(t)},t.calcPublicKeyHexStringEncodedSha256Hash=function(e,n){var o=e.publicKeyToJson().key;return n.host.calcHexStringEncodedSha256Hash(t.base64ToHex(o))},t.nameof=function(t){return t},t.checkedCast=function(t,e){if(e instanceof t)return e;throw Error("Checked cast failed. Expected "+t)},t.wrapPromiseWithActivityIndicator=function(t,e,n,o){return t.startActivityIndicator(e,n),o.then((function(o){return t.endActivityIndicator(e,n),o}),(function(o){return t.endActivityIndicator(e,n),Promise.reject(o)}))};var r=function(){function t(){var e=this;this._cancelPromise=new Promise((function(n,o){e._cancelFn=function(){o(t.CancelRequest)},e._cancelled&&o(t.CancelRequest)}))}return Object.defineProperty(t.prototype,"cancellablePromise",{get:function(){return this._cancellablePromise},enumerable:!0,configurable:!0}),t.prototype.resolveWith=function(t){this._cancelled?this._cancellablePromise=this._cancelPromise:(this._underlyingPromise=new Promise(t),this._cancellablePromise=Promise.race([this._cancelPromise,this._underlyingPromise]))},t.prototype.cancel=function(){this._cancelled=!0,this._cancelFn&&this._cancelFn()},t.CancelRequest={},t}();t.CancelablePromiseHolder=r,t.LANGUAGES={"zh-HK":"zh-HK","zh-CN":"zh-Hans","zh-TW":"zh-Hant",zh:"zh-Hans",da:"da-DK",nl:"nl-NL","en-AU":"en-AU","en-GB":"en-GB",en:"en-US","en-IN":"en-IN",fi:"fi-FI",fr:"fr-FR","fr-CA":"fr-CA",de:"de-DE",it:"it-IT",is:"is-IS",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",pl:"pl-PL","pt-BR":"pt-BR",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU","es-MX":"es-MX",es:"es-ES",ca:"ca-ES","es-US":"es-US",sv:"sv-SE",tr:"tr-TR",vi:"vi-VN",el:"el-GR",id:"id-ID",hu:"hu-HU",th:"th-TH",hi:"hi-IN",cs:"cs-CZ",sk:"sk-SK",uk:"uk-UA",hr:"hr-CS",he:"he-IL",iw:"he-IL",ar:"ar-SA"}}((e=t.sdk||(t.sdk={})).util||(e.util={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(o){var r=function(o){function r(t,e,n){return o.call(this,t,e,n)||this}return F(r,o),r.prototype.unregisterEnrollmentAssets=function(t){},Object.defineProperty(r.prototype,"currentScheme",{get:function(){return"v2"},enumerable:!0,configurable:!0}),r.prototype.processLocalAuthenticatorError=function(t){var n=t;t.getErrorCode()==e.AuthenticationErrorCode.InvalidInput&&this._operationMode==e.AuthenticatorSessionMode.Authentication?this.processAuthFailureAssertionAndHandleError(n,1):this.performErrorRecoveryForError(n)},r.prototype.getKeyForEnrollmentDataAndInput=function(t,n){var o=this;return new Promise((function(e,r){"v2"==t.version?o.getKeyForEnrollmentDataAndInputV2(t,n).then(e,r):o.getKeyForEnrollmentDataAndInputPreV2(t,n).then(e,r)})).then((function(t){if(!t)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.InvalidInput,"Invalid input provided to authenticator.");return{key:t}}))},r.prototype.generatePendingEnrollment=function(o){var r=this;return new Promise((function(i,s){var a=r._sdk.host.generateRandomHexString(32),u=r._sdk.host.generateRandomHexString(64),c=r.extractPbkdfInputFromInputResponse(o);return e.util.wrapPromiseWithActivityIndicator(r._uiHandler,r._actionDriver.policyAction(),r._clientContext,r._sdk.host.generateHexSeededKeyPairExternalRepresentation(t.sdkhost.KeyClass.FidoECCSigningKey,u).then((function(e){return n.vault.pbkdfStretchHexSecretIntoAESKey(a,c,r._sdk.cryptoSettings.getLocalEnrollmentKeySizeInBytes(),r._sdk.cryptoSettings.getLocalEnrollmentKeyIterationCount(),!0,r._sdk).then((function(n){return n.encrypt(u).then((function(n){return{key:r._sdk.host.importVolatileKeyPair(t.sdkhost.KeyClass.FidoECCSigningKey,e),salt:a,schemeVersion:"v2",keyMeterial:n}}))}))}))).then(i,s)}))},r.prototype.getKeyForEnrollmentDataAndInputV2=function(e,o){var r=this,i=this.extractPbkdfInputFromInputResponse(o);return n.vault.pbkdfStretchHexSecretIntoAESKey(e.salt,i,e.cryptoSettings.getLocalEnrollmentKeySizeInBytes(),e.cryptoSettings.getLocalEnrollmentKeyIterationCount(),!0,this._sdk).then((function(n){return n.decrypt(e.keyMaterial,null).then((function(e){return r._sdk.host.generateHexSeededKeyPairExternalRepresentation(t.sdkhost.KeyClass.FidoECCSigningKey,e).then((function(e){return r._sdk.host.importVolatileKeyPair(t.sdkhost.KeyClass.FidoECCSigningKey,e)}))}))}))},r.prototype.getKeyForEnrollmentDataAndInputPreV2=function(e,n){var o=this;return this.authenticatorKeyTagForScheme(e.version,e.salt,e.cryptoSettings,n).then((function(e){return o._sdk.host.getKeyPair(e,t.sdkhost.KeyClass.StdSigningKey,t.sdkhost.KeyBiometricProtectionMode.None)}))},r.prototype.schemeVersionRequiresRollover=function(t){return"v0"==t||"v1"==t},r.prototype.authenticatorKeyTagForScheme=function(t,o,r,i){var s=this;return new Promise((function(a,u){var c=s.extractPbkdfInputFromInputResponse(i);if("v0"==t&&(s._sdk.log(e.LogLevel.Debug,(function(){return"Using SDK CryptoSettings for migrated enrollment."})),r=s._sdk.cryptoSettings),!r)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Missing crypt settings for local enrollment.");s._sdk.host.generatePbkdf2HmacSha1HexString(o,c,r.getLocalEnrollmentKeySizeInBytes(),r.getLocalEnrollmentKeyIterationCount()).then((function(o){var r=e.util.hexToBase64(o);return new n.TarsusKeyPath("per_user",s.user.guid.toString(),"local_auth_keys",s.authenticatorType,t,r)})).then(a,u)}))},r}(o.AuthenticationDriverLocal);o.AuthenticationDriverLocalSecretInputBased=r}(n.authenticationdrivers||(n.authenticationdrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(e){function n(t,n,o){return e.call(this,t,n,o)||this}return F(n,e),Object.defineProperty(n.prototype,"authenticatorType",{get:function(){return n.authenticatorName},enumerable:!0,configurable:!0}),n.prototype.handleAuthenticationInputResponse=function(n){t.impl.PatternInputImpl.validateFormat(n)?e.prototype.handleAuthenticationInputResponse.call(this,n):this.processLocalAuthenticatorError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Invalid pattern description format."))},n.prototype.handleRegistrationInputResponse=function(n){var o=this._authenticatorConfig,r=n;t.impl.PatternInputImpl.validateFormat(r)?o.min_length&&t.impl.PatternInputImpl.getPatternLength(r)<o.min_length?this.processLocalAuthenticatorError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Invalid pattern length.")):e.prototype.handleRegistrationInputResponse.call(this,n):this.processLocalAuthenticatorError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Invalid pattern description format."))},n.prototype.extractPbkdfInputFromInputResponse=function(e){return t.util.asciiToHex(e.getPatternDescription())},n.prototype.createAuthenticatorSession=function(){return this._uiHandler.createPatternAuthSession(n.authenticatorName,this.user.displayName,3,4)},n.prototype.authenticateInStartedSession=function(e){var n=this;this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(e){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},n.prototype.registerInStartedSession=function(e){var n=this;this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(e){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},n.authenticatorName="pattern",n}(e.AuthenticationDriverLocalSecretInputBased);e.AuthenticationDriverLocalPattern=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(e){function n(t,n,o){return e.call(this,t,n,o)||this}return F(n,e),Object.defineProperty(n.prototype,"authenticatorType",{get:function(){return n.authenticatorName},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pinLength",{get:function(){return this._authenticatorConfig.length},enumerable:!0,configurable:!0}),n.prototype.handleRegistrationInputResponse=function(n){n.getPin().length!=this.pinLength?this.processLocalAuthenticatorError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.InvalidInput,"Expecting an entry of length "+this.pinLength+".")):e.prototype.handleRegistrationInputResponse.call(this,n)},n.prototype.generatePendingEnrollment=function(t){var n=this;return e.prototype.generatePendingEnrollment.call(this,t).then((function(t){return t.authenticatorConfig={length:n.pinLength},t}))},n.prototype.extractPbkdfInputFromInputResponse=function(e){return t.util.asciiToHex(e.getPin())},n.prototype.createAuthenticatorSession=function(){return this._uiHandler.createPinAuthSession(n.authenticatorName,this.user.displayName,this.pinLength)},n.prototype.authenticateInStartedSession=function(e){var n=this;this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(e){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},n.prototype.registerInStartedSession=function(e){var n=this;this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(e){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},n.authenticatorName="pin",n}(e.AuthenticationDriverLocalSecretInputBased);e.AuthenticationDriverLocalPinCode=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(n){function o(t,e,o){return n.call(this,t,e,o)||this}return F(o,n),o.prototype.poll=function(){var n=this;this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"authenticate",this.pollingAssertionData(),{}).then((function(o){n.filterAssertionResult(o)&&n.shouldContinuePolling(o)?n.pumpInput():n.handleAuthenticateAssertionResult(o,n._authenticatorDescription,"authenticate",n.pollingAssertionData)||(n._sdk.log(t.LogLevel.Info,(function(){return"Authenticator session done."})),n.completeAuthenticatorSessionWithResult(new e.AuthenticationDriverSessionResultAuthenticationCompleted(o)))})).catch((function(e){n.performErrorRecoveryForError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},o.prototype.longPoll=function(e,n){var o=this;this._actionDriver.sendPollingRequest(e,n).then((function(t){t.change_detected?o.poll():o.pumpInput()})).catch((function(e){o.performErrorRecoveryForError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},o}(e.AuthenticationDriver);e.AuthenticationDriverPolling=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){!function(n){!function(o){var r=function(r){function i(t,e,n){var o=r.call(this,t,e,n)||this;return o.methodName="mobileApprove",o.setupDataModel(e,n),o}return F(i,r),i.prototype.createAuthenticatorSession=function(){var o=this,r=this._uiHandler.createMobileApproveAuthSession("mobile_approve",this.user.displayName,this._instructions);if(!r)throw e.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createMobileApproveAuthSession");if(r.setAvailableTargets(this._selectableDevices),this._state==n.Protocol.AuthenticationMethodMobileApproveState.WaitForAuthenticate){this._selectedDevices=this._selectableDevices.map((function(t){return t}));var i=null;this._otp&&(i=t.ts.mobile.sdk.impl.MobileApproveOtpImpl.createFromServerFormat(this._otp)),r.setCreatedApprovalInfo(this._selectedDevices,i)}if(this._authenticationParameters){var s=this._authenticationParameters.filter((function(t){}));if(0!=s.length){this._sdk.log(e.LogLevel.Debug,(function(){return"Target based driver found target selection parameters."}));var a=this._selectableDevices.reduce((function(t,e){return t[e.getDeviceIdentifier()]=e,t}),{});this._pendingTargetSelection=s.map((function(t){var n=t.getTarget(),o=a[n.getDeviceIdentifier()];if(!o)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"Authentication parameter tried to select a device not presented as a selectable target");return o}),{}),this._sdk.log(e.LogLevel.Debug,(function(){return"Target based driver will select targets "+o._pendingTargetSelection+" based on selection parameter."}))}}return r},i.prototype.authenticateInStartedSession=function(t){this._autoExecuted?this._autoExecuted=!1:this.reset(),this.pumpInput()},i.prototype.pumpInput=function(){if(this._state===n.Protocol.AuthenticationMethodMobileApproveState.WaitForApproval)this.createApproval();else{if(this._state!==n.Protocol.AuthenticationMethodMobileApproveState.WaitForAuthenticate)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Illegal authenticator state encountered: "+this._state);this.requestInputAndHandle()}},i.prototype.registerInStartedSession=function(t){throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Cannot register Mobile Approve authenticator.")},i.prototype.createApproval=function(){var t=this;if(this._approvalId=null,this._pendingTargetSelection&&Object.keys(this._pendingTargetSelection).length){this._sdk.log(e.LogLevel.Debug,(function(){return"Performing pending target selection "+t._pendingTargetSelection}));var n=e.TargetBasedAuthenticatorInput.createTargetsSelectionRequest(this._pendingTargetSelection);this._pendingTargetSelection=null,this.handleAuthenticationInputResponse(n)}else this._strategy.user_selection&&this._selectableDevices&&this._selectableDevices.length?this.requestInputAndHandle():this.handleAuthenticationInputResponse(e.TargetBasedAuthenticatorInput.createTargetsSelectionRequest([]))},i.prototype.requestInputAndHandle=function(){var t=this;this._inputSession.promiseInput().then((function(e){t.handleInputOrControlResponse(e)}))},i.prototype.handleAuthenticationInputResponse=function(t){switch(this._state){case n.Protocol.AuthenticationMethodMobileApproveState.WaitForApproval:var o=t.getSelectedTargets();if(o){this.handleTargetSelectionInput(o);break}throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"Expected target selection input response but got: "+t);case n.Protocol.AuthenticationMethodMobileApproveState.WaitForAuthenticate:var r=t.getAuthenticatorInput();if(r instanceof e.MobileApproveInputRequestPolling){var i=r.getPollingTimeout();i?this.longPoll({type:"approval",approval_id:this._approvalId||""},i):this.poll();break}throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"Expected polling request input response but got: "+t);default:throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Illegal state for authenticator: "+this._state)}},i.prototype.handleTargetSelectionInput=function(t){var n=this;this._selectedDevices=t.map((function(t){var o=t;if(n._selectableDevices.indexOf(o)<0)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"Attempt to select a Mobile Approve target not originally listed in the session.");return o})),this.createForSelectedTargets()},i.prototype.createForSelectedTargets=function(){var n,o=this;n=this._selectedDevices&&this._selectedDevices.length?{device_ids:this._selectedDevices.map((function(t){return t.getDeviceIdentifier()}))}:{},this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"approval",n,{}).then((function(n){if(!o.handleGeneralAssertionResult(n))if(n.assertion_error_code)o._sdk.log(e.LogLevel.Error,(function(){return"Assertion error encoutered. Starting error recovery."})),o.performErrorRecoveryForError(e.impl.AuthenticationErrorImpl.errorForAssertionResponse(n));else{var r=null,i=n.data;i.otp&&(r=t.ts.mobile.sdk.impl.MobileApproveOtpImpl.createFromServerFormat(i.otp)),o._approvalId=i.approval_id||null,o._state=i.state,o._inputSession.setCreatedApprovalInfo(o._selectedDevices,r),o._sdk.log(e.LogLevel.Debug,(function(){return"Restarting auth or reg."})),o.pumpInput()}})).catch((function(t){o.completeAuthenticatorSessionWithError(t)}))},i.prototype.handleRegistrationInputResponse=function(t){throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Cannot register Mobile Approve authenticator.")},i.prototype.processControlRequest=function(t){t.getRequestType()===e.ControlRequestType.RetryAuthenticator&&this.reset(),r.prototype.processControlRequest.call(this,t)},i.prototype.filterAssertionResult=function(t){if(5==t.assertion_error_code)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.ApprovalDenied,"Approval was denied");if(21==t.assertion_error_code)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.ApprovalExpired,"Approval has expired");return!0},i.prototype.shouldContinuePolling=function(t){return t.assertion_error_code==n.Protocol.AssertionErrorCode.ExternalProcessPending},i.prototype.pollingAssertionData=function(){return{approval_id:this._approvalId}},i.prototype.reset=function(){this._state=n.Protocol.AuthenticationMethodMobileApproveState.WaitForApproval,this._approvalId=null,this._selectedDevices=null,this._inputSession.setCreatedApprovalInfo(null,null)},i.prototype.setupDataModel=function(t,e){this._state=t.state,this._otp=t.otp||null,this._strategy=t.strategy,this._selectableDevices=o.AuthenticationDriverDescriptorMobileApprove.createTargetsFromConfig(t),this._instructions=t.instructions,this._approvalId=t.approval_id||null,this._approvalId&&(this._autoExecuted=!0)},i}(o.AuthenticationDriverPolling);o.AuthenticationDriverMobileApprove=r}(n.authenticationdrivers||(n.authenticationdrivers={}))}(e.core||(e.core={}))}(e.sdk||(e.sdk={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(o){var r=function(r){function i(t,e,n){return r.call(this,t,e,n)||this}return F(i,r),i.prototype.getBiometricPromptFallbackControlType=function(){return null!=this._biometricPromptFallbackControlType?this._biometricPromptFallbackControlType:e.ControlRequestType.SelectMethod},i.authenticatorKeyTagForUser=function(t,e,o){return new n.TarsusKeyPath("per_user",t.guid.toString(),"local_auth_keys","native_face",e,o)},i.prototype.shouldAllowBiometricFallbackButton=function(t){var o=this;if(!t)return!1;var r=this._actionDriver.availableAuthenticatorsForSwitching.filter((function(t){return t!=o._authenticatorDescription}));if(this._actionDriver instanceof n.actiondrivers.ActionDriverRegistration||this._actionDriver instanceof n.actiondrivers.ActionDriverAuthentication&&0==r.length)return!1;var i=t,s=i.getFallbackButtonTitle();if(!(s&&s.length>0))return!1;var a=i.getFallbackControlRequestType();switch(null==a&&(a=e.ControlRequestType.SelectMethod),a){case e.ControlRequestType.ChangeMethod:return this._actionDriver.availableAuthenticatorsForSwitching.filter((function(t){return t!=o._authenticatorDescription})).length>0;case e.ControlRequestType.SelectMethod:return this._actionDriver.availableAuthenticatorsForSwitching.length>0;default:return!0}},i.prototype.runSilentRegistration=function(){var t=this;return this.generateFaceNativeKeyForScheme(this.currentScheme).then((function(n){var r=t.getNewOrUpdatedEnrollmentRecord(n),i={public_key:n.key.publicKeyToJson(),version:n.schemeVersion};return t._actionDriver.sendAuthenticatorAssertionRequest(t._authenticatorDescription,"register",null,i).then((function(n){if(n.assertion_error_code)throw e.impl.AuthenticationErrorImpl.errorForAssertionResponse(n);return t.user.updateEnrollmentRecord(r),new o.AuthenticationDriverSessionResultAuthenticationCompleted(n)}))}))},i.prototype.createAuthenticatorSession=function(){return this._uiHandler.createNativeFaceAuthSession(o.AuthenticationDriverDescriptorNativeFace.authenticatorName,this.user.displayName)},i.prototype.authenticateInStartedSession=function(t){var n=this;this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(t){return n.completeAuthenticatorSessionWithError(e.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},i.prototype.registerInStartedSession=function(t){var n=this;r.prototype.registerInStartedSession.call(this,t),this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(t){return n.completeAuthenticatorSessionWithError(e.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},Object.defineProperty(i.prototype,"authenticatorType",{get:function(){return o.AuthenticationDriverDescriptorNativeFace.authenticatorName},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentScheme",{get:function(){return"v2"},enumerable:!0,configurable:!0}),i.prototype.processLocalAuthenticatorError=function(o){var r=this,i=o,s=0,a=Promise.resolve();if(i.getErrorCode()==e.AuthenticationErrorCode.Internal&&i.getData()){var u=i.getData();s=u[t.sdkhost.ErrorDataNumFailures]||s,i=e.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(u,"Native Face")||i,(u[t.sdkhost.ErrorDataInternalError]==t.sdkhost.InternalErrorBiometricNotConfigured&&this._authenticatorDescription.getRegistered()||u[t.sdkhost.ErrorDataInternalError]==t.sdkhost.InternalErrorBiometricInvalidated)&&(a=n.LocalEnrollment.invalidateLocalRegistrationStatusAndNotifyUIHandler(this._actionDriver._controlFlowProcessor,this._authenticatorDescription))}a.catch((function(t){r._sdk.log(e.LogLevel.Error,t)})),a.finally((function(){var n=i.getData();if(!s||r._operationMode!=e.AuthenticatorSessionMode.Authentication)return n[t.sdkhost.ErrorDataInternalError]==t.sdkhost.InternalErrorBiometricFallbackPressed?(r._sdk.log(e.LogLevel.Debug,(function(){return"Biometric prompt fallback button pressed"})),void r.processControlRequest(e.ControlRequest.create(r.getBiometricPromptFallbackControlType()))):i.getErrorCode()==e.AuthenticationErrorCode.UserCanceled?(r._sdk.log(e.LogLevel.Debug,(function(){return"Native face authenticator captured user cancel error code."})),void r.invokeCancellationUiOrEscape()):void r.performErrorRecoveryForError(i);r.processAuthFailureAssertionAndHandleError(i,s)}))},i.prototype.getKeyForEnrollmentDataAndInput=function(n,o){var r=this;return new Promise((function(i,s){var a=o;r.shouldAllowBiometricFallbackButton(a)&&(r._biometricPromptFallbackControlType=a.getFallbackControlRequestType());var u=r.authenticatorKeyTagForScheme(n.version,n.salt),c=r._sdk.host.getKeyPair(u,t.sdkhost.KeyClass.StdSigningKey,t.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb);if(!c){var l={};throw l[t.sdkhost.ErrorDataInternalError]=t.sdkhost.InternalErrorBiometricInvalidated,new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to authenticate with invalidated FaceID.",l)}c.setBiometricPromptInfo(e.util.BiometricPromptInfoFrom.nativeFaceInput(a),null,null),i({key:c})}))},i.prototype.generatePendingEnrollment=function(t,n){if(!n){var o=t;this.shouldAllowBiometricFallbackButton(o)&&(this._biometricPromptFallbackControlType=o.getFallbackControlRequestType())}return this.generateKeyForScheme(t,this.currentScheme).then((function(t){return n||t.key.setBiometricPromptInfo(e.util.BiometricPromptInfoFrom.nativeFaceInput(o),null,null),t}))},i.prototype.generateKeyForScheme=function(t,e){return this.generateFaceNativeKeyForScheme(e)},i.prototype.schemeVersionRequiresRollover=function(t){return"v0"==t||"v1"==t},i.prototype.generateFaceNativeKeyForScheme=function(n){var o;o="v1"==n||"v2"==n?this._sdk.host.generateRandomHexString(24):"";var r=this.authenticatorKeyTagForScheme(n,o);return e.util.wrapPromiseWithActivityIndicator(this._uiHandler,this._actionDriver.policyAction(),this._clientContext,this._sdk.host.generateKeyPair(r,t.sdkhost.KeyClass.StdSigningKey,t.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb,!0).then((function(t){return{key:t,salt:o,schemeVersion:n}}),(function(t){if(t.getErrorCode()==e.AuthenticationErrorCode.Internal&&t.getData()){var n=t.getData(),o=e.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(n,"Native Face");if(o)throw o}throw t})))},i.prototype.authenticatorKeyTagForScheme=function(t,e){return i.authenticatorKeyTagForUser(this.user,t,e)},i}(o.AuthenticationDriverLocalPersistentKeyPairBased);o.AuthenticationDriverNativeFace=r}(n.authenticationdrivers||(n.authenticationdrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(n){function o(t,e,o,r){var i=n.call(this,t,e,r)||this;return i._possibleTargets=o,i.setupDataModel(e),i}return F(o,n),o.prototype.getPossibleTargets=function(){return this._possibleTargets},o.prototype.createAuthenticatorSession=function(){var e,n=this;if(0!=(e=this._authenticationParameters?this._authenticationParameters.filter((function(e){return e instanceof t.AuthenticationActionParameterTargetSelection})):[]).length){this._sdk.log(t.LogLevel.Debug,(function(){return"Target based driver found target selection parameters."}));var o=e[0].getTarget().getChannelAssertionId(),r=this._possibleTargets.filter((function(t){return t.getChannelAssertionId()==o}));r.length?(this._pendingTargetSelection=r[0],this._sdk.log(t.LogLevel.Debug,(function(){return"Target based driver will select target "+n._pendingTargetSelection+" based on selection parameter."})),this._lastSelectedTarget=this._pendingTargetSelection):this._sdk.log(t.LogLevel.Warning,(function(){return"Target selection parameter for target based auth driver specified invalid target assertiong id "+o+"."}))}var i=this._uiHandler.createOtpAuthSession("otp",this.user.displayName,this._possibleTargets,this._autoExecTarget);if(!i)throw t.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createOtpAuthSession");return i.setAvailableTargets(this._possibleTargets),i},o.prototype.authenticateInStartedSession=function(e){var n=this;if(0==this._possibleTargets.length)return this._sdk.log(t.LogLevel.Warning,(function(){return"No authentication target available for OTP. Doing error recovery."})),void this.performErrorRecoveryForError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AuthenticatorExternalConfigError,"No targets available for OTP."),!0);if(this._sdk.log(t.LogLevel.Debug,(function(){return"Notifying current session of generated OTP format and target"})),this._inputSession.setGeneratedOtp(this._format,this._lastSelectedTarget),this._pendingTargetSelection){this._sdk.log(t.LogLevel.Debug,(function(){return"Performing pending target selection "+n._pendingTargetSelection}));var o=t.TargetBasedAuthenticatorInput.createTargetsSelectionRequest([this._pendingTargetSelection]);this._pendingTargetSelection=null,this.handleInputOrControlResponse(t.InputOrControlResponse.createInputResponse(o))}else this._inputSession.promiseInput().then((function(t){n.handleInputOrControlResponse(t)})).catch((function(e){n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},o.prototype.registerInStartedSession=function(e){throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Cannot register OTP authenticator.")},o.prototype.handleTargetBasedAuthenticatorConcreteInput=function(e){if(e instanceof t.OtpInputOtpSubmission)this.processAuthenticateAssertion({otp:e.getOtp()},{assertion_id:this._possibleTargets[0].getChannelAssertionId()});else{if(!(e instanceof t.OtpInputRequestResend))throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Unknown OTP response type received from application callback.");this.triggerForSelectedTarget()}},o.prototype.handleAuthenticateAssertionResult=function(e,o,r,i,s){return e.data&&e.data.additional_error_code&&1==e.data.additional_error_code&&(this._sdk.log(t.LogLevel.Debug,(function(){return"Reached max number of attempts - invalidating current target."})),this._lastSelectedTarget=null,this._format=null),n.prototype.handleAuthenticateAssertionResult.call(this,e,o,r,i,s)},o.prototype.handleAuthenticationInputResponse=function(e){if(e.getAuthenticatorInput())this.handleTargetBasedAuthenticatorConcreteInput(e.getAuthenticatorInput());else{if(!e.getSelectedTargets()[0])throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Invalid target-based authetnicator response type received from application callback. Target-based authenticator inputs must be created by calling TargetBasedAuthenticatorInput.createAuthenticatorInput.");var n=e.getSelectedTargets();if(n.length>1)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Attempt to select multiple OTP targets while OTP supports only a single target.");var o=n[0];if(this._possibleTargets.indexOf(o)<0)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Attempt to select an OTP target not originally listed in the session.");this._lastSelectedTarget=o,this.triggerForSelectedTarget()}},o.prototype.triggerForSelectedTarget=function(){var n=this;if(!this._lastSelectedTarget)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Attempt to trigger OTP generation without a selected target.");var o={target_id:this._lastSelectedTarget.getTargetIdentifier(),channel_index:this._lastSelectedTarget.getChannelIndex()},r={assertion_id:this._lastSelectedTarget.getChannelAssertionId()};this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"otp",o,r).then((function(o){o.assertion_error_code&&o.assertion_error_code!=e.Protocol.AssertionErrorCode.FailOver&&(n._sdk.log(t.LogLevel.Error,(function(){return"Assertion error encoutered. Clearing last selected target."})),n._lastSelectedTarget=null),n.handleAuthenticateAssertionResult(o,n._authenticatorDescription,"otp",r,r)||(o.data&&o.data.otp_format&&(n._sdk.log(t.LogLevel.Debug,(function(){return"Received updated OTP and format."})),n._format=t.OtpFormatImpl.fromAssertionFormat(o.data.otp_format)),n._sdk.log(t.LogLevel.Debug,(function(){return"Restarting auth or reg."})),n.authOrRegInStartedSession(!0))})).catch((function(t){n.completeAuthenticatorSessionWithError(t)}))},o.prototype.handleRegistrationInputResponse=function(e){throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Cannot register OTP authenticator.")},o.prototype.setupDataModel=function(n){this._otpInitialState=n.state,this._otpInitialState==e.Protocol.AuthenticationMethodOtpState.Validate&&(this._lastSelectedTarget=this._possibleTargets[0],this._autoExecTarget=this._lastSelectedTarget);var o=n.format||n.otp_format;this._format=o&&t.OtpFormatImpl.fromAssertionFormat(o)||null},o}(n.AuthenticationDriver);n.AuthenticationDriverOtp=o}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(e){function n(t,n,o){return e.call(this,t,n,o)||this}return F(n,e),n.prototype.createAuthenticatorSession=function(){return this._uiHandler.createPasswordAuthSession("password",this.user.displayName)},n.prototype.authenticateInStartedSession=function(e){var n=this;this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(e){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},n.prototype.registerInStartedSession=function(e){var n=this;this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(e){return n.completeAuthenticatorSessionWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},n.prototype.handleAuthenticationInputResponse=function(e){var n=e.getPassword();n&&n.length>0?this.processAuthenticateAssertion({password:n}):this.performErrorRecoveryForError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.InvalidInput,"Password can't be empty"))},n.prototype.handleRegistrationInputResponse=function(e){var n=e.getPassword();n&&n.length>0?this.processRegisterAssertion({password:n}):this.performErrorRecoveryForError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.InvalidInput,"Password can't be empty"))},n}(e.AuthenticationDriver);e.AuthenticationDriverPassword=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(e){function n(t,n,o){return e.call(this,t,n,o)||this}return F(n,e),n.prototype.createAuthenticatorSession=function(){return this._uiHandler.createPatternAuthSession("pattern_centralized",this.user.displayName,3,4)},n.prototype.handleAuthenticationInputResponse=function(n){t.impl.PatternInputImpl.validateFormat(n)?e.prototype.handleAuthenticationInputResponse.call(this,n):this.performErrorRecoveryForError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Invalid pattern description format."))},n.prototype.handleRegistrationInputResponse=function(n){var o=n,r=this._authenticatorConfig;t.impl.PatternInputImpl.validateFormat(o)?r.min_length&&t.impl.PatternInputImpl.getPatternLength(o)<r.min_length?this.performErrorRecoveryForError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Invalid pattern length.")):e.prototype.handleRegistrationInputResponse.call(this,n):this.performErrorRecoveryForError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Invalid pattern description format."))},n.prototype.generateSecretToSignForInputResponse=function(t){return t.getPatternDescription()},n}(e.AuthenticationDriverCentralizedSecretInputBased);e.AuthenticationDriverPattern=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(e){function n(t,n,o){return e.call(this,t,n,o)||this}return F(n,e),Object.defineProperty(n.prototype,"pinLength",{get:function(){return this._authenticatorConfig.length},enumerable:!0,configurable:!0}),n.prototype.createAuthenticatorSession=function(){return this._uiHandler.createPinAuthSession("pin_centralized",this.user.displayName,this.pinLength)},n.prototype.handleRegistrationInputResponse=function(n){n.getPin().length==this.pinLength?e.prototype.handleRegistrationInputResponse.call(this,n):this.performErrorRecoveryForError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.InvalidInput,"Invalid PIN length provided.",{expected_length:this.pinLength}))},n.prototype.generateSecretToSignForInputResponse=function(t){return t.getPin()},n}(e.AuthenticationDriverCentralizedSecretInputBased);e.AuthenticationDriverPinCode=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(o){var r=function(o){function r(t,e,n){return o.call(this,t,e,n)||this}return F(r,o),r.prototype.createAuthenticatorSession=function(){var t=this,e=this.generatePlaceholderServerTokenGenerationPayload();return r.placeholderExtensionPoint.firstNonNull((function(n){return n.createPlaceholderAuthSession(t._authenticatorDescription.getPlaceholderId(),t._authenticatorConfig.placeholder_type||"",t._authenticatorDescription.getName()||"",t.user.displayName,t._authenticatorConfig.data||"",e)}))||this._uiHandler.createPlaceholderAuthSession(this._authenticatorDescription.getPlaceholderId(),this._authenticatorConfig.placeholder_type||"",this._authenticatorDescription.getName()||"",this.user.displayName,this._authenticatorConfig.data||"",e)},r.prototype.authenticateOrRegisterInStratedSession=function(t){var n=this;this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(t){return n.completeAuthenticatorSessionWithError(e.impl.AuthenticationErrorImpl.ensureAuthenticationError(t))}))},r.prototype.authenticateInStartedSession=function(t){this.authenticateOrRegisterInStratedSession(t)},r.prototype.registerInStartedSession=function(t){this.authenticateOrRegisterInStratedSession(t)},r.prototype.handleAuthenticationInputResponse=function(t){this.handleAuthenticationOrRegistrationInputResponse(t)},r.prototype.handleRegistrationInputResponse=function(t){this.handleAuthenticationOrRegistrationInputResponse(t)},r.prototype.handleAuthenticationOrRegistrationInputResponse=function(t){t instanceof e.PlaceholderAuthSuccessResponse?(this._sdk.log(e.LogLevel.Debug,(function(){return"Placeholder received PlaceholderAuthSuccessResponse."})),this.handlePlaceholderSuccessResponse(t)):t instanceof e.PlaceholderAuthFailureResponse?(this._sdk.log(e.LogLevel.Debug,(function(){return"Placeholder received PlaceholderAuthFailureResponse."})),this.handlePlaceholderFailureResponse(t)):t instanceof e.PlaceholderAuthFailureWithServerProvidedStatusResponse?(this._sdk.log(e.LogLevel.Debug,(function(){return"Placehoder received PlaceholderAuthFailureWithServerProvidedStatusResponse"})),this.processAuthFailureAssertionAndHandleError(t.getFailureError(),1)):(this._sdk.log(e.LogLevel.Error,(function(){return"Placeholder received unknkown response type."})),this.performErrorRecoveryForError(new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.AppImplementation,"Placeholder received unknkown response type.")))},r.prototype.handlePlaceholderSuccessResponse=function(t){var n={token:t.getPlaceholderToken()};this._operationMode==e.AuthenticatorSessionMode.Authentication?this.processAuthenticateAssertion(n):this.processRegisterAssertion(n)},r.prototype.handlePlaceholderFailureResponse=function(t){this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"auth_failure",{num_of_failures:1});var o={status:t.getRegistrationStatus()==e.AuthenticatorRegistrationStatus.Registered?n.Protocol.AuthenticationMethodStatus.Registered:n.Protocol.AuthenticationMethodStatus.Unregistered,expired:t.getExpired(),locked:t.getLocked(),last_used:0};this._authenticatorDescription.updateWithAuthenticatorState(o),this.performErrorRecoveryForError(t.getFailureError())},r.prototype.generatePlaceholderServerTokenGenerationPayload=function(){var t=this.user.deviceId||this._actionDriver._controlFlowProcessor._session.deviceId(),e={assertion_id:this._authenticatorDescription.assertionId,challenge:this._actionDriver._controlFlowProcessor.challenge,device_id:t,auth_type:this._authenticatorDescription.getAuthenticatorId()};return btoa(JSON.stringify(e))},r.placeholderExtensionPoint=new n.ExtensionPoint(t.tarsusplugin.TARSUS_EXTENSION_POINT_NAME_PLACEHOLDER_EXTENSION),r}(o.AuthenticationDriver);o.AuthenticationDriverPlaceholder=r}(n.authenticationdrivers||(n.authenticationdrivers={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(e){function n(t,n,o){var r=e.call(this,t,n,o)||this;return r._pendingRestartRequest=!1,r}return F(n,e),n.prototype.createAuthenticatorSession=function(){return this._pendingRestartRequest=!1,this._uiHandler.createSecurityQuestionAuthSession("question",this.user.displayName)},n.prototype.authenticateInStartedSession=function(n){var o=this,r=Promise.resolve(null);this._pendingRestartRequest&&(this._pendingRestartRequest=!1,r=this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"restart",{}).then((function(e){e.data&&e.data.question?o._currentStep=o.loadStepFromQuestionDict(e.data.question):o.completeAuthenticatorSessionWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Unexpected response to question restart request."))}))),r.then((function(t){e.prototype.authenticateInStartedSession.call(o,n)}))},n.prototype.loadStepFromQuestionDict=function(e){var n=Object.keys(e);if(1!=n.length)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Expecting a single authentication question.");return t.impl.SecurityQuestionStepDescriptionImpl.createForAuthQuestion(new t.impl.SecurityQuestionImpl(n[0],e[n[0]],!0))},n.prototype.createInitialInputStep=function(){var e=this._authenticatorConfig;switch(this._operationMode){case t.AuthenticatorSessionMode.Authentication:if(!e.question)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Expecting authentication question dictionary.");return this.loadStepFromQuestionDict(e.question);case t.AuthenticatorSessionMode.Registration:if(!e.questions||!e.reg_min_questions)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Expecting registration question dictionary.");var n=e.questions,o=Object.keys(n).map((function(e){return new t.impl.SecurityQuestionImpl(e,n[e].text,n[e].registered)}));return t.impl.SecurityQuestionStepDescriptionImpl.createForRegistrationQuestions(o,e.reg_min_questions)}},n.prototype.prepareNextAuthenticationStep=function(t){return this.loadStepFromQuestionDict(t.data.question)},n.prototype.updateCurrentAuthenticationStep=function(t,e){return e},n.prototype.handleAuthenticationInputResponse=function(e){var n=e;if(this.verifyValidAnswers(n),1!=n.getAnswers().length)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Expecting exactly one answer on secuirty question authentication.");var o=this.securityQuestionAnswersResposneToAnswerMap(n);this.processAuthenticateAssertion({answer:o})},n.prototype.handleRegistrationInputResponse=function(e){var n=e;if(this.verifyValidAnswers(n),this.currentSecurityQuestionsStep().getMinAnswersNeeded()>n.getAnswers().length)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Not enough answers provided to security questions registration process.");var o=this.securityQuestionAnswersResposneToAnswerMap(n);this.processRegisterAssertion({answers:o})},n.prototype.handleErrorRecoveryAction=function(n,o){o.getErrorCode()==t.AuthenticationErrorCode.InvalidInput&&(this._pendingRestartRequest=!0),e.prototype.handleErrorRecoveryAction.call(this,n,o)},n.prototype.verifyValidAnswers=function(e){for(var n=0,o=e.getAnswers();n<o.length;n++){var r=o[n];if(r.getAnswer()&&(!r.getAnswer().getAnswerText()||0==r.getAnswer().getAnswerText().length))throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Empty answers are not allowed.")}},n.prototype.securityQuestionAnswersResposneToAnswerMap=function(e){var n=this,o={};return e.getAnswers().forEach((function(e){if(n.currentSecurityQuestionsStep().getSecurityQuestions().indexOf(e.getQuestion())<0)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Answer provided to a question not included in this step.");var r=n._sdk.host.calcHexStringEncodedSha256Hash(t.util.asciiToHex(e.getAnswer().getAnswerText().toLowerCase()));o[e.getQuestion().getSecurityQuestionId()]=r})),o},n.prototype.currentSecurityQuestionsStep=function(){return this._currentStep},n}(e.AuthenticationDriverMultiStep);e.AuthenticationDriverSecurityQuestions=n}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){!function(t){var e=function(){};t.AuthenticationDriverSessionResult=e;var n=function(t){function e(e,n){var o=t.call(this)||this;return o.requiredAuthenticator=e||null,o.allowedAuthenticators=n||null,o}return F(e,t),e}(e);t.AuthenticationDriverSessionResultSwitchAuthenticator=n;var o=function(t){function e(e){var n=t.call(this)||this;return n.assertionResult=e,n}return F(e,t),e}(e);t.AuthenticationDriverSessionResultAuthenticationCompleted=o;var r=function(t){function e(e){var n=t.call(this)||this;return n.escapeRequest=e,n}return F(e,t),e}(e);t.AuthenticationDriverSessionResultEscapeRequested=r}(t.authenticationdrivers||(t.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(o){function r(t,e,n){var r=o.call(this,t,e,n)||this;return r._previousSelectedDevices=[],r.methodName="totp",r.setupDataModel(e,n),r}return F(r,o),r.prototype.setupDataModel=function(t,o){this._state=t.state,this._requiresChallengeGeneration=t.state!=e.Protocol.AuthenticationMethodTotpState.Validate,this._selectedDevices=null,this._state==e.Protocol.AuthenticationMethodTotpState.Validate&&t.challenge&&(this._challenge=this.createTotpChallenge(t.challenge)),this._selectableDevices=t.selectable_devices?n.AuthenticationDriverDescriptorTotp.createTargetsFromConfig(t):null},r.prototype.createAuthenticatorSession=function(){var e=this;if(this._authenticationParameters){var n=this._authenticationParameters.filter((function(t){}));if(this._selectableDevices&&0!=n.length){this._sdk.log(t.LogLevel.Debug,(function(){return"Target based driver found target selection parameters."}));var o=this._selectableDevices.reduce((function(t,e){return t[e.getDeviceIdentifier()]=e,t}),{});this._pendingTargetSelection=n.map((function(e){var n=e.getTarget(),r=o[n.getDeviceIdentifier()];if(!r)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Authentication parameter tried to select a device not presented as a selectable target");return r}),{}),this._sdk.log(t.LogLevel.Debug,(function(){return"Target based driver will select targets "+e._pendingTargetSelection+" based on selection parameter."}))}}var r=this._uiHandler.createTotpAuthSession("totp",this.user.displayName);if(!r)throw t.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from createTotpAuthSession");return r.setAvailableTargets(this._selectableDevices),r},r.prototype.handleRegistrationInputResponse=function(e){throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Cannot register TOTP authenticator.")},r.prototype.registerInStartedSession=function(e){throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Cannot register TOTP authenticator.")},r.prototype.authenticateInStartedSession=function(e){var n=this;!this._selectedDevices&&this._pendingTargetSelection&&this._pendingTargetSelection.length&&(this._sdk.log(t.LogLevel.Debug,(function(){return"TOTP authentication driver has "+n._pendingTargetSelection.length+" pending targets."})),this._selectedDevices=this._pendingTargetSelection),this.requestInput()},r.prototype.requestInput=function(){var e=this;this._inputSession.setTargetDevices(this._selectedDevices),this._inputSession.setChallenge(this._challenge),this.pendingChallengeGeneration()?this.sendGenerateTotpAssertion():this._inputSession.promiseInput().then((function(t){e.handleInputOrControlResponse(t)})).catch((function(n){e.performErrorRecoveryForError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(n))}))},r.prototype.handleAuthenticationInputResponse=function(e){var n=e.getAuthenticatorInput(),o=e.getSelectedTargets();if(n){this._sdk.log(t.LogLevel.Debug,(function(){return"Handling OTP code Input."}));var r={totp:n.getCode()};this._selectedDevices&&(r.device_ids=this._selectedDevices.map((function(t){return t.getDeviceIdentifier()}))),this.processAuthenticateAssertion(r)}else{if(!o||!this._selectableDevices)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Invalid target-based authenticator response type received from application callback. Target-based authenticator inputs must be created by calling TargetBasedAuthenticatorInput.createAuthenticatorInput.");var i=this._selectableDevices;if(this._sdk.log(t.LogLevel.Debug,(function(){return"Handling target selection Input."})),this._selectedDevices=o.map((function(e){var n=e;if(i.indexOf(n)<0)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Attempt to select a Totp target not originally listed in the session.");return n})),0===this._selectedDevices.length)throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.InvalidInput,"No targets selected for TOTP.");this.requestInput()}},r.prototype.sendGenerateTotpAssertion=function(){var n=this,o={};this._selectedDevices&&(o.device_ids=this._selectedDevices.map((function(t){return t.getDeviceIdentifier()}))),this._sdk.log(t.LogLevel.Debug,(function(){return"Requesting TOTP generation"})),this._actionDriver.sendAuthenticatorAssertionRequest(this._authenticatorDescription,"generate",o,{}).then((function(r){n._previousSelectedDevices=n._selectedDevices||[],r.assertion_error_code&&r.assertion_error_code!=e.Protocol.AssertionErrorCode.FailOver&&(n._sdk.log(t.LogLevel.Error,(function(){return"Assertion error encountered."})),n._selectedDevices=null),!n.handleAuthenticateAssertionResult(r,n._authenticatorDescription,"generate",o)&&r.data&&(n._state=r.data.state,r.data.challenge&&(n._challenge=n.createTotpChallenge(r.data.challenge)),n.requestInput())})).catch((function(e){n.performErrorRecoveryForError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},r.prototype.pendingChallengeGeneration=function(){var t=this._selectedDevices&&(this._previousSelectedDevices.length!==this._selectedDevices.length||this._previousSelectedDevices.some((function(t,e){return t!==this._selectedDevices[e]}),this));return this._requiresChallengeGeneration&&(t||!this._selectableDevices&&this._state==e.Protocol.AuthenticationMethodTotpState.Generate)},r.prototype.createTotpChallenge=function(e){var n=new t.TotpChallenge;return n.setValue(e.value),n.setFormat(t.TotpChallengeFormatImpl.fromAssertionFormat(e.format)),n},r.prototype.handleAuthenticateAssertionResult=function(n,r,i,s,a){if(n.assertion_error_code&&n.assertion_error_code==e.Protocol.AssertionErrorCode.RepeatCurrentStep&&n.data&&"check_digit"==n.data.reason){this._sdk.log(t.LogLevel.Info,(function(){return"handleAuthenticateAssertionResult() for Totp code with incorrect check digit"}));var u=new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.InvalidInput,n.assertion_error_message||"Totp code with incorrect check digit");return u.setPublicProperty(t.AuthenticationErrorProperty.AuthenticatorInvalidInputErrorDescription,t.AuthenticationErrorPropertySymbol.AuthenticatorInvalidInputErrorDescriptionTotpIncorrectCheckDigit),this.performErrorRecoveryForError(u),!0}return o.prototype.handleAuthenticateAssertionResult.call(this,n,r,i,s,a)},r}(n.AuthenticationDriver);n.AuthenticationDriverTotp=o}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n;!function(t){t.LONG="tooLong",t.SHORT="tooShort",t.LOUD="tooLoud",t.SOFT="tooSoft",t.NOISY="tooNoisy",t.WRONG_PASSPHRASE="wrongPassphrase",t.VALID_PASSPHRASE="000"}(n||(n={}));var o=function(e){function o(t,n,o){return e.call(this,t,n,o)||this}return F(o,e),o.prototype.createAuthenticatorSession=function(){return this._uiHandler.createVoiceAuthSession("voice",this.user.displayName)},o.prototype.updatePassphraseFromAssertionResultIfNeeded=function(e){var n=e.data;if(n){var o=n.passphrase_text;o&&(this._sdk.log(t.LogLevel.Info,(function(){return"handleAuthenticateAssertionResult() received updated passphrase"})),this._authenticatorConfig.passphrase_text=o)}},o.prototype.handleRegisterAssertionResult=function(t){return this.updatePassphraseFromAssertionResultIfNeeded(t),e.prototype.handleRegisterAssertionResult.call(this,t)},o.prototype.handleAuthenticateAssertionResult=function(t,n,o,r,i){return this.updatePassphraseFromAssertionResultIfNeeded(t),e.prototype.handleAuthenticateAssertionResult.call(this,t,n,o,r,i)},o.prototype.createInitialInputStep=function(){var e=this._authenticatorConfig;return new t.impl.AudioAcquisitionStepDescriptionImpl(this.createStepTag(),e.passphrase_text)},o.prototype.prepareNextAuthenticationStep=function(e){var n=this._authenticatorConfig;return new t.impl.AudioAcquisitionStepDescriptionImpl(this.createStepTag(e.data&&e.data.additional_error_code),n.passphrase_text)},o.prototype.updateCurrentAuthenticationStep=function(t,e){return this.prepareNextAuthenticationStep(t)},o.prototype.handleAuthenticationInputResponse=function(t){this.processAuthenticateAssertion(t.getAcquisitionResponse())},o.prototype.handleRegistrationInputResponse=function(t){this.processRegisterAssertion(t.getAcquisitionResponse())},o.prototype.createStepTag=function(t){return"voice_"+(t?this.mapHintToVoiceError(t):n.VALID_PASSPHRASE)},o.prototype.mapHintToVoiceError=function(e){switch(e){case 101:return n.LONG;case 102:return n.SHORT;case 103:return n.LOUD;case 104:return n.SOFT;case 105:return n.NOISY;case 106:return n.WRONG_PASSPHRASE;default:throw new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Voice error code "+e+" is unknown/unhandled")}},o}(e.AuthenticationDriverMultiStep);e.AuthenticationDriverVoice=o}(e.authenticationdrivers||(e.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){!function(t){t.AuthenticatorDrivers={password:new t.SimpleAuthenticationDriverDescriptor(t.AuthenticationDriverPassword),pin_centralized:new t.SimpleAuthenticationDriverDescriptor(t.AuthenticationDriverPinCode),pin:new t.AuthenticationDriverDescriptorLocal(t.AuthenticationDriverLocalPinCode,t.AuthenticationDriverLocalPinCode.authenticatorName),pattern:new t.AuthenticationDriverDescriptorLocal(t.AuthenticationDriverLocalPattern,t.AuthenticationDriverLocalPattern.authenticatorName),pattern_centralized:new t.SimpleAuthenticationDriverDescriptor(t.AuthenticationDriverPattern),fingerprint:new t.AuthenticationDriverDescriptorFingerprint,face_id:new t.AuthenticationDriverDescriptorNativeFace,otp:new t.AuthenticationDriverDescriptorOtp,face_server:new t.AuthenticationDriverDescriptorFace,voice_server:new t.AuthenticationDriverDescriptorVoice,mobile_approve:new t.AuthenticationDriverDescriptorMobileApprove,totp:new t.AuthenticationDriverDescriptorTotp,question:new t.SimpleAuthenticationDriverDescriptor(t.AuthenticationDriverSecurityQuestions),fido2:new t.AuthenticationDriverDescriptorFido2(t.AuthenticationDriverFido2),device_biometrics:new t.AuthenticationDriverDescriptorDeviceBiometrics,__placeholder:new t.SimpleAuthenticationDriverDescriptor(t.AuthenticationDriverPlaceholder)}}(t.authenticationdrivers||(t.authenticationdrivers={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o,r;e=(o=(r=t.sdk||(t.sdk={})).core||(r.core={})).collectors||(o.collectors={}),n=function(){function t(t){this.enabledCollectors=t}return t.prototype.isEnabled=function(){var t=this.getAssociatedCollectorType();return null==t||-1!=this.enabledCollectors.indexOf(t)},t}(),e.Collector=n}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o,r;n=function(t){function e(e,n){var o=t.call(this,e)||this;return o.cacheValidityPeriod=n,o}return F(e,t),e.prototype.provide=function(t){var e=this;return new Promise((function(n,o){var r=e.getCachedData(t);r?n(r):e.provideNewData(t).then((function(o){e.saveCollectionResultToLocalStorage(t,o),n(o)}),o)}))},e.prototype.saveCollectionResultToLocalStorage=function(t,e){var n=t.host,o=this.getSchemeVersionTarsusKeyPath(),r=new Object;r.timeStamp=Date.now(),r.collectionResult=e,n.writeStorageKey(o,r)},e.prototype.getCachedData=function(t){var e=t.host,n=this.getSchemeVersionTarsusKeyPath(),o=e.readStorageKey(n);if(!o.collectionResult||!o.timeStamp)return t.log(r.LogLevel.Debug,(function(){return"No collected data found in cache."})),null;var i=o.timeStamp;return Date.now()-i>this.cacheValidityPeriod?(t.log(r.LogLevel.Debug,(function(){return"Cached collected data invalidated."})),null):(t.log(r.LogLevel.Debug,(function(){return"Loaded cached collector data: "+JSON.stringify(o.collectionResult)})),o.collectionResult)},e}((e=(o=(r=t.sdk||(t.sdk={})).core||(r.core={})).collectors||(o.collectors={})).Collector),e.CacheableCollector=n}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o,r;n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.provide=function(e){return M(this,void 0,void 0,(function(){var n,o;return q(this,(function(r){switch(r.label){case 0:return n=new Object,o=n,[4,e.host.queryAsyncHostInfo(t.sdkhost.AsyncHostInformationKey.Fido2UserVerifyingPlatformAuthenticatorAvailable)];case 1:return o.fido2_user_verifying_platform_authenticator_available="true"==r.sent(),n.audio_acquisition_supported="true"==e.host.queryHostInfo(t.sdkhost.HostInformationKey.AudioAcquitisionSupported),n.finger_print_supported="true"==e.host.queryHostInfo(t.sdkhost.HostInformationKey.FingerprintSupported),n.image_acquisition_supported="true"==e.host.queryHostInfo(t.sdkhost.HostInformationKey.ImageAcquitisionSupported),n.persistent_keys_supported="true"==e.host.queryHostInfo(t.sdkhost.HostInformationKey.PersistentKeysSupported),n.face_id_key_bio_protection_supported="true"==e.host.queryHostInfo(t.sdkhost.HostInformationKey.FaceIdKeyBioProtectionSupported),n.fido_client_present="true"==e.host.queryHostInfo(t.sdkhost.HostInformationKey.FidoClientPresent),n.fido2_client_present="true"==e.host.queryHostInfo(t.sdkhost.HostInformationKey.Fido2ClientPresent),n.dyadic_present="true"==e.host.queryHostInfo(t.sdkhost.HostInformationKey.DyadicPresent),n.installed_plugins=e.pluginManager.getInitializedPlugins().map((function(e){return{plugin_name:e.getPluginInfo().getPluginName(),plugin_version:t.tarsusplugin.impl.PluginInfoImpl.versionToString(e.getPluginInfo())}})),""!=e.host.queryHostInfo(t.sdkhost.HostInformationKey.HostProvidedFeatures)&&(n.host_provided_features=e.host.queryHostInfo(t.sdkhost.HostInformationKey.HostProvidedFeatures)),[2,n]}}))}))},n.prototype.getAssociatedCollectorType=function(){return r.CollectorType.Capabilities},n}((e=(o=(r=t.sdk||(t.sdk={})).core||(r.core={})).collectors||(o.collectors={})).Collector),e.CapabilitiesCollector=n}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o,r;r=t.sdk||(t.sdk={}),o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return F(n,t),n.prototype.provide=function(t){var n=new Object;for(var o in r.CollectorType)n[o]=e.Protocol.CollectorState.Disabled;for(var i=0,s=this.enabledCollectors;i<s.length;i++)n[s[i]]=e.Protocol.CollectorState.Active;var a=new Object;for(var u in r.CollectorType)this.isNumeric(u)&&(a[r.CollectorType[u].toLowerCase()]=n[u]);return Promise.resolve(a)},n.prototype.getAssociatedCollectorType=function(){return null},n.prototype.isNumeric=function(t){return parseInt(t,10)>=0},n}((n=(e=r.core||(r.core={})).collectors||(e.collectors={})).Collector),n.CollectorsStateCollector=o}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o,r;r=t.sdk||(t.sdk={}),n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.provide=function(e){var n=e.host,r=new Object;r.logged_users=0,o.User.iterateUsers(e,(function(t){t.deviceBound&&++r.logged_users}));var i=n.queryHostInfo(t.sdkhost.HostInformationKey.DevicePersistenceMode);return"string"==typeof i&&(r.persistence_mode=i),Promise.resolve(r)},n.prototype.getAssociatedCollectorType=function(){return r.CollectorType.DeviceDetails},n}((e=(o=r.core||(r.core={})).collectors||(o.collectors={})).Collector),e.DeviceDetailsCollector=n}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o,r;r=t.sdk||(t.sdk={}),n=function(t){function e(n){return t.call(this,n,e.cacheValidityPeriod)||this}return F(e,t),e.prototype.provideNewData=function(t){var e=this;return new Promise((function(n,i){if(!t.currentSession)throw"No valid session.";var s=new Object;t.log(r.LogLevel.Debug,(function(){return"Refreshing fido authenticators data"}));for(var a=new Array,u=0,c=o.authenticationdrivers._fidoClientProviders;u<c.length;u++)a.push(c[u].getAvailableAuthenticatorsIds(t));Promise.all(a.map((function(t){return t.catch((function(t){return new Error(t)}))}))).then((function(o){var r=e.getCollectedAaids(o,t);s.fido=r,n(s)})).catch((function(e){t.log(r.LogLevel.Error,(function(){return"Error parsing fido authenticators collection results"+e})),n({})}))}))},e.prototype.getAssociatedCollectorType=function(){return r.CollectorType.FidoAuthenticators},e.prototype.getSchemeVersionTarsusKeyPath=function(){return new o.TarsusKeyPath("fido_collection_result")},e.prototype.getCollectedAaids=function(t,e){for(var n=new Array,o=function(t){if(t instanceof Error)e.log(r.LogLevel.Error,(function(){return"Error collecting fido authenticators details "+t}));else if(t&&t.length>0)for(var o=0,i=t;o<i.length;o++){var s=i[o];if(s){var a=new Object;a.aaid=s,n.push(a)}}},i=0,s=t;i<s.length;i++)o(s[i]);return n},e.cacheValidityPeriod=6048e5,e}((e=(o=r.core||(r.core={})).collectors||(o.collectors={})).CacheableCollector),e.FidoAuthenticatorsCollector=n}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){var e,n,o,r;r=t.sdk||(t.sdk={}),n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.provide=function(t){for(var n=new Object,o=0,r=e.authenticatorDriversLocal;o<r.length;o++){var i=r[o],s=this.provideLocalEnrollmentData(t,i);s&&(n[i]=s)}return Promise.resolve(n)},e.prototype.getAssociatedCollectorType=function(){return r.CollectorType.LocalEnrollments},e.prototype.provideLocalEnrollmentData=function(t,e){var n=null;if(t.currentSession){var o=t.currentSession.user.localEnrollments[e];o&&((n=new Object).registration_status=o.status,n.validation_status=o.validationStatus)}return n},e.authenticatorDriversLocal=[o.authenticationdrivers.AuthenticationDriverLocalPinCode.authenticatorName,o.authenticationdrivers.AuthenticationDriverLocalPattern.authenticatorName,o.authenticationdrivers.AuthenticationDriverDescriptorFingerprint.authenticatorName,o.authenticationdrivers.AuthenticationDriverDescriptorNativeFace.authenticatorName],e}((e=(o=r.core||(r.core={})).collectors||(o.collectors={})).Collector),e.LocalEnrollmentsCollector=n}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){!function(t){t.TarsusCollectors={capabilities:{createCollector:t.CapabilitiesCollector},collector_state:{createCollector:t.CollectorsStateCollector},device_details:{createCollector:t.DeviceDetailsCollector},hw_authenticators:{createCollector:t.FidoAuthenticatorsCollector},local_enrollments:{createCollector:t.LocalEnrollmentsCollector}}}(t.collectors||(t.collectors={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){!function(t){t.PKCredentialException=function(){};var e=function(){function t(t,e){this._credentialId=t,this._userInteractionSessionProvider=e}return Object.defineProperty(t.prototype,"credentialId",{get:function(){return this._credentialId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"user",{get:function(){return this._userInteractionSessionProvider._session.user},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sdk",{get:function(){return this._userInteractionSessionProvider._sdk},enumerable:!0,configurable:!0}),t.prototype.getClientContext=function(){return this._userInteractionSessionProvider._clientContext},t}();t.PKCredential=e}(t.credential||(t.credential={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(n){function o(t,e,o){var r=n.call(this,t,o)||this;return r._host=e,r._externalCancelled=!1,r}return F(o,n),Object.defineProperty(o.prototype,"uiHandler",{get:function(){return this._userInteractionSessionProvider._uiHandler},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"authenticatorDescription",{get:function(){return this._authenticatorDescription},enumerable:!0,configurable:!0}),o.prototype.onCancelRun=function(){this._externalCancelled=!0,this.lastObtainedKeyPair&&(this.lastObtainedKeyPair=null)},o.prototype.startCredentialSession=function(e){if(this._authenticatorConfig=this._host.getAuthenticatorConfig(this),this._inputSession=this.createAuthenticatorSession(),!this._inputSession)throw t.impl.AuthenticationErrorImpl.appImplementationError("Invalid return from authenticator session creation call.");this._authenticatorDescription=this._host.getAuthenticatorDescription(this),this._inputSession.startSession(this._authenticatorDescription,t.AuthenticatorSessionMode.Authentication,this._host.getPolicyAction(this),e)},o.prototype.endCredentialSession=function(){this.lastObtainedKeyPair&&(this.lastObtainedKeyPair=null),this._inputSession&&(this._inputSession.endSession(),delete this._inputSession)},o.prototype.signHex=function(t){var e=this;return this.doSafeCredentialOperation((function(){return e.lastObtainedKeyPair.signHex(t)}))},o.prototype.unwrapAsymmetricKeyPairFromPrivateHex=function(t,e){var n=this;return this.doSafeCredentialOperation((function(){return n.lastObtainedKeyPair.unwrapAsymmetricKeyPairFromPrivateKeyHex(t,e)}))},o.prototype.doSafeCredentialOperation=function(e){var n=this;return new Promise((function(o,r){n._rejectionFunction||n._completionFunction?r(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.Internal,"Illegal credential state")):(n._rejectionFunction=r,n._completionFunction=function(i){n.lastObtainedKeyPair=i;try{e().then(o,(function(e){return n.processLocalAuthenticatorError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))}catch(e){r(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}},n.authenticateInStartedSession(!1))})).finally((function(){n._rejectionFunction=null,n._completionFunction=null}))},o.prototype.promiseRecoveryForError=function(e,n,o){var r=this;return n.indexOf(o)<0&&(o=n.indexOf(t.AuthenticationErrorRecovery.SelectAuthenticator)>=0?t.AuthenticationErrorRecovery.SelectAuthenticator:t.AuthenticationErrorRecovery.Fail),this._inputSession.promiseRecoveryForError(e,n,o).then((function(o){return r.sdk.log(t.LogLevel.Debug,(function(){return"Error recovery selected "+o})),r.sdk.log(t.LogLevel.Debug,(function(){return"recover from error: "+e.getErrorCode()})),n.indexOf(o)<0?(r.sdk.log(t.LogLevel.Error,(function(){return"Invalid error recovery option from callback: "+o+" not in "+n})),Promise.reject(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Invalid error recovery action selected by callback."))):Promise.resolve(o)}))},o.prototype.evaluateLocalRegistrationStatus=function(){var n=this.user.localEnrollments[this.credentialId];return n?n.validationStatus==e.LocalEnrollmentValidationStatus.Invalidated?t.AuthenticatorRegistrationStatus.LocallyInvalid:n.status!=e.LocalEnrollmentStatus.Registered?t.AuthenticatorRegistrationStatus.Unregistered:t.AuthenticatorRegistrationStatus.Registered:t.AuthenticatorRegistrationStatus.LocallyInvalid},Object.defineProperty(o.prototype,"lastObtainedKeyPair",{get:function(){return this._lastObtainedKeyPair},set:function(t){this._lastObtainedKeyPair&&this._lastObtainedKeyPair!=t&&this._lastObtainedKeyPair.closeKeyPair(),this._lastObtainedKeyPair=t},enumerable:!0,configurable:!0}),o.prototype.authenticateInStartedSession=function(e){var n=this;this._inputSession.promiseInput().then((function(t){return n.handleInputOrControlResponse(t)}),(function(e){return n.completeCredentialOperationWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}))},o.prototype.handleAuthenticationInputResponse=function(e){var n=this,o=this.user.localEnrollments[this.credentialId];o?this.getKeyForEnrollmentDataAndInput(o,e).then((function(e){n.sdk.log(t.LogLevel.Debug,(function(){return"Local authenticator key obtained; signing challenge"})),n.completeCredentialOperationWithResult(e)})).catch((function(e){n.processLocalAuthenticatorError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))})):this.completeCredentialOperationWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.NoRegisteredAuthenticator,"Missing key for fingerprint authenticator"))},o.prototype.processLocalAuthenticatorError=function(e){var n=this,o=this._host.getCredentialValidErrorRecoveryOptions(this,e),r=o.indexOf(t.AuthenticationErrorRecovery.RetryAuthenticator)>=0?t.AuthenticationErrorRecovery.RetryAuthenticator:t.AuthenticationErrorRecovery.Fail;this.promiseRecoveryForError(e,o,r).then((function(t){n.handleErrorRecoveryAction(t,e)}))},o.prototype.completeCredentialOperationWithResult=function(t){this._completionFunction(t)},o.prototype.completeCredentialOperationWithError=function(t){this._rejectionFunction(t)},o.prototype.handleInputOrControlResponse=function(e){try{e.isControlRequest()&&(e.getControlRequest().getRequestType()==t.ControlRequestType.CancelAuthenticator?this.invokeUiHandlerCancellation():this.signalControlRequest(e.getControlRequest())),e.getActionEscapeRequest()?this.signalEscapeRequest(e.getActionEscapeRequest()):this.handleAuthenticationInputResponse(e.getResponse())}catch(e){this.completeCredentialOperationWithError(t.impl.AuthenticationErrorImpl.ensureAuthenticationError(e))}},o.prototype.signalControlRequest=function(e){this._externalCancelled&&e.getRequestType()==t.ControlRequestType.CancelAuthenticator&&(e=t.ControlRequest.create(t.ControlRequestType.AbortAuthentication)),this._rejectionFunction(e)},o.prototype.signalEscapeRequest=function(t){this._rejectionFunction(t)},o.prototype.invokeUiHandlerCancellation=function(){var e=this,n=this._host.getCredentialAvailableCancellationOptions(this);this.uiHandler.controlOptionForCancellationRequestInSession(n,this._inputSession).then((function(o){o.getRequestType()==t.ControlRequestType.CancelAuthenticator&&e.completeCredentialOperationWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"controlOptionForCancellationRequestInSession returned CancelAuthenticator which is an invalid option.")),n.indexOf(o.getRequestType())<0&&e.completeCredentialOperationWithError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"controlOptionForCancellationRequestInSession returned an invalid option.")),e.signalControlRequest(o)}))},o.prototype.handleErrorRecoveryAction=function(e,n){switch(e){case t.AuthenticationErrorRecovery.RetryAuthenticator:this.signalControlRequest(t.ControlRequest.create(t.ControlRequestType.RetryAuthenticator));break;case t.AuthenticationErrorRecovery.ChangeAuthenticator:this.signalControlRequest(t.ControlRequest.create(t.ControlRequestType.ChangeMethod));break;case t.AuthenticationErrorRecovery.SelectAuthenticator:this.signalControlRequest(t.ControlRequest.create(t.ControlRequestType.SelectMethod));break;case t.AuthenticationErrorRecovery.Fail:default:this.completeCredentialOperationWithError(n)}},o}(n.PKCredential);n.PKCredentialAuthLocal=o}(e.credential||(e.credential={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(o){var r=function(o){function r(t,e,n){return o.call(this,t,e,n)||this}return F(r,o),r.prototype.getKeyForEnrollmentDataAndInput=function(t,n){var o=this;return new Promise((function(e,r){"v2"==t.version?o.getKeyForEnrollmentDataAndInputV2(t,n).then(e,r):o.getKeyForEnrollmentDataAndInputPreV2(t,n).then(e,r)})).then((function(t){if(!t)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.InvalidInput,"Invalid input provided to credential.");return t}))},r.prototype.getKeyForEnrollmentDataAndInputV2=function(e,o){var r=this,i=this.extractPbkdfInputFromInputResponse(o);return n.vault.pbkdfStretchHexSecretIntoAESKey(e.salt,i,e.cryptoSettings.getLocalEnrollmentKeySizeInBytes(),e.cryptoSettings.getLocalEnrollmentKeyIterationCount(),!0,this.sdk).then((function(n){return n.decrypt(e.keyMaterial,null).then((function(e){return r.sdk.host.generateHexSeededKeyPairExternalRepresentation(t.sdkhost.KeyClass.FidoECCSigningKey,e).then((function(e){return r.sdk.host.importVolatileKeyPair(t.sdkhost.KeyClass.FidoECCSigningKey,e)}))}))}))},r.prototype.getKeyForEnrollmentDataAndInputPreV2=function(e,n){var o=this;return this.authenticatorKeyTagForScheme(e.version,e.salt,e.cryptoSettings,n).then((function(e){return o.sdk.host.getKeyPair(e,t.sdkhost.KeyClass.StdSigningKey,t.sdkhost.KeyBiometricProtectionMode.None)}))},r.prototype.authenticatorKeyTagForScheme=function(t,o,r,i){var s=this;return new Promise((function(a,u){var c=s.extractPbkdfInputFromInputResponse(i);if("v0"==t&&(s.sdk.log(e.LogLevel.Debug,(function(){return"Using SDK CryptoSettings for migrated enrollment."})),r=s.sdk.cryptoSettings),!r)throw new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Missing crypto settings for local enrollment.");s.sdk.host.generatePbkdf2HmacSha1HexString(o,c,r.getLocalEnrollmentKeySizeInBytes(),r.getLocalEnrollmentKeyIterationCount()).then((function(o){var r=e.util.hexToBase64(o);return new n.TarsusKeyPath("per_user",s.user.guid.toString(),"local_auth_keys",s.credentialId,t,r)})).then(a,u)}))},r}(o.PKCredentialAuthLocal);o.PKCredentialLocalSecretInputBased=r}(n.credential||(n.credential={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){e.CredentialAuthPinCodeConfig=function(){};var n=function(e){function n(t,n,o){return e.call(this,t,n,o)||this}return F(n,e),Object.defineProperty(n.prototype,"pinLength",{get:function(){return this._authenticatorConfig.length},enumerable:!0,configurable:!0}),n.prototype.extractPbkdfInputFromInputResponse=function(e){return t.util.asciiToHex(e.getPin())},n.prototype.createAuthenticatorSession=function(){return this.uiHandler.createPinAuthSession(this.credentialId,this.user.displayName,this.pinLength)},n.create=function(t,e,o){return new n(t,e,o)},n}(e.PKCredentialLocalSecretInputBased);e.PKCredentialLocalPinCode=n}(e.credential||(e.credential={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(e){var n=function(e){function n(t,n,o){return e.call(this,t,n,o)||this}return F(n,e),n.prototype.handleAuthenticationInputResponse=function(n){t.impl.PatternInputImpl.validateFormat(n)?e.prototype.handleAuthenticationInputResponse.call(this,n):this.processLocalAuthenticatorError(new t.impl.AuthenticationErrorImpl(t.AuthenticationErrorCode.AppImplementation,"Invalid pattern description format."))},n.prototype.extractPbkdfInputFromInputResponse=function(e){return t.util.asciiToHex(e.getPatternDescription())},n.prototype.createAuthenticatorSession=function(){return this.uiHandler.createPatternAuthSession(this.credentialId,this.user.displayName,3,4)},n.create=function(t,e,o){return new n(t,e,o)},n}(e.PKCredentialLocalSecretInputBased);e.PKCredentialLocalPattern=n}(e.credential||(e.credential={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(e){!function(n){!function(o){var r=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return F(r,o),r.prototype.authenticatorKeyTagForScheme=function(t,e){return new n.TarsusKeyPath("per_user",this.user.guid.toString(),"local_auth_keys",this.credentialId,t,e)},r.prototype.getKeyForEnrollmentDataAndInput=function(n,o){var r=this;return new Promise((function(i,s){var a=r.authenticatorKeyTagForScheme(n.version,n.salt),u=r.sdk.host.getKeyPair(a,t.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey,t.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb);if(!u){var c={};throw c[t.sdkhost.ErrorDataInternalError]=t.sdkhost.InternalErrorBiometricInvalidated,new e.impl.AuthenticationErrorImpl(e.AuthenticationErrorCode.Internal,"Attempt to authenticate with invalidated biometric authenticator.",c)}r.updateKeyPairWithAuthenticationInput(u,r._inputSession,o),i(u)}))},r.prototype.processLocalAuthenticatorError=function(o){var r=this,i=o,s=Promise.resolve();if(i.getErrorCode()==e.AuthenticationErrorCode.Internal&&i.getData()){var a=i.getData();i=e.impl.AuthenticationErrorImpl.errorForHostInternalBiometricErrorData(a,this.credentialId)||i,(a[t.sdkhost.ErrorDataInternalError]==t.sdkhost.InternalErrorBiometricNotConfigured&&this._authenticatorDescription.getRegistered()||a[t.sdkhost.ErrorDataInternalError]==t.sdkhost.InternalErrorBiometricInvalidated)&&(s=n.LocalEnrollment.invalidateLocalRegistrationStatusAndNotifyUIHandler(this._userInteractionSessionProvider,this._authenticatorDescription))}s.catch((function(t){r.sdk.log(e.LogLevel.Error,t)})),s.finally((function(){if(i.getErrorCode()==e.AuthenticationErrorCode.UserCanceled)return r.sdk.log(e.LogLevel.Debug,(function(){return"${this.credentialId} authenticator captured user cancel error code."})),void r.invokeUiHandlerCancellation();r.completeCredentialOperationWithError(i)}))},r.prototype.evaluateLocalRegistrationStatus=function(){var n=o.prototype.evaluateLocalRegistrationStatus.call(this);if(n!=e.AuthenticatorRegistrationStatus.Registered)return n;var r=this.user.localEnrollments[this.credentialId],i=this.authenticatorKeyTagForScheme(r.version,r.salt),s=this.sdk.host.getKeyPair(i,t.sdkhost.KeyClass.HardwareProtectedSignAndEncryptKey,t.sdkhost.KeyBiometricProtectionMode.BindToEnrollmentDb);return s?(s.closeKeyPair(),e.AuthenticatorRegistrationStatus.Registered):e.AuthenticatorRegistrationStatus.LocallyInvalid},r}(o.PKCredentialAuthLocal);o.PKCredentialBiometric=r}(n.credential||(n.credential={}))}(e.core||(e.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(n){function o(t,e,o){return n.call(this,t,e,o)||this}return F(o,n),o.prototype.updateKeyPairWithAuthenticationInput=function(e,n,o){e.setBiometricPromptInfo(t.util.BiometricPromptInfoFrom.fingerprintInput(o),this.uiHandler,n)},o.prototype.authenticatorKeyTagForScheme=function(t,n){return e.authenticationdrivers.AuthenticationDriverFingerprint.authenticatorKeyTagForUser(this.user,t,n)},o.prototype.createAuthenticatorSession=function(){return this.uiHandler.createFingerprintAuthSession(this.credentialId,this.user.displayName)},o.prototype.shouldAllowBiometricFallbackButton=function(t){if(!t)return!1;var e=t.getFallbackButtonTitle();return!!(e&&e.length>0)},o.create=function(t,e,n){return new o(t,e,n)},o}(n.PKCredentialBiometric);n.PKCredentialFingerprint=o}(e.credential||(e.credential={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(n){function o(t,e,o){return n.call(this,t,e,o)||this}return F(o,n),o.prototype.updateKeyPairWithAuthenticationInput=function(e,n,o){e.setBiometricPromptInfo(t.util.BiometricPromptInfoFrom.nativeFaceInput(o),null,null)},o.prototype.authenticatorKeyTagForScheme=function(t,n){return e.authenticationdrivers.AuthenticationDriverNativeFace.authenticatorKeyTagForUser(this.user,t,n)},o.prototype.createAuthenticatorSession=function(){return this.uiHandler.createNativeFaceAuthSession(this.credentialId,this.user.displayName)},o.prototype.shouldAllowBiometricFallbackButton=function(t){if(!t)return!1;var e=t.getFallbackButtonTitle();return!!(e&&e.length>0)},o.create=function(t,e,n){return new o(t,e,n)},o}(n.PKCredentialBiometric);n.PKCredentialNativeFace=o}(e.credential||(e.credential={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){!function(n){var o=function(n){function o(t,e,o){return n.call(this,t,e,o)||this}return F(o,n),o.prototype.updateKeyPairWithAuthenticationInput=function(e,n,o){e.setBiometricPromptInfo(t.util.BiometricPromptInfoFrom.deviceBiometricInput(o),null,null)},o.prototype.authenticatorKeyTagForScheme=function(t,o){return e.authenticationdrivers.AuthenticationDriverDeviceBiometrics.authenticatorKeyTagForUserForMigratedEnrollment(this.user,t,o)||n.prototype.authenticatorKeyTagForScheme.call(this,t,o)},o.prototype.createAuthenticatorSession=function(){return this.uiHandler.createDeviceBiometricsAuthSession(this.credentialId,this.user.displayName)},o.create=function(t,e,n){return new o(t,e,n)},o}(n.PKCredentialBiometric);n.PKCredentialDeviceBiometrics=o}(e.credential||(e.credential={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){!function(t){t.CredentialTypes={pin:t.PKCredentialLocalPinCode,pattern:t.PKCredentialLocalPattern,fingerprint:t.PKCredentialFingerprint,face_id:t.PKCredentialNativeFace,device_biometrics:t.PKCredentialDeviceBiometrics}}(t.credential||(t.credential={}))}(t.core||(t.core={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.prototype.getEscapeOption=function(){return this._escapeOption},t.prototype.setEscapeOption=function(t){this._escapeOption=t},t.prototype.getEscapeParameters=function(){return this._escapeParameters},t.prototype.setEscapeParameters=function(t){this._escapeParameters=t},t.__tarsusInterfaceName="ActionEscapeRequest",t}();t.ActionEscapeRequest=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getAcquisitionResponse=function(){return this._acquisitionResponse},e.prototype.setAcquisitionResponse=function(t){this._acquisitionResponse=t},e.__tarsusInterfaceName="AudioInputResponse",e}(t.InputResponseType);t.AudioInputResponse=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Internal=0]="Internal",t[t.InvalidInput=1]="InvalidInput",t[t.AuthenticatorLocked=2]="AuthenticatorLocked",t[t.AllAuthenticatorsLocked=3]="AllAuthenticatorsLocked",t[t.NoRegisteredAuthenticator=4]="NoRegisteredAuthenticator",t[t.RegisteredSecretAlreadyInHistory=5]="RegisteredSecretAlreadyInHistory",t[t.Communication=6]="Communication",t[t.UserCanceled=7]="UserCanceled",t[t.AppImplementation=8]="AppImplementation",t[t.PolicyRejection=9]="PolicyRejection",t[t.AuthenticatorInvalidated=10]="AuthenticatorInvalidated",t[t.ControlFlowExpired=11]="ControlFlowExpired",t[t.SessionRequired=12]="SessionRequired",t[t.AuthenticatorError=13]="AuthenticatorError",t[t.ApprovalWrongState=14]="ApprovalWrongState",t[t.TotpNotProvisioned=15]="TotpNotProvisioned",t[t.AuthenticatorExternalConfigError=16]="AuthenticatorExternalConfigError",t[t.InvalidDeviceBinding=17]="InvalidDeviceBinding",t[t.InvalidIdToken=18]="InvalidIdToken",t[t.DeviceNotFound=19]="DeviceNotFound",t[t.ApprovalDenied=20]="ApprovalDenied",t[t.ApprovalExpired=21]="ApprovalExpired",t[t.ApplicationGeneratedRecoverableError=22]="ApplicationGeneratedRecoverableError",t[t.UserNotFound=23]="UserNotFound"}(t.AuthenticationErrorCode||(t.AuthenticationErrorCode={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.AuthenticatorExternalConfigErrorReason=0]="AuthenticatorExternalConfigErrorReason",t[t.AuthenticatorInvalidInputErrorDescription=1]="AuthenticatorInvalidInputErrorDescription",t[t.InvalidIdTokenErrorReason=2]="InvalidIdTokenErrorReason",t[t.UserRecordDeleted=3]="UserRecordDeleted",t[t.AuthenticationErrorFailingActionType=4]="AuthenticationErrorFailingActionType"}(t.AuthenticationErrorProperty||(t.AuthenticationErrorProperty={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.AuthenticatorExternalConfigErrorReasonBiometricsNotEnrolled=0]="AuthenticatorExternalConfigErrorReasonBiometricsNotEnrolled",t[t.AuthenticatorExternalConfigErrorReasonBiometricsOsLockTemporary=1]="AuthenticatorExternalConfigErrorReasonBiometricsOsLockTemporary",t[t.AuthenticatorExternalConfigErrorReasonBiometricsOsLockPermanent=2]="AuthenticatorExternalConfigErrorReasonBiometricsOsLockPermanent",t[t.AuthenticatorInvalidInputErrorDescriptionTotpIncorrectCheckDigit=3]="AuthenticatorInvalidInputErrorDescriptionTotpIncorrectCheckDigit",t[t.InvalidIdTokenErrorReasonExpiredToken=4]="InvalidIdTokenErrorReasonExpiredToken",t[t.InvalidIdTokenErrorReasonBadToken=5]="InvalidIdTokenErrorReasonBadToken"}(t.AuthenticationErrorPropertySymbol||(t.AuthenticationErrorPropertySymbol={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.RetryAuthenticator=0]="RetryAuthenticator",t[t.ChangeAuthenticator=1]="ChangeAuthenticator",t[t.SelectAuthenticator=2]="SelectAuthenticator",t[t.Fail=3]="Fail"}(t.AuthenticationErrorRecovery||(t.AuthenticationErrorRecovery={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Register=0]="Register",t[t.Unregister=1]="Unregister",t[t.Reregister=2]="Reregister"}(t.AuthenticatorConfigurationAction||(t.AuthenticatorConfigurationAction={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Fallback=0]="Fallback",t[t.AuthMenu=1]="AuthMenu",t[t.Retry=2]="Retry",t[t.Cancel=3]="Cancel"}(t.AuthenticatorFallbackAction||(t.AuthenticatorFallbackAction={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Registered=0]="Registered",t[t.Unregistered=1]="Unregistered",t[t.LocallyInvalid=2]="LocallyInvalid"}(t.AuthenticatorRegistrationStatus||(t.AuthenticatorRegistrationStatus={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.SelectAuthenticator=0]="SelectAuthenticator",t[t.Abort=1]="Abort",t[t.Escape=2]="Escape"}(t.AuthenticatorSelectionResultType||(t.AuthenticatorSelectionResultType={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Authentication=0]="Authentication",t[t.Registration=1]="Registration"}(t.AuthenticatorSessionMode||(t.AuthenticatorSessionMode={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getAcquisitionResponse=function(){return this._acquisitionResponse},e.prototype.setAcquisitionResponse=function(t){this._acquisitionResponse=t},e.__tarsusInterfaceName="CameraInputResponse",e}(t.InputResponseType);t.CameraInputResponse=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Accounts=0]="Accounts",t[t.DeviceDetails=1]="DeviceDetails",t[t.Contacts=2]="Contacts",t[t.Owner=3]="Owner",t[t.Software=4]="Software",t[t.Location=5]="Location",t[t.LocationCountry=6]="LocationCountry",t[t.Bluetooth=7]="Bluetooth",t[t.ExternalSDKDetails=8]="ExternalSDKDetails",t[t.HWAuthenticators=9]="HWAuthenticators",t[t.Capabilities=10]="Capabilities",t[t.FidoAuthenticators=11]="FidoAuthenticators",t[t.LargeData=12]="LargeData",t[t.LocalEnrollments=13]="LocalEnrollments"}(t.CollectorType||(t.CollectorType={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.None=0]="None",t[t.Credentials=1]="Credentials",t[t.Full=2]="Full"}(t.ConnectionCryptoMode||(t.ConnectionCryptoMode={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.CancelAuthenticator=0]="CancelAuthenticator",t[t.RetryAuthenticator=1]="RetryAuthenticator",t[t.ChangeMethod=2]="ChangeMethod",t[t.SelectMethod=3]="SelectMethod",t[t.AbortAuthentication=4]="AbortAuthentication"}(t.ControlRequestType||(t.ControlRequestType={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Remove=0]="Remove",t[t.Rename=1]="Rename"}(t.DeviceManagementAction||(t.DeviceManagementAction={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.RecentlyUsed=0]="RecentlyUsed",t[t.NoRecentActivity=1]="NoRecentActivity",t[t.LongInactivity=2]="LongInactivity",t[t.Disabled=3]="Disabled",t[t.Removed=4]="Removed"}(t.DeviceStatus||(t.DeviceStatus={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getFailureError=function(){return this._failureError},e.prototype.setFailureError=function(t){this._failureError=t},e.__tarsusInterfaceName="Fido2AuthenticationFailedResponse",e}(t.Fido2InputResponse);t.Fido2AuthenticationFailedResponse=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getFido2Response=function(){return this._fido2Response},e.prototype.setFido2Response=function(t){this._fido2Response=t},e.__tarsusInterfaceName="Fido2AuthenticatorSuccessResponse",e}(t.Fido2InputResponse);t.Fido2AuthenticatorSuccessResponse=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getFailureError=function(){return this._failureError},e.prototype.setFailureError=function(t){this._failureError=t},e.prototype.getExpired=function(){return this._expired},e.prototype.setExpired=function(t){this._expired=t},e.prototype.getRegistered=function(){return this._registered},e.prototype.setRegistered=function(t){this._registered=t},e.prototype.getRegistrationStatus=function(){return this._registrationStatus},e.prototype.setRegistrationStatus=function(t){this._registrationStatus=t},e.prototype.getLocked=function(){return this._locked},e.prototype.setLocked=function(t){this._locked=t},e.__tarsusInterfaceName="FidoAuthFailureResponse",e}(t.FidoInputResponse);t.FidoAuthFailureResponse=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getFidoResponse=function(){return this._fidoResponse},e.prototype.setFidoResponse=function(t){this._fidoResponse=t},e.__tarsusInterfaceName="FidoAuthSuccessResponse",e}(t.FidoInputResponse);t.FidoAuthSuccessResponse=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Submit=0]="Submit",t[t.Abort=1]="Abort",t[t.Escape=2]="Escape"}(t.FormControlRequest||(t.FormControlRequest={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Disable=0]="Disable",t[t.RecoverDeviceAndBindingOnAuthenticate=1]="RecoverDeviceAndBindingOnAuthenticate"}(t.InvalidUserRecordRecoveryMode||(t.InvalidUserRecordRecoveryMode={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Off=0]="Off",t[t.Critical=1]="Critical",t[t.Error=2]="Error",t[t.Warning=3]="Warning",t[t.Info=4]="Info",t[t.Debug=5]="Debug"}(t.LogLevel||(t.LogLevel={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Approve=0]="Approve",t[t.Deny=1]="Deny"}(t.MobileApprovalAction||(t.MobileApprovalAction={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Pending=0]="Pending",t[t.Approved=1]="Approved",t[t.Denied=2]="Denied",t[t.Expired=3]="Expired"}(t.MobileApprovalStatus||(t.MobileApprovalStatus={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Unknown=0]="Unknown",t[t.Sms=1]="Sms",t[t.Email=2]="Email",t[t.PushNotification=3]="PushNotification",t[t.VoiceCall=4]="VoiceCall"}(t.OtpChannel||(t.OtpChannel={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getFailureError=function(){return this._failureError},e.prototype.setFailureError=function(t){this._failureError=t},e.prototype.getExpired=function(){return this._expired},e.prototype.setExpired=function(t){this._expired=t},e.prototype.getRegistered=function(){return this._registered},e.prototype.setRegistered=function(t){this._registered=t},e.prototype.getRegistrationStatus=function(){return this._registrationStatus},e.prototype.setRegistrationStatus=function(t){this._registrationStatus=t},e.prototype.getLocked=function(){return this._locked},e.prototype.setLocked=function(t){this._locked=t},e.__tarsusInterfaceName="PlaceholderAuthFailureResponse",e}(t.PlaceholderInputResponse);t.PlaceholderAuthFailureResponse=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getFailureError=function(){return this._failureError},e.prototype.setFailureError=function(t){this._failureError=t},e.__tarsusInterfaceName="PlaceholderAuthFailureWithServerProvidedStatusResponse",e}(t.PlaceholderInputResponse);t.PlaceholderAuthFailureWithServerProvidedStatusResponse=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getPlaceholderToken=function(){return this._placeholderToken},e.prototype.setPlaceholderToken=function(t){this._placeholderToken=t},e.__tarsusInterfaceName="PlaceholderAuthSuccessResponse",e}(t.PlaceholderInputResponse);t.PlaceholderAuthSuccessResponse=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Skip=0]="Skip",t[t.Abort=1]="Abort",t[t.Continue=2]="Continue"}(t.PromotionControlRequest||(t.PromotionControlRequest={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Numeric=0]="Numeric",t[t.Alphanumeric=1]="Alphanumeric",t[t.Binary=2]="Binary"}(t.QrCodeFormat||(t.QrCodeFormat={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.RedirectToPolicy=0]="RedirectToPolicy",t[t.CancelRedirect=1]="CancelRedirect"}(t.RedirectResponseType||(t.RedirectResponseType={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getAnswers=function(){return this._answers},e.__tarsusInterfaceName="SecurityQuestionAnswersInputResponse",e}(t.SecurityQuestionInputResponse);t.SecurityQuestionAnswersInputResponse=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.__tarsusInterfaceName="SuspensionContext",t}();t.SuspensionContext=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.prototype.getValue=function(){return this._value},t.prototype.setValue=function(t){this._value=t},t.prototype.getFormat=function(){return this._format},t.prototype.setFormat=function(t){this._format=t},t.__tarsusInterfaceName="TotpChallenge",t}();t.TotpChallenge=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.prototype.getName=function(){return this._name},t.prototype.setName=function(t){this._name=t},t.prototype.getValue=function(){return this._value},t.prototype.setValue=function(t){this._value=t},t.__tarsusInterfaceName="TransportHeader",t}();t.TransportHeader=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.prototype.getStatus=function(){return this._status},t.prototype.setStatus=function(t){this._status=t},t.prototype.getMethod=function(){return this._method},t.prototype.setMethod=function(t){this._method=t},t.prototype.getHeaders=function(){return this._headers},t.prototype.setHeaders=function(t){this._headers=t},t.prototype.getBodyJson=function(){return this._bodyJson},t.prototype.setBodyJson=function(t){this._bodyJson=t},t.__tarsusInterfaceName="TransportResponse",t}();t.TransportResponse=e}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Disable=0]="Disable",t[t.DownloadOnInit=1]="DownloadOnInit"}(t.UIAssetsDownloadMode||(t.UIAssetsDownloadMode={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.UserId=0]="UserId",t[t.IdToken=1]="IdToken"}(t.UserHandleType||(t.UserHandleType={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Fido2UserVerifyingPlatformAuthenticatorAvailable=0]="Fido2UserVerifyingPlatformAuthenticatorAvailable"}(t.AsyncHostInformationKey||(t.AsyncHostInformationKey={}))}(t.sdkhost||(t.sdkhost={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){}return t.prototype.getLocalizedTitle=function(){return this._localizedTitle},t.prototype.setLocalizedTitle=function(t){this._localizedTitle=t},t.prototype.getLocalizedSubtitle=function(){return this._localizedSubtitle},t.prototype.setLocalizedSubtitle=function(t){this._localizedSubtitle=t},t.prototype.getLocalizedPrompt=function(){return this._localizedPrompt},t.prototype.setLocalizedPrompt=function(t){this._localizedPrompt=t},t.prototype.getFallbackButtonTitle=function(){return this._fallbackButtonTitle},t.prototype.setFallbackButtonTitle=function(t){this._fallbackButtonTitle=t},t.prototype.getCancelButtonTitle=function(){return this._cancelButtonTitle},t.prototype.setCancelButtonTitle=function(t){this._cancelButtonTitle=t},t.__tarsusInterfaceName="BiometricPromptInfo",t}();t.BiometricPromptInfo=e}(t.sdkhost||(t.sdkhost={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Create=0]="Create",t[t.Get=1]="Get"}(t.Fido2CredentialsOpType||(t.Fido2CredentialsOpType={}))}(t.sdkhost||(t.sdkhost={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Version=0]="Version",t[t.Platform=1]="Platform",t[t.FingerprintSupported=2]="FingerprintSupported",t[t.HostProvidedFeatures=3]="HostProvidedFeatures",t[t.FaceIdKeyBioProtectionSupported=4]="FaceIdKeyBioProtectionSupported",t[t.ImageAcquitisionSupported=5]="ImageAcquitisionSupported",t[t.AudioAcquitisionSupported=6]="AudioAcquitisionSupported",t[t.PersistentKeysSupported=7]="PersistentKeysSupported",t[t.FidoClientPresent=8]="FidoClientPresent",t[t.DyadicPresent=9]="DyadicPresent",t[t.StdSigningKeyIsHardwareProtectedSignAndEncryptKey=10]="StdSigningKeyIsHardwareProtectedSignAndEncryptKey",t[t.Fido2ClientPresent=11]="Fido2ClientPresent",t[t.DeviceBiometricsSupported=12]="DeviceBiometricsSupported",t[t.DeviceBiometricsFPContinuation=13]="DeviceBiometricsFPContinuation",t[t.DeviceBiometricsUsesSign=14]="DeviceBiometricsUsesSign",t[t.DevicePersistenceMode=15]="DevicePersistenceMode",t[t.Fido2RelyingParty=16]="Fido2RelyingParty"}(t.HostInformationKey||(t.HostInformationKey={}))}(t.sdkhost||(t.sdkhost={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.None=0]="None",t[t.NormalProtection=1]="NormalProtection",t[t.BindToEnrollmentDb=2]="BindToEnrollmentDb"}(t.KeyBiometricProtectionMode||(t.KeyBiometricProtectionMode={}))}(t.sdkhost||(t.sdkhost={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.StdSigningKey=0]="StdSigningKey",t[t.StdEncryptionKey=1]="StdEncryptionKey",t[t.GeneralPurposeAES=2]="GeneralPurposeAES",t[t.NoIntegrityAES=3]="NoIntegrityAES",t[t.FidoECCSigningKey=4]="FidoECCSigningKey",t[t.HardwareProtectedSignAndEncryptKey=5]="HardwareProtectedSignAndEncryptKey"}(t.KeyClass||(t.KeyClass={}))}(t.sdkhost||(t.sdkhost={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getResultPayload=function(){return this._resultPayload},e.create=function(e){return t.ts.mobile.tarsusplugin.impl.IdpInvocationResultImpl.create(e)},e.__tarsusInterfaceName="IdpInvocationResult",e}();e.IdpInvocationResult=n}(e.tarsusplugin||(e.tarsusplugin={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(n){var o=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return F(n,e),n.prototype.getPayload=function(){return this._payload},n.create=function(e){return t.ts.mobile.tarsusplugin.impl.KycDataCollectionResultImpl.create(e)},n.__tarsusInterfaceName="KycDataCollectionResult",n}(e.sdk.InputResponseType);n.KycDataCollectionResult=o}(e.tarsusplugin||(e.tarsusplugin={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getPluginName=function(){return this._pluginName},e.prototype.setPluginName=function(t){this._pluginName=t},e.prototype.getVersionMajor=function(){return this._versionMajor},e.prototype.setVersionMajor=function(t){this._versionMajor=t},e.prototype.getVersionMinor=function(){return this._versionMinor},e.prototype.setVersionMinor=function(t){this._versionMinor=t},e.prototype.getVersionPatch=function(){return this._versionPatch},e.prototype.setVersionPatch=function(t){this._versionPatch=t},e.prototype.getRequiredPluginApiLevel=function(){return this._requiredPluginApiLevel},e.prototype.setRequiredPluginApiLevel=function(t){this._requiredPluginApiLevel=t},e.create=function(){return t.ts.mobile.tarsusplugin.impl.PluginInfoImpl.create()},e.__tarsusInterfaceName="PluginInfo",e}();e.PluginInfo=n}(e.tarsusplugin||(e.tarsusplugin={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getCode=function(){return this._code},e.prototype.getTimeStepSeconds=function(){return this._timeStepSeconds},e.prototype.getExpiresInSeconds=function(){return this._expiresInSeconds},e.prototype.getSecondsTillNextInvocation=function(){return this._secondsTillNextInvocation},e.prototype.getShouldUpdateSpecificProperties=function(){return this._shouldUpdateSpecificProperties},e.prototype.getGeneratorSpecificDataToStore=function(){return this._generatorSpecificDataToStore},e.prototype.getMessage=function(){return this._message},e.create=function(e,n,o,r,i,s,a){return t.ts.mobile.tarsusplugin.impl.TotpCodeGenerationOutputImpl.create(e,n,o,r,i,s,a)},e.__tarsusInterfaceName="TotpCodeGenerationOutput",e}();e.TotpCodeGenerationOutput=n}(e.tarsusplugin||(e.tarsusplugin={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getEscapeRequest=function(){return this._escapeRequest},e.prototype.setEscapeRequest=function(t){this._escapeRequest=t},e.__tarsusInterfaceName="TotpProvisionEscapeRequest",e}(t.TotpProvisionResult);t.TotpProvisionEscapeRequest=e}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){}return e.prototype.getUnprotectedProvisionOutput=function(){return this._unprotectedProvisionOutput},e.prototype.getSecretToLock=function(){return this._secretToLock},e.create=function(e,n){return t.ts.mobile.tarsusplugin.impl.VaultBasedTotpProvisionOutputImpl.create(e,n)},e.__tarsusInterfaceName="VaultBasedTotpProvisionOutput",e}();e.VaultBasedTotpProvisionOutput=n}(e.tarsusplugin||(e.tarsusplugin={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getResultPayload=function(){return this._resultPayload},e.create=function(t){var n=new e;return n._resultPayload=t,n},e.__tarsusInterfaceName="IdpInvocationResult",e}(t.IdpInvocationResult);e.IdpInvocationResultImpl=n}(t.impl||(t.impl={}))}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.getPayload=function(){return this._payload},e.create=function(t){var n=new e;return n._payload=t,n},e.__tarsusInterfaceName="KycDataCollectionResult",e}(t.KycDataCollectionResult);e.KycDataCollectionResultImpl=n}(t.impl||(t.impl={}))}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(e){!function(e){!function(e){!function(n){var o=function(e){function n(){var t=e.call(this)||this;return t._versionMajor=0,t._versionMinor=0,t._versionPatch=0,t}return F(n,e),n.create=function(){return new t.ts.mobile.tarsusplugin.impl.PluginInfoImpl},n.versionToString=function(t){return t.getVersionMajor()+"."+t.getVersionMinor()+"."+t.getVersionPatch()},n.toString=function(t){return t.getPluginName()+" v"+this.versionToString(t)},n}(e.PluginInfo);n.PluginInfoImpl=o}(e.impl||(e.impl={}))}(e.tarsusplugin||(e.tarsusplugin={}))}(e.mobile||(e.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.create=function(t,n,o,r,i,s,a){var u=new e;return u._code=t,n&&(u._message=n),u._timeStepSeconds=o,u._expiresInSeconds=r,u._secondsTillNextInvocation=i,u._shouldUpdateSpecificProperties=s,a&&(u._generatorSpecificDataToStore=a),u},e}(t.TotpCodeGenerationOutput);e.TotpCodeGenerationOutputImpl=n}(t.impl||(t.impl={}))}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(e){var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.create=function(t,n){var o=new e;return o._secretToLock=t,o._unprotectedProvisionOutput=n,o},e}(t.VaultBasedTotpProvisionOutput);e.VaultBasedTotpProvisionOutputImpl=n}(t.impl||(t.impl={}))}(t.tarsusplugin||(t.tarsusplugin={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={})),function(t){!function(t){!function(t){!function(t){!function(t){function e(t){return!!t.tlvSerializable}function n(n,o){var r=[];return Object.keys(o).forEach((function(i){var s=n[i];if(!s)throw"TLV encoding error: Unknown tag "+i;var a=o[i];a instanceof Array||(a=[a]),a.forEach((function(o){var a=o.__type||s.tagType||e(o)&&t.TlvTypes.Serializable;if(!a)throw"Unknown type for tag "+i;o.__type&&(o=o.__value);var u=a(o,n);r.push(t.TlvTypes.UInt16(s.id)),r.push(t.TlvTypes.UInt16(u.length/2)),r.push(u)}))})),r.join("")}t.instanceOfTlvSerializable=e,t.TlvTypes={UInt8:function(e){return t.numberToHex(e,8)},UInt16:function(e){return t.numberToHex(e>>8&255|(255&e)<<8,16)},UInt32:function(e){return t.numberToHex((255&e)<<24|(e>>8&255)<<16|(e>>16&255)<<8|e>>24&255,32)},Object:function(t,e){return n(e,t)},Serializable:function(t,e){return t.tlvSerialize(e)},String:function(e,n){return t.asciiToHex(e)},HexBinary:function(t,e){return t},Struct:function(t){return function(e,n){var o=[];return Object.keys(t).forEach((function(r){r in e&&o.push((0,t[r])(e[r],n))})),o.join("")}}},t.tlvEncodeHex=n}(t.util||(t.util={}))}(t.sdk||(t.sdk={}))}(t.mobile||(t.mobile={}))}(t.ts||(t.ts={}))}(O||(O={}));var U=com.ts.mobile.sdk.createSdk(),B=new T;U.setTarsusHost(B),U.setTransportProvider(new i(B)),U.setEnabledCollectors([com.ts.mobile.sdk.CollectorType.DeviceDetails,com.ts.mobile.sdk.CollectorType.LargeData]),U.setLogLevel(com.ts.mobile.sdk.LogLevel.Error),window.xmui&&U.setUiHandler(new window.xmui.XmUIHandler),t.XmSdk=function(){return U},Object.defineProperty(t,"__esModule",{value:!0})}));