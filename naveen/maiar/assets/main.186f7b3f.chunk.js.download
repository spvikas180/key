(this["webpackJsonpmaiar-exchange"]=this["webpackJsonpmaiar-exchange"]||[]).push([[0],{112:function(e,t,n){"use strict";t.a={pending:"Pending",notExecuted:"Not Executed",success:"Success",fail:"Failed"}},1130:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"useToleranceOptions",(function(){return qe})),n.d(a,"getUniqueTokens",(function(){return Me})),n.d(a,"getActivePair",(function(){return Be})),n.d(a,"getPairAddress",(function(){return Ue})),n.d(a,"getTokenDecimals",(function(){return $e})),n.d(a,"getSelectedValue",(function(){return _e})),n.d(a,"getTokenIdFromOption",(function(){return Ve})),n.d(a,"showMax",(function(){return We})),n.d(a,"balanceMinusDust",(function(){return ze})),n.d(a,"denominateAmount",(function(){return He})),n.d(a,"amountWithoutRounding",(function(){return Ye})),n.d(a,"getPairRate",(function(){return Ge})),n.d(a,"getFarmRate",(function(){return Ze})),n.d(a,"getStakingFarmRate",(function(){return Ke})),n.d(a,"getFarmRates",(function(){return Xe})),n.d(a,"unformatAmount",(function(){return Qe})),n.d(a,"getPriceDiscoveryContractRate",(function(){return Je})),n.d(a,"getTokenUSDPrice",(function(){return et}));var i={};n.r(i),n.d(i,"setItem",(function(){return Gt})),n.d(i,"setAccountItem",(function(){return Zt})),n.d(i,"removeAccountItem",(function(){return Kt})),n.d(i,"getItem",(function(){return Xt})),n.d(i,"getAccountItem",(function(){return Qt})),n.d(i,"removeItem",(function(){return Jt})),n.d(i,"clear",(function(){return en})),n.d(i,"clearWithExceptions",(function(){return tn}));var r={};n.r(r),n.d(r,"setItem",(function(){return nn})),n.d(r,"getItem",(function(){return an})),n.d(r,"removeItem",(function(){return rn})),n.d(r,"clear",(function(){return sn}));var s,c=n(1),o=n.n(c),l=n(1149),d=n(51),u=n.n(d),m=(n(691),n(2)),b=n(41),j=n(9),f=n(7),h=n.n(f),p=n(8),x=n(614),v=n(619),O=n(17),k=n(111),g=n(5),y=n(42),w=n(21),T=n(3),N=n(31),S=n(239),A=n(318),F=n(12),P=n(665),D=["title","titleId"];function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},R.apply(this,arguments)}function E(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function L(e,t){var n=e.title,a=e.titleId,i=E(e,D);return c.createElement("svg",R({viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?c.createElement("title",{id:a},n):null,s||(s=c.createElement("g",{fillRule:"evenodd"},c.createElement("g",{transform:"translate(0 -1)",fillRule:"nonzero"},c.createElement("g",{transform:"translate(0 1)",id:"egld-token"},c.createElement("path",{d:"m79.6 19.424c-0.4-0.4383-0.6-0.8766-0.6-1.4245 0-0.54787 0.2-0.98617 0.6-1.4245 0.8-0.76702 2-0.76702 2.8 0 0.4 0.4383 0.6 0.8766 0.6 1.4245 0 0.54787-0.2 0.98617-0.6 1.4245-0.4 0.32872-0.9 0.54787-1.4 0.54787-0.5 0.10957-1-0.10957-1.4-0.54787"}),c.createElement("path",{id:"Path",d:"m74.556 24.448c-0.33333-0.44138-0.55556-0.88276-0.55556-1.4345s0.22222-0.9931 0.55556-1.4345c0.77778-0.77241 2.1111-0.77241 2.8889 0 0.33333 0.44138 0.55556 0.88276 0.55556 1.4345s-0.22222 0.9931-0.55556 1.4345c-0.44444 0.33103-0.88889 0.55172-1.4444 0.55172s-1-0.22069-1.4444-0.55172"}),c.createElement("path",{id:"Path",d:"m69.556 30.448c-0.33333-0.33103-0.55556-0.88276-0.55556-1.4345s0.22222-0.9931 0.55556-1.4345c0.77778-0.77241 2.1111-0.77241 2.8889 0 0.33333 0.33103 0.55556 0.88276 0.55556 1.4345s-0.22222 0.9931-0.55556 1.4345c-0.44444 0.44138-0.88889 0.55172-1.4444 0.55172s-1.1111-0.22069-1.4444-0.55172"}),c.createElement("path",{id:"Path",d:"m64.6 35.448c-0.4-0.33103-0.6-0.88276-0.6-1.4345s0.2-0.9931 0.6-1.4345c0.8-0.77241 2-0.77241 2.8 0 0.4 0.33103 0.6 0.88276 0.6 1.4345s-0.2 1.1034-0.6 1.4345c-0.4 0.44138-0.9 0.55172-1.4 0.55172s-1-0.11034-1.4-0.55172"}),c.createElement("path",{id:"Path",d:"m59.556 40.424c-0.44444-0.32872-0.55556-0.8766-0.55556-1.4245 0-0.54787 0.22222-0.98617 0.55556-1.4245 0.77778-0.76702 2.1111-0.76702 2.8889 0 0.44444 0.32872 0.55556 0.8766 0.55556 1.4245 0 0.54787-0.22222 1.0957-0.55556 1.4245-0.33333 0.4383-0.88889 0.54787-1.4444 0.54787-0.55556 0.10957-1.1111-0.10957-1.4444-0.54787"}),c.createElement("path",{id:"Path",d:"m53 44.014c0-0.55172 0.22222-0.9931 0.55556-1.4345 0.77778-0.77241 2.1111-0.77241 2.8889 0 0.44444 0.44138 0.55556 0.88276 0.55556 1.4345s-0.22222 0.9931-0.55556 1.4345c-0.33333 0.33103-0.88889 0.55172-1.4444 0.55172s-1-0.22069-1.4444-0.55172c-0.33333-0.33103-0.55556-0.88276-0.55556-1.4345z"}),c.createElement("path",{id:"Path",d:"m43.556 56.424c-0.33333-0.32872-0.55556-0.8766-0.55556-1.4245 0-0.54787 0.22222-0.98617 0.55556-1.4245 0.77778-0.76702 2.1111-0.76702 2.8889 0 0.44444 0.4383 0.55556 0.8766 0.55556 1.4245 0 0.54787-0.22222 0.98617-0.55556 1.4245-0.33333 0.4383-0.88889 0.54787-1.4444 0.54787-0.55556 0.10957-1-0.10957-1.4444-0.54787"}),c.createElement("path",{id:"Path",d:"m38.6 61.424c-0.4-0.32872-0.6-0.8766-0.6-1.4245 0-0.54787 0.2-0.98617 0.6-1.4245 0.8-0.76702 2-0.76702 2.8 0 0.4 0.4383 0.6 0.8766 0.6 1.4245 0 0.54787-0.2 0.98617-0.6 1.4245-0.4 0.4383-0.9 0.54787-1.4 0.54787-0.5 0.10957-1-0.10957-1.4-0.54787"}),c.createElement("path",{id:"Path",d:"m33.556 66.448c-0.33333-0.33103-0.55556-0.88276-0.55556-1.4345s0.22222-1.1034 0.55556-1.4345c0.77778-0.77241 2.1111-0.77241 2.8889 0 0.33333 0.33103 0.55556 0.88276 0.55556 1.4345s-0.22222 0.9931-0.55556 1.4345c-0.44444 0.44138-0.88889 0.55172-1.4444 0.55172s-1-0.22069-1.4444-0.55172"}),c.createElement("path",{id:"Path",d:"m27.556 71.448c-0.44444-0.33103-0.55556-0.88276-0.55556-1.4345s0.22222-0.9931 0.55556-1.4345c0.77778-0.77241 2.1111-0.77241 2.8889 0 0.33333 0.44138 0.55556 0.88276 0.55556 1.4345s-0.22222 1.1034-0.55556 1.4345c-0.44444 0.44138-0.88889 0.55172-1.4444 0.55172s-1.1111-0.11034-1.4444-0.55172"}),c.createElement("path",{id:"Path",d:"m22.615 76.448c-0.41026-0.33103-0.61538-0.88276-0.61538-1.4345s0.20513-0.9931 0.61538-1.4345c0.82051-0.77241 2.0513-0.77241 2.7692 0 0.41026 0.44138 0.61538 0.88276 0.61538 1.4345s-0.20513 1.1034-0.61538 1.4345c-0.41026 0.33103-0.92308 0.55172-1.4359 0.55172-0.51282 0-1.0256-0.11034-1.3333-0.55172"}),c.createElement("path",{id:"Path",d:"m17.556 82.424c-0.44444-0.4383-0.55556-0.8766-0.55556-1.4245 0-0.54787 0.22222-0.98617 0.55556-1.4245 0.77778-0.76702 2.1111-0.76702 2.8889 0 0.44444 0.4383 0.55556 0.8766 0.55556 1.4245 0 0.54787-0.22222 0.98617-0.55556 1.4245-0.33333 0.32872-0.88889 0.54787-1.4444 0.54787-0.44444 0.10957-1-0.10957-1.4444-0.54787"}),c.createElement("path",{id:"Path",d:"m20.444 19.424c0.33333-0.4383 0.55556-0.8766 0.55556-1.4245 0-0.54787-0.22222-0.98617-0.55556-1.4245-0.77778-0.76702-2.1111-0.76702-2.8889 0-0.44444 0.4383-0.55556 0.8766-0.55556 1.4245 0 0.54787 0.22222 0.98617 0.55556 1.4245 0.33333 0.32872 0.88889 0.54787 1.4444 0.54787 0.55556 0.10957 1.1111-0.10957 1.4444-0.54787"}),c.createElement("path",{id:"Path",d:"m25.4 24.448c0.4-0.44138 0.6-0.88276 0.6-1.4345s-0.2-0.9931-0.6-1.4345c-0.8-0.77241-2-0.77241-2.8 0-0.4 0.44138-0.6 0.88276-0.6 1.4345s0.2 0.9931 0.6 1.4345c0.4 0.33103 0.9 0.55172 1.4 0.55172s1-0.22069 1.4-0.55172"}),c.createElement("path",{id:"Path",d:"m30.444 30.448c0.33333-0.33103 0.55556-0.88276 0.55556-1.4345s-0.22222-0.9931-0.55556-1.4345c-0.77778-0.77241-2.1111-0.77241-2.8889 0-0.33333 0.33103-0.55556 0.88276-0.55556 1.4345s0.22222 0.9931 0.55556 1.4345c0.44444 0.44138 0.88889 0.55172 1.4444 0.55172 0.44444 0 1-0.22069 1.4444-0.55172"}),c.createElement("path",{id:"Path",d:"m36.444 35.448c0.33333-0.33103 0.55556-0.88276 0.55556-1.4345s-0.22222-0.9931-0.55556-1.4345c-0.77778-0.77241-2.1111-0.77241-2.8889 0-0.33333 0.33103-0.55556 0.88276-0.55556 1.4345s0.22222 1.1034 0.55556 1.4345c0.44444 0.44138 0.88889 0.55172 1.4444 0.55172 0.44444 0 1-0.11034 1.4444-0.55172"}),c.createElement("path",{id:"Path",d:"m41.385 40.424c0.41026-0.32872 0.61538-0.8766 0.61538-1.4245 0-0.54787-0.20513-0.98617-0.61538-1.4245-0.71795-0.76702-2.0513-0.76702-2.7692 0-0.41026 0.32872-0.61538 0.8766-0.61538 1.4245 0 0.54787 0.20513 1.0957 0.61538 1.4245 0.41026 0.4383 0.92308 0.54787 1.4359 0.54787 0.51282 0.10957 1.0256-0.10957 1.3333-0.54787"}),c.createElement("path",{id:"Path",d:"m47 44.014c0-0.55172-0.22222-0.9931-0.55556-1.4345-0.77778-0.77241-2.1111-0.77241-2.8889 0-0.44444 0.44138-0.55556 0.88276-0.55556 1.4345s0.22222 0.9931 0.55556 1.4345c0.33333 0.33103 0.88889 0.55172 1.4444 0.55172s1-0.22069 1.4444-0.55172c0.44444-0.33103 0.55556-0.88276 0.55556-1.4345z"}),c.createElement("path",{id:"Path",d:"m51.444 51.448c0.44444-0.44138 0.55556-0.88276 0.55556-1.4345s-0.22222-0.9931-0.55556-1.4345c-0.77778-0.77241-2.1111-0.77241-2.8889 0-0.44444 0.44138-0.55556 0.88276-0.55556 1.4345s0.22222 0.9931 0.55556 1.4345c0.33333 0.33103 0.88889 0.55172 1.4444 0.55172s1.1111-0.22069 1.4444-0.55172"}),c.createElement("path",{id:"Path",d:"m56.385 56.424c0.41026-0.32872 0.61538-0.8766 0.61538-1.4245 0-0.54787-0.20513-0.98617-0.61538-1.4245-0.82051-0.76702-2.0513-0.76702-2.7692 0-0.41026 0.4383-0.61538 0.8766-0.61538 1.4245 0 0.54787 0.20513 0.98617 0.61538 1.4245 0.41026 0.4383 0.92308 0.54787 1.4359 0.54787 0.41026 0.10957 0.92308-0.10957 1.3333-0.54787"}),c.createElement("path",{id:"Path",d:"m62.444 61.424c0.33333-0.32872 0.55556-0.8766 0.55556-1.4245 0-0.54787-0.22222-0.98617-0.55556-1.4245-0.77778-0.76702-2.1111-0.76702-2.8889 0-0.33333 0.4383-0.55556 0.8766-0.55556 1.4245 0 0.54787 0.22222 0.98617 0.55556 1.4245 0.44444 0.4383 0.88889 0.54787 1.4444 0.54787 0.44444 0.10957 1-0.10957 1.4444-0.54787"}),c.createElement("path",{id:"Path",d:"m67.444 66.448c0.33333-0.33103 0.55556-0.88276 0.55556-1.4345s-0.22222-1.1034-0.55556-1.4345c-0.77778-0.77241-2.1111-0.77241-2.8889 0-0.33333 0.33103-0.55556 0.88276-0.55556 1.4345s0.22222 0.9931 0.55556 1.4345c0.44444 0.44138 0.88889 0.55172 1.4444 0.55172s1-0.22069 1.4444-0.55172"}),c.createElement("path",{id:"Path",d:"m72.444 71.448c0.44444-0.33103 0.55556-0.88276 0.55556-1.4345s-0.22222-0.9931-0.55556-1.4345c-0.77778-0.77241-2.1111-0.77241-2.8889 0-0.33333 0.44138-0.55556 0.88276-0.55556 1.4345s0.22222 1.1034 0.55556 1.4345c0.44444 0.44138 0.88889 0.55172 1.4444 0.55172s1.1111-0.11034 1.4444-0.55172"}),c.createElement("path",{id:"a",d:"m77.444 76.448c0.44444-0.33103 0.55556-0.88276 0.55556-1.4345s-0.22222-0.9931-0.55556-1.4345c-0.77778-0.77241-2.1111-0.77241-2.8889 0-0.44444 0.44138-0.55556 0.88276-0.55556 1.4345s0.22222 1.1034 0.55556 1.4345c0.33333 0.33103 0.88889 0.55172 1.4444 0.55172s1.1111-0.11034 1.4444-0.55172"}),c.createElement("path",{d:"m82.385 82.424c0.41026-0.4383 0.61538-0.8766 0.61538-1.4245 0-0.54787-0.20513-0.98617-0.61538-1.4245-0.82051-0.76702-2.0513-0.76702-2.7692 0-0.41026 0.4383-0.61538 0.8766-0.61538 1.4245 0 0.54787 0.20513 0.98617 0.61538 1.4245 0.41026 0.32872 0.92308 0.54787 1.4359 0.54787 0.41026 0.10957 0.92308-0.10957 1.3333-0.54787"}),c.createElement("path",{d:"m33.036 21c5.2647-3.4327 11.036-5.0481 17.414-5.149 6.2771 0 12.048 1.7163 17.414 5.149l11.137-11.106c-8.7069-6.5625-18.123-9.8942-28.551-9.8942-10.428 0-19.945 3.3317-28.449 9.8942l11.036 11.106z"}),c.createElement("path",{d:"m21 66.742c-3.5854-5.3754-5.3268-11.157-5.3268-17.343 0-6.2883 1.7415-12.069 5.3268-17.343l-11.166-11.055c-6.5561 8.5196-9.8341 17.952-9.8341 28.5 0 10.345 3.278 19.879 9.9366 28.5l11.063-11.258z"}),c.createElement("path",{d:"m67.964 78c-5.2647 3.5333-11.036 5.3504-17.313 5.4513-6.3783 0-12.25-1.7162-17.515-5.3504l-11.137 11.004c8.6057 6.6628 18.123 9.9941 28.652 9.8932 10.428-0.10095 19.844-3.4323 28.348-9.8932l-11.036-11.105z"}),c.createElement("path",{d:"m79 32.258c3.5333 5.3754 5.3504 11.258 5.2494 17.648-0.10095 6.1868-1.8171 11.867-5.2494 17.039l11.105 11.055c6.5618-8.5196 9.8932-17.952 9.8932-28.297 0.10095-10.548-3.2304-20.082-9.8932-28.703l-11.105 11.258z"}),c.createElement("path",{d:"m90 81c4.3636 0 8 3.5325 8 8 0 4.3636-3.5325 8-8 8-4.3636 0-8-3.5325-8-8s3.5325-8 8-8"}),c.createElement("path",{d:"m10 81c4.4211 0 8 3.5325 8 8 0 4.3636-3.5789 8-8 8-4.4211 0-8-3.5325-8-8s3.5789-8 8-8"}),c.createElement("path",{d:"m90 1c4.4211 0 8 3.5325 8 8 0 4.4675-3.5789 8-8 8s-8-3.5325-8-8c0-4.4675 3.5789-8 8-8"}),c.createElement("path",{d:"m10 1c4.3636 0 8 3.5789 8 8 0 4.4211-3.5325 8-8 8-4.3636 0-8-3.5789-8-8 0-4.4211 3.5325-8 8-8"}))))))}var C=c.forwardRef(L),I=(n.p,O.c.mainnet),q="10000000000000000",M=18,B=1e4,U="EGLD",$="WEGLD-bd4d79",_="MEX-455c57",V="LKMEX-aab910",W="LKESDT-2e1d77",z=[],H=.05,Y=1e13,G=500,Z="50000000000000000000000",K=15,X=120,Q="https://id.maiar.com/api/v1",J="https://extras-api.elrond.com",ee="https://tools.elrond.com/metabonding",te={id:"mainnet",name:"Mainnet",egldLabel:"EGLD",walletAddress:"https://wallet.elrond.com",apiAddress:"https://internal-api.elrond.com",explorerAddress:"https://explorer.elrond.com",graphQlAddress:"https://graph.maiar.exchange/graphql"},ne=["erd1wh9c0sjr2xn8hzf02lwwcr4jk2s84tat9ud2kaq6zr7xzpvl9l5q8awmex","erd1cevsw7mq5uvqymjqzwqvpqtdrhckehwfz99n7praty3y7q2j7yps842mqh","erd1dwgsshz6kwszm6hyl70dnmg6ufdkwyqn497z6m6htvmpg3cexddqpttafx","erd1h3h2pd0n4qpz0s523cddxv32x6dm0vm4fzgutgd7crvr9gytfgssxd6jtq"],ae="erd1qqqqqqqqqqqqqpgqa0fsfshnff4n76jhcye6k7uvd7qacsq42jpsp6shh2",ie="erd1qqqqqqqqqqqqqpgqav09xenkuqsdyeyy5evqyhuusvu4gl3t2jpss57g8x",re={unlockedRewardsFarmAddress:"erd1qqqqqqqqqqqqqpgqe9v45fnpkv053fj0tk7wvnkred9pms892jps9lkqrn",lockedRewardsFarmAddress:"erd1qqqqqqqqqqqqqpgq7qhsw8kffad85jtt79t9ym0a4ycvan9a2jps0zkpen"},se=[re],ce=["erd1qqqqqqqqqqqqqpgqv4ks4nzn2cw96mm06lt7s2l3xfrsznmp2jpsszdry5","erd1qqqqqqqqqqqqqpgqye633y7k0zd7nedfnp3m48h24qygm5jl2jpslxallh","erd1qqqqqqqqqqqqqpgqsw9pssy8rchjeyfh8jfafvl3ynum0p9k2jps6lwewp",re.unlockedRewardsFarmAddress,re.lockedRewardsFarmAddress,"erd1qqqqqqqqqqqqqpgq5e2m9df5yxxkmr86rusejc979arzayjk2jpsz2q43s","erd1qqqqqqqqqqqqqpgqnqvjnn4haygsw2hls2k9zjjadnjf9w7g2jpsmc60a4","erd1qqqqqqqqqqqqqpgqyawg3d9r4l27zue7e9sz7djf7p9aj3sz2jpsm070jf","erd1qqqqqqqqqqqqqpgqutddd7dva0x4xmehyljp7wh7ecynag0u2jpskxx6xt","erd1qqqqqqqqqqqqqpgqwtzqckt793q8ggufxxlsv3za336674qq2jpszzgqra","erd1qqqqqqqqqqqqqpgqs2puacesqywt84jawqenmmree20uj80d2jpsefuka9","erd1qqqqqqqqqqqqqpgqs2mmvzpu6wz83z3vthajl4ncpwz67ctu2jpsrcl0ct","erd1qqqqqqqqqqqqqpgq6xp2uvdk22frgqkwm9pwa564gqg2gxfm2jpszggzgw","erd1qqqqqqqqqqqqqpgqdt892e0aflgm0xwryhhegsjhw0zru60m2jps959w5z","erd1qqqqqqqqqqqqqpgqmaj6qc4c6f9ldkuwllqh7pyd8e9yu3m82jpscc6f9s","erd1qqqqqqqqqqqqqpgq3f8jfeg34ujzy0muhe9dvn5yngwgud022jpsscjxgl","erd1qqqqqqqqqqqqqpgqmqq78c5htmdnws8hm5u4suvags36eq092jpsaxv3e7","erd1qqqqqqqqqqqqqpgqr7kdhagkqgxvjrsk7s5333l9wwnenr9g2jps8puq33","erd1qqqqqqqqqqqqqpgqzps75vsk97w9nsx2cenv2r2tyxl4fl402jpsx78m9j","erd1qqqqqqqqqqqqqpgq45zs77q884ts6y9zj4jyqfn6ydev8ruv2jps3tteqq","erd1qqqqqqqqqqqqqpgqcedkmj8ezme6mtautj79ngv7fez978le2jps8jtawn"],oe={erd1qqqqqqqqqqqqqpgq5e2m9df5yxxkmr86rusejc979arzayjk2jpsz2q43s:"2022-01-13 18:01 +0000"},le=n(19);function de(e){return!(!e||!e.startsWith("erd")||62!==e.length||!0!==/^\w+$/.test(e))&&function(e){try{var t=new le.Address(e);return Boolean(t.bech32())}catch(n){return!1}}(e)}var ue="erd12dnfhej64s6c56ka369gkyj3hwv5ms0y5rxgsk2k7hkd2vuk7rvqxkalsa";function me(e){return new le.Transaction(Object(m.a)({value:le.Balance.fromString(e.value),data:le.TransactionPayload.fromEncoded(e.data),receiver:new le.Address(e.receiver),gasLimit:new le.GasLimit(e.gasLimit),gasPrice:new le.GasPrice(e.gasPrice),chainID:new le.ChainID(e.chainID),version:new le.TransactionVersion(e.version)},e.options?{options:new le.TransactionOptions(e.options)}:{}))}var be=n(6),je=n.n(be);var fe=n(22),he=n.n(fe),pe=function(e){var t=e.epochs,n=e.stats;if(n)return t>0?1===t?he()(n.nextEpochDate):he()(n.nextEpochDate).add(n.epochDurationSec*(t-1),"seconds"):he()()},xe=function(e){return Boolean(null===e||void 0===e?void 0:e.isSame(new Date,"day"))},ve=function(e){return Boolean(null===e||void 0===e?void 0:e.isSameOrBefore(new Date))},Oe=function(e){var t,n,a=e.epochs,i=e.stats,r=e.hasSteps,s=pe({stats:i,epochs:a}),c=xe(s),o=ve(s),l=c&&Boolean(null===s||void 0===s?void 0:s.isAfter(new Date));switch(!0){case o:t="",n="Unlockable now";break;case l:t="Unlockable today",n=s?s.format("hh:mm A"):"...";break;default:t=r?"Starts unlocking":"Unlocks on",n=s?s.format("MMM Do YYYY"):"..."}return{unlocksAtText:t,unlocksAtDate:n}},ke=n(14),ge=n(66),ye=n.n(ge),we=n(298),Te=n.n(we),Ne=n(101),Se=Object(Ne.b)(Ne.c,Te.a),Ae=Se((function(e){return e.account}),(function(e){return e})),Fe=(Se(Ae,(function(e){return e.transactions})),Se(Ae,(function(e){return e.transactionsFetched})),Se(Ae,(function(e){return e.txCount}))),Pe=Se(Ae,(function(e){return e.txCountUpdatedCount})),De=Se(Ae,(function(e){return e.tolerance})),Re=Se(Ae,(function(e){return e.theme})),Ee=(Se(Ae,(function(e){return e.txDeadlineSec})),Se(Ae,(function(e){return e.accountFlags})),Se(Ae,(function(e){return e.importedPools}))),Le=Se(Ae,(function(e){return e.socketUrl})),Ce=function(e){if(null===e.match(/^[0-9]*\.?[0-9]*$/))return!1;if(isNaN(parseFloat(e)))return!1;var t=e.split("."),n=Object(T.a)(t,2),a=n[0],i=n[1];if(i)for(;"0"===i.charAt(i.length-1);)i=i.slice(0,-1);var r=i?[a,i].join("."):a,s=new je.a(r);return s.toString(10)===r&&s.comparedTo(0)>=0},Ie=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=String(e);if(!n.match(/^[-]?\d+$/))return!1;var a=new je.a(n),i=t?0:-1;return a.toString(10)===n&&a.comparedTo(0)>=i},qe=function(){var e=Object(g.c)(De),t=["0.1","0.5","1"],n=void 0===e||t.includes(e)?[]:[e];return{toleranceOptions:Object(ke.a)(new Set([].concat(t,n))).sort().map((function(e){return{label:"".concat(e,"%"),value:e}})),defaultOption:{label:"1%",value:"1"}}},Me=function(e){var t=e.pairs,n=e.tokens,a=void 0===n?[]:n,i=e.egldBalance,r=void 0===i?"0":i,s=e.filterWegld,c=e.tokenUSDPrices,o=void 0===c?[]:c,l=[],d={},u=["EGLD","WEGLD","MEX","LKMEX","USDC"],m=function(e){var t=a.find((function(t){return t.identifier===e.identifier})),n=e.identifier===U,i=n?M:e.decimals,s=et({token:null!==t&&void 0!==t?t:e,tokenUSDPrices:o}),c=n?r:t?t.balance:"0",l=He({amount:c,denomination:i,showLastNonZeroDecimal:!0}),d=s?"$".concat(Ye(s,2)):"...",u=s?parseFloat(s)*parseFloat(l):0,m=s?"$".concat(Ye(u.toString(),2)):"...",b=null===t||void 0===t?void 0:t.lockedTokenDetails;return{name:e.name,identifier:e.identifier,decimals:i,balance:c,usdPrice:d,totalUsdPrice:m,lockedTokenDetails:b}},b=function(e){return e.sort((function(e,t){var n=u.indexOf(e.value.split("-")[0]),a=u.indexOf(t.value.split("-")[0]);return(n>-1?n:99)-(a>-1?a:99)}))},j=function(e){var t=Object(ge.cloneDeep)(e);return Object.keys(t).forEach((function(e){var n=t[e];t[e]=b(n)})),t},f=function(e){if(void 0===e)return!1;var t=He({amount:e.balance,denomination:e.decimals,showLastNonZeroDecimal:!0});return parseFloat(t)>.05};t.forEach((function(e){var t=e.firstToken,n=e.secondToken,a=l.filter((function(e){return e.value===t.identifier})).length>0,i=l.filter((function(e){return e.value===n.identifier})).length>0,r={label:t.identifier,value:t.identifier,token:m(t)},s={label:n.identifier,value:n.identifier,token:m(n)};d[t.identifier]=d[t.identifier]?[].concat(Object(ke.a)(d[t.identifier]),[s]):[s],d[n.identifier]=d[n.identifier]?[].concat(Object(ke.a)(d[n.identifier]),[r]):[r],a||l.push(r),i||l.push(s)}));var h=l.filter((function(e){var t=e.token;return t.identifier!==$||f(t)}));return{options:b(s?h:l),pairMapping:j(s?function(){var e=Object(ge.cloneDeep)(d),t=a.find((function(e){return e.identifier===$}));return f(t)||(delete e[$],Object.keys(e).forEach((function(t){var n=e[t];e[t]=n.filter((function(e){return e.value!==$}))}))),e}():d)}},Be=function(e){var t,n=e.firstTokenId,a=e.secondTokenId,i=e.pairs.filter((function(e){var t=n===e.firstToken.identifier||n===e.secondToken.identifier,i=a===e.firstToken.identifier||a===e.secondToken.identifier;return t&&i}));return i.length>0&&n!==a&&(t=i[0]),t},Ue=function(e){return void 0!==e?e.address:void 0},$e=function(e){var t,n=e.tokenId;return null===(t=e.tokensOptions.find((function(e){return e.value===n})))||void 0===t?void 0:t.token.decimals},_e=function(e){return e?e.value:void 0},Ve=function(e){var t,n=e?null===e||void 0===e?void 0:e.token:void 0,a=null===n||void 0===n?void 0:n.lockedTokenDetails;return null!==(t=null===a||void 0===a?void 0:a.lockedTokenCollection)&&void 0!==t?t:null===n||void 0===n?void 0:n.identifier},We=function(e){var t=e.amount,n=e.balance;return"0"!==n&&t!==n},ze=function(e){var t=new je.a(e),n=new je.a(q),a=t.minus(n);return a.isGreaterThan(0)?a.toString(10):"0"},He=function(e){var t=e.amount,n=e.denomination,a=e.decimals,i=e.showLastNonZeroDecimal,r=e.addCommas;if(!Ie(t))return console.error("denominateAmount: invalid amount",t),"0";var s=null!==a&&void 0!==a?a:4,c=void 0!==r&&r,o=void 0!==i&&i,l=Object(O.e)({input:t,denomination:n,decimals:s,addCommas:c,showLastNonZeroDecimal:o});return l=parseFloat(l)>0?l:Object(O.e)({input:t,denomination:n,decimals:8,addCommas:c,showLastNonZeroDecimal:o}),l=parseFloat(l)>0?l:Object(O.e)({input:t,denomination:n,decimals:13,addCommas:c,showLastNonZeroDecimal:o}),parseFloat(l)>0?l:Object(O.e)({input:t,denomination:n,decimals:18,addCommas:c,showLastNonZeroDecimal:o})},Ye=function(e,t){if(Ce(e)){var n=null!==t&&void 0!==t?t:4;if(new je.a(e).isZero())return"0";var a=new je.a(e).toFormat(n);return a=parseFloat(a)>0?a:new je.a(e).toFormat(n+4),parseFloat(a)>0?a:new je.a(e).toFormat(n+9)}return"0"},Ge=function(e){var t=e.pairsRate,n=e.pairAddress;return t.find((function(e){return e.address===n}))},Ze=function(e){var t=e.farmsRate,n=e.farmAddress,a=e.lpToken,i=t.filter((function(e){return e.address===n||e.farmingToken.identifier===a}));return i.length>1?i.find((function(e){return"lockedRewards"===e.rewardType})):i[0]},Ke=function(e){var t=e.stakingFarmsRate,n=e.farmAddress;return t.find((function(e){return e.address===n}))},Xe=function(e){var t=e.farmsRate,n=e.lpToken,a=t.filter((function(e){return e.farmingToken.identifier===n}));return{unlockedRewardsFarmRate:a.find((function(e){return"unlockedRewards"===e.rewardType})),lockedRewardsFarmRate:a.find((function(e){return"lockedRewards"===e.rewardType}))}},Qe=function(e){return e.replace(/,/g,"")},Je=function(e){var t=e.priceDiscoveryContractsRate,n=e.contractAddress;return t.find((function(e){return e.address===n}))},et=function(e){var t=e.token,n=e.tokenUSDPrices.find((function(e){var n,a=e.identifier,i=null===t||void 0===t||null===(n=t.lockedTokenDetails)||void 0===n?void 0:n.originalTokenID;return a===(null!==i&&void 0!==i?i:null===t||void 0===t?void 0:t.identifier)}));return null===n||void 0===n?void 0:n.price},tt=function(e){var t={batchAttributes:[]};return e.forEach((function(e){e.attributes&&t.batchAttributes.push({identifier:e.identifier,attributes:e.attributes})})),t},nt=function(e){var t=parseInt(e).toString(16);return t.length%2===0?t:"0".concat(t)},at=function(e){var t=e.split("-");return e.includes("-")?"".concat(t[0],"-").concat(t[1]):e},it=function(e){var t,n,a,i,r,s=e.token,c=e.tokenDetails,o=e.nftDetails,l=at(s),d=c.find((function(e){return e.identifier===l})),u=o.find((function(e){return e.collection===l}));return{iconUrl:null!==(t=null===d||void 0===d||null===(n=d.assets)||void 0===n?void 0:n.svgUrl)&&void 0!==t?t:null===u||void 0===u||null===(a=u.assets)||void 0===a?void 0:a.svgUrl,symbol:null!==(i=null===d||void 0===d?void 0:d.ticker)&&void 0!==i?i:null===u||void 0===u?void 0:u.ticker,label:null!==(r=null===d||void 0===d?void 0:d.name)&&void 0!==r?r:null===u||void 0===u?void 0:u.name}};var rt=function(e){return!(!e||!e.startsWith("erd")||62!==e.length||!0!==/^\w+$/.test(e))&&function(e){try{var t=new le.Address(e);return Boolean(t.bech32())}catch(n){return!1}}(e)};function st(e){return e&&rt(e)&&e.substr("erd1".length).startsWith("q".repeat(13))}var ct=function(e,t){var n=void 0===t?M:t;return!(void 0!==e&&e.toString().indexOf(".")>=0&&e.toString().split(".").pop().length>n)};function ot(e,t){var n=e.toString().split("."),a=void 0!==t?t:18;if(n[1])for(;"0"===n[1].substring(n[1].length-1)&&n[1].length>1;)n[1]=n[1].substring(0,n[1].length-1);var i=n[1]?a-n[1].length:a;i=i<0?0:i;for(var r=n.join("")+"0".repeat(i);"0"===r.substring(0,1)&&r.length>1;)r=r.substring(1);return r}var lt=function(e){return e===$?U:e},dt=n(28),ut=Object(dt.a)().shape({tolerance:Object(dt.b)().test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(""!==e&&Ce(e))})).test("max","Maximum ".concat(50,"%"),(function(e){return e<=50})).test("min","Minimum 0.01%",(function(e){return e>=.01})).test("maxDecimals","Maximum 2 decimals",(function(e){return ct(e,2)}))}),mt=n(32),bt=n(33),jt=n(57),ft=n(58),ht=n(644),pt=n(0),xt=function(e){var t=e.readonly,n=e.required,a=e.name,i=e.placeholder,r=e.value,s=e.disabled,c=e.resetDebouncer,l=e.tokenUsdPrice,d=e["data-testid"],u=e.handleChange,m=e.handleBlur,b=e.onKeyDown,j=e.onFocus,f=e.onDebounceChange,h=o.a.useRef(null),p=o.a.useState(""),x=Object(T.a)(p,2),v=x[0],O=x[1],k=o.a.useState(),g=Object(T.a)(k,2),y=g[0],w=g[1],N=Eh(v,500);o.a.useEffect((function(){var e;return void 0!==r&&(e=setTimeout((function(){null!==h.current&&O("")}),505)),function(){clearInterval(e)}}),[r]),o.a.useEffect((function(){f&&f(v)}),[N]),o.a.useEffect((function(){null!==h.current&&O("")}),[c]);return o.a.useEffect((function(){if(l){var e=Qe(r);if(""!==r&&Ce(e)){var t=Ye(new je.a(parseFloat(e)*parseFloat(l)).toString(10),2);w("$".concat(t))}else w(void 0)}else w(void 0)}),[r,l]),Object(pt.jsxs)("div",{className:"amount-holder w-100 ".concat(y?"show-usd-value":""," "),ref:h,children:[Object(pt.jsx)(ht.a,{thousandSeparator:",",decimalSeparator:".",isNumericString:!0,isAllowed:function(e){var t=e.floatValue;return!t||t<=Y},required:n,className:"amount-input form-control",style:{fontSize:"16px"},"data-testid":d||a,id:a,name:a,placeholder:i,value:r,onKeyDown:b,onChange:function(e){var t=Qe(e.target.value);(""===t||Ce(t)&&parseFloat(t)<=Y)&&(e.target.value=t,u(e),O(t))},onBlur:m,autoComplete:"off",disabled:null!==s&&void 0!==s&&s,readOnly:null!==t&&void 0!==t&&t,onFocus:j}),y&&Object(pt.jsx)("span",{className:"amount-holder-usd d-flex text-secondary",children:Object(pt.jsxs)("small",{children:["$0"!==y?Object(pt.jsx)(pt.Fragment,{children:"\u2248\xa0"}):Object(pt.jsx)(pt.Fragment,{}),y]})})]})},vt=n(685),Ot=function(e){return e.tokensDetails},kt=Se(Ot,(function(e){return e.tokenDetails})),gt=Se(Ot,(function(e){return e.nftDetails})),yt=function(e){var t=e.token,n=void 0===t?"":t,a=Object(g.c)(kt),i=Object(g.c)(gt),r=it({token:n,tokenDetails:a,nftDetails:i}).label,s=null!==r&&void 0!==r?r:"...";return Object(pt.jsx)(pt.Fragment,{children:n===U?"Elrond eGold":s})},wt=function(e){return e.appConfig},Tt=Se(wt,(function(e){return e.activeTheme})),Nt=Se(wt,(function(e){return e.exchangeOrigin})),St=Se(wt,(function(e){return e.stats})),At=Se(wt,(function(e){return e.swapPairType})),Ft=Se(wt,(function(e){return e.addLiqPairType})),Pt=Se(wt,(function(e){return e.criticalAppData}));function Dt(e){var t=e.inDropdown,n=void 0!==t&&t,a=e.label,i=e.value,r=e.token,s=e["data-testid"],c=" #".concat(r.nonce),l=Object(g.c)(St),d=Boolean(r.unlockSchedule||r.lockedTokenDetails),u=o.a.useState("Starts unlocking"),m=Object(T.a)(u,2),b=m[0],j=m[1],f=o.a.useState("..."),h=Object(T.a)(f,2),p=h[0],x=h[1];return o.a.useEffect((function(){if(r.unlockSchedule||r.lockedTokenDetails){var e,t=null!==r&&void 0!==r&&r.unlockSchedule?null===(e=r.unlockSchedule[0])||void 0===e?void 0:e.epochs:void 0,n=r.lockedTokenDetails?r.lockedTokenDetails.unlockEpoch-l.epoch:void 0,a=!!r.unlockSchedule&&r.unlockSchedule.length>1,i=Oe({epochs:void 0!==t?t:void 0!==n?n:0,stats:l,hasSteps:a}),s=i.unlocksAtDate,c=i.unlocksAtText;j(c),x(s)}}),[r,l]),Object(pt.jsxs)("div",{className:"d-flex w-100 align-items-center justify-content-between token-element","data-testid":s,children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("div",{className:"token-image mr-2 d-none d-sm-flex ".concat(n?"":"ml-2"),children:Object(pt.jsx)(Xh,{token:i})}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsxs)("div",{children:[Object(pt.jsx)(yt,{token:a}),c]}),d&&Object(pt.jsxs)("small",{className:"d-flex align-items-center text-secondary",children:[Object(pt.jsx)(F.a,{icon:N.o,size:"sm",className:"mr-2 d-none"}),Object(pt.jsx)("span",{className:"d-none d-md-flex ".concat(""!==b?"mr-1":""),children:b}),Object(pt.jsx)("span",{children:p})]})]})]}),Object(pt.jsx)("div",{children:He({amount:r.balance,denomination:r.decimals?r.decimals:0,addCommas:!0})})]})}var Rt=function(e){var t=e.token,n=void 0===t?"":t,a=Object(g.c)(kt),i=Object(g.c)(gt),r=it({token:n,tokenDetails:a,nftDetails:i}).symbol,s=null!==r&&void 0!==r?r:n;return Object(pt.jsx)(pt.Fragment,{children:n===U?U:s})};function Et(e){var t=e.inDropdown,n=void 0!==t&&t,a=e.label,i=e.value,r=e.token,s=e["data-testid"];return Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-between token-element","data-testid":s,children:[Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(pt.jsx)("div",{className:"token-image mr-2 ".concat(n?"in-dropdown":"d-none d-md-flex","\n        "),children:Object(pt.jsx)(Xh,{token:i})}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)(Rt,{token:a}),Object(pt.jsx)("small",{className:"text-secondary",children:r.usdPrice})]})]}),n&&Object(pt.jsxs)("div",{className:"d-flex flex-column ml-spacer ml-lg-5 align-items-end",children:[He({amount:r.balance,denomination:r.decimals?r.decimals:0,addCommas:!0}),r.totalUsdPrice&&Object(pt.jsxs)("small",{className:"text-secondary",children:["$0"!==r.totalUsdPrice?Object(pt.jsx)(pt.Fragment,{children:"\u2248\xa0"}):Object(pt.jsx)(pt.Fragment,{}),r.totalUsdPrice]})]})]})}var Lt=function(e){var t,n=e.id,a=e.name,i=e.value,r=e.defaultValue,s=e.options,o=e.isSearchable,l=e.className,d=void 0===l?"":l,u=e.onChange,b=e.onBlur,j=e.fullSize,f=e.noOptionsMessage,h=void 0===f?"No Tokens":f,p=e.disabled,x=void 0!==p&&p,v=e.hasLockedMEX,O=e.hasLockedTokens,k=c.useRef(null),g=window.getComputedStyle(document.documentElement),y=function(e){var t=e.customProps;return{valueContainer:function(){return{padding:"0",lineHeight:"1.5",fontSize:"1rem","@media (min-width: 768px)":{fontSize:"16px"},height:t.fullSize?"4.25rem":"3.5rem"}},control:function(e){return Object(m.a)(Object(m.a)({},e),{},{overflow:"hidden",minHeight:"0",borderTopLeftRadius:t.fullSize?"0.45rem":"1.875rem",borderBottomLeftRadius:t.fullSize?"0.45rem":"1.875rem",borderTopRightRadius:"0.45rem",borderBottomRightRadius:"0.45rem","&:hover":{height:"100%"}})},input:function(e){return Object(m.a)(Object(m.a)({},e),{},{maxWidth:t.fullSize?"100%":"10rem",overflow:"hidden",marginTop:"1.125rem",paddingLeft:"0.625rem",fontSize:"0.625rem","@media (min-width: 768px)":{marginTop:"0.9rem",paddingLeft:"1rem",fontSize:"1rem"}})},placeholder:function(e){return Object(m.a)(Object(m.a)({},e),{},{paddingRight:"1.5rem",fontSize:"0.625rem",paddingLeft:"0.625rem","@media (min-width: 768px)":{fontSize:"1rem",paddingLeft:"1rem"}})},indicatorSeparator:function(e){return Object(m.a)(Object(m.a)({},e),{},{display:"none"})},dropdownIndicator:function(e){return Object(m.a)(Object(m.a)({},e),{},{padding:"0 0.4rem 0 0"})},singleValue:function(e){return Object(m.a)(Object(m.a)({},e),{},{marginLeft:"1rem",width:t.fullSize?"83%":"auto","@media (min-width: 768px)":{marginLeft:"0.2rem",width:t.fullSize?"92%":"auto"}})},option:function(e,n){var a=n.isFocused,i=n.isSelected;return Object(m.a)(Object(m.a)({},e),{},{fontSize:"1rem",cursor:"pointer",backgroundColor:i?t.primaryColor:a?"#e2e2e2":"transparent"})},menu:function(e){return Object(m.a)(Object(m.a)({},e),{},{marginTop:"0.2rem",zIndex:"5","@media (max-width: 767px)":{width:"12.2rem",marginLeft:"-4rem"}})},container:function(e){return Object(m.a)(Object(m.a)({},e),{},{width:t.fullSize?"100%":"8rem","@media (min-width: 768px)":{width:t.fullSize?"100%":"11rem"}})}}}({customProps:{hoverColor:g.getPropertyValue("--light"),primaryColor:g.getPropertyValue("--primary"),bgColor:g.getPropertyValue("--card-bg"),textColor:g.getPropertyValue("--dark"),borderColor:g.getPropertyValue("--border-color"),shadowColor:g.getPropertyValue("--shadow-color"),fullSize:j}});return Object(pt.jsx)("div",{className:"select-holder","data-testid":"".concat(a,"Select"),children:Object(pt.jsx)(vt.a,{ref:k,placeholder:"Select token",noOptionsMessage:function(){return h||"No options"},id:n,name:a,className:"large-styled-select-container ".concat(j?"fullsize":""," ").concat(d),classNamePrefix:"styled-select",isDisabled:x,options:s,value:i,styles:y,maxMenuHeight:260,onChange:function(e){u(e),k&&null!==k.current&&k.current.blur()},formatOptionLabel:(t=n,function(e,n){var a=n.context,i=e.label,r=e.value,s={inDropdown:"menu"===a,label:i,value:r,token:e.token,"data-testid":"".concat(t,"-").concat(a,"-").concat(r)};return v||O?Object(pt.jsx)(Dt,Object(m.a)({},s)):Object(pt.jsx)(Et,Object(m.a)({},s))}),isSearchable:o,defaultValue:r,onBlur:b,autoBlur:!0})})},Ct=function(e){Object(jt.a)(n,e);var t=Object(ft.a)(n);function n(){return Object(mt.a)(this,n),t.apply(this,arguments)}return Object(bt.a)(n,[{key:"render",value:function(){return null}}]),n}(c.Component);Ct.AmountInput=xt,Ct.TokenSelect=Lt;var It=function(e){var t=e.name,n=e.parentTokenId,a=e.lockedMexTokens,i=e.lockedMexTokenId,r=e.onChange,s=a.map((function(e){return{label:e.collection,value:e.identifier,token:e}})),o=c.useState(),l=Object(T.a)(o,2),d=l[0],u=l[1];c.useEffect((function(){d||u(1===s.length?s[0]:void 0)}),[n,a]);var m=n===i,b=d?_e(d):void 0,j=a.find((function(e){return e.identifier===b})),f=j?j.balance:"0",h=j?j.nonce:void 0;c.useEffect((function(){if(d){var e=s.find((function(e){return e.value===d.value}));e&&u(e)}}),[a]);return{LockedMexSelect:c.useMemo((function(){return m?Object(pt.jsx)("div",{className:"token-select mt-2",children:Object(pt.jsx)(Ct.TokenSelect,{id:t,name:t,value:d,options:s,isSearchable:!1,fullSize:!0,hasLockedMEX:!0,onChange:function(e){u(e),r&&r()}})}):null}),[m,t,d,s]),balance:f,nonce:m?h:void 0,visible:m,validationError:"Please select a Locked MEX token"}},qt=n(49),Mt="Impersonate-Address";function Bt(){try{if(document.cookie){var e=document.cookie.split("; ").find((function(e){return e.startsWith("".concat(Mt,"="))}));if(e){var t=e.split("=")[1];if(de(t))return t}}}catch(n){}return""}function Ut(e){var t="expires=".concat(new Date(0).toUTCString());document.cookie="".concat(e,'="";').concat(t,";path=/;Secure=true")}var $t=function(){var e=Object(O.n)().address,t=Object(O.p)().isLoggedIn,n=Bh();return t&&n&&ne.includes(e)},_t=function(){var e=$t(),t=Bt(),n=o.a.useRef(null),a=Object(qt.a)({initialValues:{impersonatedAddress:null!==t&&void 0!==t?t:""},validationSchema:Object(dt.a)().shape({impersonatedAddress:Object(dt.b)().required("Required").test("validAddress","Not a valid address",(function(e){return Boolean(de("".concat(null!==e&&void 0!==e?e:"")))}))}),onSubmit:function(e){var t=e.impersonatedAddress;t&&(!function(e,t){var n=new Date;n.setTime(n.getTime()+36e5);var a="expires=".concat(n.toUTCString());document.cookie="".concat(e,"=").concat(t,";").concat(a,";path=/;Secure=true")}(Mt,t),d(),location.reload())}}),i=a.handleSubmit,r=a.errors,s=a.touched,c=a.handleBlur,l=a.handleChange,d=a.resetForm,u=a.values.impersonatedAddress;return e?Object(pt.jsx)("form",{ref:n,onSubmit:i,noValidate:!0,children:Object(pt.jsxs)("div",{className:"my-4",children:[Object(pt.jsx)("div",{className:"d-flex flex-wrap justify-content-between mb-2",children:Object(pt.jsx)("label",{className:"text-secondary mb-0",children:"See Account as:"})}),Object(pt.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[Object(pt.jsx)("div",{className:"w-100",children:Object(pt.jsx)("input",{type:"text",id:"impersonatedAddress",name:"impersonatedAddress",className:"form-control w-100",placeholder:"Address",onChange:l,onBlur:c,value:u})}),Object(pt.jsxs)("div",{className:"border-left d-flex align-items-center ml-3 pl-3 text-secondary",children:[t&&Object(pt.jsx)("button",{className:"btn btn-light py-2 px-3 align-end-flex mr-3",type:"button",onClick:function(){Ut(Mt),location.reload()},children:Object(pt.jsx)(F.a,{size:"lg",icon:N.r})}),Object(pt.jsx)("button",{className:"btn btn-primary py-2 px-3 align-end-flex",type:"submit",children:Object(pt.jsx)(F.a,{size:"lg",icon:N.f})})]})]}),"impersonatedAddress"in r&&"impersonatedAddress"in s&&Object(pt.jsx)("small",{className:"d-flex flex-column flex-sm-row my-2",children:Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-0 mb-2 mb-sm-0","data-testid":"invalidimpersonatedAddress",children:r.impersonatedAddress})})]})}):null},Vt=n(37),Wt=Object(Vt.b)("logout"),zt=n(150),Ht=n.n(zt),Yt=n(73),Gt=function(e){var t=e.key,n=e.data,a=e.expires;localStorage.setItem(String(t),JSON.stringify({expires:a,data:n}))},Zt=function(e){var t=e.address,n=e.item,a=e.expires,i=Xt("maiarExchangeAccounts"),r=i||{};Gt({key:"maiarExchangeAccounts",data:Object(m.a)(Object(m.a)({},r),{},Object(b.a)({},t,Object(m.a)(Object(m.a)({},t in r?r[t]:{}),n))),expires:a})},Kt=function(e){var t=e.address,n=e.item,a=e.expires,i=Xt("maiarExchangeAccounts"),r=i||{},s=t in r?r[t]:{};delete s[n],Gt({key:"maiarExchangeAccounts",data:Object(m.a)(Object(m.a)({},r),{},Object(b.a)({},t,s)),expires:a})},Xt=function(e){var t=localStorage.getItem(String(e));if(!t)return null;var n=JSON.parse(t);return n&&n.hasOwnProperty("expires")&&n.hasOwnProperty("data")?he()().unix()>=n.expires?(localStorage.removeItem(String(e)),null):n.data:null},Qt=function(e){var t=e.address,n=e.key,a=Xt("maiarExchangeAccounts");try{var i=a||{};return t&&t in i?i[t][n]:void 0}catch(r){return}},Jt=function(e){return localStorage.removeItem(String(e))},en=function(){return localStorage.clear()},tn=function(e){var t,n=[],a=Object(Yt.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.push({value:localStorage.getItem(i),key:i})}}catch(o){a.e(o)}finally{a.f()}if(localStorage.clear(),n.length>0){var r,s=Object(Yt.a)(n);try{for(s.s();!(r=s.n()).done;){var c=r.value;c.key&&c.value&&localStorage.setItem(c.key,c.value)}}catch(o){s.e(o)}finally{s.f()}}},nn=function(e){var t=e.key,n=e.data,a=e.expires;sessionStorage.setItem(String(t),JSON.stringify({expires:a,data:n}))},an=function(e){var t=sessionStorage.getItem(String(e));if(!t)return null;var n=JSON.parse(t);return n&&n.hasOwnProperty("expires")&&n.hasOwnProperty("data")?he()().unix()>=n.expires?(sessionStorage.removeItem(String(e)),null):n.data:null},rn=function(e){return sessionStorage.removeItem(String(e))},sn=function(){return sessionStorage.clear()},cn={local:i,session:r},on={name:"1%",value:"1"},ln=[{name:"0.1%",value:"0.1"},{name:"0.5%",value:"0.5"},on],dn={transactions:[],transactionsFetched:void 0,txCount:0,txCountUpdatedCount:0,accountFlags:{accountLoading:!0},tolerance:on.value,txDeadlineSec:"0"};function un(){var e=cn.local.getItem("address"),t=cn.local.getItem("maiarExchangeAccounts"),n=dn,a=Ht()(t)?t:{};return e in a&&(n=Object(m.a)(Object(m.a)(Object(m.a)({},n),a[e]),{},{theme:a[e].theme?a[e].theme:cn.local.getItem("activeTheme")})),n}var mn,bn=Object(Vt.c)({name:"account",initialState:un(),reducers:{setTransactions:function(e,t){var n=t.payload,a=n.transactions,i=n.transactionsFetched;e.transactions=null!==a&&void 0!==a?a:e.transactions,e.transactionsFetched=i},setTransactionsCount:function(e,t){var n=t.payload.txCount;n&&(e.txCount=n,e.txCountUpdatedCount=e.txCountUpdatedCount+1)},setTolerance:function(e,t){e.tolerance=t.payload},setSocketUrl:function(e,t){e.socketUrl=t.payload},setImportedPools:function(e,t){e.importedPools=t.payload},setTxDeadlineSec:function(e,t){e.txDeadlineSec=t.payload},setAccountTheme:function(e,t){e.theme=t.payload},setAccountFlags:function(e,t){e.accountFlags=t.payload},clearAccountData:function(e,t){var n=t.payload,a=cn.local.getItem("maiarExchangeAccounts"),i=a||{};if(n in i&&(cn.local.removeItem("maiarExchangeAccounts"),delete i[n]),Object.keys(i).length>0){var r=he()().add(1,"hours").unix();cn.local.setItem({key:"maiarExchangeAccounts",data:i,expires:r})}return un()}},extraReducers:function(e){e.addCase(Wt,(function(){return Object(m.a)(Object(m.a)({},dn),{},{accountFlags:{accountLoading:!1}})}))}}),jn=bn.actions,fn=jn.setAccountTheme,hn=jn.setTolerance,pn=jn.setImportedPools,xn=jn.setTransactions,vn=jn.setTransactionsCount,On=(jn.setTxDeadlineSec,jn.setAccountFlags,jn.setSocketUrl),kn=(jn.clearAccountData,bn.reducer),gn={pairsCollection:{pairs:[],pairsFetched:!1,pairsFetchError:!1}},yn=Object(Vt.c)({name:"analyticsPage",initialState:gn,reducers:{setAnalyticsPagePairs:function(e,t){e.pairsCollection.pairs=t.payload,e.pairsCollection.pairsFetched=!0,e.pairsCollection.pairsFetchError=!1},setAnalyticsPageFetchPairsError:function(e){e.pairsCollection={pairs:[],pairsFetched:!1,pairsFetchError:!0}}},extraReducers:function(e){e.addCase(Wt,(function(){return gn}))}}),wn=yn.actions,Tn=wn.setAnalyticsPagePairs,Nn=wn.setAnalyticsPageFetchPairsError,Sn=yn.reducer;function An(){var e=window.matchMedia("(prefers-color-scheme: dark)"),t=e&&e.matches?mn.dark:mn.light,n=Boolean(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CACHE_BUST:"53a081f0",REACT_APP_SHARE_PREFIX:"",REACT_APP_THEME:"light"}).REACT_APP_TESTNET)?mn.testnet:t,a=cn.local.getItem("activeTheme"),i=a||void 0;return{activeTheme:null!==i&&void 0!==i?i:n,stats:{epoch:0,nextEpochDate:null,epochDurationSec:0,roundsPerEpoch:0,refreshRate:0},exchangeOrigin:{pathname:"/",search:""},criticalAppData:{isMaintenance:!1}}}!function(e){e.light="light",e.dark="dark",e.testnet="testnet"}(mn||(mn={}));var Fn,Pn,Dn,Rn,En=Object(Vt.c)({name:"appConfig",initialState:An(),reducers:{setActiveTheme:function(e,t){e.activeTheme=t.payload},setStats:function(e,t){e.stats=t.payload},setExchangeOrigin:function(e,t){e.exchangeOrigin=t.payload},setSwapPairType:function(e,t){e.swapPairType=t.payload},setAddLiqPairType:function(e,t){e.addLiqPairType=t.payload},setCriticalAppData:function(e,t){e.criticalAppData=t.payload}},extraReducers:function(e){e.addCase(Wt,(function(){return An()}))}}),Ln=En.actions,Cn=Ln.setActiveTheme,In=Ln.setExchangeOrigin,qn=Ln.setStats,Mn=Ln.setSwapPairType,Bn=Ln.setAddLiqPairType,Un=Ln.setCriticalAppData,$n=En.reducer,_n={farmsCollection:[],isLoading:!0,isError:!1},Vn=Object(Vt.c)({name:"farms",initialState:_n,reducers:{setFarms:function(e,t){var n,a;e.farmsCollection=t.payload.farmsCollection,e.isLoading=null!==(n=t.payload.isLoading)&&void 0!==n&&n,e.isError=null!==(a=t.payload.isError)&&void 0!==a&&a}},extraReducers:function(e){e.addCase(Wt,(function(){return _n}))}}),Wn=Vn.actions.setFarms,zn=Vn.reducer,Hn={farmStakeRewardsCollection:{}},Yn=Object(Vt.c)({name:"farmStakeRewards",initialState:Hn,reducers:{setFarmStakeRewards:function(e,t){var n=t.payload,a=n.farmAddress,i=n.payload;e.farmStakeRewardsCollection[a]=i},initRewardsForFarmAddress:function(e,t){var n=t.payload;e.farmStakeRewardsCollection[n]={rewardsFetched:!0,totalRewards:"0",totalStaked:"0",denomination:0,stakeAndRewards:[]}}},extraReducers:function(e){e.addCase(Wt,(function(){return Hn}))}}),Gn=Yn.actions,Zn=Gn.setFarmStakeRewards,Kn=Gn.initRewardsForFarmAddress,Xn=Yn.reducer,Qn={balance:"",nonce:1},Jn=Object(Vt.c)({name:"impersonatedAccount",initialState:Qn,reducers:{setImpersonatedAccount:function(e,t){e.balance=t.payload.balance,e.nonce=t.payload.nonce}},extraReducers:function(e){e.addCase(Wt,(function(){return Qn}))}}),ea=Jn.actions.setImpersonatedAccount,ta=Jn.reducer,na={},aa=Object(Vt.c)({name:"launchCache",initialState:na,reducers:{setLaunchCache:function(e,t){var n=t.payload,a=n.cacheKey,i=n.launchCache;e[a]=Object(m.a)(Object(m.a)({},i),{},{isFetched:!0,isError:!1})},setLaunchCacheError:function(e,t){e[t.payload.cacheKey]={priceDiscoveryContracts:[],isFetched:!1,isError:!0}}},extraReducers:function(e){e.addCase(Wt,(function(){return na}))}}),ia=aa.actions,ra=ia.setLaunchCache,sa=ia.setLaunchCacheError,ca=aa.reducer,oa={},la=Object(Vt.c)({name:"liquidityCache",initialState:oa,reducers:{setLiquidityCache:function(e,t){var n=t.payload,a=n.cacheKey,i=n.liquidityCache;e[a]=Object(m.a)(Object(m.a)({},i),{},{pairsFetched:!0,pairsFetchError:!1})},setLiquidityCacheError:function(e,t){e[t.payload.cacheKey]={pairs:[],pairsFetched:!1,pairsFetchError:!0,proxy:void 0}}},extraReducers:function(e){e.addCase(Wt,(function(){return oa}))}}),da=la.actions,ua=da.setLiquidityCache,ma=da.setLiquidityCacheError,ba=la.reducer,ja={steps:{step:"1_CreatePair"}},fa=Object(Vt.c)({name:"liquidityCreatePool",initialState:ja,reducers:{setLiquidityCreatePool:function(e,t){var n=t.payload.steps;e.steps=n}},extraReducers:function(e){e.addCase(Wt,(function(){return ja}))}}),ha=fa.actions.setLiquidityCreatePool,pa=fa.reducer,xa={},va=Object(Vt.c)({name:"lockedTokensCache",initialState:xa,reducers:{setLockedTokensCache:function(e,t){var n=t.payload,a=n.cacheKey,i=n.lockedTokens;e[a]=i}},extraReducers:function(e){e.addCase(Wt,(function(){return xa}))}}),Oa=va.actions.setLockedTokensCache,ka=va.reducer,ga={},ya=Object(Vt.c)({name:"wrappedLpTokensCache",initialState:ga,reducers:{setLpProxyTokensCache:function(e,t){var n=t.payload,a=n.cacheKey,i=n.lpProxyTokens;e[a]=i}},extraReducers:function(e){e.addCase(Wt,(function(){return ga}))}}),wa=ya.actions.setLpProxyTokensCache,Ta=ya.reducer,Na={isLoading:!0,isError:!1},Sa=Object(Vt.c)({name:"metabodingPage",initialState:Na,reducers:{setMetabodingPageData:function(e,t){var n,a;e.metabondingStakingData=t.payload.metabondingStakingData,e.isLoading=null!==(n=t.payload.isLoading)&&void 0!==n&&n,e.isError=null!==(a=t.payload.isError)&&void 0!==a&&a}},extraReducers:function(e){e.addCase(Wt,(function(){return Na}))}}),Aa=(Sa.actions.setMetabodingPageData,Sa.reducer),Fa={txSubmittedModal:{sessionId:"",submittedMessage:""}},Pa=Object(Vt.c)({name:"modals",initialState:Fa,reducers:{setTxSubmittedModal:function(e,t){e.txSubmittedModal=t.payload},setNotificationModal:function(e,t){e.notificationModal=t.payload},clearNotificationModal:function(e){e.notificationModal=void 0}},extraReducers:function(e){e.addCase(Wt,(function(){return Fa}))}}),Da=Pa.actions,Ra=Da.setTxSubmittedModal,Ea=Da.setNotificationModal,La=Da.clearNotificationModal,Ca=Pa.reducer,Ia={},qa=Object(Vt.c)({name:"nftsCache",initialState:Ia,reducers:{refreshNftsCache:function(e,t){var n=t.payload,a=n.cacheKey,i=n.nfts;e[a]=i}},extraReducers:function(e){e.addCase(Wt,(function(){return Ia}))}}),Ma=qa.actions.refreshNftsCache,Ba=qa.reducer,Ua={signStatus:{},transactionsToSign:void 0},$a=Object(Vt.c)({name:"signTransactions",initialState:Ua,reducers:{updateSignStatus:function(e,t){e.signStatus=Object(m.a)(Object(m.a)({},e.signStatus),t.payload)},setTransactionsToSign:function(e,t){e.transactionsToSign=t.payload},clearSignTransactions:function(){return Ua}}}),_a=$a.actions,Va=(_a.updateSignStatus,_a.setTransactionsToSign),Wa=_a.clearSignTransactions,za=$a.reducer,Ha={stakingFarmsRewardsCollection:{}},Ya=Object(Vt.c)({name:"stakingFarmsRewards",initialState:Ha,reducers:{setStakingFarmsRewards:function(e,t){var n=t.payload,a=n.farmAddress,i=n.payload;e.stakingFarmsRewardsCollection[a]=i},initRewardsForFarmAddress:function(e,t){var n=t.payload;e.stakingFarmsRewardsCollection[n]={rewardsFetched:!0,totalRewards:"0",totalStaked:"0",denomination:0,stakes:[],unbondingStakes:[]}}},extraReducers:function(e){e.addCase(Wt,(function(){return Ha}))}}),Ga=Ya.actions,Za=Ga.setStakingFarmsRewards,Ka=Ga.initRewardsForFarmAddress,Xa=Ya.reducer,Qa={stakingFarmsCollection:[],isLoading:!0,isError:!1},Ja=Object(Vt.c)({name:"stakingFarms",initialState:Qa,reducers:{setStakingFarms:function(e,t){var n,a;e.stakingFarmsCollection=t.payload.stakingFarmsCollection,e.isLoading=null!==(n=t.payload.isLoading)&&void 0!==n&&n,e.isError=null!==(a=t.payload.isError)&&void 0!==a&&a}},extraReducers:function(e){e.addCase(Wt,(function(){return Qa}))}}),ei=Ja.actions.setStakingFarms,ti=Ja.reducer,ni={farmsRate:[],stakingFarmsRate:[],pairsRate:[],priceDiscoveryContractsRate:[],mexSupply:"...",mexPrice:"...",mexBurned:"...",egldMexRate:"...",egldPrice:"...",marketCap:"...",aggregatedRewards:"...",totalDepositedInFarms:"...",totalDepositedInExchange:"...",currentEmissions:"...",totalVolumeUSD24h:"...",tokenUSDPrices:[]},ai=Object(Vt.c)({name:"statistics",initialState:ni,reducers:{setStatistics:function(e,t){e.farmsRate=t.payload.farmsRate,e.stakingFarmsRate=t.payload.stakingFarmsRate,e.pairsRate=t.payload.pairsRate,e.mexSupply=t.payload.mexSupply,e.mexPrice=t.payload.mexPrice,e.mexBurned=t.payload.mexBurned,e.egldMexRate=t.payload.egldMexRate,e.egldPrice=t.payload.egldPrice,e.marketCap=t.payload.marketCap,e.aggregatedRewards=t.payload.aggregatedRewards,e.totalDepositedInFarms=t.payload.totalDepositedInFarms,e.totalDepositedInExchange=t.payload.totalDepositedInExchange,e.currentEmissions=t.payload.currentEmissions,e.totalVolumeUSD24h=t.payload.totalVolumeUSD24h,e.tokenUSDPrices=t.payload.tokenUSDPrices,e.priceDiscoveryContractsRate=t.payload.priceDiscoveryContractsRate}},extraReducers:function(e){e.addCase(Wt,(function(){return ni}))}}),ii=ai.actions.setStatistics,ri=ai.reducer,si={pairsCollection:{pairs:[],pairsFetched:!1,pairsFetchError:!1}},ci=Object(Vt.c)({name:"swapPage",initialState:si,reducers:{setSwapPagePairs:function(e,t){e.pairsCollection.pairs=t.payload,e.pairsCollection.pairsFetched=!0,e.pairsCollection.pairsFetchError=!1},setSwapPageFetchPairsError:function(e){e.pairsCollection={pairs:[],pairsFetched:!1,pairsFetchError:!0}}},extraReducers:function(e){e.addCase(Wt,(function(){return si}))}}),oi=ci.actions,li=oi.setSwapPagePairs,di=oi.setSwapPageFetchPairsError,ui=ci.reducer,mi={toasts:[],toastSignSessions:[],transactionToasts:[],refetch:Date.now()},bi=Object(Vt.c)({name:"toasts",initialState:mi,reducers:{addToast:function(e,t){var n=t.payload,a=he()().valueOf();e.toasts.some((function(e){return e.id===n.id}))?e.toasts=e.toasts.map((function(e){return e.id===n.id?Object(m.a)(Object(m.a)({},e),n):e})):e.toasts.unshift(Object(m.a)(Object(m.a)({},n),{},{timestamp:a}))},updateToast:function(e,t){var n=t.payload;e.toasts=e.toasts.map((function(e){return e.id===n.id?Object(m.a)(Object(m.a)({},e),n):e}))},removeToast:function(e,t){var n=t.payload;e.toasts=e.toasts.filter((function(e){return e.id!==n}))},setTransactionToasts:function(e,t){e.transactionToasts=t.payload},addToastSignSession:function(e,t){var n=t.payload;e.toastSignSessions.includes(n)||e.toastSignSessions.unshift(n)},updateToastsRefetch:function(e){e.refetch=Date.now()}},extraReducers:function(e){e.addCase(Wt,(function(){return mi}))}}),ji=bi.actions,fi=ji.addToast,hi=ji.updateToast,pi=ji.removeToast,xi=ji.setTransactionToasts,vi=ji.addToastSignSession,Oi=ji.updateToastsRefetch,ki=bi.reducer,gi={},yi=Object(Vt.c)({name:"tokensCache",initialState:gi,reducers:{refreshTokensCache:function(e,t){var n=t.payload,a=n.cacheKey,i=n.tokens;e[a]=i}},extraReducers:function(e){e.addCase(Wt,(function(){return gi}))}}),wi=yi.actions.refreshTokensCache,Ti=yi.reducer,Ni=Object(Vt.c)({name:"tokensDetailsSlice",initialState:{tokenDetails:[],nftDetails:[]},reducers:{updateTokenDetails:function(e,t){var n=t.payload.tokenDetails;e.tokenDetails=ye.a.unionBy(e.tokenDetails,n,"identifier")},updateNftDetails:function(e,t){var n=t.payload.nftDetails;e.nftDetails=ye.a.unionBy(e.nftDetails,n,"collection")}}}),Si=Ni.actions,Ai=Si.updateTokenDetails,Fi=Si.updateNftDetails,Pi=Ni.reducer,Di={},Ri=Object(Vt.c)({name:"wrappedLpTokensCache",initialState:Di,reducers:{refreshWrappedLpTokensCache:function(e,t){var n=t.payload,a=n.cacheKey,i=n.wrappedLpTokens;e[a]=i}},extraReducers:function(e){e.addCase(Wt,(function(){return Di}))}}),Ei=Ri.actions.refreshWrappedLpTokensCache,Li=Ri.reducer,Ci=Object(Vt.a)({reducer:{farmStakeRewards:Xn,farms:zn,toasts:ki,modals:Ca,appConfig:$n,account:kn,swapPage:ui,tokensCache:Ti,nftsCache:Ba,analyticsPage:Sn,wrappedLpTokensCache:Li,signTransactions:za,statistics:ri,tokensDetails:Pi,liquidityCreatePool:pa,liquidityCache:ba,stakingFarms:ti,stakingFarmsRewards:Xa,metabodingPage:Aa,impersonatedAccount:ta,launchCache:ca,lockedTokensCache:ka,lpProxyTokensCache:Ta}}),Ii=n(43),qi=n(90),Mi=n.n(qi),Bi=n(10),Ui=function(e){var t=c.useState(),n=Object(T.a)(t,2),a=n[0],i=n[1],r=Object(p.gql)(Fn||(Fn=Object(Bi.a)(["\n    query ($metric: String!) {\n      ","\n    }\n  "])),e.map((function(e){return"".concat(e.replace("-",""),': latestCompleteValues(metric: $metric, series: "').concat(e,'") {\n            timestamp\n            value\n          }')}))),s=Object(p.useLazyQuery)(r,{displayName:"getLatestCompleteValues",onCompleted:function(e){e&&i(e)}}),o=Object(T.a)(s,2),l=o[0],d=o[1],u=d.loading,m=d.error;return{getLatestCompleteValues:l,latestCompleteData:a,latestCompleteLoading:u,latestCompleteError:Boolean(m)}},$i=function(e){var t=c.useState(),n=Object(T.a)(t,2),a=n[0],i=n[1],r=Object(p.gql)(Pn||(Pn=Object(Bi.a)(["\n    query ($metric: String!) {\n      ","\n    }\n  "])),e.map((function(e){return"".concat(e.replace("-",""),': sumCompleteValues(metric: $metric, series: "').concat(e,'") {\n            timestamp\n            value\n          }')}))),s=Object(p.useLazyQuery)(r,{displayName:"getSumCompleteValues",onCompleted:function(e){e&&i(e)}}),o=Object(T.a)(s,2),l=o[0],d=o[1],u=d.loading,m=d.error;return{getSumCompleteValues:l,sumCompleteData:a,sumCompleteLoading:u,sumCompleteError:Boolean(m)}},_i=n(425),Vi=n.n(_i),Wi={aspectRatio:3,responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:.18},point:{radius:0,hitRadius:5,hoverRadius:5,hoverBorderWidth:2,hoverBackgroundColor:"#fff"}},interaction:{intersect:!1},hover:{intersect:!1},tooltips:{enabled:!1,intersect:!1},legend:{display:!1},scales:{xAxes:[{ticks:{fontColor:"#9ea5ad",fontSize:13,backgroundColor:null,maxRotation:0,autoSkip:!0},gridLines:{display:!1,drawBorder:!1,zeroLineColor:"transparent",backgroundColor:null}}],yAxes:[{id:"right-y-axis",position:"right",type:"linear",ticks:{min:0,fontSize:10,fontColor:"#9ea5ad",backgroundColor:null,maxTicksLimit:7,callback:function(e){var t=Vi()(e).format("$0.00a");return e>1e3&&(t=Vi()(e).format("$0.0a")),t}},gridLines:{display:!1},scaleLabel:{display:!1}}]}},zi=function(e){var t=e.hex,n=e.alpha,a="0",i="0",r="0";return 4===t.length?(a="0x"+t[1]+t[1],i="0x"+t[2]+t[2],r="0x"+t[3]+t[3]):7===t.length&&(a="0x"+t[1]+t[2],i="0x"+t[3]+t[4],r="0x"+t[5]+t[6]),"rgba(".concat(parseInt(a,16),", ").concat(parseInt(i,16),", ").concat(parseInt(r,16),", ").concat(n,")")},Hi=function(e){var t=e.element,n=e.colorStops,a=t.createLinearGradient(0,0,0,400);return n.forEach((function(e){var t=e.hex,n=e.alpha,i=e.colorStop;a.addColorStop(i,zi({hex:t,alpha:n}))})),a},Yi=n(200),Gi=n(303),Zi=Object(p.gql)(Dn||(Dn=Object(Bi.a)(["\n  query (\n    $time: String!\n    $metric: String!\n    $series: String!\n    $bin: String!\n    $start: String!\n  ) {\n    latestBinnedHistoricData(\n      time: $time\n      metric: $metric\n      series: $series\n      bin: $bin\n      start: $start\n    ) {\n      timestamp\n      value\n    }\n  }\n"]))),Ki=Object(p.gql)(Rn||(Rn=Object(Bi.a)(["\n  query ($time: String!, $metric: String!, $series: String!, $start: String!) {\n    latestHistoricData(\n      time: $time\n      metric: $metric\n      series: $series\n      start: $start\n    ) {\n      timestamp\n      value\n    }\n  }\n"]))),Xi=n(38),Qi=n.n(Xi),Ji=function(){var e=function(){var e=Object(j.a)(h.a.mark((function e(){var n,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(n=Qi.a.create()).interceptors.response.use((function(e){return e}),a),e.prev=4,e.next=7,k.c.maiarId.getAccessToken({address:t,maiarIdApi:Q,timeout:B});case 7:r=e.sent,s=i(r),n.interceptors.request.use(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0);case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),t=Object(O.n)().address,n=Bt(),a=function(e){var t;return 403===(null===(t=e.response)||void 0===t?void 0:t.status)&&(console.log("Axios request 403. Logging out."),Ah()),Promise.reject(e)},i=function(e){return function(t){return null!==t&&void 0!==t&&t.headers?(t.headers.Authorization=e?"Bearer ".concat(e.accessToken):"",n&&(t.headers[Mt]=n),t):t}};return e};function er(e){return tr.apply(this,arguments)}function tr(){return(tr=Object(j.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return n=e.sent,a=n.data,e.abrupt("return",{data:a,success:void 0!==a});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{success:!1});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var nr,ar,ir,rr,sr,cr,or=function(){var e=Mh().address,t=Ji(),n=te.apiAddress;return{getClaimableMex:function(){return er((function(){return Qi.a.get("https://internal-api.elrond.com/mex/".concat(e),{timeout:B})}))},getEconomics:function(){return er((function(){return Qi.a.get("".concat(n,"/economics"),{timeout:B})}))},getUserTokens:function(t){var a=t.identifiers,i=t.size;return er((function(){return Qi.a.get("".concat(n,"/accounts/").concat(e,"/tokens"),{params:Object(m.a)(Object(m.a)({},a?{identifiers:a.join(",")}:{}),a||i?{size:a?a.length:i}:{}),timeout:B})}))},getToken:function(e){return er((function(){return Qi.a.get("".concat(n,"/tokens/").concat(e),{timeout:B})}))},getTokenDetails:function(e){return er((function(){return Qi.a.get("".concat(n,"/tokens"),{params:{identifiers:e.join(","),size:e.length},timeout:B})}))},getTokenRoles:function(e){return er((function(){return Qi.a.get("".concat(n,"/tokens/").concat(e,"/roles"),{timeout:B})}))},getUserNfts:function(t){return er((function(){return Qi.a.get("".concat(n,"/accounts/").concat(e,"/nfts"),{params:{collections:t.join(","),size:40*t.length},timeout:B})}))},getNftsByIdentifiers:function(e,t){return er((function(){return Qi.a.get("".concat(n).concat(t?"/accounts/".concat(t):"","/nfts"),{params:{identifiers:e.join(",")},timeout:B})}))},getNft:function(e,t){return er((function(){return Qi.a.get("".concat(n).concat(t?"/accounts/".concat(t):"","/nfts/").concat(e),{timeout:B})}))},getNftDetails:function(e){return er((function(){return Qi.a.get("".concat(n,"/collections"),{params:{identifiers:e.join(","),size:e.length},timeout:B})}))},getStats:function(){return er((function(){return Qi.a.get("".concat(n,"/stats"),{timeout:B})}))},getApiSettings:function(){return t().then((function(e){return er((function(){return e.get("".concat(J,"/settings/maiar.exchange"),{timeout:B})}))}))},saveApiSettings:function(e){return t().then((function(t){return er((function(){return t.post("".concat(J,"/settings/maiar.exchange"),e,{timeout:B})}))}))},sendTransactions:function(e){return t().then((function(t){return er((function(){return t.post("".concat(J,"/transactions/batch"),e,{timeout:B})}))}))},getBatchInfo:function(e){return t().then((function(t){return er((function(){return t.get("".concat(J,"/transactions/batch/").concat(e),{timeout:B})}))}))},getTransactionsWithScResults:function(e){return er((function(){return Qi.a.get("".concat(n,"/transactions"),{params:{hashes:e,withScResults:!0},timeout:B})}))},getAccountTransactions:function(t){var a=t.count,i=void 0!==a&&a;return er((function(){return Qi.a.get("".concat(n,"/transactions").concat(i?"/count":""),{params:Object(m.a)({sender:e,receiver:e,condition:"should"},i?{}:{size:5}),timeout:B})}))},getClaimLkMexTransactions:function(){return er((function(){return Qi.a.get("".concat(n,"/transactions?from=0&size=1&sender=").concat(e,"&receiver=").concat("erd1qqqqqqqqqqqqqpgqyg62a3tswuzun2wzp8a83sjkc709wwjt2jpssphddm","&status=success"),{timeout:B})}))},getAccountDelegation:function(){return er((function(){return Qi.a.get("".concat("https://internal-delegation-api.elrond.com","/accounts/").concat(e,"/delegations"),{timeout:B})}))},getAccountDelegationLegacy:function(){return er((function(){return Qi.a.get("".concat(n,"/accounts/").concat(e,"/delegation-legacy"),{timeout:B})}))},getAccountStake:function(){return er((function(){return Qi.a.get("".concat(n,"/accounts/").concat(e,"/stake"),{timeout:B})}))},getCurrentBlockForShard:function(e){return er((function(){return Qi.a.get("".concat(n,"/blocks"),{params:{shard:e,size:1},timeout:B})}))},getMetabondingRewards:function(){return t().then((function(e){return er((function(){return e.get("".concat(ee,"/rewards"),{timeout:B})}))}))},claimMetabondingRewards:function(){return t().then((function(e){return er((function(){return e.get("".concat(ee,"/rewards/claim"),{timeout:B})}))}))},getMetabondingSnapshots:function(){return t().then((function(e){return er((function(){return e.get("".concat(ee,"/statistics"),{timeout:B})}))}))}}},lr=function(){var e=or().getNftDetails,t=Object(g.b)(),n=Object(g.c)(gt),a=o.a.useState(),i=Object(T.a)(a,2),r=i[0],s=i[1],c=function(){var a=Object(j.a)(h.a.mark((function a(i){var r,c,o,l;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!((r=i.filter((function(e){return e.includes("-")&&!Boolean(n.find((function(t){return t.collection===e})))}))).length>0)){a.next=12;break}return a.next=5,e(r);case 5:c=a.sent,o=c.data,l=c.success,t(Fi({nftDetails:l?o:[]})),s(l),a.next=13;break;case 12:s(!0);case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(0),s(!1);case 18:case"end":return a.stop()}}),a,null,[[0,15]])})));return function(e){return a.apply(this,arguments)}}();return{fetchNftDetails:c,nftDetailsLoading:void 0===r,nftDetailsFetched:!0===r,nftDetailsError:!1===r}},dr=function(){var e=or().getTokenDetails,t=Object(g.b)(),n=Object(g.c)(kt),a=o.a.useState(),i=Object(T.a)(a,2),r=i[0],s=i[1],c=function(){var a=Object(j.a)(h.a.mark((function a(i){var r,c,o,l;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!((r=i.filter((function(e){return e.includes("-")&&!Boolean(n.find((function(t){return t.identifier===e})))}))).length>0)){a.next=12;break}return a.next=5,e(r);case 5:c=a.sent,o=c.data,l=c.success,t(Ai({tokenDetails:l?o:[]})),s(l),a.next=13;break;case 12:s(!0);case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(0),s(!1);case 18:case"end":return a.stop()}}),a,null,[[0,15]])})));return function(e){return a.apply(this,arguments)}}();return{fetchTokenDetails:c,tokenDetailsLoading:void 0===r,tokenDetailsFetched:!0===r,tokenDetailsError:!1===r}},ur=function(){var e=Object(p.useApolloClient)();return function(t){var n=t.query,a=t.variables,i=t.id;return new Promise((function(t,r){e.query({query:n,variables:a,fetchPolicy:"no-cache"}).then((function(e){return t({data:e,id:i})})).catch((function(e){return r(e)}))}))}},mr=Object(p.gql)(nr||(nr=Object(Bi.a)(["\n  query ($args: DecodeAttributesArgs!) {\n    lockedTokenAttributes(args: $args) {\n      identifier\n      attributes\n      originalTokenID\n      originalTokenNonce\n      unlockEpoch\n    }\n  }\n"]))),br=Se((function(e){return e.lockedTokensCache}),(function(e,t){return t}),(function(e,t){var n;return null!=t&&null!==(n=null===e||void 0===e?void 0:e[t])&&void 0!==n?n:[]})),jr=function(){var e=Object(p.useApolloClient)(),t=c.useState(!1),n=Object(T.a)(t,2),a=n[0],i=n[1],r=function(){var t=Object(j.a)(h.a.mark((function t(n){var a,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.query,r=n.variables,t.prev=1,i(!0),t.next=5,e.query({query:a,fetchPolicy:"no-cache",variables:r});case 5:return s=t.sent,c=s.data,i(!1),t.abrupt("return",{data:c,success:null!==c});case 11:return t.prev=11,t.t0=t.catch(1),i(!1),t.abrupt("return",{success:!1});case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}();return{runQuery:r,running:a}},fr=function(e){var t=jr().runQuery,n=Object(g.b)(),a=Object(g.c)((function(t){return br(t,e)})),i=o.a.useState(null!==a&&void 0!==a?a:[]),r=Object(T.a)(i,2),s=r[0],c=r[1],l=o.a.useState(null!==a||void 0),d=Object(T.a)(l,2),u=d[0],b=d[1],f=function(){var a=Object(j.a)(h.a.mark((function a(i){var r,s,o,l,d,u,j;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=i.nfts,s=i.lockedTokenId,a.prev=1,!((o=r.filter((function(e){return e.collection===s}))).length>0)){a.next=25;break}return l=tt(o),a.next=7,t({query:mr,variables:{args:l}});case 7:if(d=a.sent,u=d.data,!d.success){a.next=21;break}return j=[],u.lockedTokenAttributes.forEach((function(e){var t=r.find((function(t){return t.identifier===e.identifier})),n=e.originalTokenID,a=e.originalTokenNonce,i=e.unlockEpoch,s=n.split("-")[0];t&&j.push(Object(m.a)(Object(m.a)({},t),{},{collection:"".concat(s,"-").concat(s,"123"),identifier:"".concat(s,"-").concat(s,"123-").concat(t.identifier.split("-")[2]),name:"".concat(s),ticker:"".concat(s),lockedTokenDetails:{lockedTokenCollection:t.collection,lockedTokenIdentifier:t.identifier,originalTokenID:n,originalTokenNonce:a,unlockEpoch:i}}))})),null!=e&&n(Oa({cacheKey:e,lockedTokens:j})),n(Fi({nftDetails:j})),c(j),b(!0),a.abrupt("return",{data:j,success:!0});case 21:return b(!1),a.abrupt("return",{data:[],success:!1});case 23:a.next=28;break;case 25:return c([]),b(!0),a.abrupt("return",{data:[],success:!0});case 28:a.next=35;break;case 30:return a.prev=30,a.t0=a.catch(1),console.log("decodeLockedTokens",a.t0),b(!1),a.abrupt("return",{data:[],success:!1});case 35:case"end":return a.stop()}}),a,null,[[1,30]])})));return function(e){return a.apply(this,arguments)}}();return{decodeLockedTokens:f,decodedLockedTokens:s,lockedTokensDecoded:!0===u,lockedTokensDecodedLoading:void 0===u,lockedTokensDecodedError:!1===u}},hr=Object(p.gql)(ar||(ar=Object(Bi.a)(["\n  query ($args: DecodeAttributesArgs!) {\n    lpProxyTokenAttributes(args: $args) {\n      identifier\n      attributes\n      lpTokenID\n      firstTokenID\n      firstTokenLockedNonce\n      secondTokenID\n      secondTokenLockedNonce\n    }\n  }\n"]))),pr=Se((function(e){return e.lpProxyTokensCache}),(function(e,t){return t}),(function(e,t){var n;return null!=t&&null!==(n=null===e||void 0===e?void 0:e[t])&&void 0!==n?n:[]})),xr=function(e){var t=ur(),n=Object(g.b)(),a=Object(g.c)((function(t){return pr(t,e)})),i=o.a.useState(null!==a&&void 0!==a?a:[]),r=Object(T.a)(i,2),s=r[0],c=r[1],l=o.a.useState(null!==a||void 0),d=Object(T.a)(l,2),u=d[0],b=d[1];return{decodeLpProxyTokens:function(a){var i=a.nfts,r=a.lpProxyTokenId,s=i.filter((function(e){return e.collection===r}));if(0===s.length)return c([]),void b(!0);var o=tt(s);t({query:hr,variables:{args:o}}).then((function(t){if(t&&t.data&&t.data.data){var a=[];t.data.data.lpProxyTokenAttributes.forEach((function(e){var t=i.find((function(t){return t.identifier===e.identifier}));t&&a.push(Object(m.a)(Object(m.a)({},t),{},{lpTokenID:e.lpTokenID,lpProxyTokenDetails:Object(m.a)({},e)}))})),c(a),b(!0),null!=e&&n(wa({cacheKey:e,lpProxyTokens:a}))}else b(!1)})).catch((function(e){console.log("decodeLpProxyTokens",e),b(!1)}))},decodedLpProxyTokens:s,lpProxyTokensDecoded:!0===u,lpProxyTokensDecodedLoading:void 0===u,lpProxyTokensDecodedError:!1===u}},vr=Object(p.gql)(ir||(ir=Object(Bi.a)(["\n  query ($args: DecodeAttributesArgs!) {\n    wrappedLpTokenAttributes(args: $args) {\n      identifier\n      attributes\n      lpTokenID\n      lockedAssetsNonce\n      lockedAssetsInvested\n    }\n  }\n"]))),Or=Se((function(e){return e.wrappedLpTokensCache}),(function(e,t){return t}),(function(e,t){var n;return null!=t&&null!==(n=null===e||void 0===e?void 0:e[t])&&void 0!==n?n:[]})),kr=function(e){var t=ur(),n=Object(g.b)(),a=Object(g.c)((function(t){return Or(t,e)})),i=c.useState(null!==a&&void 0!==a?a:[]),r=Object(T.a)(i,2),s=r[0],o=r[1],l=c.useState(null!==a||void 0),d=Object(T.a)(l,2),u=d[0],b=d[1];return{decodeWrappedLpTokens:function(a){var i=a.nfts,r=a.wrappedLpTokenId,s=i.filter((function(e){return e.collection===r}));if(s.length>0){var c=tt(s);t({query:vr,variables:{args:c}}).then((function(t){if(t&&t.data&&t.data.data){var a=[];t.data.data.wrappedLpTokenAttributes.forEach((function(e){var t=i.find((function(t){return t.identifier===e.identifier}));t&&a.push(Object(m.a)(Object(m.a)({},t),{},{lpTokenID:e.lpTokenID}))})),o(a),b(!0),null!=e&&n(Ei({cacheKey:e,wrappedLpTokens:a}))}else b(!1)})).catch((function(e){console.log("decodeWrappedLpTokens",e),b(!1)}))}else o([]),b(!0)},decodedWrappedLpTokens:s,tokensDecoded:!0===u,tokensDecodedLoading:void 0===u,tokensDecodedError:!1===u}},gr=Object(p.gql)(rr||(rr=Object(Bi.a)(["\n  query {\n    factory {\n      maintenance\n    }\n  }\n"]))),yr=function(){var e=Object(g.b)(),t=ur(),n=o.a.useRef(),a=function(){t({query:gr,variables:{}}).then(function(){var t=Object(j.a)(h.a.mark((function t(n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.data&&n.data.data&&(a=n.data.data,e(Un({isMaintenance:a.factory.maintenance})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("useFetchCriticalAppData",e)}))};o.a.useEffect((function(){return a(),n.current=setInterval((function(){document.hidden||a()}),12e3),function(){clearInterval(n.current)}}),[])},wr=Object(p.gql)(sr||(sr=Object(Bi.a)(['\n  query (\n    $days: Int!\n    $mexID: String!\n    $wegldID: String!\n    $offset: Int\n    $pairsLimit: Int\n  ) {\n    totalAggregatedRewards(days: $days)\n    wegldPriceUSD: getTokenPriceUSD(tokenID: $wegldID)\n    mexPriceUSD: getTokenPriceUSD(tokenID: $mexID)\n    mexSupply: totalTokenSupply(tokenID: $mexID)\n    totalLockedValueUSDFarms\n    totalValueLockedUSD\n    farms {\n      address\n      farmedToken {\n        name\n        identifier\n        decimals\n      }\n      farmToken {\n        name\n        collection\n        decimals\n      }\n      farmingToken {\n        name\n        identifier\n        decimals\n      }\n      state\n      penaltyPercent\n      minimumFarmingEpochs\n      version\n      rewardType\n      requireWhitelist\n\n      farmTokenSupply\n      farmTokenPriceUSD\n      farmedTokenPriceUSD\n      farmingTokenReserve\n      farmingTokenPriceUSD\n      perBlockRewards\n      totalValueLockedUSD\n      apr\n      aprMultiplier\n      unlockedRewardsAPR\n      lockedRewardsAPR\n      produceRewardsEnabled\n    }\n    pairs(offset: $offset, limit: $pairsLimit) {\n      address\n      firstToken {\n        name\n        identifier\n        decimals\n      }\n      secondToken {\n        name\n        identifier\n        decimals\n      }\n      firstTokenPrice\n      firstTokenPriceUSD\n      secondTokenPrice\n      secondTokenPriceUSD\n      liquidityPoolTokenPriceUSD\n      info {\n        reserves0\n        reserves1\n        totalSupply\n      }\n      state\n      lockedValueUSD\n      feesAPR\n      type\n      lockedTokensInfo {\n        lockingScAddress\n        unlockEpoch\n      }\n    }\n    stakingFarms {\n      address\n      rewardToken {\n        name\n        identifier\n        decimals\n      }\n      farmToken {\n        name\n        collection\n        decimals\n      }\n      farmingToken {\n        name\n        identifier\n        decimals\n      }\n      state\n      penaltyPercent\n      annualPercentageRewards\n      minUnboundEpochs\n      minimumFarmingEpochs\n      rewardPerShare\n      farmTokenSupply\n      perBlockRewards\n    }\n    factory {\n      totalVolumeUSD24h\n    }\n    priceDiscoveryContracts {\n      acceptedToken {\n        name\n        identifier\n        decimals\n      }\n      acceptedTokenAmount\n      acceptedTokenPrice\n      acceptedTokenPriceUSD\n      acceptedTokenRedeemBalance\n      launchedToken {\n        name\n        identifier\n        decimals\n      }\n      launchedTokenAmount\n      launchedTokenPrice\n      launchedTokenPriceUSD\n      launchedTokenRedeemBalance\n      redeemToken {\n        name\n        collection\n        decimals\n      }\n      address\n      currentPhase {\n        name\n        penaltyPercent\n      }\n      unlockEpoch\n    }\n    getFeeTokenBurned(time: "365d", tokenID: $mexID)\n    getPenaltyTokenBurned(time: "365d", tokenID: $mexID)\n  }\n']))),Tr=function(e){var t=e.mexPrice,n=e.mexSupply;return Ye(new je.a(parseFloat(n)*parseFloat(t)).toString(10),0)},Nr=function(e){var t=e.mexPrice,n=e.bNStringRewards,a=e.denomination,i=He({amount:Ce(n)?n:"0",denomination:a});return Ye(new je.a(parseFloat(i)*parseFloat(t)).toString(10),0)},Sr="IDMIDDLE",Ar="USDMIDDLE",Fr=function(){var e=jr().runQuery;return function(){var t=Object(j.a)(h.a.mark((function t(n){var a,i,r,s,c,o,l,d,u,m,b;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],i=Me({pairs:n}).options.map((function(e){return e.value})),r="".concat(i.map((function(e){return"$".concat(e.replace("-",Sr),": String!")}))),s="".concat(i.map((function(e){return"".concat(e.replace("-",Ar),": getTokenPriceUSD(tokenID: $").concat(e.replace("-",Sr),")")}))),c=Object(p.gql)(String.raw(cr||(cr=Object(Bi.a)(["\n      query (\n        ","\n      ) {\n        ","\n      }\n    "])),r,s)),o={},i.forEach((function(e){o[e.replace("-",Sr)]=e})),t.next=9,e({query:c,variables:o});case 9:return l=t.sent,d=l.data,(u=l.success)&&(Object.keys(d).forEach((function(e){a.push({identifier:e.replace(Ar,"-"),price:new je.a(d[e]).toString(10)})})),(m=a.find((function(e){return e.identifier===$})))&&a.push({identifier:U,price:m.price}),(b=a.find((function(e){return e.identifier===_})))&&a.push({identifier:V,price:b.price})),t.abrupt("return",u?a:void 0);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Pr=function(){var e=Object(g.b)(),t=ur(),n=c.useRef(),a=Fr(),i=function(){t({query:wr,variables:{mexID:_,wegldID:$,days:7,offset:0,pairsLimit:G,egldMexPairAddress:ae}}).then(function(){var t=Object(j.a)(h.a.mark((function t(n){var i,r,s,c,o,l,d,u,m,b,j,f,p,x,v,O,k;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.data||!n.data.data){t.next=21;break}return i=n.data.data,r=Ye(new je.a(i.totalLockedValueUSDFarms).toString(10),0),s=Ye(new je.a(i.totalValueLockedUSD).toString(10),0),c=Ye(new je.a(i.factory.totalVolumeUSD24h).toString(10),0),o=Ye(new je.a(i.mexPriceUSD).toString(10),6),l=i.pairs.find((function(e){return e.address===ae})),d=l?Ye(l.secondTokenPrice,18):"...",u=Ye(new je.a(i.wegldPriceUSD).toString(10)),m=Ye(new je.a(i.mexSupply).toString(10),0),b=Tr({mexPrice:i.mexPriceUSD,mexSupply:i.mexSupply}),j=Nr({mexPrice:i.mexPriceUSD,bNStringRewards:i.totalAggregatedRewards,denomination:M}),f=i.farms.filter((function(e){return"v1.3"===e.version})).filter((function(e){return"customRewards"!==e.rewardType})).map((function(e){return e.perBlockRewards})).reduce((function(e,t){var n=new je.a(e),a=new je.a(t);return n.plus(a).toString(10)}),"0"),p=new je.a(i.getFeeTokenBurned),x=new je.a(i.getPenaltyTokenBurned),v=p.plus(x),O=He({amount:v.toString(10),denomination:M}),t.next=19,a(i.pairs);case 19:(k=t.sent)&&e(ii({farmsRate:i.farms,stakingFarmsRate:i.stakingFarms,pairsRate:i.pairs,priceDiscoveryContractsRate:i.priceDiscoveryContracts,totalDepositedInFarms:r,totalDepositedInExchange:s,mexSupply:m,mexPrice:o,mexBurned:O,egldMexRate:d,totalVolumeUSD24h:c,egldPrice:u,marketCap:b,aggregatedRewards:j,tokenUSDPrices:k,currentEmissions:He({amount:f,denomination:M,decimals:0})}));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("useFetchStatistics",e)}))};c.useEffect((function(){return i(),n.current=setInterval((function(){document.hidden||i()}),6e3),function(){clearInterval(n.current)}}),[])},Dr=function(){var e=Object(g.b)(),t=or().getStats;o.a.useEffect((function(){t().then((function(t){var n=t.data;if(t.success){var a=n,i=a.refreshRate/1e3,r=i*(a.roundsPerEpoch-a.roundsPassed),s=he()().utc().add(r,"seconds").format();e(qn({epoch:a.epoch,nextEpochDate:s,epochDurationSec:i*a.roundsPerEpoch,refreshRate:a.refreshRate,roundsPerEpoch:a.roundsPerEpoch}))}}))}),[])},Rr=function(){var e=c.useState(),t=Object(T.a)(e,2),n=t[0],a=t[1],i=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er((function(){return Qi.a.get("https://wallet-connect.elrond.com/onlinews",{timeout:B})}));case 2:t=e.sent,n=t.data,t.success&&(i=n.online).length>0?a(i[Math.floor(Math.random()*i.length)]):r();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er((function(){return Qi.a.get("https://testnet-wallet-connect.elrond.com/onlinews",{timeout:B})}));case 2:t=e.sent,n=t.data,t.success&&(i=n.online).length>0?a(i[Math.floor(Math.random()*i.length)]):a("");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.useEffect((function(){void 0===n&&i()}),[]),n},Er=function(){var e=Object(g.b)(),t=$t(),n=Bt(),a=Mh().address;c.useEffect((function(){n&&t&&Object(O.f)(n).then((function(t){e(ea({balance:t.balance.toString(),nonce:t.nonce.valueOf()}))})).catch((function(){console.log("Unable to get impersonated account")}))}),[a,n,t])},Lr=Se((function(e){return e.nftsCache}),(function(e,t){return t}),(function(e,t){var n;return null!=t&&null!==(n=null===e||void 0===e?void 0:e[t])&&void 0!==n?n:null})),Cr=function(e){var t=Object(O.p)().isLoggedIn,n=or().getUserNfts,a=Object(g.b)(),i=Object(g.c)((function(t){return Lr(t,e)})),r=o.a.useState(null!==i&&void 0!==i?i:[]),s=Object(T.a)(r,2),c=s[0],l=s[1],d=o.a.useState(null!==i||void 0),u=Object(T.a)(d,2),m=u[0],b=u[1],f=function(){var i=Object(j.a)(h.a.mark((function i(r){var s,c,o;return h.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!t||!r){i.next=11;break}return i.next=4,n(r);case 4:return s=i.sent,c=s.data,o=s.success,l(o?c:[]),b(o),null!=e&&a(Ma({cacheKey:e,nfts:c})),i.abrupt("return",{data:c,success:o});case 11:return t||(l([]),b(!0)),i.abrupt("return",{data:[],success:!0});case 15:return i.prev=15,i.t0=i.catch(0),b(!1),i.abrupt("return",{data:[],success:!1});case 19:case"end":return i.stop()}}),i,null,[[0,15]])})));return function(e){return i.apply(this,arguments)}}();return{fetchNfts:f,nfts:c,nftsLoading:void 0===m,nftsFetched:!0===m,nftsError:!1===m}},Ir=Se((function(e){return e.tokensCache}),(function(e,t){return t}),(function(e,t){var n;return null!=t&&null!==(n=null===e||void 0===e?void 0:e[t])&&void 0!==n?n:[]})),qr=function(e){var t=Object(O.p)().isLoggedIn,n=or().getUserTokens,a=Object(g.c)((function(t){return Ir(t,e)})),i=Object(g.b)(),r=c.useState(null!==a&&void 0!==a?a:[]),s=Object(T.a)(r,2),o=s[0],l=s[1],d=c.useState(null!==a||void 0),u=Object(T.a)(d,2),m=u[0],b=u[1],f=function(){var a=Object(j.a)(h.a.mark((function a(r){var s,c,o,d;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!t||!r){a.next=11;break}return s=r.filter((function(e){return e!==U})),a.next=5,n({identifiers:s});case 5:c=a.sent,o=c.data,d=c.success,l(d?o:[]),b(d),null!=e&&i(wi({cacheKey:e,tokens:o}));case 11:t||(l([]),b(!0)),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),b(!1);case 17:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}();return{fetchTokens:f,tokens:o,tokensFetched:!0===m,tokensLoading:void 0===m,tokensError:!1===m}},Mr=function(e){var t=e.time,n=e.metric,a=e.series,i=e.contractRate,r=e.hasContractLatestEntry,s=void 0!==r&&r,c=ur(),l=o.a.useState(),d=Object(T.a)(l,2),u=d[0],m=d[1],b=o.a.useState(),j=Object(T.a)(b,2),f=j[0],h=j[1],p=o.a.useState(es.launchedTokenPrice),x=Object(T.a)(p,2),v=x[0],O=x[1],k=o.a.useState(Jr.all),g=Object(T.a)(k,2),y=g[0],w=g[1],N=o.a.useState(""),S=Object(T.a)(N,2),A=S[0],F=S[1];return o.a.useEffect((function(){var e="";t===Jr.all&&(e="30s"),c({query:e?Zi:Ki,variables:{time:t,metric:n,series:a,start:v!==n||y!==t?"":A,bin:e}}).then((function(a){if(a.data&&a.data.data){var r,c,o,l,d=e?null===a||void 0===a||null===(r=a.data)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.latestBinnedHistoricData:null===a||void 0===a||null===(o=a.data)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.latestHistoricData;if(d){if(d.length>0){if(s&&i&&d.length>1&&(n===es.launchedTokenPrice&&(d[d.length-1].value=new je.a(i.launchedTokenPrice).toFixed()),n===es.launchedTokenPriceUSD&&(d[d.length-1].value=new je.a(i.launchedTokenPriceUSD).toString(10))),u&&(null===u||void 0===u?void 0:u.length)>0&&v===n&&y===t){var b=d.filter((function(e){return e.timestamp>u[u.length-1].timestamp&&"0"!==e.value}));b.length>0&&m([].concat(Object(ke.a)(u),Object(ke.a)(b)))}else{var j=d.filter((function(e){return"0"!==e.value}));m(j)}var f=he.a.utc(d[d.length-1].timestamp);F(f.format("X"))}else u||m(d);h(!0)}else h(!1)}else h(!1)})).catch((function(e){console.log("Launch useFetchChartData",e),h(!1)})),v!==n&&O(n),y!==t&&w(t)}),[t,n,a,i]),{chartData:u,chartDataFetched:!0===f,chartDataLoading:void 0===f,chartDataError:!1===f}},Br=function(e){return e.statistics},Ur=Se(Br,(function(e){return e.egldPrice})),$r=Se(Br,(function(e){return e.tokenUSDPrices})),_r=function(e){var t=e.value,n=e.usd,a=void 0===n?"":n,i=e.decimals,r=void 0===i?4:i,s=e.compact,c=void 0!==s&&s;if(t){var o,l=new je.a(t),d=l.toNumber()>1e3?0:r,u=a?l.times(new je.a(a)).toFormat(r):l.toFormat(r),m=["k","m","b","t"],b=c?function(e){for(var n=new je.a(e).toNumber(),a=m.length-1;a>=0;a--)if(n<=-(o=Math.pow(1e3,a+1))||n>=o){var i=n/o;return(i>9?i:i.toFixed(1))+m[a]}return t}(u):Ye(u,d),j="0"===t.toString()?"= $":"\u2248 $";return"".concat(a?j:"").concat(b)}return""},Vr=function(e){var t=e.customProps,n=e.chartData,a=e.chartElement,i=e.usd,r=e.metric;return{type:"lineWithVertical",data:{labels:n.map((function(e){var t=e.timestamp;return he.a.utc(t)})),datasets:[{borderWidth:2,backgroundColor:Hi({element:a,colorStops:[{hex:"#274AF5",alpha:.3,colorStop:0},{hex:"#274AF5",alpha:.1,colorStop:.4},{hex:"#274AF5",alpha:0,colorStop:.45},{hex:"#274AF5",alpha:0,colorStop:1}]}),hoverBackgroundColor:"#fff",borderColor:"#274AF5",data:n.map((function(e){return e.value}))}]},options:{aspectRatio:3,responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:.18},point:{radius:0,hitRadius:5,hoverRadius:5,hoverBorderWidth:2}},animation:{duration:0},hover:{intersect:!1},tooltips:{mode:"index",intersect:!1,backgroundColor:t.cardBgColor,titleAlign:"center",titleFontColor:t.bodyColor,titleFontSize:14,titleFontStyle:"400",bodyAlign:"center",bodyFontColor:t.secondaryColor,bodyFontSize:11,bodyFontStyle:"300",footerAlign:"center",footerFontColor:t.secondaryColor,footerFontSize:9,footerFontStyle:"300",borderColor:t.borderColor,borderWidth:1,xPadding:15,yPadding:15,custom:function(e){e&&(e.displayColors=!1)},callbacks:{title:function(e){return"".concat(r===es.launchedTokenPriceUSD?"$":"").concat(_r({value:e[0].yLabel})," ").concat(r===es.launchedTokenPrice?U:"")},footer:function(e){return"".concat(e[0].xLabel.format("DD MMM YYYY, hh:mm A UTC"))},label:function(e){return r===es.launchedTokenPrice?_r({value:e.yLabel,usd:i,decimals:4}):""}}},legend:{display:!1},scales:{xAxes:[{afterTickToLabelConversion:function(e){e.ticks&&e.ticks.length>2&&(e.ticks[e.ticks.length-1]=null,e.ticks[e.ticks.length-2]=null)},ticks:{fontSize:13,maxRotation:0,autoSkip:!0,fontColor:t.secondaryColor,callback:function(e,t){return 0!==t?e.format("HH:mm"):null}},gridLines:{display:!1,drawBorder:!1,zeroLineColor:"transparent"}}],yAxes:[{gridLines:{display:!1},ticks:{display:!1,mirror:!0,beginAtZero:!0}}]}},plugins:[{beforeDraw:function(e){var t=e.chart.width;e.scales["x-axis-0"].options.ticks.fontSize=t<500?8:10,e.scales["x-axis-0"].options.ticks.maxRotation=t<500?45:0}}]}},Wr=function(e){var t=e.data,n=e.setTime,a=e.time,i=e.setMetric,r=e.metric,s=e.previewDecimals,o=void 0===s?4:s,l=e.showPercentage,d=void 0===l||l,u=e.showFilters,m=void 0===u||u,b=e.showUsdValue,j=void 0===b||b,f=c.useRef(null),h=c.useRef(),p=c.useState(),x=Object(T.a)(p,2),v=x[0],O=x[1],k=c.useState(0),y=Object(T.a)(k,2),w=y[0],N=y[1],S=c.useState(),A=Object(T.a)(S,2),F=A[0],P=A[1],D=c.useState(),R=Object(T.a)(D,2),E=R[0],L=R[1],C=window.getComputedStyle(document.documentElement),I={primaryColor:C.getPropertyValue("--primary"),secondaryColor:C.getPropertyValue("--chart-secondary"),gradientColor:C.getPropertyValue("--chart-shadow"),borderColor:C.getPropertyValue("--border-color"),cardBgColor:C.getPropertyValue("--card-bg"),bodyColor:C.getPropertyValue("--dark")},q=Object(g.c)(Ur),M=F?Ye(new je.a(F.value).toString(10),o):"...";return c.useEffect((function(){t.length>1&&h.current&&(L(rs(t,a)),function(e,n){if(h){e&&e.destroy();var i=h.current.getContext("2d"),s=Vr({customProps:I,chartData:t,chartElement:i,usd:q,metric:r,time:a});Mi.a.defaults.lineWithVertical=Mi.a.defaults.line,Mi.a.controllers.lineWithVertical=Mi.a.controllers.line.extend({draw:function(e){Mi.a.controllers.line.prototype.draw.call(this,e);var t=this.chart.ctx,a=this.chart.legend.bottom,i=this.chart.chartArea.bottom;if(this.chart.tooltip._active&&this.chart.tooltip._active.length){var r=this.chart.tooltip._active[0],s=r.tooltipPosition().x;void 0!==r._index&&N(r._index),t.save(),t.beginPath(),t.moveTo(s,a),t.lineTo(s,i),t.lineWidth=.8,t.strokeStyle=I.primaryColor,t.setLineDash([4,4]),t.stroke(),t.restore()}else N(n.length-1)}});var c=new Mi.a(h.current,s);O(c)}}(v,t))}),[t,h]),c.useEffect((function(){t.length&&P(t[w])}),[t,w]),Object(pt.jsxs)("div",{className:"chart",children:[Object(pt.jsxs)("div",{className:"pl-4 pt-4 mb-2 d-flex flex-wrap align-items-start justify-content-sm-between",children:[Object(pt.jsxs)("div",{className:"metrics-holder",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsxs)("h5",{className:"mb-0 font-weight-500",children:[r===es.launchedTokenPriceUSD?"$":"",M," ",r===es.launchedTokenPrice?U:""]}),d&&void 0!==E&&Object(pt.jsx)("span",{className:"percentage rounded ml-2 percentage-".concat(E>0?"increase":0===E?"fixed":"decrease"),children:Object(pt.jsxs)("span",{children:[E>0?"+":E<0?"-":"",0!==Math.abs(E)?"".concat(Math.abs(E).toFixed(2),"%"):""]})})]}),Object(pt.jsxs)("div",{className:"text-secondary small mt-1",children:[Object(pt.jsx)("div",{children:F?he()(F.timestamp).format("DD MMM YYYY, hh:mm A UTC"):"..."}),Object(pt.jsx)("div",{className:"mb-2",children:F&&r!==es.launchedTokenPriceUSD&&j?Object(pt.jsx)(Xb,{amount:F.value,usd:parseFloat(q),decimals:o,animated:!0}):Object(pt.jsx)("span",{className:"d-inline-flex",children:" "})})]})]}),m&&t.length>0&&Object(pt.jsxs)("div",{className:"pr-3 timeline-holder",children:[Object(pt.jsxs)("div",{className:"btn-group mb-2",role:"group","aria-label":"Change timeline",children:[Object(pt.jsx)("button",{type:"button",onClick:function(){n(Jr.hour)},className:"btn btn-secondary px-2 py-1 py-sm-2 px-sm-3 small ".concat(a===Jr.hour?"active":""),children:"1h"}),Object(pt.jsx)("button",{type:"button",onClick:function(){n(Jr.all)},className:"btn btn-secondary px-2 py-1 py-sm-2 px-sm-3 small ".concat(a===Jr.all?"active":""),children:"All"})]}),Object(pt.jsxs)("div",{className:"btn-group pl-3 ml-3 mb-2 border-left",role:"group","aria-label":"Change timeline",children:[Object(pt.jsx)("button",{type:"button",onClick:function(){i(es.launchedTokenPrice)},className:"btn btn-secondary px-2 py-1 py-sm-2 px-sm-3 small ".concat(r===es.launchedTokenPrice?"active":""),children:U}),Object(pt.jsx)("button",{type:"button",onClick:function(){i(es.launchedTokenPriceUSD)},className:"btn btn-secondary px-2 py-1 py-sm-2 px-sm-3 small ".concat(r===es.launchedTokenPriceUSD?"active":""),children:"USD"})]})]})]}),Object(pt.jsx)("div",{ref:f,className:"chart-holder",children:t.length>1?Object(pt.jsx)("canvas",{width:"288",height:"220",ref:h}):Object(pt.jsx)(Up,{icon:Gi.faChartArea,iconClass:"text-primary",iconBgClass:"p-4 rounded-bg-circle big",iconSize:"5x",title:"Gathering Chart data"})})]})},zr=function(e){var t=e.token,n=e.price,a=e.decimals,i=void 0===a?4:a,r=new je.a(n);return Object(pt.jsxs)("div",{className:"d-flex flex-wrap align-items-center justify-content-between small mb-2",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mr-3",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:lt(t.identifier)})}),Object(pt.jsx)("small",{children:Object(pt.jsx)(Rt,{token:lt(t.identifier)})})]}),Object(pt.jsxs)("div",{className:"mb-0 font-weight-500",children:["$",Object(pt.jsx)(sp,{valueStr:Ye(r.toFormat(10),i)})]})]})},Hr=n(304),Yr=function(e){var t=e.contractRate,n=e.decimals,a=void 0===n?4:n,i=null!==t&&void 0!==t&&t.launchedToken.identifier?t.launchedToken.identifier:"...",r=null!==t&&void 0!==t&&t.acceptedToken.identifier?t.acceptedToken.identifier:"...",s=null!==t&&void 0!==t&&t.launchedTokenPrice?Ye(t.launchedTokenPrice,a):"...",c=o.a.useState(i),l=Object(T.a)(c,2),d=l[0],u=l[1],m=o.a.useState(r),b=Object(T.a)(m,2),j=b[0],f=b[1],h=o.a.useState(s),p=Object(T.a)(h,2),x=p[0],v=p[1],O=function(e,n){if(d&&j&&t){var i=t.acceptedToken.identifier===e?t.acceptedTokenPrice:t.launchedTokenPrice;u(e),f(n),v(Ye(i,a))}};return o.a.useEffect((function(){if(t){var e=t.acceptedToken.identifier===d?null===t||void 0===t?void 0:t.acceptedTokenPrice:null===t||void 0===t?void 0:t.launchedTokenPrice;v(Ye(e,a)),O(d,j)}}),[t,d,j]),Object(pt.jsx)("div",{className:"d-flex flex-wrap align-items-center justify-content-between mb-2",children:Object(pt.jsx)("div",{className:"info-row",children:Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("button",{type:"button",className:"btn btn-primary-opaque btn-circle-sm",onClick:function(e){e.preventDefault(),O(j,d)},children:Object(pt.jsx)(F.a,{icon:Hr.faExchangeAlt,size:"xs"})}),Object(pt.jsxs)("div",{className:"ml-2 small",children:[Object(pt.jsx)("span",{className:"font-weight-500",children:"1"})," ",Object(pt.jsxs)("small",{children:[d?Object(pt.jsx)(Rt,{token:lt(d)}):Object(pt.jsx)(pt.Fragment,{children:"..."})," ","\u2243"," "]}),Object(pt.jsx)("span",{className:"font-weight-500",children:x})," ",Object(pt.jsx)("small",{children:j?Object(pt.jsx)(Rt,{token:lt(j)}):Object(pt.jsx)(pt.Fragment,{children:"..."})})]})]})})})},Gr=function(e){var t,n=e.token,a=e.amount,i=e.decimals,r=void 0===i?4:i,s=new je.a(null!==a&&void 0!==a?a:0),c=He({amount:s.toString(10),denomination:null!==(t=n.decimals)&&void 0!==t?t:18,decimals:r,addCommas:!0});return Object(pt.jsxs)("div",{className:"d-flex flex-wrap align-items-center justify-content-between small mb-2",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mr-3",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:lt(n.identifier)})}),Object(pt.jsx)("small",{children:Object(pt.jsx)(Rt,{token:lt(n.identifier)})})]}),Object(pt.jsx)("div",{className:"mb-0 font-weight-500",children:Object(pt.jsx)(sp,{valueStr:c})})]})},Zr=n(647),Kr=function(e){var t=e.amount,n=e.usdValue,a=e.denomination,i=void 0===a?M:a,r=e.decimals,s=void 0===r?4:r,c=new je.a(null!==t&&void 0!==t?t:0),o=new je.a(null!==n&&void 0!==n?n:0),l=He({amount:c.toString(10),denomination:i,decimals:s});return new je.a(l).times(o)},Xr=function(e){var t=e.contractRate,n=e.decimals,a=void 0===n?4:n,i=new je.a(Kr({amount:t.acceptedTokenAmount,usdValue:t.acceptedTokenPriceUSD,denomination:t.acceptedToken.decimals,decimals:a})),r=new je.a(Kr({amount:t.launchedTokenAmount,usdValue:t.launchedTokenPriceUSD,denomination:t.launchedToken.decimals,decimals:a})),s=i.plus(r);return Object(pt.jsxs)("div",{className:"d-flex flex-wrap align-items-center justify-content-between small",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mr-3",children:[Object(pt.jsx)("div",{className:"info-row",children:Object(pt.jsx)("div",{className:"d-flex mr-2 info-icon align-items-center justify-content-center ",children:Object(pt.jsx)(F.a,{icon:Zr.faDollarSign,className:"text-secondary",size:"xs"})})}),Object(pt.jsx)("small",{children:"USD"})]}),Object(pt.jsxs)("div",{className:"mb-0 font-weight-500",children:["$",Object(pt.jsx)(sp,{valueStr:s.toFormat(2)})]})]})},Qr=function(e){Object(jt.a)(n,e);var t=Object(ft.a)(n);function n(){return Object(mt.a)(this,n),t.apply(this,arguments)}return Object(bt.a)(n,[{key:"render",value:function(){return null}}]),n}(c.Component);Qr.Price=zr,Qr.Ratio=Yr,Qr.Token=Gr,Qr.Total=Xr;var Jr,es,ts=function(e){var t=e.contractRate,n=e.decimals;return t?Object(pt.jsx)("div",{className:"col-12 col-lg-6 d-flex px-lg-2 mb-3",children:Object(pt.jsx)("div",{className:"info-card card info-card-sm p-3 d-flex align-items-start justify-content-center flex-grow-1",children:Object(pt.jsxs)("div",{className:"d-flex flex-column w-100 text-left",children:[Object(pt.jsx)("div",{className:"small text-secondary mb-2",children:"Ratio:"}),Object(pt.jsx)(Qr.Ratio,{contractRate:t,decimals:4}),Object(pt.jsx)("div",{className:"small text-secondary mb-2",children:"Total deposits:"}),Object(pt.jsx)(Qr.Token,{token:t.launchedToken,amount:t.launchedTokenAmount,decimals:n}),Object(pt.jsx)(Qr.Token,{token:t.acceptedToken,amount:t.acceptedTokenAmount,decimals:n})]})})}):Object(pt.jsx)(pt.Fragment,{})},ns=function(e){var t=e.priceDiscoveryContract,n=e.decimals,a=void 0===n?4:n,i=Object(g.c)(Br).priceDiscoveryContractsRate,r=t.address,s=Je({priceDiscoveryContractsRate:i,contractAddress:r}),c=null===s||void 0===s?void 0:s.currentPhase,o=null!==c&&void 0!==c&&c.penaltyPercent?Ye((100*c.penaltyPercent).toString(),a):0;return Object(pt.jsx)("div",{className:"info-cards mx-3 mx-lg-2 mt-3",children:Object(pt.jsxs)("div",{className:"row no-gutters",children:[Object(pt.jsx)(ts,{contractRate:s,decimals:a}),Object(pt.jsx)("div",{className:"col-12 col-xl-6 px-lg-2 mb-3",children:Object(pt.jsx)(Ap,{size:"sm",title:"Withdrawal Penalty:",value:Object(pt.jsxs)("span",{className:"font-weight-500",children:[Object(pt.jsx)(sp,{valueStr:o.toString()}),"%"]})})})]})})};!function(e){e.halfHour="30m",e.hour="1h",e.day="24h",e.all="25h"}(Jr||(Jr={})),function(e){e.launchedTokenPrice="launchedTokenPrice",e.launchedTokenPriceUSD="launchedTokenPriceUSD"}(es||(es={}));var as,is=function(e){var t=e.priceDiscoveryContract,n=Object(c.useRef)(null),a=Object(c.useState)(Jr.all),i=Object(T.a)(a,2),r=i[0],s=i[1],o=Object(c.useState)(es.launchedTokenPriceUSD),l=Object(T.a)(o,2),d=l[0],u=l[1],m=Object(g.c)(Br).priceDiscoveryContractsRate,b=t.address,j=Je({priceDiscoveryContractsRate:m,contractAddress:b}),f=Mr({time:r,metric:d,contractRate:j,series:b,hasContractLatestEntry:!1}),h=f.chartData,p=f.chartDataFetched,x=f.chartDataLoading,v=f.chartDataError;return Object(pt.jsxs)("div",{className:"card mb-spacer d-flex flex-grow-1",ref:n,children:[x&&!v&&Object(pt.jsx)($p,{}),v&&Object(pt.jsx)(Up,{icon:Gi.faChartArea,title:"Unable to load Price Data"}),p&&h&&Object(pt.jsx)(Wr,{data:h,metric:d,time:r,setMetric:u,setTime:s,showPercentage:!1,showUsdValue:!1}),Object(pt.jsx)(ns,{priceDiscoveryContract:t,decimals:2})]})},rs=function(e,t){var n=0;if(e.length){var a=e[0];if(t===as.day&&25===e.length){var i=Object(Yi.a)(e);i[0];a=i.slice(1)[0]}var r,s=e.length-2,c=e.length-1,o=t;if(Object.values(Jr).includes(o))s=Number(null===(r=e[0])||void 0===r?void 0:r.value)>0?0:1,c=e.length-1;var l=e[s],d=e[c];if(l&&d&&a&&l.value&&d.value&&a.value){var u=t===as.day?a:l;n=(Number(d.value)-Number(u.value))/Number(u.value)*100}}return n},ss=function(e){var t,n=e.metric,a=e.values,i=e.identifier;if(a){var r=Object.keys(a).filter((function(e){return e.includes(n)||i&&i.includes(e)})).reduce((function(e,t){return e[t]=a[t],e}),{}),s=Object.keys(r).reduce((function(e,t){return[].concat(Object(ke.a)(e),Object(ke.a)(r[t]))}),[]).reduce((t=new Map,function(e,n){return t.set(n.timestamp,t.get(n.timestamp)||e[e.push({timestamp:n.timestamp,value:0})-1]),t.get(n.timestamp).value+=Number(n.value),e}),[]);return s.sort((function(e,t){return he()(t.timestamp).isBefore(e.timestamp)?1:-1})),s}return[]},cs=function(e){var t=e.data,n=e.timeframe,a=t.map((function(e){var t=e;return t.value=Number(t.value)<0?"0":t.value,t}));switch(n){case as.day:if(25===a.length){var i=Object(Yi.a)(a);i[0];return i.slice(1)}return a;case as.week:return a.slice(a.length-Math.min(a.length,7),a.length);case as.month:return a.slice(a.length-Math.min(a.length,30),a.length);case as.all:default:return a}},os=function(e){var t=e.metric,n=e.dayData,a=e.commonData,i=e.identifier;if(n)try{var r=Object(ke.a)(n);if(Object(ge.isArray)(i)){var s=ss({metric:t,values:a.historicPools,identifier:i});s&&(r[r.length-1].value=s[s.length-1].value)}else{var c="".concat(i.replace("-",""),"_").concat(t),o=a.historicTokens[c];o&&(r[r.length-1].value=o[o.length-1].value)}return r}catch(l){return n}return[]};!function(e){e.day="day",e.week="week",e.month="month",e.all="all"}(as||(as={}));var ls,ds,us,ms,bs=function(e){var t=e.title,n=e.error,a=e.type,i=e.metric,r=e.commonData,s=e.previewDecimals,o=e.tabKey,l=e.specificToken,d=e.initialTimeframe,u=e.showPercentage,b=void 0===u||u,j=e.sumPreviewData,f=e.availableTimeframes,h=void 0===f?Object.values(as):f,p=c.useRef(null),x=c.useRef(),v=c.useState(),O=Object(T.a)(v,2),k=O[0],g=O[1],y=c.useState(),w=Object(T.a)(y,2),N=w[0],S=w[1],A=c.useState(),F=Object(T.a)(A,2),P=F[0],D=F[1],R=c.useState(),E=Object(T.a)(R,2),L=E[0],C=E[1],I=c.useState(),q=Object(T.a)(I,2),M=q[0],B=q[1],U=c.useState(d||as.week),$=Object(T.a)(U,2),_=$[0],V=$[1],W=c.useState(),z=Object(T.a)(W,2),H=z[0],Y=z[1],G=Ui(l?r.tokenList:r.contracts),Z=G.getLatestCompleteValues,K=G.latestCompleteData,X=G.latestCompleteError,Q=$i(l?r.tokenList:r.contracts),J=Q.getSumCompleteValues,ee=Q.sumCompleteData,te=Q.sumCompleteError,ne=r.historicPools,ae=r.historicTokens,ie=window.getComputedStyle(document.documentElement),re={secondaryColor:ie.getPropertyValue("--chart-secondary"),gradientColor:ie.getPropertyValue("--chart-shadow")};c.useEffect((function(){"volumeUSD"===i?J({variables:{metric:i}}):Z({variables:{metric:i}})}),[]),c.useEffect((function(){if(K&&ne&&[as.week,as.month,as.all].includes(_)){var e=ss({metric:i,values:K,identifier:null!==l&&void 0!==l?l:r.contracts}),t=os({metric:i,dayData:e,commonData:r,identifier:null!==l&&void 0!==l?l:r.contracts});D(t)}}),[K,ne,_]),c.useEffect((function(){if("volumeUSD"===i&&ee&&[as.week,as.month,as.all].includes(_)){var e=ss({metric:i,values:ee,identifier:null!==l&&void 0!==l?l:r.contracts});D(e)}}),[ee,_]),c.useEffect((function(){if(!l){var e=ss({metric:i,values:ne,identifier:null!==l&&void 0!==l?l:r.contracts});Y(rs(e,as.day)),_===as.day&&D(e)}}),[ne,_]),c.useEffect((function(){if(l){var e="".concat(l,"_").concat(i),t=ss({metric:e,values:ae,identifier:e});Y(rs(t,as.day)),_===as.day&&D(t)}}),[ae,_]),c.useEffect((function(){if(P){var e=cs({data:P,timeframe:_});e.length&&C(e),function(e,t){if(x){e&&e.destroy();var n=x.current.getContext("2d"),i={type:"line"===a?"lineWithVertical":a,data:{labels:t.map((function(e){var t=e.timestamp;return he()(t).format(_===as.day?"HH":"DD")})),datasets:[{borderWidth:2,backgroundColor:Hi("line"===a?{element:n,colorStops:[{hex:"#274AF5",alpha:.3,colorStop:0},{hex:"#274AF5",alpha:.1,colorStop:.4},{hex:"#274AF5",alpha:0,colorStop:1}]}:{element:n,colorStops:[{hex:"#274AF5",alpha:.8,colorStop:0},{hex:"#274AF5",alpha:.1,colorStop:.8},{hex:"#274AF5",alpha:0,colorStop:1}]}),borderColor:"line"===a?"#274AF5":"transparent",data:t.map((function(e){return e.value}))}]},options:Wi,plugins:[{beforeDraw:function(e){var t=e.chart.width;e.scales["x-axis-0"].options.ticks.fontSize=t<500?8:10,e.scales["x-axis-0"].options.ticks.maxRotation=t<500?45:0}}]};Mi.a.defaults.lineWithVertical=Mi.a.defaults.line,Mi.a.controllers.lineWithVertical=Mi.a.controllers.line.extend({draw:function(e){Mi.a.controllers.line.prototype.draw.call(this,e);var n=this.chart.ctx,a=this.chart.legend.bottom,i=this.chart.chartArea.bottom,r=this.chart.chartArea.right;if(this.chart.tooltip._active&&this.chart.tooltip._active.length){var s=this.chart.tooltip._active[0],c=s.tooltipPosition().x;void 0!==s._index&&S(s._index),n.save(),n.beginPath(),n.moveTo(c,a),n.lineTo(c,i),n.lineWidth=.8,n.strokeStyle=re.secondaryColor,n.stroke(),n.restore()}else S(t.length-1);n.save(),n.beginPath(),n.moveTo(10,i),n.lineTo(r,i),n.lineWidth=.8,n.strokeStyle=re.secondaryColor,n.stroke(),n.restore()}}),Mi.a.controllers.bar=Mi.a.controllers.bar.extend({draw:function(e){Mi.a.controllers.line.prototype.draw.call(this,e);var n=this.chart.ctx,a=this.chart.chartArea.bottom,i=this.chart.chartArea.right;if(this.chart.tooltip._active&&this.chart.tooltip._active.length){var r=this.chart.tooltip._active[0];void 0!==r._index&&S(r._index)}else if(S(t.length-1),j){var s=t.reduce((function(e,t){return e+t.value}),0),c=Object(m.a)({},t[t.length-1]);c.value=s,B(c)}n.save(),n.beginPath(),n.moveTo(6,a),n.lineTo(i,a),n.lineWidth=.8,n.strokeStyle=re.secondaryColor,n.stroke(),n.restore()}});var r=new Mi.a(x.current,i);g(r)}}(k,e)}}),[_,P,o]),c.useEffect((function(){if(N&&L){var e=cs({data:L,timeframe:_});B(e[N])}}),[N,L,_]);var se=X||te;return Object(pt.jsxs)("div",{className:"analytics-chart card",children:[Object(pt.jsxs)("div",{className:"card-title d-flex align-items-center justify-content-between p-3 mb-0 border-bottom",children:[t?Object(pt.jsx)("div",{children:t}):null,Object(pt.jsx)("div",{children:Object(pt.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Change timeline",children:[h.includes(as.day)&&Object(pt.jsx)("button",{type:"button",onClick:function(){V(as.day)},className:"btn py-2 ".concat(_===as.day?"btn-primary":"btn-secondary"),children:"Day"}),h.includes(as.week)&&Object(pt.jsx)("button",{type:"button",onClick:function(){V(as.week)},className:"btn py-2 ".concat(_===as.week?"btn-primary":"btn-secondary"),children:"Week"}),h.includes(as.month)&&Object(pt.jsx)("button",{type:"button",onClick:function(){V(as.month)},className:"btn py-2 ".concat(_===as.month?"btn-primary":"btn-secondary"),children:"Month"}),h.includes(as.all)&&Object(pt.jsx)("button",{type:"button",onClick:function(){V(as.all)},className:"btn py-2 ".concat(_===as.all?"btn-primary":"btn-secondary"),children:"All"})]})})]}),Object(pt.jsxs)("div",{className:"card-body p-3",children:[Object(pt.jsxs)("div",{className:"ml-3",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("h4",{className:"mb-0",children:M?"$".concat(Number(M.value).toLocaleString("en",{maximumFractionDigits:s||0,minimumFractionDigits:s||0})):"..."}),b&&void 0!==H&&Object(pt.jsxs)("span",{className:"percentage rounded ml-2 percentage-".concat(H>0?"increase":0===H?"fixed":"decrease"),children:[Object(pt.jsxs)("span",{children:[H>0?"+":H<0?"-":"",0!==Math.abs(H)?"".concat(Math.abs(H).toFixed(2),"%"):""]}),"\xa0"]})]}),Object(pt.jsx)("small",{className:"text-secondary",children:M?"".concat(he()(M.timestamp).format(_===as.day?"DD MMM, YYYY HH:mm UTC":"DD MMM, YYYY")):"..."})]}),se&&Object(pt.jsx)(Up,{icon:Ii.faTimes,title:n}),Object(pt.jsx)("div",{ref:p,className:se?"d-none":"",children:Object(pt.jsx)("canvas",{width:"288",height:"220",ref:x})})]})]})},js=function(){var e=Object(g.c)(Nt),t=$h(),n=e.pathname===Nh.analytics,a=e.pathname===Nh.analyticsPools||t(Nh.analyticsPoolDetails),i=e.pathname===Nh.analyticsTokens||t(Nh.analyticsTokensDetails);return Object(pt.jsxs)("ul",{className:"page-nav-pills nav nav-pills d-inline-flex flex-nowrap border",children:[Object(pt.jsx)("li",{className:"nav-item",children:Object(pt.jsx)(w.b,{"data-testid":"analyticsOverviewLink",className:"nav-link ".concat(n?"active":""),to:Nh.analytics,children:"Overview"})}),Object(pt.jsx)("li",{className:"nav-item",children:Object(pt.jsx)(w.b,{"data-testid":"analyticsPoolsLink",className:"nav-link ".concat(a?"active":""),to:Nh.analyticsPools,children:"Pools"})}),Object(pt.jsx)("li",{className:"nav-item",children:Object(pt.jsx)(w.b,{"data-testid":"analyticsTokensLink",className:"nav-link ".concat(i?"active":""),to:Nh.analyticsTokens,children:"Tokens"})})]})},fs=n(1154),hs=function(e){var t=e.title,n=e.sortField,a=e.onSort,i=e.getCaretIcon;return Object(pt.jsx)("th",{onClick:function(){return a({sortField:n})},children:Object(pt.jsxs)("span",{className:"cursor-pointer",children:[t," ",i({sortField:n})]})})},ps=n(648),xs=n(649),vs=n(650),Os=n(651),ks=n(1153),gs=function(e){var t=e.id,n=e.paged,a=e.pageSize,i=e.children,r=c.useState(1),s=Object(T.a)(r,2),o=s[0],l=s[1],d=n.length>3;return Object(pt.jsx)("div",{className:"table-pager",children:Object(pt.jsxs)(fs.a.Container,{id:"".concat(t,"-table-pagination"),defaultActiveKey:o,transition:!1,onSelect:function(e){e&&l(Number(e))},children:[Object(pt.jsx)(fs.a.Content,{style:Object(b.a)({},"--page-size",a),children:i}),Object(pt.jsxs)("div",{className:"card-footer d-flex justify-content-between align-items-center py-2 pr-2",children:[Object(pt.jsxs)("div",{className:"text-secondary small",children:["Page ",o," of ",n.length]}),Object(pt.jsx)("div",{className:"pager",children:Object(pt.jsxs)("div",{className:"m-0 d-flex align-items-strech",children:[d&&Object(pt.jsx)("div",{children:Object(pt.jsx)(ks.a.Item,{className:"btns-contrainer left backward border ".concat(o>1?"":"inactive"),children:Object(pt.jsx)(ks.a.Link,{eventKey:1,className:"btn btn-primary-light",children:Object(pt.jsx)(F.a,{icon:ps.faBackward,size:"sm"})})})}),Object(pt.jsx)("div",{children:Object(pt.jsx)(ks.a.Item,{className:"btns-contrainer border border-right-0 ".concat(d?"":"left"," ").concat(o>1?"":"inactive"),children:Object(pt.jsx)(ks.a.Link,{eventKey:o>1?o-1:o,className:"btn btn-primary-light",children:Object(pt.jsx)(F.a,{icon:xs.faCaretLeft,size:"lg"})})})}),Object(pt.jsx)("div",{className:"d-flex align-items-center current-page border px-4",children:Object(pt.jsx)("small",{children:Object(pt.jsx)("span",{children:o})})}),Object(pt.jsx)("div",{children:Object(pt.jsx)(ks.a.Item,{className:"btns-contrainer border border-left-0 ".concat(d?"":"right"," ").concat(o<n.length?"":"inactive"),children:Object(pt.jsx)(ks.a.Link,{eventKey:o<n.length?o+1:o,className:"btn btn-primary-light",children:Object(pt.jsx)(F.a,{icon:vs.faCaretRight,size:"lg"})})})}),d&&Object(pt.jsx)("div",{children:Object(pt.jsx)(ks.a.Item,{className:"btns-contrainer right forward border ".concat(o<n.length?"":"inactive"),children:Object(pt.jsx)(ks.a.Link,{eventKey:n.length,className:"btn btn-primary-light",children:Object(pt.jsx)(F.a,{icon:Os.faForward,size:"sm"})})})})]})})]})]})})},ys=function(e){var t=e.pairsData,n=e.preserveOriginalPairs,a=n?Object(ke.a)(t):[];return t.forEach((function(e){e.firstToken.identifier.includes($)&&a.push(Object(ge.cloneDeep)(Object(m.a)(Object(m.a)({},e),{},{firstToken:Object(m.a)(Object(m.a)({},e.firstToken),{},{identifier:U,name:U})}))),e.secondToken.identifier.includes($)&&a.push(Object(ge.cloneDeep)(Object(m.a)(Object(m.a)({},e),{},{secondToken:Object(m.a)(Object(m.a)({},e.secondToken),{},{identifier:U,name:U})}))),n||a.find((function(t){return t.address===e.address}))||a.push(e)})),a},ws=n(426),Ts=function(e){return"".concat(e).concat("..."!==e?"%":"")},Ns=function(e){var t=e.address,n=e.className,a=e.children;return Object(pt.jsx)(w.b,{to:Object(y.e)(Nh.analyticsPoolDetails,{pool:t}),className:n,children:a})},Ss=function(e){var t,n=e.pool,a=e.index,i=e.search,r=e.commonData,s=c.useRef(null),o=Object(g.c)(Br),l=Rh({pendingPoolAddress:n.address,ref:s}).preventActions,d=Xe({farmsRate:o.farmsRate,lpToken:n.liquidityPoolToken.identifier}),u=d.unlockedRewardsFarmRate,m=d.lockedRewardsFarmRate,b=Ih({unlockedRewardsFarmRate:u,lockedRewardsFarmRate:m}),j=b.unlockedRewardsAPR,f=b.lockedRewardsAPR,h=null===(t=r.historicPools)||void 0===t?void 0:t["".concat(n.address,"_lockedValueUSD")],p=h&&h.length>0?h[h.length-1].value:n.lockedValueUSD,x=c.useMemo((function(){var e="".concat(Nh.liquidityAdd,"?firstToken=").concat(n.firstToken.identifier,"&secondToken=").concat(n.secondToken.identifier);return l?Object(pt.jsx)("button",{className:"btn btn-link p-0",disabled:!0,children:Object(pt.jsx)(F.a,{icon:ws.faExternalLink,size:"sm",className:"text-muted"})}):Object(pt.jsx)(w.b,{className:"btn btn-link p-0",to:e,children:Object(pt.jsx)(F.a,{icon:ws.faExternalLink,size:"sm",className:"text-secondary"})})}),[Nh,n,l]),v=function(){var e,t=isNaN(Number(n.volumeUSD24h)),a=Ye(new je.a(null!==(e=n.volumeUSD24h)&&void 0!==e?e:0).toString(10),2);return t?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsxs)(Ns,{address:n.address,children:["$",a]})},O=function(){var e=isNaN(Number(p)),t=Ye(new je.a(null!==p&&void 0!==p?p:0).toString(10),2);return e?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsxs)(Ns,{address:n.address,children:["$",t]})},k=function(){var e,t=isNaN(Number(n.feesUSD24h)),a=Ye(new je.a(null!==(e=n.feesUSD24h)&&void 0!==e?e:0).toString(10),2);return t?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsxs)(Ns,{address:n.address,children:["$",a]})},y=function(){return Object(pt.jsx)(pt.Fragment,{children:Object(pt.jsxs)(Ns,{className:"d-flex align-items-center",address:n.address,children:[Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(vv,{pair:n,size:"xs"})}),Object(pt.jsx)(Ov,{pair:n})]})})};return Object(pt.jsx)("tr",{className:"pool",ref:s,children:i?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("td",{children:Object(pt.jsx)(y,{})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(O,{})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(v,{})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(k,{})})]}):Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("td",{children:a+1}),Object(pt.jsx)("td",{children:Object(pt.jsx)(y,{})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(O,{})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(Ns,{address:n.address,children:Ts(j)})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(Ns,{address:n.address,children:Ts(f)})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(v,{})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(k,{})}),Object(pt.jsx)("td",{children:x})]})})},As=function e(t,n){return t.length>n?[t.slice(0,n)].concat(Object(ke.a)(e(t.slice(n),n))):[t]},Fs=function(e){var t=e.pairs,n=e.commonData,a=e.pageSize,i=ys({pairsData:t}),r=Zh(i),s=r.sortedRows,o=r.onSort,l=r.getCaretIcon,d=a&&a<i.length?a:i.length,u=As(s,d),m=[{title:"Pool",sortField:"poolName"},{title:"Liquidity",sortField:"lockedValueUSD"},{title:"Unlocked APR",sortField:"unlockedRewardsAPR"},{title:"Locked APR",sortField:"lockedRewardsAPR"},{title:"Volume (24h)",sortField:"volumeUSD24h"},{title:"Fees (24h)",sortField:"feesUSD24h"}];return Object(pt.jsx)("div",{className:"card",children:Object(pt.jsx)(gs,{id:"pools",paged:u,pageSize:d,children:u.map((function(e,t){return Object(pt.jsx)(fs.a.Pane,{eventKey:t+1,className:"table-responsive card-header p-0 border-bottom-0",children:Object(pt.jsxs)("table",{className:"table analytics-table analytics-pools-table",children:[Object(pt.jsx)("thead",{children:Object(pt.jsxs)("tr",{children:[Object(pt.jsx)("th",{children:"#"}),m.map((function(e,t){return Object(pt.jsx)(c.Fragment,{children:Object(pt.jsx)(hs,{title:e.title,sortField:e.sortField,onSort:o,getCaretIcon:l})},"pools-header-".concat(t))})),Object(pt.jsx)("th",{})]})}),Object(pt.jsx)("tbody",{children:n.historicPools&&e.map((function(e,a){return Object(pt.jsx)(Ss,{pool:e,index:d*t+a,commonData:n},"pools-".concat(e.address))}))})]})},"pools-table-page-".concat(t))}))})})},Ps=n(652),Ds=n(1156),Rs=n(1157),Es=function(e,t){var n=0;return e&&t&&(n=(Number(t)-Number(e))/Number(e)*100),n},Ls=function(e){var t,n=e.identifier,a=e.metric,i=e.history["".concat(n.replace("-",""),"_").concat(a)],r=i||[],s=r.length>0?r[r.length-1].value:"...";if(r.length>0){var c=r[0];if(25===r.length){var o=Object(Yi.a)(r);o[0];c=o.slice(1)[0]}t=Es(c.value,s)}return t},Cs=function(e){var t=e.identifier,n=e.metric,a=e.history,i=Ls({identifier:t,metric:n,history:a});return Object(pt.jsx)(pt.Fragment,{children:void 0!==i?Object(pt.jsx)("span",{className:"ml-2",children:Object(pt.jsxs)("span",{className:"percentage rounded ml-2 percentage-".concat(i>0?"increase":0===i?"fixed":"decrease"),children:[Object(pt.jsxs)("span",{children:[i>0?"+":i<0?"-":"",0!==Math.abs(i)?"".concat(Math.abs(i).toFixed(2),"%"):"-"]}),"\xa0"]})}):"..."})},Is=function(e){var t=e.identifier,n=e.metric,a=e.history,i=e.digits,r=e.hidePercentage,s=a["".concat(t.replace("-",""),"_").concat(n)],c=s||[],o=c.length>0?c[c.length-1].value:"...";return Object(pt.jsxs)(pt.Fragment,{children:[isNaN(Number(o))?"...":"$".concat(Ye(new je.a(o).toString(10),i)),!r&&Object(pt.jsx)(Cs,{identifier:t,metric:n,history:a})]})},qs=function(e){var t=e.identifier,n=e.className,a=e.children;return Object(pt.jsx)(w.b,{to:Object(y.e)(Nh.analyticsTokensDetails,{token:t}),className:n,children:a})},Ms=function(e){var t=e.token,n=e.index,a=e.search,i=e.commonData,r=t.identifier===$?U:t.identifier,s=function(){var e=isNaN(Number(t.tokenVolume24h.toString())),n=He({amount:t.tokenVolume24h.toString(10),denomination:t.decimals,decimals:t.decimals,showLastNonZeroDecimal:!0,addCommas:!1});return e?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsx)(qs,{identifier:r,children:Object(pt.jsx)(Xb,{noAproxSign:!0,amount:n,usd:parseFloat(t.tokenPriceUSD)})})},c=function(){var e=isNaN(Number(t.lockedValueUSD)),n=Ye(new je.a(t.lockedValueUSD).toString(10),0);return e?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsxs)(qs,{identifier:r,children:["$",n]})},o=function(){return isNaN(Number(t.tokenPriceUSD))?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsx)(qs,{identifier:r,children:Object(pt.jsx)(Is,{identifier:t.identifier,metric:"priceUSD",history:i.historicTokens,digits:2,hidePercentage:!0})})},l=function(){return Object(pt.jsxs)(qs,{identifier:r,className:"d-flex align-items-center",children:[Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(Xh,{token:r})}),Object(pt.jsx)(Rt,{token:r})]})};return Object(pt.jsx)("tr",{className:"token",children:a?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("td",{children:Object(pt.jsx)(l,{})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(c,{})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(s,{})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(o,{})})]}):Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("td",{children:n+1}),Object(pt.jsx)("td",{children:Object(pt.jsx)(l,{})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(o,{})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(Cs,{identifier:t.identifier,metric:"priceUSD",history:i.historicTokens})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(s,{})}),Object(pt.jsx)("td",{children:Object(pt.jsx)(c,{})}),Object(pt.jsx)("td",{})]})})},Bs=function(e){var t=e.pairs,n=[];t.forEach((function(e){var t=e.firstToken,a=e.firstTokenLockedValueUSD,i=e.firstTokenPriceUSD,r=e.firstTokenVolume24h,s=e.secondToken,c=e.secondTokenLockedValueUSD,o=e.secondTokenPriceUSD,l=e.secondTokenVolume24h,d={name:t.name,identifier:t.identifier,decimals:t.decimals,lockedValueUSD:a,tokenPriceUSD:i,tokenVolume24h:r&&!isNaN(Number(r))?new je.a(r):new je.a("0")},u={name:s.name,identifier:s.identifier,decimals:s.decimals,lockedValueUSD:c,tokenPriceUSD:o,tokenVolume24h:l&&!isNaN(Number(l))?new je.a(l):new je.a("0")};n.push(d),n.push(u)}));var a=n.reduce((function(e,t){var n=e.find((function(e){var n=e.identifier;return t.identifier===n}));if(n){n.lockedValueUSD=String(Number(n.lockedValueUSD)+Number(t.lockedValueUSD));var a=new je.a(t.tokenVolume24h);n.tokenVolume24h=n.tokenVolume24h.plus(a)}else e.push(t);return e}),[]);return{tokenRows:Us(a)}},Us=function(e){return e.sort((function(e,t){var n=He({amount:e.tokenVolume24h.toString(10),denomination:e.decimals,showLastNonZeroDecimal:!0,addCommas:!1}),a=parseFloat(n)*parseFloat(e.tokenPriceUSD),i=He({amount:t.tokenVolume24h.toString(10),denomination:t.decimals,showLastNonZeroDecimal:!0,addCommas:!1});return parseFloat(i)*parseFloat(t.tokenPriceUSD)-a}))},$s=function e(t,n){return t.length>n?[t.slice(0,n)].concat(Object(ke.a)(e(t.slice(n),n))):[t]},_s=function(e){var t=e.pairs,n=e.commonData,a=e.pageSize,i=Bs({pairs:t}).tokenRows,r=a&&a<i.length?a:i.length,s=Zh(i,n),o=s.sortedRows,l=s.onSort,d=s.getCaretIcon,u=$s(o,r),m=[{title:"Token Name",sortField:"name"},{title:"Price",sortField:"tokenPriceUSD"},{title:"Price Change",sortField:"tokenPriceChangeUSD"},{title:"Volume (24h)",sortField:"tokenVolume24h"},{title:"Liquidity",sortField:"lockedValueUSD"}];return Object(pt.jsx)("div",{className:"card",children:Object(pt.jsx)(gs,{id:"tokens",paged:u,pageSize:r,children:u.map((function(e,t){return Object(pt.jsx)(fs.a.Pane,{eventKey:t+1,className:"table-responsive card-header p-0 border-bottom-0",children:Object(pt.jsxs)("table",{className:"table analytics-table analytics-tokens-table mb-0",children:[Object(pt.jsx)("thead",{className:"card-header",children:Object(pt.jsxs)("tr",{children:[Object(pt.jsx)("th",{children:"#"}),m.map((function(e,t){return Object(pt.jsx)(c.Fragment,{children:Object(pt.jsx)(hs,{title:e.title,sortField:e.sortField,onSort:l,getCaretIcon:d})},"token-header-".concat(t))})),Object(pt.jsx)("th",{})]})}),Object(pt.jsx)("tbody",{children:n.historicTokens&&e.map((function(e,a){return Object(pt.jsx)(Ms,{token:e,index:r*t+a,commonData:n},"tokens-".concat(a,"-").concat(t))}))})]})},"pools-table-page-".concat(t))}))})})},Vs=function(e){var t=e.pairs,n=e.commonData,a=e.searchValue,i=t.filter((function(e){return function(e,t){if(!t)return!0;var n=t.toLowerCase();return e.address.toLowerCase().includes(n)||e.firstToken.name.toLowerCase().includes(n)||e.firstToken.identifier.toLowerCase().includes(n)||e.secondToken.name.toLowerCase().includes(n)||e.secondToken.identifier.toLowerCase().includes(n)||e.liquidityPoolToken.identifier.toLowerCase().includes(n)||e.liquidityPoolToken.name.toLowerCase().includes(n)}(e,a)})),r=a?i:i.slice(0,3),s=!a&&t.length>3;return Object(pt.jsx)("div",{className:"table-responsive",children:Object(pt.jsxs)("table",{className:"table table-borderless search-table",children:[Object(pt.jsx)("thead",{children:Object(pt.jsxs)("tr",{className:"search-header",children:[Object(pt.jsx)("th",{children:"Pools"}),Object(pt.jsx)("th",{children:"Liquidity"}),Object(pt.jsx)("th",{children:"Volume"}),Object(pt.jsx)("th",{children:"Fees"})]})}),Object(pt.jsx)("tbody",{children:r.length?Object(pt.jsxs)(pt.Fragment,{children:[r.map((function(e,t){return Object(pt.jsx)(Ss,{search:!0,pool:e,index:t,commonData:n},"search-pools-".concat(e.address))})),s&&Object(pt.jsx)("tr",{className:"no-hover",children:Object(pt.jsx)("td",{colSpan:4,children:Object(pt.jsx)(w.b,{className:"text-primary",to:Nh.analyticsPools,children:"See more.."})})})]}):Object(pt.jsx)("tr",{className:"no-hover",children:Object(pt.jsx)("td",{colSpan:4,children:"No results"})})})]})})},Ws=function(e){var t=e.pairs,n=e.tokenRows,a=e.commonData,i=e.searchValue,r=t.filter((function(e){return function(e,t){if(!t)return!0;var n=t.toLowerCase();return e.address.toLowerCase().includes(n)}(e,i)})),s=[].concat(Object(ke.a)(n.filter((function(e){return function(e,t){if(!t)return!0;var n=t.toLowerCase();return e.name.toLowerCase().includes(n.toLowerCase())||e.identifier.toLowerCase().includes(n.toLowerCase())}(e,i)}))),Object(ke.a)(n.filter((function(e){return function(e,t){var n=e[0];return!!n&&(n.firstToken.identifier===t.identifier||n.secondToken.identifier===t.identifier)}(r,e)})))),c=i?s:s.slice(0,3),o=!i&&n.length>3;return Object(pt.jsx)("div",{className:"table-responsive",children:Object(pt.jsxs)("table",{className:"table table-borderless search-table",children:[Object(pt.jsx)("thead",{children:Object(pt.jsxs)("tr",{className:"search-header",children:[Object(pt.jsx)("th",{children:"Tokens"}),Object(pt.jsx)("th",{children:"Liquidity"}),Object(pt.jsx)("th",{children:"Volume"}),Object(pt.jsx)("th",{children:"Price"})]})}),Object(pt.jsx)("tbody",{children:c.length&&a.historicTokens?Object(pt.jsxs)(pt.Fragment,{children:[c.map((function(e,t){return Object(pt.jsx)(Ms,{search:!0,token:e,index:t,commonData:a},"tokens-".concat(t,"-").concat(t))})),o&&Object(pt.jsx)("tr",{className:"no-hover",children:Object(pt.jsx)("td",{colSpan:4,children:Object(pt.jsx)(w.b,{className:"text-primary",to:Nh.analyticsTokens,children:"See more.."})})})]}):Object(pt.jsx)("tr",{className:"no-hover",children:Object(pt.jsx)("td",{colSpan:4,children:"No results"})})})]})})},zs=function(e){var t=e.pairs,n=e.commonData,a=ys({pairsData:t}),i=c.useState(""),r=Object(T.a)(i,2),s=r[0],o=r[1],l=c.useState(!1),d=Object(T.a)(l,2),u=d[0],m=d[1],b=c.useState(!1),j=Object(T.a)(b,2),f=j[0],h=j[1],p=Bs({pairs:t}).tokenRows;return Object(pt.jsx)("div",{className:"search h-100","data-testid":"search-select",children:Object(pt.jsx)(Ds.a,{show:u,trigger:["click"],placement:"bottom-end",onToggle:function(e){m(f||e),h(!1)},rootClose:!0,overlay:Object(pt.jsx)(Rs.a,{id:"search-popover",className:"basic-popover search",children:Object(pt.jsxs)(Rs.a.Content,{className:"card",children:[Object(pt.jsx)(Vs,{pairs:a,commonData:n,searchValue:s}),Object(pt.jsx)("div",{className:"border-bottom separator my-2 mx-spacer"}),Object(pt.jsx)(Ws,{pairs:t,tokenRows:p,commonData:n,searchValue:s})]})}),children:Object(pt.jsxs)("div",{className:"search-holder h-100",onClick:function(){return h(!0)},children:[Object(pt.jsx)("input",{placeholder:"Search pools or tokens...",type:"text",name:"search",className:"form-control search-input h-100",onFocus:function(){return m(!0)},onChange:function(e){m(!0),o(e.target.value)}}),Object(pt.jsx)("button",{type:"button",className:"btn btn-light search-button",children:Object(pt.jsx)(F.a,{icon:Ps.faSearch})})]})})})},Hs=function(e){var t=e.children;return Object(pt.jsx)("div",{className:"analytics-layout container mt-spacer",children:Object(pt.jsx)("div",{className:"row",children:Object(pt.jsx)("div",{className:"col-12",children:Object(pt.jsx)("div",{className:"main-body",children:t})})})})},Ys=function(e){var t=c.useState(),n=Object(T.a)(t,2),a=n[0],i=n[1],r=Object(p.gql)(ls||(ls=Object(Bi.a)(["\n    query  {\n      ","\n    }\n  "])),e.map((function(e){return"".concat(e.replace("-",""),'_feesUSD: values24hSum(metric: "feesUSD", series: "').concat(e,'") {\n            timestamp\n            value\n          }\n          ').concat(e.replace("-",""),'_lockedValueUSD: values24h(metric: "lockedValueUSD", series: "').concat(e,'") {\n            timestamp\n            value\n          }\n          ').concat(e.replace("-",""),'_volumeUSD: values24hSum(metric: "volumeUSD", series: "').concat(e,'") {\n            timestamp\n            value\n          }')}))),s=Object(p.useLazyQuery)(r,{displayName:"getPoolValues24h",onCompleted:function(e){e&&i(e)}}),o=Object(T.a)(s,2),l=o[0],d=o[1],u=d.loading,m=d.error;return{getPoolValues24h:l,poolValues24h:a,poolValues24hLoading:u,poolValues24hError:Boolean(m)}},Gs=function(e){var t=c.useState(),n=Object(T.a)(t,2),a=n[0],i=n[1],r=Object(p.gql)(ds||(ds=Object(Bi.a)(["\n    query {\n      ","\n    }\n  "])),e.map((function(e){return"".concat(e.replace("-",""),'_priceUSD: values24h(metric: "priceUSD", series: "').concat(e,'") {\n            timestamp\n            value\n          }\n          ').concat(e.replace("-",""),'_lockedValueUSD: values24h(metric: "lockedValueUSD", series: "').concat(e,'") {\n            timestamp\n            value\n          }\n          ').concat(e.replace("-",""),'_volumeUSD: values24hSum(metric: "volumeUSD", series: "').concat(e,'") {\n            timestamp\n            value\n          }')}))),s=Object(p.useLazyQuery)(r,{displayName:"getTokenValues24h",onCompleted:function(e){e&&i(e)}}),o=Object(T.a)(s,2),l=o[0],d=o[1],u=d.loading,m=d.error;return{getTokenValues24h:l,tokenValues24h:a,tokenValues24hLoading:u,tokenValues24hError:Boolean(m)}},Zs=function(e){var t=e.pairs,n=t.reduce((function(e,t){return[].concat(Object(ke.a)(e),[t.firstToken.identifier,t.secondToken.identifier])}),[]),a=Object(ke.a)(new Set(n)),i=t.reduce((function(e,t){return[].concat(Object(ke.a)(e),[t.address])}),[]),r=c.useState(),s=Object(T.a)(r,2),o=s[0],l=s[1],d=c.useState(),u=Object(T.a)(d,2),b=u[0],j=u[1],f=Gs(a),h=f.getTokenValues24h,p=f.tokenValues24h,x=f.tokenValues24hLoading,v=f.tokenValues24hError,O=Ys(i),k=O.getPoolValues24h,g=O.poolValues24h,y=O.poolValues24hLoading,w=O.poolValues24hError;return c.useEffect((function(){a&&h(),i&&k()}),[]),c.useEffect((function(){!p||x||v||l(function(e,t){var n=Object(m.a)({},e);return t.forEach((function(e){var t=e.firstToken.identifier.replace("-",""),a=e.secondToken.identifier.replace("-",""),i=n["".concat(t,"_priceUSD")],r=n["".concat(a,"_priceUSD")];e.firstTokenPriceUSD&&i.length&&(i[i.length-1].value=e.firstTokenPriceUSD),e.secondTokenPriceUSD&&r.length&&(r[r.length-1].value=e.secondTokenPriceUSD)})),n}(p,t))}),[p]),c.useEffect((function(){!g||y||w||j(function(e,t){var n=Object(m.a)({},e);return t.forEach((function(e){var t=n["".concat(e.address,"_lockedValueUSD")];e.lockedValueUSD&&t.length&&(t[t.length-1].value=e.lockedValueUSD)})),n}(g,t))}),[g]),{historicTokens:o,historicPools:b,tokenList:a,contracts:i}},Ks=Object(p.gql)(us||(us=Object(Bi.a)(["\n  query ($offset: Int, $pairsLimit: Int) {\n    pairs(offset: $offset, limit: $pairsLimit) {\n      address\n      state\n      address\n      feesUSD24h\n      volumeUSD24h\n      lockedValueUSD\n      firstToken {\n        name\n        identifier\n        decimals\n      }\n      firstTokenLockedValueUSD\n      firstTokenPriceUSD\n      firstTokenVolume24h\n      secondToken {\n        name\n        identifier\n        decimals\n      }\n      secondTokenLockedValueUSD\n      secondTokenPriceUSD\n      secondTokenVolume24h\n      liquidityPoolToken {\n        name\n        identifier\n        decimals\n      }\n      state\n      totalFeePercent\n      specialFeePercent\n      type\n    }\n  }\n"]))),Xs=Se((function(e){return e.analyticsPage}),(function(e){return e.pairsCollection})),Qs=function(){var e=ur(),t=Object(g.c)(Ee),n=Object(g.c)(Xs),a=n.pairs,i=n.pairsFetched,r=n.pairsFetchError,s=Object(g.b)();c.useEffect((function(){e({query:Ks,variables:{offset:0,pairsLimit:G}}).then((function(e){var n;if(null!=(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data)){var a=e.data.data.pairs.filter((function(e){var n=e.state,a=e.type,i=e.address;return["Active","ActiveNoSwaps"].includes(n)&&("Experimental"!==a||(null===t||void 0===t?void 0:t.includes(i)))})),i=a.sort((function(e,t){var n,a,i=isNaN(Number(e.volumeUSD24h))?0:parseFloat(null!==(n=e.volumeUSD24h)&&void 0!==n?n:"0");return(isNaN(Number(t.volumeUSD24h))?0:parseFloat(null!==(a=t.volumeUSD24h)&&void 0!==a?a:"0"))-i}));s(Tn(i))}else s(Nn())})).catch((function(e){console.log("analytics useFetchPageData",e),s(Nn())}))}),[t]);var o=dr(),l=o.fetchTokenDetails,d=o.tokenDetailsFetched,u=o.tokenDetailsError;return c.useEffect((function(){if(a){var e=function(e){var t=[];return e.forEach((function(e){t.includes(e.firstToken.identifier)||t.push(e.firstToken.identifier),t.includes(e.secondToken.identifier)||t.push(e.secondToken.identifier),t.includes(e.liquidityPoolToken.identifier)||t.push(e.liquidityPoolToken.identifier)})),{identfiers:t}}(a),t=e.identfiers;l(t)}}),[a]),{pairs:a,pairsFetched:Boolean(i&&d),pairsFetchError:Boolean(r||u)}},Js=function(e){var t=e.pairs,n=Zs({pairs:t});return Object(pt.jsxs)("div",{className:"analytics","data-testid":"pageContent",children:[Object(pt.jsxs)("div",{className:"row mb-spacer",children:[Object(pt.jsx)("div",{className:"col-sm-6 col-lg-8",children:Object(pt.jsx)(js,{})}),Object(pt.jsx)("div",{className:"col-sm-6 col-lg-4 mt-spacer mt-sm-0",children:Object(pt.jsx)(zs,{pairs:t,commonData:n})})]}),Object(pt.jsx)("div",{className:"row my-spacer",children:Object(pt.jsxs)("div",{className:"col-12",children:[Object(pt.jsx)("h2",{children:"Maiar Exchange Analytics"}),Object(pt.jsx)("h3",{className:"h6 font-weight-light text-secondary mb-2 pt-1",children:"Trade tokens in an instant"})]})}),Object(pt.jsxs)("div",{className:"row mb-5",children:[Object(pt.jsx)("div",{className:"col-lg-6 mb-spacer mb-lg-0",children:Object(pt.jsx)(bs,{title:"Liquidity",error:"Unable to load Liquidity Chart",type:"line",metric:"lockedValueUSD",commonData:n,availableTimeframes:[as.day,as.week,as.month]})}),Object(pt.jsx)("div",{className:"col-lg-6",children:Object(pt.jsx)(bs,{title:"Daily Volume",error:"Unable to load Volume Chart",type:"bar",metric:"volumeUSD",commonData:n,initialTimeframe:as.day,showPercentage:!1,sumPreviewData:!0,availableTimeframes:[]})})]}),Object(pt.jsx)("div",{className:"row mb-5",children:Object(pt.jsxs)("div",{className:"col-12",children:[Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-spacer",children:[Object(pt.jsx)("h3",{className:"mb-0",children:"Top Tokens"}),Object(pt.jsxs)(w.b,{className:"btn btn-sm btn-primary-opaque px-3",to:Nh.analyticsTokens,children:["See All ",Object(pt.jsx)(F.a,{icon:N.b,className:"ml-2"})]})]}),Object(pt.jsx)(_s,{pairs:t,commonData:n,pageSize:20})]})}),Object(pt.jsx)("div",{className:"row",children:Object(pt.jsxs)("div",{className:"col-12",children:[Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-spacer",children:[Object(pt.jsx)("h3",{className:"mb-0",children:"Top Pools"}),Object(pt.jsxs)(w.b,{className:"btn btn-sm btn-primary-opaque px-3",to:Nh.analyticsPools,children:["See All ",Object(pt.jsx)(F.a,{icon:N.b,className:"ml-2"})]})]}),Object(pt.jsx)(Fs,{pairs:t,commonData:n,pageSize:20})]})})]})},ec=function(){var e=Qs(),t=e.pairs,n=!e.pairsFetched,a=e.pairsFetchError,i=!n&&!a;return Object(pt.jsxs)(Hs,{children:[n&&!a&&Object(pt.jsx)($p,{}),a&&Object(pt.jsx)(Up,{icon:N.r,title:"Unable to load page"}),i&&Object(pt.jsx)(pt.Fragment,{children:t.length>0?Object(pt.jsx)(Js,{pairs:t}):Object(pt.jsx)(Up,{icon:N.r,title:"Unable to load page"})})]})},tc=function(e){var t=e.pairs,n=Zs({pairs:t});return Object(pt.jsx)(pt.Fragment,{children:n.historicPools?Object(pt.jsxs)("div",{className:"analytics","data-testid":"pageContent",children:[Object(pt.jsxs)("div",{className:"row mb-spacer",children:[Object(pt.jsx)("div",{className:"col-sm-6 col-lg-8",children:Object(pt.jsx)(js,{})}),Object(pt.jsx)("div",{className:"col-sm-6 col-lg-4 mt-spacer mt-sm-0",children:Object(pt.jsx)(zs,{pairs:t,commonData:n})})]}),Object(pt.jsx)("div",{className:"row mt-spacer",children:Object(pt.jsxs)("div",{className:"col-12",children:[Object(pt.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-spacer",children:Object(pt.jsx)("h2",{children:"Pools"})}),Object(pt.jsx)(Fs,{pairs:t,commonData:n})]})})]}):Object(pt.jsx)($p,{})})},nc=function(){var e=Qs(),t=e.pairs,n=!e.pairsFetched,a=e.pairsFetchError,i=!n&&!a;return Object(pt.jsxs)(Hs,{children:[n&&!a&&Object(pt.jsx)($p,{}),a&&Object(pt.jsx)(Up,{icon:N.r,title:"Unable to load active pools"}),i&&Object(pt.jsx)(pt.Fragment,{children:t.length>0?Object(pt.jsx)(tc,{pairs:t}):Object(pt.jsx)(Up,{icon:N.r,title:"Unable to load active pools"})})]})},ac=n(65),ic=function(e){var t=e.icon,n=e.text,a=e.amount;return Object(pt.jsxs)("div",{className:"d-flex flex-fill align-items-center justify-content-between my-1",children:[Object(pt.jsx)("div",{className:"mr-3",children:t}),Object(pt.jsxs)("span",{className:"d-flex flex-wrap justify-content-between flex-fill",children:[Object(pt.jsx)("span",{className:"pr-3",children:n}),Object(pt.jsx)("span",{children:a})]})]})},rc=function(e){var t=e.pairs,n=e.allPairs,i=o.a.useRef(null),r=Zs({pairs:t}),s=o.a.useState("liquidity"),c=Object(T.a)(s,2),l=c[0],d=c[1],u=t[0],m=a.denominateAmount,b=a.getPairRate,j=a.amountWithoutRounding,f=ys({pairsData:t})[0],h=b({pairsRate:Object(g.c)(Br).pairsRate,pairAddress:u.address}),p=Rh({pendingPoolAddress:u.address,ref:i}).preventActions,x=o.a.useMemo((function(){var e="".concat(Nh.liquidityAdd,"?firstToken=").concat(f.firstToken.identifier,"&secondToken=").concat(f.secondToken.identifier);return p?Object(pt.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"Add Liquidity"}):Object(pt.jsx)(w.b,{className:"btn btn-light mr-3",to:e,children:"Add Liquidity"})}),[Nh,f,p]),v=o.a.useMemo((function(){var e="".concat(Nh.swap,"?firstToken=").concat(f.firstToken.identifier,"&secondToken=").concat(f.secondToken.identifier);return Object(pt.jsx)(w.b,{className:"btn btn-primary",to:e,children:"Swap"})}),[Nh,f]);return Object(pt.jsx)(pt.Fragment,{children:u&&r.historicPools&&Object(pt.jsxs)("div",{className:"analytics","data-testid":"pageContent",children:[Object(pt.jsxs)("div",{className:"row mb-spacer",children:[Object(pt.jsx)("div",{className:"col-sm-6 col-lg-8",children:Object(pt.jsx)(js,{})}),Object(pt.jsx)("div",{className:"col-sm-6 col-lg-4 mt-spacer mt-sm-0",children:Object(pt.jsx)(zs,{pairs:n,commonData:r})})]}),Object(pt.jsx)("div",{className:"row my-spacer",children:Object(pt.jsxs)("div",{className:"col-12",children:[Object(pt.jsxs)("h2",{className:"d-flex align-items-center flex-wrap",children:[Object(pt.jsx)(w.b,{to:Nh.analyticsPools,children:Object(pt.jsx)(F.a,{icon:ac.a,size:"sm",className:"mr-3 text-secondary"})}),Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(vv,{pair:f,size:"md"})}),Object(pt.jsx)(Ov,{pair:f}),Object(pt.jsx)("span",{className:"ml-2",children:"Pool"})]}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap justify-content-lg-between mt-3",children:[Object(pt.jsxs)("div",{className:"d-flex flex-wrap mb-spacer mb-lg-0",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center my-1 mr-3 pr-3 border-right",children:[Object(pt.jsx)(Xh,{token:f.firstToken.identifier}),Object(pt.jsx)("span",{className:"mx-1",children:"1"}),Object(pt.jsx)(Rt,{token:f.firstToken.identifier}),Object(pt.jsx)("span",{className:"mx-1",children:"="}),Object(pt.jsx)("span",{className:"mx-1",children:h?j(h.firstTokenPrice):"..."}),Object(pt.jsx)(Rt,{token:f.secondToken.identifier})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center my-1",children:[Object(pt.jsx)(Xh,{token:f.secondToken.identifier}),Object(pt.jsx)("span",{className:"mx-1",children:"1"}),Object(pt.jsx)(Rt,{token:f.secondToken.identifier}),Object(pt.jsx)("span",{className:"mx-1",children:"="}),Object(pt.jsx)("span",{className:"mx-1",children:h?j(h.secondTokenPrice):"..."}),Object(pt.jsx)(Rt,{token:f.firstToken.identifier})]})]}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap",children:[x," ",v]})]})]})}),Object(pt.jsxs)("div",{className:"row mb-spacer",children:[Object(pt.jsx)("div",{className:"col-lg-4 mb-spacer mb-lg-0",children:Object(pt.jsx)("div",{className:"card h-100",children:Object(pt.jsxs)("div",{className:"card-body",children:[Object(pt.jsxs)("div",{className:"mb-3",children:[Object(pt.jsx)("small",{children:"Liquidity"}),Object(pt.jsx)("h5",{className:"mb-0",children:Object(pt.jsx)(Is,{identifier:u.address,metric:"lockedValueUSD",history:r.historicPools})})]}),Object(pt.jsxs)("div",{className:"mb-3",children:[Object(pt.jsx)("small",{children:"Volume (24h)"}),Object(pt.jsx)("h5",{className:"mb-0",children:isNaN(Number(u.volumeUSD24h))?"...":"$".concat(Number(u.volumeUSD24h).toLocaleString("en",{maximumFractionDigits:0}))})]}),Object(pt.jsxs)("div",{className:"mb-3",children:[Object(pt.jsx)("small",{children:"Fees (24h)"}),Object(pt.jsx)("h5",{className:"mb-0",children:isNaN(Number(u.feesUSD24h))?"...":"$".concat(Number(u.feesUSD24h).toLocaleString("en",{maximumFractionDigits:0}))})]}),Object(pt.jsxs)("div",{children:[Object(pt.jsx)("p",{className:"mb-2 small",children:"Pooled Tokens"}),Object(pt.jsxs)("div",{className:"card px-3 py-2 small",children:[Object(pt.jsx)(ic,{icon:Object(pt.jsx)(Xh,{token:f.firstToken.identifier}),text:Object(pt.jsx)(Rt,{token:f.firstToken.identifier}),amount:Object(pt.jsx)(pt.Fragment,{children:h?Object(pt.jsx)(pt.Fragment,{children:m({amount:h.info.reserves0,denomination:u.firstToken.decimals,addCommas:!0})}):"..."})}),Object(pt.jsx)(ic,{icon:Object(pt.jsx)(Xh,{token:f.secondToken.identifier}),text:Object(pt.jsx)(Rt,{token:f.secondToken.identifier}),amount:Object(pt.jsx)(pt.Fragment,{children:h?Object(pt.jsx)(pt.Fragment,{children:m({amount:h.info.reserves1,denomination:u.secondToken.decimals,addCommas:!0})}):"..."})})]})]})]})})}),Object(pt.jsx)("div",{className:"col-lg-8 h-100",children:Object(pt.jsx)(fs.a.Container,{id:"token-tabs",defaultActiveKey:l,onSelect:function(e){e&&d(e)},children:Object(pt.jsxs)(fs.a.Content,{children:[Object(pt.jsxs)("div",{className:"chart-tabs d-flex ml-3",children:[Object(pt.jsx)(ks.a.Link,{eventKey:"liquidity",className:"".concat("liquidity"===l?"active":""),children:"Liquidity"}),Object(pt.jsx)(ks.a.Link,{eventKey:"volume",className:"".concat("volume"===l?"active":""),children:"Volume"})]}),Object(pt.jsx)(fs.a.Pane,{eventKey:"liquidity",children:Object(pt.jsx)(bs,{title:" ",error:"Unable to load Liquidity Chart",type:"line",metric:"lockedValueUSD",commonData:r,tabKey:l,initialTimeframe:as.day,availableTimeframes:[as.day,as.week,as.month]})}),Object(pt.jsx)(fs.a.Pane,{eventKey:"volume",children:Object(pt.jsx)(bs,{title:" ",error:"Unable to load Volume Chart",type:"bar",metric:"volumeUSD",commonData:r,tabKey:l,initialTimeframe:as.day})})]})})})]}),Object(pt.jsx)("div",{className:"row mb-5",children:Object(pt.jsxs)("div",{className:"col-12",children:[Object(pt.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-spacer",children:Object(pt.jsx)("h3",{className:"mb-0",children:"Tokens"})}),Object(pt.jsx)(_s,{pairs:t,commonData:r})]})})]})})},sc=function(){var e=Qs(),t=e.pairs,n=!e.pairsFetched,a=e.pairsFetchError,i=!n&&!a,r=Object(g.c)(Nt),s=Object(y.f)(Nh.analyticsPoolDetails,r.pathname),c=s&&s.params&&s.params.pool?s.params.pool:"",o=t.filter((function(e){return e.address===c}));return Object(pt.jsxs)(Hs,{children:[n&&!a&&Object(pt.jsx)($p,{}),a&&Object(pt.jsx)(Up,{icon:N.r,title:"Unable to load active pools"}),i&&Object(pt.jsx)(pt.Fragment,{children:o.length>0?Object(pt.jsx)(rc,{pairs:o,allPairs:t}):Object(pt.jsx)(Up,{icon:N.r,title:"Unable to load active pools"})})]})},cc=function(e){var t=e.pairs,n=Zs({pairs:t});return Object(pt.jsx)(pt.Fragment,{children:n.historicTokens?Object(pt.jsxs)("div",{className:"analytics","data-testid":"pageContent",children:[Object(pt.jsxs)("div",{className:"row mb-spacer",children:[Object(pt.jsx)("div",{className:"col-sm-6 col-lg-8",children:Object(pt.jsx)(js,{})}),Object(pt.jsx)("div",{className:"col-sm-6 col-lg-4 mt-spacer mt-sm-0",children:Object(pt.jsx)(zs,{pairs:t,commonData:n})})]}),Object(pt.jsx)("div",{className:"row mt-spacer",children:Object(pt.jsxs)("div",{className:"col-12",children:[Object(pt.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-spacer",children:Object(pt.jsx)("h2",{children:"Tokens"})}),Object(pt.jsx)(_s,{pairs:t,commonData:n})]})})]}):Object(pt.jsx)($p,{})})},oc=function(){var e=Qs(),t=e.pairs,n=!e.pairsFetched,a=e.pairsFetchError,i=!n&&!a;return Object(pt.jsxs)(Hs,{children:[n&&!a&&Object(pt.jsx)($p,{}),a&&Object(pt.jsx)(Up,{icon:N.r,title:"Unable to load tokens"}),i&&Object(pt.jsx)(pt.Fragment,{children:t.length>0?Object(pt.jsx)(cc,{pairs:t}):Object(pt.jsx)(Up,{icon:N.r,title:"Unable to load tokens"})})]})},lc=function(e){var t=e.pairs,n=e.allPairs,a=e.token,i=Zs({pairs:t}),r=c.useState("liquidity"),s=Object(T.a)(r,2),o=s[0],l=s[1],d=Bs({pairs:t}).tokenRows,u=a===U?$:a,m=d.filter((function(e){return e.identifier===u})),b=m.length>0?m[0]:void 0;return Object(pt.jsx)(pt.Fragment,{children:b&&i.historicTokens&&Object(pt.jsxs)("div",{className:"analytics","data-testid":"pageContent",children:[Object(pt.jsxs)("div",{className:"row mb-spacer",children:[Object(pt.jsx)("div",{className:"col-sm-6 col-lg-8",children:Object(pt.jsx)(js,{})}),Object(pt.jsx)("div",{className:"col-sm-6 col-lg-4 mt-spacer mt-sm-0",children:Object(pt.jsx)(zs,{pairs:n,commonData:i})})]}),Object(pt.jsx)("div",{className:"row my-spacer",children:Object(pt.jsx)("div",{className:"col-12",children:Object(pt.jsxs)("h2",{className:"d-flex align-items-center flex-wrap",children:[Object(pt.jsx)(w.b,{to:Nh.analyticsTokens,children:Object(pt.jsx)(F.a,{icon:ac.a,size:"sm",className:"mr-3 text-secondary"})}),Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(Xh,{token:a})}),Object(pt.jsx)(Rt,{token:a}),a!==U&&Object(pt.jsxs)("span",{className:"small ml-4 ml-sm-3 mb-0 text-secondary",children:["(",a,")"]})]})})}),Object(pt.jsxs)("div",{className:"row mb-spacer",children:[Object(pt.jsx)("div",{className:"col-lg-4 mb-spacer mb-lg-0",children:Object(pt.jsx)("div",{className:"card h-100",children:Object(pt.jsxs)("div",{className:"card-body",children:[Object(pt.jsxs)("div",{className:"mb-3",children:[Object(pt.jsx)("small",{children:"Price"}),Object(pt.jsx)("h5",{className:"mb-0",children:Object(pt.jsx)(Is,{identifier:a===U?$:a,metric:"priceUSD",history:i.historicTokens,digits:a===_?6:2})})]}),Object(pt.jsxs)("div",{className:"mb-3",children:[Object(pt.jsx)("small",{children:"Liquidity"}),Object(pt.jsx)("h5",{className:"mb-0",children:Object(pt.jsx)(Is,{identifier:u,metric:"lockedValueUSD",history:i.historicTokens})})]}),Object(pt.jsxs)("div",{className:"mb-3",children:[Object(pt.jsx)("small",{children:"Volume (24h)"}),Object(pt.jsx)("h5",{className:"mb-0",children:isNaN(Number(b.tokenVolume24h.toString()))?"...":Object(pt.jsx)(Xb,{noAproxSign:!0,amount:Object(O.e)({input:b.tokenVolume24h.toString(10),denomination:b.decimals,decimals:b.decimals,showLastNonZeroDecimal:!0,addCommas:!1}),usd:parseFloat(b.tokenPriceUSD)})})]})]})})}),Object(pt.jsx)("div",{className:"col-lg-8 h-100",children:Object(pt.jsx)(fs.a.Container,{id:"token-tabs",defaultActiveKey:o,onSelect:function(e){e&&l(e)},children:Object(pt.jsxs)(fs.a.Content,{children:[Object(pt.jsxs)("div",{className:"chart-tabs d-flex ml-3",children:[Object(pt.jsx)(ks.a.Link,{eventKey:"liquidity",className:"".concat("liquidity"===o?"active":""),children:"Liquidity"}),Object(pt.jsx)(ks.a.Link,{eventKey:"volume",className:"".concat("volume"===o?"active":""),children:"Volume"}),Object(pt.jsx)(ks.a.Link,{eventKey:"price",className:"".concat("price"===o?"active":""),children:"Price"})]}),Object(pt.jsx)(fs.a.Pane,{eventKey:"liquidity",children:Object(pt.jsx)(bs,{title:" ",error:"Unable to load Liquidity Chart",type:"line",metric:"lockedValueUSD",commonData:i,tabKey:o,initialTimeframe:as.day,availableTimeframes:[as.day,as.week,as.month],specificToken:u.replace("-","")})}),Object(pt.jsx)(fs.a.Pane,{eventKey:"volume",children:Object(pt.jsx)(bs,{title:" ",error:"Unable to load Volume Chart",type:"bar",metric:"volumeUSD",commonData:i,tabKey:o,initialTimeframe:as.day,specificToken:u.replace("-","")})}),Object(pt.jsx)(fs.a.Pane,{eventKey:"price",children:Object(pt.jsx)(bs,{title:" ",error:"Unable to load Price Chart",type:"line",metric:"priceUSD",commonData:i,tabKey:o,initialTimeframe:as.day,specificToken:u.replace("-",""),previewDecimals:a===_?6:2})})]})})})]}),Object(pt.jsx)("div",{className:"row mb-5",children:Object(pt.jsxs)("div",{className:"col-12",children:[Object(pt.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-spacer",children:Object(pt.jsx)("h3",{className:"mb-0",children:"Pools"})}),Object(pt.jsx)(Fs,{pairs:t,commonData:i})]})})]})})},dc=function(){var e=Qs(),t=e.pairs,n=!e.pairsFetched,a=e.pairsFetchError,i=!n&&!a,r=Object(g.c)(Nt),s=Object(y.f)(Nh.analyticsTokensDetails,r.pathname),c=s&&s.params&&s.params.token?s.params.token:"",o=t.filter((function(e){return e.firstToken.identifier===c||e.secondToken.identifier===c||U===c}));return Object(pt.jsxs)(Hs,{children:[n&&!a&&Object(pt.jsx)($p,{}),a&&Object(pt.jsx)(Up,{icon:N.r,title:"Unable to load token"}),i&&Object(pt.jsx)(pt.Fragment,{children:o.length>0?Object(pt.jsx)(lc,{pairs:o,allPairs:t,token:c}):Object(pt.jsx)(Up,{icon:N.r,title:"Unable to load token"})})]})},uc=function(){return Object(pt.jsxs)("div",{children:[Object(pt.jsx)("h3",{className:"text-center my-spacer",children:"Maiar Exchange Protocol Disclaimer"}),Object(pt.jsx)("p",{children:"Maiar Exchange is a decentralized peer-to-peer protocol that people can use to create liquidity and trade ESDT tokens. The Maiar Exchange protocol is made up of free, public, open-source or source-available software including a set of smart contracts that are deployed on the Elrond Blockchain. Your use of the Maiar Exchange protocol involves various risks, including, but not limited to, losses while digital assets are being supplied to the Maiar Exchange protocol and losses due to the fluctuation of prices of tokens in a trading pair or liquidity pool. Before using the Maiar Exchange protocol, you should review the relevant documentation to make sure you understand how the Maiar Exchange protocol works."}),Object(pt.jsx)("p",{children:"Additionally, just as you can access email email protocols such as SMTP through multiple email clients, you can access the Maiar Exchange protocol through dozens of web or mobile interfaces. You are responsible for doing your own diligence on those interfaces to understand the fees and risks they present."}),Object(pt.jsx)("p",{children:'AS DESCRIBED IN THE MAIAR EXCHANGE PROTOCOL LICENSES, THE MAIAR EXCHANGE PROTOCOL IS PROVIDED "AS IS", AT YOUR OWN RISK, AND WITHOUT WARRANTIES OF ANY KIND. Although Elrond Network SRL ( "Elrond" ) developed much of the initial code for the Maiar Exchange protocol, it does not provide, own, or control the Maiar Exchange protocol, which is run by smart contracts deployed on the Elrond blockchain. No developer or entity involved in creating the Maiar Exchange protocol will be liable for any claims or damages whatsoever associated with your use, inability to use, or your interaction with other users of, the Maiar Exchange protocol, including any direct, indirect, incidental, special, exemplary, punitive or consequential damages, or loss of profits, cryptocurrencies, tokens, or anything else of value.'})]})},mc=n(1143),bc=["Core","Ecosystem","Community","Experimental"],jc=function(e){return e.sort((function(e,t){var n=bc.indexOf(e.type),a=bc.indexOf(t.type);return(n>-1?n:99)-(a>-1?a:99)}))},fc=function(){return Object(pt.jsx)("div",{className:"d-flex pool-type-legend",children:bc.map((function(e){return Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:0},overlay:function(t){return Object(pt.jsxs)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip"},t),{},{children:["Core"===e&&Object(pt.jsx)(pt.Fragment,{children:"Projects of strategic significance."}),"Ecosystem"===e&&Object(pt.jsx)(pt.Fragment,{children:"Projects with working products & established communities."}),"Community"===e&&Object(pt.jsx)(pt.Fragment,{children:"Projects with significant community support."}),"Experimental"===e&&Object(pt.jsx)(pt.Fragment,{children:"Experimental listings, explore with caution."})]}))},children:Object(pt.jsx)("small",{className:"pool-type ".concat(e.toLowerCase()," py-2 px-3 flex-grow-1 flex-shrink-0"),children:e},e)},e)}))})},hc={rewardsFetched:!1,stakeAndRewards:[],totalRewards:"0",totalStaked:"0",denomination:0},pc=Se((function(e){return e.farmStakeRewards}),(function(e){return e.farmStakeRewardsCollection})),xc=Se(pc,(function(e,t){return t}),(function(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:hc})),vc=function(e){var t=e.name,n=e.children,a=e.containerClass,i=void 0===a?"":a,r=e.onClick;return Object(pt.jsxs)("div",{onClick:r,className:"header-item mx-1 d-flex flex-column flex-sm-row flex-lg-column justify-content-between mb-2 mb-lg-0 flex-shrink-1 ".concat(i),children:[Object(pt.jsx)("div",{className:"text-secondary mb-lg-1",children:t}),Object(pt.jsx)("div",{className:"d-flex flex-wrap",children:n})]})},Oc=function(e){var t,n=e.farm,a=e.pair,i=e.size,r=void 0===i?"lg":i;return Object(pt.jsx)(pt.Fragment,{children:a?Object(pt.jsx)(vv,{pair:a,size:r}):Object(pt.jsx)("div",{className:"token-icon-".concat(r," pool-icon"),children:Object(pt.jsx)(Xh,{token:null!==(t=null===n||void 0===n?void 0:n.farmedToken.identifier)&&void 0!==t?t:""})})})},kc=n(118),gc=function(e){var t,n,a,i=e.farm,r=e.pair,s=e.proxy,c=e.farmMultiplierBadge,o=e.shortName,l=Boolean(null===s||void 0===s?void 0:s.intermediatedFarms.includes(null!==(t=null===i||void 0===i?void 0:i.address)&&void 0!==t?t:"")),d=Boolean(null===i||void 0===i?void 0:i.requireWhitelist);return o?Object(pt.jsx)(pt.Fragment,{children:r?Object(pt.jsx)(Ov,{pair:r}):Object(pt.jsx)(Rt,{token:d?V:null!==(a=null===i||void 0===i?void 0:i.farmingToken.identifier)&&void 0!==a?a:""})}):Object(pt.jsx)(pt.Fragment,{children:r?Object(pt.jsxs)("div",{className:"d-flex align-items-start h6 mb-0 font-weight-bold",children:[Object(pt.jsx)(Ov,{pair:r})," ",c]}):Object(pt.jsx)("div",{className:"d-flex",children:d?Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)(F.a,{icon:kc.faLock,className:"text-warning mr-2"}),"Stake\xa0",Object(pt.jsx)(Rt,{token:V})]}):Object(pt.jsxs)(pt.Fragment,{children:["Stake\xa0",Object(pt.jsx)(Rt,{token:null!==(n=null===i||void 0===i?void 0:i.farmingToken.identifier)&&void 0!==n?n:""}),l&&Object(pt.jsxs)(pt.Fragment,{children:["\xa0/\xa0",Object(pt.jsx)(Rt,{token:V})]})]})})})},yc=function(e,t){if(!Ce(e))return"...";var n=null!==t&&void 0!==t?t:0,a=new je.a(e).dividedBy(365).plus(1).pow(365).minus(1).times(100);return a.isGreaterThan(1e4)?">10k":Ye(a.toString(10),n)},wc=function(e,t){if(!Ce(e))return"...";var n=null!==t&&void 0!==t?t:0,a=new je.a(e).multipliedBy(100);return a.isGreaterThan(1e4)?">10k":Ye(a.toString(10),n)},Tc=function(e,t,n){var a=Qe(e);if(!Ce(a)||!Ce(t))return"...";var i=null!==n&&void 0!==n?n:0,r=new je.a(a),s=new je.a(t),c=r.minus(s.multipliedBy(100));return c.isGreaterThan(1e4)?">10k":Ye(c.toString(10),i)},Nc=function(e){var t,n,a=e.unlockedRewardsFarmRate,i=e.lockedRewardsFarmRate,r=a||i?new je.a(null!==(t=null===a||void 0===a?void 0:a.totalValueLockedUSD)&&void 0!==t?t:0).plus(new je.a(null!==(n=null===i||void 0===i?void 0:i.totalValueLockedUSD)&&void 0!==n?n:0)):void 0;return r?"".concat(Ye(r.toFixed(0),0)):"..."},Sc=function(e){var t=e.unlockedTotalRewards,n=e.unlockedTotalStaked,a=e.lockedTotalRewards,i=e.lockedTotalStaked;return{totalStaked:new je.a(n).plus(new je.a(i)).toFixed(0),totalRewards:new je.a(t).plus(new je.a(a)).toFixed(0)}},Ac=function(e){var t=e.rewardsFetched,n=e.totalStaked,a=e.totalRewards,i=e.farmingTokenDecimals,r=e.farmedTokenDecimals;return{denominatedTotalStaked:t?He({amount:n,denomination:i,showLastNonZeroDecimal:!0}):"...",denominatedTotalStakedWithCommas:t?He({amount:n,denomination:i,addCommas:!0,decimals:2}):"...",denominatedTotalRewards:t?He({amount:a,denomination:r,showLastNonZeroDecimal:!0}):"...",denominatedTotalRewardsWithCommas:t?He({amount:a,denomination:r,addCommas:!0,decimals:2}):"..."}},Fc=function(e){var t=e.farmingTokenId,n=e.requireWhitelist;return t===_&&!Boolean(n)},Pc=n(1150),Dc=["title","titleId"];function Rc(){return Rc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rc.apply(this,arguments)}function Ec(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Lc(e,t){var n=e.title,a=e.titleId,i=Ec(e,Dc);return c.createElement("svg",Rc({xmlns:"http://www.w3.org/2000/svg",width:192,height:108,viewBox:"0 0 192 108",ref:t,"aria-labelledby":a},i),n?c.createElement("title",{id:a},n):null,ms||(ms=c.createElement("g",{transform:"translate(-1632.188 -431.001)"},c.createElement("g",{transform:"translate(1631.999 436.13)"},c.createElement("text",{id:"_","data-name":"+",transform:"translate(21.188 13.871)",fill:"#1f43f6",fontSize:25,fontFamily:"Helvetica"},c.createElement("tspan",{x:-7.3,y:0},"+")),c.createElement("text",{id:"_2","data-name":"+",transform:"translate(6.188 74.871)",fill:"#1f43f6",fontSize:20,fontFamily:"Helvetica"},c.createElement("tspan",{x:-5.84,y:0},"+")),c.createElement("text",{id:"_3","data-name":"+",transform:"translate(186.188 35.871)",fill:"#1f43f6",fontSize:20,fontFamily:"Helvetica"},c.createElement("tspan",{x:-5.84,y:0},"+")),c.createElement("text",{id:"_4","data-name":"+",transform:"translate(171.188 98.871)",fill:"#1f43f6",fontSize:16,fontFamily:"Helvetica"},c.createElement("tspan",{x:-4.672,y:0},"+"))))))}var Cc,Ic,qc,Mc,Bc,Uc,$c,_c,Vc,Wc,zc,Hc=c.forwardRef(Lc),Yc=(n.p,Object(p.gql)(Cc||(Cc=Object(Bi.a)(["\n  query (\n    $farmAddress: String!\n    $wrappedFarmTokenID: String!\n    $wrappedFarmTokenNonce: Int!\n    $amount: String!\n    $lockRewards: Boolean\n  ) {\n    claimFarmRewardsProxy(\n      farmAddress: $farmAddress\n      wrappedFarmTokenID: $wrappedFarmTokenID\n      wrappedFarmTokenNonce: $wrappedFarmTokenNonce\n      amount: $amount\n      lockRewards: $lockRewards\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"])))),Gc=Object(p.gql)(Ic||(Ic=Object(Bi.a)(["\n  query (\n    $farmAddress: String!\n    $farmTokenID: String!\n    $farmTokenNonce: Int!\n    $amount: String!\n    $lockRewards: Boolean\n  ) {\n    claimRewards(\n      farmAddress: $farmAddress\n      farmTokenID: $farmTokenID\n      farmTokenNonce: $farmTokenNonce\n      amount: $amount\n      lockRewards: $lockRewards\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Zc=Object(p.gql)(qc||(qc=Object(Bi.a)(["\n  query ($inputTokens: InputTokenModel!) {\n    claimRewardsFarmLockedToken(inputTokens: $inputTokens) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Kc=function(e){var t=e.ref,n=e.farmAddress,a=e.callbackRoute,i=e.hideModal,r=ur(),s=Wh(),c=o.a.useState(!1),l=Object(T.a)(c,2),d=l[0],u=l[1];return{claimRewards:function(e){var c=e.variables,o=e.useProxy,l=e.useSimpleLock;if(null!==t.current){var d,m;switch(u(!0),!0){case o:d=Yc,m="claimFarmRewardsProxy";break;case l:d=Zc,m="claimRewardsFarmLockedToken";break;default:d=Gc,m="claimRewards"}r({query:d,variables:c}).then((function(e){if(null!==t.current&&e.data&&e.data.data){var r=[me(e.data.data[m])];s({transactions:r,callbackRoute:a,processingMessage:"Harvesting rewards",successMessage:"Rewards harvested",submittedMessage:"Harvested rewards transactions submitted",pendingFarmAddress:n}),u(!1),i()}else u(!1)})).catch((function(e){console.log("claimRewards",e),u(!1)}))}},claimRewardsLoading:d}},Xc=Object(p.gql)(Mc||(Mc=Object(Bi.a)(["\n  query (\n    $farmAddress: String!\n    $farmTokenID: String!\n    $farmTokenNonce: Int!\n    $amount: String!\n    $lockRewards: Boolean\n  ) {\n    compoundRewards(\n      farmAddress: $farmAddress\n      farmTokenID: $farmTokenID\n      farmTokenNonce: $farmTokenNonce\n      amount: $amount\n      lockRewards: $lockRewards\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Qc=Object(p.gql)(Bc||(Bc=Object(Bi.a)(["\n  query (\n    $farmAddress: String!\n    $tokenID: String!\n    $tokenNonce: Int!\n    $amount: String!\n    $lockRewards: Boolean\n  ) {\n    compoundRewardsProxy(\n      farmAddress: $farmAddress\n      tokenID: $tokenID\n      tokenNonce: $tokenNonce\n      amount: $amount\n      lockRewards: $lockRewards\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Jc=function(e){var t=e.ref,n=e.callbackRoute,a=e.hideModal,i=ur(),r=Wh(),s=c.useState(!1),o=Object(T.a)(s,2),l=o[0],d=o[1];return{compoundRewards:function(e){var s=e.variables,c=e.useProxy;null!==t.current&&(d(!0),i({query:c?Qc:Xc,variables:s}).then((function(e){if(null!==t.current&&e.data&&e.data.data){var i=[me(c?e.data.data.compoundRewardsProxy:e.data.data.compoundRewards)];r({transactions:i,callbackRoute:n,processingMessage:"Reinvesting rewards",successMessage:"Rewards reinvested",submittedMessage:"Reinvest rewards transactions submitted",pendingFarmAddress:s.farmAddress}),d(!1),a()}else d(!1)})).catch((function(e){console.log("compoundRewards",e),d(!1)})))},compoundRewardsLoading:l}},eo=function(e){var t,n,i=e.farmRate,r=e.pair,s=e.accountFarmToken,c=e.rewardsToken,l=e.showModal,d=e.modalType,u=e.setShowModal,b=o.a.useRef(null),j=a.denominateAmount,f=s.collection,h=s.nonce,p=s.balance,x=s.farmAddress,v=s.decodedWrappedFarmTokenAttributes,O=s.decodedFarmProxyTokenAttributes,k=s.stakeDetails,g=Nh.farms,y=Boolean(v),w=Boolean(O),T="lockedRewards"===(null===i||void 0===i?void 0:i.rewardType),N=function(e){return function(){u(e)}},S=Kc({ref:b,farmAddress:x,callbackRoute:g,hideModal:function(){u(!1)}}),A=S.claimRewards,F=S.claimRewardsLoading,P=Jc({ref:b,callbackRoute:g,hideModal:function(){u(!1)}}),D=P.compoundRewards,R=P.compoundRewardsLoading;return Object(pt.jsx)(Pc.a,{show:l,backdrop:!0,onHide:N(!1),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("div",{ref:b,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column align-items-center pt-spacer",children:[Object(pt.jsxs)("div",{className:"rewards-icon-container d-flex justify-content-center w-100 mb-spacer",children:[Object(pt.jsx)(Hc,{className:"rewards-bg position-absolute-center"}),Object(pt.jsx)(Oc,{farm:i,pair:r,size:"xl"})]}),Object(pt.jsxs)("div",{className:"mb-2","data-testid":"modalTitle",children:["claim"===d?"Harvest":"Reinvest"," Rewards"]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center text-success h4",children:[Object(pt.jsxs)("div",{className:"mr-2","data-testid":"modalRewards",children:["claim"===d?"+":"",j({amount:null!==(t=null===k||void 0===k?void 0:k.rewards)&&void 0!==t?t:"0",denomination:null!==(n=null===i||void 0===i?void 0:i.farmedToken.decimals)&&void 0!==n?n:0,addCommas:!0})]}),Object(pt.jsx)(yt,{token:c})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center mt-spacer w-100",children:[Object(pt.jsx)("button",{className:"btn btn-dark btn-lg flex-even mr-2","data-testid":"cancelBtn",onClick:N(!1),children:"Cancel"}),Object(pt.jsx)("button",{type:"submit",className:"btn ".concat("claim"===d?"btn-primary":"btn-success"," btn-lg flex-even ml-2"),disabled:F||R,onClick:function(){"claim"===d&&function(){var e;if(w)e={inputTokens:{tokenID:f,nonce:h,amount:p}};else{var t={farmAddress:x,amount:p,lockRewards:T};e=y?Object(m.a)(Object(m.a)({},t),{},{wrappedFarmTokenID:f,wrappedFarmTokenNonce:h}):Object(m.a)(Object(m.a)({},t),{},{farmTokenID:f,farmTokenNonce:h})}A({variables:e,useProxy:y,useSimpleLock:w})}(),"compound"===d&&function(){var e=Object(m.a)({farmAddress:x,amount:p,lockRewards:T},y?{tokenID:f,tokenNonce:h}:{farmTokenID:f,farmTokenNonce:h});D({variables:e,useProxy:y})}()},children:F||R?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsxs)(pt.Fragment,{children:["claim"===d?"Harvest":"Reinvest","\xa0Reward"]})})]}),Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign ",Object(pt.jsx)("strong",{children:"1 transaction"}),Object(pt.jsx)(wo,{info:Object(pt.jsxs)("div",{className:"text-left",children:["claim"===d?"Harvest":"Reinvest"," rewards"]})})]})]})})})},to=function(e){var t=e.hasRewards,n=e.rewardsToken,a=e.farmRate,i=e.pair,r=e.accountFarmToken,s=e.modalType,o=c.useState(!1),l=Object(T.a)(o,2),d=l[0],u=l[1],b="Active"===(null===a||void 0===a?void 0:a.state),j="compound"===s?"reinvestBtn":"harvestBtn",f="compound"===s?"Reinvest":"Harvest",h="compound"===s?"btn-success":"btn-primary",p=b?void 0:Ll,x="Rewards can be ".concat("compound"===s?"reinvested":"harvested"," every ").concat(X," minutes with a minimum of $").concat(K),v=null!==p&&void 0!==p?p:x;return{ClaimOrCompoundBtn:c.useMemo((function(){return t&&b?Object(pt.jsx)("button",{className:"farm-action-btn btn mr-lg-3 mb-2 mb-lg-0 ".concat(h),"data-testid":j,onClick:function(){u(!0)},children:f}):Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-compound-or-harvest-".concat(r.identifier)},e),{},{children:Object(pt.jsx)("div",{className:"d-flex justify-content-center flex-wrap",children:v})}))},children:Object(pt.jsx)("span",{children:Object(pt.jsx)("div",{className:"farm-action-btn btn disabled mr-lg-3 mb-2 mb-lg-0 w-100 w-lg-auto ".concat(h),children:f})})})}),[r,t,f,h,v,j,b]),ClaimOrCompoundModal:c.useMemo((function(){return d?Object(pt.jsx)(eo,{farmRate:a,pair:i,accountFarmToken:r,rewardsToken:n,showModal:d,modalType:s,setShowModal:function(e){u(e)}}):null}),[i,n,r,s,d,a]),showModal:d}},no=n(313),ao=n(158),io=Object(p.gql)(Uc||(Uc=Object(Bi.a)(["\n  query (\n    $farmAddress: String!\n    $farmTokenID: String!\n    $farmTokenNonce: Int!\n    $amount: String!\n    $lockRewards: Boolean\n    $withPenalty: Boolean\n  ) {\n    exitFarm(\n      farmAddress: $farmAddress\n      farmTokenID: $farmTokenID\n      farmTokenNonce: $farmTokenNonce\n      amount: $amount\n      lockRewards: $lockRewards\n      withPenalty: $withPenalty\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),ro=Object(p.gql)($c||($c=Object(Bi.a)(["\n  query ($inputTokens: InputTokenModel!) {\n    exitFarmLockedToken(inputTokens: $inputTokens) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),so=Object(p.gql)(_c||(_c=Object(Bi.a)(["\n  query (\n    $farmAddress: String!\n    $wrappedFarmTokenID: String!\n    $wrappedFarmTokenNonce: Int!\n    $amount: String!\n    $lockRewards: Boolean\n    $withPenalty: Boolean\n  ) {\n    exitFarmProxy(\n      farmAddress: $farmAddress\n      wrappedFarmTokenID: $wrappedFarmTokenID\n      wrappedFarmTokenNonce: $wrappedFarmTokenNonce\n      amount: $amount\n      lockRewards: $lockRewards\n      withPenalty: $withPenalty\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),co=function(e){var t=e.ref,n=e.farmAddress,a=e.callbackRoute,i=e.hideModal,r=ur(),s=Wh(),c=o.a.useState(!1),l=Object(T.a)(c,2),d=l[0],u=l[1];return{exitFarm:function(e){var c,o,l=e.variables,d=e.useProxy,m=e.useSimpleLock;switch(u(!0),!0){case d:c=so,o="exitFarmProxy";break;case m:c=ro,o="exitFarmLockedToken";break;default:c=io,o="exitFarm"}r({query:c,variables:l}).then((function(e){if(t&&null!==t.current)if(e.data&&e.data.data){var r=[me(e.data.data[o])];s({transactions:r,callbackRoute:a,processingMessage:"Removing farm stake",successMessage:"Farm stake removed",submittedMessage:"Remove farm stake transactions submitted",pendingFarmAddress:n}),u(!1),i()}else u(!1)})).catch((function(e){console.log("exitFarm",e),u(!1)}))},exitFarmLoading:d}},oo=Object(p.gql)(Vc||(Vc=Object(Bi.a)(["\n  query ($getExitFarmTokensArgs: CalculateRewardsArgs!) {\n    getExitFarmTokens(args: $getExitFarmTokensArgs) {\n      farmingTokens\n      rewards\n    }\n  }\n"]))),lo=function(){var e=c.useState(),t=Object(T.a)(e,2),n=t[0],a=t[1],i=Object(p.useLazyQuery)(oo,{displayName:"getExitFarmTokens",onCompleted:function(e){e&&e.getExitFarmTokens&&a(e.getExitFarmTokens)}}),r=Object(T.a)(i,2),s=r[0],o=r[1],l=o.loading,d=o.error;return{getExitFarmTokens:s,exitFarmTokensData:n,exitFarmTokensLoading:l,exitFarmTokensError:Boolean(d)}},uo=function(e){var t,n,i,r,s=e.tokenAmount,c=e.accountFarmToken,o=e.onMaxClick,l=a.denominateAmount,d=null!==(t=c.decimals)&&void 0!==t?t:0,u=Boolean(null===(n=c.stakeDetails)||void 0===n?void 0:n.lockedRewards),m=null!==(i=null===(r=c.stakeDetails)||void 0===r?void 0:r.aprMultiplier)&&void 0!==i?i:1,b=new je.a(c.balance),j=u?b.dividedBy(m).toFixed(0):c.balance,f=l({amount:j,denomination:d}),h="0"!==f&&parseFloat(s)!==parseFloat(f),p=function(e){e.preventDefault(),o&&o(f)},x=h?void 0:c.balance;return{MaxBtn:function(){return h?Object(pt.jsx)("a",{href:"/",className:"badge badge-pill badge-primary text-uppercase",onClick:p,onMouseDown:function(e){e.preventDefault()},children:"Max"}):null},AvailableBalance:function(){return Object(pt.jsx)(pt.Fragment,{children:l({amount:j,denomination:d,addCommas:!0})})},balance:f,denomination:d,completeMaxBalanceForQuery:x}},mo=function(e){var t=o.a.useRef(null),n=Object(g.c)(St),a=o.a.useState(),i=Object(T.a)(a,2),r=i[0],s=i[1],c=o.a.useState("0"),l=Object(T.a)(c,2),d=l[0],u=l[1],m=o.a.useState("0"),b=Object(T.a)(m,2),j=b[0],f=b[1],h=o.a.useState("0"),p=Object(T.a)(h,2),x=p[0],v=p[1],O=o.a.useState("0"),k=Object(T.a)(O,2),y=k[0],w=k[1];o.a.useEffect((function(){s(n&&e>0?1===e?he()(n.nextEpochDate):he()(n.nextEpochDate).add(n.epochDurationSec*(e-1),"seconds"):void 0)}),[e,n]);var N=function(){if(r&&null!==t.current){var e=he()(),n=he()(r).diff(e),a=he.a.duration(n),i=Math.floor(a.days()),s=Math.floor(a.hours()),c=a.minutes(),o=a.seconds();u("".concat(i>0?i:0)),f("".concat(s>0?s:0)),v("".concat(c>0?c:0)),w("".concat(o>0?o:0))}};o.a.useEffect((function(){if(r){N();var e=setInterval(N,1e3);return function(){clearInterval(e)}}}),[r]);return{WithdrawPeriodCountdown:function(){return r?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"d-none",ref:t}),parseInt(d)>0?"".concat(d,"d"):""," ",j,"h ",x,"m"," ",0===parseInt(d)?"".concat(y,"s"):""]}):null},showCountdown:Boolean(r)}},bo=function(e){var t,n,a,i,r=e.farmRate,s=e.pair,c=e.proxy,l=e.accountFarmToken,d=e.showModal,u=e.setShowModal,b=o.a.useRef(null),j=l.identifier,f=l.attributes,h=l.collection,p=l.nonce,x=l.farmAddress,v=l.stakeDetails,O=l.rewardType,k=l.decodedWrappedFarmTokenAttributes,g=l.decodedFarmProxyTokenAttributes,y=c.wrappedLpToken,w=c.lockedAssetToken,N=c.simpleLock,S=null!==(t=null===N||void 0===N?void 0:N.lpProxyToken.collection)&&void 0!==t?t:"",A=Boolean(k),P=Boolean(g),D="lockedRewards"===O,R=Boolean((null===v||void 0===v?void 0:v.remainingFarmingEpochs)&&v.remainingFarmingEpochs>0),E=o.a.useState(""),L=Object(T.a)(E,2),C=L[0],I=L[1],q=o.a.useState(""),M=Object(T.a)(q,2),B=M[0],U=M[1],$=o.a.useState(""),_=Object(T.a)($,2),V=_[0],W=_[1];o.a.useEffect((function(){var e=null===r||void 0===r?void 0:r.farmingToken,t=null===r||void 0===r?void 0:r.farmedToken;if(e&&t&&r){if(s)I(A?y.collection:P?S:e.identifier),U(e.identifier);else{var n=Boolean(r.requireWhitelist),a=A||n?w.collection:e.identifier;I(a),U(a)}W(D?w.collection:t.identifier)}}),[r,c,l]);var z=function(e){return function(){u(e)}},H=co({ref:b,farmAddress:x,callbackRoute:Nh.farms,hideModal:function(){u(!1)}}),Y=H.exitFarm,G=H.exitFarmLoading,Z=Object(dt.a)().shape({amount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),de)})).test("minAmount","Must select an amount",(function(e){return!e||new be.BigNumber(e).isGreaterThan(0)})).test("funds","Insufficient funds",(function(e){if(void 0!==e){var t=new be.BigNumber(e);return new be.BigNumber(le).comparedTo(t)>=0}return!0}))}),K=function(e){return new be.BigNumber(ot(e,de)).toString(10)},X=Object(qt.a)({initialValues:{amount:""},validationSchema:Z,onSubmit:function(){var e,t=ue||K(ne.amount);if(P){e={inputTokens:{tokenID:h,nonce:p,amount:t}}}else{var n={amount:t,farmAddress:x,lockRewards:D,withPenalty:R};e=A?Object(m.a)(Object(m.a)({},n),{},{wrappedFarmTokenID:h,wrappedFarmTokenNonce:p}):Object(m.a)(Object(m.a)({},n),{},{farmTokenID:h,farmTokenNonce:p})}Y({variables:e,useProxy:A,useSimpleLock:P})}}),Q=X.setFieldValue,J=X.handleSubmit,ee=X.handleBlur,te=X.handleChange,ne=X.values,ae=X.errors,ie=X.touched,re=ne.amount,se=uo({tokenAmount:re,accountFarmToken:l,onMaxClick:function(e){Q("amount",e,!0)}}),ce=se.MaxBtn,oe=se.AvailableBalance,le=se.balance,de=se.denomination,ue=se.completeMaxBalanceForQuery,me=lo(),je=me.getExitFarmTokens,fe=me.exitFarmTokensData,he=me.exitFarmTokensError,pe=Eh(re,500);o.a.useEffect((function(){if(Ce(re)){var e=null===k||void 0===k?void 0:k.farmTokenAttributes.attributes,t=null===g||void 0===g?void 0:g.farmTokenAttributes.attributes;je({variables:{getExitFarmTokensArgs:{farmAddress:x,identifier:j,liquidity:ue||K(re),attributes:e||(t||f)}}})}}),[pe,l]);var xe=C===V,ve=o.a.useState(),Oe=Object(T.a)(ve,2),ke=Oe[0],ge=Oe[1],ye=o.a.useState(),we=Object(T.a)(ye,2),Te=we[0],Ne=we[1];o.a.useEffect((function(){if(fe&&!he)if(xe){var e=new be.BigNumber(fe.farmingTokens),t=new be.BigNumber(fe.rewards);ge(e.plus(t).toString(10)),Ne(void 0)}else ge(fe.farmingTokens),Ne(fe.rewards);he&&(ge(void 0),Ne(void 0))}),[fe,he]);var Se=mo(null!==(n=null===v||void 0===v?void 0:v.remainingFarmingEpochs)&&void 0!==n?n:0),Ae=Se.WithdrawPeriodCountdown,Fe=Se.showCountdown;return Object(pt.jsx)(Pc.a,{show:d,backdrop:!0,onHide:z(!1),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("form",{onSubmit:J,noValidate:!0,ref:b,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mt-n2 lead",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Oc,{farm:r,pair:s})}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap","data-testid":"modalTitle",children:[Object(pt.jsx)("span",{children:"Withdraw from"}),"\xa0",Object(pt.jsx)(gc,{farm:r,pair:s,shortName:!0}),"\xa0",Object(pt.jsx)("span",{children:"farm"})]})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-spacer",children:[Object(pt.jsx)(oe,{}),Object(pt.jsxs)("span",{className:"text-secondary ml-1",children:[s?"LP":Object(pt.jsx)(Rt,{token:C})," staked"]})]}),Object(pt.jsxs)("div",{className:"form-group text-left mb-0",children:[Object(pt.jsx)("label",{htmlFor:"amount",className:"mb-2 line-height-1",children:"Amount"}),Object(pt.jsxs)("div",{className:"token-amount-input-max ".concat("amount"in ae&&"amount"in ie?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,name:"amount","data-testid":"amountInput",placeholder:"Amount",value:re,handleChange:te,handleBlur:ee}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:Object(pt.jsx)(ce,{})})]}),"amount"in ae&&"amount"in ie&&Object(pt.jsx)("div",{className:"invalid-feedback mt-2","data-testid":"invalidAmount",children:ae.amount})]}),Object(pt.jsx)("div",{className:"my-spacer",children:Object(pt.jsx)(ap,{balance:le,amount:re,onChange:function(e){Q("amount",e,!0)}})}),Object(pt.jsx)("div",{className:"mb-2 text-left",children:"You will receive"}),Object(pt.jsx)("div",{className:"card ".concat(Fe?"mb-3":"mb-spacer"),children:Object(pt.jsxs)("div",{className:"card-body",children:[Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:C})}),Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(yt,{token:B})})]}),Object(pt.jsx)("div",{className:"ml-3","data-testid":"receivedLpAmount",children:ke?Object(pt.jsx)(pt.Fragment,{children:He({amount:ke,denomination:null!==(a=null===r||void 0===r?void 0:r.farmingToken.decimals)&&void 0!==a?a:0,addCommas:!0})}):Object(pt.jsx)(pt.Fragment,{children:"..."})})]}),!xe&&Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-2",children:[Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:V})}),Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(yt,{token:V})})]}),Object(pt.jsx)("div",{className:"ml-3",children:Te?Object(pt.jsx)(pt.Fragment,{children:He({amount:Te,denomination:null!==(i=null===r||void 0===r?void 0:r.farmedToken.decimals)&&void 0!==i?i:0,addCommas:!0})}):Object(pt.jsx)(pt.Fragment,{children:"..."})})]})]})}),Fe&&Object(pt.jsxs)("small",{className:"alert alert-warning align-items-center d-flex p-3 mb-spacer",role:"alert",children:[Object(pt.jsx)(F.a,{icon:ao.faInfoCircle,size:"lg",className:"alert-icon mr-2"}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap",children:[r?r.penaltyPercent/100:"...","% penalty if you withdraw now (",Object(pt.jsx)(Ae,{})," left until penalty expires)."]})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("button",{className:"btn btn-dark btn-lg flex-even mr-2",onClick:z(!1),children:"Cancel"}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg flex-even ml-2",disabled:G,children:G?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Withdraw"})})]}),Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign ",Object(pt.jsx)("strong",{children:"1 transaction"}),Object(pt.jsx)(wo,{info:Object(pt.jsx)("div",{className:"text-left",children:"Withdraw farm stake"})})]})]})})})},jo=function(e){var t,n=e.farmRate,a=e.accountFarmToken,i=e.proxy,r=e.pair,s=Fc({farmingTokenId:null!==(t=null===n||void 0===n?void 0:n.farmingToken.identifier)&&void 0!==t?t:"",requireWhitelist:Boolean(null===n||void 0===n?void 0:n.requireWhitelist)}),c=o.a.useState(!1),l=Object(T.a)(c,2),d=l[0],u=l[1],b=mo(a.stakeDetails?a.stakeDetails.remainingFarmingEpochs:0),j=b.WithdrawPeriodCountdown,f=b.showCountdown,h="Active"===(null===n||void 0===n?void 0:n.state),p=h?"Can stake/withdraw every ".concat(X,"m."):Ll;return{ExitBtn:o.a.useMemo((function(){return h?Object(pt.jsx)(pt.Fragment,{children:f?Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip-".concat(a.identifier)},e),{},{children:Object(pt.jsxs)("ul",{className:"mb-0 pl-3",children:[Object(pt.jsxs)("li",{className:"text-left",children:[n?n.penaltyPercent/100:"...","% penalty if you withdraw now",Object(pt.jsx)("br",{})," (",Object(pt.jsx)(j,{})," left until penalty expires)."]}),Object(pt.jsxs)("li",{className:"text-left",children:["Depositing ",s?"or reinvesting ":"","resets the penalty to"," ",Object(pt.jsx)(Sp,{minimumFarmingEpochs:a.minimumFarmingEpochs}),"."]})]})}))},children:Object(pt.jsx)("button",{className:"farm-action-btn btn btn-secondary","data-testid":"exitBtn",onClick:function(){u(!0)},children:Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[f&&Object(pt.jsx)(F.a,{icon:no.faClock,className:"mr-2"}),"Withdraw"]})})}):Object(pt.jsx)("button",{className:"farm-action-btn btn btn-secondary","data-testid":"exitBtn",onClick:function(){u(!0)},children:Object(pt.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:"Withdraw"})})}):Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-exit-farm-".concat(a.farmAddress)},e),{},{children:Object(pt.jsx)("div",{className:"d-flex justify-content-center flex-wrap",children:p})}))},children:Object(pt.jsx)("span",{children:Object(pt.jsx)("div",{className:"farm-action-btn btn btn-secondary disabled",onClick:function(e){e.stopPropagation()},children:"Withdraw"})})})}),[f,j,a,n,h,p]),ExitModal:o.a.useMemo((function(){return d?Object(pt.jsx)(bo,{farmRate:n,pair:r,proxy:i,accountFarmToken:a,showModal:d,setShowModal:function(e){u(e)}}):null}),[n,r,i,a,d]),showModal:d}},fo=function(e){var t=e.pairRate,n=e.firstTokenAmount,a=e.secondTokenAmount;if(!t)return"0";var i=He({amount:n,denomination:t.firstToken.decimals,showLastNonZeroDecimal:!0}),r=He({amount:a,denomination:t.secondToken.decimals,showLastNonZeroDecimal:!0}),s=new je.a(i).multipliedBy(t.firstTokenPriceUSD),c=new je.a(r).multipliedBy(t.secondTokenPriceUSD);return s.plus(c).toFixed(2)},ho=function(e){var t=e.pairRate,n=e.amount,a=new je.a(t?t.info.totalSupply:0),i=new je.a(t?t.info.reserves0:0),r=new je.a(t?t.info.reserves1:0),s=new je.a(n).multipliedBy(100).dividedBy(a);return{sharePercentage:s,firstTokenTotalStake:i.times(s).dividedToIntegerBy(100).toString(10),secondTokenTotalStake:r.times(s).dividedToIntegerBy(100).toString(10)}},po=function(e){var t=e.pool,n=e.pairRate,a=new je.a(0);t.stake.forEach((function(e){var t=new je.a(e.balance);a=a.plus(t)}));var i=ho({pairRate:n,amount:a.toString(10)}),r=i.sharePercentage,s=i.firstTokenTotalStake,c=i.secondTokenTotalStake,o=r.isFinite()?Ye(r.valueOf()):"0",l=fo({pairRate:n,firstTokenAmount:s,secondTokenAmount:c});return{displaySharePercentage:o,bNaccountTotalLp:a,accountTotalLpUsdValue:"0"!==l?Ye(l,2):l,firstTokenTotalStake:s,secondTokenTotalStake:c}},xo=function(e){var t=e.pair,n=e.amount,a=Object(g.c)(Br),i=Ge({pairsRate:a.pairsRate,pairAddress:t?t.address:""});if(i&&n){var r=ho({pairRate:i,amount:n}),s=r.firstTokenTotalStake,c=r.secondTokenTotalStake;return fo({pairRate:i,firstTokenAmount:s,secondTokenAmount:c})}return"..."},vo=function(e){var t,n,a=e.accountFarmToken,i=a.balance,r=a.collection,s=a.stakeDetails,c=a.decodedWrappedFarmTokenAttributes,o=a.decodedFarmProxyTokenAttributes,l=new je.a(i),d=null===c||void 0===c?void 0:c.farmTokenID,u=null===o||void 0===o?void 0:o.farmTokenID,m=d||(u||r),b=new je.a(null!==(t=null===s||void 0===s?void 0:s.compoundedReward)&&void 0!==t?t:"0"),j=null!==(n=null===s||void 0===s?void 0:s.aprMultiplier)&&void 0!==n?n:1,f=j>1?l.dividedToIntegerBy(j).toString(10):i;return{showCompoundedRewards:b.isGreaterThan(0),compoundedRewards:b.toString(10),stakedTokenId:m,stakedLP:f}},Oo=function(e){var t,n,a=e.stake,i=e.farmRate,r=new je.a(a),s=new je.a(null!==(t=null===i||void 0===i?void 0:i.farmTokenSupply)&&void 0!==t?t:0),c=new je.a(null!==(n=null===i||void 0===i?void 0:i.perBlockRewards)&&void 0!==n?n:0),o=r.dividedBy(s).times(100);return c.times(o).dividedBy(100).times(10).times(X)},ko=function(e){var t=e.farmRate,n=e.accountFarmToken,a=t?t.farmedTokenPriceUSD:"0",i=new je.a(n.stakeDetails?n.stakeDetails.rewards:"0"),r=He({amount:i.toString(10),denomination:t?t.farmedToken.decimals:18}),s=parseFloat(r)*parseFloat(a)>K,c=Oo({stake:n.balance,farmRate:t}),o=i.isGreaterThanOrEqualTo(c);return s&&o},go=function(e){var t,n,a,i,r=e.accountFarmToken,s=e.proxy,c=Object(g.c)(Br),o=Ze({farmAddress:r.farmAddress,farmsRate:c.farmsRate}),l=Boolean("lockedRewards"===r.rewardType||(null===(t=r.stakeDetails)||void 0===t?void 0:t.lockedRewards)),d=new je.a(null!==(n=null===(a=r.stakeDetails)||void 0===a?void 0:a.rewards)&&void 0!==n?n:"0");return{hasRewards:ko({farmRate:o,accountFarmToken:r}),rewardsToken:l?s.lockedAssetToken.collection:null!==(i=null===o||void 0===o?void 0:o.farmedToken.identifier)&&void 0!==i?i:"",rewardsAmount:d.toString(10),lockedRewards:l}},yo=n(653),wo=function(e){var t=e.icon,n=e.info,a=e.customClass,i=e.hide,r=void 0===i?400:i;return Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:r},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip"},e),{},{children:n}))},children:Object(pt.jsx)(F.a,{icon:t||yo.faInfoCircle,className:"text-secondary cursor-default ".concat(a||"ml-2"),onClick:function(e){e.stopPropagation()}})})},To=Object(p.gql)(Wc||(Wc=Object(Bi.a)(["\n  query ($liquidityAmount: String!, $pairAddress: String!) {\n    getLiquidityPosition(\n      liquidityAmount: $liquidityAmount\n      pairAddress: $pairAddress\n    ) {\n      firstTokenAmount\n      secondTokenAmount\n    }\n  }\n"]))),No=function(){var e=c.useState(),t=Object(T.a)(e,2),n=t[0],a=t[1],i=Object(p.useLazyQuery)(To,{displayName:"getLiquidityPosition",onCompleted:function(e){e&&e.getLiquidityPosition&&a(e.getLiquidityPosition)}}),r=Object(T.a)(i,2),s=r[0],o=r[1],l=o.loading,d=o.error;return{getLiquidityPosition:s,liquidityPositionData:n,liquidityPositionLoading:l,liquidityPositionError:Boolean(d)}},So=function(e){var t=e.lkesdtForInitialFarmTokens,n=e.delayedFarmInitialTokens,a=e.onContentUpdate,i=n.amount,r=n.isLockedToken,s=n.pair,c=No(),l=c.getLiquidityPosition,d=c.liquidityPositionData,u=o.a.useState(),m=Object(T.a)(u,2),b=m[0],j=m[1];o.a.useEffect((function(){l({variables:{liquidityAmount:i,pairAddress:s.address}})}),[]),o.a.useEffect((function(){if(d){var e=r&&s.firstToken.identifier===_,t=r&&s.secondToken.identifier===_,n=e?V:s.firstToken.identifier,i=t?V:s.secondToken.identifier;j({firstToken:n===U?$:n,firstAmount:He({amount:d.firstTokenAmount,denomination:s.firstToken.decimals,addCommas:!0}),secondToken:i===U?$:i,secondAmount:He({amount:d.secondTokenAmount,denomination:s.secondToken.decimals,addCommas:!0})}),a()}else j(void 0)}),[d]);var f=function(e){var n=null===t||void 0===t?void 0:t.find((function(t){var n=t.originalTokenID;return n===e||n===$}));return n?n.identifier:e};return b?Object(pt.jsxs)("div",{children:[Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:f(b.firstToken)})}),Object(pt.jsx)(yt,{token:b.firstToken})]}),Object(pt.jsxs)("div",{className:"ml-3 d-flex align-items-sm-center",children:[b.firstAmount," ",Object(pt.jsx)(Rt,{token:b.firstToken})]})]}),Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:f(b.secondToken)})}),Object(pt.jsx)(yt,{token:b.secondToken})]}),Object(pt.jsxs)("div",{className:"ml-3 d-flex align-items-sm-center",children:[b.secondAmount," ",Object(pt.jsx)(Rt,{token:b.secondToken})]})]})]}):Object(pt.jsx)("div",{className:"loading-dots",children:"."})},Ao=function(e){var t=e.delayedUnlockDates,n=e.onContentUpdate,a=t.lpProxyTokenDetails,i=t.lpProxyTokenIdentifier,r=t.proxy,s=Yh(r),c=s.fetchLkEsdtsUnlockDate,l=s.fetchAndDecodeLpProxyToken,d=s.lkesdtsUnlockDate;o.a.useEffect((function(){a&&c(a),i&&l(i)}),[]),o.a.useEffect((function(){d&&n(d)}),[d]);var u=d;return u?Object(pt.jsx)("div",{children:u.map((function(e,t){var n=e.originalTokenID,a=e.identifier,i=e.unlockText;return Object(pt.jsxs)("div",{className:"d-flex align-items-center ".concat(t<u.length-1?"mb-2":""),children:[Object(pt.jsx)(Xh,{token:a}),Object(pt.jsxs)("div",{className:"d-flex flex-column text-left ml-2",children:[Object(pt.jsx)(yt,{token:n}),Object(pt.jsx)("small",{className:"text-secondary",children:i})]})]},a)}))}):Object(pt.jsx)("div",{className:"loading-dots",children:"."})},Fo=function(e){var t=e.unlockSchedule,n=e.stats;if(t&&n){var a=[];return t.forEach((function(e){var t=pe({stats:n,epochs:e.epochs}),i=a.find((function(e){return null===t||void 0===t?void 0:t.isSame(pe({stats:n,epochs:e.epochs}),"hours")}));i?i.percent+=e.percent:a.push(Object(m.a)({},e))})),a}return t},Po=function(e){var t=e.unlockDate,n=xe(t),a=ve(t),i=n&&Boolean(null===t||void 0===t?void 0:t.isAfter(new Date));return Object(pt.jsxs)(pt.Fragment,{children:[a&&Object(pt.jsx)(pt.Fragment,{children:"Unlockable now"}),i&&Object(pt.jsxs)(pt.Fragment,{children:["Unlockable today (",t?t.format("hh:mm A"):"...",")"]}),!a&&!i&&Object(pt.jsxs)(pt.Fragment,{children:["Unlocks on ",t?t.format("MMMM Do YYYY"):"..."]})]})},Do=function(e){var t=e.delayedUnlockSchedule,n=e.onContentUpdate,a=t.proxy,i=t.unlockSchedule,r=t.identifier,s=Kh(a),c=s.fetchLKLPUnlockSchedule,l=s.fetchLKMEXUnlockSchedule,d=s.unlockSchedule,u=s.stats,m=t.unlockSchedule?Fo({unlockSchedule:i,stats:u}):void 0;o.a.useEffect((function(){var e=null===r||void 0===r?void 0:r.includes(a.lockedAssetToken.collection),t=null===r||void 0===r?void 0:r.includes(a.wrappedLpToken.collection);e&&r&&l(r),t&&r&&c(r)}),[]),o.a.useEffect((function(){d&&n()}),[d]);var b=null!==d&&void 0!==d?d:m;return b?Object(pt.jsx)("ul",{className:"mb-0 pl-3",children:b.map((function(e){var t=e.epochs,n=e.percent,a=pe({stats:u,epochs:t});return Object(pt.jsxs)("li",{className:"text-left",children:[n<100?"".concat(Number.isInteger(n)?n:n.toFixed(3),"% - "):"",Object(pt.jsx)(Po,{unlockDate:a})]},"".concat(t).concat(n))}))}):Object(pt.jsx)("div",{className:"loading-dots",children:"."})},Ro=function(e){var t=e.delayedUnlockDates,n=e.delayedUnlockSchedule,a=e.delayedFarmInitialTokens,i=e.staticText,r=o.a.useState(),s=Object(T.a)(r,2),c=s[0],l=s[1],d=function(e){e&&l(e),window.dispatchEvent(new Event("resize"))};return n||a||i||t?Object(pt.jsx)(wo,{customClass:"mr-2",info:Object(pt.jsxs)(pt.Fragment,{children:[i&&Object(pt.jsx)("div",{className:"d-flex text-left",children:i}),n&&Object(pt.jsxs)(pt.Fragment,{children:[i&&Object(pt.jsx)("hr",{className:"border-secondary my-1"}),Object(pt.jsx)(Do,{delayedUnlockSchedule:n,onContentUpdate:d})]}),t&&Object(pt.jsxs)(pt.Fragment,{children:[(n||i)&&Object(pt.jsx)("hr",{className:"border-secondary my-1"}),Object(pt.jsx)(Ao,{delayedUnlockDates:t,onContentUpdate:d})]}),a&&Object(pt.jsxs)(pt.Fragment,{children:[(t||n||i)&&Object(pt.jsx)("hr",{className:"border-secondary my-1"}),Object(pt.jsx)(So,{delayedFarmInitialTokens:a,lkesdtForInitialFarmTokens:c,onContentUpdate:d})]})]})}):null},Eo=function(e){var t=e.iconTokenId,n=e.labelTokenId,a=e.afterLabelText,i=void 0===a?"":a,r=e.reinvested,s=e.amount,c=e.denomination,o=e.usdPrice,l=e.lkLpOrLkMexIdentifier,d=e.lpProxyTokenIdentifier,u=e.proxy,m=e.pair,b=e.nonce,j=l?{identifier:l,proxy:u}:void 0,f=d?{lpProxyTokenIdentifier:d,proxy:u}:void 0,h=m?{amount:s,isLockedToken:t===u.wrappedFarmToken.collection,pair:m}:void 0;return Object(pt.jsxs)("div",{className:"d-flex align-items-center mr-2 mb-2 mb-lg-0 flex-even",children:[Object(pt.jsx)("div",{className:"flex-shrink-0 mr-2",children:Object(pt.jsx)(Xh,{token:t})}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center text-secondary",children:[b&&68020===b&&Object(pt.jsx)(pt.Fragment,{children:"\ud83c\udf81"})," ",Object(pt.jsx)(yt,{token:n}),i,Object(pt.jsx)("div",{className:r||j||h?"ml-1":"",children:Object(pt.jsx)(Ro,{staticText:r,delayedUnlockSchedule:j,delayedUnlockDates:f,delayedFarmInitialTokens:h})})]}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("div",{className:"mr-1",children:Object(pt.jsx)(sp,{valueStr:He({amount:s,denomination:c})})}),Object(pt.jsx)("small",{className:"text-secondary",children:o})]})]})]})},Lo=function(e){var t,n,a,i,r,s,c,l,d=e.proxy,u=e.pair,m=e.accountFarmToken,b=o.a.useRef(null),j=Object(g.c)(Br),f=m.decodedWrappedFarmTokenAttributes,h=m.decodedFarmProxyTokenAttributes,p=Ze({farmsRate:j.farmsRate,farmAddress:m.farmAddress}),x=f?"".concat(f.farmingTokenID,"-").concat(nt(f.farmingTokenNonce)):void 0,v=h?"".concat(null===(t=d.simpleLock)||void 0===t?void 0:t.lpProxyToken.collection,"-").concat(nt(h.farmingTokenLockedNonce.toString())):void 0,O=go({accountFarmToken:m,proxy:d}),k=O.hasRewards,y=O.rewardsToken,w=O.rewardsAmount,T=vo({accountFarmToken:m}),N=T.showCompoundedRewards,S=T.compoundedRewards,A=T.stakedTokenId,F=T.stakedLP,P=jo({farmRate:p,accountFarmToken:m,proxy:d,pair:u}),D=P.ExitBtn,R=P.ExitModal,E=to({hasRewards:k,rewardsToken:y,farmRate:p,pair:u,accountFarmToken:m,modalType:"claim"}),L=E.ClaimOrCompoundBtn,C=E.ClaimOrCompoundModal,I=to({hasRewards:k,rewardsToken:y,farmRate:p,pair:u,accountFarmToken:m,modalType:"compound"}),q=I.ClaimOrCompoundBtn,M=I.ClaimOrCompoundModal,B=xo({pair:u,amount:F}),U=He({amount:F,denomination:null!==(n=null===p||void 0===p||null===(a=p.farmingToken)||void 0===a?void 0:a.decimals)&&void 0!==n?n:0,showLastNonZeroDecimal:!0}),$=Fc({farmingTokenId:null!==(i=null===p||void 0===p?void 0:p.farmingToken.identifier)&&void 0!==i?i:"",requireWhitelist:Boolean(null===p||void 0===p?void 0:p.requireWhitelist)});return Object(pt.jsxs)("div",{ref:b,className:"d-flex flex-column flex-sm-row justify-content-sm-between farm-stake-row",children:[Object(pt.jsxs)("div",{className:"d-flex flex-column flex-lg-row flex-fill pr-sm-3 mb-2 mb-sm-0",children:[Object(pt.jsx)("div",{className:"d-flex flex-column flex-lg-row align-items-lg-center token-icon-normal flex-even mr-lg-2 ".concat($?"flex-lg-grow1-5":""),children:Object(pt.jsx)(Eo,{nonce:m.nonce,iconTokenId:m.collection,labelTokenId:A,amount:F,denomination:null!==(r=null===p||void 0===p?void 0:p.farmingToken.decimals)&&void 0!==r?r:0,lkLpOrLkMexIdentifier:x,lpProxyTokenIdentifier:v,proxy:d,pair:u,usdPrice:p&&Object(pt.jsx)(Xb,{animated:!0,amount:u?B:U,usd:u?1:parseFloat(p.farmTokenPriceUSD)}),reinvested:N&&S&&Object(pt.jsxs)("div",{children:["Reinvested"," ",He({amount:S,denomination:null!==(s=null===p||void 0===p?void 0:p.farmedToken.decimals)&&void 0!==s?s:0,addCommas:!0})," ",Object(pt.jsx)(Rt,{token:y})]})})}),Object(pt.jsx)("div",{className:"d-flex flex-column justify-content-center justify-content-sm-start flex-sm-row align-items-sm-center flex-even mr-lg-2",children:Object(pt.jsx)(Eo,{iconTokenId:y,labelTokenId:y,afterLabelText:" earned",amount:w,denomination:null!==(c=null===p||void 0===p?void 0:p.farmedToken.decimals)&&void 0!==c?c:0,usdPrice:p&&Object(pt.jsx)(Xb,{animated:!0,amount:He({amount:w,denomination:null!==(l=null===p||void 0===p?void 0:p.farmedToken.decimals)&&void 0!==l?l:0,showLastNonZeroDecimal:!0}),usd:parseFloat(p.farmedTokenPriceUSD)}),proxy:d})})]}),Object(pt.jsxs)("div",{className:"d-flex flex-column justify-content-around align-items-lg-center flex-lg-row",children:[$&&Object(pt.jsx)(pt.Fragment,{children:q}),L,D,Object(pt.jsx)("div",{className:"card-arrow right-offset-inner d-none d-lg-block",children:"\xa0"})]}),R,C,M]})},Co=["title","titleId"];function Io(){return Io=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Io.apply(this,arguments)}function qo(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Mo(e,t){var n=e.title,a=e.titleId,i=qo(e,Co);return c.createElement("svg",Io({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",ref:t,"aria-labelledby":a},i),n?c.createElement("title",{id:a},n):null,zc||(zc=c.createElement("g",{transform:"translate(-429 -335.061)"},c.createElement("g",{id:"apr-apy-g",transform:"translate(429 335.061)",fill:"#9ba5b4",stroke:"#9ba5b4",strokeWidth:1},c.createElement("rect",{width:16,height:16,rx:4,stroke:"none"}),c.createElement("rect",{x:.5,y:.5,width:15,height:15,rx:3.5,fill:"none"})),c.createElement("path",{d:"M-3.755-8.437h-3.8a.317.317,0,0,0-.317.317V-7.8a.317.317,0,0,0,.317.317h3.8A.317.317,0,0,0-3.439-7.8v-.317A.317.317,0,0,0-3.755-8.437Z",transform:"translate(439.628 348.266)"}),c.createElement("path",{d:"M-3.755-12.882H-5.181v-1.426a.317.317,0,0,0-.317-.317h-.317a.317.317,0,0,0-.317.317v1.426H-7.558a.317.317,0,0,0-.317.317v.317a.317.317,0,0,0,.317.317h1.426v1.426a.317.317,0,0,0,.317.317H-5.5a.317.317,0,0,0,.317-.317v-1.426h1.426a.317.317,0,0,0,.317-.317v-.317A.317.317,0,0,0-3.755-12.882Z",transform:"translate(439.628 358.213)"}),c.createElement("path",{d:"M-3.784-11.195l.991-.991a.312.312,0,0,0,0-.44l-.22-.22a.311.311,0,0,0-.44,0l-.991.991-.991-.991a.311.311,0,0,0-.44,0l-.22.22a.312.312,0,0,0,0,.44l.991.991L-6.1-10.2a.312.312,0,0,0,0,.44l.22.22a.312.312,0,0,0,.44,0l.991-.991.991.991a.312.312,0,0,0,.44,0l.22-.22a.312.312,0,0,0,0-.44Z",transform:"translate(444.481 351.498)"}),c.createElement("path",{d:"M-5.657-11.456a.634.634,0,0,0-.634.634.634.634,0,0,0,.634.634.634.634,0,0,0,.634-.634A.634.634,0,0,0-5.657-11.456Zm0-1.9a.634.634,0,0,0,.634-.634.634.634,0,0,0-.634-.634.634.634,0,0,0-.634.634A.634.634,0,0,0-5.657-13.357Zm1.9.475h-3.8a.317.317,0,0,0-.317.317v.317a.317.317,0,0,0,.317.317h3.8a.317.317,0,0,0,.317-.317v-.317A.317.317,0,0,0-3.755-12.882Z",transform:"translate(445.693 358.213)"}))))}var Bo,Uo,$o,_o,Vo,Wo,zo,Ho,Yo,Go,Zo,Ko,Xo=c.forwardRef(Mo),Qo=(n.p,function(e){var t=e.token,n=e.tokenAmount,i=e.onMaxClick,r=Object(O.p)().isLoggedIn,s=a.showMax,c=a.denominateAmount,o=a.balanceMinusDust,l=t&&t.value===U,d=t?t.value:void 0,u=t?t.token.decimals:0,m=t?t.token.balance:"0",b=Ie(m)?m:"0",j=c({amount:l?o(b):b,denomination:u}),f=c({amount:l?o(b):b,denomination:u,showLastNonZeroDecimal:!0}),h=s({amount:n,balance:j}),p=function(e){e.preventDefault(),i&&i({amount:j,completeMaxBalance:f})};return{MaxBtn:function(){return h?Object(pt.jsx)("a",{href:"/",className:"badge badge-pill badge-primary text-uppercase",onClick:p,onMouseDown:function(e){e.preventDefault()},children:"Max"}):null},AvailableBalance:function(){return d?Object(pt.jsx)("div",{"data-testid":"availableBalance-".concat(d),children:c({amount:b,denomination:u,addCommas:!0})}):Object(pt.jsx)(pt.Fragment,{children:"-.-"})},balance:b,decimals:u,completeMaxBalance:r&&d?h||"0"===f?void 0:f:void 0}}),Jo=Object(p.gql)(Bo||(Bo=Object(Bi.a)(["\n  query (\n    $tolerance: Float!\n    $amountOut: String!\n    $tokenOutID: String!\n    $amountIn: String!\n    $tokenInID: String!\n    $pairAddress: String!\n  ) {\n    swapTokensFixedInput(\n      tolerance: $tolerance\n      amountOut: $amountOut\n      tokenOutID: $tokenOutID\n      amountIn: $amountIn\n      tokenInID: $tokenInID\n      pairAddress: $pairAddress\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),el=Object(p.gql)(Uo||(Uo=Object(Bi.a)(["\n  query (\n    $amountOut: String!\n    $tokenOutID: String!\n    $amountIn: String!\n    $tokenInID: String!\n    $pairAddress: String!\n  ) {\n    swapTokensFixedOutput(\n      amountOut: $amountOut\n      tokenOutID: $tokenOutID\n      amountIn: $amountIn\n      tokenInID: $tokenInID\n      pairAddress: $pairAddress\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),tl=function(e){var t=e.ref,n=e.callbackRoute,a=ur(),i=Wh(),r=c.useState(!1),s=Object(T.a)(r,2),o=s[0],l=s[1];return{swapTokens:function(e){var r=e.variables,s=e.swapFunction,c=e.sequential,o=e.skipUnwrap;if(null!==t.current){var d="swapTokensFixedInput"===s;l(!0),a({query:d?Jo:el,variables:r}).then((function(e){if(null!==t.current&&e.data&&e.data.data){var a=(d?e.data.data.swapTokensFixedInput:e.data.data.swapTokensFixedOutput).map((function(e){return me(e)})),r=Object(ke.a)(Array(a.length).keys());o&&cn.session.setItem({key:"wegldToastShown",data:!0,expires:he()().add(1,"day").unix()}),i({sequential:c,transactions:a,callbackRoute:n,processingMessage:"Swapping tokens",successMessage:"Swap complete",submittedMessage:"Swap transactions submitted",grouping:c?r.map((function(e){return[e]})):[r]}),l(!1)}})).catch((function(e){console.log("swapTokens",e),l(!1)}))}},swapTokensLoading:o}},nl=function(e){var t=e.amount,n=e.tolerance;return new je.a(1).plus(parseFloat(n)/100).times(new je.a(t)).toFixed(0)},al=function(e){var t=e&&e.totalFeePercent?e.totalFeePercent:void 0,n=e&&e.specialFeePercent?e.specialFeePercent:void 0;return{liqFeeText:t?Ye("".concat(100*t),2):void 0,burnText:n?Ye("".concat(100*n),2):void 0,lpHoldersText:t&&n?Ye("".concat(100*(t-n)),2):void 0}},il=function(e){var t=e.lpHoldersText;return Object(pt.jsxs)(pt.Fragment,{children:["Based on 1-day's performance. Does not account for impermanent loss.",Object(pt.jsx)("br",{}),Object(pt.jsx)("br",{}),"Fees rewards represent ",t,"% trading fees that are distributed proportionally among LP token holders. Fees are added to the pool in real time and can be claimed by withdrawing your liquidity."]})},rl=function(e){var t=e.pair,n=t?"".concat(Nh.liquidityAdd,"?firstToken=").concat(t.firstToken.identifier,"&secondToken=").concat(t.secondToken.identifier):"";return t?Object(pt.jsx)("div",{className:"col-12",children:Object(pt.jsx)("div",{className:"d-flex mt-4",children:Object(pt.jsxs)(w.b,{className:"btn btn-primary w-100",to:n,children:["Get ",Object(pt.jsx)(yt,{token:t.liquidityPoolToken.identifier})]})})}):null},sl=function(e){var t=e.unlockedRewardsFarmRate,n=e.lockedRewardsFarmRate,a=e.pair,i=e.showModal,r=e.setShowModal,s=Object(g.c)(Br),c=al(a).lpHoldersText,o=Ge({pairsRate:s.pairsRate,pairAddress:a?a.address:""}),l=Ih({unlockedRewardsFarmRate:t,lockedRewardsFarmRate:n,decimals:2}),d=l.unlockedRewardsAPR,u=l.unlockedRewardsAPY,m=l.unlockedRewardsFarmMultiplier,b=l.lockedRewardsAPR,j=l.lockedRewardsAPY,f=l.lockedRewardsFarmMultiplier,h=l.FarmMultiplierText,p=function(e){return function(){r(e)}},x=Boolean(t),v=Boolean(n),O=!x&&v||x&&!v;return Object(pt.jsx)(Pc.a,{show:i,backdrop:!0,onHide:p(!1),className:"modal-container apr-apy-modal",animation:!1,centered:!0,children:Object(pt.jsx)("div",{className:"container p-4 apr-apy-modal-content",children:Object(pt.jsx)("div",{className:"row",children:Object(pt.jsx)("div",{className:"col-12",children:Object(pt.jsxs)("div",{className:"row",children:[Object(pt.jsx)("div",{className:"col-12",children:Object(pt.jsxs)("div",{className:"h5 d-flex justify-content-between align-items-center mb-4",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center text-secondary",children:[Object(pt.jsx)(Xo,{className:"apr-apy-icon mr-2",style:{width:"1.4rem",height:"1.4rem"}}),"Info"]}),Object(pt.jsx)("button",{type:"button",className:"btn btn-light px-3 py-2 d-flex align-items-center",onClick:p(!1),children:Object(pt.jsx)(F.a,{size:"lg",icon:Ii.faTimes})})]})}),Object(pt.jsx)("div",{className:"col-12",children:Object(pt.jsx)("div",{className:"card overflow-hidden mb-4",children:Object(pt.jsx)("div",{className:"table-responsive",children:Object(pt.jsxs)("table",{className:"table table-bordered mb-0",children:[Object(pt.jsx)("thead",{children:Object(pt.jsxs)("tr",{children:[Object(pt.jsx)("th",{scope:"col",className:"td-secondary ".concat(O?"col-6":"")}),x&&Object(pt.jsx)("th",{scope:"col",className:"td-secondary ".concat(O?"col-6":""),children:"Rewards"}),v&&Object(pt.jsxs)("th",{scope:"col",className:"td-secondary ".concat(O?"col-6":""),children:[Object(pt.jsx)(F.a,{icon:kc.faLock,size:"sm",className:"mr-2 text-warning"}),"Locked Rewards"]})]})}),Object(pt.jsxs)("tbody",{children:[o?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsxs)("tr",{children:[Object(pt.jsx)("td",{className:"td-secondary",children:Object(pt.jsx)(Np,{label:"APR",tooltipText:"Incl. Fees Rewards"})}),x&&Object(pt.jsxs)("td",{children:[d,"%"]}),v&&Object(pt.jsxs)("td",{children:[b,"%"]})]}),Object(pt.jsxs)("tr",{children:[Object(pt.jsx)("td",{className:"td-secondary",children:Object(pt.jsx)(Np,{label:"Base APR",tooltipText:"Without Fees Rewards"})}),x&&Object(pt.jsx)("td",{children:d?"".concat(Tc(d,o.feesAPR,2),"%"):"..."}),v&&Object(pt.jsx)("td",{children:b?"".concat(Tc(b,o.feesAPR,2),"%"):"..."})]})]}):Object(pt.jsxs)("tr",{children:[Object(pt.jsx)("td",{className:"td-secondary",children:"APR"}),x&&Object(pt.jsxs)("td",{children:[d,"%"]}),v&&Object(pt.jsxs)("td",{children:[b,"%"]})]}),o&&Object(pt.jsxs)("tr",{children:[Object(pt.jsx)("td",{className:"td-secondary",children:Object(pt.jsx)(Np,{label:"Fees Rewards",tooltipText:Object(pt.jsx)(il,{lpHoldersText:c})})}),x&&Object(pt.jsxs)("td",{children:[Ce(o.feesAPR)?(100*parseFloat(o.feesAPR)).toFixed(2):"...","%"]}),v&&Object(pt.jsxs)("td",{children:[Ce(o.feesAPR)?(100*parseFloat(o.feesAPR)).toFixed(2):"...","%"]})]}),Object(pt.jsxs)("tr",{children:[Object(pt.jsx)("td",{className:"td-secondary",children:Object(pt.jsx)(Np,{label:"APY",tooltipText:"1x daily compound"})}),x&&Object(pt.jsxs)("td",{children:[u,"%"]}),v&&Object(pt.jsxs)("td",{children:[j,"%"]})]}),a&&Object(pt.jsxs)("tr",{children:[Object(pt.jsx)("td",{className:"td-secondary",children:Object(pt.jsx)(Np,{label:"Farm Multiplier",tooltipText:Object(pt.jsx)(h,{})})}),x&&Object(pt.jsxs)("td",{children:[m,"x"]}),v&&Object(pt.jsxs)("td",{children:[f,"x"]})]}),Object(pt.jsxs)("tr",{children:[Object(pt.jsx)("td",{className:"td-secondary",children:"Total Value Locked"}),x&&Object(pt.jsxs)("td",{children:["$",Nc({unlockedRewardsFarmRate:t})]}),v&&Object(pt.jsxs)("td",{children:["$",Nc({lockedRewardsFarmRate:n})]})]}),"customRewards"===(null===t||void 0===t?void 0:t.rewardType)&&Object(pt.jsxs)("tr",{children:[Object(pt.jsx)("td",{className:"td-secondary",children:"Rewards"}),x&&Object(pt.jsxs)("td",{children:[He({amount:t.perBlockRewards,denomination:t.farmedToken.decimals})," ",Object(pt.jsx)(Rt,{token:t.farmedToken.identifier})," ","/ block"]})]})]})]})})})}),Object(pt.jsx)("div",{className:"col-12 mb-3",children:"Calculated based on current rates."}),Object(pt.jsx)("div",{className:"col-12",children:Object(pt.jsx)("i",{className:"text-secondary",children:"* All figures are estimates provided for your convenience only, and by no mean represent guaranteed returns"})}),Object(pt.jsx)(rl,{pair:a})]})})})})})},cl=function(e){var t=e.unlockedRewardsFarmRate,n=e.lockedRewardsFarmRate,a=e.pair,i=c.useState(!1),r=Object(T.a)(i,2),s=r[0],o=r[1],l=Ih({unlockedRewardsFarmRate:t,lockedRewardsFarmRate:n}),d=l.unlockedRewardsAPR,u=l.lockedRewardsAPR;return{ApyAprBtn:c.useMemo((function(){return Object(pt.jsx)(vc,{onClick:function(e){e.stopPropagation(),o(!0)},containerClass:"apr-apy-btn",name:Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-start",children:["APR ",Object(pt.jsx)(Xo,{className:"apr-apy-icon ml-2"})]}),children:t||n?Object(pt.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[t&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(sp,{valueStr:d}),"%"]}),n&&Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[t&&Object(pt.jsx)("span",{className:"mx-1",children:"/"}),Object(pt.jsx)(F.a,{icon:kc.faLock,className:"text-warning mr-1"}),Object(pt.jsx)(sp,{valueStr:u}),"%"]})]}):Object(pt.jsx)(pt.Fragment,{children:"..."})})}),[t,n,d,u]),ApyAprModal:c.useMemo((function(){return s?Object(pt.jsx)(sl,{unlockedRewardsFarmRate:t,lockedRewardsFarmRate:n,pair:a,showModal:s,setShowModal:function(e){o(e)}}):null}),[t,n,a,s])}},ol=n(654),ll=function(e){var t=e.show,n=e.color;return t?Object(pt.jsx)("div",{className:"d-flex",children:Object(pt.jsx)(F.a,{icon:ol.faSpinnerThird,className:"fa-spin fast-spin ".concat(n||"text-primary")})}):null},dl=function(e){var t=e.ref,n=e.callbackRoute,a=e.hideModal,i=ur(),r=Wh(),s=c.useState(!1),o=Object(T.a)(s,2),l=o[0],d=o[1],u=Object(g.c)(Br);return{claimRewardsBatch:function(e){var s=e.stakeAndRewards;null!==t.current&&(d(!0),Promise.all(s.filter((function(e){var t=Ze({farmAddress:e.farmAddress,farmsRate:u.farmsRate});return ko({farmRate:t,accountFarmToken:e})})).slice(0,5).map((function(e){var t=Boolean(e.decodedWrappedFarmTokenAttributes),n=Boolean(e.decodedFarmProxyTokenAttributes),a=t?Yc:n?Zc:Gc,r=function(e){var t,n=e.stake,a=e.useProxy;if(e.useSimpleLock)t={inputTokens:{tokenID:n.collection,nonce:n.nonce,amount:n.balance}};else{var i={farmAddress:n.farmAddress,amount:n.balance,lockRewards:"lockedRewards"===n.rewardType};t=a?Object(m.a)(Object(m.a)({},i),{},{wrappedFarmTokenID:n.collection,wrappedFarmTokenNonce:n.nonce}):Object(m.a)(Object(m.a)({},i),{},{farmTokenID:n.collection,farmTokenNonce:n.nonce})}return t}({stake:e,useProxy:t,useSimpleLock:n});return i({query:a,variables:r})}))).then((function(e){if(e){var i=[];e.forEach((function(e){null!==t.current&&e.data&&e.data.data&&(e.data.data.claimRewards&&i.push(me(e.data.data.claimRewards)),e.data.data.claimFarmRewardsProxy&&i.push(me(e.data.data.claimFarmRewardsProxy)),e.data.data.claimRewardsFarmLockedToken&&i.push(me(e.data.data.claimRewardsFarmLockedToken)))})),r({transactions:i,callbackRoute:n,processingMessage:"Harvesting all rewards",successMessage:"All rewards harvested",submittedMessage:"Harvested all rewards transactions submitted",hasUnrelatedTransactions:!0,pendingFarmAddress:s[0].farmAddress}),d(!1),a()}else d(!1)})).catch((function(e){console.log("useClaimRewardsBatch",e),d(!1)})))},claimRewardsBatchLoading:l}},ul=function(e){var t=e.stake,n=e.useProxy;return Object(m.a)({farmAddress:t.farmAddress,amount:t.balance,lockRewards:"lockedRewards"===t.rewardType},n?{tokenID:t.collection,tokenNonce:t.nonce}:{farmTokenID:t.collection,farmTokenNonce:t.nonce})},ml=function(e){var t=e.ref,n=e.callbackRoute,a=e.hideModal,i=ur(),r=Wh(),s=c.useState(!1),o=Object(T.a)(s,2),l=o[0],d=o[1],u=Object(g.c)(Br);return{compoundRewardsBatch:function(e){var s=e.stakeAndRewards;null!==t.current&&(d(!0),Promise.all(s.filter((function(e){var t=Ze({farmAddress:e.farmAddress,farmsRate:u.farmsRate});return ko({farmRate:t,accountFarmToken:e})})).slice(0,5).map((function(e){var t=Boolean(e.decodedWrappedFarmTokenAttributes);return i({query:t?Qc:Xc,variables:ul({stake:e,useProxy:t})})}))).then((function(e){if(e){var i=[];e.forEach((function(e){null!==t.current&&e.data&&e.data.data&&(e.data.data.compoundRewards&&i.push(me(e.data.data.compoundRewards)),e.data.data.compoundRewardsProxy&&i.push(me(e.data.data.compoundRewardsProxy)))})),r({transactions:i,callbackRoute:n,processingMessage:"Reinvesting all rewards",successMessage:"All rewards reinvested",submittedMessage:"Reinvest all rewards transactions submitted",pendingFarmAddress:s[0].farmAddress}),d(!1),a()}else d(!1)})).catch((function(e){console.log("useCompoundRewardsBatch",e),d(!1)})))},compoundRewardsBatchLoading:l}},bl=function(e){var t=e.pair,n=e.proxy,i=e.showModal,r=e.modalType,s=e.stakeAndRewards,c=e.setShowModal,l=o.a.useRef(null),d=a.denominateAmount,u=Object(g.c)(Br),m=o.a.useState(0),b=Object(T.a)(m,2),j=b[0],f=b[1],h=o.a.useState([]),p=Object(T.a)(h,2),x=p[0],v=p[1];o.a.useEffect((function(){!function(){var e=[],t=0;s.forEach((function(a){var i=a.stakeDetails,r=Ze({farmAddress:a.farmAddress,farmsRate:u.farmsRate});if(i&&r){var s="lockedRewards"===a.rewardType?n.lockedAssetToken.collection:r.farmedToken.identifier,c=new je.a(i.rewards);if(ko({farmRate:r,accountFarmToken:a})){var o=e.find((function(e){return e.id===s}));if(o){var l=new je.a(o.amount);o.amount=l.plus(c).toString(10)}else e.push({id:s,amount:c.toString(10)});t+=1}}})),v(e),f(t<=5?t:5)}()}),[s,n,u]);var O=function(e){return function(){c(e)}},k=dl({ref:l,callbackRoute:Nh.farms,hideModal:function(){c(!1)}}),y=k.claimRewardsBatch,w=k.claimRewardsBatchLoading,N=ml({ref:l,callbackRoute:Nh.farms,hideModal:function(){c(!1)}}),S=N.compoundRewardsBatch,A=N.compoundRewardsBatchLoading,F=Ze({farmAddress:s[0].farmAddress,farmsRate:u.farmsRate}),P=null===F||void 0===F?void 0:F.farmedToken;return Object(pt.jsx)(Pc.a,{show:i,backdrop:!0,onHide:O(!1),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("div",{ref:l,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column align-items-center pt-spacer",children:[Object(pt.jsxs)("div",{className:"rewards-icon-container d-flex justify-content-center w-100 mb-spacer",children:[Object(pt.jsx)(Hc,{className:"rewards-bg position-absolute-center"}),Object(pt.jsx)(Oc,{farm:F,pair:t,size:"xl"})]}),Object(pt.jsxs)("div",{className:"mb-2","data-testid":"modalTitle",children:["claim"===r?"Harvest":"Reinvest"," All Rewards"]}),x.map((function(e){return Object(pt.jsxs)("div",{className:"d-flex align-items-center text-success h4",children:[Object(pt.jsxs)("div",{className:"mr-2","data-testid":"modalRewards",children:["claim"===r?"+":"",d({amount:e.amount,denomination:P?P.decimals:0,addCommas:!0})]}),Object(pt.jsx)(yt,{token:e.id})]},e.id)})),Object(pt.jsxs)("div",{className:"d-flex align-items-center mt-spacer w-100",children:[Object(pt.jsx)("button",{className:"btn btn-dark btn-lg flex-even mr-2",onClick:O(!1),"data-testid":"cancelBtn",children:"Cancel"}),Object(pt.jsx)("button",{type:"submit",className:"btn  ".concat("claim"===r?"btn-primary":"btn-success"," btn-lg flex-even ml-2"),disabled:w||A,onClick:function(){"claim"===r&&y({stakeAndRewards:s}),"compound"===r&&S({stakeAndRewards:s})},children:w||A?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsxs)(pt.Fragment,{children:["claim"===r?"Harvest":"Reinvest","\xa0All"]})})]}),Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign"," ",Object(pt.jsxs)("strong",{children:[j," transaction",j>1?"s":""]}),Object(pt.jsx)(wo,{info:Object(pt.jsxs)("div",{className:"text-left",children:[j>1&&"".concat(j,"x "),"claim"===r?"Harvest ":"Reinvest ","rewards"]})})]})]})})})},jl=function(e){var t=e.stakeAndRewards,n=e.pair,a=e.proxy,i=e.disableBtn,r=e.active,s=e.modalType,o=Object(g.c)(Br),l=c.useState(!1),d=Object(T.a)(l,2),u=d[0],b=d[1],j=t.filter((function(e){var t=Ze({farmAddress:e.farmAddress,farmsRate:o.farmsRate});return ko({farmRate:t,accountFarmToken:e})})).length>0,f="compound"===s?"reinvestAllBtn":"harvestAllBtn",h="compound"===s?"Reinvest":"Harvest",p="compound"===s?"btn-success":"btn-primary",x=r?void 0:Ll,v="Individual rewards can be ".concat("compound"===s?"reinvested":"harvested"," every ").concat(X," minutes with a minimum of $").concat(K),O=null!==x&&void 0!==x?x:v;return{CompoundOrClaimAllBtn:c.useMemo((function(){return j&&r?Object(pt.jsxs)("button",{"data-testid":f,disabled:i,className:"farm-action-btn w-100 btn mb-2 mb-xl-0 mr-xl-3 ".concat(p),onClick:function(e){b(!0),e.stopPropagation()},children:[h,"\xa0all"]}):Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-compound-or-harvest-all"},e),{},{children:Object(pt.jsx)("div",{className:"d-flex justify-content-center flex-wrap",children:O})}))},children:Object(pt.jsx)("div",{className:"d-flex",children:Object(pt.jsxs)("div",{"data-testid":f,className:"farm-action-btn w-100 btn disabled mb-2 mb-xl-0 mr-xl-3 ".concat(p),onClick:function(e){e.stopPropagation()},children:[h,"\xa0all"]})})})}),[j,i,r,p,h,O,f]),CompoundOrClaimAllModal:c.useMemo((function(){return u?Object(pt.jsx)(bl,{pair:n,proxy:a,stakeAndRewards:t,showModal:u,modalType:s,setShowModal:function(e){b(e)}}):null}),[n,a,u,t,s]),showModal:u}},fl=function(e){var t=e.name,n=e.parentTokenId,a=e.wrappedLpTokens,i=e.wrappedLpTokenId,r=e.lpProxyTokens,s=e.lpProxyTokenId,c=e.onChange,l=[];l.push.apply(l,Object(ke.a)(a.map((function(e){return{label:e.lpTokenID,value:e.identifier,token:e}})))),l.push.apply(l,Object(ke.a)(r.map((function(e){return{label:e.lpTokenID,value:e.identifier,token:e}}))));var d=o.a.useState(),u=Object(T.a)(d,2),m=u[0],b=u[1];o.a.useEffect((function(){m||b(1===l.length?l[0]:void 0)}),[n,a,r]);var j=n===i||n===s,f=m?_e(m):void 0,h=a.find((function(e){return e.identifier===f})),p=r.find((function(e){return e.identifier===f})),x=h?h.balance:p?p.balance:"0",v=h?h.nonce:p?p.nonce:void 0,O=p?p.attributes:void 0;return{LockedLpSelect:o.a.useMemo((function(){return j?Object(pt.jsx)("div",{className:"token-select mt-3",children:Object(pt.jsx)(Ct.TokenSelect,{id:t,name:t,value:m,options:l,isSearchable:!1,fullSize:!0,hasLockedTokens:!0,onChange:function(e){b(e),c&&c()}})}):null}),[j,t,m,l]),balance:x,nonce:j?v:void 0,attributes:j?O:void 0,visible:j,validationError:"Please select a Locked LP token"}},hl=function(e){var t,n,a,i,r,s=e.farm,c=e.lkLpNonce,o=null!==(t=null===(n=e.proxy.simpleLock)||void 0===n?void 0:n.farmProxyToken.collection)&&void 0!==t?t:"",l=null===(a=s.stake)||void 0===a?void 0:a.filter((function(e){return e.collection===o})).find((function(e){var t,n=null===(t=e.decodedFarmProxyTokenAttributes)||void 0===t?void 0:t.farmingTokenLockedNonce;return c===n&&e.farmAddress===s.address}));return{compatibleSimpleLockStake:l,compatibleSimpleLockStakeRewards:He({amount:null!==(i=null===l||void 0===l||null===(r=l.stakeDetails)||void 0===r?void 0:r.rewards)&&void 0!==i?i:"0",denomination:s.farmedToken.decimals})}},pl=function(e){var t,n,a,i,r,s=e.farm,c=e.proxy,o=e.useProxy,l=null!==(t=null===(n=c.simpleLock)||void 0===n?void 0:n.farmProxyToken.collection)&&void 0!==t?t:"",d=null===(a=s.stake)||void 0===a?void 0:a.filter((function(e){return e.collection!==l})).find((function(e){return e.collection===c.wrappedFarmToken.collection===o&&e.farmAddress===s.address}));return{compatibleStake:d,compatibleStakeRewards:He({amount:null!==(i=null===d||void 0===d||null===(r=d.stakeDetails)||void 0===r?void 0:r.rewards)&&void 0!==i?i:"0",denomination:s.farmedToken.decimals})}},xl=function(e){var t=e.farm,n=e.decodedLpTokens,a=[],i=new je.a(0);return t&&n.forEach((function(e){if(e.lpTokenID===t.farmingToken.identifier){var n=new je.a(e.balance);i=i.plus(n),a.push(e)}})),{lpTokens:a,total:i.toString(10)}},vl=function(e){var t,n=e.farm,a=e.tokens,i=e.nfts,r=e.proxy,s=e.decodedWrappedLpTokens,c=e.decodedLpProxyTokens,o=[],l=r.simpleLock,d=r.intermediatedFarms,u=r.wrappedLpToken,b=r.lockedAssetToken,j=Ch({nfts:i,proxy:r}),f=j.lockedMexTokens,h=j.lockedMexAsEsdt,p=xl({farm:n,decodedLpTokens:s}),x=p.lpTokens,v=p.total,O=xl({farm:n,decodedLpTokens:c}),k=O.lpTokens,g=O.total;if(n){var y=a.find((function(e){return e.identifier===n.farmingToken.identifier}));Boolean(n.requireWhitelist)||o.push({value:n.farmingToken.identifier,label:n.farmingToken.identifier,token:Object(m.a)(Object(m.a)({},n.farmingToken),{},{balance:y?y.balance:"0"})}),n&&d.includes(n.address)&&(n.farmingToken.identifier===_?o.push({label:b.collection,value:b.collection,token:h}):o.push({value:u.collection,label:n.farmingToken.identifier,token:Object(m.a)(Object(m.a)({},u),{},{balance:v})})),n&&null!==l&&void 0!==l&&l.intermediatedFarms.includes(n.address)&&o.push({value:l.lpProxyToken.collection,label:n.farmingToken.identifier,token:Object(m.a)(Object(m.a)({},l.lpProxyToken),{},{balance:g})})}return{selectOptions:o,lockedMexTokens:f,lockedMexTokenId:b.collection,wrappedLpTokens:x,wrappedLpTokenId:u.collection,lpProxyTokens:k,lpProxyTokenId:null!==(t=null===l||void 0===l?void 0:l.lpProxyToken.collection)&&void 0!==t?t:""}},Ol=Object(p.gql)($o||($o=Object(Bi.a)(["\n  query (\n    $farmAddress: String!\n    $lockRewards: Boolean\n    $tokens: [InputTokenModel!]!\n  ) {\n    enterFarm(\n      farmAddress: $farmAddress\n      lockRewards: $lockRewards\n      tokens: $tokens\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),kl=Object(p.gql)(_o||(_o=Object(Bi.a)(["\n  query ($farmAddress: String!, $inputTokens: [InputTokenModel!]!) {\n    enterFarmLockedToken(farmAddress: $farmAddress, inputTokens: $inputTokens) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),gl=Object(p.gql)(Vo||(Vo=Object(Bi.a)(["\n  query (\n    $farmAddress: String!\n    $lockRewards: Boolean\n    $tokens: [InputTokenModel!]!\n  ) {\n    enterFarmProxy(\n      farmAddress: $farmAddress\n      lockRewards: $lockRewards\n      tokens: $tokens\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),yl=function(e){var t=e.callbackRoute,n=e.hideModal,a=ur(),i=Wh(),r=o.a.useState(!1),s=Object(T.a)(r,2),c=s[0],l=s[1];return{enterFarm:function(e){var r,s,c=e.variables,o=e.useProxy,d=e.useSimpleLock;switch(l(!0),!0){case o:r=gl,s="enterFarmProxy";break;case d:r=kl,s="enterFarmLockedToken";break;default:r=Ol,s="enterFarm"}a({query:r,variables:c}).then((function(e){if(e.data&&e.data.data){var a=[me(e.data.data[s])];i({transactions:a,callbackRoute:t,processingMessage:"Adding farm stake",successMessage:"Farm stake added",submittedMessage:"Add farm stake transactions submitted",pendingFarmAddress:c.farmAddress}),l(!1),n()}else l(!1)})).catch((function(e){console.log("enterFarm",e),l(!1)}))},enterFarmLoading:c}},wl=function(e){var t=e.farm,n=e.proxy,a=e.cacheKey;Dr();var i=qr(a),r=i.fetchTokens,s=i.tokens,c=i.tokensLoading,l=i.tokensFetched,d=Cr(a),u=d.fetchNfts,m=d.nfts,b=d.nftsLoading,j=d.nftsFetched,f=kr(a),h=f.decodeWrappedLpTokens,p=f.decodedWrappedLpTokens,x=xr(a),v=x.decodeLpProxyTokens,O=x.decodedLpProxyTokens;return o.a.useEffect((function(){var e,a,i=t.farmingToken.identifier===_||Boolean(t.requireWhitelist)?[n.lockedAssetToken.collection]:[n.wrappedLpToken.collection,null!==(e=null===(a=n.simpleLock)||void 0===a?void 0:a.lpProxyToken.collection)&&void 0!==e?e:""];u(i),r([t.farmingToken.identifier])}),[n,t]),o.a.useEffect((function(){var e;n&&(h({nfts:m,wrappedLpTokenId:n.wrappedLpToken.collection}),v({nfts:m,lpProxyTokenId:null===(e=n.simpleLock)||void 0===e?void 0:e.lpProxyToken.collection}))}),[m]),{nfts:m,tokens:s,decodedWrappedLpTokens:p,decodedLpProxyTokens:O,farmDataLoading:c||b,farmDataFetched:l&&j}},Tl=function(e){var t=e.token,n=e.tokenAmount,i=e.lockedLpBalance,r=e.lockedMexBalance,s=e.proxy,c=e.onMaxClick,o=a.denominateAmount,l=s.lockedAssetToken,d=s.wrappedLpToken,u=s.simpleLock,m=t?t.value:void 0,b=m===d.collection,j=m===(null===u||void 0===u?void 0:u.lpProxyToken.collection),f=m===l.collection,h=t?t.token.balance:"0",p=b||j?i:h,x=Ie(p=f?r:p)?p:"0",v=t?t.token.decimals:0,O=o({amount:x,denomination:v}),k=o({amount:x,denomination:v,showLastNonZeroDecimal:!0}),g=b||j||f,y="0"!==O&&parseFloat(n)!==parseFloat(O),w=function(e){e.preventDefault(),c(O)};return{MaxBtn:function(){return y?Object(pt.jsx)("a",{href:"/",className:"badge badge-pill badge-primary text-uppercase",onClick:w,onMouseDown:function(e){e.preventDefault()},children:"Max"}):null},AvailableBalance:function(){return g?null:Object(pt.jsxs)("div",{className:"mt-2 balance",children:[Object(pt.jsx)("span",{className:"text-secondary mr-2",children:"Balance:"}),m?Object(pt.jsx)(pt.Fragment,{children:o({amount:x,denomination:v,addCommas:!0})}):Object(pt.jsx)(pt.Fragment,{children:"-.-"})]})},balance:O,completeMaxBalance:y?void 0:k,denomination:v}},Nl=function(){return Object(pt.jsxs)(pt.Fragment,{children:["Unlock schedule will be averaged out when the tokens are merged."," ",Object(pt.jsx)("a",{className:"text-reset",href:"https://docs.maiar.exchange/maiar-exchange-features/locked-mex-insights/LKMEX-tokens-merged/",rel:"noopener noreferrer nofollow",target:"_blank",children:Object(pt.jsx)("u",{children:"Learn more"})})]})},Sl=function(){return Object(pt.jsxs)("small",{className:"alert alert-warning align-items-center d-flex p-3 mb-0",role:"alert",children:[Object(pt.jsx)(F.a,{icon:ao.faInfoCircle,size:"lg",className:"alert-icon mr-2"}),Object(pt.jsx)("div",{children:Object(pt.jsx)(Nl,{})})]})},Al=function(e){var t=e.farm,n=e.showHarvestWarning,a=e.showUnlockScheduleWarning,i="".concat(t.penaltyPercent/100,"% fee for withdrawing in the next"),r=Fc({farmingTokenId:t.farmingToken.identifier,requireWhitelist:Boolean(t.requireWhitelist)});return Object(pt.jsxs)("small",{className:"alert border-warning text-warning align-items-center d-flex p-3 mb-0",role:"alert",children:[Object(pt.jsx)(F.a,{icon:ao.faInfoCircle,size:"lg",className:"alert-icon mr-2"}),Object(pt.jsx)("div",{className:"d-flex flex-column",children:n||a?Object(pt.jsxs)("ul",{className:"mb-0 pl-4",children:[n&&Object(pt.jsx)("li",{className:"mb-2",children:"We recommend harvesting before adding more stake"}),a&&Object(pt.jsx)("li",{className:"mb-2",children:Object(pt.jsx)(Nl,{})}),Object(pt.jsxs)("li",{children:[i," ",Object(pt.jsx)(Sp,{minimumFarmingEpochs:t.minimumFarmingEpochs}),". Depositing ",r?"or reinvesting ":"","resets the timer."]})]}):Object(pt.jsxs)(pt.Fragment,{children:[i," ",Object(pt.jsx)(Sp,{minimumFarmingEpochs:t.minimumFarmingEpochs}),". Depositing ",r?"or reinvesting ":"","resets the timer."]})})]})},Fl=function(e){var t,n=e.unlockedRewardsFarm,i=e.lockedRewardsFarm,r=e.pair,s=e.proxy,c=e.stakeAndRewards,l=e.showModal,d=e.setShowModal,u=o.a.useRef(null),b=Object(g.c)(Br),j=o.a.useState(!1),f=Object(T.a)(j,2),h=f[0],p=f[1],x=o.a.useState(!1),v=Object(T.a)(x,2),O=v[0],k=v[1],y=o.a.useState(!1),w=Object(T.a)(y,2),N=w[0],S=w[1],A=Ze({farmsRate:b.farmsRate,farmAddress:n.address}),P=Ze({farmsRate:b.farmsRate,farmAddress:null!==(t=null===i||void 0===i?void 0:i.address)&&void 0!==t?t:""}),D=function(e){return function(){d(e)}},R=wl({farm:n,proxy:s,cacheKey:"enterFarmModal"}),E=R.nfts,L=R.tokens,C=R.farmDataLoading,I=R.farmDataFetched,q=R.decodedWrappedLpTokens,M=R.decodedLpProxyTokens,B=vl({farm:n,tokens:L,nfts:E,proxy:s,decodedWrappedLpTokens:q,decodedLpProxyTokens:M}),U=B.selectOptions,$=B.lockedMexTokens,_=B.lockedMexTokenId,V=B.wrappedLpTokens,W=B.wrappedLpTokenId,z=B.lpProxyTokens,H=B.lpProxyTokenId,Y=Ih({unlockedRewardsFarmRate:A,lockedRewardsFarmRate:P}),G=Y.lockedRewardsAPR,Z=Y.unlockedRewardsAPR,K=yl({callbackRoute:Nh.farms,hideModal:function(){d(!1)}}),X=K.enterFarm,Q=K.enterFarmLoading,J={amount:"",token:1===U.length?U[0]:void 0,lockRewards:i?"true":"false"},ee=Object(dt.a)().shape({amount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),Le)})).test("funds","Insufficient funds",(function(e){if(e&&ue){var t=new be.BigNumber(e);return new be.BigNumber(Re).comparedTo(t)>=0}return!0})).test("minimum","Cannot be zero",(function(e){return!new be.BigNumber(null!==e&&void 0!==e?e:0).isZero()})).test("token","Token required",(function(e){return Boolean(e&&je)})),token:Object(dt.a)().nullable().test("req","Required",(function(e){return null!==e}))}),te=Object(qt.a)({initialValues:J,validationSchema:ee,onSubmit:function(e){var t,n=a.getSelectedValue(e.token),i=null!==Te&&void 0!==Te?Te:ve,r=n===(null===(t=s.simpleLock)||void 0===t?void 0:t.lpProxyToken.collection),c=Boolean(!r&&i),o=Object(m.a)({tokenID:a.getSelectedValue(e.token),nonce:null!==i&&void 0!==i?i:0,amount:ot(Ee||e.amount,Le)},Ne?{attributes:Ne}:{}),l={};if(r){l={farmAddress:fe.address,inputTokens:[o]};var d=hl({farm:fe,lkLpNonce:o.nonce,proxy:s}).compatibleSimpleLockStake;d&&l.inputTokens&&l.inputTokens.push({tokenID:d.collection,nonce:d.nonce,amount:d.balance,attributes:d.attributes})}else{l={farmAddress:fe.address,tokens:[o]};var u=pl({farm:fe,useProxy:c,proxy:s}).compatibleStake;u&&l.tokens&&l.tokens.push({tokenID:u.collection,nonce:u.nonce,amount:u.balance})}X({variables:l,useProxy:c,useSimpleLock:r})}}),ne=te.setFieldValue,ae=te.handleSubmit,ie=te.errors,re=te.touched,se=te.values,ce=te.handleBlur,oe=te.handleChange,le=te.validateForm,de=se.amount,ue=se.token,me=se.lockRewards,je=a.getSelectedValue(ue),fe="true"===String(me)&&i?i:n,he=It({name:"lockedMexSelect",parentTokenId:je,lockedMexTokens:$,lockedMexTokenId:_,onChange:function(){setTimeout((function(){le()}))}}),pe=he.LockedMexSelect,xe=he.balance,ve=he.nonce,Oe=he.visible,ke=he.validationError,ge=fl({name:"lockedLpSelect",parentTokenId:je,wrappedLpTokens:V,wrappedLpTokenId:W,lpProxyTokens:z,lpProxyTokenId:H,onChange:function(){setTimeout((function(){le()}))}}),ye=ge.LockedLpSelect,we=ge.balance,Te=ge.nonce,Ne=ge.attributes,Se=ge.visible,Ae=ge.validationError,Fe=Tl({token:ue,tokenAmount:de,lockedLpBalance:we,lockedMexBalance:xe,proxy:s,onMaxClick:function(e){ne("amount",e,!0)}}),Pe=Fe.MaxBtn,De=Fe.AvailableBalance,Re=Fe.balance,Ee=Fe.completeMaxBalance,Le=Fe.denomination;o.a.useEffect((function(){var e,t,n=je===s.lockedAssetToken.collection||je===s.wrappedLpToken.collection,a="0";if(je===(null===(e=s.simpleLock)||void 0===e?void 0:e.lpProxyToken.collection)){var i=hl({farm:fe,lkLpNonce:null!==Te&&void 0!==Te?Te:0,proxy:s}),r=i.compatibleSimpleLockStake;a=i.compatibleSimpleLockStakeRewards,t=r}else{var c=pl({farm:fe,useProxy:n,proxy:s}),o=c.compatibleStake;a=c.compatibleStakeRewards,t=o}var l=parseFloat(a)*parseFloat(A?A.farmedTokenPriceUSD:"0")>5;S(Boolean(t)),p(Boolean(n&&t)),k(Boolean(a&&l))}),[je,c,Te,ve,s,b,A,fe]);o.a.useEffect((function(){if(U){var e=ue?U.find((function(e){return e.value===ue.value&&e.token.balance!==ue.token.balance})):void 0;e&&ne("token",e)}}),[U]);var Ie=!C&&I,qe=!C&&!I;return Object(pt.jsx)(pt.Fragment,{children:Object(pt.jsxs)(Pc.a,{show:l,backdrop:!0,onHide:D(!1),className:"modal-container",animation:!1,centered:!0,children:[C&&Object(pt.jsx)($p,{}),qe&&Object(pt.jsx)("div",{className:"my-4",children:Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load modal"})}),Ie&&Object(pt.jsx)("form",{onSubmit:ae,noValidate:!0,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mt-n2 lead",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Oc,{farm:fe,pair:r})}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap","data-testid":"modalTitle",children:[Object(pt.jsx)("span",{children:"Stake in"}),"\xa0",Object(pt.jsx)(gc,{farm:fe,pair:r,shortName:!0}),"\xa0",Object(pt.jsx)("span",{children:"farm"})]})]}),Object(pt.jsxs)("div",{className:"form-group mb-0 text-left",children:[Object(pt.jsx)("label",{htmlFor:"amount",className:"mb-2 line-height-1",children:"\xa0"}),Object(pt.jsxs)("div",{className:"token-amount-input-select-max ".concat("token"in ie&&"token"in re?"is-invalid":""," ").concat("amount"in ie&&"amount"in re?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,"data-testid":"amountInput",name:"amount",placeholder:"Amount",value:de,handleChange:oe,handleBlur:ce}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:Object(pt.jsx)(Pe,{})}),Object(pt.jsx)(Ct.TokenSelect,{id:"token",name:"token",options:U,value:ue,onChange:function(e){ne("token",e)},isSearchable:!1,onBlur:ce})]}),ye,pe,Object(pt.jsxs)("small",{className:"d-flex flex-column flex-sm-row",children:["amount"in ie&&"amount"in re&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-2","data-testid":"invalidAmount",children:Oe&&void 0===ve?Object(pt.jsx)(pt.Fragment,{children:ke}):Object(pt.jsx)(pt.Fragment,{children:Se&&void 0===Te?Object(pt.jsx)(pt.Fragment,{children:Ae}):Object(pt.jsx)(pt.Fragment,{children:ie.amount})})}),Object(pt.jsx)("div",{className:"d-flex ml-0 ml-sm-auto line-height-1",children:Object(pt.jsx)(De,{})})]})]}),Object(pt.jsx)("div",{className:"my-spacer",children:Object(pt.jsx)(ap,{balance:Re,amount:de,onChange:function(e){ne("amount",e,!0)}})}),"customRewards"!==fe.rewardType&&Object(pt.jsxs)("div",{className:"d-flex align-items-center text-left mb-3",children:[Object(pt.jsx)("input",{type:"checkbox",id:"lockRewards",ref:u,onChange:oe,value:me,checked:"true"===String(me),className:"mr-2"}),Object(pt.jsxs)("label",{htmlFor:"lockRewards",className:"d-flex align-items-center mb-0",children:[Object(pt.jsx)(F.a,{icon:kc.faLock,size:"sm",className:"mr-2 text-warning"}),Object(pt.jsxs)("div",{className:"d-flex align-items-center flex-wrap",children:[Object(pt.jsx)("span",{className:"mr-2",children:"Lock rewards for:"}),Object(pt.jsxs)("strong",{className:"badge rewards-badge",children:[G,"% LKMEX"]}),Object(pt.jsx)("span",{className:"mx-2",children:"vs"}),Object(pt.jsxs)("strong",{className:"badge unlocked-rewards-badge",children:[Z,"% MEX"]}),Object(pt.jsx)(wo,{info:Object(pt.jsxs)("div",{className:"d-flex flex-wrap justify-content-start",children:["You will receive LKMEX (locked MEX) that can be used immediately to add liquidity or stake them in the MEX farm.",Object(pt.jsx)("div",{className:"m-2",children:"*LKMEX will be unlocked after 1 year : 17% per month in the first 4 months & 16% per month in the last 2."})]})})]})]})]}),Object(pt.jsx)("div",{className:"mb-spacer",children:Object(pt.jsx)(Al,{farm:fe,showHarvestWarning:O,showUnlockScheduleWarning:h})}),Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("button",{className:"btn btn-dark btn-lg flex-even mr-2",onClick:D(!1),children:"Cancel"}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg flex-even ml-2",disabled:Q,children:Q?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Stake"})})]}),ue&&Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign"," ",Object(pt.jsxs)("strong",{children:[N?3:2," actions"]})," in"," ",Object(pt.jsx)("strong",{children:"1 transaction"}),Object(pt.jsx)(wo,{info:Object(pt.jsxs)("div",{className:"text-left",children:["Stake in farm"," ",Object(pt.jsxs)("ul",{className:"pl-3 mb-0",children:[Object(pt.jsx)("li",{children:"Send token"}),N&&Object(pt.jsx)("li",{children:"Send farm token to merge"}),Object(pt.jsx)("li",{children:"Stake in farm"})]})]})})]})]})})]})})},Pl=function(e){var t=e.pairAddress,n=e.openModal,a=Object(y.i)(),i=function(){var e=Object(y.h)().search,t=new URLSearchParams(e);return Object.fromEntries(t).stakeInFarm}();c.useEffect((function(){var e;return t&&i&&t===i&&(e=setTimeout((function(){a(Nh.farms,{replace:!0}),n()}),300)),function(){clearInterval(e)}}),[i,t])},Dl=function(e){var t=e.unlockedRewardsFarm,n=e.lockedRewardsFarm,a=e.pair,i=e.proxy,r=e.active,s=e.disableBtn,c=e.stakeAndRewards,l=o.a.useState(!1),d=Object(T.a)(l,2),u=d[0],b=d[1],j=o.a.useMemo((function(){return r?Object(pt.jsxs)("button",{"data-testid":"stakeBtn",className:"farm-action-btn btn btn-dark w-100",onClick:function(e){e.stopPropagation(),s||b(!0)},disabled:s,children:["Stake ",a?"LP":""]}):Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-enter-farm-".concat(t.address)},e),{},{children:Object(pt.jsx)("div",{className:"d-flex justify-content-center flex-wrap",children:r?"Can stake/withdraw every ".concat(X,"m."):Ll})}))},children:Object(pt.jsx)("span",{children:Object(pt.jsxs)("div",{className:"farm-action-btn btn btn-dark w-100 disabled",onClick:function(e){e.stopPropagation()},children:["Stake ",a?"LP":""]})})})}),[s,t,n,r,Ll]),f=o.a.useMemo((function(){return u?Object(pt.jsx)(Fl,{unlockedRewardsFarm:t,lockedRewardsFarm:n,pair:a,proxy:i,stakeAndRewards:c,showModal:u,setShowModal:function(e){b(e)}}):null}),[t,n,a,i,c,u]);return Pl({pairAddress:null===a||void 0===a?void 0:a.address,openModal:function(){b(!0)}}),{EnterBtn:j,EnterModal:f}},Rl=n(125),El=function(e){var t=e.farm,n=c.useRef(null),a=c.useState(),i=Object(T.a)(a,2),r=i[0],s=i[1],o=c.useState("0"),l=Object(T.a)(o,2),d=l[0],u=l[1],m=c.useState("0"),b=Object(T.a)(m,2),j=b[0],f=b[1],h=c.useState("0"),p=Object(T.a)(h,2),x=p[0],v=p[1],O=c.useState("0"),k=Object(T.a)(O,2),g=k[0],y=k[1],w=c.useState(!1),N=Object(T.a)(w,2),S=N[0],A=N[1];c.useEffect((function(){Object.keys(oe).includes(t.address)&&s(he()(oe[t.address],"YYYY-MM-DD HH:mm Z"))}),[t]);var P=function(){if(r&&null!==n.current){var e=he()(),t=he()(r).diff(e),a=he.a.duration(t),i=Math.floor(a.days()),s=Math.floor(a.hours()),c=a.minutes(),o=a.seconds();u("".concat(i>0?i:0)),f("".concat(s>0?s:0)),v("".concat(c>0?c:0)),y("".concat(o>0?o:0)),A(r.isBefore(he()().utc()))}};c.useEffect((function(){if(r){P();var e=setInterval(P,1e3);return function(){clearInterval(e)}}}),[r]);var D=r||S;return{TopInfo:function(){return Object(pt.jsxs)("div",{className:"d-flex flex-fill",children:[D&&Object(pt.jsx)("div",{ref:n,className:"d-flex ".concat(S?"farm-top-right-info":"farm-top-left-info text-warning"),children:Object(pt.jsxs)("div",{className:"card p-2 flex-row align-items-center",children:[Object(pt.jsx)(F.a,{icon:S?Rl.faExclamationTriangle:no.faClock,className:"mr-2"}),S?Object(pt.jsx)(pt.Fragment,{children:"Expired - Rewards are disabled"}):Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"mr-2",children:"Ends in:"}),Object(pt.jsxs)("div",{children:[parseInt(d)>0?"".concat(d,"d"):""," ",j,"h ",x,"m"," ",0===parseInt(d)?"".concat(g,"s"):""]})]})]})}),!D&&"v1.2"===t.version&&Object(pt.jsx)("div",{ref:n,className:"d-flex farm-top-right-info",children:Object(pt.jsxs)("div",{className:"card p-2 flex-row align-items-center",children:[Object(pt.jsx)(F.a,{icon:Rl.faExclamationTriangle,className:"mr-2"}),"Migrate to improved farm"]})})]})},topInfoClass:"".concat(S||"v1.2"===t.version?"farm-has-top-right-info":r?"farm-has-top-left-info":""," "),expired:S}},Ll="Under maintenance",Cl=function(e){var t=e.farm,n=e.proxy,a=e.pair,i=o.a.useRef(null),r=Object(g.c)(Br),s=Object(O.p)().isLoggedIn,c=o.a.useState(!1),l=Object(T.a)(c,2),d=l[0],u=l[1],b=Ze({farmsRate:r.farmsRate,farmAddress:t.address}),j=Rh({pendingFarmAddress:[t.address],ref:i}).preventActions,f=Ih({unlockedRewardsFarmRate:b}),h=f.unlockedRewardsFarmMultiplier,p=f.FarmMultiplierText,x=Object(g.c)((function(e){return xc(e,t.address)})),v=x.stakeAndRewards,k=x.totalRewards,y=x.totalStaked,w=x.rewardsFetched,N=Nc({unlockedRewardsFarmRate:b}),S=j||!w,A="Active"===(null===b||void 0===b?void 0:b.state),F=El({farm:t}),P=F.TopInfo,D=F.topInfoClass,R=jl({stakeAndRewards:v,pair:a,proxy:n,disableBtn:S,active:A,modalType:"claim"}),E=R.CompoundOrClaimAllBtn,L=R.CompoundOrClaimAllModal,C=jl({stakeAndRewards:v,pair:a,proxy:n,disableBtn:S,active:A,modalType:"compound"}),I=C.CompoundOrClaimAllBtn,q=C.CompoundOrClaimAllModal,M=Dl({unlockedRewardsFarm:t,pair:a,proxy:n,stakeAndRewards:v,active:A,disableBtn:S}),B=M.EnterBtn,U=M.EnterModal,$=cl({unlockedRewardsFarmRate:b,pair:a}),_=$.ApyAprBtn,V=$.ApyAprModal,W=function(){return Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip"},e),{},{children:Object(pt.jsx)(p,{})}))},children:Object(pt.jsxs)("span",{className:"badge rewards-badge ml-2",children:[h,"x"]})})},z=Sc({unlockedTotalRewards:k,unlockedTotalStaked:y,lockedTotalRewards:"0",lockedTotalStaked:"0"}),H=z.totalStaked,Y=z.totalRewards,G=t.farmedToken,Z=t.farmingToken,K=xo({pair:a,amount:w?H:void 0}),X=Ac({rewardsFetched:w,totalStaked:H,totalRewards:Y,farmingTokenDecimals:Z.decimals,farmedTokenDecimals:G.decimals}),Q=X.denominatedTotalStaked,J=X.denominatedTotalStakedWithCommas,ee=X.denominatedTotalRewards,te=X.denominatedTotalRewardsWithCommas,ne=Fc({farmingTokenId:Z.identifier,requireWhitelist:Boolean(t.requireWhitelist)});return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(P,{}),Object(pt.jsx)("div",{className:"mb-4",children:Object(pt.jsxs)("div",{ref:i,className:"standard-card card farm-card overflow-hidden ".concat(D),children:[Object(pt.jsx)("div",{className:"card-header p-4 d-flex align-items-center justify-content-between ".concat(d?"":"rounded"),onClick:function(){u((function(e){return!e}))},style:{cursor:"pointer"},children:Object(pt.jsxs)("div",{className:"d-flex flex-column flex-lg-row flex-fill align-items-lg-center justify-content-lg-between",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mb-lg-0 header-item mr-5",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-start",children:[Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(Oc,{farm:t,pair:a})}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center font-weight-bold mb-lg-1","data-testid":"farmName",children:Object(pt.jsx)(gc,{farm:t,pair:a,proxy:n,farmMultiplierBadge:a&&b?Object(pt.jsx)(W,{}):null})}),Object(pt.jsx)("div",{className:"d-flex align-items-center",children:Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip-".concat(t.address)},e),{},{children:"Total Value Locked"}))},children:Object(pt.jsxs)("div",{className:"underline-dotted-secondary cursor-text",onClick:function(e){e.preventDefault(),e.stopPropagation()},children:["$",Object(pt.jsx)(sp,{valueStr:N})]})})})]})]}),Object(pt.jsx)("div",{className:"d-flex d-lg-none ml-auto",children:Object(pt.jsx)(up,{expanded:d})})]}),_,Object(pt.jsx)(vc,{name:Object(pt.jsxs)(pt.Fragment,{children:["My Staked"," ",a?Object(pt.jsx)(pt.Fragment,{children:"LP"}):Object(pt.jsx)(Rt,{token:Z.identifier})]}),children:Object(pt.jsx)("div",{className:"align-items-start",children:j||"..."===Q?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("span",{className:"mr-1",children:Object(pt.jsx)(sp,{valueStr:J})}),b&&(parseFloat(Q)>0||parseFloat(K)>0)&&Object(pt.jsx)("small",{className:"text-secondary",children:Object(pt.jsx)(Xb,{animated:!0,amount:a?K:Q,usd:a?1:parseFloat(b.farmTokenPriceUSD)})})]})})}),Object(pt.jsx)(vc,{name:Object(pt.jsxs)(pt.Fragment,{children:["My Earned ",Object(pt.jsx)(Rt,{token:G.identifier})]}),children:Object(pt.jsx)("div",{className:"align-items-start",children:j||"..."===ee?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("span",{className:"mr-1",children:Object(pt.jsx)(sp,{valueStr:te})}),parseFloat(ee)>0&&Object(pt.jsx)("small",{className:"text-secondary",children:Object(pt.jsx)(Xb,{animated:!0,amount:ee,usd:b?parseFloat(b.farmedTokenPriceUSD):1})})]})})}),Object(pt.jsx)("div",{className:"d-flex align-items-center mt-2 mb-lg-2",children:Object(pt.jsx)(pt.Fragment,{children:s?Object(pt.jsxs)("div",{className:"d-flex flex-column w-100 flex-xl-row",children:[ne&&Object(pt.jsx)(pt.Fragment,{children:I}),E,B]}):Object(pt.jsx)(kO,{large:!0})})}),Object(pt.jsx)("div",{className:"d-none d-lg-flex card-arrow justify-content-end right-offset",children:Object(pt.jsx)(up,{expanded:d})})]})}),d&&n&&Object(pt.jsx)("div",{className:"card-body py-0 bg-light",children:j?Object(pt.jsx)($p,{title:"Waiting for transactions to be processed"}):Object(pt.jsx)(pt.Fragment,{children:v.length>0?Object(pt.jsx)(pt.Fragment,{children:v.map((function(e){return Object(pt.jsx)(Lo,{pair:a,accountFarmToken:e,proxy:n},e.identifier)}))}):Object(pt.jsx)(pt.Fragment,{children:void 0===w?Object(pt.jsx)($p,{noText:!0}):Object(pt.jsxs)("div",{className:"text-secondary text-center py-4",children:["Stake now to earn"," ",Object(pt.jsx)(Rt,{token:G.identifier}),"."]})})})}),U,L,q,V]})})]})},Il=function(e){var t,n=e.showModal,a=e.setShowModal,i=e.onConfirm,r=o.a.useState(1),s=Object(T.a)(r,2),c=s[0],l=s[1];return Object(pt.jsx)(pt.Fragment,{children:n&&Object(pt.jsx)(Pc.a,{show:n,backdrop:!0,onHide:(t=!1,function(){a(t)}),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("div",{className:"card w-100 tx-sent-modal",children:Object(pt.jsxs)("div",{className:"card-body p-spacer",children:[Object(pt.jsx)("p",{className:"h4 mb-3 text-center",children:"Migration Details"}),Object(pt.jsx)(gv,{totalSteps:2,currentStep:c,className:"mb-spacer"}),Object(pt.jsxs)("div",{className:"mb-spacer",children:[1===c&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("p",{children:"\u26a1 We are upgrading the Farms smart contracts, to make them more efficient."}),Object(pt.jsx)("p",{children:"\u23e9 To benefit from these changes, your farm positions need to be migrated."}),Object(pt.jsx)("p",{children:"\u2705 No funds or rewards will be lost in the process."})]}),2===c&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("p",{children:"\ud83d\udca1 Your LP tokens will be unstaked from the old farms and staked in the new farms."}),Object(pt.jsx)("p",{children:"No rewards lost \u2705"}),Object(pt.jsxs)("ul",{className:"pl-4",children:[Object(pt.jsx)("li",{className:"mb-2",children:"Unclaimed MEX/LKMEX rewards will be sent to your wallet"}),Object(pt.jsx)("li",{className:"mb-2",children:"New MEX/LKMEX rewards begin accumulating in the new farm, uninterrupted"})]}),Object(pt.jsx)("p",{children:"\u2755 MEX Farm Only: MEX/LKMEX staked using 'Reinvest' will be sent to your wallet. You will need to stake it again in the improved MEX farm."})]})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center w-100",children:[Object(pt.jsxs)("button",{className:"btn btn-dark btn-lg flex-even mr-2",onClick:function(){1===c?a(!1):l(1)},children:[1===c&&Object(pt.jsx)(pt.Fragment,{children:"Cancel"}),2===c&&Object(pt.jsx)(pt.Fragment,{children:"Back"})]}),Object(pt.jsxs)("button",{className:"btn btn-primary btn-lg flex-even ml-2",onClick:function(){1===c?l(2):(a(!1),i(),l(1))},children:[1===c&&Object(pt.jsx)(pt.Fragment,{children:"Continue"}),2===c&&Object(pt.jsx)(pt.Fragment,{children:"Migrate All"})]})]})]})})})})},ql=function(e){var t=e.farm,n=e.proxy,a=e.pair,i=e.accountFarmToken,r=c.useRef(null),s=Object(g.c)(Br),o=i.decodedWrappedFarmTokenAttributes,l=o?"".concat(o.farmingTokenID,"-").concat(nt(o.farmingTokenNonce)):void 0,d=go({accountFarmToken:i,proxy:n}),u=d.rewardsToken,m=d.rewardsAmount,b=vo({accountFarmToken:i}),j=b.showCompoundedRewards,f=b.compoundedRewards,h=b.stakedTokenId,p=b.stakedLP,x=Ze({farmsRate:s.farmsRate,farmAddress:t.address}),v=xo({pair:a,amount:p}),O=He({amount:p,denomination:t.farmingToken.decimals,showLastNonZeroDecimal:!0});return Object(pt.jsx)("div",{ref:r,className:"d-flex flex-column flex-sm-row justify-content-sm-between farm-stake-row",children:Object(pt.jsxs)("div",{className:"d-flex flex-column flex-lg-row flex-fill pr-sm-3 mb-2 mb-sm-0",children:[Object(pt.jsx)("div",{className:"d-flex flex-column flex-lg-row align-items-lg-center token-icon-normal flex-even mr-lg-2",children:Object(pt.jsx)(Eo,{iconTokenId:i.collection,labelTokenId:h,amount:p,denomination:t.farmingToken.decimals,lkLpOrLkMexIdentifier:l,proxy:n,pair:a,usdPrice:x&&Object(pt.jsx)(Xb,{animated:!0,amount:a?v:O,usd:a?1:parseFloat(x.farmTokenPriceUSD)}),reinvested:j&&f&&Object(pt.jsxs)("div",{children:["Reinvested"," ",He({amount:f,denomination:t.farmedToken.decimals,addCommas:!0})," ",Object(pt.jsx)(Rt,{token:u})]})})}),Object(pt.jsx)("div",{className:"d-flex flex-column justify-content-center justify-content-sm-start flex-sm-row align-items-sm-center flex-even mr-lg-2",children:Object(pt.jsx)(Eo,{iconTokenId:u,labelTokenId:u,afterLabelText:" earned",amount:m,denomination:t.farmedToken.decimals,usdPrice:x&&Object(pt.jsx)(Xb,{animated:!0,amount:He({amount:m,denomination:t.farmedToken.decimals,showLastNonZeroDecimal:!0}),usd:parseFloat(x.farmedTokenPriceUSD)}),proxy:n})})]})})},Ml=function(e){var t,n,a=e.stake,i=e.useProxy,r=Boolean(null===(t=a.stakeDetails)||void 0===t?void 0:t.lockedRewards)||"lockedRewards"===a.rewardType,s=Boolean((null===(n=a.stakeDetails)||void 0===n?void 0:n.remainingFarmingEpochs)&&a.stakeDetails.remainingFarmingEpochs>0),c={amount:a.balance,farmAddress:a.farmAddress,lockRewards:r,withPenalty:s};return i?Object(m.a)(Object(m.a)({},c),{},{wrappedFarmTokenID:a.collection,wrappedFarmTokenNonce:a.nonce}):Object(m.a)(Object(m.a)({},c),{},{farmTokenID:a.collection,farmTokenNonce:a.nonce})},Bl=function(e){var t=e.ref,n=e.callbackRoute,a=ur(),i=Wh(),r=c.useState(!1),s=Object(T.a)(r,2),o=s[0],l=s[1];return{exitFarmBatch:function(e){var r=e.stakeAndRewards;null!==t.current&&(l(!0),Promise.all(r.slice(0,5).map((function(e){var t=Boolean(e.decodedWrappedFarmTokenAttributes);return a({query:t?so:io,variables:Ml({stake:e,useProxy:t})})}))).then((function(e){if(e){var a=[];e.forEach((function(e){null!==t.current&&e.data&&e.data.data&&(e.data.data.exitFarm&&a.push(me(e.data.data.exitFarm)),e.data.data.exitFarmProxy&&a.push(me(e.data.data.exitFarmProxy)))})),i({transactions:a,callbackRoute:n,processingMessage:"Removing all farm stake",successMessage:"All farm stake removed",submittedMessage:"Remove all farm stake transactions submitted",hasUnrelatedTransactions:!0,pendingFarmAddress:r[0].farmAddress}),l(!1)}else l(!1)})).catch((function(e){console.log("useExitFarmBatch",e),l(!1)})))},exitFarmBatchLoading:o}},Ul=Object(p.gql)(Wo||(Wo=Object(Bi.a)(["\n  query (\n    $farmAddress: String!\n    $farmTokenID: String!\n    $farmTokenNonce: Int!\n    $amount: String!\n    $lockRewards: Boolean\n    $withPenalty: Boolean\n  ) {\n    migrateToNewFarm(\n      farmAddress: $farmAddress\n      farmTokenID: $farmTokenID\n      farmTokenNonce: $farmTokenNonce\n      amount: $amount\n      lockRewards: $lockRewards\n      withPenalty: $withPenalty\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),$l=Object(p.gql)(zo||(zo=Object(Bi.a)(["\n  query (\n    $farmAddress: String!\n    $wrappedFarmTokenID: String!\n    $wrappedFarmTokenNonce: Int!\n    $amount: String!\n    $lockRewards: Boolean\n    $withPenalty: Boolean\n  ) {\n    migrateToNewFarmProxy(\n      farmAddress: $farmAddress\n      wrappedFarmTokenID: $wrappedFarmTokenID\n      wrappedFarmTokenNonce: $wrappedFarmTokenNonce\n      amount: $amount\n      lockRewards: $lockRewards\n      withPenalty: $withPenalty\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),_l=function(e){var t,n,a=e.stake,i=e.useProxy,r=Boolean(null===(t=a.stakeDetails)||void 0===t?void 0:t.lockedRewards),s=Boolean((null===(n=a.stakeDetails)||void 0===n?void 0:n.remainingFarmingEpochs)&&a.stakeDetails.remainingFarmingEpochs>0),c={amount:a.balance,farmAddress:a.farmAddress,lockRewards:r,withPenalty:s};return i?Object(m.a)(Object(m.a)({},c),{},{wrappedFarmTokenID:a.collection,wrappedFarmTokenNonce:a.nonce}):Object(m.a)(Object(m.a)({},c),{},{farmTokenID:a.collection,farmTokenNonce:a.nonce})},Vl=function(e){var t=e.ref,n=e.callbackRoute,a=ur(),i=Wh(),r=c.useState(!1),s=Object(T.a)(r,2),o=s[0],l=s[1];return{migrateStakeBatch:function(e){var r=e.stakeAndRewards;null!==t.current&&(l(!0),Promise.all(r.slice(0,5).map((function(e){var t=Boolean(e.decodedWrappedFarmTokenAttributes);return a({query:t?$l:Ul,variables:_l({stake:e,useProxy:t})})}))).then((function(e){if(e){var a=[];e.forEach((function(e){null!==t.current&&e.data&&e.data.data&&(e.data.data.migrateToNewFarm&&a.push(me(e.data.data.migrateToNewFarm)),e.data.data.migrateToNewFarmProxy&&a.push(me(e.data.data.migrateToNewFarmProxy)))})),i({transactions:a,callbackRoute:n,processingMessage:"Migrating all farm stake",successMessage:"All farm stake migrated",submittedMessage:"Migrate all farm stake transactions submitted",hasUnrelatedTransactions:!0,pendingFarmAddress:r[0].farmAddress}),l(!1)}else l(!1)})).catch((function(e){console.log("useMigrateStakeBatch",e),l(!1)})))},migrateStakeBatchLoading:o}},Wl=function(e){var t=e.farm,n=e.farmRate,a=e.proxy,i=e.pair,r=c.useRef(null),s=Rh({pendingFarmAddress:[t.address],ref:r}).preventActions,o=c.useState(!1),l=Object(T.a)(o,2),d=l[0],u=l[1],b=c.useState(!1),j=Object(T.a)(b,2),f=j[0],h=j[1],p=Object(g.c)((function(e){return xc(e,t.address)})),x=xo({pair:i,amount:p.rewardsFetched?p.totalStaked:void 0}),v=p.stakeAndRewards,O=p.totalRewards,k=p.totalStaked,y=p.rewardsFetched,w=Bl({ref:r,callbackRoute:Nh.farms}),N=w.exitFarmBatch,S=w.exitFarmBatchLoading,A=Vl({ref:r,callbackRoute:Nh.farms}),F=A.migrateStakeBatch,P=A.migrateStakeBatchLoading,D=El({farm:t}),R=D.TopInfo,E=D.topInfoClass,L=n?new je.a(n.totalValueLockedUSD):void 0,C=L?"".concat(Ye(L.toFixed(0),0)):"...",I=y?He({amount:k,denomination:t.farmingToken.decimals,showLastNonZeroDecimal:!0}):"...",q=y?He({amount:k,denomination:t.farmingToken.decimals,addCommas:!0,decimals:2}):"...",M=y?He({amount:O,denomination:t.farmedToken.decimals,showLastNonZeroDecimal:!0}):"...",B=y?He({amount:O,denomination:t.farmedToken.decimals,addCommas:!0,decimals:2}):"...",U="lockedRewards"===(null===n||void 0===n?void 0:n.rewardType)?a.lockedAssetToken.collection:t.farmedToken.identifier,$=i||!Boolean(t.requireWhitelist)?t.farmingToken.identifier:a.lockedAssetToken.collection;return Object(pt.jsxs)("div",{className:"mb-4",children:[Object(pt.jsx)(R,{}),Object(pt.jsxs)("div",{ref:r,className:"standard-card card farm-card overflow-hidden ".concat(E),children:[Object(pt.jsx)("div",{className:"card-header p-4 d-flex align-items-center justify-content-between ".concat(d?"":"rounded"),onClick:function(){u((function(e){return!e}))},style:{cursor:"pointer"},children:Object(pt.jsxs)("div",{className:"d-flex flex-column flex-lg-row flex-fill align-items-lg-center justify-content-lg-between",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mb-lg-0 header-item mr-5",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-start",children:[Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(Oc,{farm:t,pair:i})}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center font-weight-bold mb-lg-1","data-testid":"farmName",children:Object(pt.jsx)(gc,{farm:t,pair:i,proxy:a})}),Object(pt.jsx)("div",{className:"d-flex align-items-center",children:Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip-".concat(t.address)},e),{},{children:"Total Value Locked"}))},children:Object(pt.jsxs)("div",{className:"underline-dotted-secondary cursor-text",onClick:function(e){e.preventDefault(),e.stopPropagation()},children:["$",Object(pt.jsx)(sp,{valueStr:C})]})})})]})]}),Object(pt.jsx)("div",{className:"d-flex d-lg-none ml-auto",children:Object(pt.jsx)(up,{expanded:d})})]}),Object(pt.jsx)(vc,{name:Object(pt.jsxs)(pt.Fragment,{children:["My Staked"," ",i?Object(pt.jsx)(pt.Fragment,{children:"LP"}):Object(pt.jsx)(Rt,{token:$})]}),children:Object(pt.jsx)("div",{className:"align-items-start",children:s||"..."===I?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("span",{className:"mr-1",children:Object(pt.jsx)(sp,{valueStr:q})}),n&&(parseFloat(I)>0||parseFloat(x)>0)&&Object(pt.jsx)("small",{className:"text-secondary",children:Object(pt.jsx)(Xb,{animated:!0,amount:i?x:I,usd:i?1:parseFloat(n.farmTokenPriceUSD)})})]})})}),Object(pt.jsx)(vc,{name:Object(pt.jsxs)(pt.Fragment,{children:["My Earned ",Object(pt.jsx)(Rt,{token:U})]}),children:Object(pt.jsx)("div",{className:"align-items-start",children:s||"..."===M?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("span",{className:"mr-1",children:Object(pt.jsx)(sp,{valueStr:B})}),n&&parseFloat(M)>0&&Object(pt.jsx)("small",{className:"text-secondary",children:Object(pt.jsx)(Xb,{animated:!0,amount:M,usd:parseFloat(n.farmedTokenPriceUSD)})})]})})}),Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center w-100 w-lg-auto mt-2 mb-lg-2",children:"v1.3"===t.version?Object(pt.jsx)("button",{className:"farm-action-btn btn btn-warning w-100","data-testid":"noRewardsExitBtn",onClick:function(e){e.stopPropagation(),N({stakeAndRewards:v})},disabled:S||s,children:S?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Withdraw All"})}):Object(pt.jsx)("button",{className:"farm-action-btn btn btn-warning w-100","data-testid":"noRewardsExitBtn",onClick:function(e){e.stopPropagation(),h(!0)},disabled:P||s,children:P?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Migrate All"})})}),Object(pt.jsx)("div",{className:"d-none d-lg-flex card-arrow right-offset",children:Object(pt.jsx)(up,{expanded:d})})]})]})}),d&&a&&Object(pt.jsx)("div",{className:"card-body py-0 bg-light",children:s?Object(pt.jsx)($p,{title:"Waiting for transactions to be processed"}):Object(pt.jsx)(pt.Fragment,{children:v.map((function(e){return Object(pt.jsx)(ql,{farm:t,pair:i,accountFarmToken:e,proxy:a},e.identifier)}))})}),Object(pt.jsx)(Il,{showModal:f,setShowModal:function(e){h(e)},onConfirm:function(){h(!1),F({stakeAndRewards:v})}})]})]})},zl=function(e){var t=e.farm,n=e.pair,a=e.proxy,i=e.stake,r=c.useRef(null),s=Object(g.c)(Br),o=Ze({farmsRate:s.farmsRate,farmAddress:t.address}),l=i.decodedAtrributes.lpFarmTokenAmount,d=xo({pair:n,amount:l}),u=He({amount:l,denomination:t.farmToken.decimals,showLastNonZeroDecimal:!0});return Object(pt.jsxs)("div",{ref:r,className:"d-flex flex-column flex-sm-row justify-content-sm-between farm-stake-row",children:[Object(pt.jsx)("div",{className:"d-flex flex-column flex-lg-row flex-fill pr-sm-3 mb-2 mb-sm-0",children:Object(pt.jsx)("div",{className:"d-flex flex-column flex-lg-row align-items-lg-center token-icon-normal flex-even mr-lg-2",style:{opacity:"0.5"},children:Object(pt.jsx)(Eo,{nonce:i.nonce,iconTokenId:t.farmToken.collection,labelTokenId:t.farmToken.collection,amount:l,denomination:t.farmToken.decimals,proxy:a,pair:n,usdPrice:o&&Object(pt.jsx)(Xb,{animated:!0,amount:n?d:u,usd:n?1:parseFloat(o.farmTokenPriceUSD)})})})}),Object(pt.jsxs)("div",{className:"d-flex flex-column justify-content-around align-items-lg-center flex-lg-row",children:[Object(pt.jsxs)(w.b,{className:"farm-action-btn btn mb-2 mb-lg-0 btn-secondary",to:Nh.metastaking,children:["MetaStaked ",Object(pt.jsx)(F.a,{icon:ac.b})]}),Object(pt.jsx)("div",{className:"card-arrow right-offset-inner d-none d-lg-block",children:"\xa0"})]})]})},Hl=function(e){var t,n,a,i,r,s,c=e.unlockedRewardsFarm,l=e.lockedRewardsFarm,d=e.proxy,u=e.pair,b=o.a.useRef(null),j=Object(g.c)(Br),f=Object(O.p)().isLoggedIn,h=o.a.useState(!1),p=Object(T.a)(h,2),x=p[0],v=p[1],k=Ze({farmsRate:j.farmsRate,farmAddress:c.address}),y=Ze({farmsRate:j.farmsRate,farmAddress:l.address}),w=Rh({pendingFarmAddress:[c.address,l.address],ref:b}).preventActions,N=Ih({unlockedRewardsFarmRate:k,lockedRewardsFarmRate:y}),S=N.lockedRewardsFarmMultiplier,A=N.FarmMultiplierText,P=Object(g.c)((function(e){return xc(e,c.address)})),D=P.stakeAndRewards,R=P.totalRewards,E=P.totalStaked,L=P.rewardsFetched,C=Object(g.c)((function(e){return xc(e,l.address)})),I=C.stakeAndRewards,q=C.totalRewards,M=C.totalStaked,B=C.rewardsFetched,U=Nc({unlockedRewardsFarmRate:k,lockedRewardsFarmRate:y}),$=[].concat(Object(ke.a)(D),Object(ke.a)(I)),_=Boolean(L&&B),V=w||!_,W="Active"===(null===k||void 0===k?void 0:k.state)&&"Active"===(null===y||void 0===y?void 0:y.state),z=jl({stakeAndRewards:$,pair:u,proxy:d,disableBtn:V,active:W,modalType:"claim"}),H=z.CompoundOrClaimAllBtn,Y=z.CompoundOrClaimAllModal,G=jl({stakeAndRewards:$,pair:u,proxy:d,disableBtn:V,active:W,modalType:"compound"}),Z=G.CompoundOrClaimAllBtn,K=G.CompoundOrClaimAllModal,X=Dl({unlockedRewardsFarm:c,lockedRewardsFarm:l,pair:u,proxy:d,stakeAndRewards:$,active:W,disableBtn:V}),Q=X.EnterBtn,J=X.EnterModal,ee=cl({unlockedRewardsFarmRate:k,lockedRewardsFarmRate:y,pair:u}),te=ee.ApyAprBtn,ne=ee.ApyAprModal,ae=function(){return Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip"},e),{},{children:Object(pt.jsx)(A,{})}))},children:Object(pt.jsxs)("span",{className:"badge rewards-badge ml-2",children:[Object(pt.jsx)(F.a,{icon:kc.faLock,className:"mr-1"}),S,"x"]})})},ie=Sc({unlockedTotalRewards:R,unlockedTotalStaked:E,lockedTotalRewards:q,lockedTotalStaked:M}),re=ie.totalStaked,se=ie.totalRewards,ce=c.farmedToken,oe=c.farmingToken,le=xo({pair:u,amount:_?re:void 0}),de=Ac({rewardsFetched:_,totalStaked:re,totalRewards:se,farmingTokenDecimals:oe.decimals,farmedTokenDecimals:ce.decimals}),ue=de.denominatedTotalStaked,me=de.denominatedTotalStakedWithCommas,be=de.denominatedTotalRewards,je=de.denominatedTotalRewardsWithCommas,fe=Fc({farmingTokenId:c.farmingToken.identifier,requireWhitelist:Boolean(c.requireWhitelist)}),he=u?"pool-type ".concat(u.type.toLowerCase()):"",pe=$.length>0||(null!==(t=null===(n=c.dualYielStake)||void 0===n?void 0:n.length)&&void 0!==t?t:0)>0||(null!==(a=null===(i=l.dualYielStake)||void 0===i?void 0:i.length)&&void 0!==a?a:0)>0;return Object(pt.jsx)("div",{className:"mb-4",children:Object(pt.jsxs)("div",{ref:b,className:"standard-card card farm-card overflow-hidden ".concat(he),children:[Object(pt.jsx)("div",{className:"card-header p-4 d-flex align-items-center justify-content-between ".concat(x?"":"rounded"),onClick:function(){v((function(e){return!e}))},style:{cursor:"pointer"},children:Object(pt.jsxs)("div",{className:"d-flex flex-column flex-lg-row flex-fill align-items-lg-center justify-content-lg-between",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mb-lg-0 header-item mr-5",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-start",children:[Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(Oc,{farm:c,pair:u})}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center font-weight-bold mb-lg-1","data-testid":"farmName",children:Object(pt.jsx)(gc,{farm:c,pair:u,proxy:d,farmMultiplierBadge:u&&(c||y)?Object(pt.jsx)(ae,{}):null})}),Object(pt.jsx)("div",{className:"d-flex align-items-center",children:Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip-".concat(c.address)},e),{},{children:"Total Value Locked"}))},children:Object(pt.jsxs)("div",{className:"underline-dotted-secondary cursor-text",onClick:function(e){e.preventDefault(),e.stopPropagation()},children:["$",Object(pt.jsx)(sp,{valueStr:U})]})})})]})]}),Object(pt.jsx)("div",{className:"d-flex d-lg-none ml-auto",children:Object(pt.jsx)(up,{expanded:x})})]}),te,Object(pt.jsx)(vc,{name:Object(pt.jsxs)(pt.Fragment,{children:["My Staked"," ",u?Object(pt.jsx)(pt.Fragment,{children:"LP"}):Object(pt.jsx)(Rt,{token:oe.identifier})]}),children:Object(pt.jsx)("div",{className:"align-items-start",children:w||"..."===ue?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("span",{className:"mr-1",children:Object(pt.jsx)(sp,{valueStr:me})}),(k||y)&&(parseFloat(ue)>0||parseFloat(le)>0)&&Object(pt.jsx)("small",{className:"text-secondary",children:Object(pt.jsx)(Xb,{animated:!0,amount:u?le:ue,usd:u?1:k?parseFloat(k.farmTokenPriceUSD):1})})]})})}),Object(pt.jsx)(vc,{name:Object(pt.jsxs)(pt.Fragment,{children:["My Earned ",Object(pt.jsx)(Rt,{token:ce.identifier})]}),children:Object(pt.jsx)("div",{className:"align-items-start",children:w||"..."===be?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("span",{className:"mr-1",children:Object(pt.jsx)(sp,{valueStr:je})}),parseFloat(be)>0&&Object(pt.jsx)("small",{className:"text-secondary",children:Object(pt.jsx)(Xb,{animated:!0,amount:be,usd:k?parseFloat(k.farmedTokenPriceUSD):1})})]})})}),Object(pt.jsx)("div",{className:"d-flex align-items-center mt-2 mb-lg-2",children:Object(pt.jsx)(pt.Fragment,{children:f?Object(pt.jsxs)("div",{className:"d-flex flex-column w-100 flex-xl-row",children:[fe&&Object(pt.jsx)(pt.Fragment,{children:Z}),H,Q]}):Object(pt.jsx)(kO,{large:!0})})}),Object(pt.jsx)("div",{className:"d-none d-lg-flex card-arrow justify-content-end right-offset",children:Object(pt.jsx)(up,{expanded:x})})]})}),x&&d&&Object(pt.jsx)("div",{className:"card-body py-0 bg-light",children:w?Object(pt.jsx)($p,{title:"Waiting for transactions to be processed"}):Object(pt.jsx)(pt.Fragment,{children:pe?Object(pt.jsxs)(pt.Fragment,{children:[$.map((function(e){return Object(pt.jsx)(Lo,{pair:u,accountFarmToken:e,proxy:d},e.identifier)})),null===(r=c.dualYielStake)||void 0===r?void 0:r.map((function(e){return Object(pt.jsx)(zl,{farm:c,pair:u,proxy:d,stake:e},e.identifier)})),null===(s=l.dualYielStake)||void 0===s?void 0:s.map((function(e){return Object(pt.jsx)(zl,{farm:l,pair:u,proxy:d,stake:e},e.identifier)}))]}):Object(pt.jsx)(pt.Fragment,{children:void 0===_?Object(pt.jsx)($p,{noText:!0}):Object(pt.jsxs)("div",{className:"text-secondary text-center py-4",children:["Stake now to earn"," ",Object(pt.jsx)(Rt,{token:ce.identifier}),"."]})})})}),J,Y,K,ne]})})},Yl=Object(p.gql)(Ho||(Ho=Object(Bi.a)(["\n  query ($args: DecodeAttributesArgs!) {\n    dualYieldTokenAttributes(args: $args) {\n      attributes\n      identifier\n      lpFarmTokenAmount\n      lpFarmTokenNonce\n      stakingFarmTokenAmount\n      stakingFarmTokenNonce\n    }\n  }\n"]))),Gl=function(e,t){if(!Ce(e))return"...";var n=null!==t&&void 0!==t?t:0,a=new je.a(e).dividedBy(1e4).multipliedBy(100);return a.isGreaterThan(1e4)?">10k":Ye(a.toString(10),n)},Zl=function(e,t){if(!Ce(e))return"...";var n=null!==t&&void 0!==t?t:0,a=new je.a(e).dividedBy(1e4).dividedBy(365).plus(1).pow(365).minus(1).times(100);return a.isGreaterThan(1e4)?">10k":Ye(a.toString(10),n)},Kl=function(e){var t,n,a,i=e.stake,r=e.stakingProxies,s=e.statistics,c=r.find((function(e){return e.dualYieldToken.collection===i.collection})),o=Ze({farmsRate:s.farmsRate,farmAddress:null===c||void 0===c?void 0:c.lpFarmAddress}),l=null!==(t=null===(n=i.proxyFarmRewards)||void 0===n?void 0:n.rewards)&&void 0!==t?t:"0",d="lockedRewards"===(null===o||void 0===o?void 0:o.rewardType)?V:null===o||void 0===o?void 0:o.farmedToken.identifier,u=null===(a=s.tokenUSDPrices.find((function(e){return e.identifier===d})))||void 0===a?void 0:a.price,m=null===o||void 0===o?void 0:o.farmedToken.decimals;return{showProxyRewards:Boolean(i.proxyFarmRewards),proxyRewardsAmount:l,proxyRewardsToken:d,proxyRewardsDenomination:m,proxyRewardsTokenUsdPrice:u,proxyFarmRate:o}},Xl=function(e){var t,n,a,i=e.stake,r=e.statistics,s=e.stakingProxies,c=Ke({farmAddress:i.stakingAddress,stakingFarmsRate:r.stakingFarmsRate}),o=new je.a(null!==(t=null===(n=i.stakingRewards)||void 0===n?void 0:n.rewards)&&void 0!==t?t:"0"),l=null===(a=r.tokenUSDPrices.find((function(e){var t;return e.identifier===(null===c||void 0===c||null===(t=c.rewardToken)||void 0===t?void 0:t.identifier)})))||void 0===a?void 0:a.price,d=function(e){var t,n,a=e.rewards,i=e.rewardToken,s=He({amount:a,denomination:null!==(t=null===i||void 0===i?void 0:i.decimals)&&void 0!==t?t:18}),c=null===(n=r.tokenUSDPrices.find((function(e){return e.identifier===(null===i||void 0===i?void 0:i.identifier)})))||void 0===n?void 0:n.price;return parseFloat(s)*parseFloat(null!==c&&void 0!==c?c:"0")}({rewards:o.toString(10),rewardToken:null===c||void 0===c?void 0:c.rewardToken}),u=function(e){var t,n,a=new je.a(i.balance),r=new je.a(null!==(t=null===e||void 0===e?void 0:e.farmTokenSupply)&&void 0!==t?t:0);return new je.a(null!==(n=null===e||void 0===e?void 0:e.perBlockRewards)&&void 0!==n?n:0).dividedBy(r).times(a).times(10).times(X)}(c),m=function(){var e,t,n=Kl({stake:i,stakingProxies:s,statistics:r}),a=n.showProxyRewards,c=n.proxyRewardsAmount,o=n.proxyRewardsDenomination,l=n.proxyRewardsTokenUsdPrice,d=n.proxyFarmRate,u=He({amount:c,denomination:null!==o&&void 0!==o?o:18}),m=parseFloat(u)*parseFloat(null!==l&&void 0!==l?l:"0"),b=Oo({stake:null!==(e=null===i||void 0===i||null===(t=i.decodedAttributes)||void 0===t?void 0:t.lpFarmTokenAmount)&&void 0!==e?e:"0",farmRate:d});return{proxyRewards:c,proxyRewardsUSDValue:a?m:0,bNproxyRewardsAfterMinutes:a?b:new je.a(0)}}(),b=m.proxyRewards,j=m.proxyRewardsUSDValue,f=m.bNproxyRewardsAfterMinutes,h=new je.a(b),p=d+j,x=o.plus(h),v=u.plus(f),O=p>K||"0"===l,k=x.isGreaterThanOrEqualTo(v);return O&&k},Ql=function(e){var t=e.balance,n=e.lpFarmTokenAmount,a=e.stakingFarmTokenAmount,i=new je.a(t),r=new je.a(n),s=new je.a(a);return i.times(r).dividedToIntegerBy(s).toString(10)},Jl=function(){var e=ur();return function(){var t=Object(j.a)(h.a.mark((function t(n){var a,i,r,s,c,o,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.nfts,i=n.stakingProxies,0!==(r=a.filter((function(e){return i.find((function(t){return t.dualYieldToken.collection===e.collection}))}))).length){t.next=4;break}return t.abrupt("return",{data:[],success:!0});case 4:return s=tt(r),t.prev=5,t.next=8,e({query:Yl,variables:{args:s}});case 8:if(null!==(o=t.sent)&&void 0!==o&&null!==(c=o.data)&&void 0!==c&&c.data){t.next=11;break}return t.abrupt("return",{data:[],success:!1});case 11:return l=[],o.data.data.dualYieldTokenAttributes.forEach((function(e){var t=r.find((function(t){return t.identifier===e.identifier}));t&&l.push(Object(m.a)(Object(m.a)({},t),{},{decodedAtrributes:Object(m.a)(Object(m.a)({},e),{},{lpFarmTokenAmount:Ql({balance:t.balance,lpFarmTokenAmount:e.lpFarmTokenAmount,stakingFarmTokenAmount:e.stakingFarmTokenAmount})})}))})),t.abrupt("return",{data:l,success:!0});case 17:return t.prev=17,t.t0=t.catch(5),console.log("useDecodeDualYieldTokens",t.t0),t.abrupt("return",{data:[],success:!1});case 21:case"end":return t.stop()}}),t,null,[[5,17]])})));return function(e){return t.apply(this,arguments)}}()},ed=function(e){return e.farms},td=(Se(ed,(function(e){var t,n;return null!==(t=null===e||void 0===e||null===(n=e.farmsCollection)||void 0===n?void 0:n.length)&&void 0!==t?t:0})),function(e){return e.toasts}),nd=Se(td,(function(e){return e.toasts})),ad=Se(td,(function(e){return e.toastSignSessions})),id=Se(td,(function(e){return e.transactionToasts})),rd=Se(td,(function(e){return e.refetch})),sd=Object(p.gql)(Yo||(Yo=Object(Bi.a)(["\n  query ($args: DecodeAttributesArgs!) {\n    farmProxyTokenAttributes(args: $args) {\n      identifier\n      attributes\n      farmTokenID\n      farmTokenNonce\n      farmTokenAttributes {\n        attributes\n      }\n      farmType\n      farmingTokenID\n      farmingTokenLockedNonce\n    }\n  }\n"]))),cd=function(){var e=ur();return function(){var t=Object(j.a)(h.a.mark((function t(n){var a,i,r,s,c,o,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.nfts,i=n.farmProxyTokenId,0!==(r=a.filter((function(e){return e.collection===i}))).length){t.next=4;break}return t.abrupt("return",{data:[],success:!0});case 4:return s=tt(r),t.prev=5,t.next=8,e({query:sd,variables:{args:s}});case 8:if(null!==(o=t.sent)&&void 0!==o&&null!==(c=o.data)&&void 0!==c&&c.data){t.next=11;break}return t.abrupt("return",{data:[],success:!1});case 11:return l=[],o.data.data.farmProxyTokenAttributes.forEach((function(e){var t=a.find((function(t){return t.identifier===e.identifier}));t&&l.push(Object(m.a)(Object(m.a)({},t),{},{decodedFarmProxyTokenAttributes:e}))})),t.abrupt("return",{data:l,success:!0});case 17:return t.prev=17,t.t0=t.catch(5),console.log("decodeWrappedFarmTokens",t.t0),t.abrupt("return",{data:[],success:!1});case 21:case"end":return t.stop()}}),t,null,[[5,17]])})));return function(e){return t.apply(this,arguments)}}()},od=Object(p.gql)(Go||(Go=Object(Bi.a)(["\n  query ($args: DecodeAttributesArgs!) {\n    wrappedFarmTokenAttributes(args: $args) {\n      identifier\n      farmTokenID\n      farmTokenAttributes {\n        attributes\n      }\n      farmingTokenID\n      farmingTokenNonce\n    }\n  }\n"]))),ld=function(){var e=ur();return function(){var t=Object(j.a)(h.a.mark((function t(n){var a,i,r,s,c,o,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.nfts,i=n.wrappedFarmTokenId,0!==(r=a.filter((function(e){return e.collection===i}))).length){t.next=4;break}return t.abrupt("return",{data:[],success:!0});case 4:return s=tt(r),t.prev=5,t.next=8,e({query:od,variables:{args:s}});case 8:if(null!==(o=t.sent)&&void 0!==o&&null!==(c=o.data)&&void 0!==c&&c.data){t.next=11;break}return t.abrupt("return",{data:[],success:!1});case 11:return l=[],o.data.data.wrappedFarmTokenAttributes.forEach((function(e){var t=a.find((function(t){return t.identifier===e.identifier}));t&&l.push(Object(m.a)(Object(m.a)({},t),{},{decodedWrappedFarmTokenAttributes:e}))})),t.abrupt("return",{data:l,success:!0});case 17:return t.prev=17,t.t0=t.catch(5),console.log("decodeWrappedFarmTokens",t.t0),t.abrupt("return",{data:[],success:!1});case 21:case"end":return t.stop()}}),t,null,[[5,17]])})));return function(e){return t.apply(this,arguments)}}()},dd=Object(p.gql)(Zo||(Zo=Object(Bi.a)(["\n  query ($offset: Int, $pairsLimit: Int) {\n    farms {\n      address\n      farmedToken {\n        name\n        identifier\n        decimals\n      }\n      farmToken {\n        name\n        collection\n        decimals\n      }\n      farmingToken {\n        name\n        identifier\n        decimals\n      }\n      state\n      penaltyPercent\n      minimumFarmingEpochs\n      version\n      rewardType\n      requireWhitelist\n    }\n    pairs(offset: $offset, limit: $pairsLimit) {\n      address\n      firstToken {\n        name\n        identifier\n        decimals\n      }\n      secondToken {\n        name\n        identifier\n        decimals\n      }\n      liquidityPoolToken {\n        name\n        identifier\n        decimals\n      }\n      state\n      totalFeePercent\n      specialFeePercent\n      type\n    }\n    proxy {\n      address\n      wrappedLpToken {\n        collection\n        name\n        decimals\n      }\n      wrappedFarmToken {\n        collection\n        name\n        decimals\n      }\n      lockedAssetToken {\n        collection\n        name\n        decimals\n      }\n      assetToken {\n        identifier\n        name\n        decimals\n      }\n      intermediatedPairs\n      intermediatedFarms\n    }\n    simpleLock {\n      address\n      lockedToken {\n        collection\n        name\n        decimals\n      }\n      lpProxyToken {\n        collection\n        name\n        decimals\n      }\n      farmProxyToken {\n        collection\n        name\n        decimals\n      }\n      intermediatedPairs\n      intermediatedFarms\n    }\n    stakingProxies {\n      address\n      dualYieldToken {\n        collection\n        name\n        decimals\n      }\n      farmToken {\n        collection\n        name\n        decimals\n      }\n      lpFarmToken {\n        collection\n        name\n        decimals\n      }\n      lpFarmAddress\n      pairAddress\n      stakingFarmAddress\n    }\n  }\n"]))),ud=function(e){var t=ur(),n=o.a.useState(),a=Object(T.a)(n,2),i=a[0],r=a[1],s=o.a.useState(),c=Object(T.a)(s,2),l=c[0],d=c[1];return o.a.useEffect((function(){null!==e.current&&t({query:dd,variables:{offset:0,pairsLimit:G}}).then((function(t){if(null!==e.current)if(t.data&&t.data.data){var n=t.data.data;r({farms:n.farms.filter((function(e){var t=e.address;return ce.includes(t)})),pairs:ys({pairsData:n.pairs}),proxy:Object(m.a)(Object(m.a)({},n.proxy),{},{simpleLock:n.simpleLock}),stakingProxies:n.stakingProxies}),d(!0)}else d(!1)})).catch((function(t){null!==e.current&&(console.log("farms useFetchPageData",t),d(!1))}))}),[]),{pageData:i,pageDataFetched:!0===l,pageDataLoading:void 0===l,pageDataError:!1===l}},md=n(314),bd=n.n(md),jd=function(){return function(e){var t=e.farms,n=e.stakingProxies,a=e.nfts,i=e.wrappedFarmTokens,r=e.farmProxyTokens,s=e.dualYieldTokens;if(t.length>0){var c=bd()(t);return c.forEach((function(e){a.forEach((function(t){if(e.farmToken.collection===t.collection){var n,a=Object(m.a)(Object(m.a)({},t),{},{farmAddress:e.address,rewardType:e.rewardType,minimumFarmingEpochs:e.minimumFarmingEpochs});e.stake=[].concat(Object(ke.a)(null!==(n=e.stake)&&void 0!==n?n:[]),[a])}})),i.forEach((function(t){if(e.farmToken.collection===t.decodedWrappedFarmTokenAttributes.farmTokenID){var n,a=Object(m.a)(Object(m.a)({},t),{},{farmAddress:e.address,rewardType:e.rewardType,minimumFarmingEpochs:e.minimumFarmingEpochs});e.stake=[].concat(Object(ke.a)(null!==(n=e.stake)&&void 0!==n?n:[]),[a])}})),r.forEach((function(t){if(e.farmToken.collection===t.decodedFarmProxyTokenAttributes.farmTokenID){var n,a=Object(m.a)(Object(m.a)({},t),{},{farmAddress:e.address,rewardType:e.rewardType,minimumFarmingEpochs:e.minimumFarmingEpochs});e.stake=[].concat(Object(ke.a)(null!==(n=e.stake)&&void 0!==n?n:[]),[a])}})),s.forEach((function(t){var a;n.find((function(n){return n.lpFarmAddress===e.address&&n.dualYieldToken.collection===t.collection}))&&(e.dualYielStake=[].concat(Object(ke.a)(null!==(a=e.dualYielStake)&&void 0!==a?a:[]),[t]))})),null==e.stake&&(e.stake=[])})),function(e){return e.sort((function(e,t){var n=ce.indexOf(e.address),a=ce.indexOf(t.address);return(n>-1?n:99)-(a>-1?a:99)}))}(c)}}};var fd,hd,pd=Object(p.gql)(Ko||(Ko=Object(Bi.a)(["\n  query ($getRewardsForPositionArgs: BatchFarmRewardsComputeArgs!) {\n    getRewardsForPosition(farmsPositions: $getRewardsForPositionArgs) {\n      rewards\n      remainingFarmingEpochs\n      decodedAttributes {\n        aprMultiplier\n        compoundedReward\n        initialFarmingAmount\n        currentFarmAmount\n        lockedRewards\n        identifier\n      }\n    }\n  }\n"]))),xd=function(e){var t=e.balance,n=e.initialFarmingAmount,a=e.compoundedReward,i=e.currentFarmAmount,r=new je.a(t),s=new je.a(n),c=new je.a(a),o=new je.a(i);return{initialFarmingAmount:r.times(s).dividedToIntegerBy(o).toString(10),compoundedReward:r.times(c).dividedToIntegerBy(o).toString(10)}},vd=function(e){var t=[];return e.forEach((function(e){var n,a,i=null===(n=e.decodedWrappedFarmTokenAttributes)||void 0===n?void 0:n.farmTokenAttributes.attributes,r=null===(a=e.decodedFarmProxyTokenAttributes)||void 0===a?void 0:a.farmTokenAttributes.attributes,s=i||(r||e.attributes);s&&e.farmAddress&&t.push({attributes:s,identifier:e.identifier,farmAddress:e.farmAddress,liquidity:e.balance})})),t},Od=function(e){var t=e.farms,n=e.farmsLoading,a=Object(g.b)(),i=ur(),r=c.useRef(),s=c.useState(),o=Object(T.a)(s,2),l=o[0],d=o[1];c.useEffect((function(){return t.length>0&&!n&&(r.current=setInterval((function(){document.hidden||b()}),6e3)),function(){clearInterval(r.current)}}),[t,n,l]);var u=function(e){var n=e.farmTokensWithRewards;e.farmAddresses.forEach((function(e){var i,r=n.filter((function(t){return t.farmAddress===e})),s=new je.a("0"),c=new je.a("0");r.forEach((function(e){var t=null===e||void 0===e?void 0:e.stakeDetails;if(t){var n=new je.a(t.rewards),a=new je.a(t.initialFarmingAmount),i=new je.a(t.compoundedReward);s=s.plus(n),c=c.plus(a).plus(i)}}));var o=r.sort((function(e,t){return e.identifier<t.identifier?-1:e.identifier>t.identifier?1:0})),l=t.find((function(t){return t.address===e}));a(Zn({farmAddress:e,payload:{denomination:null!==(i=null===l||void 0===l?void 0:l.farmingToken.decimals)&&void 0!==i?i:0,rewardsFetched:!0,totalRewards:s.toString(10),totalStaked:c.toString(10),stakeAndRewards:o}}))}))},b=function(){var e=Object(j.a)(h.a.mark((function e(){var n,r,s,c,o,b;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=20;break}if(n=Object(ge.isArray)(t)?t.map((function(e){return Object(ge.isArray)(e.stake)?e.stake:[]})).flat():[],r=t.map((function(e){return e.address})),!(n.length>0)){e.next=18;break}return e.prev=4,e.next=7,i({query:pd,variables:{getRewardsForPositionArgs:{farmsPositions:vd(n)}},id:"getRewards"});case 7:s=e.sent,s.data&&s.data.errors?void 0===l&&(d(!1),r.forEach((function(e){a(Kn(e))}))):(c=s.data&&s.data.data.getRewardsForPosition,o=[],b=[],n.forEach((function(e){var t=c.find((function(t){return t.decodedAttributes.identifier===e.identifier}));if(t){var n=t.decodedAttributes;2===n.aprMultiplier&&b.push("".concat(e.farmAddress));var a=xd({balance:e.balance,initialFarmingAmount:n.initialFarmingAmount,compoundedReward:n.compoundedReward,currentFarmAmount:n.currentFarmAmount}),i=a.initialFarmingAmount,r=a.compoundedReward,s=Object(m.a)(Object(m.a)({},e),{},{stakeDetails:{compoundedReward:r,initialFarmingAmount:i,aprMultiplier:n.aprMultiplier,remainingFarmingEpochs:t.remainingFarmingEpochs,rewards:t.rewards,lockedRewards:n.lockedRewards}});o.push(s)}})),u({farmTokensWithRewards:o,farmAddresses:r}),d(!0)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.log("fetchRewards",e.t0),void 0===l&&(d(!1),r.forEach((function(e){a(Kn(e))})));case 16:e.next=20;break;case 18:r.forEach((function(e){a(Kn(e))})),d(!0);case 20:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}();return c.useEffect((function(){n||b()}),[t,n]),{rewardsLoading:void 0===l,rewardsError:!1===l}},kd=function(e){var t=e.statistics;return Object(pt.jsx)("div",{className:"card statistics-card border-0",children:Object(pt.jsx)("div",{className:"card-body p-2",children:Object(pt.jsxs)("div",{className:"row text-secondary",children:[Object(pt.jsx)("div",{className:"col-12 col-lg-6 border-right d-flex justify-content-center justify-content-lg-start align-items-center",children:Object(pt.jsxs)("div",{className:"ml-4 mb-4 mb-lg-0",children:[Object(pt.jsx)("div",{children:"Total Value Locked on Farms"}),Object(pt.jsxs)("div",{className:"text-primary-highlight h3 mb-0",children:["$",Object(pt.jsx)(sp,{valueStr:t.totalDepositedInExchange})]})]})}),Object(pt.jsx)("div",{className:"col-12 col-lg-6",children:Object(pt.jsxs)("div",{className:"pl-lg-3 text-center text-lg-left",children:[Object(pt.jsxs)("div",{children:["1 MEX ="," ",Object(pt.jsxs)("span",{className:"text-primary-highlight","data-testid":"mexPrice",children:["$",Object(pt.jsx)(sp,{valueStr:t.mexPrice})]})]}),Object(pt.jsxs)("div",{children:["Market Cap:"," ",Object(pt.jsxs)("span",{className:"text-primary-highlight",children:["$",Object(pt.jsx)(sp,{valueStr:t.marketCap})]})]}),Object(pt.jsxs)("div",{children:["Est. Weekly Rewards:"," ",Object(pt.jsxs)("span",{className:"text-primary-highlight",children:["$",Object(pt.jsx)(sp,{valueStr:t.aggregatedRewards})]})]})]})})]})})})},gd=function(){var e=c.useRef(null),t=Object(g.c)(Br),n=Object(O.p)().isLoggedIn,a=Mh(),i=a.isAccountLoading,r=a.accountLoadingError;Dr();var s=function(e){var t=Object(g.b)(),n=ld(),a=cd(),i=jd(),r=Jl(),s=Object(g.c)(rd),c=Object(g.c)(ed),l=c.farmsCollection,d=c.isLoading,u=c.isError,m=ud(e),b=m.pageData,f=m.pageDataError,p=m.pageDataFetched,x=Cr("farms").fetchNfts,v=function(){t(Wn({farmsCollection:[],isLoading:!1,isError:!0}))},O=function(){var e=Object(j.a)(h.a.mark((function e(){var s,c,o,l,d,u,m,j,O,k,g,y,w,T,N,S,A,F,P,D,R;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=3;break}return v(),e.abrupt("return");case 3:if(p&&b){e.next=5;break}return e.abrupt("return");case 5:return l=b.farms,d=b.stakingProxies,u=b.proxy,m=u.wrappedFarmToken,j=u.simpleLock,O=m.collection,k=null!==(s=null===j||void 0===j?void 0:j.farmProxyToken.collection)&&void 0!==s?s:"",g=null!==(c=l.map((function(e){return e.farmToken.collection})))&&void 0!==c?c:[],y=null!==(o=d.map((function(e){return e.dualYieldToken.collection})))&&void 0!==o?o:[],e.next=12,x([].concat(Object(ke.a)(g),Object(ke.a)(y),[O,k]));case 12:if(w=e.sent,T=w.data,w.success){e.next=18;break}return v(),e.abrupt("return");case 18:return e.next=20,n({nfts:T,wrappedFarmTokenId:O});case 20:if(N=e.sent,S=N.data,N.success){e.next=26;break}return v(),e.abrupt("return");case 26:return e.next=28,a({nfts:T,farmProxyTokenId:k});case 28:if(A=e.sent,F=A.data,A.success){e.next=34;break}return v(),e.abrupt("return");case 34:return e.next=36,r({nfts:T,stakingProxies:d});case 36:if(P=e.sent,D=P.data,P.success){e.next=42;break}return v(),e.abrupt("return");case 42:R=i({farms:l,stakingProxies:d,nfts:T,wrappedFarmTokens:S,farmProxyTokens:F,dualYieldTokens:D}),t(Wn({farmsCollection:null!==R&&void 0!==R?R:[],isLoading:!1,isError:!1}));case 44:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.useEffect((function(){O()}),[b,p,f,s]),{farmsCollection:l,pageData:b,isLoading:d,isError:u}}(e),l=s.farmsCollection,d=s.pageData,u=s.isLoading,m=s.isError,b=Od({farms:l,farmsLoading:u}),f=b.rewardsLoading,p=b.rewardsError,x=function(e){var t=e.filter((function(e){var t=e.version,n=e.address,a=!1;return Object.keys(oe).includes(n)&&(a=he()(oe[n],"YYYY-MM-DD HH:mm Z").isBefore(he()().utc())),"v1.2"===t||a})),n=t.filter((function(e){var t=e.stake;return t&&t.length>0})).length>0,a=[],i=e.filter((function(e){var n=e.version,a=e.address,i=t.find((function(e){return e.address===a}));return"v1.3"===n&&!i}));i.forEach((function(e){var t=a.find((function(t){var n=t.unlockedRewardsFarm,a=t.lockedRewardsFarm;return n.address===e.address||a.address===e.address}));if(!t){var n=i.filter((function(t){return t.farmingToken.identifier===e.farmingToken.identifier}));if(2===n.length){var r="unlockedRewards"===n[0].rewardType?n[0]:n[1],s="lockedRewards"===n[0].rewardType?n[0]:n[1];a.push({unlockedRewardsFarm:r,lockedRewardsFarm:s})}}}));var r=[];se.forEach((function(e){var t=i.find((function(t){var n=t.address;return e.unlockedRewardsFarmAddress===n})),n=i.find((function(t){var n=t.address;return e.lockedRewardsFarmAddress===n}));t&&n&&r.push({unlockedRewardsFarm:t,lockedRewardsFarm:n})}));var s=i.filter((function(e){var t=e.address,n=a.find((function(e){var n=e.unlockedRewardsFarm,a=e.lockedRewardsFarm;return n.address===t||a.address===t})),i=r.find((function(e){var n=e.unlockedRewardsFarm,a=e.lockedRewardsFarm;return n.address===t||a.address===t}));return Boolean(!n&&!i)}));return{noRewardsFarms:t,showNoRewardsFarmsSection:n,lpFarmGroups:a,stakingFarmGroups:r,stakingFarms:s}}(l),v=x.noRewardsFarms,k=x.showNoRewardsFarmsSection,y=x.lpFarmGroups,w=x.stakingFarmGroups,T=x.stakingFarms,N=dr(),S=N.fetchTokenDetails,A=N.tokenDetailsLoading,F=N.tokenDetailsError,P=lr(),D=P.fetchNftDetails,R=P.nftDetailsLoading,E=P.nftDetailsError;c.useEffect((function(){if(d){var e=function(e){var t=[],n=[],a=e.farms,i=e.pairs,r=e.proxy,s=r.lockedAssetToken,c=r.wrappedLpToken,o=r.wrappedFarmToken,l=r.simpleLock;if(a.forEach((function(e){var a=e.farmingToken.identifier,i=e.farmedToken.identifier,r=e.farmToken.collection;t.includes(a)||t.push(a),t.includes(i)||t.push(i),n.includes(r)||n.push(r)})),n.push.apply(n,[s.collection,o.collection,c.collection]),l){var d=l.lockedToken,u=l.lpProxyToken,m=l.farmProxyToken;n.push.apply(n,[d.collection,u.collection,m.collection])}return i.forEach((function(e){t.includes(e.firstToken.identifier)||t.push(e.firstToken.identifier),t.includes(e.secondToken.identifier)||t.push(e.secondToken.identifier)})),{identfiers:t,collections:n}}(d),t=e.identfiers,n=e.collections;S(t),D(n)}}),[d]);var L=u||f||i&&n||A||R,C=m||p||r||F||E,I=!L&&!C;return Object(pt.jsxs)(pt.Fragment,{children:[L&&!C&&Object(pt.jsx)($p,{}),C&&Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load farms"}),Object(pt.jsx)("div",{ref:e,className:"container mt-spacer",children:I&&l&&d&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"row mb-spacer",children:Object(pt.jsxs)("div",{className:"col-12 text-center ",children:[Object(pt.jsx)("h2",{children:"Farms"}),Object(pt.jsx)("h3",{className:"h6 font-weight-light text-secondary mb-2 pt-1",children:"Stake Liquidity Pool (LP) tokens or MEX to earn more MEX"})]})}),Object(pt.jsx)("div",{className:"row",children:Object(pt.jsx)("div",{className:"col-12 col-lg-8 col-xl-7 mx-auto",children:Object(pt.jsx)(kd,{statistics:t})})}),n&&k&&Object(pt.jsxs)("div",{className:"row mb-n4 pt-spacer",children:[Object(pt.jsx)("div",{className:"col-12 py-spacer h5 m-0 text-secondary mt-n4",children:"My Old Farms"}),v.filter((function(e){var t=e.stake;return t&&t.length>0})).map((function(e){var n=Ze({farmsRate:t.farmsRate,farmAddress:e.address}),a=d.pairs.find((function(t){return t.liquidityPoolToken.identifier===e.farmingToken.identifier}));return Object(pt.jsx)("div",{className:"col-12",children:Object(pt.jsx)(Wl,{farmRate:n,farm:e,pair:a,proxy:d.proxy})},e.farmToken.collection)}))]}),Object(pt.jsxs)("div",{className:"row mb-n4",children:[Object(pt.jsx)("div",{className:"col-12 py-spacer h5 m-0 text-secondary",children:"Staking Farms"}),w.map((function(e){return Object(pt.jsx)("div",{className:"col-12",children:Object(pt.jsx)(Hl,{unlockedRewardsFarm:e.unlockedRewardsFarm,lockedRewardsFarm:e.lockedRewardsFarm,proxy:d.proxy})},e.unlockedRewardsFarm.farmToken.collection)})),T.map((function(e){return Object(pt.jsx)("div",{className:"col-12",children:Object(pt.jsx)(Cl,{farm:e,proxy:d.proxy})},e.farmToken.collection)}))]}),Object(pt.jsxs)("div",{className:"row",children:[Object(pt.jsx)("div",{className:"col-12 py-spacer h5 m-0 text-secondary",children:Object(pt.jsxs)("div",{className:"d-flex flex-column flex-sm-row align-items-sm-center justify-content-sm-between",children:[Object(pt.jsx)("div",{className:"mr-2 mb-2 mb-sm-0",children:"LP Farms"}),Object(pt.jsx)(fc,{})]})}),y.map((function(e){var t=d.pairs.find((function(t){return t.liquidityPoolToken.identifier===e.unlockedRewardsFarm.farmingToken.identifier}));return t&&Object(pt.jsx)("div",{className:"col-12",children:Object(pt.jsx)(Hl,{unlockedRewardsFarm:e.unlockedRewardsFarm,lockedRewardsFarm:e.lockedRewardsFarm,pair:t,proxy:d.proxy})},e.unlockedRewardsFarm.farmToken.collection)}))]})]})})]})},yd=function(e){return e.stakingFarms},wd=(Se(yd,(function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.stakingFarmsCollection.length)&&void 0!==t?t:0})),Object(p.gql)(fd||(fd=Object(Bi.a)(["\n  query {\n    stakingFarms {\n      address\n      rewardToken {\n        name\n        identifier\n        decimals\n      }\n      farmToken {\n        name\n        collection\n        decimals\n      }\n      farmingToken {\n        name\n        identifier\n        decimals\n      }\n      state\n      minUnboundEpochs\n      penaltyPercent\n    }\n    stakingProxies {\n      address\n      dualYieldToken {\n        collection\n        name\n        decimals\n      }\n      farmToken {\n        collection\n        name\n        decimals\n      }\n      lpFarmToken {\n        collection\n        name\n        decimals\n      }\n      lpFarmAddress\n      pairAddress\n      stakingFarmAddress\n    }\n  }\n"])))),Td=function(e){var t=ur(),n=c.useState(),a=Object(T.a)(n,2),i=a[0],r=a[1],s=c.useState(),o=Object(T.a)(s,2),l=o[0],d=o[1];return c.useEffect((function(){null!==e.current&&t({query:wd,variables:{}}).then((function(t){if(null!==e.current)if(t.data&&t.data.data){var n=t.data.data;r({stakingFarms:n.stakingFarms.filter((function(e){var t=e.address;return ce.includes(t)})),stakingProxies:n.stakingProxies}),d(!0)}else d(!1)})).catch((function(t){null!==e.current&&(console.log("farms useFetchPageData",t),d(!1))}))}),[]),{pageData:i,pageDataFetched:!0===l,pageDataLoading:void 0===l,pageDataError:!1===l}},Nd=function(e){var t=e.farms,n=e.stakingProxies,a=e.dualYieldTokens,i=e.nfts;if(t.length>0){var r=bd()(t);return r.forEach((function(e){var t,r;i.forEach((function(t){var i,r=e.farmToken.collection===t.collection,s=n.find((function(n){var a=n.stakingFarmAddress,i=n.dualYieldToken;return a===e.address&&i.collection===t.collection}));if(r)if(12===(null===(i=t.attributes)||void 0===i?void 0:i.length)){var c,o=Object(m.a)(Object(m.a)({},t),{},{stakingAddress:e.address});e.unbondingStakes=[].concat(Object(ke.a)(null!==(c=e.unbondingStakes)&&void 0!==c?c:[]),[o])}else{var l,d=Object(m.a)(Object(m.a)({},t),{},{stakingAddress:e.address});e.stakes=[].concat(Object(ke.a)(null!==(l=e.stakes)&&void 0!==l?l:[]),[d])}if((null===s||void 0===s?void 0:s.dualYieldToken.collection)===t.collection){var u,b=a.find((function(e){return e.identifier===t.identifier})),j=Object(m.a)(Object(m.a)({},t),{},{decodedAttributes:null===b||void 0===b?void 0:b.decodedAtrributes,stakingAddress:e.address,proxyStakingAddress:s.address});e.stakes=[].concat(Object(ke.a)(null!==(u=e.stakes)&&void 0!==u?u:[]),[j])}})),e.stakes=null!==(t=e.stakes)&&void 0!==t?t:[],e.unbondingStakes=null!==(r=e.unbondingStakes)&&void 0!==r?r:[]})),function(e){return e.sort((function(e,t){var n=ce.indexOf(e.address),a=ce.indexOf(t.address);return(n>-1?n:99)-(a>-1?a:99)}))}(r)}};var Sd,Ad,Fd,Pd,Dd,Rd,Ed,Ld,Cd,Id,qd,Md,Bd,Ud,$d=Object(p.gql)(hd||(hd=Object(Bi.a)(["\n  query (\n    $getStakingRewardsForPositionArgs: BatchFarmRewardsComputeArgs!\n    $getDualYieldRewardsForPositionArgs: BatchFarmRewardsComputeArgs!\n    $unboundTokenAttributes: DecodeAttributesArgs!\n  ) {\n    getStakingRewardsForPosition(\n      stakingPositions: $getStakingRewardsForPositionArgs\n    ) {\n      rewards\n      decodedAttributes {\n        attributes\n        compoundedReward\n        currentFarmAmount\n        identifier\n        rewardPerShare\n      }\n    }\n    getDualYieldRewardsForPosition(\n      proxyStakingPositions: $getDualYieldRewardsForPositionArgs\n    ) {\n      farmRewards {\n        rewards\n        remainingFarmingEpochs\n      }\n      stakingRewards {\n        rewards\n        decodedAttributes {\n          attributes\n          compoundedReward\n          currentFarmAmount\n          identifier\n          rewardPerShare\n        }\n      }\n      identifier\n    }\n    unboundTokenAttributes(args: $unboundTokenAttributes) {\n      attributes\n      identifier\n      remainingEpochs\n    }\n  }\n"]))),_d=function(e){var t=e.balance,n=e.compoundedReward,a=e.currentFarmAmount,i=new je.a(t),r=new je.a(n),s=new je.a(a);return i.times(r).dividedToIntegerBy(s).toString(10)},Vd=function(e){var t=[];return e.forEach((function(e){var n;t.push({attributes:e.attributes,identifier:e.identifier,farmAddress:"".concat(null!==(n=null===e||void 0===e?void 0:e.proxyStakingAddress)&&void 0!==n?n:null===e||void 0===e?void 0:e.stakingAddress),liquidity:e.balance})})),t},Wd=function(e){var t=e.farms,n=e.farmsLoading,a=Object(g.b)(),i=ur(),r=c.useRef(),s=c.useState(),o=Object(T.a)(s,2),l=o[0],d=o[1];c.useEffect((function(){return t.length>0&&!n&&(r.current=setInterval((function(){document.hidden||b()}),6e3)),function(){clearInterval(r.current)}}),[t,n,l]);var u=function(e){var n=e.stakes,i=e.unbondingStakes;e.farmAddresses.forEach((function(e){var r=n.filter((function(t){return t.stakingAddress===e})),s=i.filter((function(t){return t.stakingAddress===e})),c=new je.a("0"),o=new je.a("0");r.forEach((function(e){var t=null===e||void 0===e?void 0:e.stakingRewards;if(t){var n=new je.a(t.rewards),a=new je.a(e.balance);c=c.plus(n),o=o.plus(a)}})),s.forEach((function(e){var t=new je.a(e.balance);o=o.plus(t)}));var l=t.find((function(t){return t.address===e}));a(Za({farmAddress:e,payload:{denomination:l?l.farmingToken.decimals:0,rewardsFetched:!0,totalRewards:c.toString(10),totalStaked:o.toString(10),stakes:r,unbondingStakes:s}}))}))},b=function(){var e=Object(j.a)(h.a.mark((function e(){var n,r,s,c,o,b;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(n=Object(ge.isArray)(t)?t.map((function(e){return Object(ge.isArray)(e.stakes)?e.stakes:[]})).flat():[],r=Object(ge.isArray)(t)?t.map((function(e){return Object(ge.isArray)(e.unbondingStakes)?e.unbondingStakes:[]})).flat():[],s=t.map((function(e){return e.address})),0!==n.length||0!==r.length){e.next=9;break}return s.forEach((function(e){a(Ka(e))})),d(!0),e.abrupt("return");case 9:return e.prev=9,e.next=12,i({query:$d,variables:{getStakingRewardsForPositionArgs:{farmsPositions:Vd(n.filter((function(e){var t=e.proxyStakingAddress;return!Boolean(t)})))},getDualYieldRewardsForPositionArgs:{farmsPositions:Vd(n.filter((function(e){var t=e.proxyStakingAddress;return Boolean(t)})))},unboundTokenAttributes:tt(r)}});case 12:if(c=e.sent,!(c.data&&c.data.errors)){e.next=17;break}return void 0===l&&(d(!1),s.forEach((function(e){a(Ka(e))}))),e.abrupt("return");case 17:o=[],b=[],n.forEach((function(e){var t=c.data.data.getStakingRewardsForPosition.find((function(t){return t.decodedAttributes.identifier===e.identifier}));if(t){var n=t.decodedAttributes,a=_d({balance:e.balance,compoundedReward:n.compoundedReward,currentFarmAmount:n.currentFarmAmount}),i=Object(m.a)(Object(m.a)({},e),{},{stakingRewards:{rewards:t.rewards,decodedAttributes:Object(m.a)(Object(m.a)({},n),{},{compoundedReward:a})}});o.push(i)}})),n.forEach((function(e){var t=c.data.data.getDualYieldRewardsForPosition.find((function(t){return t.identifier===e.identifier}));if(t){var n=t.stakingRewards,a=_d({balance:e.balance,compoundedReward:n.decodedAttributes.compoundedReward,currentFarmAmount:n.decodedAttributes.currentFarmAmount}),i=Object(m.a)(Object(m.a)({},e),{},{stakingRewards:{rewards:n.rewards,decodedAttributes:Object(m.a)(Object(m.a)({},n.decodedAttributes),{},{compoundedReward:a})},proxyFarmRewards:t.farmRewards});o.push(i)}})),r.forEach((function(e){var t=c.data.data.unboundTokenAttributes.find((function(t){return t.identifier===e.identifier}));if(t){var n=Object(m.a)(Object(m.a)({},e),{},{unboundTokenAttributes:t});b.push(n)}})),u({stakes:o,unbondingStakes:b,farmAddresses:s}),d(!0),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(9),void 0===l&&(d(!1),s.forEach((function(e){a(Ka(e))})));case 29:case"end":return e.stop()}}),e,null,[[9,26]])})));return function(){return e.apply(this,arguments)}}();return c.useEffect((function(){n||b()}),[t,n]),{rewardsLoading:void 0===l,rewardsError:!1===l}},zd={rewardsFetched:!1,stakes:[],unbondingStakes:[],totalRewards:"0",totalStaked:"0",denomination:0},Hd=Se((function(e){return e.stakingFarmsRewards}),(function(e){return e.stakingFarmsRewardsCollection})),Yd=Se(Hd,(function(e,t){return t}),(function(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:zd})),Gd=function(e){var t,n=e.farm,a=e.size,i=void 0===a?"lg":a;return Object(pt.jsx)("div",{className:"token-icon-".concat(i," pool-icon"),children:Object(pt.jsx)(Xh,{token:null!==(t=null===n||void 0===n?void 0:n.rewardToken.identifier)&&void 0!==t?t:""})})},Zd=Object(p.gql)(Sd||(Sd=Object(Bi.a)(["\n  query ($proxyStakingAddress: String!, $payments: [InputTokenModel!]!) {\n    claimDualYield(\n      proxyStakingAddress: $proxyStakingAddress\n      payments: $payments\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Kd=Object(p.gql)(Ad||(Ad=Object(Bi.a)(["\n  query ($farmStakeAddress: String!, $payment: InputTokenModel!) {\n    claimStakingRewards(\n      farmStakeAddress: $farmStakeAddress\n      payment: $payment\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Xd=function(e){var t=e.stake,n=e.useProxy,a={tokenID:t.collection,nonce:t.nonce,amount:t.balance};return n?{proxyStakingAddress:t.proxyStakingAddress,payments:[a]}:{farmStakeAddress:t.stakingAddress,payment:a}},Qd=function(e){var t=e.ref,n=e.callbackRoute,a=e.hideModal,i=ur(),r=Wh(),s=c.useState(!1),o=Object(T.a)(s,2),l=o[0],d=o[1],u=Object(g.c)(Br);return{claimRewardsBatch:function(e){var s=e.stakes,c=e.stakingProxies;null!==t.current&&(d(!0),Promise.all(s.filter((function(e){return Xl({stake:e,statistics:u,stakingProxies:c})})).slice(0,5).map((function(e){var t=Boolean(e.proxyStakingAddress);return i({query:t?Zd:Kd,variables:Xd({stake:e,useProxy:t})})}))).then((function(e){if(e){var i=[];e.forEach((function(e){null!==t.current&&e.data&&e.data.data&&(e.data.data.claimStakingRewards&&i.push(me(e.data.data.claimStakingRewards)),e.data.data.claimDualYield&&i.push(me(e.data.data.claimDualYield)))})),r({transactions:i,callbackRoute:n,processingMessage:"Harvesting all rewards",successMessage:"All rewards harvested",submittedMessage:"Harvested all rewards transactions submitted",hasUnrelatedTransactions:!0,pendingFarmAddress:s[0].stakingAddress}),d(!1),a()}else d(!1)})).catch((function(e){console.log("useClaimStakingRewardsBatch",e),d(!1)})))},claimRewardsBatchLoading:l}},Jd=function(e){var t=e.stakingProxies,n=e.showModal,i=e.stakes,r=e.setShowModal,s=o.a.useRef(null),c=a.denominateAmount,l=Object(g.c)(Br),d=o.a.useState(0),u=Object(T.a)(d,2),m=u[0],b=u[1],j=o.a.useState([]),f=Object(T.a)(j,2),h=f[0],p=f[1];o.a.useEffect((function(){var e=[],n=0;i.forEach((function(a){var i=a.stakingRewards,r=Ke({farmAddress:a.stakingAddress,stakingFarmsRate:l.stakingFarmsRate});if(i&&r){var s=r.rewardToken.identifier,c=new je.a(i.rewards);if(Xl({stake:a,statistics:l,stakingProxies:t})){var o=e.find((function(e){return e.id===s}));if(o){var d=new je.a(o.amount);o.amount=d.plus(c).toString(10)}else e.push({id:s,amount:c.toString(10),denomination:r.rewardToken.decimals});var u=Kl({stake:a,stakingProxies:t,statistics:l}),m=u.showProxyRewards,b=u.proxyRewardsAmount,j=u.proxyRewardsToken,f=u.proxyRewardsDenomination;if(m){var h=e.find((function(e){return e.id===j}));if(h){var p=new je.a(h.amount);h.amount=p.plus(b).toString(10)}else e.push({id:null!==j&&void 0!==j?j:"",amount:b,denomination:null!==f&&void 0!==f?f:0})}n+=1}}})),p(e),b(n<=5?n:5)}),[i,t,l]);var x=function(e){return function(){r(e)}},v=Qd({ref:s,callbackRoute:Nh.metastaking,hideModal:function(){r(!1)}}),O=v.claimRewardsBatch,k=v.claimRewardsBatchLoading,y=Ke({farmAddress:i[0].stakingAddress,stakingFarmsRate:l.stakingFarmsRate});return Object(pt.jsx)(Pc.a,{show:n,backdrop:!0,onHide:x(!1),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("div",{ref:s,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column align-items-center pt-spacer",children:[Object(pt.jsxs)("div",{className:"rewards-icon-container d-flex justify-content-center w-100 mb-spacer",children:[Object(pt.jsx)(Hc,{className:"rewards-bg position-absolute-center"}),Object(pt.jsx)(Gd,{farm:y,size:"xl"})]}),Object(pt.jsx)("div",{className:"mb-2","data-testid":"modalTitle",children:"Harvest All Rewards"}),h.map((function(e){return Object(pt.jsxs)("div",{className:"d-flex align-items-center text-success h4",children:[Object(pt.jsxs)("div",{className:"mr-2","data-testid":"modalRewards",children:["+",c({amount:e.amount,denomination:e.denomination,addCommas:!0})]}),Object(pt.jsx)(yt,{token:e.id})]},e.id)})),Object(pt.jsxs)("div",{className:"d-flex align-items-center mt-spacer w-100",children:[Object(pt.jsx)("button",{className:"btn btn-dark btn-lg flex-even mr-2",onClick:x(!1),"data-testid":"cancelBtn",children:"Cancel"}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg flex-even ml-2",disabled:k,onClick:function(){O({stakes:i,stakingProxies:t})},children:k?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Harvest\xa0All"})})]}),Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign"," ",Object(pt.jsxs)("strong",{children:[m," transaction",m>1?"s":""]}),Object(pt.jsx)(wo,{info:Object(pt.jsxs)("div",{className:"text-left",children:[m>1&&"".concat(m,"x "),"Harvest rewards"]})})]})]})})})},eu=function(e){var t=e.stakes,n=e.stakingProxies,a=e.disableBtn,i=e.active,r=Object(g.c)(Br),s=c.useState(!1),o=Object(T.a)(s,2),l=o[0],d=o[1],u=t.filter((function(e){return Xl({stake:e,statistics:r,stakingProxies:n})})).length>0,b="Individual rewards can be harvested every ".concat(X," minutes with a minimum of $").concat(K);return{ClaimAllBtn:c.useMemo((function(){return u&&i?Object(pt.jsx)("button",{"data-testid":"harvestAllBtn",disabled:a,className:"farm-action-btn w-100 btn mb-2 mb-xl-0 mr-xl-3 btn-primary",onClick:function(e){d(!0),e.stopPropagation()},children:"Harvest\xa0all"}):Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-compound-or-harvest-all"},e),{},{children:Object(pt.jsx)("div",{className:"d-flex justify-content-center flex-wrap",children:i?b:Cu})}))},children:Object(pt.jsx)("div",{className:"d-flex",children:Object(pt.jsx)("div",{"data-testid":"harvestAllBtn",className:"farm-action-btn w-100 btn disabled mb-2 mb-xl-0 mr-xl-3 btn-primary",onClick:function(e){e.stopPropagation()},children:"Harvest\xa0all"})})})}),[u,a,i,b]),ClaimAllModal:c.useMemo((function(){return l?Object(pt.jsx)(Jd,{stakingProxies:n,stakes:t,showModal:l,setShowModal:function(e){d(e)}}):null}),[n,l,t]),showModal:l}},tu=function(e){var t,n,a=e.farm;return e.shortName?Object(pt.jsx)(Rt,{token:null!==(n=null===a||void 0===a?void 0:a.farmingToken.identifier)&&void 0!==n?n:""}):Object(pt.jsx)("div",{className:"d-flex",children:Object(pt.jsxs)("div",{className:"token-icon-lg pool-icon h6 mb-0 font-weight-bold",children:["Stake\xa0",Object(pt.jsx)(Rt,{token:null!==(t=null===a||void 0===a?void 0:a.farmingToken.identifier)&&void 0!==t?t:""})]})})},nu=function(e){var t,n,a,i=e.farm,r=e.selectedTokenId,s=e.stakingProxies,c=r===i.farmingToken.identifier,o=null===(t=i.stakes)||void 0===t?void 0:t.find((function(e){var t=c&&e.collection===i.farmToken.collection,n=s.find((function(e){return e.lpFarmToken.collection===r})),a=(null===n||void 0===n?void 0:n.dualYieldToken.collection)===e.collection;return t||a}));return{compatibleStake:o,compatibleStakeRewards:He({amount:null!==(n=null===o||void 0===o||null===(a=o.stakingRewards)||void 0===a?void 0:a.rewards)&&void 0!==n?n:"0",denomination:i.rewardToken.decimals})}},au=function(e){var t=e.farm,n=e.tokens,a=e.nfts,i=[];if(t){var r,s=n.find((function(e){return e.identifier===t.farmingToken.identifier}));i.push({value:t.farmingToken.identifier,label:t.farmingToken.identifier,token:Object(m.a)(Object(m.a)({},t.farmingToken),{},{balance:null!==(r=null===s||void 0===s?void 0:s.balance)&&void 0!==r?r:"0"})}),a.forEach((function(e){i.push({label:e.collection,value:e.identifier,token:e})}))}return i},iu=function(e){var t=e.farm,n=e.stakingProxies,a=e.cacheKey;Dr();var i=qr(a),r=i.fetchTokens,s=i.tokens,o=i.tokensLoading,l=i.tokensFetched,d=Cr(a),u=d.fetchNfts,m=d.nfts,b=d.nftsLoading,j=d.nftsFetched;return c.useEffect((function(){var e=n.map((function(e){return e.lpFarmToken.collection}));u(e),r([t.farmingToken.identifier])}),[n,t]),{nfts:m,tokens:s,farmDataLoading:o||b,farmDataFetched:l&&j}},ru=function(e){var t=e.token,n=e.tokenAmount,i=e.onMaxClick,r=a.denominateAmount,s=t?t.value:void 0,c=t?t.token.balance:"0",o=Ie(c)?c:"0",l=t?t.token.decimals:0,d=r({amount:o,denomination:l}),u=r({amount:o,denomination:l,showLastNonZeroDecimal:!0}),m="0"!==d&&parseFloat(n)!==parseFloat(d),b=function(e){e.preventDefault(),i(d)};return{MaxBtn:function(){return m?Object(pt.jsx)("a",{href:"/",className:"badge badge-pill badge-primary text-uppercase",onClick:b,onMouseDown:function(e){e.preventDefault()},children:"Max"}):null},AvailableBalance:function(){return Object(pt.jsxs)("div",{className:"mt-2 balance",children:[Object(pt.jsx)("span",{className:"text-secondary mr-2",children:"Balance:"}),s?Object(pt.jsx)(pt.Fragment,{children:r({amount:o,denomination:l,addCommas:!0})}):Object(pt.jsx)(pt.Fragment,{children:"-.-"})]})},balance:d,completeMaxBalance:m?void 0:u,denomination:l}},su=Object(p.gql)(Fd||(Fd=Object(Bi.a)(["\n  query ($farmStakeAddress: String!, $payments: [InputTokenModel!]!) {\n    stakeFarm(farmStakeAddress: $farmStakeAddress, payments: $payments) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),cu=Object(p.gql)(Pd||(Pd=Object(Bi.a)(["\n  query ($proxyStakingAddress: String!, $payments: [InputTokenModel!]!) {\n    stakeFarmTokens(\n      proxyStakingAddress: $proxyStakingAddress\n      payments: $payments\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),ou=function(e){var t=e.callbackRoute,n=e.hideModal,a=ur(),i=Wh(),r=c.useState(!1),s=Object(T.a)(r,2),o=s[0],l=s[1];return{stakeFarm:function(e){var r=e.variables,s=e.useProxy,c=e.pendingFarmAddress;l(!0),a({query:s?cu:su,variables:r}).then((function(e){if(e.data&&e.data.data){var a=[],r=s?e.data.data.stakeFarmTokens:e.data.data.stakeFarm;a.push(me(r)),i({transactions:a,callbackRoute:t,processingMessage:"Adding farm stake",successMessage:"Farm stake added",submittedMessage:"Add farm stake transactions submitted",pendingFarmAddress:c}),l(!1),n()}else l(!1)})).catch((function(e){console.log("stakeFarm",e),l(!1)}))},stakeFarmLoading:o}},lu=function(e){var t=e.farm,n=e.stakingProxies,i=e.stakes,r=e.showModal,s=e.setShowModal,c=Object(g.c)(Br),l=o.a.useState(!1),d=Object(T.a)(l,2),u=d[0],b=d[1],j=function(e){if(e){var n=a.getSelectedValue(e);return n===t.farmingToken.identifier?n:e.token.collection}},f=Ke({stakingFarmsRate:c.stakingFarmsRate,farmAddress:t.address}),h=function(e){return function(){s(e)}},p=iu({farm:t,stakingProxies:n,cacheKey:"enterStakingFarmModal"}),x=p.nfts,v=p.tokens,O=p.farmDataLoading,k=p.farmDataFetched,y=au({farm:t,tokens:v,nfts:x}),w=ou({callbackRoute:Nh.metastaking,hideModal:function(){s(!1)}}),N=w.stakeFarm,S=w.stakeFarmLoading,A={amount:"",token:1===y.length?y[0]:void 0},P=Object(dt.a)().shape({amount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),Y)})).test("funds","Insufficient funds",(function(e){if(e&&U){var t=new be.BigNumber(e);return new be.BigNumber(z).comparedTo(t)>=0}return!0})).test("minimum","Cannot be zero",(function(e){return!new be.BigNumber(null!==e&&void 0!==e?e:0).isZero()})).test("token","Token required",(function(e){return Boolean(e&&$)})),token:Object(dt.a)().nullable().test("req","Required",(function(e){return null!==e}))}),D=Object(qt.a)({initialValues:A,validationSchema:P,onSubmit:function(e){var a,i,r=j(e.token),s=n.find((function(e){return e.lpFarmToken.collection===r})),c={tokenID:r,nonce:null!==(a=null===(i=e.token)||void 0===i?void 0:i.token.nonce)&&void 0!==a?a:0,amount:ot(H||e.amount,Y)},o=Object(m.a)(Object(m.a)(Object(m.a)({},s?{proxyStakingAddress:s.address}:{}),s?{}:{farmStakeAddress:t.address}),{},{payments:[c]}),l=nu({farm:t,selectedTokenId:c.tokenID,stakingProxies:n}).compatibleStake;l&&o.payments.push({tokenID:l.collection,nonce:l.nonce,amount:l.balance}),N({variables:o,useProxy:Boolean(o.proxyStakingAddress),pendingFarmAddress:t.address})}}),R=D.setFieldValue,E=D.handleSubmit,L=D.errors,C=D.touched,I=D.values,q=D.handleBlur,M=D.handleChange,B=I.amount,U=I.token,$=j(U),_=ru({token:U,tokenAmount:B,onMaxClick:function(e){R("amount",e,!0)}}),V=_.MaxBtn,W=_.AvailableBalance,z=_.balance,H=_.completeMaxBalance,Y=_.denomination;o.a.useEffect((function(){var e=nu({farm:t,selectedTokenId:$,stakingProxies:n}).compatibleStake;b(Boolean(e))}),[$,i,n,c,f,t]);o.a.useEffect((function(){if(y){var e=U?y.find((function(e){return e.value===U.value&&e.token.balance!==U.token.balance})):void 0;e&&R("token",e)}}),[y]);var G=!O&&k,Z=!O&&!k,K=o.a.useMemo((function(){var e;return Object(pt.jsxs)(pt.Fragment,{children:["There will be a"," ",Object(pt.jsx)(Sp,{minimumFarmingEpochs:null!==(e=null===f||void 0===f?void 0:f.minUnboundEpochs)&&void 0!==e?e:0})," ","unbonding period when you unstake. You will be able to withdraw your funds only after that period."]})}),[Sp,f]);return Object(pt.jsx)(pt.Fragment,{children:Object(pt.jsxs)(Pc.a,{show:r,backdrop:!0,onHide:h(!1),className:"modal-container",animation:!1,centered:!0,children:[O&&Object(pt.jsx)($p,{}),Z&&Object(pt.jsx)("div",{className:"my-4",children:Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load modal"})}),G&&Object(pt.jsx)("form",{onSubmit:E,noValidate:!0,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mt-n2 lead",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Gd,{farm:t})}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap","data-testid":"modalTitle",children:[Object(pt.jsx)("span",{children:"Stake in"}),"\xa0",Object(pt.jsx)(tu,{farm:t,shortName:!0}),"\xa0",Object(pt.jsx)("span",{children:"farm"})]})]}),Object(pt.jsxs)("div",{className:"form-group mb-0 text-left",children:[Object(pt.jsx)("label",{htmlFor:"amount",className:"mb-2 line-height-1",children:"\xa0"}),Object(pt.jsxs)("div",{className:"token-amount-input-select-max ".concat("token"in L&&"token"in C?"is-invalid":""," ").concat("amount"in L&&"amount"in C?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,"data-testid":"amountInput",name:"amount",placeholder:"Amount",value:B,handleChange:M,handleBlur:q}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:Object(pt.jsx)(V,{})}),Object(pt.jsx)(Ct.TokenSelect,{id:"token",name:"token",options:y,value:U,onChange:function(e){R("token",e)},isSearchable:!1,onBlur:q})]}),Object(pt.jsxs)("small",{className:"d-flex flex-column flex-sm-row",children:["amount"in L&&"amount"in C&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-2","data-testid":"invalidAmount",children:Object(pt.jsx)(pt.Fragment,{children:L.amount})}),Object(pt.jsx)("div",{className:"d-flex ml-0 ml-sm-auto line-height-1",children:Object(pt.jsx)(W,{})})]})]}),Object(pt.jsx)("div",{className:"my-spacer",children:Object(pt.jsx)(ap,{balance:z,amount:B,onChange:function(e){R("amount",e,!0)}})}),Object(pt.jsxs)("small",{className:"alert alert-warning align-items-center d-flex p-3 mb-spacer",role:"alert",children:[Object(pt.jsx)(F.a,{icon:ac.e,size:"lg",className:"alert-icon mr-2"}),Object(pt.jsx)("div",{className:"d-flex flex-wrap",children:Object(pt.jsxs)("ul",{className:"mb-0 pl-4",children:[Object(pt.jsx)("li",{className:"mb-2",children:K}),Object(pt.jsx)("li",{className:"mb-2",children:"Stake that is unbonding will not generate rewards."}),$&&$!==t.farmingToken.identifier&&Object(pt.jsx)("li",{className:"mb-2",children:"You have selected a Staked LP token. When you exit, your initial Staked LP will be unstaked, the resulting LP token will be withdrawn from the pool and you will receive all the initial tokens back."})]})})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("button",{className:"btn btn-dark btn-lg flex-even mr-2",onClick:h(!1),children:"Cancel"}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg flex-even ml-2",disabled:S,children:S?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Stake"})})]}),U&&Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign"," ",Object(pt.jsxs)("strong",{children:[u?3:2," actions"]})," in"," ",Object(pt.jsx)("strong",{children:"1 transaction"}),Object(pt.jsx)(wo,{info:Object(pt.jsxs)("div",{className:"text-left",children:["Stake in farm"," ",Object(pt.jsxs)("ul",{className:"pl-3 mb-0",children:[Object(pt.jsx)("li",{children:"Send token"}),u&&Object(pt.jsx)("li",{children:"Send farm token to merge"}),Object(pt.jsx)("li",{children:"Stake in farm"})]})]})})]})]})})]})})},du=function(e){var t=e.farm,n=e.stakingProxies,a=e.active,i=e.disableBtn,r=e.stakes,s=o.a.useState(!1),c=Object(T.a)(s,2),l=c[0],d=c[1];return{EnterBtn:o.a.useMemo((function(){return a?Object(pt.jsx)("button",{"data-testid":"stakeBtn",className:"farm-action-btn btn btn-dark w-100",onClick:function(e){e.stopPropagation(),i||d(!0)},disabled:i,children:"Stake"}):Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-enter-farm-".concat(t.address)},e),{},{children:Object(pt.jsx)("div",{className:"d-flex justify-content-center flex-wrap",children:a?"Can stake/withdraw every ".concat(X,"m."):Ll})}))},children:Object(pt.jsx)("span",{children:Object(pt.jsx)("div",{className:"farm-action-btn btn btn-dark w-100 disabled",onClick:function(e){e.stopPropagation()},children:"Stake"})})})}),[i,t,a,Ll]),EnterModal:o.a.useMemo((function(){return l?Object(pt.jsx)(lu,{farm:t,stakingProxies:n,stakes:r,showModal:l,setShowModal:function(e){d(e)}}):null}),[t,n,r,l])}},uu=function(e){var t=e.name,n=e.children,a=e.containerClass,i=void 0===a?"":a,r=e.onClick;return Object(pt.jsxs)("div",{onClick:r,className:"header-item mx-1 d-flex flex-column flex-sm-row flex-lg-column justify-content-between mb-2 mb-lg-0 flex-shrink-1 ".concat(i),children:[Object(pt.jsx)("div",{className:"text-secondary mb-lg-1",children:t}),Object(pt.jsx)("div",{className:"d-flex flex-wrap",children:n})]})},mu=n(655),bu=function(e){var t=e.tolerance;return t&&Ce(t)&&new je.a(t).isGreaterThan(3)?Object(pt.jsxs)("div",{className:"text-secondary line-height-1",children:[Object(pt.jsx)(F.a,{icon:N.i,size:"sm",className:"text-warning mr-1"}),"Your transaction might be frontrun."]}):null},ju=function(e){var t=e.closeModal,n=Object(g.c)(De),a=Object(O.p)().isLoggedIn;return Object(pt.jsxs)("div",{className:"d-flex flex-column text-sm-right mb-2",children:[Object(pt.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(pt.jsxs)("label",{htmlFor:"tolerance",className:"mb-0 mr-2 text-secondary",children:["Slippage",Object(pt.jsx)(wo,{info:Object(pt.jsx)(pt.Fragment,{children:"Your transaction will revert if the price moves unfavorably by more than this percentage."})})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-sm-end",children:[Object(pt.jsxs)("div",{children:[n,"%"]}),a&&Object(pt.jsx)("a",{href:"/#",onClick:function(e){e.preventDefault();var n=document.querySelector("#settings-btn");t&&t(),n&&(window.scrollTo({top:0,behavior:"smooth"}),n.click())},className:"toggle-btn ml-2",children:Object(pt.jsx)(F.a,{icon:mu.faCog})})]})]}),Object(pt.jsx)(bu,{tolerance:n})]})},fu=Object(p.gql)(Dd||(Dd=Object(Bi.a)(["\n  query ($getStakingRewardsForPositionArgs: BatchFarmRewardsComputeArgs!) {\n    getStakingRewardsForPosition(\n      stakingPositions: $getStakingRewardsForPositionArgs\n    ) {\n      rewards\n      decodedAttributes {\n        attributes\n        compoundedReward\n        currentFarmAmount\n        identifier\n        rewardPerShare\n      }\n    }\n  }\n"]))),hu=Object(p.gql)(Rd||(Rd=Object(Bi.a)(["\n  query ($position: CalculateRewardsArgs!) {\n    getUnstakeTokensReceived(position: $position) {\n      stakingRewards\n      farmRewards\n      liquidityPosition {\n        firstTokenAmount\n        secondTokenAmount\n      }\n    }\n  }\n"]))),pu=function(e){var t,n=e.tokenAmount,i=e.stake,r=e.onMaxClick,s=a.denominateAmount,c=null!==(t=i.decimals)&&void 0!==t?t:0,o=i.balance,l=s({amount:o,denomination:c}),d="0"!==l&&parseFloat(n)!==parseFloat(l),u=function(e){e.preventDefault(),r&&r(l)},m=d?void 0:i.balance;return{MaxBtn:function(){return d?Object(pt.jsx)("a",{href:"/",className:"badge badge-pill badge-primary text-uppercase",onClick:u,onMouseDown:function(e){e.preventDefault()},children:"Max"}):null},AvailableBalance:function(){return Object(pt.jsx)(pt.Fragment,{children:s({amount:o,denomination:c,addCommas:!0})})},balance:l,denomination:c,completeMaxBalanceForQuery:m}},xu=Object(p.gql)(Ed||(Ed=Object(Bi.a)(["\n  query ($farmStakeAddress: String!, $payment: InputTokenModel!) {\n    unstakeFarm(farmStakeAddress: $farmStakeAddress, payment: $payment) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),vu=Object(p.gql)(Ld||(Ld=Object(Bi.a)(["\n  query (\n    $proxyStakingAddress: String!\n    $payment: InputTokenModel!\n    $attributes: String!\n    $tolerance: Float!\n  ) {\n    unstakeFarmTokens(\n      proxyStakingAddress: $proxyStakingAddress\n      payment: $payment\n      attributes: $attributes\n      tolerance: $tolerance\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Ou=function(e){var t=e.ref,n=e.callbackRoute,a=e.hideModal,i=ur(),r=Wh(),s=c.useState(!1),o=Object(T.a)(s,2),l=o[0],d=o[1];return{unstakeFarm:function(e){var s=e.variables,c=e.useProxy,o=e.pendingFarmAddress;d(!0),i({query:c?vu:xu,variables:s}).then((function(e){if(t&&null!==t.current)if(e.data&&e.data.data){var i=[me(c?e.data.data.unstakeFarmTokens:e.data.data.unstakeFarm)];r({transactions:i,callbackRoute:n,processingMessage:"Unstaking farm stake",successMessage:"Farm stake unstaked",submittedMessage:"Unstake farm stake transactions submitted",pendingFarmAddress:o}),d(!1),a()}else d(!1)})).catch((function(e){console.log("unstakeFarm",e),d(!1)}))},unstakeFarmLoading:l}},ku=function(e){var t,n,a,i=e.farmRate,r=e.stakingProxies,s=e.stake,c=e.statistics,l=e.showModal,d=e.setShowModal,u=o.a.useRef(null),b=Object(g.c)(De),f=Boolean(null===s||void 0===s?void 0:s.proxyStakingAddress),p=jr().runQuery,x=o.a.useState([]),v=Object(T.a)(x,2),O=v[0],k=v[1],y=o.a.useState(),w=Object(T.a)(y,2),N=w[0],S=w[1];o.a.useEffect((function(){0===O.length&&i&&k([{id:i.farmingToken.identifier,amount:"...",denomination:i.farmingToken.decimals}])}),[i,O]);var A=function(e){return function(){d(e)}},P=Ou({ref:u,callbackRoute:Nh.metastaking,hideModal:function(){d(!1)}}),D=P.unstakeFarm,R=P.unstakeFarmLoading,E=Object(dt.a)().shape({amount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),G)})).test("minAmount","Must select an amount",(function(e){return!e||new be.BigNumber(e).isGreaterThan(0)})).test("funds","Insufficient funds",(function(e){if(void 0!==e){var t=new be.BigNumber(e);return new be.BigNumber(Y).comparedTo(t)>=0}return!0}))}),L=Object(qt.a)({initialValues:{amount:""},validationSchema:E,onSubmit:function(){var e={tokenID:s.collection,nonce:s.nonce,amount:null!==Z&&void 0!==Z?Z:ot(B.amount,G)},t={};t=f?{proxyStakingAddress:s.proxyStakingAddress,payment:e,attributes:s.attributes,tolerance:parseFloat(b)/100}:{farmStakeAddress:s.stakingAddress,payment:e},D({variables:t,useProxy:f,pendingFarmAddress:s.stakingAddress})}}),C=L.setFieldValue,I=L.handleSubmit,q=L.handleBlur,M=L.handleChange,B=L.values,U=L.errors,$=L.touched,_=B.amount,W=pu({tokenAmount:_,stake:s,onMaxClick:function(e){C("amount",e,!0)}}),z=W.MaxBtn,H=W.AvailableBalance,Y=W.balance,G=W.denomination,Z=W.completeMaxBalanceForQuery,K=Eh(_,500),X=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,a,r,c,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={getStakingRewardsForPositionArgs:{farmsPositions:Vd([Object(m.a)(Object(m.a)({},s),{},{balance:ot(_,s.decimals)})])}},e.next=3,p({query:fu,variables:a});case 3:if(r=e.sent,c=r.data,r.success){e.next=8;break}return e.abrupt("return");case 8:if(0!==(o=c.getStakingRewardsForPosition).length){e.next=11;break}return e.abrupt("return");case 11:l={id:null!==(t=null===i||void 0===i?void 0:i.farmingToken.identifier)&&void 0!==t?t:"",amount:o[0].rewards,denomination:null!==(n=null===i||void 0===i?void 0:i.farmingToken.decimals)&&void 0!==n?n:0},k([l]),S(_);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,a,o,l,d,u,b,j,f,x,v,O,g,y,w,T,N,A;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={position:Vd([Object(m.a)(Object(m.a)({},s),{},{balance:ot(_,s.decimals)})])[0]},e.next=3,p({query:hu,variables:a});case 3:if(o=e.sent,l=o.data,d=o.success,u=r.find((function(e){var t=e.address;return s.proxyStakingAddress===t})),b=c.farmsRate.find((function(e){return e.address===(null===u||void 0===u?void 0:u.lpFarmAddress)})),j=c.pairsRate.find((function(e){return e.address===(null===u||void 0===u?void 0:u.pairAddress)})),d&&j&&b){e.next=11;break}return e.abrupt("return");case 11:f=l.getUnstakeTokensReceived,x=[],v=j.firstToken.identifier,O=f.liquidityPosition.firstTokenAmount,g=j.secondToken.identifier,y=f.liquidityPosition.secondTokenAmount,w=null!==(t=null===i||void 0===i?void 0:i.rewardToken.identifier)&&void 0!==t?t:"",x.push({id:w,amount:f.stakingRewards,denomination:null!==(n=null===i||void 0===i?void 0:i.rewardToken.decimals)&&void 0!==n?n:0}),w===v?(T={id:g,amount:y,denomination:j.secondToken.decimals},x.push(T),S(He({amount:O,denomination:j.firstToken.decimals}))):(N={id:v,amount:O,denomination:j.firstToken.decimals},x.push(N),S(He({amount:y,denomination:j.secondToken.decimals}))),A={id:"lockedRewards"===b.rewardType?V:b.farmedToken.identifier,amount:f.farmRewards,denomination:b.farmedToken.decimals},x.push(A),k(x);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o.a.useEffect((function(){Ce(_)&&(f?Q():X())}),[K]);var J=mo(null!==(t=null===(n=s.proxyFarmRewards)||void 0===n?void 0:n.remainingFarmingEpochs)&&void 0!==t?t:0),ee=J.WithdrawPeriodCountdown,te=J.showCountdown,ne=r.find((function(e){return e.dualYieldToken.collection===s.collection})),ae=Ze({farmsRate:c.farmsRate,farmAddress:null===ne||void 0===ne?void 0:ne.lpFarmAddress});return Object(pt.jsx)(Pc.a,{show:l,backdrop:!0,onHide:A(!1),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("form",{onSubmit:I,noValidate:!0,ref:u,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mt-n2 lead",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Gd,{farm:i})}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap","data-testid":"modalTitle",children:[Object(pt.jsx)("span",{children:"Unstake from"}),"\xa0",Object(pt.jsx)(tu,{farm:i,shortName:!0}),"\xa0",Object(pt.jsx)("span",{children:"farm"})]})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-spacer",children:[Object(pt.jsx)(H,{}),Object(pt.jsxs)("span",{className:"text-secondary ml-1",children:[Object(pt.jsx)(Rt,{token:s.collection})," staked"]})]}),Object(pt.jsxs)("div",{className:"form-group text-left mb-0",children:[Object(pt.jsx)("label",{htmlFor:"amount",className:"mb-2 line-height-1",children:"Amount"}),Object(pt.jsxs)("div",{className:"token-amount-input-max ".concat("amount"in U&&"amount"in $?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,name:"amount","data-testid":"amountInput",placeholder:"Amount",value:_,handleChange:M,handleBlur:q}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:Object(pt.jsx)(z,{})})]}),"amount"in U&&"amount"in $&&Object(pt.jsx)("div",{className:"invalid-feedback mt-2","data-testid":"invalidAmount",children:U.amount})]}),Object(pt.jsx)("div",{className:"my-spacer",children:Object(pt.jsx)(ap,{balance:Y,amount:_,onChange:function(e){C("amount",e,!0)}})}),Object(pt.jsx)("div",{className:"card mb-spacer",children:Object(pt.jsxs)("div",{className:"card-body",children:[f&&Object(pt.jsx)("div",{className:"mb-3",children:Object(pt.jsx)(ju,{closeModal:function(){d(!1)}})}),Object(pt.jsx)("div",{className:"mb-3 text-secondary",children:"You will receive now:"}),O.map((function(e,t){return Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center ".concat(t<O.length-1?"mb-2":""),children:[Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:e.id})}),Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(yt,{token:e.id})})]}),Object(pt.jsx)("div",{className:"ml-3","data-testid":"receivedNowAmount",children:"..."!==e.amount?Object(pt.jsx)(pt.Fragment,{children:He({amount:e.amount,denomination:e.denomination,addCommas:!0})}):Object(pt.jsx)(pt.Fragment,{children:"..."})})]},e.id)})),Object(pt.jsxs)("div",{className:"my-3 text-secondary",children:["You will receive after a"," ",Object(pt.jsx)("span",{className:"text-warning",children:Object(pt.jsx)(Sp,{minimumFarmingEpochs:null!==(a=null===i||void 0===i?void 0:i.minUnboundEpochs)&&void 0!==a?a:0})})," ","unbonding period:"]}),Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:null===i||void 0===i?void 0:i.farmingToken.identifier})}),Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(yt,{token:null===i||void 0===i?void 0:i.farmingToken.identifier})})]}),Object(pt.jsx)("div",{className:"ml-3","data-testid":"receivedNowAmount",children:N?Object(pt.jsx)(pt.Fragment,{children:N}):Object(pt.jsx)(pt.Fragment,{children:"..."})})]})]})}),te&&Object(pt.jsxs)("small",{className:"alert alert-warning align-items-center d-flex p-3 mb-spacer",role:"alert",children:[Object(pt.jsx)(F.a,{icon:ac.e,size:"lg",className:"alert-icon mr-2"}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap",children:[ae?ae.penaltyPercent/100:"...","% penalty if you withdraw now (",Object(pt.jsx)(ee,{})," left until penalty expires)."]})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("button",{className:"btn btn-dark btn-lg flex-even mr-2",onClick:A(!1),children:"Cancel"}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg flex-even ml-2",disabled:R,children:R?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Unstake"})})]}),Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign ",Object(pt.jsx)("strong",{children:"1 transaction"}),Object(pt.jsx)(wo,{info:Object(pt.jsx)("div",{className:"text-left",children:"Unstake farm stake"})})]})]})})})},gu=function(e){var t,n,a=e.farmRate,i=e.stake,r=e.stakingProxies,s=e.statistics,c=o.a.useState(!1),l=Object(T.a)(c,2),d=l[0],u=l[1],b=mo(null!==(t=null===(n=i.proxyFarmRewards)||void 0===n?void 0:n.remainingFarmingEpochs)&&void 0!==t?t:0),j=b.WithdrawPeriodCountdown,f=b.showCountdown,h=r.find((function(e){return e.dualYieldToken.collection===i.collection})),p=Ze({farmsRate:s.farmsRate,farmAddress:null===h||void 0===h?void 0:h.lpFarmAddress}),x="Active"===(null===a||void 0===a?void 0:a.state),v=x?"Can stake/unstake every ".concat(X,"m."):Ll;return{UnstaketBtn:o.a.useMemo((function(){return x?Object(pt.jsx)(pt.Fragment,{children:f?Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip-".concat(i.identifier)},e),{},{children:Object(pt.jsxs)("div",{className:"text-left",children:[p?p.penaltyPercent/100:"...","% penalty if you withdraw now",Object(pt.jsx)("br",{})," (",Object(pt.jsx)(j,{})," left until penalty expires)."]})}))},children:Object(pt.jsx)("button",{className:"farm-action-btn btn btn-secondary","data-testid":"exitBtn",onClick:function(){u(!0)},children:Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[f&&Object(pt.jsx)(F.a,{icon:ac.c,className:"mr-2"}),"Unstake"]})})}):Object(pt.jsx)("button",{className:"farm-action-btn btn btn-secondary","data-testid":"exitBtn",onClick:function(){u(!0)},children:Object(pt.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:"Unstake"})})}):Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-exit-farm-".concat(i.stakingAddress)},e),{},{children:Object(pt.jsx)("div",{className:"d-flex justify-content-center flex-wrap",children:v})}))},children:Object(pt.jsx)("span",{children:Object(pt.jsx)("div",{className:"farm-action-btn btn btn-secondary disabled",onClick:function(e){e.stopPropagation()},children:"Unstake"})})})}),[i,a,x,Ll,f,j]),UnstakeModal:o.a.useMemo((function(){return d?Object(pt.jsx)(ku,{farmRate:a,stakingProxies:r,stake:i,statistics:s,showModal:d,setShowModal:function(e){u(e)}}):null}),[a,r,i,d,s]),showModal:d}},yu=function(e){var t=e.ref,n=e.callbackRoute,a=e.hideModal,i=ur(),r=Wh(),s=c.useState(!1),o=Object(T.a)(s,2),l=o[0],d=o[1];return{claimStakingRewards:function(e){var s=e.variables,c=e.useProxy,o=e.pendingFarmAddress;null!==t.current&&(d(!0),i({query:c?Zd:Kd,variables:s}).then((function(e){if(null!==t.current&&e.data&&e.data.data){var i=[me(c?e.data.data.claimDualYield:e.data.data.claimStakingRewards)];r({transactions:i,callbackRoute:n,processingMessage:"Harvesting rewards",successMessage:"Rewards harvested",submittedMessage:"Harvested rewards transactions submitted",pendingFarmAddress:o}),d(!1),a()}else d(!1)})).catch((function(e){console.log("claimRewards",e),d(!1)})))},claimStakingRewardsLoading:l}},wu=Object(p.gql)(Cd||(Cd=Object(Bi.a)(["\n  query ($farmStakeAddress: String!, $payment: InputTokenModel!) {\n    compoundStakingRewards(\n      farmStakeAddress: $farmStakeAddress\n      payment: $payment\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Tu=function(e){var t=e.ref,n=e.callbackRoute,a=e.hideModal,i=ur(),r=Wh(),s=c.useState(!1),o=Object(T.a)(s,2),l=o[0],d=o[1];return{compoundStakingRewards:function(e){var s=e.variables;null!==t.current&&(d(!0),i({query:wu,variables:s}).then((function(e){if(null!==t.current&&e.data&&e.data.data){var i=[me(e.data.data.compoundStakingRewards)];r({transactions:i,callbackRoute:n,processingMessage:"Reinvesting rewards",successMessage:"Rewards reinvested",submittedMessage:"Reinvest rewards transactions submitted",pendingFarmAddress:s.farmStakeAddress}),d(!1),a()}else d(!1)})).catch((function(e){console.log("compoundStakingRewards",e),d(!1)})))},compoundStakingRewardsLoading:l}},Nu=function(e){var t,n,i,r=e.farmRate,s=e.stakingProxies,o=e.stake,l=e.showModal,d=e.modalType,u=e.setShowModal,m=c.useRef(null),b=a.denominateAmount,j=Object(g.c)(Br),f=Nh.metastaking,h=Boolean(o.proxyStakingAddress),p=function(e){return function(){u(e)}},x=Kl({stake:o,stakingProxies:s,statistics:j}),v=x.showProxyRewards,O=x.proxyRewardsAmount,k=x.proxyRewardsToken,y=x.proxyRewardsDenomination,w=yu({ref:m,callbackRoute:f,hideModal:function(){u(!1)}}),T=w.claimStakingRewards,N=w.claimStakingRewardsLoading,S=Tu({ref:m,callbackRoute:f,hideModal:function(){u(!1)}}),A=S.compoundStakingRewards,F=S.compoundStakingRewardsLoading;return Object(pt.jsx)(Pc.a,{show:l,backdrop:!0,onHide:p(!1),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("div",{ref:m,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column align-items-center pt-spacer",children:[Object(pt.jsxs)("div",{className:"rewards-icon-container d-flex justify-content-center w-100 mb-spacer",children:[Object(pt.jsx)(Hc,{className:"rewards-bg position-absolute-center"}),Object(pt.jsx)(Gd,{farm:r,size:"xl"})]}),Object(pt.jsxs)("div",{className:"mb-2","data-testid":"modalTitle",children:["claim"===d?"Harvest":"Reinvest"," Rewards"]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center text-success h4",children:[Object(pt.jsxs)("div",{className:"mr-2","data-testid":"modalRewards",children:["claim"===d?"+":"",b({amount:null!==(t=null===o||void 0===o||null===(n=o.stakingRewards)||void 0===n?void 0:n.rewards)&&void 0!==t?t:"0",denomination:null!==(i=null===r||void 0===r?void 0:r.rewardToken.decimals)&&void 0!==i?i:0,addCommas:!0})]}),Object(pt.jsx)(yt,{token:null===r||void 0===r?void 0:r.rewardToken.identifier})]}),v&&"claim"===d&&Object(pt.jsxs)("div",{className:"d-flex align-items-center text-success h4",children:[Object(pt.jsxs)("div",{className:"mr-2","data-testid":"modalRewards",children:["+",b({amount:O,denomination:null!==y&&void 0!==y?y:0,addCommas:!0})]}),Object(pt.jsx)(yt,{token:k})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center mt-spacer w-100",children:[Object(pt.jsx)("button",{className:"btn btn-dark btn-lg flex-even mr-2","data-testid":"cancelBtn",onClick:p(!1),children:"Cancel"}),Object(pt.jsx)("button",{type:"submit",className:"btn ".concat("claim"===d?"btn-primary":"btn-success"," btn-lg flex-even ml-2"),disabled:N||F,onClick:function(){"claim"===d&&function(){var e={tokenID:o.collection,nonce:o.nonce,amount:o.balance},t={};t=h?{proxyStakingAddress:o.proxyStakingAddress,payments:[e]}:{farmStakeAddress:o.stakingAddress,payment:e},T({variables:t,useProxy:h,pendingFarmAddress:o.stakingAddress})}(),"compound"===d&&function(){var e={tokenID:o.collection,nonce:o.nonce,amount:o.balance},t={farmStakeAddress:o.stakingAddress,payment:e};A({variables:t})}()},children:N||F?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsxs)(pt.Fragment,{children:["claim"===d?"Harvest":"Reinvest","\xa0Reward"]})})]}),Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign ",Object(pt.jsx)("strong",{children:"1 transaction"}),Object(pt.jsx)(wo,{info:Object(pt.jsxs)("div",{className:"text-left",children:["claim"===d?"Harvest":"Reinvest"," rewards"]})})]})]})})})},Su=function(e){var t=e.hasRewards,n=e.farmRate,a=e.stakingProxies,i=e.stake,r=e.modalType,s=e.rewardTokenUsdPrice,o=c.useState(!1),l=Object(T.a)(o,2),d=l[0],u=l[1],b="Active"===(null===n||void 0===n?void 0:n.state),j="compound"===r?"reinvestBtn":"harvestBtn",f="compound"===r?"Reinvest":"Harvest",h="compound"===r?"btn-success":"btn-primary",p=null!==s&&void 0!==s&&s.price&&parseFloat(s.price)>0?" with a minimum of $".concat(K):"",x="Rewards can be ".concat("compound"===r?"reinvested":"harvested"," every ").concat(X," minutes ").concat(p);return{ClaimOrCompoundBtn:c.useMemo((function(){return t&&b?Object(pt.jsx)("button",{className:"farm-action-btn btn mr-lg-3 mb-2 mb-lg-0 ".concat(h),"data-testid":j,onClick:function(){u(!0)},children:f}):Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-compound-or-harvest-".concat(i.identifier)},e),{},{children:Object(pt.jsx)("div",{className:"d-flex justify-content-center flex-wrap",children:b?x:Ll})}))},children:Object(pt.jsx)("span",{children:Object(pt.jsx)("div",{className:"farm-action-btn btn disabled mr-lg-3 mb-2 mb-lg-0 w-100 w-lg-auto ".concat(h),children:f})})})}),[i,t,f,h,x,j,r,b,Ll]),ClaimOrCompoundModal:c.useMemo((function(){return d?Object(pt.jsx)(Nu,{farmRate:n,stakingProxies:a,stake:i,showModal:d,modalType:r,setShowModal:function(e){u(e)}}):null}),[a,i,r,d,n]),showModal:d}},Au=function(e){var t,n,a=e.stake,i=new je.a(null!==(t=null===(n=a.stakingRewards)||void 0===n?void 0:n.decodedAttributes.compoundedReward)&&void 0!==t?t:"0"),r=i.isGreaterThan(0);return{showCompoundedRewards:r,compoundedRewards:r?i.toString(10):void 0,stakedTokenId:a.collection,stakedLP:a.balance}},Fu=function(e){var t,n,a,i=e.stake,r=e.stakingProxies,s=Object(g.c)(Br),c=Ke({farmAddress:i.stakingAddress,stakingFarmsRate:s.stakingFarmsRate}),o=new je.a(null!==(t=null===(n=i.stakingRewards)||void 0===n?void 0:n.rewards)&&void 0!==t?t:"0"),l=Xl({stake:i,statistics:s,stakingProxies:r}),d=o.toString(10);return{hasRewards:l,rewardsToken:null!==(a=null===c||void 0===c?void 0:c.rewardToken.identifier)&&void 0!==a?a:"",rewardsAmount:d}},Pu=function(e){var t=e.tokenId,n=e.amount,a=e.denomination,i=e.usdPrice,r=e.reinvested,s=e.initialFarmRewards,c=e.initialFarmTokens,o=e.earned;return Object(pt.jsxs)("div",{className:"d-flex align-items-center mr-2 mb-2 mb-lg-0 flex-even",children:[Object(pt.jsx)("div",{className:"flex-shrink-0 mr-2",children:Object(pt.jsx)(Xh,{token:t})}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center text-secondary",children:[Object(pt.jsx)(yt,{token:t})," ",o&&"earned",(r||s)&&Object(pt.jsx)(wo,{customClass:s?"text-warning ml-2":"",info:Object(pt.jsxs)(pt.Fragment,{children:[r," ",s," "]})}),c&&Object(pt.jsx)("div",{className:"ml-2",children:Object(pt.jsx)(Ro,{delayedFarmInitialTokens:c})})]}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("div",{className:"mr-1",children:Object(pt.jsx)(sp,{valueStr:He({amount:n,denomination:a})})}),Object(pt.jsx)("small",{className:"text-secondary",children:i})]})]})]})},Du=function(e){var t,n,a,i,r,s,o,l=e.stakingProxies,d=e.stake,u=c.useRef(null),m=Object(g.c)(Br),b=Ke({stakingFarmsRate:m.stakingFarmsRate,farmAddress:d.stakingAddress}),j=l.find((function(e){return e.address===d.proxyStakingAddress})),f=Ge({pairsRate:m.pairsRate,pairAddress:null!==(t=null===j||void 0===j?void 0:j.pairAddress)&&void 0!==t?t:""}),h=Ze({farmsRate:m.farmsRate,farmAddress:null===j||void 0===j?void 0:j.lpFarmAddress}),p=m.tokenUSDPrices.find((function(e){return e.identifier===(null===b||void 0===b?void 0:b.rewardToken.identifier)})),x=Kl({stake:d,stakingProxies:l,statistics:m}),v=x.showProxyRewards,O=x.proxyRewardsAmount,k=x.proxyRewardsToken,y=x.proxyRewardsDenomination,w=x.proxyRewardsTokenUsdPrice,T=Fu({stake:d,stakingProxies:l}),N=T.hasRewards,S=T.rewardsToken,A=T.rewardsAmount,F=Au({stake:d}),P=F.showCompoundedRewards,D=F.compoundedRewards,R=F.stakedLP,E=He({amount:R,denomination:null!==(n=null===b||void 0===b?void 0:b.farmingToken.decimals)&&void 0!==n?n:0,showLastNonZeroDecimal:!0}),L=gu({farmRate:b,stake:d,stakingProxies:l,statistics:m}),C=L.UnstaketBtn,I=L.UnstakeModal,q=d.collection===(null===b||void 0===b?void 0:b.farmToken.collection),M=Su({hasRewards:N,farmRate:b,stakingProxies:l,stake:d,modalType:"claim",rewardTokenUsdPrice:p}),B=M.ClaimOrCompoundBtn,U=M.ClaimOrCompoundModal,$=Su({hasRewards:N,farmRate:b,stakingProxies:l,stake:d,modalType:"compound",rewardTokenUsdPrice:p}),_=$.ClaimOrCompoundBtn,V=$.ClaimOrCompoundModal,W=f&&d.decodedAttributes?{amount:d.decodedAttributes.lpFarmTokenAmount,isLockedToken:!1,pair:f}:void 0;return Object(pt.jsxs)("div",{ref:u,className:"d-flex flex-column flex-sm-row justify-content-sm-between farm-stake-row",children:[Object(pt.jsxs)("div",{className:"d-flex flex-column flex-lg-row flex-fill pr-sm-3 mb-2 mb-sm-0",children:[Object(pt.jsx)("div",{className:"d-flex flex-column flex-lg-row align-items-lg-center token-icon-normal flex-even mr-lg-2 ".concat(q?"flex-lg-grow1-5":""),children:Object(pt.jsx)(Pu,{tokenId:d.collection,amount:R,denomination:d.decimals,usdPrice:p&&"0"!==(null===p||void 0===p?void 0:p.price)&&Object(pt.jsx)(Xb,{animated:!0,amount:E,usd:parseFloat(p.price)}),reinvested:P&&D&&Object(pt.jsxs)("div",{children:["Reinvested"," ",He({amount:D,denomination:null!==(a=null===b||void 0===b?void 0:b.rewardToken.decimals)&&void 0!==a?a:0,addCommas:!0})," ",Object(pt.jsx)(Rt,{token:S})]})})}),Object(pt.jsx)("div",{className:"d-flex flex-column justify-content-center justify-content-sm-start flex-sm-row align-items-sm-center flex-even mr-lg-2",children:Object(pt.jsx)(Pu,{tokenId:null!==(i=null===b||void 0===b?void 0:b.rewardToken.identifier)&&void 0!==i?i:"",amount:A,denomination:null!==(r=null===b||void 0===b?void 0:b.rewardToken.decimals)&&void 0!==r?r:0,usdPrice:p&&"0"!==(null===p||void 0===p?void 0:p.price)&&Object(pt.jsx)(Xb,{animated:!0,amount:He({amount:A,denomination:null!==(s=null===b||void 0===b?void 0:b.rewardToken.decimals)&&void 0!==s?s:0,showLastNonZeroDecimal:!0}),usd:parseFloat(p.price)}),earned:!0})}),Object(pt.jsx)("div",{className:"d-flex flex-column justify-content-center justify-content-sm-start flex-sm-row align-items-sm-center flex-even  ".concat(v?"mr-lg-2":"mr-lg-5"),children:v?Object(pt.jsx)(Pu,{tokenId:null!==k&&void 0!==k?k:"",amount:null!==O&&void 0!==O?O:"0",denomination:null!==(o=null===b||void 0===b?void 0:b.rewardToken.decimals)&&void 0!==o?o:0,usdPrice:Object(pt.jsx)(Xb,{animated:!0,amount:He({amount:null!==O&&void 0!==O?O:"0",denomination:null!==y&&void 0!==y?y:0,showLastNonZeroDecimal:!0}),usd:parseFloat(null!==w&&void 0!==w?w:"1")}),initialFarmRewards:W&&h?Object(pt.jsxs)(pt.Fragment,{children:["Rewards generated by"," ",Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:He({amount:W.amount,denomination:h.farmToken.decimals})}),Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:h.farmToken.collection})}),Object(pt.jsx)(yt,{token:h.farmToken.collection})," "]})]}):void 0,earned:!0}):Object(pt.jsx)(pt.Fragment,{children:"\xa0"})})]}),Object(pt.jsxs)("div",{className:"d-flex flex-column justify-content-around align-items-lg-center flex-lg-row",children:[q&&Object(pt.jsx)(pt.Fragment,{children:_}),B,C,Object(pt.jsx)("div",{className:"card-arrow right-offset-inner d-none d-lg-block",children:"\xa0"})]}),V,U,I]})},Ru=Object(p.gql)(Id||(Id=Object(Bi.a)(["\n  query ($farmStakeAddress: String!, $payment: InputTokenModel!) {\n    unbondFarm(farmStakeAddress: $farmStakeAddress, payment: $payment) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Eu=function(e){var t=e.ref,n=e.callbackRoute,a=ur(),i=Wh(),r=c.useState(!1),s=Object(T.a)(r,2),o=s[0],l=s[1];return{unbondFarm:function(e){var r=e.variables;l(!0),a({query:Ru,variables:r}).then((function(e){if(t&&null!==t.current)if(e.data&&e.data.data){var a=[me(e.data.data.unbondFarm)];i({transactions:a,callbackRoute:n,processingMessage:"Unbonding farm stake",successMessage:"Farm stake unbonded",submittedMessage:"Unbond farm stake transactions submitted",pendingFarmAddress:r.farmStakeAddress}),l(!1)}else l(!1)})).catch((function(e){console.log("unbondFarm",e),l(!1)}))},unbondFarmLoading:o}},Lu=function(e){var t,n,a=e.unbondingStake,i=c.useRef(null),r=Object(g.c)(Br),s=Ke({stakingFarmsRate:r.stakingFarmsRate,farmAddress:a.stakingAddress}),o=r.tokenUSDPrices.find((function(e){return e.identifier===(null===s||void 0===s?void 0:s.farmingToken.identifier)})),l=He({amount:a.balance,denomination:a.decimals,showLastNonZeroDecimal:!0}),d=mo(null!==(t=null===(n=a.unboundTokenAttributes)||void 0===n?void 0:n.remainingEpochs)&&void 0!==t?t:0),u=d.WithdrawPeriodCountdown,b=d.showCountdown,j=Eu({ref:i,callbackRoute:Nh.metastaking}),f=j.unbondFarm,h=j.unbondFarmLoading,p=function(){var e={tokenID:a.collection,nonce:a.nonce,amount:a.balance},t={farmStakeAddress:a.stakingAddress,payment:e};f({variables:t})},x="Active"===(null===s||void 0===s?void 0:s.state),v=c.useMemo((function(){return!x||b?Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip-".concat(a.identifier)},e),{},{children:x?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(u,{})," left until unbonding ends."]}):Object(pt.jsx)(pt.Fragment,{children:"Under recovery"})}))},children:Object(pt.jsx)("span",{children:Object(pt.jsxs)("div",{className:"farm-action-btn btn btn-secondary disabled",onClick:function(e){e.stopPropagation()},children:[b&&Object(pt.jsx)(F.a,{icon:ac.c,className:"mr-2"}),"Unbond"]})})}):Object(pt.jsx)("button",{className:"farm-action-btn btn btn-secondary","data-testid":"unbondBtn",disabled:h,onClick:p,children:Object(pt.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:h?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Unbond"})})})}),[a,u,x,b,Cu,h]);return Object(pt.jsxs)("div",{ref:i,className:"d-flex flex-column flex-sm-row justify-content-sm-between farm-stake-row",children:[Object(pt.jsx)("div",{className:"d-flex flex-column flex-lg-row flex-fill pr-sm-3 mb-2 mb-sm-0",children:Object(pt.jsx)("div",{className:"d-flex flex-column flex-lg-row align-items-lg-center token-icon-normal flex-even mr-lg-2",children:Object(pt.jsxs)("div",{className:"d-flex align-items-center mr-2 mb-2 mb-lg-0 flex-even",children:[Object(pt.jsx)("div",{className:"flex-shrink-0 mr-2",children:Object(pt.jsx)(Xh,{token:null===s||void 0===s?void 0:s.farmToken.collection})}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center text-secondary",children:Object(pt.jsx)(yt,{token:null===s||void 0===s?void 0:s.farmToken.collection})}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("div",{className:"mr-1",children:He({amount:a.balance,denomination:a.decimals})}),Object(pt.jsx)("small",{className:"text-secondary",children:o&&Object(pt.jsx)(Xb,{animated:!0,amount:l,usd:parseFloat(o.price)})})]})]})]})})}),Object(pt.jsxs)("div",{className:"d-flex flex-column justify-content-around align-items-lg-center flex-lg-row",children:[v,Object(pt.jsx)("div",{className:"card-arrow right-offset-inner d-none d-lg-block",children:"\xa0"})]})]})},Cu="Under maintenance",Iu=function(e){var t,n,a,i,r=e.farm,s=e.stakingProxies,o=c.useRef(null),l=Object(O.g)(),d=Object(g.c)(Br),u=c.useState(!1),b=Object(T.a)(u,2),j=b[0],f=b[1],h=Ke({stakingFarmsRate:d.stakingFarmsRate,farmAddress:r.address}),p=d.tokenUSDPrices.find((function(e){return e.identifier===(null===h||void 0===h?void 0:h.farmingToken.identifier)})),x=Rh({pendingFarmAddress:[r.address],ref:o}).preventActions,v=Object(g.c)((function(e){return Yd(e,r.address)})),k=v.stakes,y=v.unbondingStakes,w=v.totalRewards,N=v.totalStaked,S=v.rewardsFetched,A=function(e){var t,n,a=e.farmRate,i=e.tokenUSDPrice,r=He({amount:null!==(t=null===a||void 0===a?void 0:a.farmTokenSupply)&&void 0!==t?t:"0",denomination:null!==(n=null===a||void 0===a?void 0:a.farmToken.decimals)&&void 0!==n?n:0});return a&&i?Ye("".concat(parseFloat(r)*parseFloat(i.price)),0):"..."}({farmRate:h,tokenUSDPrice:p}),F=He({amount:null!==(t=null===h||void 0===h?void 0:h.farmTokenSupply)&&void 0!==t?t:"0",denomination:null!==(n=null===h||void 0===h?void 0:h.farmToken.decimals)&&void 0!==n?n:0,addCommas:!0,decimals:0}),P=x||!S,D="Active"===(null===h||void 0===h?void 0:h.state),R=du({farm:r,stakingProxies:s,stakes:k,active:D,disableBtn:P}),E=R.EnterBtn,L=R.EnterModal,C=eu({stakes:k,stakingProxies:s,disableBtn:P,active:D}),I=C.ClaimAllBtn,q=C.ClaimAllModal,M=r.rewardToken,B=r.farmingToken,U=function(e){var t=e.rewardsFetched,n=e.totalStaked,a=e.totalRewards,i=e.farmingTokenDecimals,r=e.rewardTokenDecimals;return{denominatedTotalStaked:t?He({amount:n,denomination:i,showLastNonZeroDecimal:!0}):"...",denominatedTotalStakedWithCommas:t?He({amount:n,denomination:i,addCommas:!0,decimals:2}):"...",denominatedTotalRewards:t?He({amount:a,denomination:r,showLastNonZeroDecimal:!0}):"...",denominatedTotalRewardsWithCommas:t?He({amount:a,denomination:r,addCommas:!0,decimals:2}):"..."}}({rewardsFetched:S,totalStaked:N,totalRewards:w,farmingTokenDecimals:B.decimals,rewardTokenDecimals:M.decimals}),$=U.denominatedTotalStaked,_=U.denominatedTotalStakedWithCommas,V=U.denominatedTotalRewards,W=U.denominatedTotalRewardsWithCommas;return Object(pt.jsx)(pt.Fragment,{children:Object(pt.jsx)("div",{className:"mb-4",children:Object(pt.jsxs)("div",{ref:o,className:"standard-card card farm-card overflow-hidden",children:[Object(pt.jsx)("div",{className:"card-header p-4 d-flex align-items-center justify-content-between ".concat(j?"":"rounded"),onClick:function(){f((function(e){return!e}))},style:{cursor:"pointer"},children:Object(pt.jsxs)("div",{className:"d-flex flex-column flex-lg-row flex-fill align-items-lg-center justify-content-lg-between",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mb-lg-0 header-item mr-5",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-start",children:[Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(Gd,{farm:r})}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center font-weight-bold mb-lg-1","data-testid":"farmName",children:Object(pt.jsx)(tu,{farm:r})}),Object(pt.jsx)("div",{className:"d-flex align-items-center",children:"0"===A?Object(pt.jsxs)(pt.Fragment,{children:["".concat(F,"  "),Object(pt.jsx)(Rt,{token:B.identifier})]}):Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip-".concat(r.address)},e),{},{children:"Total Value Locked"}))},children:Object(pt.jsxs)("div",{className:"underline-dotted-secondary cursor-text",onClick:function(e){e.preventDefault(),e.stopPropagation()},children:["$",Object(pt.jsx)(sp,{valueStr:A})]})})})]})]}),Object(pt.jsx)("div",{className:"d-flex d-lg-none ml-auto",children:Object(pt.jsx)(up,{expanded:j})})]}),Object(pt.jsxs)(uu,{name:Object(pt.jsx)(pt.Fragment,{children:"Max APR / APY"}),children:[Gl(null!==(a=null===h||void 0===h?void 0:h.annualPercentageRewards)&&void 0!==a?a:"...",0),"% /"," ",Zl(null!==(i=null===h||void 0===h?void 0:h.annualPercentageRewards)&&void 0!==i?i:"...",0),"%"]}),Object(pt.jsx)(uu,{name:Object(pt.jsxs)(pt.Fragment,{children:["My Staked ",Object(pt.jsx)(Rt,{token:B.identifier})]}),children:Object(pt.jsx)("div",{className:"align-items-start",children:x||"..."===$?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("span",{className:"mr-1",children:Object(pt.jsx)(sp,{valueStr:_})}),p&&parseFloat($)>0&&"0"!==(null===p||void 0===p?void 0:p.price)&&Object(pt.jsx)("small",{className:"text-secondary",children:Object(pt.jsx)(Xb,{animated:!0,amount:$,usd:parseFloat(p.price)})})]})})}),Object(pt.jsx)(uu,{name:Object(pt.jsxs)(pt.Fragment,{children:["My Earned ",Object(pt.jsx)(Rt,{token:M.identifier})]}),children:Object(pt.jsx)("div",{className:"align-items-start",children:x||"..."===V?Object(pt.jsx)(pt.Fragment,{children:"..."}):Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("span",{className:"mr-1",children:Object(pt.jsx)(sp,{valueStr:W})}),p&&parseFloat(V)>0&&"0"!==(null===p||void 0===p?void 0:p.price)&&Object(pt.jsx)("small",{className:"text-secondary",children:Object(pt.jsx)(Xb,{animated:!0,amount:V,usd:parseFloat(p.price)})})]})})}),Object(pt.jsx)("div",{className:"d-flex align-items-center mt-2 mb-lg-2",children:Object(pt.jsx)(pt.Fragment,{children:l?Object(pt.jsxs)("div",{className:"d-flex flex-column w-100 flex-xl-row",children:[I,E]}):Object(pt.jsx)(kO,{large:!0})})}),Object(pt.jsx)("div",{className:"d-none d-lg-flex card-arrow justify-content-end right-offset",children:Object(pt.jsx)(up,{expanded:j})})]})}),j&&s&&Object(pt.jsx)("div",{className:"card-body py-0 bg-light",children:x?Object(pt.jsx)($p,{title:"Waiting for transactions to be processed"}):Object(pt.jsx)(pt.Fragment,{children:k.length>0||y.length>0?Object(pt.jsxs)(pt.Fragment,{children:[k.map((function(e){return Object(pt.jsx)(Du,{stake:e,stakingProxies:s},e.identifier)})),y.map((function(e){return Object(pt.jsx)(Lu,{unbondingStake:e},e.identifier)}))]}):Object(pt.jsx)(pt.Fragment,{children:void 0===S?Object(pt.jsx)($p,{noText:!0}):Object(pt.jsxs)("div",{className:"text-secondary text-center py-4",children:["Stake now to earn"," ",Object(pt.jsx)(Rt,{token:M.identifier}),"."]})})})}),q,L]})})})},qu=function(){var e=o.a.useRef(null),t=Mh(),n=t.isAccountLoading,a=t.accountLoadingError;Dr();var i=function(e){var t=Object(g.b)(),n=Cr("stakingFarms").fetchNfts,a=Jl(),i=Object(g.c)(rd),r=Object(g.c)(yd),s=r.stakingFarmsCollection,o=r.isLoading,l=r.isError,d=Td(e),u=d.pageData,m=d.pageDataError,b=d.pageDataFetched,f=function(){t(ei({stakingFarmsCollection:[],isLoading:!1,isError:!0}))},p=function(){var e=Object(j.a)(h.a.mark((function e(){var i,r,s,c,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=3;break}return t(ei({stakingFarmsCollection:[],isLoading:!1,isError:!0})),e.abrupt("return");case 3:if(!b||!u){e.next=22;break}return e.next=6,n([].concat(Object(ke.a)(u.stakingFarms.map((function(e){return e.farmToken.collection}))),Object(ke.a)(u.stakingProxies.map((function(e){return e.dualYieldToken.collection})))));case 6:if(i=e.sent,r=i.data,s=i.success){e.next=12;break}return f(),e.abrupt("return");case 12:return e.next=14,a({nfts:r,stakingProxies:u.stakingProxies});case 14:if(c=e.sent,o=c.data,c.success){e.next=20;break}return f(),e.abrupt("return");case 20:l=Nd({farms:u.stakingFarms,stakingProxies:u.stakingProxies,dualYieldTokens:o,nfts:r}),t(ei({stakingFarmsCollection:null!==l&&void 0!==l?l:[],isLoading:!1,isError:!s}));case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.useEffect((function(){p()}),[u,b,m,i]),{stakingFarmsCollection:s,pageData:u,isLoading:o,isError:l}}(e),r=i.stakingFarmsCollection,s=i.pageData,l=i.isLoading,d=i.isError,u=Wd({farms:r,farmsLoading:l}),m=u.rewardsLoading,b=u.rewardsError,f=dr(),p=f.fetchTokenDetails,x=f.tokenDetailsLoading,v=f.tokenDetailsError,O=lr(),k=O.fetchNftDetails,y=O.nftDetailsLoading,w=O.nftDetailsError;o.a.useEffect((function(){if(s){var e=function(e){var t=[],n=[];return e.stakingFarms.forEach((function(e){var a=e.farmingToken.identifier,i=e.rewardToken.identifier,r=e.farmToken.collection;t.includes(a)||t.push(a),t.includes(i)||t.push(i),n.includes(r)||n.push(r)})),e.stakingProxies.forEach((function(e){var t=e.dualYieldToken.collection,a=e.lpFarmToken.collection;n.includes(t)||n.push(t),n.includes(a)||n.push(a)})),n.push(V),{identfiers:t,collections:n}}(s),t=e.identfiers,n=e.collections;p(t),k(n)}}),[s]);var T=l||m||n||x||y,N=d||b||a||v||w,S=!T&&!N&&r&&s;return Object(pt.jsxs)(pt.Fragment,{children:[T&&!N&&Object(pt.jsx)($p,{}),N&&Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load farms"}),Object(pt.jsx)("div",{ref:e,className:"container mt-spacer",children:S&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"row mb-spacer",children:Object(pt.jsxs)("div",{className:"col-12 text-center ",children:[Object(pt.jsx)("h2",{children:"Metastaking"}),Object(pt.jsx)("h3",{className:"h6 font-weight-light text-secondary mb-2 pt-1",children:"Stake LP & Tokens to earn more of the same token as rewards"})]})}),Object(pt.jsx)("div",{className:"row",children:r.map((function(e){return Object(pt.jsx)("div",{className:"col-12",children:Object(pt.jsx)(Iu,{farm:e,stakingProxies:s.stakingProxies.filter((function(t){return t.stakingFarmAddress===e.address}))})},e.farmToken.collection)}))})]})})]})},Mu=n(656),Bu=n.n(Mu),Uu=n(657),$u=["title","titleId"];function _u(){return _u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_u.apply(this,arguments)}function Vu(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Wu(e,t){var n=e.title,a=e.titleId,i=Vu(e,$u);return c.createElement("svg",_u({id:"Group_579","data-name":"Group 579",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 15.362 22",ref:t,"aria-labelledby":a},i),n?c.createElement("title",{id:a},n):null,qd||(qd=c.createElement("defs",null,c.createElement("linearGradient",{id:"linear-gradient",x1:.5,x2:.5,y2:1,gradientUnits:"objectBoundingBox"},c.createElement("stop",{offset:0,stopColor:"#1a45c2"}),c.createElement("stop",{offset:1,stopColor:"#001f9c"})),c.createElement("linearGradient",{id:"linear-gradient-2",x1:.5,y1:.491,x2:.5,y2:.009,xlinkHref:"#linear-gradient"}))),Md||(Md=c.createElement("path",{id:"Path_1838","data-name":"Path 1838",d:"M348.782,152.213l-1.874,8.706h-4.725Z",transform:"translate(-338.733 -152.213)",fillRule:"evenodd",fill:"url(#linear-gradient)"})),Bd||(Bd=c.createElement("path",{id:"Path_1839","data-name":"Path 1839",d:"M310.4,271.184l-3.449,4.587H295.04l3.45-4.587Z",transform:"translate(-295.04 -262.477)",fill:"#1a45c2",fillRule:"evenodd"})),Ud||(Ud=c.createElement("path",{id:"Path_1840","data-name":"Path 1840",d:"M374.245,333.864l-6.6,8.706,1.874-8.706Z",transform:"translate(-362.332 -320.571)",fillRule:"evenodd",fill:"url(#linear-gradient-2)"})))}var zu,Hu,Yu=c.forwardRef(Wu),Gu=(n.p,["title","titleId"]);function Zu(){return Zu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zu.apply(this,arguments)}function Ku(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Xu(e,t){var n=e.title,a=e.titleId,i=Ku(e,Gu);return c.createElement("svg",Zu({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:105.004,height:105,viewBox:"0 0 105.004 105",ref:t,"aria-labelledby":a},i),n?c.createElement("title",{id:a},n):null,zu||(zu=c.createElement("defs",null,c.createElement("linearGradient",{id:"linear-gradient-lptoken",x1:.5,y1:.026,x2:.5,y2:.979,gradientUnits:"objectBoundingBox"},c.createElement("stop",{offset:0,stopColor:"#14b0f5"}),c.createElement("stop",{offset:1,stopColor:"#9191ff"})))),Hu||(Hu=c.createElement("g",{transform:"translate(-869.711 -766.933)"},c.createElement("path",{d:"M210.352,266c1.36-4.65,8.43-4.86,9.96,0,7.96,25.4,25.011,32.321,25.011,50.252,0,15.861-13.41,28.681-30,28.681s-30-12.84-30-28.681C185.321,298.218,202.332,291.518,210.352,266Zm29.341-1.62c0-8.18,7.45-11.23,10.951-22.831a2.272,2.272,0,0,1,4.35,0c3.5,11.56,10.95,14.7,10.95,22.831a13.126,13.126,0,0,1-26.251,0Zm39.682,22.171c3.49,11.56,10.95,14.7,10.95,22.831a13.126,13.126,0,0,1-26.251,0c0-8.18,7.45-11.23,10.94-22.831A2.278,2.278,0,0,1,279.375,286.548Z",transform:"translate(684.391 527.004)",fill:"url(#linear-gradient-lptoken)"}),c.createElement("path",{d:"M17.528-5.936c0-7.224-11.116-4.984-11.116-7.98,0-.98.84-1.764,3.164-1.764a11.581,11.581,0,0,1,5.432,1.512l1.708-4.116a13.623,13.623,0,0,0-5.684-1.652V-22.96H7.672v3.08C3.136-19.32.924-16.716.924-13.636c0,7.28,11.144,5.012,11.144,8.12,0,.952-.9,1.6-3.192,1.6A12.36,12.36,0,0,1,2.408-5.852L.588-1.764A15.028,15.028,0,0,0,7.672.364v3h3.36V.252C15.4-.392,17.528-2.968,17.528-5.936Z",transform:"translate(890.154 850.533)",fill:"#fff"}))))}var Qu,Ju,em,tm,nm,am,im,rm,sm,cm,om,lm,dm,um,mm,bm,jm,fm=c.forwardRef(Xu),hm=(n.p,function(e){var t=e.title,n=e.content,a=e.icon,i=e.iconClassName;return Object(pt.jsxs)("div",{className:"feature-card card h-100 mt-4 mt-lg-0 py-spacer px-3 d-flex justify-content-start align-items-center",children:[a&&Object(pt.jsx)("div",{className:"feature-icon-container d-flex align-items-center justify-content-center",children:Object(pt.jsx)("div",{className:"feature-icon d-flex align-items-center justify-content-center ".concat(i),children:a})}),Object(pt.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:Object(pt.jsxs)("div",{className:"d-flex flex-column text-center",children:[Object(pt.jsx)("h3",{className:"h6 mb-3 font-weight-bold",children:t}),Object(pt.jsx)("p",{className:"font-weight-light text-secondary mb-0",children:Object(pt.jsx)("small",{children:n})})]})})]})}),pm=function(){return Object(pt.jsx)(pt.Fragment,{children:Object(pt.jsx)("div",{className:"feature-cards container mt-5",children:Object(pt.jsxs)("div",{className:"row mb-0",children:[Object(pt.jsx)("div",{className:"col-12 col-sm-6 col-lg-3 mt-4 mt-lg-0 mb-spacer",children:Object(pt.jsx)(hm,{title:"For Traders",content:"Securely swap between crypto assets with extremely low slippage and minimal fees.",icon:Object(pt.jsx)(F.a,{icon:Hr.faExchangeAlt,size:"2x",className:"text-white"})})}),Object(pt.jsx)("div",{className:"col-12 col-sm-6 col-lg-3 mt-4 mt-lg-0 mb-spacer",children:Object(pt.jsx)(hm,{title:"For Liquidity Providers",content:"Earn yield from transaction fees and liquidity incentives.",icon:Object(pt.jsx)(fm,{})})}),Object(pt.jsx)("div",{className:"col-12 col-sm-6 col-lg-3 mt-4 mt-lg-0 mb-spacer",children:Object(pt.jsx)(hm,{title:"For Developers",content:"As a core DeFi building block, Maiar DEX can easily be integrated into your app.",icon:Object(pt.jsx)(F.a,{icon:Uu.faTools,size:"2x",className:"text-success"})})}),Object(pt.jsx)("div",{className:"col-12 col-sm-6 col-lg-3 mt-4 mt-lg-0 mb-spacer",children:Object(pt.jsx)(hm,{title:"Governance",content:"Decide the path for the future of financial services using the MEX governance token.",icon:Object(pt.jsx)(Yu,{}),iconClassName:"text-white"})})]})})})},xm=function(){var e=Object(g.c)(Br);return Object(pt.jsx)("div",{className:"info-cards container my-5 pt-5 pt-lg-4 mt-lg-0",children:Object(pt.jsxs)("div",{className:"row",children:[Object(pt.jsx)("div",{className:"col-12 col-sm-6 col-lg-3 mb-spacer",children:Object(pt.jsx)(Ap,{dataTestId:"mexPrice",title:"MEX Price",value:Object(pt.jsxs)(pt.Fragment,{children:["$",Object(pt.jsx)(sp,{valueStr:e.mexPrice})]}),tooltip:Object(pt.jsx)(wo,{info:Object(pt.jsxs)(pt.Fragment,{children:["EGLD per MEX: ",e.egldMexRate]})})})}),Object(pt.jsx)("div",{className:"col-12 col-sm-6 col-lg-3 mb-spacer",children:Object(pt.jsx)(Ap,{dataTestId:"supply",title:"Supply",value:Object(pt.jsx)(sp,{valueStr:e.mexSupply}),tooltip:Object(pt.jsx)(wo,{info:Object(pt.jsx)(pt.Fragment,{children:"LKMEX tokens that are not staked in a farm or deposited in a liquidity pool are not counted here. Once LKMEX tokens are staked or pooled, MEX tokens are minted instead, and reflected in the supply."})})})}),Object(pt.jsx)("div",{className:"col-12 col-sm-6 col-lg-3 mb-spacer",children:Object(pt.jsx)(Ap,{title:"Market Cap",value:Object(pt.jsxs)(pt.Fragment,{children:["$",Object(pt.jsx)(sp,{valueStr:e.marketCap})]}),tooltip:Object(pt.jsx)(wo,{info:Object(pt.jsx)(pt.Fragment,{children:"Accounts for the entire MEX supply in existence, including ecosystem, liquidity and security reserves."})})})}),Object(pt.jsx)("div",{className:"col-12 col-sm-6 col-lg-3 mb-spacer",children:Object(pt.jsx)(Ap,{title:"Total Value Locked",value:Object(pt.jsxs)(pt.Fragment,{children:["$",Object(pt.jsx)(sp,{valueStr:e.totalDepositedInExchange})]})})})]})})},vm=function(){return Object(pt.jsx)("div",{className:"home h-100 d-flex justify-content-center align-items-center","data-testid":"pageContent",children:Object(pt.jsxs)("div",{className:"w-100",children:[Object(pt.jsx)("div",{className:"container overflow-hidden",children:Object(pt.jsxs)("div",{className:"row py-5 my-5 py-lg-0 my-lg-0",children:[Object(pt.jsx)("div",{className:"col-12 col-lg-8 d-flex align-items-center",children:Object(pt.jsxs)("div",{children:[Object(pt.jsxs)("div",{className:"title-holder mb-4",children:[Object(pt.jsxs)("h1",{className:"h1 mt-5 mt-lg-0 mb-2 justify-content-center justify-content-md-start text-center text-sm-left text-white",children:[Object(pt.jsxs)("span",{className:"mr-1 d-inline",children:["DeFi For The ",Object(pt.jsx)("br",{className:"d-lg-none"}),"Next"," "]}),Object(pt.jsx)(Bu.a,{onInit:function(e){e.typeString("Million").pauseFor(1500).deleteChars(7).typeString("Billion").start()}})]}),Object(pt.jsx)("h2",{className:"h3 mb-0 text-center text-sm-left font-weight-lighter text-white",children:"Swap assets instantly, globally, inexpensively, automatically"})]}),Object(pt.jsxs)("div",{className:"mx-n3 mt-lg-5 justify-content-center justify-content-md-start text-center text-sm-left ",children:[Object(pt.jsx)(w.b,{"data-testid":"startFarmingLink",className:"btn btn-primary shadow mr-3 ml-sm-3 my-2",to:Nh.farms,children:"Start farming"}),Object(pt.jsx)("a",{href:"https://docs.maiar.exchange",rel:"noopener noreferrer nofollow",target:"_blank",className:"btn btn-outline-primary-glow my-2",children:"Learn More"})]})]})}),Object(pt.jsx)("div",{className:"col-12 col-lg-4 hero-lightning d-none d-lg-flex"})]})}),Object(pt.jsx)(xm,{}),Object(pt.jsxs)("div",{className:"mt-lg-spacer px-3",children:[Object(pt.jsx)("h2",{className:"h3 mt-5 mb-0 pt-lg-5 pb-lg-3 text-center",children:"DeFi innovations created for Internet-Scale"}),Object(pt.jsxs)("p",{className:"text-secondary text-center pb-spacer",children:["Join the natural evolution of DeFi with powerful financial products"," ",Object(pt.jsx)("br",{className:"d-none d-lg-inline-block"}),"on a truly scalable architecture"]})]}),Object(pt.jsx)(pm,{})]})})},Om=n(659),km=function(e){var t=e.children,n=Object(g.c)(Nt),a=Object(O.p)().isLoggedIn,i=Object(g.c)(Ft);return Object(pt.jsxs)("div",{className:"liquidity-layout container mt-spacer",children:[Object(pt.jsx)("div",{className:"row mb-spacer",children:Object(pt.jsxs)("div",{className:"col-12 text-center ",children:[Object(pt.jsx)("h2",{children:"Liquidity"}),Object(pt.jsx)("h3",{className:"h6 font-weight-light text-secondary mb-2 pt-1",children:"Add liquidity to receive LP tokens"})]})}),Object(pt.jsx)("div",{className:"row",children:Object(pt.jsx)("div",{className:"col-12 col-md-9 col-lg-7 col-xl-6 mx-auto mt-2",children:Object(pt.jsxs)("div",{className:"card border-0 main-card",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:Object(pt.jsxs)("ul",{className:"nav nav-tabs w-100 border-0",children:[a&&Object(pt.jsx)("li",{className:"nav-item flex-even mt-n2",children:Object(pt.jsx)(w.b,{className:"nav-link left-nav d-flex justify-content-center align-items-center text-center h-100 p-2 px-sm-3 py-sm-4 ".concat(n.pathname===Nh.liquidity?"active":""),to:Nh.liquidity,children:"My Liquidity"})}),Object(pt.jsx)("li",{className:"nav-item flex-even mt-n2",children:Object(pt.jsx)(w.b,{className:"nav-link right-nav d-flex justify-content-center align-items-center text-center h-100 p-2 px-sm-3 py-sm-4  ".concat(n.pathname===Nh.liquidityAdd?"".concat(null!==i&&void 0!==i?i:""," active"):""),to:Nh.liquidityAdd,children:"+ Add Liquidity"})}),Object(pt.jsx)("li",{className:"nav-item flex-even mt-n2",children:Object(pt.jsx)(w.b,{className:"nav-link right-nav h-100 text-center py-4 ".concat(n.pathname===Nh.liquidityActivePools?"active":""),to:Nh.liquidityActivePools,children:"Active Pools"})})]})}),Object(pt.jsx)("div",{className:"main-body",children:t})]})})})]})},gm=function(e){var t=e.pairs,n=e.pools,a=e.stake,i=t.find((function(e){return e.liquidityPoolToken.identifier===a.lpToken.identifier}));if(i){var r=n.find((function(e){return e.pair.address===i.address}));r?r.stake.push(a):n.push({pair:i,stake:[a]})}},ym=function(e){var t=e.pairs,n=e.tokens,a=e.decodedWrappedLpTokens,i=e.decodedLpProxyTokens,r=[];return t&&(a.forEach((function(e){var n={lpToken:Object(m.a)(Object(m.a)({},e),{},{identifier:e.lpTokenID}),attributes:e.attributes,identifier:e.collection,balance:e.balance,nonce:e.nonce};gm({pairs:t,pools:r,stake:n})})),i.forEach((function(e){var n={lpToken:Object(m.a)(Object(m.a)({},e),{},{identifier:e.lpTokenID}),lpProxyTokenDetails:e.lpProxyTokenDetails,attributes:e.attributes,identifier:e.collection,balance:e.balance,nonce:e.nonce};gm({pairs:t,pools:r,stake:n})})),n.forEach((function(e){var n={lpToken:e,attributes:"",identifier:e.identifier,balance:e.balance};gm({pairs:t,pools:r,stake:n})}))),function(e){return e.sort((function(e,t){var n=bc.indexOf(e.pair.type),a=bc.indexOf(t.pair.type);return(n>-1?n:99)-(a>-1?a:99)}))}(r)},wm=function(e){var t=e.pairs,n=e.proxy,a=e.cacheKey,i=Object(g.c)(rd),r=Cr(a),s=r.fetchNfts,c=r.nfts,l=r.nftsLoading,d=r.nftsError,u=qr(a),m=u.fetchTokens,b=u.tokens,j=u.tokensLoading,f=u.tokensError,h=dr(),p=h.fetchTokenDetails,x=h.tokenDetailsLoading,v=h.tokenDetailsError,O=lr(),k=O.fetchNftDetails,y=O.nftDetailsLoading,w=O.nftDetailsError,T=kr(a),N=T.decodeWrappedLpTokens,S=T.decodedWrappedLpTokens,A=T.tokensDecodedLoading,F=T.tokensDecodedError,P=xr(a),D=P.decodeLpProxyTokens,R=P.decodedLpProxyTokens,E=P.lpProxyTokensDecodedLoading,L=P.lpProxyTokensDecodedError,C=ym({pairs:t,tokens:b,decodedWrappedLpTokens:S,decodedLpProxyTokens:R});return o.a.useEffect((function(){if(n&&t.length>0){var e,a,i=[].concat(Object(ke.a)(t.map((function(e){return e.liquidityPoolToken.identifier}))),Object(ke.a)(Me({pairs:t}).options.map((function(e){return e.value}))));m(i),p(i);var r=n.simpleLock?[n.wrappedLpToken.collection,n.simpleLock.lpProxyToken.collection]:[n.wrappedLpToken.collection];s(r),k([].concat(r,[null!==(e=null===(a=n.simpleLock)||void 0===a?void 0:a.lockedToken.collection)&&void 0!==e?e:""]))}}),[t,n,i]),o.a.useEffect((function(){n&&n.simpleLock&&(N({nfts:c,wrappedLpTokenId:n.wrappedLpToken.collection}),D({nfts:c,lpProxyTokenId:n.simpleLock.lpProxyToken.collection}))}),[c]),{accountPools:C,accountPoolsLoading:j||l||A||x||y||E,accountPoolsError:f||d||F||v||w||L}},Tm=Object(p.gql)(Qu||(Qu=Object(Bi.a)(["\n  query ($offset: Int, $pairsLimit: Int) {\n    pairs(offset: $offset, limit: $pairsLimit) {\n      address\n      firstToken {\n        name\n        identifier\n        decimals\n      }\n      secondToken {\n        name\n        identifier\n        decimals\n      }\n      liquidityPoolToken {\n        name\n        identifier\n        decimals\n      }\n      state\n      totalFeePercent\n      specialFeePercent\n      type\n    }\n    proxy {\n      address\n      wrappedLpToken {\n        collection\n        name\n        decimals\n      }\n      wrappedFarmToken {\n        collection\n        name\n        decimals\n      }\n      lockedAssetToken {\n        collection\n        name\n        decimals\n      }\n      assetToken {\n        identifier\n        name\n        decimals\n      }\n      intermediatedPairs\n      intermediatedFarms\n    }\n    simpleLock {\n      address\n      lockedToken {\n        collection\n        name\n        decimals\n      }\n      lpProxyToken {\n        collection\n        name\n        decimals\n      }\n      farmProxyToken {\n        collection\n        name\n        decimals\n      }\n      intermediatedPairs\n      intermediatedFarms\n    }\n  }\n"]))),Nm=Se((function(e){return e.liquidityCache}),(function(e,t){return t}),(function(e,t){var n;return null!=t&&null!==(n=null===e||void 0===e?void 0:e[t])&&void 0!==n?n:null})),Sm=function(e){var t,n=e.preserveOriginalPairs,a=e.withoutFiltering,i=void 0!==a&&a,r=e.cacheKey,s=ur(),o=Object(g.b)(),l=Object(g.c)(Ee),d=Object(g.c)((function(e){return Nm(e,r)}));return c.useEffect((function(){s({query:Tm,variables:{offset:0,pairsLimit:G}}).then((function(e){var t;if(null!=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)){var a=e.data.data,s=ys({pairsData:a.pairs,preserveOriginalPairs:n}).filter((function(e){var t=e.state,n=e.type,a=e.address;return!!i||["Active","ActiveNoSwaps"].includes(t)&&("Experimental"!==n||(null===l||void 0===l?void 0:l.includes(a)))}));o(ua({cacheKey:r,liquidityCache:{pairs:jc(s),proxy:Object(m.a)(Object(m.a)({},a.proxy),{},{simpleLock:a.simpleLock}),pairsFetched:!0,pairsFetchError:!1}}))}else o(ma({cacheKey:r}))})).catch((function(e){console.log("liquidity useFetchPageData",e),o(ma({cacheKey:r}))}))}),[l]),{pairs:null!==(t=null===d||void 0===d?void 0:d.pairs)&&void 0!==t?t:[],proxy:null===d||void 0===d?void 0:d.proxy,pairsFetched:Boolean(null===d||void 0===d?void 0:d.pairsFetched),pairsFetchError:Boolean(null===d||void 0===d?void 0:d.pairsFetchError)}},Am=n(658),Fm=function(e){var t=e.amount,n=e.token,a=e.preventActions;return Object(pt.jsxs)("div",{className:"d-flex flex-fill align-items-center justify-content-between mb-2",children:[Object(pt.jsx)("div",{className:"mr-2",children:n?Object(pt.jsx)(Xh,{token:n.identifier}):Object(pt.jsx)("div",{className:"token-symbol",children:Object(pt.jsx)(F.a,{icon:Am.faChartPie,className:"text-secondary",style:{marginRight:"-0.1rem"}})})}),Object(pt.jsxs)("div",{className:"d-flex flex-fill flex-wrap justify-content-between",children:[Object(pt.jsx)("span",{className:"pr-2 text-secondary",children:n?Object(pt.jsxs)(pt.Fragment,{children:["Current ",Object(pt.jsx)(Rt,{token:n.identifier})]}):Object(pt.jsx)(pt.Fragment,{children:"Pool Share"})}),Object(pt.jsx)("span",{children:a?"...":t})]})]})},Pm=function(e){var t=e.tokenAmount,n=e.stake,i=e.onMaxClick,r=a.denominateAmount,s=n.lpToken.decimals,c=r({amount:n.balance,denomination:s}),o=r({amount:n.balance,denomination:s,showLastNonZeroDecimal:!0}),l="0"!==c&&parseFloat(t)!==parseFloat(c),d=function(e){e.preventDefault(),i&&i(c)};return{MaxBtn:function(){return l?Object(pt.jsx)("a",{href:"/",className:"badge badge-pill badge-primary text-uppercase",onClick:d,onMouseDown:function(e){e.preventDefault()},children:"Max"}):null},AvailableBalance:function(){return Object(pt.jsx)(pt.Fragment,{children:r({amount:n.balance,denomination:s,addCommas:!0})})},balance:c,denomination:s,completeMaxBalance:l?void 0:o}},Dm=Object(p.gql)(Ju||(Ju=Object(Bi.a)(["\n  query (\n    $pairAddress: String!\n    $liquidity: String!\n    $liquidityTokenID: String!\n    $tolerance: Float!\n  ) {\n    removeLiquidity(\n      pairAddress: $pairAddress\n      liquidity: $liquidity\n      liquidityTokenID: $liquidityTokenID\n      tolerance: $tolerance\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Rm=Object(p.gql)(em||(em=Object(Bi.a)(["\n  query (\n    $inputTokens: InputTokenModel!\n    $attributes: String!\n    $tolerance: Float!\n  ) {\n    removeLiquidityLockedToken(\n      inputTokens: $inputTokens\n      attributes: $attributes\n      tolerance: $tolerance\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Em=Object(p.gql)(tm||(tm=Object(Bi.a)(["\n  query (\n    $pairAddress: String!\n    $wrappedLpTokenID: String!\n    $wrappedLpTokenNonce: Int!\n    $liquidity: String!\n    $tolerance: Float!\n  ) {\n    removeLiquidityProxy(\n      pairAddress: $pairAddress\n      wrappedLpTokenID: $wrappedLpTokenID\n      wrappedLpTokenNonce: $wrappedLpTokenNonce\n      liquidity: $liquidity\n      tolerance: $tolerance\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Lm=function(e){var t=e.ref,n=e.pair,a=e.callbackRoute,i=e.hideModal,r=ur(),s=Wh(),o=c.useState(!1),l=Object(T.a)(o,2),d=l[0],u=l[1];return{removeLiquidity:function(e){var c=e.variables,o=e.useProxy,l=e.useSimpleLock;if(null!==t.current){var d,m;switch(u(!0),!0){case o:d=Em,m="removeLiquidityProxy";break;case l:d=Rm,m="removeLiquidityLockedToken";break;default:d=Dm,m="removeLiquidity"}r({query:d,variables:c}).then((function(e){if(null!==t.current&&e.data&&e.data.data){var r=[e.data.data[m].map((function(e){return me(e)}))[0]];cn.session.setItem({key:"wegldToastShown",data:!0,expires:he()().add(1,"day").unix()}),s({transactions:r,callbackRoute:a,processingMessage:"Removing liquidity",successMessage:"Liquidity removed",submittedMessage:"Remove liquidity transactions submitted",pendingPoolAddress:n.address}),u(!1),i()}})).catch((function(e){console.log("removeLiquidity",e),u(!1)}))}},removeLiquidityLoading:d}},Cm=function(e){var t,n,i=e.pair,r=e.stake,s=e.proxy,o=e.showModal,l=e.setShowModal,d=c.useRef(null),u=Object(g.c)(Br).pairsRate,b=a.denominateAmount,j=Object(g.c)(De),f=i.firstToken,h=i.secondToken,p=i.address,x=r.lpProxyTokenDetails,v=null!==(t=null===(n=s.simpleLock)||void 0===n?void 0:n.lockedToken.collection)&&void 0!==t?t:"",O=r.identifier===s.wrappedLpToken.collection,k=Boolean(x),y=Boolean(x&&x.firstTokenLockedNonce>0),w=Boolean(x&&x.secondTokenLockedNonce>0),T=Ge({pairsRate:u,pairAddress:p}),N=function(e){return function(){l(e)}},S=Lm({ref:d,callbackRoute:Nh.liquidity,pair:i,hideModal:function(){l(!1)}}),A=S.removeLiquidity,F=S.removeLiquidityLoading,P=No(),D=P.getLiquidityPosition,R=P.liquidityPositionData,E=P.liquidityPositionError,L=Object(dt.a)().shape({amount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),K)})).test("minAmount","Must select an amount",(function(e){return!e||new je.a(e).isGreaterThan(0)})).test("funds","Insufficient funds",(function(e){if(void 0!==e){var t=new je.a(e);return new je.a(Z).comparedTo(t)>=0}return!0}))}),C=Object(qt.a)({initialValues:{amount:""},validationSchema:L,onSubmit:function(e){var t,n,a={pairAddress:p,tolerance:parseFloat(j)/100,liquidity:ot(X||e.amount,K)};k?t={inputTokens:{tokenID:r.identifier,nonce:null!==(n=r.nonce)&&void 0!==n?n:0,amount:a.liquidity},attributes:r.attributes,tolerance:a.tolerance}:t=O?Object(m.a)(Object(m.a)({},a),{},{wrappedLpTokenID:r.identifier,wrappedLpTokenNonce:r.nonce}):Object(m.a)(Object(m.a)({},a),{},{liquidityTokenID:r.identifier});A({variables:t,useProxy:O,useSimpleLock:k})}}),I=C.setFieldValue,q=C.handleSubmit,M=C.values,B=C.handleChange,_=C.handleBlur,V=C.errors,W=C.touched,z=M.amount,H=Pm({tokenAmount:z,stake:r,onMaxClick:function(e){I("amount",e,!0)}}),Y=H.MaxBtn,G=H.AvailableBalance,Z=H.balance,K=H.denomination,X=H.completeMaxBalance,Q=Eh(z,500);c.useEffect((function(){Ce(z)&&D({variables:{liquidityAmount:ot(X||z,K),pairAddress:p}})}),[Q]);var J=O&&f.identifier===s.assetToken.identifier?s.lockedAssetToken.collection:f.identifier,ee=O&&h.identifier===s.assetToken.identifier?s.lockedAssetToken.collection:h.identifier,te=function(e){return e===U?$:e},ne=Yh(s),ae=ne.fetchLkEsdtsUnlockDate,ie=ne.isUnlockableNow;return c.useEffect((function(){ae(x)}),[x]),Object(pt.jsx)(Pc.a,{show:o,backdrop:!0,onHide:N(!1),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("form",{onSubmit:q,noValidate:!0,ref:d,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mt-n2 lead",children:[Object(pt.jsx)("div",{className:"pool-icon mr-2",children:Object(pt.jsx)(vv,{pair:i,size:"lg"})}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap","data-testid":"removeLiqModalTitle",children:[Object(pt.jsx)("span",{children:"Remove liquidity from"}),"\xa0",Object(pt.jsx)(Ov,{pair:i}),"\xa0",Object(pt.jsx)("span",{children:"Pool"})]})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-spacer",children:[Object(pt.jsx)(G,{}),Object(pt.jsx)("span",{className:"ml-1",children:"LP tokens"})]}),Object(pt.jsxs)("div",{className:"form-group text-left mb-0",children:[Object(pt.jsx)("label",{htmlFor:"amount",className:"mb-2 line-height-1",children:"Amount"}),Object(pt.jsxs)("div",{className:"token-amount-input-max ".concat("amount"in V&&"amount"in W?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,name:"amount","data-testid":"amountInput",placeholder:"Amount",value:z,handleChange:B,handleBlur:_}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:Object(pt.jsx)(Y,{})})]}),"amount"in V&&"amount"in W&&Object(pt.jsx)("div",{className:"invalid-feedback mt-2","data-testid":"invalidAmount",children:V.amount})]}),Object(pt.jsx)("div",{className:"my-spacer",children:Object(pt.jsx)(ap,{balance:Z,amount:z,onChange:function(e){I("amount",e,!0)}})}),Object(pt.jsx)("div",{className:"mb-2 text-left",children:"You will receive"}),Object(pt.jsx)("div",{className:"card mb-4 border-transparent",children:Object(pt.jsxs)("div",{className:"card-body",children:[Object(pt.jsx)(ju,{closeModal:function(){l(!1)}}),Object(pt.jsxs)("div",{className:"d-flex flex-column flex-sm-row justify-content-sm-between mb-2",children:[Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:y&&!ie(J)?v:te(J)})}),Object(pt.jsxs)("div",{className:"d-flex flex-row flex-wrap align-items-center",children:[Object(pt.jsxs)("div",{className:"d-sm-none",children:[R&&!E?b({amount:R.firstTokenAmount,denomination:f.decimals,addCommas:!0}):"...","\xa0"]}),Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(Rt,{token:te(J)})}),Object(pt.jsxs)("small",{className:"text-secondary",children:["1 ",Object(pt.jsx)(Rt,{token:te(J)})," = ",T?Object(pt.jsx)(pt.Fragment,{children:Ye(T.firstTokenPrice)}):"..."," ",Object(pt.jsx)(Rt,{token:te(ee)})]})]})]}),Object(pt.jsx)("div",{className:"ml-3 d-none d-sm-flex align-items-sm-center","data-testid":"receivedFirstTokenAmount",children:R&&!E?b({amount:R.firstTokenAmount,denomination:f.decimals,addCommas:!0}):"..."})]}),Object(pt.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:w&&!ie(ee)?v:te(ee)})}),Object(pt.jsxs)("div",{className:"d-flex flex-row flex-wrap align-items-center",children:[Object(pt.jsxs)("div",{className:"d-sm-none",children:[R&&!E?b({amount:R.secondTokenAmount,denomination:h.decimals,addCommas:!0}):"...","\xa0"]}),Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(Rt,{token:te(ee)})}),Object(pt.jsxs)("small",{className:"text-secondary",children:["1 ",Object(pt.jsx)(Rt,{token:te(ee)})," = ",T?Object(pt.jsx)(pt.Fragment,{children:Ye(T.secondTokenPrice)}):"..."," ",Object(pt.jsx)(Rt,{token:te(J)})]})]})]}),Object(pt.jsx)("div",{className:"ml-3 d-none d-sm-flex align-items-sm-center",children:R&&!E?b({amount:R.secondTokenAmount,denomination:h.decimals,addCommas:!0}):"..."})]})]})}),Object(pt.jsxs)("div",{className:"mx-n2 d-flex flex-wrap-reverse flex-sm-nowrap justify-content-between align-items-center",children:[Object(pt.jsx)("button",{className:"btn btn-lg btn-dark btn-block mx-2 mt-2",onClick:N(!1),children:"Cancel"}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary btn-block mx-2 mt-2",disabled:F,children:F?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"- Remove Liquidity"})})]}),i&&Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign ",Object(pt.jsx)("strong",{children:"1 transaction"}),Object(pt.jsx)(wo,{info:Object(pt.jsx)("div",{className:"text-left",children:"Remove liquidity"})})]})]})})})},Im=function(e){var t=e.pair,n=e.stake,a=e.proxy,i=c.useState(!1),r=Object(T.a)(i,2),s=r[0],o=r[1];return{RemoveBtn:c.useMemo((function(){return Object(pt.jsx)("button",{className:"btn btn-sm btn-dark",onClick:function(e){o(!0),e.stopPropagation()},children:"-\xa0Remove"})}),[]),RemoveModal:c.useMemo((function(){return s?Object(pt.jsx)(Cm,{pair:t,stake:n,proxy:a,showModal:s,setShowModal:function(e){o(e)}}):null}),[t,n,a,s])}},qm=function(e){var t,n=e.pool,a=e.stake,i=e.proxy,r=Im({pair:n.pair,stake:a,proxy:i}),s=r.RemoveBtn,c=r.RemoveModal,o=a.identifier===i.wrappedLpToken.collection,l=a.identifier===(null===(t=i.simpleLock)||void 0===t?void 0:t.lpProxyToken.collection),d=o||l,u=d&&a.nonce?" #".concat(a.nonce):"",m=d?"You received locked LP tokens because you used locked tokens when adding liquidity.":"You received normal LP tokens.",b="".concat(null===a||void 0===a?void 0:a.nonce),j="".concat(a.identifier,"-").concat(nt(b)),f=a.lpProxyTokenDetails?{lpProxyTokenDetails:a.lpProxyTokenDetails,proxy:i}:void 0,h=o?{identifier:j,proxy:i}:void 0;return Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center flex-fill",children:[Object(pt.jsx)("div",{className:"mr-2 mt-2",children:Object(pt.jsx)(Xh,{token:a.identifier})}),Object(pt.jsxs)("div",{className:"d-flex flex-fill justify-content-between flex-wrap",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center mt-2",children:Object(pt.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[Object(pt.jsx)("span",{className:"mr-2","data-testid":"poolStakeRowAmount",children:He({amount:a.balance,denomination:a.lpToken.decimals,addCommas:!0})}),Object(pt.jsx)("div",{className:"mr-1",children:Object(pt.jsx)(yt,{token:a.lpToken.identifier})}),""!==u&&Object(pt.jsx)("div",{className:"mr-1",children:u}),Object(pt.jsx)(Ro,{staticText:m,delayedUnlockDates:f,delayedUnlockSchedule:h})]})}),Object(pt.jsx)("div",{className:"mt-2",children:s})]})]}),c]})},Mm=function(e){var t=e.pool,n=e.w100,a=Object(g.c)(Br);return Ze({farmsRate:a.farmsRate,lpToken:t.pair.liquidityPoolToken.identifier})?Object(pt.jsx)(w.b,{className:"btn btn-sm btn-success ".concat(n?"w-100":""),to:"".concat(Nh.farms,"?stakeInFarm=".concat(t.pair.address)),children:"Stake"}):null},Bm=function(e){var t=e.pool,n=e.proxy,i=c.useRef(null),r=Object(g.c)(Br),s=Object(g.c)(Ee),o=Rh({pendingPoolAddress:t.pair.address,ref:i}).preventActions,l=a.denominateAmount,d=c.useState(!1),u=Object(T.a)(d,2),m=u[0],b=u[1],j=Ge({pairsRate:r.pairsRate,pairAddress:t.pair.address}),f=po({pool:t,pairRate:j}),h=f.displaySharePercentage,p=f.bNaccountTotalLp,x=f.accountTotalLpUsdValue,v=f.firstTokenTotalStake,O=f.secondTokenTotalStake,k=function(e){var n=e.pool,a=n.pair.firstToken.identifier,i=n.pair.secondToken.identifier,r="".concat(Nh.liquidityAdd,"?firstToken=").concat(a,"&secondToken=").concat(i),c="Experimental"!==(null===j||void 0===j?void 0:j.type)||(null===s||void 0===s?void 0:s.includes(t.pair.address));return o||"Inactive"===(null===j||void 0===j?void 0:j.state)||!c?Object(pt.jsx)("button",{className:"btn btn-primary btn-block mt-3",disabled:!0,children:"+ Add more liquidity"}):Object(pt.jsx)(w.b,{className:"btn btn-primary btn-block mt-3",to:r,children:"+ Add more liquidity"})},y="pool-type ".concat(t.pair.type.toLowerCase());return Object(pt.jsxs)("div",{ref:i,className:"pool card ".concat(y),children:[Object(pt.jsxs)("div",{className:"card-header d-flex align-items-center justify-content-between ".concat(m?"":"rounded"),onClick:function(){b((function(e){return!e}))},style:{cursor:"pointer"},children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(vv,{pair:t.pair,size:"lg"})}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("div",{className:"font-weight-bold",children:Object(pt.jsx)(Ov,{pair:t.pair})}),Object(pt.jsx)("small",{className:"d-flex flex-wrap",children:o?"...":Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex",children:[l({amount:p.toString(10),denomination:t.pair.liquidityPoolToken.decimals,addCommas:!0}),Object(pt.jsx)("span",{className:"mx-1 d-flex",children:"LP"})]}),Object(pt.jsxs)("span",{className:"text-secondary",children:["\u2248 $",x]})]})})]})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("div",{className:"d-none d-md-flex",children:Object(pt.jsx)(Mm,{pool:t})}),Object(pt.jsx)("div",{className:"ml-1 text-right",style:{minWidth:"1rem"},children:Object(pt.jsx)(up,{expanded:m})})]})]}),m&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsxs)("div",{className:"card-body py-4",children:[Object(pt.jsx)(Fm,{amount:l({amount:v,denomination:t.pair.firstToken.decimals,addCommas:!0}),token:t.pair.firstToken,preventActions:o}),Object(pt.jsx)(Fm,{amount:l({amount:O,denomination:t.pair.secondToken.decimals,addCommas:!0}),token:t.pair.secondToken,preventActions:o}),Object(pt.jsx)(Fm,{amount:"".concat(h,"%"),preventActions:o}),Object(pt.jsx)(k,{pool:t}),Object(pt.jsx)("div",{className:"d-flex d-md-none mt-2",children:Object(pt.jsx)(Mm,{pool:t,w100:!0})})]}),Object(pt.jsx)("div",{className:"card-footer pt-3 pb-2",children:o?Object(pt.jsx)($p,{title:"Waiting for transactions to be processed"}):Object(pt.jsx)(pt.Fragment,{children:t.stake.map((function(e,a){return Object(pt.jsx)("div",{className:"mb-3",children:Object(pt.jsx)(qm,{pool:t,stake:e,proxy:n})},"".concat(e.lpToken.identifier).concat(a))}))})})]})]})},Um="liquidity",$m=function(){Dr();var e=Object(O.p)().isLoggedIn,t=Mh(),n=t.isAccountLoading,a=t.accountLoadingError,i=Sm({withoutFiltering:!0,cacheKey:Um}),r=i.pairs,s=i.proxy,c=i.pairsFetched,o=i.pairsFetchError,l=wm({pairs:r,proxy:s,cacheKey:"".concat(Um,"-account-pools")}),d=l.accountPools,u=l.accountPoolsError,m=l.accountPoolsLoading,b=!c||m||n&&e,j=o||u||a,f=!b&&!j;return Object(pt.jsx)(pt.Fragment,{children:e?Object(pt.jsxs)(km,{children:[b&&!j&&Object(pt.jsx)($p,{}),j&&Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load my liquidity"}),f&&Object(pt.jsx)(pt.Fragment,{children:Object(pt.jsxs)("div",{className:"px-3 px-sm-spacer pb-3 pb-sm-spacer pt-3",children:[Object(pt.jsx)("div",{className:"mb-3",children:Object(pt.jsx)(fc,{})}),d.length>0&&s?Object(pt.jsx)("div",{className:"pools mb-3",children:d.map((function(e,t){return Object(pt.jsx)("div",{className:"".concat(t+1===d.length?"":"mb-3"),children:Object(pt.jsx)(Bm,{pool:e,proxy:s})},e.pair.address)}))}):Object(pt.jsx)("div",{className:"border rounded bg-light px-2 py-5 text-center text-secondary mb-3",children:Object(pt.jsxs)("div",{className:"py-3",children:["No current liquidity pools",Object(pt.jsx)("br",{}),Object(pt.jsx)(w.b,{className:"link-style",to:Nh.liquidityAdd,children:"Add Liquidity"})]})}),Object(pt.jsx)(Jh,{msg:Object(pt.jsx)("div",{children:"If you staked your LP tokens in a farm, unstake them to see them here."}),icon:Om.faExclamationCircle})]})})]}):Object(pt.jsx)(y.a,{to:Nh.liquidityActivePools})})},_m=function(){var e=Object(O.p)().isLoggedIn,t=Mh(),n=t.isAccountLoading,a=t.accountLoadingError,i=Sm({cacheKey:"activePools"}),r=i.pairs,s=i.pairsFetchError,c=i.pairsFetched,l=dr(),d=l.fetchTokenDetails,u=l.tokenDetailsLoading,m=l.tokenDetailsError;o.a.useEffect((function(){if(r.length>0){var e=Me({pairs:r}).options.map((function(e){return e.value}));d(e)}}),[r]);var b=!c||n&&e||u,j=s||a||m,f=!b&&!j;return Object(pt.jsxs)(km,{children:[b&&!j&&Object(pt.jsx)($p,{}),j&&Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load active pools"}),f&&Object(pt.jsxs)("div",{className:"px-3 px-sm-spacer pb-3 pb-sm-spacer pt-3",children:[Object(pt.jsx)("div",{className:"mb-3",children:Object(pt.jsx)(fc,{})}),Object(pt.jsx)("div",{className:"pools mb-3",children:r.map((function(e,t){return Object(pt.jsx)("div",{className:"".concat(t+1===r.length?"":"mb-3"),children:Object(pt.jsx)(Qh,{pool:e})},e.address)}))}),e&&Object(pt.jsx)(w.b,{className:"btn btn-primary btn-lg w-100 mb-4",to:Nh.liquidityCreatePool,children:"Create New Pool"}),Object(pt.jsx)(Jh,{msg:Object(pt.jsxs)("div",{children:[Object(pt.jsx)("div",{className:"font-weight-bold",children:"Reminder:"}),"After you add liquidity you can stake your LP tokens in a farm to earn more rewards!"]}),icon:S.faCoins})]})]})},Vm=function(e){var t=e.pairs,n=e.proxy,a=e.decodedLockedTokens,i=[];if(!n||!n.simpleLock)return i;var r=n.assetToken,s=n.simpleLock;t.filter((function(e){var t=e.address;return n.intermediatedPairs.includes(t)})).forEach((function(e){var t,a;e.firstToken.identifier===r.identifier&&(t=Object(m.a)(Object(m.a)(Object(m.a)({},e.firstToken),n.lockedAssetToken),{},{identifier:n.lockedAssetToken.collection})),e.secondToken.identifier===r.identifier&&(a=Object(m.a)(Object(m.a)(Object(m.a)({},e.secondToken),n.lockedAssetToken),{},{identifier:n.lockedAssetToken.collection}));var s=Object(m.a)(Object(m.a)({},n.wrappedLpToken),{},{identifier:n.wrappedLpToken.collection});i.push(Object(m.a)(Object(m.a)(Object(m.a)(Object(m.a)({},e),t?{firstToken:t}:{}),a?{secondToken:a}:{}),{},{liquidityPoolToken:s,hasLockedMex:!0}))}));var c=[],o=function(e){var t=[];return e.forEach((function(e){if(null!==e&&void 0!==e&&e.lockedTokenDetails){var n=e.lockedTokenDetails.originalTokenID;t.find((function(e){return e.originalTokenID===n}))||t.push({originalTokenID:n,lockedToken:e})}})),t}(a);return t.filter((function(e){var t=e.address;return s.intermediatedPairs.includes(t)})).forEach((function(e){var t,n,a=Object(m.a)(Object(m.a)({},s.lpProxyToken),{},{identifier:s.lpProxyToken.collection}),i=o.find((function(t){return t.originalTokenID===e.firstToken.identifier})),r=o.find((function(t){return t.originalTokenID===e.secondToken.identifier}));i&&(t=Object(m.a)(Object(m.a)(Object(m.a)({},e.firstToken),i),{},{identifier:null===i||void 0===i?void 0:i.lockedToken.collection}),c.push(Object(m.a)(Object(m.a)({},e),{},{firstToken:t,liquidityPoolToken:a,hasLockedToken:!0}))),r&&(n=Object(m.a)(Object(m.a)(Object(m.a)({},e.secondToken),r),{},{identifier:null===r||void 0===r?void 0:r.lockedToken.collection}),c.push(Object(m.a)(Object(m.a)({},e),{},{secondToken:n,liquidityPoolToken:a,hasLockedToken:!0}))),t&&n&&c.push(Object(m.a)(Object(m.a)({},e),{},{firstToken:t,secondToken:n,liquidityPoolToken:a,hasLockedToken:!0}))})),[].concat(i,c)},Wm=n(203),zm=Object(p.gql)(nm||(nm=Object(Bi.a)(["\n  query ($amount: String!, $tokenInID: String!, $pairAddress: String!) {\n    getEquivalent(\n      amount: $amount\n      tokenInID: $tokenInID\n      pairAddress: $pairAddress\n    )\n  }\n"]))),Hm=function(e){var t,n=e.name,a=e.parentToken,i=e.lockedTokens,r=e.lockedMexTokens,s=e.onChange,c=o.a.useState([]),l=Object(T.a)(c,2),d=l[0],u=l[1],m=(null===a||void 0===a?void 0:a.identifier)===V,b=Boolean(null===a||void 0===a?void 0:a.lockedTokenDetails),j=m||b,f=o.a.useState(),h=Object(T.a)(f,2),p=h[0],x=h[1];o.a.useEffect((function(){!function(){j||u([]);var e=i.filter((function(e){return e.collection===(null===a||void 0===a?void 0:a.identifier)})).map((function(e){return{label:e.collection,value:e.identifier,token:e}})),t=(null===a||void 0===a?void 0:a.identifier)===V?r.map((function(e){return{label:e.collection,value:e.identifier,token:e}})):[];u([].concat(Object(ke.a)(e),Object(ke.a)(t)))}()}),[a,i,r,j]),o.a.useEffect((function(){j&&(p||x(1===d.length?d[0]:void 0),function(){if(p)if((null===a||void 0===a?void 0:a.identifier)===p.label){var e=d.find((function(e){return e.value===p.value}));e&&x(e)}else x(1===d.length?d[0]:void 0)}())}),[a,d,j]);var v=_e(p),O=(m?r:i).find((function(e){return e.identifier===v})),k=null!==(t=null===O||void 0===O?void 0:O.balance)&&void 0!==t?t:"0",g=null===O||void 0===O?void 0:O.nonce,y=b?null===O||void 0===O?void 0:O.attributes:void 0;return{LockedTokensSelect:o.a.useMemo((function(){return j?Object(pt.jsx)("div",{className:"token-select mt-2",children:Object(pt.jsx)(Ct.TokenSelect,{id:n,name:n,value:p,options:d,isSearchable:!1,fullSize:!0,hasLockedMEX:m,hasLockedTokens:b,onChange:function(e){x(e),s&&s()}})}):null}),[j,n,p,d]),balance:k,nonce:j?g:void 0,attributes:j?y:void 0,visible:j,validationError:"Please select a locked token"}},Ym=function(e,t){var n=Object(c.useRef)(e);Object(c.useEffect)((function(){n.current=e}),[e]),Object(c.useEffect)((function(){if(null!==t){var e=setInterval((function(){return n.current()}),t);return function(){return clearInterval(e)}}}),[t])},Gm=n(159),Zm=Object(p.gql)(am||(am=Object(Bi.a)(["\n  query (\n    $pairAddress: String!\n    $tokens: [InputTokenModel!]!\n    $tolerance: Float!\n  ) {\n    addLiquidity(\n      pairAddress: $pairAddress\n      tokens: $tokens\n      tolerance: $tolerance\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Km=Object(p.gql)(im||(im=Object(Bi.a)(["\n  query (\n    $pairAddress: String!\n    $tokens: [InputTokenModel!]!\n    $tolerance: Float!\n  ) {\n    addLiquidityBatch(\n      pairAddress: $pairAddress\n      tokens: $tokens\n      tolerance: $tolerance\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Xm=Object(p.gql)(rm||(rm=Object(Bi.a)(["\n  query (\n    $inputTokens: [InputTokenModel!]!\n    $tolerance: Float!\n    $pairAddress: String!\n  ) {\n    addLiquidityLockedTokenBatch(\n      pairAddress: $pairAddress\n      inputTokens: $inputTokens\n      tolerance: $tolerance\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Qm=Object(p.gql)(sm||(sm=Object(Bi.a)(["\n  query (\n    $pairAddress: String!\n    $tokens: [InputTokenModel!]!\n    $tolerance: Float!\n  ) {\n    addLiquidityProxy(\n      pairAddress: $pairAddress\n      tokens: $tokens\n      tolerance: $tolerance\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Jm=Object(p.gql)(cm||(cm=Object(Bi.a)(["\n  query (\n    $pairAddress: String!\n    $tokens: [InputTokenModel!]!\n    $tolerance: Float!\n  ) {\n    addLiquidityProxyBatch(\n      pairAddress: $pairAddress\n      tokens: $tokens\n      tolerance: $tolerance\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),eb=function(e){var t=e.ref,n=e.callbackRoute,a=ur(),i=Wh(),r=o.a.useState(!1),s=Object(T.a)(r,2),c=s[0],l=s[1],d=Uh();return{addLiquidityBatch:function(e){var r=e.variables,s=e.useProxy,c=e.useSimpleLock,o=e.useBatch;if(null!==t.current){var u,m;switch(l(!0),!0){case s:u=o?Jm:Qm,m=o?"addLiquidityProxyBatch":"addLiquidityProxy";break;case c:u=Xm,m="addLiquidityLockedTokenBatch";break;default:u=o?Km:Zm,m=o?"addLiquidityBatch":"addLiquidity"}a({query:u,variables:r}).then((function(e){var a;if(null!==t.current&&null!=(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data)){var s=e.data.data,u=o||c?void 0:s[m],b=o||c?s[m]:void 0,j=b?b.map((function(e){return me(e)})):u?[me(u)]:[],f=d(Object(Gm.c)(j)),h=Object(ke.a)(Array(j.length).keys()),p=Object(ke.a)(h).reverse().slice(1).reverse(),x=f?[h]:[p,[h[h.length-1]]];i({transactions:j,callbackRoute:n,grouping:h.length>1?x:void 0,processingMessage:"Adding liquidity",successMessage:"Liquidity added",submittedMessage:"Add liquidity transactions submitted",pendingPoolAddress:r.pairAddress}),l(!1)}else l(!1)})).catch((function(e){console.log("useAddLiquidityBatch",e),l(!1)}))}},addLiquidityBatchLoading:c}},tb=function(e){var t=e.amount,n=e.supply,a=e.reserve,i=new je.a(t),r=new je.a(n),s=new je.a(a);return i.multipliedBy(r).dividedToIntegerBy(s)},nb=function(e){var t=e.pair,n=e.pairRate,a=e.firstTokenId,i=e.firstAmount,r=e.secondTokenId,s=e.secondAmount,c=o.a.useState("..."),l=Object(T.a)(c,2),d=l[0],u=l[1],m=o.a.useState("..."),b=Object(T.a)(m,2),j=b[0],f=b[1];return o.a.useEffect((function(){if(t&&n&&Ce(i)&&Ce(s)){var e=n.info.totalSupply,c=n.info.reserves0,o=n.info.reserves1,l=t.firstToken.identifier===a?ot(i,t.firstToken.decimals):ot(s,t.firstToken.decimals),d=t.secondToken.identifier===r?ot(s,t.secondToken.decimals):ot(i,t.secondToken.decimals),m=tb({amount:l,supply:e,reserve:c}),b=tb({amount:d,supply:e,reserve:o}),j=je.a.min(m,b);u(function(e){var t=e.bNliquidity,n=e.totalSupply,a=new je.a(n),i=t.dividedBy(a.plus(t)).times(100),r=Ye(i.valueOf());return parseFloat(r)>0?"\u2248 ".concat(r,"%"):"0%"}({bNliquidity:j,totalSupply:e})),f("$".concat(Ye(fo({pairRate:n,firstTokenAmount:l,secondTokenAmount:d}))))}else u("..."),f("...")}),[t,n,a,i,r,s]),{poolShare:d,usdVal:j}},ab=function(e){var t,n=e.token,i=e.tokenAmount,r=e.lockedTokenBalance,s=e.onMaxClick,c=Object(O.p)().isLoggedIn,o=a.showMax,l=a.denominateAmount,d=a.balanceMinusDust,u=n?n.value:void 0,m=u===U,b=u===V||Boolean(null===n||void 0===n||null===(t=n.token)||void 0===t?void 0:t.lockedTokenDetails),j=n?n.token.decimals:0,f=n?n.token.balance:"0",h=b?r:f,p=Ie(h)?h:"0",x=l({amount:m?d(p):p,denomination:j}),v=l({amount:m?d(p):p,denomination:j,showLastNonZeroDecimal:!0}),k=o({amount:i,balance:x}),g=function(e){e.preventDefault(),s({amount:x,completeMaxBalance:v})};return{MaxBtn:function(){return k?Object(pt.jsx)("a",{href:"/",className:"badge badge-pill badge-primary text-uppercase",onClick:g,onMouseDown:function(e){e.preventDefault()},children:"Max"}):null},AvailableBalance:function(){return b?null:Object(pt.jsxs)("div",{className:"mt-2 balance",children:[Object(pt.jsx)("span",{className:"text-secondary mr-2",children:"Balance:"}),u?Object(pt.jsx)(pt.Fragment,{children:l({amount:p,denomination:j,addCommas:!0})}):Object(pt.jsx)(pt.Fragment,{children:"-.-"})]})},balance:p,decimals:j,completeMaxBalance:c&&u?k||"0"===v?void 0:v:void 0}},ib=function(e){var t=e.value,n=e.title,a=e.className,i=void 0===a?"mb-2":a,r=e.dataTestId,s=r?{"data-testid":r}:{};return Object(pt.jsxs)("div",Object(m.a)(Object(m.a)({},s),{},{className:"d-flex align-items-center justify-content-between flex-wrap ".concat(i),children:[Object(pt.jsx)("span",{className:"mr-2 text-secondary",children:n})," ",t]}))},rb=function(e){var t=e.txToSign,n=e.withConsolidate,a=Object(pt.jsxs)("ul",{className:"pl-3",children:[Object(pt.jsx)("li",{children:"Send first token"}),Object(pt.jsx)("li",{children:"Send second token"}),n&&Object(pt.jsx)("li",{children:"Send LP to merge"}),Object(pt.jsx)("li",{children:"Add liquidity"})]}),i=n?5:4;return t>0?Object(pt.jsxs)("div",{className:"text-secondary text-center",children:["You will be asked to sign"," ",Object(pt.jsxs)("strong",{children:[2===t?i:i-1," actions"]})," in"," ",Object(pt.jsxs)("strong",{children:[t," transaction",t>1?"s":""]}),Object(pt.jsx)(wo,{info:Object(pt.jsx)("div",{className:"text-left",children:Object(pt.jsx)("ul",{className:"mb-0 pl-3",children:2===t?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("li",{children:"1st - Wrap EGLD"}),Object(pt.jsxs)("li",{children:["2nd - Add liquidity",a]})]}):Object(pt.jsx)(pt.Fragment,{children:Object(pt.jsxs)("li",{children:["Add liquidity",a]})})})})})]}):null},sb=function(e){var t,n,i=e.pairs,r=e.tokens,s=e.decodedLockedTokens,c=e.nfts,l=e.proxy,d=e.accountPools,u=a.getUniqueTokens,b=a.getActivePair,f=a.getPairAddress,p=a.getSelectedValue,x=a.denominateAmount,v=o.a.useRef(null),k=jr().runQuery,N=Object(y.i)(),S=Mh().account.balance,A=Object(O.p)().isLoggedIn,P=Object(g.c)(De),D=Object(g.c)(Br),R=Object(g.b)(),E=Ch({nfts:c,proxy:l}),L=E.lockedMexTokens,C=E.lockedMexAsEsdt,I=function(e){var t=[];return e.forEach((function(e){var n=t.find((function(t){return t.identifier===e.collection}));n?n.balance=new je.a(n.balance).plus(new je.a(e.balance)).toString(10):t.push(Object(m.a)(Object(m.a)({},e),{},{identifier:e.collection,owner:"erd1..."}))})),t}(s),q=u({pairs:i,tokens:[].concat(Object(ke.a)(r),[C],Object(ke.a)(I)),egldBalance:A?S:"0",filterWegld:!0,tokenUSDPrices:D.tokenUSDPrices}),M=q.options,B=q.pairMapping,$=eb({ref:v,callbackRoute:"".concat(Nh.liquidity)}),W=$.addLiquidityBatch,z=$.addLiquidityBatchLoading,Y=o.a.useState(0),G=Object(T.a)(Y,2),Z=G[0],K=G[1],X=o.a.useState(0),Q=Object(T.a)(X,2),J=Q[0],ee=Q[1],te=o.a.useState(),ne=Object(T.a)(te,2),ae=ne[0],ie=ne[1],re=o.a.useState(),se=Object(T.a)(re,2),ce=se[0],oe=se[1],le=o.a.useState(),de=Object(T.a)(le,2),ue=de[0],me=de[1],be=o.a.useState(""),fe=Object(T.a)(be,2),he=fe[0],pe=fe[1],xe=Object(y.h)().search,ve=new URLSearchParams(xe),Oe=Object.fromEntries(ve),ge=Oe.firstToken,ye=Oe.secondToken,we=ge?M.find((function(e){return e.value===ge})):M.find((function(e){return"EGLD"===e.value})),Te=ye?M.find((function(e){return e.value===ye})):M.find((function(e){return e.value.includes("USDC")})),Ne={firstAmount:"",firstToken:we,secondAmount:"",secondToken:Te,activePair:we&&Te?b({firstTokenId:p(we),secondTokenId:p(Te),pairs:i}):void 0},Se=Object(dt.a)().shape({firstAmount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),Lt)})).test("funds","Insufficient funds",(function(e){if(e&&$e&&Et){var t=new je.a(null!==ce&&void 0!==ce?ce:ot(e.toString(),Lt));return new je.a(Et).comparedTo(t)>=0}return!0})).test("minAmount","Minimum amount: ".concat(H),(function(e){return!e||parseFloat(e)>=H})),secondAmount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),_t)})).test("funds","Insufficient funds",(function(e){if(e&&We){var t=new je.a(null!==ue&&void 0!==ue?ue:ot(e.toString(),_t));return new je.a($t).comparedTo(t)>=0}return!0})).test("token","Token required",(function(e){return Boolean(e&&Ze)})).test("minAmount","Minimum amount: ".concat(H),(function(e){return!e||parseFloat(e)>=H})),activePair:Object(dt.a)().required("Required")}),Ae=Object(qt.a)({initialValues:Ne,validationSchema:Se,onSubmit:function(e){var t=e.firstAmount,n=e.firstToken,a=e.secondAmount,r=e.secondToken,s=b({firstTokenId:p(n),secondTokenId:p(r),pairs:i});if(s){var c,o=Object(m.a)({tokenID:Ve(n),nonce:null!==it&&void 0!==it?it:0,amount:null!==ce&&void 0!==ce?ce:ot(null!==It&&void 0!==It?It:t,Lt)},rt?{attributes:rt}:{}),l=Object(m.a)({tokenID:Ve(r),nonce:null!==jt&&void 0!==jt?jt:0,amount:null!==ue&&void 0!==ue?ue:ot(null!==Vt&&void 0!==Vt?Vt:a,_t)},ft?{attributes:ft}:{}),d=[o,l];if(ae)d.push({tokenID:ae.identifier,nonce:null!==(c=ae.nonce)&&void 0!==c?c:0,amount:ae.balance});var u=Boolean(s.hasLockedMex),j=Boolean(s.hasLockedToken),f=o.tokenID===U||l.tokenID===U,h=Object(m.a)(Object(m.a)({pairAddress:s.address},j?{inputTokens:d}:{tokens:d}),{},{tolerance:parseFloat(P)/100});Me({values:Object(m.a)(Object(m.a)({},e),{},{firstAmount:"",secondAmount:""})}),me(void 0),oe(void 0),K((function(e){return e+1})),W({variables:h,useProxy:u,useSimpleLock:j,useBatch:f})}}}),Fe=Ae.setFieldValue,Pe=Ae.handleSubmit,Re=Ae.errors,Ee=Ae.touched,Le=Ae.values,Ie=Ae.handleBlur,qe=Ae.handleChange,Me=Ae.resetForm,Be=Ae.validateForm,Ue=Le.activePair,$e=Le.firstToken,_e=Le.firstAmount,We=Le.secondToken,ze=Le.secondAmount,He=p($e),Ze=p(We),Ke=et({token:null===$e||void 0===$e?void 0:$e.token,tokenUSDPrices:D.tokenUSDPrices}),Xe=et({token:null===We||void 0===We?void 0:We.token,tokenUSDPrices:D.tokenUSDPrices}),Qe=Rh({pendingPoolAddress:null!==(t=null===Ue||void 0===Ue?void 0:Ue.address)&&void 0!==t?t:"",ref:v}).preventActions,Je=Ge({pairsRate:D.pairsRate,pairAddress:null!==(n=null===Ue||void 0===Ue?void 0:Ue.address)&&void 0!==n?n:""}),tt=Hm({name:"firstLockedTokensSelect",parentToken:null===$e||void 0===$e?void 0:$e.token,lockedTokens:s,lockedMexTokens:L,onChange:function(){setTimeout((function(){Be()}))}}),nt=tt.LockedTokensSelect,at=tt.balance,it=tt.nonce,rt=tt.attributes,st=tt.visible,lt=tt.validationError,ut=Hm({name:"secondLockedTokensSelect",parentToken:null===We||void 0===We?void 0:We.token,lockedTokens:s,lockedMexTokens:L,onChange:function(){setTimeout((function(){Be()}))}}),mt=ut.LockedTokensSelect,bt=ut.balance,jt=ut.nonce,ft=ut.attributes,ht=ut.visible,xt=o.a.useState(!1),vt=Object(T.a)(xt,2),Ot=vt[0],kt=vt[1],gt=o.a.useState(!1),yt=Object(T.a)(gt,2),wt=yt[0],Tt=yt[1],Nt=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a,i,r,s,c,o,l,d,u,m,b,j,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.amount,a=t.token,i=t.activePair,r=t.fieldToUpdate,!Ce(n)){e.next=15;break}return o=f(i),l=a.decimals,"firstAmount"===r?kt(!0):Tt(!0),d=a.identifier===V?_:null!==(s=null===(c=a.lockedTokenDetails)||void 0===c?void 0:c.originalTokenID)&&void 0!==s?s:a.identifier,e.next=8,k({query:zm,variables:{amount:ot(n,l),tokenInID:d,pairAddress:o}});case 8:u=e.sent,m=u.data,b=u.success,j=m.getEquivalent,b&&j&&(p=i.firstToken.identifier===a.identifier?i.secondToken.decimals:i.firstToken.decimals,Fe(r,x({amount:j,denomination:p})),"firstAmount"===r?(me(void 0),oe(j)):(oe(void 0),me(j))),kt(!1),Tt(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),St=function(e){Ue&&(pe("first"),Nt({amount:null!==It&&void 0!==It?It:e,activePair:Ue,token:null===$e||void 0===$e?void 0:$e.token,fieldToUpdate:"secondAmount"}))},At=function(e){Ue&&(pe("second"),Nt({amount:null!==Vt&&void 0!==Vt?Vt:e,activePair:Ue,token:null===We||void 0===We?void 0:We.token,fieldToUpdate:"firstAmount"}))},Ft=ab({token:$e,tokenAmount:_e,lockedTokenBalance:at,tokens:r,activePair:Ue,onMaxClick:function(e){var t=e.amount,n=e.completeMaxBalance;oe(void 0),Fe("firstAmount",t,!0),St(n)}}),Pt=Ft.MaxBtn,Dt=Ft.AvailableBalance,Et=Ft.balance,Lt=Ft.decimals,It=Ft.completeMaxBalance,Mt=ab({token:We,tokenAmount:ze,lockedTokenBalance:bt,tokens:r,activePair:Ue,onMaxClick:function(e){var t=e.amount,n=e.completeMaxBalance;me(void 0),Fe("secondAmount",t,!0),At(n)}}),Bt=Mt.MaxBtn,Ut=Mt.AvailableBalance,$t=Mt.balance,_t=Mt.decimals,Vt=Mt.completeMaxBalance;o.a.useEffect((function(){if(Ue)if(ee(He===U||Ze===U?2:1),Boolean(Ue.hasLockedMex)){var e=d.find((function(e){return e.pair.address===Ue.address}));if(e){var t=e.stake.find((function(e){return e.identifier===l.wrappedLpToken.collection}));ie(t)}else ie(void 0)}else ie(void 0);else ee(0)}),[Ue,He,Ze,d]);var Wt=nb({pair:Ue,pairRate:Je,firstTokenId:He,firstAmount:_e,secondTokenId:Ze,secondAmount:ze}),zt=Wt.poolShare,Ht=Wt.usdVal;o.a.useEffect((function(){if(M){var e=$e?M.find((function(e){return e.value===$e.value})):void 0;e&&Fe("firstToken",e);var t=We?M.find((function(e){return e.value===We.value})):void 0;t&&Fe("secondToken",t)}}),[r,i,c,S,D.tokenUSDPrices]);var Yt=al(Ue).lpHoldersText;o.a.useEffect((function(){var e;R(Bn(null!==(e=null===Ue||void 0===Ue?void 0:Ue.type.toLowerCase())&&void 0!==e?e:void 0))}),[Ue]);var Gt=!Le.firstAmount&&!Le.secondAmount||document.hidden?null:5e3;return Ym((function(){var e=b({firstTokenId:He,secondTokenId:Ze,pairs:i});e&&he&&Nt("first"===he?{activePair:e,amount:Le.firstAmount,token:null===$e||void 0===$e?void 0:$e.token,fieldToUpdate:"secondAmount"}:{activePair:e,amount:Le.secondAmount,token:null===We||void 0===We?void 0:We.token,fieldToUpdate:"firstAmount"})}),Gt),Object(pt.jsx)("form",{onSubmit:Pe,noValidate:!0,className:"liquidity-add-form",ref:v,children:Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"form-group mb-2 text-left",children:[Object(pt.jsx)("label",{htmlFor:"firstAmount",className:"mb-2 line-height-1",children:"\xa0"}),Object(pt.jsxs)("div",{className:"token-amount-input-select-max ".concat("firstAmount"in Re&&"firstAmount"in Ee?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{"data-testid":"firstAmountInput",required:!0,name:"firstAmount",placeholder:"Amount",value:_e,disabled:Ot,resetDebouncer:Z,handleChange:qe,handleBlur:function(e){Ie(e),he||pe("second")},tokenUsdPrice:Ke,onDebounceChange:St,onFocus:function(){"second"===he&&pe("")}}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:Object(pt.jsx)(Pt,{})}),Object(pt.jsx)(Ct.TokenSelect,{id:"firstToken",name:"firstToken",options:M,value:$e,onChange:function(e){pe("first"),Fe("firstToken",e);var t=p(e)in B?B[p(e)]:void 0,n=t&&1===t.length?t[0]:void 0,a=n?b({firstTokenId:p(e),secondTokenId:p(n),pairs:i}):void 0;Fe("secondToken",null!==n&&void 0!==n?n:void 0),Fe("secondAmount",""),oe(void 0),me(void 0),function(e){var t=e.firstTokenFromEvent,n=e.newActivePair;Fe("activePair",n),n&&(Le.firstAmount?Nt({amount:Le.firstAmount,token:t,activePair:n,fieldToUpdate:"secondAmount"}):Le.secondAmount&&Nt({amount:Le.secondAmount,token:null===We||void 0===We?void 0:We.token,activePair:n,fieldToUpdate:"firstAmount"}))}({firstTokenFromEvent:e.token,newActivePair:a})},isSearchable:!1,onBlur:Ie})]}),nt,Object(pt.jsxs)("small",{className:"d-flex flex-column flex-sm-row",children:["firstAmount"in Re&&"firstAmount"in Ee&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-2","data-testid":"invalidFirstAmount",children:st&&void 0===it?Object(pt.jsx)(pt.Fragment,{children:lt}):Object(pt.jsx)(pt.Fragment,{children:Re.firstAmount})}),Object(pt.jsx)("div",{className:"d-flex ml-0 ml-sm-auto line-height-1","data-testid":"firstTokenBalance",children:Object(pt.jsx)(Dt,{})})]})]}),Object(pt.jsx)("div",{className:"d-flex justify-content-center",children:Object(pt.jsx)("span",{className:"btn btn-circle mb-n1",style:{zIndex:4,marginTop:"-0.2rem"},children:Object(pt.jsx)(F.a,{icon:Wm.faPlus,size:"sm"})})}),Object(pt.jsxs)("div",{className:"form-group mb-spacer text-left",children:[Object(pt.jsx)("label",{htmlFor:"secondAmount",className:"mb-2 line-height-1",children:"\xa0"}),Object(pt.jsxs)("div",{className:"token-amount-input-select-max ".concat("secondAmount"in Re&&"secondAmount"in Ee?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{"data-testid":"secondAmountInput",required:!0,name:"secondAmount",placeholder:"Amount",value:ze,disabled:wt,resetDebouncer:Z,handleChange:qe,handleBlur:function(e){Ie(e),he||pe("first")},tokenUsdPrice:Xe,onDebounceChange:At,onFocus:function(){"first"===he&&pe("")}}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:Object(pt.jsx)(Bt,{})}),Object(pt.jsx)(Ct.TokenSelect,{id:"secondToken",name:"secondToken",options:$e&&$e.value in B?B[$e.value]:[],value:We,onChange:function(e){Fe("secondToken",e),function(e){var t=b({firstTokenId:He,secondTokenId:e.identifier,pairs:i});Fe("activePair",t),t&&(pe("second"),Le.secondAmount&&Ee.secondAmount?Nt({amount:Le.secondAmount,token:e,activePair:t,fieldToUpdate:"firstAmount"}):Le.firstAmount&&Nt({amount:Le.firstAmount,token:null===$e||void 0===$e?void 0:$e.token,activePair:t,fieldToUpdate:"secondAmount"}))}(e.token)},isSearchable:!1,onBlur:Ie},"".concat(We))]}),mt,Object(pt.jsxs)("small",{className:"d-flex flex-column flex-sm-row",children:["secondAmount"in Re&&"secondAmount"in Ee&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-2","data-testid":"invalidSecondAmount",children:ht&&void 0===jt?Object(pt.jsx)(pt.Fragment,{children:lt}):Object(pt.jsx)(pt.Fragment,{children:Re.secondAmount})}),Object(pt.jsx)("div",{className:"d-flex ml-0 ml-sm-auto line-height-1","data-testid":"secondTokenBalance",children:Object(pt.jsx)(Ut,{})})]})]}),Object(pt.jsx)("div",{className:"card mb-spacer border-transparent",children:Object(pt.jsxs)("div",{className:"card-body",children:[Object(pt.jsx)(ju,{}),Object(pt.jsx)(ib,{title:Ue?Object(pt.jsxs)("div",{className:"d-flex",children:[Object(pt.jsx)(Rt,{token:Ue.firstToken.identifier}),Object(pt.jsx)("span",{className:"mx-1",children:"per"}),Object(pt.jsx)(Rt,{token:Ue.secondToken.identifier})]}):Object(pt.jsx)(pt.Fragment,{children:"..."}),value:Je?Ye(Je.secondTokenPrice):"..."}),Object(pt.jsx)(ib,{title:Ue?Object(pt.jsxs)("div",{className:"d-flex",children:[Object(pt.jsx)(Rt,{token:Ue.secondToken.identifier}),Object(pt.jsx)("span",{className:"mx-1",children:"per"}),Object(pt.jsx)(Rt,{token:Ue.firstToken.identifier})]}):Object(pt.jsx)(pt.Fragment,{children:"..."}),value:Je?Ye(Je.firstTokenPrice):"..."}),Object(pt.jsx)(ib,{title:Object(pt.jsx)(pt.Fragment,{children:"USD\xa0Value"}),value:Ht,dataTestId:"usdValue"}),Object(pt.jsx)(ib,{title:Object(pt.jsx)(pt.Fragment,{children:"Pool\xa0Share\xa0"}),value:zt})]})}),Object(pt.jsx)("small",{className:"alert alert-warning p-4 mb-spacer",role:"alert",children:"By adding liquidity you'll earn ".concat(Yt,"% of all trades on this pair\n          proportional to your share of the pool. Fees are added to the pool in\n          real time and can be claimed by withdrawing your liquidity.")}),ae&&Object(pt.jsx)("div",{className:"mb-spacer",children:Object(pt.jsx)(Sl,{})}),A?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg mb-3",id:"addLiquidityBtn",disabled:z||Qe,children:z?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Add Liquidity"})}),Object(pt.jsx)(rb,{txToSign:J,withConsolidate:Boolean(ae)}),Object(pt.jsx)(w.b,{className:"link-style py-0 d-flex align-self-center mt-3",to:"",onClick:function(e){e.preventDefault(),N(-1)},children:"Back"})]}):Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"mb-3 text-center",children:Object(pt.jsx)(kO,{large:!0})}),Object(pt.jsx)(rb,{txToSign:J,withConsolidate:Boolean(ae)})]})]})})},cb="liquidityAdd",ob=function(){var e=Object(O.p)().isLoggedIn,t=Mh(),n=t.isAccountLoading,i=t.accountLoadingError,r=Object(g.c)(rd),s=a.getUniqueTokens;Dr();var o=c.useState(),l=Object(T.a)(o,2),d=l[0],u=l[1],m=Sm({preserveOriginalPairs:!0,cacheKey:cb}),b=m.pairs,f=m.proxy,p=m.pairsFetched,x=m.pairsFetchError,v=fr(cb),k=v.decodeLockedTokens,y=v.decodedLockedTokens,w=v.lockedTokensDecodedLoading,N=v.lockedTokensDecodedError,S=qr(cb),A=S.fetchTokens,F=S.tokens,P=S.tokensLoading,D=S.tokensError,R=Cr(cb),E=R.fetchNfts,L=R.nfts,C=R.nftsLoading,I=R.nftsError,q=dr(),M=q.fetchTokenDetails,B=q.tokenDetailsLoading,U=q.tokenDetailsError,$=lr(),_=$.fetchNftDetails,W=$.nftDetailsLoading,z=$.nftDetailsError,H=wm({pairs:b,proxy:f,cacheKey:"".concat(cb,"-account-pools")}),Y=H.accountPools,G=H.accountPoolsError,Z=H.accountPoolsLoading,K=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,a,i,r,c,o,l,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(f&&b.length>0)){e.next=19;break}return n=s({pairs:b}).options.map((function(e){return e.value})),a=null===(t=f.simpleLock)||void 0===t?void 0:t.lockedToken.collection,i=a?[a,V]:[V],A(n),M(n),_(i),e.next=9,E(i);case 9:if(r=e.sent,c=r.data,!r.success){e.next=19;break}return e.next=15,k({nfts:c,lockedTokenId:a});case 15:o=e.sent,l=o.data,o.success&&(d=Vm({pairs:b,proxy:f,decodedLockedTokens:l}),u([].concat(Object(ke.a)(b),Object(ke.a)(d))));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c.useEffect((function(){K()}),[b,f,r]);var X=n&&e||!p||Z||P||C||B||W||w,Q=x||G||D||I||i||U||z||N,J=!X&&!Q;return Object(pt.jsxs)(km,{children:[X&&!Q&&Object(pt.jsx)($p,{}),Q&&Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load add liquidity page"}),J&&f&&d&&Object(pt.jsxs)("div",{className:"liquidity-add p-3 px-sm-spacer pb-sm-spacer",children:[Object(pt.jsx)(fc,{}),Object(pt.jsx)(sb,{pairs:d,tokens:F,decodedLockedTokens:y,nfts:L,proxy:f,accountPools:Y})]})]})},lb=Object(p.gql)(om||(om=Object(Bi.a)(["\n  query ($firstTokenID: String!, $secondTokenID: String!) {\n    createPair(firstTokenID: $firstTokenID, secondTokenID: $secondTokenID) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),db=Object(p.gql)(lm||(lm=Object(Bi.a)(["\n  query (\n    $firstTokenID: String\n    $secondTokenID: String\n    $issuedLpToken: Boolean\n  ) {\n    pairs(\n      firstTokenID: $firstTokenID\n      secondTokenID: $secondTokenID\n      issuedLpToken: $issuedLpToken\n    ) {\n      address\n      firstToken {\n        name\n        identifier\n        decimals\n      }\n      secondToken {\n        name\n        identifier\n        decimals\n      }\n      info {\n        totalSupply\n      }\n    }\n  }\n"]))),ub=Object(p.gql)(dm||(dm=Object(Bi.a)(["\n  query (\n    $firstTokenID: String\n    $secondTokenID: String\n    $issuedLpToken: Boolean\n  ) {\n    pairs(\n      firstTokenID: $firstTokenID\n      secondTokenID: $secondTokenID\n      issuedLpToken: $issuedLpToken\n    ) {\n      address\n      firstToken {\n        name\n        identifier\n        decimals\n      }\n      secondToken {\n        name\n        identifier\n        decimals\n      }\n      liquidityPoolToken {\n        name\n        identifier\n        decimals\n      }\n      info {\n        totalSupply\n      }\n    }\n  }\n"]))),mb=Object(p.gql)(um||(um=Object(Bi.a)(["\n  query ($address: String, $issuedLpToken: Boolean) {\n    pairs(address: $address, issuedLpToken: $issuedLpToken) {\n      address\n      firstToken {\n        name\n        identifier\n        decimals\n      }\n      secondToken {\n        name\n        identifier\n        decimals\n      }\n      liquidityPoolToken {\n        name\n        identifier\n        decimals\n      }\n      info {\n        totalSupply\n      }\n    }\n  }\n"]))),bb=function(){var e=or().getTokenRoles;return function(){var t=Object(j.a)(h.a.mark((function t(n){var a,i,r,s,c,o,l,d,u,b,j;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.address,i=n.totalSupply,r=n.firstToken,s=n.secondToken,c=n.lpToken){t.next=4;break}return o={step:"2_issueLP",pairAddress:a,firstToken:r,secondToken:s},t.abrupt("return",o);case 4:if(!c){t.next=23;break}return l={pairAddress:a,firstToken:r,secondToken:s,lpTokenName:c.name,lpTokenTicker:c.identifier,lpTokenIdentifier:c.identifier},d=Object(m.a)({step:"3_setRoles"},l),t.next=9,e(c.identifier);case 9:if(u=t.sent,b=u.data,u.success){t.next=14;break}return t.abrupt("return",d);case 14:if(b.find((function(e){return e.address===a}))){t.next=20;break}return t.abrupt("return",d);case 20:if("0"!==i){t.next=23;break}return j=Object(m.a)({step:"4_addInitialLiquidity"},l),t.abrupt("return",j);case 23:return t.abrupt("return",void 0);case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},jb=function(e){var t=Object(g.c)(id),n=c.useState(!1),a=Object(T.a)(n,2),i=a[0],r=a[1];return c.useEffect((function(){var n=t.find((function(t){return t.processingMessage===e}));r(Boolean(n))}),[t]),i},fb=Se((function(e){return e.liquidityCreatePool}),(function(e){return e.steps})),hb=Object(p.gql)(mm||(mm=Object(Bi.a)(["\n  query ($lpTokenTicker: String!, $lpTokenName: String!, $address: String!) {\n    issueLPToken(\n      lpTokenTicker: $lpTokenTicker\n      lpTokenName: $lpTokenName\n      address: $address\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),pb="Issuing LP Token",xb=function(e){var t,n,a,i=e.steps,r=c.useRef(null),s=c.useRef(),o=Wh(),l=Ab().saveSteps,d=jb(pb),u=jr(),b=u.runQuery,f=u.running,p=i.firstToken&&i.secondToken?"".concat(i.firstToken.split("-")[0]).concat(i.secondToken.split("-")[0],"LP"):"",x=i.firstToken&&i.secondToken?"".concat(i.firstToken.split("-")[0]).concat(i.secondToken.split("-")[0]):"",v={pairAddress:null!==(t=i.pairAddress)&&void 0!==t?t:"",lpTokenName:p,lpTokenTicker:x},O=Object(dt.a)().shape({pairAddress:Object(dt.b)().required("Required"),lpTokenName:Object(dt.b)().required("Required").matches(/^[a-zA-Z0-9]*$/,"Alphanumeric characters only").test("validLength","Must be between 3 - 20 characters long",(function(e){return Boolean(e&&e.length>=3&&e.length<=20)})),lpTokenTicker:Object(dt.b)().required("Required").matches(/^[A-Z0-9]*$/,"Alphanumeric uppercase characters only").test("validLength","Must be between 3 - 10 characters long",(function(e){return Boolean(e&&e.length>=3&&e.length<=10)}))}),k=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a,r,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lpTokenName,a=t.lpTokenTicker,r=Object(m.a)(Object(m.a)({},i),{},{lpTokenName:n,lpTokenTicker:a}),l(r),e.next=5,b({query:hb,variables:{lpTokenName:n,lpTokenTicker:a,address:i.pairAddress}});case 5:s=e.sent,c=s.data,s.success&&o({transactions:[me(c.issueLPToken)],callbackRoute:Nh.liquidityCreatePool,processingMessage:pb,successMessage:"LP Token Issued",submittedMessage:"Issue LP Token transaction submitted"});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=Object(qt.a)({initialValues:v,validationSchema:O,onSubmit:k}),y=g.handleSubmit,w=g.errors,T=g.touched,N=g.handleBlur,S=g.handleChange,A=g.values,F=g.setFieldValue,P=A.lpTokenName,D=A.lpTokenTicker,R=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({query:db,variables:{firstTokenID:i.firstToken,secondTokenID:i.secondToken,issuedLpToken:!1}});case 2:t=e.sent,n=t.data,a=t.success,(r=a?n.pairs:[]).length>0&&(l(Object(m.a)(Object(m.a)({},i),{},{pairAddress:r[0].address,step:"2_issueLP"})),F("pairAddress",r[0].address));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c.useEffect((function(){return i.pairAddress||(s.current=setInterval((function(){R()}),3e3)),function(){clearInterval(s.current)}}),[i]);var E=void 0===i.pairAddress;return Object(pt.jsxs)(pt.Fragment,{children:[E&&Object(pt.jsx)($p,{}),!E&&Object(pt.jsx)("form",{ref:r,onSubmit:y,noValidate:!0,children:Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("label",{className:"mb-2 line-height-1 text-secondary",children:"Pool Address"}),Object(pt.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center border rounded px-3 py-2 mb-4",children:[Object(pt.jsx)(fO,{text:null!==(n=null===i||void 0===i?void 0:i.pairAddress)&&void 0!==n?n:""}),Object(pt.jsx)("div",{className:"border-left ml-3 pl-3 text-secondary",children:Object(pt.jsx)(wp,{text:null!==(a=null===i||void 0===i?void 0:i.pairAddress)&&void 0!==a?a:"",className:"align-end-flex"})})]}),Object(pt.jsxs)("div",{className:"form-group mb-spacer text-left",children:[Object(pt.jsx)("label",{htmlFor:"lpTokenName",className:"mb-2 line-height-1 text-secondary",children:"LP Token Name"}),Object(pt.jsx)("div",{className:"token-name-input token-amount-input ".concat("lpTokenName"in w&&"lpTokenName"in T?"is-invalid":""),children:Object(pt.jsx)("div",{className:"amount-holder w-100",children:Object(pt.jsx)("input",{required:!0,className:"amount-input form-control",style:{fontSize:"16px"},"data-testid":"lpTokenNameInput",name:"lpTokenName",placeholder:"i.e `Elrond eGLD`",value:P,onChange:S,onBlur:N,autoComplete:"off",disabled:d})})}),Object(pt.jsx)("small",{className:"d-flex mt-2",children:"lpTokenName"in w&&"lpTokenName"in T&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-0","data-testid":"invalidLpTokenName",children:w.lpTokenName})})]}),Object(pt.jsxs)("div",{className:"form-group mb-spacer text-left",children:[Object(pt.jsx)("label",{htmlFor:"lpTokenTicker",className:"mb-2 line-height-1 text-secondary",children:"LP Token Ticker"}),Object(pt.jsx)("div",{className:"token-name-input token-amount-input ".concat("lpTokenTicker"in w&&"lpTokenTicker"in T?"is-invalid":""),children:Object(pt.jsx)("div",{className:"amount-holder w-100",children:Object(pt.jsx)("input",{required:!0,className:"amount-input form-control",style:{fontSize:"16px"},"data-testid":"lpTokenTickerInput",name:"lpTokenTicker",placeholder:"i.e `EGLD`",value:D,onChange:S,onBlur:N,autoComplete:"off",disabled:d})})}),Object(pt.jsx)("small",{className:"d-flex mt-2",children:"lpTokenTicker"in w&&"lpTokenTicker"in T&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-0","data-testid":"invalidLpTokenTicker",children:w.lpTokenTicker})})]}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary btn-block",disabled:d||f,children:d||f?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Create LP Token"})})]})})]})},vb=Object(p.gql)(bm||(bm=Object(Bi.a)(["\n  query ($address: String!) {\n    setLocalRoles(address: $address) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Ob="Setting LP Token Roles",kb=function(e){var t,n,a,i=e.steps,r=c.useRef(null),s=c.useRef(),o=Wh(),l=Ab().saveSteps,d=jb(Ob),u=jr(),b=u.runQuery,f=u.running,p={lpTokenIdentifier:null!==(t=i.lpTokenIdentifier)&&void 0!==t?t:""},x=Object(dt.a)().shape({lpTokenIdentifier:Object(dt.b)().required("Required")}),v=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({query:vb,variables:{address:i.pairAddress}});case 2:t=e.sent,n=t.data,t.success&&o({transactions:[me(n.setLocalRoles)],callbackRoute:Nh.liquidityCreatePool,processingMessage:Ob,successMessage:"LP Token Roles Set",submittedMessage:"Set LP Token Roles transaction submitted"});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=Object(qt.a)({initialValues:p,validationSchema:x,onSubmit:v}),k=O.values,g=O.handleSubmit,y=O.setFieldValue,w=k.lpTokenIdentifier,T=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({query:mb,variables:{address:i.pairAddress,issuedLpToken:!0}});case 2:t=e.sent,n=t.data,a=t.success,(r=a?n.pairs:[]).length>0&&(l(Object(m.a)(Object(m.a)({},i),{},{lpTokenName:r[0].liquidityPoolToken.name,lpTokenTicker:r[0].liquidityPoolToken.identifier,lpTokenIdentifier:r[0].liquidityPoolToken.identifier,step:"3_setRoles"})),y("lpTokenIdentifier",r[0].liquidityPoolToken.identifier));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c.useEffect((function(){return i.lpTokenIdentifier||(s.current=setInterval((function(){T()}),3e3)),function(){clearInterval(s.current)}}),[i]);var N=void 0===i.lpTokenIdentifier;return Object(pt.jsxs)(pt.Fragment,{children:[N&&Object(pt.jsx)($p,{}),!N&&Object(pt.jsx)("form",{ref:r,onSubmit:g,noValidate:!0,children:Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex flex-column align-items-center mb-spacer text-left",children:[Object(pt.jsx)("div",{className:"token-icon-xl pool-icon mb-3",children:Object(pt.jsx)("div",{className:"token-symbol",children:Object(pt.jsx)(fm,{})})}),Object(pt.jsx)("label",{className:"mb-2 line-height-1 text-secondary",children:"LP Token"}),Object(pt.jsx)("div",{children:""!==w?w:"..."})]}),Object(pt.jsx)("label",{className:"mb-2 line-height-1 text-secondary",children:"Pool Address"}),Object(pt.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center border rounded px-3 py-2 mb-4",children:[Object(pt.jsx)(fO,{text:null!==(n=null===i||void 0===i?void 0:i.pairAddress)&&void 0!==n?n:""}),Object(pt.jsx)("div",{className:"border-left ml-3 pl-3 text-secondary",children:Object(pt.jsx)(wp,{text:null!==(a=null===i||void 0===i?void 0:i.pairAddress)&&void 0!==a?a:"",className:"align-end-flex"})})]}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary btn-block",disabled:d||f,children:d||f?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Set LP Token Roles"})})]})})]})},gb=n(660),yb=Object(p.gql)(jm||(jm=Object(Bi.a)(["\n  query (\n    $pairAddress: String!\n    $tokens: [InputTokenModel!]!\n    $tolerance: Float!\n  ) {\n    addInitialLiquidityBatch(\n      pairAddress: $pairAddress\n      tokens: $tokens\n      tolerance: $tolerance\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),wb=function(e){var t=e.token,n=e.tokenAmount,i=e.onMaxClick,r=a.showMax,s=a.denominateAmount,c=t.decimals,o=t.balance,l=s({amount:o,denomination:c}),d=s({amount:o,denomination:c,showLastNonZeroDecimal:!0}),u=r({amount:n,balance:l}),m=function(e){e.preventDefault(),i(l)};return{MaxBtn:function(){return u?Object(pt.jsx)("a",{href:"/",className:"badge badge-pill badge-primary text-uppercase",onClick:m,onMouseDown:function(e){e.preventDefault()},children:"Max"}):null},AvailableBalance:function(){return Object(pt.jsx)("div",{"data-testid":"availableBalance-".concat(t.identifier),children:s({amount:o,denomination:c,addCommas:!0})})},balance:o,decimals:c,completeMaxBalance:u||"0"===d?void 0:d}},Tb="Adding Initial Liquidity",Nb={balance:"0",decimals:18,name:"Empty Token",identifier:"EMT-123123",ticker:"EMT",owner:"erd1..."},Sb=function(e){var t,n,a,i,r,s,c,l,d,u,b=e.steps,f=o.a.useRef(null),p=Wh(),x=Ab().saveSteps,v=or().getUserTokens,O=jb(Tb),k=jr(),y=k.runQuery,w=k.running,N=Object(g.c)(De),S=Object(g.c)($r),A=o.a.useState(Nb),P=Object(T.a)(A,2),D=P[0],R=P[1],E=o.a.useState("..."),L=Object(T.a)(E,2),C=L[0],I=L[1],q=o.a.useState(),M=Object(T.a)(q,2),B=M[0],U=M[1],$=o.a.useState(Nb),_=Object(T.a)($,2),V=_[0],W=_[1],z=o.a.useState("..."),Y=Object(T.a)(z,2),G=Y[0],Z=Y[1],K=o.a.useState(),X=Object(T.a)(K,2),Q=X[0],J=X[1],ee=o.a.useState(),te=Object(T.a)(ee,2),ne=te[0],ae=te[1],ie=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,a,i,r,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.firstToken||!b.secondToken){e.next=9;break}return t=[b.firstToken,b.secondToken],e.next=4,v({identifiers:t});case 4:n=e.sent,a=n.success,i=n.data,a&&((s=(r=i).find((function(e){return e.identifier===b.firstToken})))&&R(s),(c=r.find((function(e){return e.identifier===b.secondToken})))&&W(c)),ae(a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o.a.useEffect((function(){ie()}),[b]);var re=Object(dt.a)().shape({firstTokenAmount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),ge)})).test("funds","Insufficient funds",(function(e){if(e&&D&&ye){var t=new je.a(ot(e.toString(),ge));return new je.a(ye).comparedTo(t)>=0}return!0})).test("minAmount","Minimum amount: ".concat(H),(function(e){return!e||parseFloat(e)>=H})),secondTokenAmount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),ge)})).test("funds","Insufficient funds",(function(e){if(e&&V&&Fe){var t=new je.a(ot(e.toString(),Ae));return new je.a(Fe).comparedTo(t)>=0}return!0})).test("minAmount","Minimum amount: ".concat(H),(function(e){return!e||parseFloat(e)>=H}))}),se=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a,i,r,s,c,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.firstTokenAmount,a=t.secondTokenAmount,i=Object(m.a)(Object(m.a)({},b),{},{firstTokenAmount:null!==we&&void 0!==we?we:n,secondTokenAmount:null!==Pe&&void 0!==Pe?Pe:a}),x(i),!i.firstTokenAmount||!i.secondTokenAmount){e.next=13;break}return r={tokenID:i.firstToken,nonce:0,amount:ot(i.firstTokenAmount,ge)},s={tokenID:i.secondToken,nonce:0,amount:ot(i.secondTokenAmount,Ae)},c={pairAddress:i.pairAddress,tokens:[r,s],tolerance:parseFloat(N)/100},e.next=9,y({query:yb,variables:c});case 9:o=e.sent,l=o.data,o.success&&p({transactions:l.addInitialLiquidityBatch.map((function(e){return me(e)})),callbackRoute:Nh.liquidityCreatePool,processingMessage:Tb,successMessage:"Initial Liquidity Added",submittedMessage:"Add Intitial Liquidity transaction submitted"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=Object(qt.a)({initialValues:{firstTokenAmount:"",secondTokenAmount:""},validationSchema:re,onSubmit:se}),oe=ce.setFieldValue,le=ce.handleSubmit,de=ce.errors,ue=ce.touched,be=ce.handleBlur,fe=ce.handleChange,he=ce.values,pe=he.firstTokenAmount,xe=he.secondTokenAmount,ve=wb({token:D,tokenAmount:pe,onMaxClick:function(e){oe("firstTokenAmount",e,!0)}}),Oe=ve.MaxBtn,ke=ve.AvailableBalance,ge=ve.decimals,ye=ve.balance,we=ve.completeMaxBalance,Te=wb({token:V,tokenAmount:xe,onMaxClick:function(e){oe("secondTokenAmount",e,!0)}}),Ne=Te.MaxBtn,Se=Te.AvailableBalance,Ae=Te.decimals,Fe=Te.balance,Pe=Te.completeMaxBalance;o.a.useEffect((function(){if(pe&&xe){var e=new je.a(pe),t=new je.a(xe),n=t.dividedBy(e).toString(10),a=e.dividedBy(t).toString(10),i=S.find((function(e){return e.identifier===b.firstToken})),r=i&&"0"!==i.price?i.price:void 0,s=S.find((function(e){return e.identifier===b.secondToken})),c=s?s.price:void 0;if(r)U(new je.a(r).toString(10));else if(c){var o=new je.a(c).times(new je.a(n)).toString(10);U(o)}if(c)J(new je.a(c).toString(10));else if(r){var l=new je.a(r).times(new je.a(a)).toString(10);J(l)}I(Ye(n)),Z(Ye(a))}else I("..."),Z("..."),U(void 0),J(void 0)}),[D,pe,V,xe,S]);var Re=void 0===ne,Ee=!1===ne,Le=!Re&&!Ee;return Object(pt.jsxs)(pt.Fragment,{children:[Re&&!Ee&&Object(pt.jsx)($p,{}),Ee&&Object(pt.jsx)("div",{className:"my-4",children:Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load page"})}),Le&&Object(pt.jsx)("form",{ref:f,onSubmit:le,noValidate:!0,children:Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("label",{className:"mb-2 line-height-1 text-secondary",children:"Pool Address"}),Object(pt.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center border rounded px-3 py-2 mb-3",children:[Object(pt.jsx)(fO,{text:null!==(t=null===b||void 0===b?void 0:b.pairAddress)&&void 0!==t?t:""}),Object(pt.jsx)("div",{className:"border-left ml-3 pl-3 text-secondary",children:Object(pt.jsx)(wp,{text:null!==(n=null===b||void 0===b?void 0:b.pairAddress)&&void 0!==n?n:"",className:"align-end-flex"})})]}),Object(pt.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center border rounded px-3 py-2 mb-4",children:[Object(pt.jsx)("div",{children:"LP Token Roles"}),Object(pt.jsx)("div",{children:Object(pt.jsx)(F.a,{icon:gb.faCheckCircle,className:"text-success"})})]}),Object(pt.jsxs)("div",{className:"form-group mb-3 text-left",children:[Object(pt.jsxs)("label",{htmlFor:"firstTokenAmount",className:"mb-2 line-height-1 text-secondary",children:[Object(pt.jsx)(Rt,{token:null!==(a=b.firstToken)&&void 0!==a?a:""})," Initial Liquidity"]}),Object(pt.jsxs)("div",{className:"token-name-input token-amount-input ".concat("firstTokenAmount"in de&&"firstTokenAmount"in ue?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,name:"firstTokenAmount","data-testid":"firstTokenAmountInput",placeholder:"Amount",value:pe,disabled:O,handleChange:fe,handleBlur:be}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:!O&&Object(pt.jsx)(Oe,{})}),Object(pt.jsx)("div",{className:"ml-2",children:Object(pt.jsx)(Xh,{token:null!==(i=b.firstToken)&&void 0!==i?i:""})})]}),Object(pt.jsxs)("small",{className:"d-flex flex-column flex-sm-row my-2",children:["firstTokenAmount"in de&&"firstTokenAmount"in ue&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-0 mb-2 mb-sm-0","data-testid":"invalidFirstTokenAmount",children:de.firstTokenAmount}),Object(pt.jsxs)("div",{className:"d-flex ml-0 ml-sm-auto line-height-1 balance","data-testid":"firstTokenBalance",children:[Object(pt.jsx)("span",{className:"text-secondary mr-2",children:"Balance:"}),Object(pt.jsx)(ke,{})]})]})]}),Object(pt.jsxs)("div",{className:"form-group mb-4 text-left",children:[Object(pt.jsxs)("label",{htmlFor:"secondTokenAmount",className:"mb-2 line-height-1 text-secondary",children:[Object(pt.jsx)(Rt,{token:null!==(r=b.secondToken)&&void 0!==r?r:""})," Initial Liquidity"]}),Object(pt.jsxs)("div",{className:"token-name-input token-amount-input ".concat("secondTokenAmount"in de&&"secondTokenAmount"in ue?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,name:"secondTokenAmount","data-testid":"secondTokenAmountInput",placeholder:"Amount",value:xe,disabled:O,handleChange:fe,handleBlur:be}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:!O&&Object(pt.jsx)(Ne,{})}),Object(pt.jsx)("div",{className:"ml-2",children:Object(pt.jsx)(Xh,{token:null!==(s=b.secondToken)&&void 0!==s?s:""})})]}),Object(pt.jsxs)("small",{className:"d-flex flex-column flex-sm-row my-2",children:["secondTokenAmount"in de&&"secondTokenAmount"in ue&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-0 mb-2 mb-sm-0","data-testid":"invalidSecondTokenAmount",children:de.secondTokenAmount}),Object(pt.jsxs)("div",{className:"d-flex ml-0 ml-sm-auto line-height-1 balance","data-testid":"secondTokenBalance",children:[Object(pt.jsx)("span",{className:"text-secondary mr-2",children:"Balance:"}),Object(pt.jsx)(Se,{})]})]})]}),Object(pt.jsx)("div",{className:"mb-2 line-height-1 text-secondary",children:"Exchange Rate"}),Object(pt.jsx)("div",{className:"card mb-4 border-transparent",children:Object(pt.jsxs)("div",{className:"card-body p-3",children:[Object(pt.jsxs)("div",{className:"mb-1",children:["1 ",Object(pt.jsx)(Rt,{token:null!==(c=b.firstToken)&&void 0!==c?c:""})," ="," ",C," ",Object(pt.jsx)(Rt,{token:null!==(l=b.secondToken)&&void 0!==l?l:""})," ",B&&Object(pt.jsxs)("span",{className:"text-secondary ml-1",children:["($",Ye(B,2),")"]})]}),Object(pt.jsxs)("div",{children:["1 ",Object(pt.jsx)(Rt,{token:null!==(d=b.secondToken)&&void 0!==d?d:""})," ="," ",G," ",Object(pt.jsx)(Rt,{token:null!==(u=b.firstToken)&&void 0!==u?u:""})," ",Q&&Object(pt.jsxs)("span",{className:"text-secondary ml-1",children:["($",Ye(Q,2),")"]})]})]})}),Object(pt.jsxs)("small",{className:"alert border-warning text-warning align-items-center d-flex p-3 mb-4",role:"alert",children:[Object(pt.jsx)(F.a,{icon:ao.faInfoCircle,size:"lg",className:"alert-icon mr-2"}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("strong",{className:"mb-1",children:"You are the first Liquidity Provider"}),Object(pt.jsx)("p",{className:"mb-1",children:"The ratio of tokens you add will set the price of this pool."}),Object(pt.jsx)("p",{className:"mb-1",children:"Once you are happy with the rate, continue with adding the initial liquidity."})]})]}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary btn-block",disabled:O||w,children:O||w?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Add Initial Liqudity"})})]})})]})},Ab=function(){var e=Object(g.b)(),t=Mh().address,n=Object(g.c)(fb),a=function(n){k.d.local.setItem({key:"".concat(t,".create.pool"),data:n,expires:he()().add(1,"day").unix()}),e(ha({steps:n}))},i=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Boolean(n.firstToken&&n.secondToken)){e.next=3;break}return e.abrupt("return");case 3:e.t0=t,e.next=e.t0===Db?6:e.t0===pb?8:e.t0===Ob?10:e.t0===Tb?12:14;break;case 6:return a(Object(m.a)(Object(m.a)({},n),{},{step:"2_issueLP"})),e.abrupt("break",14);case 8:return a(Object(m.a)(Object(m.a)({},n),{},{step:"3_setRoles"})),e.abrupt("break",14);case 10:return a(Object(m.a)(Object(m.a)({},n),{},{step:"4_addInitialLiquidity"})),e.abrupt("break",14);case 12:return a(Object(m.a)(Object(m.a)({},n),{},{step:"5_done"})),e.abrupt("break",14);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{updateCreatePoolSteps:i,saveSteps:a}},Fb=function(){var e=or().getUserTokens,t=Mh().address,n=dr().fetchTokenDetails,a=o.a.useState(),i=Object(T.a)(a,2),r=i[0],s=i[1],c=o.a.useState([]),l=Object(T.a)(c,2),d=l[0],u=l[1],m=function(){var a=Object(j.a)(h.a.mark((function a(){var i,r,c;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e({size:50});case 2:if(i=a.sent,r=i.data,!i.success){a.next=12;break}return c=[],r.forEach((function(e){var n,a=e.owner===t,i="mainnet"!==te.id||Boolean(null===(n=e.assets)||void 0===n?void 0:n.svgUrl);a&&i&&c.push({label:e.identifier,value:e.identifier,token:e})})),n(c.map((function(e){return e.value}))),u(c),s(!0),a.abrupt("return");case 12:s(!1);case 13:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return{fetchFirstSelectOptions:m,firstSelectOptionsFetched:r,firstSelectOptions:d}},Pb=function(){var e=or(),t=e.getUserTokens,n=e.getTokenDetails,a=c.useState(),i=Object(T.a)(a,2),r=i[0],s=i[1],o=c.useState([]),l=Object(T.a)(o,2),d=l[0],u=l[1],m=function(){var e=Object(j.a)(h.a.mark((function e(){var a,i,r,c,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[$],e.next=3,n(a);case 3:if(i=e.sent,r=i.data,!i.success){e.next=18;break}return e.next=9,t({identifiers:a});case 9:if(c=e.sent,o=c.data,!c.success){e.next=18;break}return l=[],r.forEach((function(e){var t;l.push({label:e.identifier,value:e.identifier,token:null!==(t=o.find((function(t){return t.identifier===e.identifier})))&&void 0!==t?t:e})})),u(l),s(!0),e.abrupt("return");case 18:s(!1);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{fetchSecondSelectOptions:m,secondSelectOptionsFetched:r,secondSelectOptions:d}},Db="Creating Pair",Rb=function(e){var t=e.steps,n=o.a.useRef(null),a=Wh(),i=Ab().saveSteps,r=jb(Db),s=jr(),c=s.runQuery,l=s.running,d=Mh().account.balance,u=Object(g.c)(rd),b=bb(),f=o.a.useState(),p=Object(T.a)(f,2),x=p[0],v=p[1],O=Fb(),k=O.fetchFirstSelectOptions,y=O.firstSelectOptionsFetched,N=O.firstSelectOptions,S=Pb(),A=S.fetchSecondSelectOptions,P=S.secondSelectOptionsFetched,D=S.secondSelectOptions;o.a.useEffect((function(){k(),A()}),[u]),o.a.useEffect((function(){1===N.length&&I("firstToken",N[0])}),[N,t]),o.a.useEffect((function(){I("secondToken",null!==t&&void 0!==t&&t.secondToken?D.find((function(e){return e.value===t.secondToken})):D.find((function(e){return e.value===$})))}),[D,t]),o.a.useEffect((function(){I("formBalance",d)}),[d]);var R={firstToken:void 0,secondToken:void 0,pairExists:"true",formBalance:"0"},E=Object(dt.a)().shape({firstToken:Object(dt.a)().required("Required").test("funds","Insufficient funds",(function(e){var t,n;return new je.a(null!==(t=null===e||void 0===e||null===(n=e.token)||void 0===n?void 0:n.balance)&&void 0!==t?t:"0").isGreaterThan(0)})).test("minAmount","Minimum amount: ".concat(H),(function(e){if(null!==e&&void 0!==e&&e.token){var t=He({amount:e.token.balance,denomination:e.token.decimals});return parseFloat(t)>=H}return!0})),secondToken:Object(dt.a)().required("Required").test("funds","Insufficient funds",(function(e){var t,n;return new je.a(null!==(t=null===e||void 0===e||null===(n=e.token)||void 0===n?void 0:n.balance)&&void 0!==t?t:"0").isGreaterThan(0)})).test("minAmount","Minimum amount: ".concat(H),(function(e){if(null!==e&&void 0!==e&&e.token){var t=He({amount:e.token.balance,denomination:e.token.decimals});return parseFloat(t)>=H}return!0})),pairExists:Object(dt.b)().test("pairShouldNotExist","Pool already exists",(function(e){return"false"===e})),formBalance:Object(dt.b)().test("funds","You need to have a minimum of 0.5 EGLD for the creation transactions.",(function(e){return new je.a(He({amount:"..."!==e?e:"0",denomination:M})).isGreaterThan(.5)}))}),L=function(){var e=Object(j.a)(h.a.mark((function e(n){var r,s,o,l,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.firstToken,s=n.secondToken,o=Object(m.a)(Object(m.a)({},t),{},{firstToken:null===r||void 0===r?void 0:r.value,secondToken:null===s||void 0===s?void 0:s.value}),i(o),e.next=5,c({query:lb,variables:{firstTokenID:o.firstToken,secondTokenID:o.secondToken}});case 5:l=e.sent,d=l.data,l.success&&a({transactions:[me(d.createPair)],callbackRoute:Nh.liquidityCreatePool,processingMessage:Db,successMessage:"Pair Created",submittedMessage:"Create Pair transaction submitted"});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(qt.a)({initialValues:R,validationSchema:E,onSubmit:L}),I=C.setFieldValue,q=C.handleSubmit,B=C.errors,U=C.touched,_=C.handleBlur,V=C.values,W=V.firstToken,z=V.secondToken,Y=function(){var e=Object(j.a)(h.a.mark((function e(){var t,a,i,r,s,o,l,d,u,j,f,p,x,O;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={firstTokenID:null===W||void 0===W?void 0:W.value,secondTokenID:null===z||void 0===z?void 0:z.value},e.next=3,c({query:db,variables:Object(m.a)(Object(m.a)({},t),{},{issuedLpToken:!1})});case 3:return a=e.sent,i=a.data,r=a.success,e.next=8,c({query:ub,variables:Object(m.a)(Object(m.a)({},t),{},{issuedLpToken:!0})});case 8:if(s=e.sent,o=s.data,l=s.success,null!==n.current){e.next=13;break}return e.abrupt("return");case 13:if(r&&i.pairs.length>0&&(d=null===(f=i.pairs[0])||void 0===f?void 0:f.address,u=null===(p=i.pairs[0])||void 0===p?void 0:p.info.totalSupply),l&&o.pairs.length>0&&(x=o.pairs[0],d=x.address,u=x.info.totalSupply,j=x.liquidityPoolToken),!d){e.next=23;break}return e.next=18,b({address:d,totalSupply:u,firstToken:null===W||void 0===W?void 0:W.value,secondToken:null===z||void 0===z?void 0:z.value,lpToken:j});case 18:O=e.sent,v(O||void 0),I("pairExists","true"),e.next=25;break;case 23:I("pairExists","false"),v(void 0);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o.a.useEffect((function(){W&&z&&Y()}),[W,z]);var G=void 0===y||void 0===P,Z=!1===y||!1===P,K=!G&&!Z,X=W&&z&&("pairExists"in B||"formBalance"in B);return Object(pt.jsxs)(pt.Fragment,{children:[G&&!Z&&Object(pt.jsx)($p,{}),Z&&Object(pt.jsx)("div",{className:"my-4",children:Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load page"})}),K&&Object(pt.jsx)("form",{ref:n,onSubmit:q,noValidate:!0,children:Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"mb-spacer",children:["You must be the creator of the tokens and also brand them. Branding details can be found"," ",Object(pt.jsx)("a",{href:"https://docs.elrond.com/developers/esdt-tokens/#branding",rel:"noopener noreferrer nofollow",target:"_blank",className:"link-style",children:"here"}),"."]}),Object(pt.jsxs)("div",{className:"form-group mb-2 text-left",children:[Object(pt.jsx)("div",{className:"token-select mt-2 ".concat("firstToken"in B&&"firstToken"in U?"is-invalid":""),children:Object(pt.jsx)(Ct.TokenSelect,{id:"firstToken",name:"firstToken",value:W,options:N,className:"styled-select-container",isSearchable:!1,fullSize:!0,onChange:function(e){I("firstToken",e)},onBlur:_,disabled:r})}),Object(pt.jsx)("small",{className:"d-flex mt-2",children:"firstToken"in B&&"firstToken"in U&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-0","data-testid":"invalidFirstToken",children:B.firstToken})})]}),Object(pt.jsx)("div",{className:"d-flex justify-content-center",children:Object(pt.jsx)("span",{className:"btn btn-circle mb-2",style:{zIndex:4,marginTop:"-0.2rem"},children:Object(pt.jsx)(F.a,{icon:Wm.faPlus,size:"sm"})})}),Object(pt.jsxs)("div",{className:"form-group mb-spacer text-left",children:[Object(pt.jsx)("div",{className:"token-select mt-2 ".concat("secondToken"in B&&"secondToken"in U?"is-invalid":""),children:Object(pt.jsx)(Ct.TokenSelect,{id:"secondToken",name:"secondToken",value:z,className:"styled-select-container",options:D,isSearchable:!1,fullSize:!0,onChange:function(e){I("secondToken",e)},onBlur:_,disabled:r})}),Object(pt.jsx)("small",{className:"d-flex mt-2",children:"secondToken"in B&&"secondToken"in U&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-0","data-testid":"invalidSecondToken",children:B.secondToken})})]}),x?Object(pt.jsxs)("small",{className:"mb-3",children:["Unfinished create flow for the selected tokens has been detected. Continue from where you left off?"," ",Object(pt.jsx)(w.b,{className:"link-style py-0",to:"",onClick:function(e){e.preventDefault(),x&&i(x)},children:"Continue"})]}):Object(pt.jsx)(pt.Fragment,{children:X&&Object(pt.jsx)("small",{className:"invalid-feedback d-flex justify-content-center mt-0 mb-3",children:"pairExists"in B?B.pairExists:B.formBalance})}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary btn-block",disabled:r||l||Boolean(x),children:r||l?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Generate Pool Address"})})]})})]})},Eb=n(661),Lb=function(e){var t,n,a,i,r,s,c=e.steps,o=Ab().saveSteps,l=function(){o({step:"1_CreatePair"})};return Object(pt.jsxs)("div",{className:"d-flex flex-column pool-created",children:[Object(pt.jsxs)("div",{className:"d-flex flex-row justify-content-between mb-3 tokens-container",children:[Object(pt.jsxs)("div",{className:"d-flex flex-column align-items-center text-center",children:[Object(pt.jsx)("div",{className:"token-icon-lg mb-1",children:Object(pt.jsx)(Xh,{token:null!==(t=c.firstToken)&&void 0!==t?t:""})}),Object(pt.jsx)(Rt,{token:null!==(n=c.firstToken)&&void 0!==n?n:""})]}),Object(pt.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(pt.jsx)("div",{className:"token-symbol plus-sign mb-5 mt-2",children:Object(pt.jsx)(F.a,{icon:Eb.faPlus})}),Object(pt.jsxs)("div",{className:"d-flex flex-column align-items-center mb-4 text-center",children:[Object(pt.jsx)("div",{className:"token-icon-xl pool-icon mb-3",children:Object(pt.jsx)("div",{className:"token-symbol",children:Object(pt.jsx)(fm,{})})}),Object(pt.jsx)("label",{className:"mb-2 line-height-1 text-secondary",children:"LP Token"}),c.lpTokenIdentifier]})]}),Object(pt.jsxs)("div",{className:"d-flex flex-column align-items-center text-center",children:[Object(pt.jsx)("div",{className:"token-icon-lg mb-1",children:Object(pt.jsx)(Xh,{token:null!==(a=c.secondToken)&&void 0!==a?a:""})}),Object(pt.jsx)(Rt,{token:null!==(i=c.secondToken)&&void 0!==i?i:""})]})]}),Object(pt.jsx)("label",{className:"mb-2 line-height-1 text-secondary",children:"Pool Address"}),Object(pt.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center border rounded px-3 py-2 mb-4",children:[Object(pt.jsx)(fO,{text:null!==(r=null===c||void 0===c?void 0:c.pairAddress)&&void 0!==r?r:""}),Object(pt.jsx)("div",{className:"border-left ml-3 pl-3 text-secondary",children:Object(pt.jsx)(wp,{text:null!==(s=null===c||void 0===c?void 0:c.pairAddress)&&void 0!==s?s:"",className:"align-end-flex"})})]}),Object(pt.jsxs)("small",{className:"alert border-warning text-warning align-items-center d-flex p-3 mb-3",role:"alert",children:[Object(pt.jsx)(F.a,{icon:N.m,size:"lg",className:"alert-icon mr-2"}),"Save the pool address and contact the Elrond Team to whitelist the newly created pool and to enable Swaps. You can Add Liquidity by importing the pool in Account Settings."]}),Object(pt.jsxs)("div",{className:"mx-n2 d-flex flex-wrap-reverse flex-sm-nowrap justify-content-between align-items-center",children:[Object(pt.jsx)("button",{className:"btn btn-lg btn-dark btn-block mx-2 mt-2",onClick:l,children:"Create New"}),Object(pt.jsx)(w.b,{className:"btn btn-lg btn-primary btn-block mx-2 mt-2",onClick:l,to:Nh.home,children:"Done"})]})]})},Cb=function(){var e=Mh().address,t=Object(g.b)(),n=Object(g.c)(fb),a=o.a.useState(!1),i=Object(T.a)(a,2),r=i[0],s=i[1];return o.a.useEffect((function(){if(e){var n=cn.local.getItem("".concat(e,".create.pool"));n&&t(ha({steps:n})),s(!0)}}),[e]),r?n:void 0},Ib=function(){var e=Ab().saveSteps;c.useEffect((function(){["testing-on"].includes("testing-off")&&e({pairAddress:"erd1qqqqqqqqqqqqqpgqruq7e30d4h8wx5zk8gq3hj9npv6548sl0n4s6hy65k",step:"1_CreatePair",firstToken:"RIDE-ae50f0",secondToken:"USDC-72a225",lpTokenName:"RIDEUSDCLP",lpTokenTicker:"RIDEUSDC-2dfec9",lpTokenIdentifier:"RIDEUSDC-2dfec9"})}),[])},qb=function(){var e=Mh().address,t=Cb(),n=dr().fetchTokenDetails;return Ib(),c.useEffect((function(){null!==t&&void 0!==t&&t.firstToken&&null!==t&&void 0!==t&&t.secondToken&&n([t.firstToken,t.secondToken])}),[t]),e?Object(pt.jsx)(pt.Fragment,{children:t&&Object(pt.jsxs)("div",{className:"container mt-spacer",children:[Object(pt.jsx)("div",{className:"row mb-spacer",children:Object(pt.jsx)("div",{className:"col-12 text-center ",children:Object(pt.jsx)("h2",{children:"Create Pool"})})}),Object(pt.jsx)("div",{className:"row",children:Object(pt.jsx)("div",{className:"col-12 col-md-9 col-lg-6 mx-auto",children:Object(pt.jsx)("div",{className:"d-flex justify-content-center flex-fill",children:Object(pt.jsxs)("div",{className:"card w-100",children:[Object(pt.jsx)("div",{className:"card-header px-4 pt-4 pb-2 border-0",children:Object(pt.jsxs)("div",{className:"d-flex align-items-center flex-column justify-content-center",children:[Object(pt.jsxs)("h5",{className:"text-center mb-4 mt-2",children:["1_CreatePair"===t.step&&Object(pt.jsx)(pt.Fragment,{children:"Generate Pool Address"}),"2_issueLP"===t.step&&Object(pt.jsx)(pt.Fragment,{children:"Create LP Token"}),"3_setRoles"===t.step&&Object(pt.jsx)(pt.Fragment,{children:"Set LP Token Roles"}),"4_addInitialLiquidity"===t.step&&Object(pt.jsx)(pt.Fragment,{children:"Add Initial Liquidity"}),"5_done"===t.step&&Object(pt.jsx)(pt.Fragment,{children:"Liquidity Pool Successfully Created!"})]}),"5_done"!==t.step&&Object(pt.jsx)(gv,{totalSteps:4,currentStep:t?parseInt(t.step.split("_")[0]):1})]})}),Object(pt.jsxs)("div",{className:"card-body p-3 p-sm-spacer",children:["1_CreatePair"===t.step&&Object(pt.jsx)(Rb,{steps:t}),"2_issueLP"===t.step&&Object(pt.jsx)(xb,{steps:t}),"3_setRoles"===t.step&&Object(pt.jsx)(kb,{steps:t}),"4_addInitialLiquidity"===t.step&&Object(pt.jsx)(Sb,{steps:t}),"5_done"===t.step&&Object(pt.jsx)(Lb,{steps:t})]})]})})})})]})}):Object(pt.jsx)(y.a,{to:Nh.home})},Mb=n(664),Bb=n(663),Ub=n(1144),$b=n(76),_b=n(204),Vb=n(662),Wb=n(180),zb=function(e){var t,n,i=e.projectToken,r=e.metabondingRewards,s=e.placeholder,c=Object(g.c)(kt),o=Bh(),l="devnet"===te.id||"testnet"===te.id,d=i.split("-")[0].toUpperCase(),u=r.find((function(e){var t=e.tokenIdentifier.split("-")[0].toUpperCase();return e.tokenIdentifier.toLowerCase()===i.toLowerCase()||l&&t===d})),m=c.find((function(e){var t=e.identifier;return t===i||t===(null===u||void 0===u?void 0:u.tokenIdentifier)}));return u&&m?Object(pt.jsx)("div",{className:"mt-4 text-secondary text-center",children:Object(pt.jsxs)("div",{className:"h2 mb-0 font-weight-500 text-body",children:[Object(pt.jsx)(sp,{valueStr:a.denominateAmount({amount:u.rewards,denomination:null!==(t=null===m||void 0===m?void 0:m.decimals)&&void 0!==t?t:4,addCommas:!0})}),Object(pt.jsxs)("div",{className:"h6 mt-1 mb-0",children:[null!==(n=null===m||void 0===m?void 0:m.ticker)&&void 0!==n?n:u.tokenIdentifier," claimable"]})]})}):!o&&s?null:Object(pt.jsx)("div",{className:"mt-4 text-secondary text-center",children:Object(pt.jsxs)("div",{className:"h2 mb-0 font-weight-500 text-body",children:["0"," ",Object(pt.jsx)("div",{className:"h6 mt-1 mb-0",children:m&&m.ticker?m.ticker:d})]})})},Hb={website:Vb.faGlobe,twitter:$b.l,whitepaper:_b.c},Yb=function(e){var t=e.metabondingRewards,n=e.metabondingRewardsLoading,a=Bh(),i=(Mh().address,dr()),r=i.fetchTokenDetails,s=i.tokenDetailsLoading,o=i.tokenDetailsError;return Object(c.useEffect)((function(){if(Wb&&Wb.projects&&Wb.projects.length>0){var e=Wb.projects.filter((function(e){return e.token_identifier})).map((function(e){return e.token_identifier}));r(e)}}),[Wb]),Object(pt.jsx)("div",{className:"cards col-12 mt-3 mb-nspacer d-flex align-items-stretch justify-content-center flex-wrap",children:Wb.projects.map((function(e){"".concat(Nh.swap,"?firstToken=").concat(U,"&secondToken=").concat(e.token_identifier);return Object(pt.jsxs)("div",{className:"card-bg-light d-flex flex-column mb-spacer position-relative box ".concat(e.status),children:[Object(pt.jsx)("img",{className:"background",src:e.hero_image.path}),Object(pt.jsxs)("div",{className:"pb-2 px-3 d-flex flex-column align-items-center flex-grow-1",children:[Object(pt.jsxs)("div",{className:"position-absolute mt-n3 px-4 py-2 d-flex align-items-center text-uppercase font-weight-bold status ".concat(e.status),children:[e.status,Object(pt.jsx)("div",{className:"dots"})]}),Object(pt.jsx)("div",{className:"icon mb-2 d-inline-flex align-items-center justify-content-center",children:Object(pt.jsx)("img",{src:e.hero_icon.path})}),Object(pt.jsx)("div",{className:"name",children:e.title}),Object(pt.jsx)("div",{className:"text-secondary mt-3 mb-auto description text-center",children:e.description}),Object(pt.jsx)("div",{className:"links mt-4 pb-4 d-flex align-items-center w-100 justify-content-center",children:e.hero_social.map((function(e){return e.link&&Object(pt.jsx)("a",{href:e.link,className:"link d-flex align-items-center justify-content-center text-white ml-1 mr-1",target:"_blank",rel:"noreferrer",children:Object(pt.jsx)(F.a,{icon:Hb[e.icon]})},e.id)}))}),n||s?Object(pt.jsx)("div",{className:"mt-5 mb-3 text-secondary text-center",children:Object(pt.jsx)(ll,{show:!0})}):Object(pt.jsx)(pt.Fragment,{children:t&&"live"===e.status&&!o?Object(pt.jsx)(zb,{projectToken:e.token_identifier,metabondingRewards:t,placeholder:e.body_description}):Object(pt.jsx)(pt.Fragment,{children:a&&Object(pt.jsx)("div",{className:"mt-4  text-secondary text-center flex-grow-1 d-flex align-items-center",children:e.body_description})})}),Object(pt.jsxs)("div",{className:"my-4 d-inline-flex align-items-center justify-content-center position-relative",children:[Object(pt.jsx)("div",{children:Array.from({length:3}).map((function(t,n){return Object(pt.jsx)("div",{className:n%2?"position-relative root":"position-absolute mirror",children:Object(pt.jsx)("img",{src:e.hero_icon.path})},"brand-".concat(n))}))}),Array.from({length:4}).map((function(e,t){return Object(pt.jsx)("span",{className:"plus plus-".concat(t," position-absolute line-height-1"),children:"+"},"plus-".concat(t))}))]})]})]},e.token_identifier)}))})},Gb=n(56),Zb=function(e){var t=e.amount,n=e.usd,a=e.decimals,i=void 0===a?2:a,r=new je.a(t).times(new je.a(n));return r.isGreaterThan(0)?r.toFormat(i):"0"},Kb=["amount","usd","noAproxSign","animated","decimals"];function Xb(e){var t=e.amount,n=e.usd,a=e.noAproxSign,i=e.animated,r=e.decimals,s=Object(Gb.a)(e,Kb),c=Zb({amount:t,usd:n,decimals:r}),o=!0===a?"$":"0"===t?"= $":"\u2248 $";return Object(pt.jsx)("span",Object(m.a)(Object(m.a)({},s),{},{children:i?Object(pt.jsxs)(pt.Fragment,{children:[o,Object(pt.jsx)(sp,{valueStr:c})]}):Object(pt.jsxs)(pt.Fragment,{children:[o,c]})}))}function Qb(){var e=Object(O.p)().isLoggedIn,t=Mh().address,n=Bh(),a=or(),i=a.getAccountDelegation,r=a.getAccountDelegationLegacy,s=a.getAccountStake,c=a.getEconomics,l=o.a.useState({isStakeFetched:!1,isDelegationLegacyFetched:!1,isDelegationFetched:!1}),d=Object(T.a)(l,2),u=d[0],m=d[1],b=o.a.useState("..."),f=Object(T.a)(b,2),p=f[0],x=f[1],v=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:t=e.sent,n=t.data,t.success&&x(n.staked.toString());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.useEffect((function(){e&&n?(Promise.all([i(),s(),r()]).then((function(e){var t=Object(T.a)(e,3),n=t[0],a=t[1],i=t[2],r=Boolean(n.success),s=Boolean(a.success),c=Boolean(i.success),o=r?n.data:[],l=s?a.data:{},d=c?i.data:{};m({delegation:o,stake:l,delegationLegacy:d,isDelegationFetched:r,isStakeFetched:s,isDelegationLegacyFetched:c})})),v()):v()}),[e,n,t]),{lockedAmounts:u,globalStaked:p}}var Jb,ej=function(){var e=o.a.useRef(null),t=Object(O.p)().isLoggedIn,n=Object(g.c)($r),a=Object(c.useState)(!1),i=Object(T.a)(a,2),r=i[0],s=i[1],l=n.find((function(e){return e.identifier===U})),d=Number(null===l||void 0===l?void 0:l.price),u=Qb(),m=u.lockedAmounts,b=u.globalStaked,j=function(e){var t=new je.a(0),n=new je.a(0),a=new je.a(0),i=new je.a(0),r=e.stake,s=e.delegationLegacy,c=e.delegation,o=e.isStakeFetched,l=e.isDelegationLegacyFetched,d=e.isDelegationFetched,u=o&&l&&d;return r&&(t=new je.a(r.totalStaked?r.totalStaked:0)),s&&(a=new je.a(s.userActiveStake?s.userActiveStake:0)),c&&c.length>0&&(n=c.filter((function(e){return e.userActiveStake})).map((function(e){return e.userActiveStake})).reduce((function(e,t){return new je.a(e).plus(t)}),new je.a("0"))),r&&s&&s&&(i=t.plus(a).plus(n)),{isTotalFetched:u,userStaked:He({amount:t.toString(10),denomination:M}),userDelegation:He({amount:n.toString(10),denomination:M}),userLegacyDelegation:He({amount:a.toString(10),denomination:M}),userlLocked:He({amount:i.toString(10),denomination:M})}}(m),f=j.isTotalFetched,h=j.userStaked,p=j.userDelegation,x=j.userLegacyDelegation,v=j.userlLocked,k=function(e){var t=e.title,n=e.value,a=Boolean(d&&"..."!=n);return Object(pt.jsxs)("div",{className:"farm-stake-row mt-2",children:[Object(pt.jsxs)("span",{className:"text-secondary",children:[t,":"]})," ",Object(pt.jsx)(sp,{valueStr:n})," ",U," ",a&&Object(pt.jsx)("small",{className:"text-secondary",children:Object(pt.jsx)(Xb,{amount:n,usd:d,animated:!0})})]})},y=function(){return Object(pt.jsxs)("div",{className:"card-body py-0 bg-light",children:[!t&&Object(pt.jsx)("div",{className:"farm-stake-row mt-2 text-secondary text-center",children:"Login to see your details."}),t&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(k,{title:"Staking directly",value:f?h:"..."}),Object(pt.jsx)(k,{title:"Staking as a delegator",value:f?p:"..."}),Object(pt.jsx)(k,{title:"Staking as legacy delegator",value:f?x:"..."})]})]})};return Object(pt.jsx)(pt.Fragment,{children:Object(pt.jsx)("div",{className:"mb-4",children:Object(pt.jsxs)("div",{ref:e,className:"standard-card card farm-card",children:[Object(pt.jsx)("div",{className:"card-header p-4 d-flex align-items-center justify-content-between ".concat(r?"":"rounded"),onClick:function(){s((function(e){return!e}))},style:{cursor:"pointer"},children:Object(pt.jsxs)("div",{className:"d-flex flex-column flex-fill text-truncate",children:[Object(pt.jsx)("div",{className:"card-icon token-icon-xl pool-icon",children:Object(pt.jsx)(Xh,{token:U})}),Object(pt.jsxs)("div",{className:"text-center text-secondary mb-2 mt-4",children:["My Staked ",Object(pt.jsx)(Rt,{token:U})," ",Object(pt.jsx)(up,{expanded:r})]}),Object(pt.jsxs)("div",{className:"text-center font-weight-bold mb-3",children:[Object(pt.jsx)("div",{className:"h3 mb-0 text-truncate",children:t?Object(pt.jsx)(sp,{valueStr:f?v:"..."}):Object(pt.jsx)(pt.Fragment,{children:"0"})}),t&&Object(pt.jsx)("small",{className:"text-secondary",children:Object(pt.jsx)(Xb,{amount:f?v:"0",usd:d,animated:!0})})]}),Object(pt.jsxs)("div",{className:"text-center mb-3",children:[Object(pt.jsx)("div",{className:"text-secondary mb-1",children:"Out of"}),Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[Object(pt.jsx)("div",{className:"mr-1",children:Object(pt.jsx)(sp,{valueStr:b})}),"..."!==b&&Object(pt.jsx)("small",{className:"text-secondary",children:Object(pt.jsx)(Xb,{amount:Qe(b),decimals:0,usd:d,animated:!0})})]})]}),Object(pt.jsxs)("div",{className:"text-center text-secondary",children:["EGLD Staking allows you to capture more rewards.",Object(pt.jsx)("div",{children:Object(pt.jsx)("a",{href:"https://elrond.com/blog/metabonding-live-web3-community/",rel:"noopener noreferrer nofollow",target:"_blank",onClick:function(e){return e.stopPropagation()},children:"Learn More"})})]})]})}),r&&Object(pt.jsx)(y,{})]})})})},tj=function(e){var t=e.callbackRoute,n=or().claimMetabondingRewards,a=Wh(),i=c.useState(!1),r=Object(T.a)(i,2),s=r[0],o=r[1],l=c.useState(!1),d=Object(T.a)(l,2),u=d[0],m=d[1],b=c.useState(""),j=Object(T.a)(b,2),f=j[0],h=j[1];return{isClaimed:u,claimTokens:function(){o(!0),m(!0),n().then((function(e){var n=e.data,i=e.success;if(h(""),i)if(n.length){var r=n.map((function(e){return me(e)})),s=n[0].receiver;a({transactions:r,callbackRoute:t,processingMessage:"Claiming Tokens",successMessage:"Tokens Claimed",submittedMessage:"Token claim transaction submitted",pendingMetabondingTransactions:s})}else h("No claimable tokens"),m(!1);else h("Unable to claim tokens"),m(!1);o(!1)})).catch((function(e){console.log("claimTokens",e),h("Unable to claim tokens"),m(!1),o(!1)}))},claimErrorMessage:f,claimTokensLoading:s}};var nj,aj,ij,rj,sj=Object(p.gql)(Jb||(Jb=Object(Bi.a)(["\n  query {\n    metabondingStaking {\n      address\n      lockedAssetToken {\n        collection\n        decimals\n        name\n      }\n      lockedAssetTokenSupply\n      unbondEpochs\n    }\n    proxy {\n      address\n      wrappedLpToken {\n        collection\n        name\n        decimals\n      }\n      wrappedFarmToken {\n        collection\n        name\n        decimals\n      }\n      lockedAssetToken {\n        collection\n        name\n        decimals\n      }\n      assetToken {\n        identifier\n        name\n        decimals\n      }\n      intermediatedPairs\n      intermediatedFarms\n    }\n  }\n"]))),cj=function(e){var t=ur(),n=o.a.useState(),a=Object(T.a)(n,2),i=a[0],r=a[1],s=o.a.useState(),c=Object(T.a)(s,2),l=c[0],d=c[1];return o.a.useEffect((function(){null!==e.current&&t({query:sj,variables:{}}).then((function(t){if(null!==e.current)if(t.data&&t.data.data){var n=t.data.data;r({metabondingStaking:n.metabondingStaking,proxy:n.proxy}),d(!0)}else d(!1)})).catch((function(t){null!==e.current&&(console.log("metabondingStaking useFetchPageData",t),d(!1))}))}),[]),{pageData:i,pageDataFetched:!0===l,pageDataLoading:void 0===l,pageDataError:!1===l}},oj=Object(p.gql)(nj||(nj=Object(Bi.a)(["\n  query {\n    metabondingStakedPosition {\n      tokenNonce\n      stakedAmount\n      unstakedAmount\n      unbondEpoch\n    }\n  }\n"]))),lj=function(e){var t=e.tokenId,n=e.amount,a=e.denomination,i=e.usdPrice;return Object(pt.jsxs)("div",{className:"d-flex align-items-center mr-2 mb-2 mb-lg-0 flex-even",children:[Object(pt.jsx)("div",{className:"flex-shrink-0 mr-2",children:Object(pt.jsx)(Xh,{token:t})}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center text-secondary",children:Object(pt.jsx)(yt,{token:t})}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("div",{className:"mr-1",children:Object(pt.jsx)(sp,{valueStr:He({amount:n,denomination:a})})}),Object(pt.jsx)("small",{className:"text-secondary",children:i})]})]})]})},dj=Object(p.gql)(aj||(aj=Object(Bi.a)(["\n  query {\n    unbondMetabonding {\n      data\n      sender\n      receiver\n      gasLimit\n      gasPrice\n      chainID\n      version\n    }\n  }\n"]))),uj=function(e){var t=e.ref,n=e.callbackRoute,a=e.pendingFarmAddress,i=ur(),r=Wh(),s=o.a.useState(!1),c=Object(T.a)(s,2),l=c[0],d=c[1];return{unbondMetabonding:function(){d(!0),i({query:dj,variables:{}}).then((function(e){if(t&&null!==t.current)if(e.data&&e.data.data){var i=[me(e.data.data.unbondMetabonding)];r({transactions:i,callbackRoute:n,processingMessage:"Unbonding farm stake",successMessage:"Farm stake unbonded",submittedMessage:"Unbond farm stake transactions submitted",pendingFarmAddress:a}),d(!1)}else d(!1)})).catch((function(e){console.log("unbondFarm",e),d(!1)}))},unbondMetabondingLoading:l}},mj=function(e){var t=e.contractAddress,n=e.lockedAssetToken,a=e.position,i=e.lkMexUSDPrice,r=Object(c.useRef)(null),s=n.collection,o=n.decimals,l=a.unstakedAmount,d=a.unbondEpoch-Object(g.c)(St).epoch,u=He({amount:l,denomination:null!==o&&void 0!==o?o:0,showLastNonZeroDecimal:!0}),b=mo(null!==d&&void 0!==d?d:0),j=b.WithdrawPeriodCountdown,f=b.showCountdown,h=uj({ref:r,callbackRoute:Nh.metastaking,pendingFarmAddress:t}),p=h.unbondMetabonding,x=h.unbondMetabondingLoading,v=Object(c.useMemo)((function(){return f?Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsxs)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip-".concat(s)},e),{},{children:[Object(pt.jsx)(j,{})," left until unbonding ends."]}))},children:Object(pt.jsx)("span",{children:Object(pt.jsxs)("div",{className:"farm-action-btn btn btn-secondary disabled",onClick:function(e){e.stopPropagation()},children:[f&&Object(pt.jsx)(F.a,{icon:ac.c,className:"mr-2"}),"Unbond"]})})}):Object(pt.jsx)("button",{className:"farm-action-btn btn btn-secondary","data-testid":"unbondBtn",disabled:x,onClick:p,children:Object(pt.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:x?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Unbond"})})})}),[p,j,f,Tj,x]);return"0"===l?Object(pt.jsx)(pt.Fragment,{}):Object(pt.jsxs)("div",{ref:r,className:"d-flex flex-column flex-sm-row justify-content-sm-between farm-stake-row",children:[Object(pt.jsx)("div",{className:"d-flex flex-column flex-lg-row flex-fill pr-sm-3 mb-2 mb-sm-0",children:Object(pt.jsx)("div",{className:"d-flex flex-column flex-lg-row align-items-lg-center token-icon-normal flex-even mr-lg-2",children:Object(pt.jsx)(lj,{tokenId:s,amount:l,denomination:o,usdPrice:(null===i||void 0===i?void 0:i.price)&&Object(pt.jsx)(Xb,{animated:!0,amount:u,usd:parseFloat(null===i||void 0===i?void 0:i.price)})})})}),Object(pt.jsx)("div",{className:"d-flex flex-column justify-content-around align-items-lg-center flex-lg-row",children:v})]})},bj=function(e){var t=e.nfts,n=e.proxy,a=[],i=Ch({nfts:t,proxy:n}),r=i.lockedMexTokens,s=i.lockedMexAsEsdt;return a.push({label:n.lockedAssetToken.collection,value:n.lockedAssetToken.collection,token:s}),{selectOptions:a,lockedMexTokens:r,lockedMexTokenId:n.lockedAssetToken.collection}},jj=function(e){var t=e.nftIds,n=e.cacheKey;Dr();var a=Cr(n),i=a.fetchNfts,r=a.nfts,s=a.nftsLoading,o=a.nftsFetched;return c.useEffect((function(){i(t)}),[]),{nfts:r,farmDataLoading:s,farmDataFetched:o}},fj=function(e){var t=e.token,n=e.tokenAmount,i=e.lockedMexBalance,r=e.proxy,s=e.onMaxClick,c=a.denominateAmount,o=t?t.value:void 0,l=o===r.lockedAssetToken.collection,d=t?t.token.balance:"0",u=l?i:d,m=Ie(u)?u:"0",b=t?t.token.decimals:0,j=c({amount:m,denomination:b}),f=c({amount:m,denomination:b,showLastNonZeroDecimal:!0}),h="0"!==j&&parseFloat(n)!==parseFloat(j),p=function(e){e.preventDefault(),s(j)};return{MaxBtn:function(){return h?Object(pt.jsx)("a",{href:"/",className:"badge badge-pill badge-primary text-uppercase",onClick:p,onMouseDown:function(e){e.preventDefault()},children:"Max"}):null},AvailableBalance:function(){return l?null:Object(pt.jsxs)("div",{className:"mt-2 balance",children:[Object(pt.jsx)("span",{className:"text-secondary mr-2",children:"Balance:"}),o?Object(pt.jsx)(pt.Fragment,{children:c({amount:m,denomination:b,addCommas:!0})}):Object(pt.jsx)(pt.Fragment,{children:"-.-"})]})},balance:j,completeMaxBalance:h?void 0:f,denomination:b}},hj=Object(p.gql)(ij||(ij=Object(Bi.a)(["\n  query ($inputTokens: InputTokenModel!) {\n    stakeLockedAssetMetabonding(inputTokens: $inputTokens) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),pj=function(e){var t=e.callbackRoute,n=e.hideModal,a=ur(),i=Wh(),r=c.useState(!1),s=Object(T.a)(r,2),o=s[0],l=s[1];return{stakeLockedAssetMetabonding:function(e){var r=e.variables,s=e.contractAddress;l(!0),a({query:hj,variables:r}).then((function(e){if(e.data&&e.data.data){var a=[],r=e.data.data.stakeLockedAssetMetabonding;a.push(me(r)),i({transactions:a,callbackRoute:t,processingMessage:"Adding farm stake",successMessage:"Farm stake added",submittedMessage:"Add farm stake transactions submitted",pendingFarmAddress:s}),l(!1),n()}else l(!1)})).catch((function(e){console.log("stakeLockedAssetMetabonding",e),l(!1)}))},stakeLockedAssetMetabondingLoading:o}},xj=function(e){var t=e.contractAddress,n=e.lockedAssetToken,i=e.proxy,r=e.showModal,s=e.setShowModal,c=e.unbondEpochs,l=function(e){return function(){s(e)}},d=jj({nftIds:[n.collection],cacheKey:"metabondingStaking"}),u=d.nfts,m=d.farmDataLoading,b=d.farmDataFetched,j=bj({nfts:u,proxy:i}),f=j.selectOptions,h=j.lockedMexTokens,p=j.lockedMexTokenId,x=pj({callbackRoute:Nh.metastaking,hideModal:function(){s(!1)}}),v=x.stakeLockedAssetMetabonding,O=x.stakeLockedAssetMetabondingLoading,k={amount:"",token:1===f.length?f[0]:void 0},g=Object(dt.a)().shape({amount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),G)})).test("funds","Insufficient funds",(function(e){if(e&&C){var t=new be.BigNumber(e);return new be.BigNumber(H).comparedTo(t)>=0}return!0})).test("minimum","Cannot be zero",(function(e){return!new be.BigNumber(null!==e&&void 0!==e?e:0).isZero()})).test("token","Token required",(function(e){return Boolean(e&&I)})),token:Object(dt.a)().nullable().test("req","Required",(function(e){return null!==e}))}),y=o.a.useMemo((function(){return Object(pt.jsxs)("small",{className:"alert alert-warning align-items-center d-flex p-3 mb-spacer",children:[Object(pt.jsx)(F.a,{icon:ac.e,size:"lg",className:"alert-icon mr-2"}),"There will be a"," ",Object(pt.jsx)(Sp,{minimumFarmingEpochs:c})," unbonding period when you unstake. You will be able to withdraw your funds only after that period."]})}),[Sp,c]),w=Object(qt.a)({initialValues:k,validationSchema:g,onSubmit:function(e){var n={tokenID:a.getSelectedValue(e.token),nonce:null!==U&&void 0!==U?U:0,amount:ot(Y||e.amount,G)};v({variables:{inputTokens:n},contractAddress:t})}}),T=w.setFieldValue,N=w.handleSubmit,S=w.errors,A=w.touched,P=w.values,D=w.handleBlur,R=w.handleChange,E=w.validateForm,L=P.amount,C=P.token,I=a.getSelectedValue(C),q=It({name:"lockedMexSelect",parentTokenId:I,lockedMexTokens:h,lockedMexTokenId:p,onChange:function(){setTimeout((function(){E()}))}}),M=q.LockedMexSelect,B=q.balance,U=q.nonce,$=q.visible,_=q.validationError,V=fj({token:C,tokenAmount:L,lockedMexBalance:B,proxy:i,onMaxClick:function(e){T("amount",e,!0)}}),W=V.MaxBtn,z=V.AvailableBalance,H=V.balance,Y=V.completeMaxBalance,G=V.denomination;o.a.useEffect((function(){if(f){var e=C?f.find((function(e){return e.value===C.value&&e.token.balance!==C.token.balance})):void 0;e&&T("token",e)}}),[f]);var Z=!m&&b,K=!m&&!b;return Object(pt.jsx)(pt.Fragment,{children:Object(pt.jsxs)(Pc.a,{show:r,backdrop:!0,onHide:l(!1),className:"modal-container",animation:!1,centered:!0,children:[m&&Object(pt.jsx)($p,{}),K&&Object(pt.jsx)("div",{className:"my-4",children:Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load modal"})}),Z&&Object(pt.jsx)("form",{onSubmit:N,noValidate:!0,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mt-n2 lead",children:[Object(pt.jsx)("div",{className:"mr-2 token-icon-xl pool-icon",children:Object(pt.jsx)(Xh,{token:n.collection})}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap","data-testid":"modalTitle",children:[Object(pt.jsx)("span",{children:"Stake in"}),"\xa0",Object(pt.jsx)(Rt,{token:n.collection}),"\xa0",Object(pt.jsx)("span",{children:"farm"})]})]}),Object(pt.jsxs)("div",{className:"form-group mb-0 text-left",children:[Object(pt.jsx)("label",{htmlFor:"amount",className:"mb-2 line-height-1",children:"\xa0"}),Object(pt.jsxs)("div",{className:"token-amount-input-select-max ".concat("token"in S&&"token"in A?"is-invalid":""," ").concat("amount"in S&&"amount"in A?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,"data-testid":"amountInput",name:"amount",placeholder:"Amount",value:L,handleChange:R,handleBlur:D}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:Object(pt.jsx)(W,{})}),Object(pt.jsx)(Ct.TokenSelect,{id:"token",name:"token",options:f,value:C,onChange:function(e){T("token",e)},isSearchable:!1,onBlur:D})]}),M,Object(pt.jsxs)("small",{className:"d-flex flex-column flex-sm-row",children:["amount"in S&&"amount"in A&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-2","data-testid":"invalidAmount",children:$&&void 0===U?Object(pt.jsx)(pt.Fragment,{children:_}):Object(pt.jsx)(pt.Fragment,{children:S.amount})}),Object(pt.jsx)("div",{className:"d-flex ml-0 ml-sm-auto line-height-1",children:Object(pt.jsx)(z,{})})]})]}),Object(pt.jsx)("div",{className:"my-spacer",children:Object(pt.jsx)(ap,{balance:H,amount:L,onChange:function(e){T("amount",e,!0)}})}),y,Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("button",{className:"btn btn-dark btn-lg flex-even mr-2",onClick:l(!1),children:"Cancel"}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg flex-even ml-2",disabled:O,children:O?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Stake"})})]}),C&&Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign ",Object(pt.jsx)("strong",{children:"2 actions"})," in"," ",Object(pt.jsx)("strong",{children:"1 transaction"}),Object(pt.jsx)(wo,{info:Object(pt.jsxs)("div",{className:"text-left",children:["Stake in farm"," ",Object(pt.jsxs)("ul",{className:"pl-3 mb-0",children:[Object(pt.jsx)("li",{children:"Send token"}),Object(pt.jsx)("li",{children:"Stake in farm"})]})]})})]})]})})]})})},vj=function(e){var t=e.contractAddress,n=e.lockedAssetToken,a=e.proxy,i=e.disableBtn,r=e.unbondEpochs,s=c.useState(!1),o=Object(T.a)(s,2),l=o[0],d=o[1];return{EnterBtn:c.useMemo((function(){return Object(pt.jsx)("button",{"data-testid":"stakeBtn",className:"farm-action-btn btn btn-primary w-100",onClick:function(e){e.stopPropagation(),i||d(!0)},disabled:i,children:"Stake"})}),[i]),EnterModal:c.useMemo((function(){return l?Object(pt.jsx)(xj,{contractAddress:t,lockedAssetToken:n,proxy:a,showModal:l,unbondEpochs:r,setShowModal:function(e){d(e)}}):null}),[t,n,a,l,r])}},Oj=function(e){var t=e.tokenAmount,n=e.tokenBalance,i=e.denomination,r=e.onMaxClick,s=a.denominateAmount,c=s({amount:n,denomination:i}),o="0"!==c&&parseFloat(t)!==parseFloat(c),l=function(e){e.preventDefault(),r&&r(c)};return{MaxBtn:function(){return o?Object(pt.jsx)("a",{href:"/",className:"badge badge-pill badge-primary text-uppercase",onClick:l,onMouseDown:function(e){e.preventDefault()},children:"Max"}):null},AvailableBalance:function(){return Object(pt.jsx)(pt.Fragment,{children:s({amount:n,denomination:i,addCommas:!0})})},balance:c,denomination:i,completeMaxBalance:o?void 0:n}},kj=Object(p.gql)(rj||(rj=Object(Bi.a)(["\n  query ($unstakeAmount: String!) {\n    unstakeMetabonding(unstakeAmount: $unstakeAmount) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),gj=function(e){var t=e.ref,n=e.callbackRoute,a=e.hideModal,i=ur(),r=Wh(),s=c.useState(!1),o=Object(T.a)(s,2),l=o[0],d=o[1];return{unstakeMetabonding:function(e){var s=e.variables,c=e.pendingFarmAddress;d(!0),i({query:kj,variables:s}).then((function(e){if(t&&null!==t.current)if(e.data&&e.data.data){var i=[me(e.data.data.unstakeMetabonding)];r({transactions:i,callbackRoute:n,processingMessage:"Unstaking farm stake",successMessage:"Farm stake unstaked",submittedMessage:"Unstake farm stake transactions submitted",pendingFarmAddress:c}),d(!1),a()}else d(!1)})).catch((function(e){console.log("unstakeMetabonding",e),d(!1)}))},unstakeMetabondingLoading:l}},yj=function(e){var t=e.contractAddress,n=e.unbondEpochs,a=e.stakedAmount,i=e.lockedAssetToken,r=e.showModal,s=e.setShowModal,c=o.a.useRef(null),l=function(e){return function(){s(e)}},d=gj({ref:c,callbackRoute:Nh.metastaking,hideModal:function(){s(!1)}}),u=d.unstakeMetabonding,m=d.unstakeMetabondingLoading,b=Object(dt.a)().shape({amount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),S)})).test("minAmount","Must select an amount",(function(e){return!e||new be.BigNumber(e).isGreaterThan(0)})).test("funds","Insufficient funds",(function(e){if(void 0!==e){var t=new be.BigNumber(e);return new be.BigNumber(N).comparedTo(t)>=0}return!0}))}),j=Object(qt.a)({initialValues:{amount:""},validationSchema:b,onSubmit:function(){u({variables:{unstakeAmount:null!==A&&void 0!==A?A:ot(v.amount,S)},pendingFarmAddress:t})}}),f=j.setFieldValue,h=j.handleSubmit,p=j.handleBlur,x=j.handleChange,v=j.values,O=j.errors,k=j.touched,g=v.amount,y=Oj({tokenAmount:g,tokenBalance:a,denomination:i.decimals,onMaxClick:function(e){f("amount",e,!0)}}),w=y.MaxBtn,T=y.AvailableBalance,N=y.balance,S=y.denomination,A=y.completeMaxBalance;return Object(pt.jsx)(Pc.a,{show:r,backdrop:!0,onHide:l(!1),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("form",{onSubmit:h,noValidate:!0,ref:c,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mt-n2 lead",children:[Object(pt.jsx)("div",{className:"mr-2 token-icon-xl pool-icon",children:Object(pt.jsx)(Xh,{token:i.collection})}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap","data-testid":"modalTitle",children:[Object(pt.jsx)("span",{children:"Unstake from"}),"\xa0",Object(pt.jsx)(Rt,{token:i.collection}),"\xa0",Object(pt.jsx)("span",{children:"farm"})]})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-spacer",children:[Object(pt.jsx)(T,{}),Object(pt.jsxs)("span",{className:"text-secondary ml-1",children:[Object(pt.jsx)(Rt,{token:i.collection})," staked"]})]}),Object(pt.jsxs)("div",{className:"form-group text-left mb-0",children:[Object(pt.jsx)("label",{htmlFor:"amount",className:"mb-2 line-height-1",children:"Amount"}),Object(pt.jsxs)("div",{className:"token-amount-input-max ".concat("amount"in O&&"amount"in k?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,name:"amount","data-testid":"amountInput",placeholder:"Amount",value:g,handleChange:x,handleBlur:p}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:Object(pt.jsx)(w,{})})]}),"amount"in O&&"amount"in k&&Object(pt.jsx)("div",{className:"invalid-feedback mt-2","data-testid":"invalidAmount",children:O.amount})]}),Object(pt.jsx)("div",{className:"my-spacer",children:Object(pt.jsx)(ap,{balance:N,amount:g,onChange:function(e){f("amount",e,!0)}})}),Object(pt.jsxs)("div",{className:"my-3 text-secondary",children:["You will receive after a"," ",Object(pt.jsx)("span",{className:"text-warning",children:Object(pt.jsx)(Sp,{minimumFarmingEpochs:n})})," ","unbonding period:"]}),Object(pt.jsx)("div",{className:"card mb-spacer",children:Object(pt.jsx)("div",{className:"card-body",children:Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:i.collection})}),Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(yt,{token:i.collection})})]}),Object(pt.jsx)("div",{className:"ml-3","data-testid":"receivedNowAmount",children:g})]})})}),Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("button",{className:"btn btn-dark btn-lg flex-even mr-2",onClick:l(!1),children:"Cancel"}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg flex-even ml-2",disabled:m,children:m?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Unstake"})})]}),Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign ",Object(pt.jsx)("strong",{children:"1 transaction"}),Object(pt.jsx)(wo,{info:Object(pt.jsx)("div",{className:"text-left",children:"Unstake farm stake"})})]})]})})})},wj=function(e){var t=e.contractAddress,n=e.unbondEpochs,a=e.stakedAmount,i=e.lockedAssetToken,r=e.disableBtn,s=c.useState(!1),o=Object(T.a)(s,2),l=o[0],d=o[1];return{UnstakeBtn:c.useMemo((function(){return Object(pt.jsx)("button",{className:"farm-action-btn btn btn-secondary w-100 mb-2 mb-md-0 mr-md-2","data-testid":"exitBtn",onClick:function(e){e.stopPropagation(),r||d(!0)},disabled:r,children:Object(pt.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:"Unstake"})})}),[r]),UnstakeModal:c.useMemo((function(){return l?Object(pt.jsx)(yj,{contractAddress:t,unbondEpochs:n,stakedAmount:a,lockedAssetToken:i,showModal:l,setShowModal:function(e){d(e)}}):null}),[t,n,a,i,l])}},Tj="Under maintenance",Nj=function(e){var t=e.metabondingData,n=e.proxy,a=o.a.useRef(null),i=Object(c.useState)(!1),r=Object(T.a)(i,2),s=r[0],l=r[1],d=Object(O.p)().isLoggedIn,u=Object(g.c)(rd),m=Object(g.c)($r),b=t.address,f=t.lockedAssetToken,p=t.unbondEpochs,x=t.lockedAssetTokenSupply,v=Rh({pendingFarmAddress:[b],ref:a}).preventActions,k=f.collection,y=f.decimals,w=jr().runQuery,N=Object(c.useState)({stakedAmount:"0",unstakedAmount:"0",unbondEpoch:0,tokenNonce:0}),S=Object(T.a)(N,2),A=S[0],F=S[1],P=A.stakedAmount,D=A.unstakedAmount,R=new je.a(P),E=new je.a(D),L=He({amount:R.toString(10),denomination:null!==y&&void 0!==y?y:0,decimals:2}),C=He({amount:x,denomination:null!==y&&void 0!==y?y:0,decimals:0,addCommas:!0}),I=m.find((function(e){return e.identifier===V})),q=Number(null===I||void 0===I?void 0:I.price),M=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,a,i,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({query:oj,variables:{}});case 2:if(n=e.sent,a=n.data,i=n.success){e.next=10;break}return console.error("handleGetStakedUserPosition",{data:a,success:i}),e.abrupt("return");case 10:console.log("handleGetStakedUserPosition",a.metabondingStakedPosition);case 11:r=a.metabondingStakedPosition&&"0"!==(null===(t=a.metabondingStakedPosition)||void 0===t?void 0:t.unstakedAmount.toString(10)),l(r),F(a.metabondingStakedPosition);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){d&&M()}),[d,u]);var B=vj({unbondEpochs:p,contractAddress:b,lockedAssetToken:f,proxy:n,disableBtn:v}),U=B.EnterBtn,$=B.EnterModal,_=wj({contractAddress:b,unbondEpochs:p,stakedAmount:R.toString(10),lockedAssetToken:f,disableBtn:v||R.isZero()}),W=_.UnstakeBtn,z=_.UnstakeModal,H=Object(c.useMemo)((function(){var e="0"!==E.toString(10);return d&&e?v?Object(pt.jsx)("div",{className:"card-body py-0 bg-light",children:Object(pt.jsx)("div",{className:"text-secondary text-center py-4",children:Object(pt.jsx)($p,{title:"Loading.."})})}):Object(pt.jsx)("div",{className:"card-body py-0 bg-light",children:Object(pt.jsx)(mj,{lockedAssetToken:f,contractAddress:b,position:A})}):Object(pt.jsx)("div",{className:"card-body py-0 bg-light",children:Object(pt.jsx)("div",{className:"text-secondary text-center py-4",children:d?Object(pt.jsx)(pt.Fragment,{children:"No LKMEX in unbonding period."}):Object(pt.jsx)(pt.Fragment,{children:"Login to see your details."})})})}),[d,A,b,f,v,E]);return Object(pt.jsx)(pt.Fragment,{children:Object(pt.jsx)("div",{className:"mb-4",children:Object(pt.jsxs)("div",{ref:a,className:"standard-card card farm-card",children:[Object(pt.jsx)("div",{className:"card-header p-4 d-flex align-items-center justify-content-between ".concat(s?"":"rounded"),onClick:function(){l((function(e){return!e}))},style:{cursor:"pointer"},children:Object(pt.jsxs)("div",{className:"d-flex flex-column flex-fill text-truncate",children:[Object(pt.jsx)("div",{className:"card-icon token-icon-xl pool-icon",children:Object(pt.jsx)(Xh,{token:k})}),Object(pt.jsxs)("div",{className:"text-center text-secondary mb-2 mt-4",children:["My Staked ",Object(pt.jsx)(Rt,{token:k})," ",Object(pt.jsx)(up,{expanded:s})]}),Object(pt.jsxs)("div",{className:"text-center font-weight-bold mb-3",children:[Object(pt.jsx)("div",{className:"h3 mb-0 text-truncate",children:P?Object(pt.jsx)(sp,{valueStr:L}):Object(pt.jsx)(pt.Fragment,{children:"..."})}),d&&Object(pt.jsx)("small",{className:"text-secondary",children:Object(pt.jsx)(Xb,{amount:P?L:"0",usd:q,animated:!0})})]}),Object(pt.jsxs)("div",{className:"text-center mb-3",children:[Object(pt.jsx)("div",{className:"text-secondary mb-1",children:"Out of"}),Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[Object(pt.jsx)("div",{className:"mr-1",children:Object(pt.jsx)(sp,{valueStr:C})}),Object(pt.jsx)("small",{className:"text-secondary",children:Object(pt.jsx)(Xb,{amount:Qe(C),decimals:0,usd:q,animated:!0})})]})]}),Object(pt.jsx)("div",{className:"d-flex flex-column flex-md-row justify-content-md-between",children:d?Object(pt.jsxs)(pt.Fragment,{children:[W,U]}):Object(pt.jsx)("div",{className:"d-flex justify-content-center w-100",children:Object(pt.jsx)("div",{style:{minWidth:"14rem"},children:Object(pt.jsx)(kO,{large:!0})})})})]})}),s&&H,$,z]})})})};var Sj,Aj,Fj,Pj,Dj,Rj=function(e){var t=new je.a(0);return e.forEach((function(e){t=t.plus(e)})),t.dividedToIntegerBy(e.length).toString(10)},Ej=function(e){var t=e.rowData,n=e.index,i=e.isCollapsed,r=o.a.useState(i),s=Object(T.a)(r,2),c=s[0],l=s[1],d=[],u=[];return t.forEach((function(e){var t,n;e.addressLockedAssets&&(d.push(new je.a(null!==(t=e.addressLockedAssets.stake)&&void 0!==t?t:"0")),u.push(new je.a(null!==(n=e.addressLockedAssets.lkmex)&&void 0!==n?n:"0")))})),Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsxs)("tr",{onClick:function(){return l((function(e){return!e}))},className:"cursor-pointer snapshot-row ".concat(c?"collapsed":""),children:[Object(pt.jsx)("td",{children:Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(up,{expanded:!c})}),Object(pt.jsxs)("span",{children:["Week ",n]})]})}),Object(pt.jsxs)("td",{children:[Object(pt.jsx)(sp,{valueStr:a.denominateAmount({amount:Rj(d),denomination:M,addCommas:!0})})," ",U]}),Object(pt.jsxs)("td",{children:[Object(pt.jsx)(sp,{valueStr:a.denominateAmount({amount:Rj(u),denomination:M,addCommas:!0})})," ","LKMEX"]})]}),t.map((function(e,t){return!c&&Object(pt.jsxs)("tr",{className:"snapshot-details-row ".concat(0===t?"first-row":""),children:[Object(pt.jsxs)("td",{children:["Day ",e.day]}),Object(pt.jsxs)("td",{children:[a.denominateAmount({amount:e.addressLockedAssets.stake,denomination:M,addCommas:!0})," ",U]}),Object(pt.jsxs)("td",{children:[a.denominateAmount({amount:e.addressLockedAssets.lkmex,denomination:M,addCommas:!0})," ","LKMEX"]})]},"snapshot-day-".concat(t))}))]})},Lj=function(e){var t=e.snapshots;return Object(pt.jsx)("div",{className:"snapshot-table table-wrapper",children:Object(pt.jsxs)("table",{className:"table mb-0",children:[Object(pt.jsx)("thead",{className:"snapshots-thead text-center align-middle",children:Object(pt.jsxs)("tr",{children:[Object(pt.jsx)("th",{children:"Snapshot week"}),Object(pt.jsx)("th",{children:"EGLD Staked"}),Object(pt.jsx)("th",{children:"LKMEX Staked"})]})}),Object(pt.jsx)("tbody",{children:t.map((function(e){return Object(pt.jsx)(Ej,{rowData:e.days,index:e.week,isCollapsed:!0},e.week)}))})]})})},Cj=function(){var e=o.a.useRef(null),t=Bh(),n=function(e){var t=Bh(),n=or().getMetabondingSnapshots,a=Mh().address,i=o.a.useState([]),r=Object(T.a)(i,2),s=r[0],c=r[1],l=o.a.useState(),d=Object(T.a)(l,2),u=d[0],m=d[1],b=function(){var e=Object(j.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:t=e.sent,a=t.data,t.success?(c(a),m(!0)):m(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.useEffect((function(){null!==e.current&&(t?b():m(!0))}),[t,a]),{metabondingSnapshots:s,metabondingSnapshotsFetched:!0===u,metabondingSnapshotsLoading:void 0===u,metabondingSnapshotsError:!1===u}}(e),a=n.metabondingSnapshots,i=n.metabondingSnapshotsLoading,r=n.metabondingSnapshotsError,s=!i&&!r;return Object(pt.jsxs)(pt.Fragment,{children:[i&&Object(pt.jsx)($p,{}),r&&Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load snapshots"}),Object(pt.jsx)("div",{className:"snapshots col-12 mt-spacer",ref:e,children:s&&void 0!==a&&Object(pt.jsx)("div",{className:"mx-auto",children:Object(pt.jsx)("div",{className:"card snapshots overflow-hidden",children:t?Object(pt.jsx)("div",{className:"card-header border-0 p-0",children:a.length?Object(pt.jsx)(Lj,{snapshots:a}):Object(pt.jsx)("div",{className:"card-body p-spacer",children:"No Snapshots taken"})}):Object(pt.jsx)("div",{className:"card-body p-spacer",children:Object(pt.jsx)("div",{className:"h6 text-center my-spacer",children:"Connect with your wallet to see your details."})})})})})]})},Ij=function(){var e=Object(c.useRef)(null),t=Object(c.useRef)(null),n=Object(y.h)().pathname,a=Object(y.i)(),i=Bh(),r=Object(O.p)().isLoggedIn,s=Object(c.useState)(!1),l=Object(T.a)(s,2),d=l[0],u=l[1],b="devnet"===te.id||"testnet"===te.id,f=n.toLowerCase().includes("snapshots")?"snapshots":"projects",p=Object(c.useState)(f),x=Object(T.a)(p,2),v=x[0],k=x[1],w=Mh(),N=w.isAccountLoading,S=w.accountLoadingError,A=lr(),P=A.fetchNftDetails,D=A.nftDetailsLoading,R=A.nftDetailsError,E=function(e){var t=Object(g.c)(id),n=Bh(),a=or().getMetabondingRewards,i=Mh().address,r=dr(),s=r.fetchTokenDetails,c=r.tokenDetailsLoading,l=r.tokenDetailsError,d=o.a.useState([]),u=Object(T.a)(d,2),m=u[0],b=u[1],f=o.a.useState(),p=Object(T.a)(f,2),x=p[0],v=p[1],O=o.a.useState(!1),k=Object(T.a)(O,2),y=k[0],w=k[1],N=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:t=e.sent,n=t.data,t.success?(i=n.map((function(e){return e.tokenIdentifier})),s(i),b(n),v(!0)):v(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.useEffect((function(){w(Boolean(t.find((function(e){return void 0!==e.pendingMetabondingTransactions}))))}),[t]),o.a.useEffect((function(){null!==e.current&&n?N():v(!0)}),[n,y,i]),{metabondingRewards:m,metabondingRewardsFetched:!0===x,metabondingRewardsLoading:void 0===x||n&&c||y,metabondingRewardsError:!1===x||n&&l}}(e),L=E.metabondingRewards,C=E.metabondingRewardsLoading,I=E.metabondingRewardsError;Dr();var q=cj(e),M=q.pageData,B=q.pageDataLoading,U=q.pageDataError,$=tj({callbackRoute:n}),_=$.isClaimed,V=$.claimTokens,W=$.claimErrorMessage,z=$.claimTokensLoading,H=L.filter((function(e){return"0"!==(null===e||void 0===e?void 0:e.rewards)})),Y=!z&&!_&&!C&&!I&&L.length>0&&H.length>0&&i;Object(c.useEffect)((function(){M&&P([M.metabondingStaking.lockedAssetToken.collection])}),[M]);var G=!b&&(B||N||D),Z=!b&&(U||S||R)&&I,K=!G&&!Z&&(b||M);return Object(pt.jsxs)(c.Fragment,{children:[G&&!Z&&Object(pt.jsx)($p,{}),Z&&Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load Metabonding details"}),Object(pt.jsx)("div",{ref:e,className:"container mt-spacer",children:K&&Object(pt.jsxs)("div",{className:"metabonding",children:[Object(pt.jsx)("h2",{className:"text-center",children:"\ud83d\udd25 Metabonding \ud83d\udd25"}),Object(pt.jsx)("div",{className:"text-secondary mb-spacer text-center",children:"Connecting projects to the Elrond community."}),Object(pt.jsxs)("div",{className:"text-secondary mb-4 text-center",children:["Metabonding video explanation"," ",Object(pt.jsxs)("span",{onClick:function(e){e.preventDefault(),u((function(e){return!e})),function(){var e;t.current&&(null===(e=t.current.contentWindow)||void 0===e||e.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*"))}()},className:"cursor-pointer text-primary",children:["here."," ",Object(pt.jsx)(F.a,{icon:d?Bb.faAngleUp:Mb.faAngleDown})]})]}),Object(pt.jsx)("div",{className:"pb-spacer",children:Object(pt.jsx)(Ub.a,{in:d,children:Object(pt.jsx)("div",{children:Object(pt.jsx)("div",{className:"video-container",children:Object(pt.jsx)("iframe",{ref:t,src:"https://www.youtube.com/embed/hthF-5rSCak?enablejsapi=1",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})})}),Object(pt.jsxs)(fs.a.Container,{id:"project-tabs",defaultActiveKey:v,onSelect:function(e){e&&k(e)},children:[Object(pt.jsx)("div",{className:"text-center",children:Object(pt.jsxs)("ul",{className:"page-nav-pills nav nav-pills d-inline-flex flex-nowrap border mx-auto",children:[Object(pt.jsx)("li",{className:"nav-item",children:Object(pt.jsx)(ks.a.Link,{eventKey:"projects",className:"px-spacer ".concat("projects"===v?"active":""),onClick:function(){a(Nh.metabonding)},children:"Projects"})}),Object(pt.jsx)("li",{className:"nav-item",children:Object(pt.jsx)(ks.a.Link,{eventKey:"snapshots",className:"px-spacer ".concat("snapshots"===v?"active":""),onClick:function(){a(Nh.metabondingSnapshots)},children:"Snapshots"})})]})}),Object(pt.jsxs)(fs.a.Content,{children:[Object(pt.jsxs)(fs.a.Pane,{eventKey:"projects",className:"projects",children:[M&&!b&&Object(pt.jsxs)("div",{className:"row mb-2 pt-spacer mt-spacer mt-md-0",children:[Object(pt.jsx)("div",{className:"col-12 col-md-6",children:Object(pt.jsx)(ej,{})}),Object(pt.jsx)("div",{className:"col-12 col-md-6 mt-spacer mt-md-0",children:Object(pt.jsx)(Nj,{metabondingData:M.metabondingStaking,proxy:M.proxy})})]}),i&&r&&Object(pt.jsx)("div",{className:"row mt-spacer",children:Object(pt.jsxs)("div",{className:"col-12 d-flex flex-column align-items-center",children:[Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return L&&L.length>0?Object(pt.jsx)(mc.a,{id:"button-tooltip-metabonding-hidden"}):Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip-metabonding"},e),{},{children:"No claimable rewards"}))},children:Object(pt.jsx)("div",{children:Object(pt.jsxs)("button",{disabled:!Y,className:"".concat(Y?"":"pointer-events-none"," btn btn-success d-flex align-items-center justify-content-center claim-rewards-button px-5"),onClick:function(){Y&&V()},children:["Claim All Rewards",z&&Object(pt.jsx)(ll,{show:!0,color:"text-white ml-2"})]})})}),W&&Object(pt.jsx)("small",{className:"mt-3 text-danger",children:W})]})}),Object(pt.jsx)("div",{className:"row mt-spacer",children:Object(pt.jsx)(Yb,{metabondingRewards:L,metabondingRewardsLoading:C})})]}),Object(pt.jsx)(fs.a.Pane,{eventKey:"snapshots",className:"snapshots",children:Object(pt.jsx)("div",{className:"row",children:Object(pt.jsx)(Cj,{})})})]})]})]})})]})},qj=function(e){var t=e.children,n=Object(g.c)(Nt),a=Object(g.c)(At);return Dr(),Object(pt.jsxs)("div",{className:"swap-layout container mt-spacer",children:[Object(pt.jsx)("div",{className:"row mb-spacer",children:Object(pt.jsxs)("div",{className:"col-12 text-center ",children:[Object(pt.jsx)("h2",{children:"Swap"}),Object(pt.jsx)("h3",{className:"h6 font-weight-light text-secondary mb-2 pt-1",children:"Trade tokens in an instant"})]})}),Object(pt.jsx)("div",{className:"row",children:Object(pt.jsx)("div",{className:"col-12 col-md-9 col-lg-7 col-xl-6 mx-auto mt-2",children:Object(pt.jsxs)("div",{className:"card border-0 main-card",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:Object(pt.jsxs)("ul",{className:"nav nav-tabs w-100 border-0",children:[Object(pt.jsx)("li",{className:"nav-item flex-even mt-n2",children:Object(pt.jsx)(w.b,{className:"nav-link right-nav d-flex justify-content-center align-items-center text-center h-100 p-2 px-sm-3 py-sm-4 ".concat(n.pathname===Nh.swap?"".concat(null!==a&&void 0!==a?a:""," active"):""),to:Nh.swap,children:"Swap"})}),Object(pt.jsx)("li",{className:"nav-item flex-even mt-n2",children:Object(pt.jsx)(w.b,{className:"nav-link right-nav h-100 text-center py-4 ".concat(n.pathname===Nh.swapActivePools?"active":""),to:Nh.swapActivePools,children:"Active Pools"})})]})}),Object(pt.jsx)("div",{className:"main-body",children:t})]})})})]})},Mj=Object(p.gql)(Sj||(Sj=Object(Bi.a)(["\n  query ($offset: Int, $pairsLimit: Int) {\n    pairs(offset: $offset, limit: $pairsLimit) {\n      address\n      firstToken {\n        name\n        identifier\n        decimals\n      }\n      secondToken {\n        name\n        identifier\n        decimals\n      }\n      liquidityPoolToken {\n        name\n        identifier\n        decimals\n      }\n      state\n      totalFeePercent\n      specialFeePercent\n      type\n    }\n  }\n"]))),Bj=Se((function(e){return e.swapPage}),(function(e){return e.pairsCollection})),Uj=function(){var e=ur(),t=Object(g.c)(Ee),n=Object(g.c)(Bj),a=n.pairs,i=n.pairsFetched,r=n.pairsFetchError,s=Object(g.b)();return c.useEffect((function(){e({query:Mj,variables:{offset:0,pairsLimit:G}}).then((function(e){var n;if(null!=(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data)){var a=e.data.data.pairs,i=ys({pairsData:a,preserveOriginalPairs:!0}).filter((function(e){var n=e.state,a=e.type,i=e.address;return"Active"===n&&("Experimental"!==a||(null===t||void 0===t?void 0:t.includes(i)))}));s(li(jc(i)))}else s(di())})).catch((function(e){console.log("swap useFetchPageData",e),s(di())}))}),[t]),{pairs:a,pairsFetched:i,pairsFetchError:r}},$j=n(315),_j=Object(p.gql)(Aj||(Aj=Object(Bi.a)(["\n  query ($amount: String!, $tokenOutID: String!, $pairAddress: String!) {\n    getAmountIn(\n      amount: $amount\n      tokenOutID: $tokenOutID\n      pairAddress: $pairAddress\n    )\n  }\n"]))),Vj=Object(p.gql)(Fj||(Fj=Object(Bi.a)(["\n  query ($amount: String!, $tokenInID: String!, $pairAddress: String!) {\n    getAmountOut(\n      amount: $amount\n      tokenInID: $tokenInID\n      pairAddress: $pairAddress\n    )\n  }\n"]))),Wj=function(e){var t,n=e.showModal,a=e.details,i=e.setShowModal,r=e.onConfirm;return Object(pt.jsx)(pt.Fragment,{children:n&&Object(pt.jsx)(Pc.a,{show:n,backdrop:!0,onHide:(t=!1,function(){i(t)}),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("div",{className:"card w-100 tx-sent-modal",children:Object(pt.jsxs)("div",{className:"state m-auto p-spacer text-center",children:[Object(pt.jsx)("p",{className:"h4 mb-spacer",children:"Swap Confirmation"}),Object(pt.jsx)("div",{className:"mb-spacer",children:a}),Object(pt.jsxs)("div",{className:"d-flex align-items-center w-100",children:[Object(pt.jsx)("button",{className:"btn btn-dark btn-lg flex-even mr-2",onClick:function(){i(!1)},children:"Cancel"}),Object(pt.jsx)("button",{className:"btn btn-primary btn-lg flex-even ml-2",onClick:function(){i(!1),r()},children:"Confirm"})]})]})})})})},zj=function(e){var t=e.unlockEpoch,n=void 0===t?0:t,a=e.className,i=e.showClaimMsg,r=n-Object(g.c)(St).epoch,s=mo(null!==r&&void 0!==r?r:0),c=s.WithdrawPeriodCountdown,o=s.showCountdown;return{LockedTokensWarning:o?Object(pt.jsxs)("small",{className:"alert alert-warning align-items-center d-flex p-3 ".concat(null!==a&&void 0!==a?a:""),role:"alert",children:[Object(pt.jsx)(F.a,{icon:N.m,size:"lg",className:"alert-icon mr-2"}),Object(pt.jsx)("div",{className:"d-flex flex-column",children:Object(pt.jsxs)("ul",{className:"mb-0 pl-4 text-left",children:[i?Object(pt.jsx)("li",{className:"mb-2",children:"The rate at which you redeem your tokens is the last found rate in price discovery NOT the current swap rate"}):Object(pt.jsx)("li",{className:"mb-2",children:"You will receive a locked token equivalent"}),Object(pt.jsx)("li",{className:"mb-2",children:Object(pt.jsxs)("div",{className:"d-flex",children:["Unlockable in",Object(pt.jsx)("div",{className:"ml-1",children:Object(pt.jsx)(c,{})})]})}),Object(pt.jsx)("li",{className:"mb-2",children:"You can provide liquidity with the locked token"}),Object(pt.jsx)("li",{children:"Locked token cannot be swapped"})]})})]}):null,showLockedTokensWarning:o}},Hj=function(e){var t=e.firstToken,n=e.secondToken,a=e.pairRate,i=c.useState(),r=Object(T.a)(i,2),s=r[0],o=r[1],l=c.useState(),d=Object(T.a)(l,2),u=d[0],m=d[1],b=c.useState(),j=Object(T.a)(b,2),f=j[0],h=j[1];return c.useEffect((function(){t&&n?(o(n),m(t)):(o(void 0),m(void 0))}),[t,n]),c.useEffect((function(){if(s&&u&&a){var e=a.firstToken.identifier.includes(s)?a.firstTokenPrice:a.secondTokenPrice;h(Ye(e))}else h(void 0)}),[s,u,a]),{rateFirstToken:s,rateSecondToken:u,rate:f,switchRateTokens:function(){if(s&&u&&a){var e=u,t=s,n=a.firstToken.identifier.includes(e)?a.firstTokenPrice:a.secondTokenPrice;o(e),m(t),h(Ye(n))}}}},Yj=function(e){var t=e.tolerance,n=e.secondAmount,a=e.activePair,i=e.secondTokenId,r=e.swapType;if(n&&a&&i){if("swapTokensFixedOutput"===r)return Ye(n);var s=i===a.secondToken.identifier?a.secondToken.decimals:a.firstToken.decimals,c=new je.a(ot(n,s)),o=new je.a(1).dividedBy(new je.a(1+parseFloat(t)/100)).times(c).toFixed(0);return He({amount:o,denomination:s,addCommas:!0})}return"..."},Gj=function(e){var t=e.tolerance,n=e.firstAmount,a=e.secondAmount,i=e.firstToken,r=e.secondToken,s=e.activePair,o=e.swapType,l=Object(g.c)(Br),d=c.useState("..."),u=Object(T.a)(d,2),m=u[0],b=u[1],j=c.useState("..."),f=Object(T.a)(j,2),h=f[0],p=f[1],x=c.useState(),v=Object(T.a)(x,2),O=v[0],k=v[1],y=c.useState(),w=Object(T.a)(y,2),N=w[0],S=w[1],A=c.useState(),P=Object(T.a)(A,2),D=P[0],R=P[1],E=c.useState("..."),L=Object(T.a)(E,2),C=L[0],I=L[1],q=c.useState(!1),M=Object(T.a)(q,2),B=M[0],_=M[1],V=Ge({pairsRate:l.pairsRate,pairAddress:s?s.address:""}),W=Hj({firstToken:null===i||void 0===i?void 0:i.value,secondToken:null===r||void 0===r?void 0:r.value,pairRate:V}),z=W.rateFirstToken,H=W.rateSecondToken,Y=W.rate,G=W.switchRateTokens,Z=z===U?$:z,K=V?new je.a(V.firstToken.identifier===Z?V.firstTokenPriceUSD:V.secondTokenPriceUSD).toString(10):void 0;return c.useEffect((function(){!function(){if(n&&Ce(n)&&s&&i){var e=s&&s.totalFeePercent?s.totalFeePercent:void 0,t=i.value===s.firstToken.identifier?s.firstToken.decimals:s.secondToken.decimals,a=new je.a(ot(n,t));if(e){var r=a.times(e).toFixed(0);p(He({amount:r,denomination:t,addCommas:!0}))}else p("...")}else p("...");var c=al(s),o=c.liqFeeText,l=c.burnText,d=c.lpHoldersText;k(o),R(l),S(d)}(),function(){if(n&&Ce(n)&&s&&i&&V){var e=i.value===s.firstToken.identifier?s.firstToken.decimals:s.secondToken.decimals,t=new je.a(ot(n,e)),a=new je.a(i.value===s.firstToken.identifier?V.info.reserves0:V.info.reserves1),r=parseFloat(t.dividedBy(a).times(100).toFixed(3)),c=r>100?"> 100%":"",o=r<.1?"< 0.1%":"",l=o||c?"":"< ".concat(Ye(r.toString()),"%");I("".concat(l).concat(c).concat(o))}else I("...")}(),b(Yj({tolerance:t,secondAmount:a,activePair:s,secondTokenId:null===r||void 0===r?void 0:r.value,swapType:o}))}),[i,n,r,a,t,s,o,l,V]),Object(pt.jsxs)("div",{className:"card mb-spacer border-transparent",children:[Object(pt.jsxs)("div",{className:"card-body pb-0",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-2",children:[Object(pt.jsx)("div",{className:"text-secondary mr-2",children:"Exchange Rate"}),Object(pt.jsx)("div",{className:"flex-fill",children:Object(pt.jsx)("div",{className:"d-flex justify-content-end",children:z&&H&&Y?Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsxs)("div",{className:"mr-2 pr-1",children:["1 ",Object(pt.jsx)(Rt,{token:z})," \u2243 ",Y," ",Object(pt.jsx)(Rt,{token:H}),K&&Object(pt.jsxs)("span",{className:"text-secondary ml-1",children:["($",Ye(K,2),")"]})]}),Object(pt.jsx)("a",{href:"/#",onClick:function(e){e.preventDefault(),G()},className:"d-flex",children:Object(pt.jsx)(F.a,{icon:$j.faSortAlt,rotation:90,className:"toggle-btn"})})]}):"..."})})]}),Object(pt.jsx)(ju,{}),B&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-2",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center",children:Object(pt.jsx)("div",{className:"text-secondary",children:"swapTokensFixedOutput"===o?Object(pt.jsx)(pt.Fragment,{children:"Received"}):Object(pt.jsxs)(pt.Fragment,{children:["Minimum received",Object(pt.jsx)(wo,{info:Object(pt.jsxs)(pt.Fragment,{children:["Your transaction will revert if there is a large price movement before it is confirmed and the min. received is no longer guaranteed."," "]})})]})})}),m," ",r&&a&&Object(pt.jsx)(Rt,{token:r.value})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-2",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("div",{className:"text-secondary",children:"Liquidity provider fee"}),O&&N&&D&&Object(pt.jsx)(wo,{info:Object(pt.jsxs)("div",{className:"d-flex flex-column align-items-start text-left",children:[Object(pt.jsxs)("span",{children:["For each trade a ",O,"% fee is paid:"]}),Object(pt.jsxs)("ul",{className:"mb-0 pl-3",children:[Object(pt.jsxs)("li",{children:[N,"% to LP token holders"]}),Object(pt.jsxs)("li",{children:[D,"% towards MEX buyback and burn"]})]})]})})]}),Object(pt.jsxs)("div",{"data-testid":"liquidityProviderFee",children:[h," ",i&&n&&Ce(n)&&s&&Object(pt.jsx)(Rt,{token:i.value})]})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-2",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("div",{className:"text-secondary",children:"Price impact"}),Object(pt.jsx)(wo,{info:Object(pt.jsx)(pt.Fragment,{children:"The difference between the market price and estimated price due to this trade amount."})})]}),C]})]})]}),Object(pt.jsx)("div",{className:"card-footer border-0 mt-1",children:Object(pt.jsxs)("div",{className:"toggle-details-btn border-top pt-2 text-center cursor-pointer",role:"button",onClick:function(){_((function(e){return!e}))},children:[Object(pt.jsxs)("span",{className:"mr-1",children:[B?"Less":"More"," details"]})," ",Object(pt.jsx)(up,{expanded:B,size:"xs"})]})})]})},Zj=function(e){var t=e.tolerance,n=e.swapType,a=e.skipUnwrap,i=e.activePair,r=e.firstAmount,s=e.firstTokenId,o=e.secondAmount,l=e.secondTokenId,d=Object(g.c)(Br).pairsRate,u=Object(c.useState)("0"),m=Object(T.a)(u,2),b=m[0],j=m[1],f=Object(c.useState)("0"),h=Object(T.a)(f,2),p=h[0],x=h[1],v=Object(c.useState)("0"),O=Object(T.a)(v,2),k=O[0],y=O[1],w=Object(c.useState)("0"),N=Object(T.a)(w,2),S=N[0],A=N[1],P=Object(c.useState)(),D=Object(T.a)(P,2),R=D[0],E=D[1],L=r&&s&&o&&l&&i&&s&&l,C=function(e){return e===U&&a?$:e};Object(c.useEffect)((function(){var e=Ge({pairsRate:d,pairAddress:i?i.address:""});if(e&&s&&l){var a=e.firstToken.identifier.includes(s)?e.firstTokenPriceUSD:e.secondTokenPriceUSD,c=e.firstToken.identifier.includes(s)?parseFloat(e.secondTokenPrice):parseFloat(e.firstTokenPrice);if(y(Ye(c.toString())),A(Ye(new je.a(c*parseFloat(a)).toString(10),2)),r&&o){x(Ye(new je.a(parseFloat(r)*parseFloat(a)).toString(10),2));var u=Yj({tolerance:t,secondAmount:o,activePair:i,secondTokenId:l,swapType:n});j(u)}e.lockedTokensInfo&&!R&&E(e.lockedTokensInfo),e.lockedTokensInfo||E(void 0)}}),[d,t,n,a,i,r,s,o,l]);var I=zj({unlockEpoch:null===R||void 0===R?void 0:R.unlockEpoch,className:"my-spacer"}),q=I.LockedTokensWarning,M=I.showLockedTokensWarning;if(!L)return null;var B=M?W:C(l);return Object(pt.jsxs)("div",{children:[Object(pt.jsxs)("div",{className:"mb-spacer d-flex justify-content-center align-items-center",children:[Object(pt.jsx)("div",{className:"token-icon-xl pool-icon",children:Object(pt.jsx)(Xh,{token:C(s)})}),Object(pt.jsx)(F.a,{className:"mx-spacer text-secondary",size:"2x",icon:ac.f}),Object(pt.jsx)("div",{className:"token-icon-xl pool-icon",children:Object(pt.jsx)(Xh,{token:B})})]}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap justify-content-center",children:[Object(pt.jsx)("span",{className:"text-secondary mr-1",children:"Swap"}),Object(pt.jsx)("strong",{className:"mr-1",children:Ye(null!==r&&void 0!==r?r:"")}),Object(pt.jsx)("strong",{className:"mr-1",children:Object(pt.jsx)(Rt,{token:C(s)})}),Object(pt.jsxs)("strong",{className:"mr-1",children:["(\u2248 $",p,")"]}),Object(pt.jsx)("span",{className:"text-secondary mr-1",children:"for a minimum of"}),Object(pt.jsx)("strong",{className:"mr-1",children:b}),Object(pt.jsx)("strong",{className:"mr-1",children:Object(pt.jsx)(Rt,{token:C(l)})}),Object(pt.jsx)("span",{className:"text-secondary mr-1",children:"at a rate of"}),Object(pt.jsx)("strong",{className:"mr-1",children:k}),Object(pt.jsx)("strong",{className:"mr-1",children:Object(pt.jsx)(Rt,{token:C(s)})}),Object(pt.jsxs)("strong",{className:"mr-1",children:["(\u2248 $",S,")"]}),Object(pt.jsx)("span",{className:"text-secondary mr-1",children:"for"}),Object(pt.jsxs)("strong",{children:["1 ",Object(pt.jsx)(Rt,{token:C(l)})]}),"."]}),q]})},Kj=function(e){var t,n,i=e.pairs,r=e.tokens,s=a.getUniqueTokens,l=a.getActivePair,d=a.getPairAddress,u=a.getSelectedValue,b=a.denominateAmount,f=o.a.useRef(null),p=Object(g.b)(),x=jr().runQuery,v=Object(O.p)().isLoggedIn,k=Mh().account.balance,w=Object(g.c)(De),S=Object(g.c)(Br),A=S.tokenUSDPrices,P=S.pairsRate,D=s({pairs:i,tokens:r,egldBalance:v?k:"0",filterWegld:!0,tokenUSDPrices:A}),R=D.options,E=D.pairMapping,L=Object(c.useState)(!1),C=Object(T.a)(L,2),I=C[0],q=C[1],M=Object(c.useState)(!1),B=Object(T.a)(M,2),_=B[0],V=B[1],W=Object(c.useState)(0),z=Object(T.a)(W,2),Y=z[0],G=z[1],Z=Object(c.useState)(!1),K=Object(T.a)(Z,2),X=K[0],Q=K[1],J=Object(c.useState)(""),ee=Object(T.a)(J,2),te=ee[0],ne=ee[1],ae=Object(c.useState)(!1),ie=Object(T.a)(ae,2),re=(ie[0],ie[1]),se=Object(c.useState)(""),ce=Object(T.a)(se,2),oe=ce[0],le=ce[1],de=Object(c.useState)(),ue=Object(T.a)(de,2),me=ue[0],je=ue[1],fe=Object(c.useState)(),he=Object(T.a)(fe,2),pe=he[0],xe=he[1],ve=tl({ref:f,callbackRoute:"".concat(Nh.swap)}),Oe=ve.swapTokens,ke=ve.swapTokensLoading,ge=Object(y.h)().search,ye=new URLSearchParams(ge),we=Object.fromEntries(ye),Te=we.firstToken,Ne=we.secondToken,Se=Te?R.find((function(e){return e.value===Te})):R.find((function(e){return e.value.includes("USDC")})),Ae=Ne?R.find((function(e){return e.value===Ne})):R.find((function(e){return"EGLD"===e.value})),Fe={firstAmount:"",firstToken:Se,secondAmount:"",secondToken:Ae,activePair:Se&&Ae?l({firstTokenId:u(Se),secondTokenId:u(Ae),pairs:i}):void 0,skipUnwrap:"true"},Pe=Object(dt.a)().shape({firstAmount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),jt)})).test("funds","Insufficient funds",(function(e){if(e&&We&&bt){var t=new be.BigNumber(null!==me&&void 0!==me?me:ot(e.toString(),jt));return new be.BigNumber(bt).comparedTo(t)>=0}return!0})).test("minAmount","Minimum amount: ".concat(H),(function(e){return!e||parseFloat(e)>=H})),secondAmount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),vt)})).test("minAmount","Minimum amount: ".concat(H),(function(e){return!e||parseFloat(e)>=H})).test("token","Token required",(function(e){return Boolean(e&&Xe)})),activePair:Object(dt.a)().required("Required")}),Re=Object(qt.a)({initialValues:Fe,validationSchema:Pe,onSubmit:function(e){if(I){var t=e.firstAmount,n=e.firstToken,a=e.secondAmount,i=e.secondToken,r=e.activePair;if(r){var s=me?nl({amount:me,tolerance:w}):void 0,c=u(i),o=c===U&&(wt||kt)?$:c,l=Object(m.a)({pairAddress:r.address,amountIn:null!==s&&void 0!==s?s:ot(null!==ft&&void 0!==ft?ft:t,jt),tokenInID:u(n),amountOut:null!==pe&&void 0!==pe?pe:ot(a,vt),tokenOutID:o},"swapTokensFixedInput"===te?{tolerance:parseFloat(w)/100}:{});Ue({values:Object(m.a)(Object(m.a)({},e),{},{firstAmount:"",secondAmount:""})}),xe(void 0),je(void 0),G((function(e){return e+1})),Oe({variables:l,swapFunction:te,sequential:l.tokenOutID===U,skipUnwrap:wt}),q(!1)}}else V(!0)}}),Ee=Re.setFieldValue,Le=Re.handleSubmit,Ie=Re.errors,qe=Re.touched,Me=Re.handleBlur,Be=Re.handleChange,Ue=Re.resetForm,_e=Re.values,Ve=_e.activePair,We=_e.firstToken,ze=_e.secondToken,He=_e.firstAmount,Ye=_e.secondAmount,Ze=_e.skipUnwrap,Ke=u(We),Xe=u(ze),Qe=null===(t=A.find((function(e){return e.identifier===Ke})))||void 0===t?void 0:t.price,Je=null===(n=A.find((function(e){return e.identifier===Xe})))||void 0===n?void 0:n.price,et=Object(c.useState)(!1),tt=Object(T.a)(et,2),nt=tt[0],at=tt[1],it=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a,i,r,s,c,o,l,u,m,j;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.amount,a=t.tokenInID,i=t.pair,!Ce(n)){e.next=15;break}return at(!0),ne("swapTokensFixedInput"),r=$e({tokenId:a,tokensOptions:R}),s=ot(n,r),e.next=8,x({query:Vj,variables:{amount:s,tokenInID:a,pairAddress:d(i)}});case 8:c=e.sent,o=c.data,l=c.success,u=i.firstToken.identifier===a?i.secondToken.decimals:i.firstToken.decimals,m=o.getAmountOut,l&&m&&(j=b({amount:m,denomination:u}),je(void 0),xe(m),Ee("secondAmount",Ce(j)?j:"")),at(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a,i,r,s,c,o,l,u,m,j,f;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.amount,a=t.tokenOutID,i=t.pair,!Ce(n)){e.next=16;break}return Q(!0),ne("swapTokensFixedOutput"),r=$e({tokenId:a,tokensOptions:R}),s=ot(n,r),e.next=8,x({query:_j,variables:{amount:s,tokenOutID:a,pairAddress:d(i)}});case 8:if(c=e.sent,o=c.data,l=c.success,o){e.next=13;break}return e.abrupt("return");case 13:u=o.getAmountIn,l&&u&&((m=Ce(u)?u:void 0)?(j=nl({amount:m,tolerance:w}),f=i.firstToken.identifier===a?i.secondToken.decimals:i.firstToken.decimals,Ee("firstAmount",b({amount:j,denomination:f})),je(m)):je(void 0),xe(void 0)),Q(!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(e){Ve&&(le("first"),it({amount:null!==ft&&void 0!==ft?ft:e,tokenInID:Ke,pair:Ve}))},lt=Qo({token:We,tokenAmount:He,onMaxClick:function(e){var t=e.amount,n=e.completeMaxBalance;je(void 0),Ee("firstAmount",t,!0),st(n)}}),ut=lt.MaxBtn,mt=lt.AvailableBalance,bt=lt.balance,jt=lt.decimals,ft=lt.completeMaxBalance,ht=Qo({token:ze,tokenAmount:Ye}),xt=ht.AvailableBalance,vt=ht.decimals,Ot=Ge({pairsRate:P,pairAddress:null===Ve||void 0===Ve?void 0:Ve.address}),kt=Boolean(null===Ot||void 0===Ot?void 0:Ot.lockedTokensInfo),gt=(null===We||void 0===We?void 0:We.value)===U,yt=(null===ze||void 0===ze?void 0:ze.value)===U&&!kt,wt="true"===String(Ze),Tt=gt||yt&&!wt,Nt=ke||false,St=!He&&!Ye||document.hidden?null:5e3;return Ym((function(){var e=l({firstTokenId:Ke,secondTokenId:Xe,pairs:i});e&&oe&&("first"===oe?it({amount:He,tokenInID:Ke,pair:e}):rt({amount:Ye,tokenOutID:Xe,pair:e}))}),St),Object(c.useEffect)((function(){if("swapTokensFixedOutput"===te&&me){var e=nl({amount:me,tolerance:w}),t=b({amount:e,denomination:jt});Ee("firstAmount",t)}}),[te,w,me]),Object(c.useEffect)((function(){if(R){var e=We?R.find((function(e){return e.value===We.value})):void 0;e&&Ee("firstToken",e);var t=ze?R.find((function(e){return e.value===ze.value})):void 0;t&&Ee("secondToken",t)}}),[r,i,k,A]),Object(c.useEffect)((function(){var e;p(Mn(null!==(e=null===Ve||void 0===Ve?void 0:Ve.type.toLowerCase())&&void 0!==e?e:void 0)),re(!1)}),[Ve]),Object(pt.jsxs)("form",{ref:f,onSubmit:Le,noValidate:!0,className:"swap-form",children:[Object(pt.jsxs)("div",{className:"d-flex flex-column mt-2",children:[Object(pt.jsxs)("div",{className:"form-group text-left mb-0",children:[Object(pt.jsx)("label",{htmlFor:"firstAmount",className:"mb-2 line-height-1 text-secondary",children:"Swap From:"}),Object(pt.jsxs)("div",{className:"token-amount-input-select-max ".concat("firstAmount"in Ie&&"firstAmount"in qe?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,name:"firstAmount","data-testid":"firstAmountInput",placeholder:"Amount",value:He,disabled:X,resetDebouncer:Y,handleChange:Be,handleBlur:function(e){Me(e),oe||le("second")},tokenUsdPrice:Qe,onDebounceChange:st,onFocus:function(){"second"===oe&&le("")}}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:Object(pt.jsx)(ut,{})}),Object(pt.jsx)(Ct.TokenSelect,{id:"firstToken",name:"firstToken",value:We,onBlur:Me,isSearchable:!1,options:R,onChange:function(e){le("first"),Ee("firstToken",e);var t=u(e)in E?E[u(e)].filter((function(e){return e.token.identifier!==$})):void 0,n=t&&1===t.length?t[0]:void 0,a=n?l({firstTokenId:u(e),secondTokenId:u(n),pairs:i}):void 0;Ee("secondToken",null!==n&&void 0!==n?n:void 0),Ee("activePair",void 0),Ee("skipUnwrap",!0),Ee("secondAmount",""),xe(void 0),je(void 0),function(e){var t=e.firstTokenIdValue,n=e.newActivePair;Ee("activePair",n),n&&(He?it({amount:He,tokenInID:t,pair:n}):Ye&&rt({amount:Ye,tokenOutID:Xe,pair:n}))}({firstTokenIdValue:u(e),newActivePair:a})}})]}),Object(pt.jsxs)("small",{className:"d-flex flex-column flex-sm-row my-2",children:["firstAmount"in Ie&&"firstAmount"in qe&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-0 mb-2 mb-sm-0","data-testid":"invalidFirstAmount",children:Ie.firstAmount}),Object(pt.jsxs)("div",{className:"d-flex ml-0 ml-sm-auto line-height-1 balance","data-testid":"firstTokenBalance",children:[Object(pt.jsx)("span",{className:"text-secondary mr-2",children:"Balance:"}),Object(pt.jsx)(mt,{})]})]})]}),Object(pt.jsx)("div",{className:"d-flex justify-content-center",children:Object(pt.jsxs)("div",{role:"button",className:"btn btn-circle switch-btn d-flex align-items-center justify-content-center mb-n1 ".concat((null===We||void 0===We?void 0:We.value)===$?"disabled":"clickable"),style:{zIndex:4,marginTop:"-0.2rem"},onClick:function(e){e.preventDefault(),e.stopPropagation(),We&&We.value!==$&&ze&&(Ee("firstAmount",""),Ee("secondAmount",""),Ee("firstToken",ze),Ee("secondToken",We),xe(void 0),je(void 0),Ee("skipUnwrap",!0))},children:[Object(pt.jsx)(F.a,{icon:N.a,size:"sm",className:"arrow-down-icon"}),Object(pt.jsx)(F.a,{icon:$j.faSortAlt,className:"sort-alt-icon"})]})}),Object(pt.jsxs)("div",{className:"form-group mb-spacer text-left",children:[Object(pt.jsx)("label",{htmlFor:"secondAmount",className:"mb-2 line-height-1 text-secondary",children:"Swap To (Est.):"}),Object(pt.jsxs)("div",{className:"token-amount-input-select-max ".concat("secondAmount"in Ie&&"secondAmount"in qe?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,name:"secondAmount","data-testid":"secondAmountInput",placeholder:"Amount",value:Ye,disabled:nt,resetDebouncer:Y,handleChange:Be,handleBlur:function(e){Me(e),oe||le("first")},tokenUsdPrice:Je,onDebounceChange:function(e){Ve&&(le("second"),rt({amount:e,tokenOutID:Xe,pair:Ve}))},onFocus:function(){"first"===oe&&le("")}}),Object(pt.jsx)(Ct.TokenSelect,{id:"secondToken",name:"secondToken",noOptionsMessage:"Select first token",options:We&&We.value in E?E[We.value].filter((function(e){return e.token.identifier!==$})):[],value:ze,onChange:function(e){le("second"),Ee("secondToken",e),function(e){var t=l({firstTokenId:Ke,secondTokenId:e,pairs:i});Ee("activePair",t),t&&(Ye&&qe.secondAmount?rt({amount:Ye,tokenOutID:e,pair:t}):He&&it({amount:He,tokenInID:Ke,pair:t}))}(u(e))},isSearchable:!1,onBlur:Me},"".concat(ze))]}),Object(pt.jsxs)("small",{className:"d-flex flex-column flex-sm-row mt-2",children:["secondAmount"in Ie&&"secondAmount"in qe&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-0 mb-2 mb-sm-0","data-testid":"invalidSecondAmount",children:Ie.secondAmount}),Object(pt.jsxs)("div",{className:"d-flex ml-0 ml-sm-auto line-height-1 balance","data-testid":"secondTokenBalance",children:[Object(pt.jsx)("span",{className:"text-secondary mr-2",children:"Balance:"}),Object(pt.jsx)(xt,{})]})]})]}),Object(pt.jsxs)("div",{className:"".concat((null===ze||void 0===ze?void 0:ze.value)!==U||kt?"d-none":"d-flex"," align-items-center text-left mb-4 mt-n3"),children:[Object(pt.jsx)("input",{type:"checkbox",id:"skipUnwrap",ref:f,onChange:Be,value:Ze,checked:"true"===String(Ze),className:"mr-2"}),Object(pt.jsx)("label",{htmlFor:"skipUnwrap",className:"d-flex align-items-center mb-0",children:Object(pt.jsxs)("div",{children:["Skip unwrap WEGLD",Object(pt.jsx)(Sv,{})]})})]}),Object(pt.jsx)(Gj,{tolerance:w,firstAmount:He,secondAmount:Ye,firstToken:We,secondToken:ze,activePair:Ve,swapType:te}),v?Object(pt.jsxs)(pt.Fragment,{children:[false,Object(pt.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary btn-block",id:"startSwap",disabled:Nt,children:ke?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Swap"})})]}):Object(pt.jsx)(kO,{large:!0}),We&&ze&&Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign"," ",Object(pt.jsx)("strong",{children:Tt?Object(pt.jsx)(pt.Fragment,{children:"2 transactions"}):Object(pt.jsx)(pt.Fragment,{children:"1 transaction"})}),Object(pt.jsx)(wo,{info:Object(pt.jsx)("div",{className:"text-left",children:Object(pt.jsx)("ul",{className:"mb-0 pl-3",children:Tt?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsxs)("li",{children:["1st -"," ",We.value===U?"Wrap EGLD":"Swap"]}),Object(pt.jsxs)("li",{children:["2nd -"," ",ze.value===U?"Unwrap WEGLD":"Swap"]})]}):Object(pt.jsx)("li",{children:"Swap"})})})})]})]}),v&&Object(pt.jsx)(Wj,{showModal:_,setShowModal:function(e){V(e)},onConfirm:function(){q(!0),Re.submitForm()},details:Object(pt.jsx)(Zj,{tolerance:w,firstTokenId:Ke,firstAmount:He,secondTokenId:Xe,secondAmount:Ye,activePair:Ve,swapType:te,skipUnwrap:"true"===String(Ze)})})]})},Xj=function(){var e=a.getUniqueTokens,t=Mh(),n=t.isAccountLoading,i=t.accountLoadingError,r=Object(O.p)().isLoggedIn,s=Object(g.c)(rd),o=Uj(),l=o.pairs,d=o.pairsFetched,u=o.pairsFetchError,m=qr("swapPage"),b=m.fetchTokens,j=m.tokens,f=m.tokensLoading,h=m.tokensError,p=lr().fetchNftDetails,x=dr(),v=x.fetchTokenDetails,k=x.tokenDetailsLoading,y=x.tokenDetailsError;c.useEffect((function(){if(l&&l.length>0){var t=e({pairs:l}).options.map((function(e){return e.value}));b(t),v(t),p([W])}}),[l,s]);var w=!d||f||n&&r||k,T=u||h||null!=i||y,N=!w&&!T;return Object(pt.jsxs)(qj,{children:[w&&!T&&Object(pt.jsx)($p,{}),T&&Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load pairs"}),N&&l&&j&&Object(pt.jsxs)("div",{className:"px-3 px-sm-spacer pb-3 pb-sm-spacer pt-3",children:[Object(pt.jsx)("div",{className:"mb-3",children:Object(pt.jsx)(fc,{})}),Object(pt.jsx)(Kj,{tokens:j,pairs:l})]})]})},Qj=function(){var e=Object(O.p)().isLoggedIn,t=Mh(),n=t.isAccountLoading,a=t.accountLoadingError,i=Uj(),r=i.pairs,s=i.pairsFetchError,c=i.pairsFetched,l=dr(),d=l.fetchTokenDetails,u=l.tokenDetailsLoading,m=l.tokenDetailsError;o.a.useEffect((function(){if(r.length>0){var e=Me({pairs:r}).options.map((function(e){return e.value}));d(e)}}),[r]);var b=!c||n&&e||u,j=s||a||m,f=!b&&!j;return Object(pt.jsxs)(qj,{children:[b&&!j&&Object(pt.jsx)($p,{}),j&&Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load active swap pools"}),f&&Object(pt.jsxs)("div",{className:"px-3 px-sm-spacer pb-3 pb-sm-spacer pt-3",children:[Object(pt.jsx)("div",{className:"mb-3",children:Object(pt.jsx)(fc,{})}),Object(pt.jsx)("div",{className:"pools mb-3",children:r.filter((function(e){var t=e.firstToken,n=e.secondToken;return t.identifier!==$&&n.identifier!==$})).map((function(e,t){return Object(pt.jsx)("div",{className:"".concat(t+1===r.filter((function(e){var t=e.firstToken,n=e.secondToken;return t.identifier!==$&&n.identifier!==$})).length?"":"mb-3"),children:Object(pt.jsx)(Qh,{pool:e})},e.address)}))})]})]})},Jj=function(){return Object(pt.jsxs)("div",{children:[Object(pt.jsx)("h3",{className:"text-center my-spacer",children:"Maiar Exchange Terms of Use"}),Object(pt.jsx)("p",{className:"mb-spacer",children:"We and our affiliates are not affiliated with or commercially related to Saul Zaentz Company or The Tolkien Estate (owners of intellectual property rights relating to the works of J.R.R. Tolkien)."}),Object(pt.jsx)("p",{className:"mb-3",children:Object(pt.jsx)("strong",{children:"Last updated: January 12, 2022"})}),Object(pt.jsxs)("p",{children:["Warm welcome, and thank you for your interest in Maiar Exchange and our website to ",Object(pt.jsx)("a",{href:"/",children:"https://maiar.exchange"}),', a website-hosted user interface (the "Platform") provided by Elrond Network S.R.L. ("Elrond Network", "we", "our", or "us"). The Platform provides access to a decentralized protocol on the Elrond blockchain that allows users to trade certain digital assets. The Platform is one, but not the exclusive, means of accessing Maiar Exchange.']}),Object(pt.jsx)("p",{children:'This Terms of Use Agreement (the "Agreement") is a legally binding agreement between you and us regarding the use of the Platform. This Agreement explains the terms and conditions by which you may access and use the Platform. You must read this Agreement carefully. By accessing or using the Platform, you acknowledge that you have read, understand, and agree to be bound by this Agreement in its entirety. If you do not agree, you are not authorized to access and you don\u2019t have our permission to use the Platform.'}),Object(pt.jsx)("p",{children:"(!)IMPORTANT: Please read this Agreement carefully as it governs your use of the Platform. This Agreement contains important information. The Platform is only available to you \u2014 and you should only access the Platform \u2014 if you agree completely with these terms."}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"ELIGIBILITY"}),"To access or use the Platform, you must be able to form a legally binding contract with us. Accordingly, you represent that you are at least the age of majority in your jurisdiction (e.g., eighteen years old) and have the full right, power, and authority to enter into and comply with the terms and conditions of this Agreement on behalf of yourself and/or of any legal entity, organization, or company for which you may access or use the Platform and that you have the authority enter in this Agreement. You further represent and warrant to us that your use of the Platform is in compliance with any and all applicable laws and regulations and that you will not access or use the Platform to conduct, promote, or otherwise facilitate any illegal activity."]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"AMENDMENT OF THIS AGREEMENT"}),"We reserve the right, in our sole discretion, to periodically modify this Agreement. If we make any amendments, we will notify you by updating the date at the top of the Agreement and by maintaining a current version of the Agreement at"," ",Object(pt.jsx)("a",{href:"/terms",children:"https://maiar.exchange/terms"}),". All modifications will be effective when they are posted, and your continued accessing or use of the Platform will serve as confirmation of your acceptance of those modifications. It is your responsibility to review the most recent version of this Agreement and remain informed of any changes. If you do not agree with any amendments to this Agreement, you must immediately stop accessing and using the Platform."]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"PROPRIETARY RIGHTS"}),"We are the owners of all intellectual property rights or similar rights with respect to the Platform and its contents, including (but not limited to) software, text, images, trademarks, service marks, copyrights, patents, and designs. Except as may be expressly permitted by applicable law or expressly permitted by us in writing, you will not, and will not permit anyone else to: (a) store, copy, modify, distribute, or resell any information or material available on the Platform or compile or collect any content from the Platform as part of a database or other work; (b) use any automated tool (e.g., robots, spiders) to use the Platform or store, copy, modify, distribute, or resell any content from the Platform; (c) rent, lease, or sublicense your access to the Platform; (d) use the Platform for any purpose except for your own personal use; (e) circumvent or disable any digital rights management, usage rules, or other security features of the Platform; (f) reproduce, modify, translate, enhance, decompile, disassemble, reverse engineer, or create derivative works of the Platform; (g) use the Platform in a manner that threatens the integrity, performance, or availability of the Platform; or (h) remove, alter, or obscure any proprietary notices (including copyright notices) on any portion of the Platform."]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"ADDITIONAL RIGHTS"}),"We reserve the following rights, which do not constitute obligations of ours: (a) with or without notice to you, to modify or discontinue, temporarily or permanently, substitute, eliminate or add to the Platform; (b) with or without notice to you, to review, modify, filter, disable, delete and remove any and all content and information from the Platform; and (c) with or without notice to you, to cooperate with any law enforcement, court or government investigation or order or third party requesting or directing that we disclose information or content or information that you provide."]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"LIMITED LICENSE"}),"Subject to this Agreement, we are granting you a limited, revocable license to access and use the Platform solely for non-commercial purposes to learn more about Maiar Exchange and its services."]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"PRIVACY"}),"When you use the Platform, the only information we collect from you is your blockchain wallet address, completed transaction hashes, and the token names, symbols, or other blockchain identifiers of the tokens that you swap. We do not collect any personal information from you (e.g., your name or other identifiers that can be linked to you). We do, however, use third-party service providers, like Cloudflare, and Google Analytics, which may receive or independently obtain your personal information from publicly-available sources. We do not control how these third parties handle your data and you should review their privacy policies to understand how they collect, use, and share your personal information."]}),Object(pt.jsx)("p",{children:"We use the information we collect to detect, prevent, and mitigate financial crime and other illicit or harmful activities on the Platform. For these purposes, we may share the information we collect with blockchain analytics providers. We share information with these service providers only so that they can help us promote the safety, security, and integrity of the Platform. We do not retain the information we collect any longer than necessary for these purposes."}),Object(pt.jsx)("p",{children:"Please note that when you use the Platform, you are interacting with the Elrond blockchain, which provides transparency into your transactions. Elrond Network does not control and is not responsible for any information you make public on the Elrond blockchain by taking actions through the Platform."}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"FORBIDDEN ACTIVITIES"}),"You agree not to engage in, or attempt to engage in, any of the following categories of forbidden activity in relation to your access and use of the Platform:",Object(pt.jsxs)("ol",{children:[Object(pt.jsxs)("li",{className:"mb-2 mt-2",children:[Object(pt.jsx)("u",{children:"Intellectual Property Infringement"}),". Activity that infringes on or violates any copyright, trademark, service mark, patent, right of publicity, right of privacy, or other proprietary or intellectual property rights under the law."]}),Object(pt.jsxs)("li",{className:"mb-2",children:[Object(pt.jsx)("u",{children:"Cyberattack."})," Activity that seeks to interfere with or compromise the integrity, security, or proper functioning of any computer, server, network, personal device, or other information technology system, including (but not limited to) the deployment of viruses and denial of service attacks."]}),Object(pt.jsxs)("li",{className:"mb-2",children:[Object(pt.jsx)("u",{children:"Fraud and Misrepresentation."})," Activity that seeks to defraud us or any other person or entity, including (but not limited to) providing any false, inaccurate, or misleading information in order to unlawfully obtain the property of another."]}),Object(pt.jsxs)("li",{className:"mb-2",children:[Object(pt.jsx)("u",{children:"Market Manipulation."})," Activity that violates any applicable law, rule, or regulation concerning the integrity of trading markets, including (but not limited to) the manipulative tactics commonly known as spoofing and wash trading."]}),Object(pt.jsxs)("li",{className:"mb-2",children:[Object(pt.jsx)("u",{children:"Securities and Derivatives Violations."})," Activity that violates any applicable law, rule, or regulation concerning the trading of securities or derivatives."]}),Object(pt.jsxs)("li",{className:"mb-2",children:[Object(pt.jsx)("u",{children:"Any Other Unlawful Conduct."})," Activity that violates any applicable law, rule, or regulation of the United States, Romania or another relevant jurisdiction, including (but not limited to) the restrictions and regulatory requirements imposed by U.S. or Romanian law."]})]})]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"NO INVESTMENT OR FINANCIAL ADVICE"}),"You agree and understand that all trades you submit through the Platform are considered unsolicited, which means that you have not received any investment advice from us in connection with any trades, and that we do not conduct a suitability review of any trades you submit."]}),Object(pt.jsx)("p",{children:"All information provided by the Platform is for informational purposes only and should not be construed as investment advice. You should not take, or refrain from taking, any action based on any information contained in the Platform. We do not make any investment recommendations to you or opine on the merits of any investment transaction or opportunity. You alone are responsible for determining whether any investment, investment strategy or related transaction is appropriate for you based on your personal investment objectives, financial circumstances, and risk tolerance."}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"NO WARRANTIES"}),'The Platform is provided on an "AS IS" and "AS AVAILABLE" basis. To the fullest extent permitted by law, we disclaim any representations and warranties of any kind, whether express, implied, or statutory, including (but not limited to) the warranties of merchantability and fitness for a particular purpose. You acknowledge and agree that your use of the Platform is at your own risk. We do not represent or warrant that access to the Platform will be continuous, uninterrupted, timely, or secure; that the information contained in the Platform will be accurate, reliable, complete, or current; or that the Platform will be free from errors, defects, viruses, or other harmful elements. No advice, information, or statement that we make should be treated as creating any warranty concerning the Platform. We do not endorse, guarantee, or assume responsibility for any advertisements, offers, or statements made by third parties concerning the Platform.']}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"NON-CUSTODIAL AND NO FIDUCIARY DUTIES"}),"The Platform is a purely non-custodial application, meaning you are solely responsible for the custody of the cryptographic private keys to the digital asset wallets you hold. This Agreement is not intended to, and does not, create or impose any fiduciary duties on us. To the fullest extent permitted by law, you acknowledge and agree that we owe no fiduciary duties or liabilities to you or any other party, and that to the extent any such duties or liabilities may exist at law or in equity, those duties and liabilities are hereby irrevocably disclaimed, waived, and eliminated. You further agree that the only duties and obligations that we owe you are those set out expressly in this Agreement."]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"COMPLIANCE OBLIGATIONS"}),"The Platform is operated from facilities within Romania. The Platform may not be available or appropriate for use in other jurisdictions. By accessing or using the Platform, you agree that you are solely and entirely responsible for compliance with all laws and regulations that may apply to you."]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"ASSUMPTIONS OF RISKS"}),"By accessing and using the Platform, you represent that you are financially and technically sophisticated enough to understand the inherent risks associated with using cryptographic and blockchain-based systems, and that you have a working knowledge of the usage and intricacies of digital assets such as Elrond eGold (EGLD), MEX, holoride (RIDE), and other digital tokens such as those following the Elrond Standard Digital Token (ESDT). In particular, you understand that blockchain-based transactions are irreversible."]}),Object(pt.jsx)("p",{children:"You further understand that the markets for these digital assets are highly volatile due to factors including (but not limited to) adoption, speculation, technology, security, and regulation. You acknowledge and accept that the cost and speed of transacting with cryptographic and blockchain-based systems such as Elrond are variable and may increase dramatically at any time. You further acknowledge and accept the risk that your digital assets may lose some or all of their value while they are supplied to Maiar Exchange, you may suffer loss due to the fluctuation of prices of tokens in a trading pair or liquidity pool, and experience significant price slippage and cost. You understand that anyone can create a token, including fake versions of existing tokens and tokens that falsely claim to represent projects, and acknowledge and accept the risk that you may mistakenly trade those or other tokens. You further acknowledge that we are not responsible for any of these variables or risks, do not own or control the Platform, and cannot be held liable for any resulting losses that you experience while accessing or using the Platform. Accordingly, you understand and agree to assume full responsibility for all of the risks of accessing and using the Platform."}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"THIRD PARTIES RESOURCES AND PROMOTIONS"}),Object(pt.jsx)("br",{}),"The Platform may contain references or links to third-party resources, including (but not limited to) information, materials, products, or services, that we do not own or control. In addition, third parties may offer promotions related to your access and use of the Platform. We do not endorse or assume any responsibility for any such resources or promotions. If you access any such resources or participate in any such promotions, you do so at your own risk, and you understand that this Agreement does not apply to your dealings or relationships with any third parties. You expressly relieve us of any and all liability arising from your use of any such resources or participation in any such promotions."]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"RELEASE OF CLAIMS"}),"You expressly agree that you assume all risks in connection with your access and use of the Platform and your interaction with the Elrond blockchain. You further expressly waive and release us from any and all liability, claims, causes of action, or damages arising from or in any way relating to your use of the Platform and your interaction with the Elrond blockchain."]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"INDEMNITY"}),"You agree to hold harmless, release, defend, and indemnify us and our officers, directors, employees, contractors, agents, affiliates, and subsidiaries from and against all claims, damages, obligations, losses, liabilities, costs, and expenses arising from: (a) your access and use of the Platform; (b) your violation of any term or condition of this Agreement, the right of any third party, or any other applicable law, rule, or regulation; and (c) any other party's access and use of the Platform with your assistance or using any device or account that you own or control."]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"LIMITATION OF LIABILITY"}),"Under no circumstances shall we or any of our officers, directors, employees, contractors, agents, affiliates, or subsidiaries be liable to you for any indirect, punitive, incidental, special, consequential, or exemplary damages, including (but not limited to) damages for loss of profits, goodwill, use, data, or other intangible property, arising out of or relating to any access or use of the Platform, nor will we be responsible for any damage, loss, or injury resulting from hacking, tampering, or other unauthorized access or use of the Interface or the information contained within it. We assume no liability or responsibility for any: (a) errors, mistakes, or inaccuracies of content; (b) personal injury or property damage, of any nature whatsoever, resulting from any access or use of the Interface; (c) unauthorized access or use of any secure server or database in our control, or the use of any information or data stored therein; (d) interruption or cessation of function related to the Interface; (e) bugs, viruses, trojan horses, or the like that may be transmitted to or through the Platform; (f) errors or omissions in, or loss or damage incurred as a result of the use of, any content made available through the Platform; and (g) the defamatory, offensive, or illegal conduct of any third party. Under no circumstances shall we or any of our officers, directors, employees, contractors, agents, affiliates, or subsidiaries be liable to you for any claims, proceedings, liabilities, obligations, damages, losses, or costs in an amount exceeding the amount you paid to us in exchange for access to and use of the Platform, or USD$100.00, whichever is greater. This limitation of liability applies regardless of whether the alleged liability is based on contract, tort, negligence, strict liability, or any other basis, and even if we have been advised of the possibility of such liability. Some jurisdictions do not allow the exclusion of certain warranties or the limitation or exclusion of certain liabilities and damages. Accordingly, some of the disclaimers and limitations set forth in this Agreement may not apply to you. This limitation of liability shall apply to the fullest extent permitted by law."]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"DISPUTE RESOLUTION"}),"We will use our best efforts to resolve any potential disputes through informal, good faith negotiations. If a potential dispute arises, you must contact us by sending an email to legal@elrond.com so that we can attempt to resolve it without resorting to formal dispute resolution."]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"GOVERNING LAW, JURISDICTION"}),"Regardless of your place of residence or where you access or use the Platform from, this Agreement and your use of the Platform will be governed by and construed solely in accordance with the laws of Romania. The competent courts in Romania will have exclusive and sole jurisdiction over any dispute, claim or controversy relating to the Platform or with respect to any matter relating to this Agreement. You hereby expressly consent to personal jurisdiction in Romania and expressly waive any right to object to such personal jurisdiction or the non-convenience of such forum. You further agree that the Platform shall be deemed to be based solely in Romania, and that although the Platform may be available in other jurisdictions, its availability does not give rise to general or specific personal jurisdiction in any forum outside Romania."]}),Object(pt.jsxs)("p",{children:[Object(pt.jsx)("strong",{className:"h5 pb-1 pt-3 d-block",children:"ENTIRE AGREEMENT"}),"These terms constitute the entire agreement between you and us concerning the subject matter herein, and supersede all prior and contemporaneous negotiations and oral representations, agreements and statements",Object(pt.jsx)("a",{href:"https://manytools.org/http-html-text/http-request-headers/",children:"."})]})]})},ef=["title","titleId"];function tf(){return tf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tf.apply(this,arguments)}function nf(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function af(e,t){var n=e.title,a=e.titleId,i=nf(e,ef);return c.createElement("svg",tf({xmlns:"http://www.w3.org/2000/svg",width:27,height:24,viewBox:"0 0 27 24",ref:t,"aria-labelledby":a},i),n?c.createElement("title",{id:a},n):null,Pj||(Pj=c.createElement("defs",null,c.createElement("style",null,"\n      .cls-webwallet-1 {\n        fill: #1f2021;\n      }\n\n      .cls-webwallet-2 {\n        fill: #fff;\n        fill-rule: evenodd;\n      }\n    "))),Dj||(Dj=c.createElement("g",{transform:"translate(11028 -19030)"},c.createElement("path",{className:"cls-webwallet-1",d:"M24.75-21H2.25A2.251,2.251,0,0,0,0-18.75v13.5A2.251,2.251,0,0,0,2.25-3h22.5A2.251,2.251,0,0,0,27-5.25v-13.5A2.251,2.251,0,0,0,24.75-21ZM22.5,1.875A1.122,1.122,0,0,0,21.375.75H16.753l-.872-2.616a.56.56,0,0,0-.534-.384H11.658a.56.56,0,0,0-.534.384L10.252.75H5.625a1.125,1.125,0,0,0,0,2.25h15.75A1.122,1.122,0,0,0,22.5,1.875Z",transform:"translate(-11028 19051)"}),c.createElement("g",{transform:"translate(-11019.5 19034)"},c.createElement("path",{className:"cls-webwallet-2",d:"M360.895,396.416a.164.164,0,0,1-.059-.129.16.16,0,0,1,.059-.129.213.213,0,0,1,.28,0,.164.164,0,0,1,.059.129.16.16,0,0,1-.059.129.212.212,0,0,1-.28,0",transform:"translate(-352.894 -394.433)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M353.313,404.289a.207.207,0,0,1-.05-.129.19.19,0,0,1,.19-.19.157.157,0,0,1,.129.059.206.206,0,0,1,.05.129.179.179,0,0,1-.05.129.206.206,0,0,1-.129.05.2.2,0,0,1-.14-.048",transform:"translate(-345.813 -401.786)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M344.848,412.383a.187.187,0,0,1,0-.26h0a.2.2,0,0,1,.268,0,.187.187,0,0,1,0,.26.164.164,0,0,1-.129.059.179.179,0,0,1-.14-.059",transform:"translate(-337.896 -409.36)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M336.759,420.355a.187.187,0,0,1-.011-.26l.011-.011a.212.212,0,0,1,.28,0,.187.187,0,0,1,.011.26l-.011.011a.219.219,0,0,1-.28,0",transform:"translate(-330.327 -416.804)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M329.052,428.706a.164.164,0,0,1-.059-.129.179.179,0,0,1,.19-.179.164.164,0,0,1,.12.05.157.157,0,0,1,.05.129.19.19,0,0,1-.19.19.318.318,0,0,1-.112-.062",transform:"translate(-323.12 -424.626)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M320.516,436.64a.157.157,0,0,1,.059-.129.187.187,0,0,1,.268.26.187.187,0,0,1-.26,0A.178.178,0,0,1,320.516,436.64Z",transform:"translate(-315.193 -432.169)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M304.875,452.357a.143.143,0,0,1-.05-.129.179.179,0,0,1,.05-.129.2.2,0,0,1,.268,0,.189.189,0,0,1,.05.129.161.161,0,0,1-.059.129.165.165,0,0,1-.129.059.157.157,0,0,1-.131-.059",transform:"translate(-300.519 -446.74)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M296.3,460.533a.165.165,0,0,1-.059-.129.173.173,0,0,1,.059-.129.228.228,0,0,1,.291,0,.165.165,0,0,1,.059.129.173.173,0,0,1-.059.129.2.2,0,0,1-.14.059.364.364,0,0,1-.151-.059",transform:"translate(-292.5 -454.384)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M288.735,468.5a.19.19,0,1,1,.268,0,.2.2,0,0,1-.268,0",transform:"translate(-285.428 -461.828)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M280.641,476.539a.177.177,0,0,1-.059-.129.2.2,0,0,1,.19-.19.179.179,0,0,1,.129.05.206.206,0,0,1,.05.129.184.184,0,0,1-.05.129.207.207,0,0,1-.129.05.126.126,0,0,1-.131-.039",transform:"translate(-277.854 -469.342)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M272.207,484.8a.164.164,0,0,1-.059-.129.157.157,0,0,1,.059-.129.212.212,0,0,1,.28,0,.164.164,0,0,1,.059.129.157.157,0,0,1-.059.129.213.213,0,0,1-.28,0",transform:"translate(-269.967 -477.078)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M264.594,492.646a.2.2,0,0,1,0-.268h0a.188.188,0,0,1,.26,0,.2.2,0,0,1,0,.268.188.188,0,0,1-.26,0",transform:"translate(-262.856 -484.401)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M264.643,396.285a.206.206,0,0,0,.05-.129.19.19,0,0,0-.19-.19.179.179,0,0,0-.129.05.164.164,0,0,0-.059.129.157.157,0,0,0,.059.129.188.188,0,0,0,.268.011",transform:"translate(-262.644 -394.302)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M272.486,404.419a.164.164,0,0,0,.059-.129.157.157,0,0,0-.059-.129.213.213,0,0,0-.28,0,.164.164,0,0,0-.059.129.157.157,0,0,0,.059.129.212.212,0,0,0,.28,0",transform:"translate(-269.967 -401.917)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M280.78,412.383a.187.187,0,0,0,0-.26.2.2,0,0,0-.268,0,.249.249,0,0,0-.059.129.179.179,0,0,0,.05.129.164.164,0,0,0,.129.059.169.169,0,0,0,.148-.056",transform:"translate(-277.733 -409.36)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M289,420.395a.19.19,0,1,0-.268,0,.168.168,0,0,0,.129.05.237.237,0,0,0,.14-.05",transform:"translate(-285.428 -416.844)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M296.756,428.568a.164.164,0,0,0,.059-.129.161.161,0,0,0-.059-.129.191.191,0,0,0-.28,0,.165.165,0,0,0-.059.129.161.161,0,0,0,.059.129.213.213,0,0,0,.28,0",transform:"translate(-292.661 -424.489)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M305.191,436.564a.157.157,0,0,0-.059-.129.187.187,0,0,0-.26,0h0a.2.2,0,0,0,0,.268h0a.2.2,0,0,0,.268,0A.267.267,0,0,0,305.191,436.564Z",transform:"translate(-300.517 -432.093)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M313.145,444.665a.19.19,0,1,0-.268,0h0a.2.2,0,0,0,.268,0",transform:"translate(-308.001 -439.537)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M320.9,452.357a.164.164,0,0,0,.059-.129.16.16,0,0,0-.059-.129.213.213,0,0,0-.28,0,.164.164,0,0,0-.059.129.161.161,0,0,0,.059.129.2.2,0,0,0,.14.059.186.186,0,0,0,.14-.059",transform:"translate(-315.233 -446.74)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M329.191,460.533a.189.189,0,0,0,.05-.129.2.2,0,0,0-.05-.129.2.2,0,0,0-.268,0,.177.177,0,0,0-.059.129.186.186,0,0,0,.19.179.2.2,0,0,0,.137-.05",transform:"translate(-322.999 -454.384)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M337.458,468.5a.19.19,0,0,0-.268-.268h0a.2.2,0,0,0,0,.268h0a.168.168,0,0,0,.129.05.245.245,0,0,0,.14-.05",transform:"translate(-330.734 -461.828)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M345.139,476.67a.178.178,0,0,0,.059-.129.157.157,0,0,0-.059-.129.187.187,0,0,0-.26,0,.206.206,0,0,0-.05.129.18.18,0,0,0,.05.129.168.168,0,0,0,.129.05.16.16,0,0,0,.131-.05",transform:"translate(-337.927 -469.473)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M353.546,484.642a.183.183,0,0,0,.059-.14.157.157,0,0,0-.059-.129.187.187,0,0,0-.26,0,.143.143,0,0,0-.05.129.186.186,0,0,0,.31.14",transform:"translate(-345.785 -476.917)"}),c.createElement("path",{className:"cls-webwallet-2",d:"M361.289,492.605a.2.2,0,0,0,.011-.26l-.011-.011a.213.213,0,0,0-.28,0,.182.182,0,0,0-.02.249l.02.02a.193.193,0,0,0,.28,0",transform:"translate(-353 -484.361)"}),c.createElement("path",{className:"cls-webwallet-2 reverse",d:"M272.158,372.474a3.251,3.251,0,0,1,3.514,0l1.129-1.118a4.65,4.65,0,0,0-5.773,0Z",transform:"translate(-268.921 -370.351)"}),c.createElement("path",{className:"cls-webwallet-2 reverse",d:"M240.691,407.354a3.165,3.165,0,0,1,0-3.514l-1.118-1.118a4.676,4.676,0,0,0,0,5.753Z",transform:"translate(-238.583 -400.619)"}),c.createElement("path",{className:"cls-webwallet-2 reverse",d:"M275.684,491.281a3.147,3.147,0,0,1-3.536.008l-1.118,1.118a4.545,4.545,0,0,0,2.9,1,4.619,4.619,0,0,0,2.865-1.009Z",transform:"translate(-268.921 -483.425)"}),c.createElement("path",{className:"cls-webwallet-2 reverse",d:"M359.588,403.8a3.057,3.057,0,0,1,.528,1.786,3.221,3.221,0,0,1-.528,1.728l1.129,1.118a4.639,4.639,0,0,0,1.009-2.857,4.545,4.545,0,0,0-1-2.9Z",transform:"translate(-351.727 -400.579)"}),c.createElement("path",{className:"cls-webwallet-2 reverse",d:"M366.229,496.488a.788.788,0,1,1-.788.788h0a.8.8,0,0,1,.788-.788h0",transform:"translate(-357.2 -488.293)"}),c.createElement("path",{className:"cls-webwallet-2 reverse",d:"M242.737,496.488a.789.789,0,1,1-.758.758.8.8,0,0,1,.758-.758",transform:"translate(-241.758 -488.293)"}),c.createElement("path",{className:"cls-webwallet-2 reverse",d:"M366.651,372.729a.789.789,0,0,1,.78.788.78.78,0,0,1-1.56,0,.792.792,0,0,1,.78-.791",transform:"translate(-357.602 -372.574)"}),c.createElement("path",{className:"cls-webwallet-2 reverse",d:"M242.168,372.729a.783.783,0,0,1,.788.769h0a.789.789,0,0,1-.788.78h0a.774.774,0,1,1,0-1.549",transform:"translate(-241.198 -372.574)"})))))}var rf,sf,cf,of,lf,df,uf=c.forwardRef(af),mf=(n.p,["title","titleId"]);function bf(){return bf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bf.apply(this,arguments)}function jf(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ff(e,t){var n=e.title,a=e.titleId,i=jf(e,mf);return c.createElement("svg",bf({width:42,height:42,viewBox:"0 0 42 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?c.createElement("title",{id:a},n):null,rf||(rf=c.createElement("path",{d:"M34.4876 0.0413742H15.7717V25.323H41.0412V6.58293C41.0412 2.9933 38.091 0.0413742 34.5081 0.0413742C34.5019 0.0413742 34.4937 0.0413742 34.4876 0.0413742V0.0413742Z",fill:"#142533"})),sf||(sf=c.createElement("path",{d:"M9.93712 0.0413742H6.71166C3.12874 0.0413742 0.178574 2.99536 0.178574 6.58293V9.81256H9.93712V0.0413742Z",fill:"#142533"})),cf||(cf=c.createElement("path",{d:"M0.178574 15.6547H9.93712V25.4259H0.178574V15.6547Z",fill:"#142533"})),of||(of=c.createElement("path",{d:"M31.3648 40.9569H34.5903C38.1753 40.9569 41.1234 38.0029 41.1234 34.4153C41.1234 34.4092 41.1234 34.401 41.1234 34.3948V31.268H31.3648V40.9569Z",fill:"#142533"})),lf||(lf=c.createElement("path",{d:"M15.7717 31.268H25.5302V41.0392H15.7717V31.268Z",fill:"#142533"})),df||(df=c.createElement("path",{d:"M0.178574 31.268V34.4976C0.178574 38.0852 3.12874 41.0392 6.71166 41.0392H9.93712V31.268H0.178574Z",fill:"#142533"})))}var hf,pf,xf=c.forwardRef(ff),vf=(n.p,["title","titleId"]);function Of(){return Of=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Of.apply(this,arguments)}function kf(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gf(e,t){var n=e.title,a=e.titleId,i=kf(e,vf);return c.createElement("svg",Of({xmlns:"http://www.w3.org/2000/svg",width:17.5,height:28,viewBox:"0 0 17.5 28",ref:t,"aria-labelledby":a},i),n?c.createElement("title",{id:a},n):null,hf||(hf=c.createElement("defs",null,c.createElement("style",null,"\n      .cls-maiar-app-1 {\n        fill: #1f43f7;\n      }\n\n      .cls-maiar-app-2 {\n        fill: #fff;\n      }\n    "))),pf||(pf=c.createElement("g",{transform:"translate(11007 -18884.001)"},c.createElement("path",{className:"cls-maiar-app-1",d:"M14.875-21H2.625A2.626,2.626,0,0,0,0-18.375V4.375A2.626,2.626,0,0,0,2.625,7h12.25A2.626,2.626,0,0,0,17.5,4.375v-22.75A2.626,2.626,0,0,0,14.875-21Z",transform:"translate(-11007 18905)"}),c.createElement("g",{transform:"translate(-11002.75 18892.168)"},c.createElement("g",{transform:"translate(0 0)"},c.createElement("path",{className:"cls-maiar-app-2",d:"M2.255,6.752l.008-.01L0,9V0L4.5,4.5,9,0V9L6.75,6.752,4.5,9Z",transform:"translate(0 0)"}))),c.createElement("circle",{className:"cls-maiar-app-2",cx:1.5,cy:1.5,r:1.5,transform:"translate(-10999.75 18906.498)"}))))}var yf,wf,Tf=c.forwardRef(gf),Nf=(n.p,["title","titleId"]);function Sf(){return Sf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sf.apply(this,arguments)}function Af(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ff(e,t){var n=e.title,a=e.titleId,i=Af(e,Nf);return c.createElement("svg",Sf({xmlns:"http://www.w3.org/2000/svg",width:24,height:21,viewBox:"0 0 24 21",ref:t,"aria-labelledby":a},i),n?c.createElement("title",{id:a},n):null,yf||(yf=c.createElement("defs",null,c.createElement("style",null,"\n      .cls-maiar-extension-1 {\n        fill: #1f43f7;\n      }\n\n      .cls-maiar-extension-2 {\n        fill: #fff;\n      }\n    "))),wf||(wf=c.createElement("g",{transform:"translate(11024 -18800.5)"},c.createElement("path",{className:"cls-maiar-extension-1",d:"M21.619-15H3.75A.75.75,0,0,1,3-15.75a.75.75,0,0,1,.75-.75h18a.75.75,0,0,0,.75-.75,2.25,2.25,0,0,0-2.25-2.25H3a3,3,0,0,0-3,3v15a3,3,0,0,0,3,3H21.619A2.321,2.321,0,0,0,24-.75v-12A2.321,2.321,0,0,0,21.619-15Z",transform:"translate(-11024 18820)"}),c.createElement("g",{transform:"translate(-11017.25 18809.002)"},c.createElement("g",{transform:"translate(0 0)"},c.createElement("path",{className:"cls-maiar-extension-2",d:"M2.13,6.377l.007-.009L0,8.5V0L4.249,4.254,8.5,0V8.5L6.375,6.377,4.25,8.5Z",transform:"translate(0 0)"}))),c.createElement("circle",{className:"cls-maiar-extension-2",cx:1.314,cy:1.314,r:1.314,transform:"translate(-11004.771 18812.314)"}))))}var Pf,Df=c.forwardRef(Ff),Rf=(n.p,n(316)),Ef=function(e){var t=e.children,n=e.noSpacer,a=e.className,i=e.backdropClassName,r=e.title,s=Object(g.c)(Nt),o=c.useState(!1),l=Object(T.a)(o,2),d=l[0],u=l[1],m=function(){u(!0)};return c.useEffect((function(){return function(){u(!1)}}),[]),d?Object(pt.jsx)(y.a,{to:{pathname:s.pathname,search:s.search}}):Object(pt.jsx)(Pc.a,{show:!0,backdrop:"static",backdropClassName:i,onHide:m,className:"modal-container ".concat(a||""),animation:!1,centered:!0,children:Object(pt.jsxs)("div",{className:"modal-card card w-100",children:[Object(pt.jsx)("div",{className:"card-title h5 mb-0",children:Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center pt-spacer px-spacer mb-0",children:[Object(pt.jsx)("div",{children:r}),Object(pt.jsx)("button",{type:"button",className:"btn btn-light px-3 py-2",onClick:m,children:Object(pt.jsx)(F.a,{size:"lg",icon:Rf.faTimes})})]})}),Object(pt.jsx)("div",{className:"modal-card-body text-center ".concat(n?"p-0":"p-spacer"),children:t})]})})};!function(e){e.walletConnect="walletConnect",e.ledger="ledger",e.none="none"}(Pf||(Pf={}));var Lf,Cf,If,qf,Mf,Bf=Object(pt.jsxs)("div",{className:"unlock-title",children:["Connect to a wallet"," ",Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:250,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"connect-to-wallet-tooltip"},e),{},{children:"Connect securely using one of the provided options"}))},children:Object(pt.jsx)("span",{"data-testid":"infoConnect",children:Object(pt.jsx)(F.a,{icon:N.m,className:"i-icon text-secondary"})})})]}),Uf=function(){var e=Object(g.c)(Nt),t=Object(O.p)().isLoggedIn,n=o.a.useState(""),a=Object(T.a)(n,2),i=a[0],r=a[1],s=Object(c.useState)(Pf.none),l=Object(T.a)(s,2),d=l[0],u=l[1];o.a.useEffect((function(){k.c.maiarId.init({maiarIdApi:Q,timeout:B}).then((function(e){r(e)}))}),[]);var b={callbackRoute:e.pathname,token:i,logoutRoute:Nh.home,redirectAfterLogin:!1,wrapContentInsideModal:!1,hideButtonWhenModalOpens:!0,shouldRenderDefaultCss:!1,className:"login-btn"};function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pf.none,n=d==Pf.none||t===d;return n?e:null}return t?Object(pt.jsx)(y.a,{to:Nh.home}):Object(pt.jsx)(Ef,{title:function(){switch(d){case Pf.walletConnect:return"Login with Maiar";case Pf.ledger:return"Login with ledger";default:return Bf}}(),children:Object(pt.jsxs)("div",{className:"unlock-page",children:[Object(pt.jsx)("div",{className:"d-flex justify-content-center",children:Object(pt.jsx)(Tp,{rounded:!0,extendedText:!0})}),j(window.elrondWallet?window.elrondWallet&&Object(pt.jsx)(O.b.ExtensionLoginButton,Object(m.a)(Object(m.a)({},b),{},{children:Object(pt.jsx)("div",{className:"btn btn-unlock btn-block",children:Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(pt.jsx)("div",{className:"d-flex flex-row method",children:Object(pt.jsxs)("div",{className:"title",children:[Object(pt.jsx)(Df,{className:"maiar-symbol",height:"20"}),"Maiar DeFi Wallet"]})}),Object(pt.jsx)(F.a,{icon:N.b,className:"arrow"})]})})})):Object(pt.jsx)("a",{rel:"noreferrer",href:"https://chrome.google.com/webstore/detail/dngmlblcodfobpdpecaadgfbcggfjfnm?authuser=0&hl=en",target:"_blank",className:"btn btn-unlock btn-block",children:Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(pt.jsxs)("div",{className:"title",children:[Object(pt.jsx)(Df,{className:"maiar-symbol",height:"20"}),"Maiar DeFi Wallet"]}),Object(pt.jsx)(F.a,{icon:N.b})]})})),j(Object(pt.jsx)(O.b.WalletConnectLoginButton,Object(m.a)(Object(m.a)({onModalOpens:function(){u(Pf.walletConnect)}},b),{},{children:Object(pt.jsx)("div",{className:"btn btn-unlock btn-block",children:Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(pt.jsx)("div",{className:"d-flex flex-row method",children:Object(pt.jsxs)("div",{className:"title d-flex align-items-center",children:[Object(pt.jsx)(Tf,{className:"maiar-symbol maiar-app",height:"20"}),"Maiar App"]})}),Object(pt.jsx)(F.a,{icon:N.b,className:"arrow"})]})})})),Pf.walletConnect),j(Object(pt.jsx)(O.b.LedgerLoginButton,Object(m.a)(Object(m.a)({loginButtonText:"",onModalOpens:function(){u(Pf.ledger)}},b),{},{children:Object(pt.jsx)("div",{className:"btn btn-unlock btn-block",children:Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(pt.jsx)("div",{className:"d-flex flex-row method",children:Object(pt.jsxs)("div",{className:"title",children:[Object(pt.jsx)(xf,{className:"elrond-symbol body",height:"20"}),"Ledger"]})}),Object(pt.jsx)(F.a,{icon:N.b,className:"arrow"})]})})})),Pf.ledger),j(Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(O.b.WebWalletLoginButton,Object(m.a)(Object(m.a)({},b),{},{children:Object(pt.jsx)("div",{className:"btn btn-unlock btn-block",children:Object(pt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(pt.jsx)("div",{className:"d-flex flex-row method",children:Object(pt.jsxs)("div",{className:"title",children:[Object(pt.jsx)(uf,{className:"elrond-symbol body"}),"Elrond Web Wallet"]})}),Object(pt.jsx)(F.a,{icon:N.b,className:"arrow"})]})})})),Object(pt.jsx)("div",{className:"mt-spacer",children:Object(pt.jsx)("span",{className:"text-secondary",children:"New to Elrond?"})}),Object(pt.jsx)("div",{className:"mt-1",children:Object(pt.jsx)("a",{className:"link-style",href:"".concat(te.walletAddress,"/create"),target:"_blank",children:"Learn How to setup a wallet"})})]}))]})})},$f=function(e,t){return function(){var n=Object(c.memo)(t);return Object(c.useEffect)((function(){document.title=e}),[]),Object(pt.jsx)(n,{})}},_f=function(e){return"Redeem"===e},Vf=function(e){var t=e.token,n=e.contractRate,a=e.givesLockedTokens;if(!n)return{depositTokenID:t.identifier,depositedTokenPriceUSD:"...",receivedAmount:"...",receivedTokenID:"...",receivedTokenIconID:"..."};var i=t.nonce,r=t.balance,s=t.decimals,c=n.launchedToken,o=n.launchedTokenAmount,l=n.launchedTokenPriceUSD,d=n.launchedTokenRedeemBalance,u=n.acceptedToken,m=n.acceptedTokenAmount,b=n.acceptedTokenPriceUSD,j=n.acceptedTokenRedeemBalance,f=He({amount:r,denomination:s,showLastNonZeroDecimal:!0}),h=1===i,p=h?c.identifier:u.identifier,x=h?l:b,v=h?u:c,O=He({amount:h?m:o,denomination:v.decimals,showLastNonZeroDecimal:!0}),k=He({amount:h?d:j,denomination:h?c.decimals:u.decimals,showLastNonZeroDecimal:!0}),g=new je.a(O).times(new je.a(f)).dividedBy(new je.a(k)).toString(10),y=a?W:v.identifier;return{depositTokenID:p,depositedTokenPriceUSD:new je.a(x).toString(10),receivedAmount:g,receivedTokenID:v.identifier,receivedTokenIconID:y}},Wf=function(e){var t,n,a,i,r=e.tokens,s=e.priceDiscoveryContract,c=Mh().account.balance,o=[],l=s.acceptedToken,d=s.launchedToken;return[l.identifier,d.identifier].includes($)&&o.push({label:U,value:U,token:{name:U,identifier:U,decimals:M,balance:c}}),o.push({label:l.identifier,value:l.identifier,token:Object(m.a)(Object(m.a)({},l),{},{balance:null!==(t=null===(n=r.find((function(e){return e.identifier===l.identifier})))||void 0===n?void 0:n.balance)&&void 0!==t?t:"0"})}),o.push({label:d.identifier,value:d.identifier,token:Object(m.a)(Object(m.a)({},d),{},{balance:null!==(a=null===(i=r.find((function(e){return e.identifier===d.identifier})))||void 0===i?void 0:i.balance)&&void 0!==a?a:"0"})}),{selectOptions:o}},zf=Object(p.gql)(Lf||(Lf=Object(Bi.a)(["\n  query ($inputTokens: InputTokenModel!, $priceDiscoveryAddress: String!) {\n    depositBatchOnPriceDiscovery(\n      inputTokens: $inputTokens\n      priceDiscoveryAddress: $priceDiscoveryAddress\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Hf=function(e){var t=e.callbackRoute,n=e.priceDiscoveryAddress,a=e.hideModal,i=ur(),r=Wh(),s=o.a.useState(!1),c=Object(T.a)(s,2),l=c[0],d=c[1];return{depositBatchOnPriceDiscovery:function(e){var s=e.variables,c=e.sequential;d(!0),i({query:zf,variables:s}).then((function(e){if(e.data&&e.data.data){var i=e.data.data.depositBatchOnPriceDiscovery.map((function(e){return me(e)})),s=Object(ke.a)(Array(i.length).keys());r({transactions:i,callbackRoute:t,processingMessage:"Depositing token",successMessage:"Token deposited",submittedMessage:"Deposit token transactions submitted",pendingPoolAddress:n,grouping:c?s.map((function(e){return[e]})):[s]}),d(!1),a()}else d(!1)})).catch((function(e){console.log("depositBatchOnPriceDiscovery",e),d(!1)}))},depositBatchOnPriceDiscoveryLoading:l}},Yf=function(e){var t=e.identifiers,n=e.cacheKey,a=qr(n),i=a.fetchTokens,r=a.tokens,s=a.tokensLoading,o=a.tokensFetched;return c.useEffect((function(){i(t)}),[]),{tokens:r,depositDataLoading:s,depositDataFetched:o}},Gf=function(e){var t=e.token,n=e.tokenAmount,i=e.onMaxClick,r=a.denominateAmount,s=t?t.value:void 0,c=s===U,o=t?t.token.balance:"0",l=Ie(o)?o:"0",d=t?t.token.decimals:0,u=r({amount:c?ze(l):l,denomination:d}),m=r({amount:c?ze(l):l,denomination:d,showLastNonZeroDecimal:!0}),b="0"!==u&&parseFloat(n)!==parseFloat(u),j=function(e){e.preventDefault(),i(u)};return{MaxBtn:function(){return b?Object(pt.jsx)("a",{href:"/",className:"badge badge-pill badge-primary text-uppercase",onClick:j,onMouseDown:function(e){e.preventDefault()},children:"Max"}):null},AvailableBalance:function(){return Object(pt.jsxs)("div",{className:"mt-2 balance",children:[Object(pt.jsx)("span",{className:"text-secondary mr-2",children:"Balance:"}),s?Object(pt.jsx)(pt.Fragment,{children:r({amount:l,denomination:d,addCommas:!0})}):Object(pt.jsx)(pt.Fragment,{children:"-.-"})]})},balance:u,completeMaxBalance:b?void 0:m,denomination:d}},Zf=function(e){var t=e.priceDiscoveryContract,n=e.pair,i=e.showModal,r=e.setShowModal,s=function(e){return function(){r(e)}},c=t.address,l=t.acceptedToken,d=t.launchedToken,u=Yf({identifiers:[l.identifier,d.identifier],cacheKey:"priceDiscoveryAdd"}),m=u.tokens,b=u.depositDataFetched,j=u.depositDataLoading,f=Wf({tokens:m,priceDiscoveryContract:t}).selectOptions,h=Hf({callbackRoute:Nh.launch,priceDiscoveryAddress:c,hideModal:function(){r(!1)}}),p=h.depositBatchOnPriceDiscovery,x=h.depositBatchOnPriceDiscoveryLoading,v={amount:"",token:1===f.length?f[0]:void 0},O=Object(dt.a)().shape({amount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),q)})).test("funds","Insufficient funds",(function(e){if(e&&P){var t=new be.BigNumber(e);return new be.BigNumber(C).comparedTo(t)>=0}return!0})).test("minimum","Cannot be zero",(function(e){return!new be.BigNumber(null!==e&&void 0!==e?e:0).isZero()})).test("token","Token required",(function(e){return Boolean(e&&D)})),token:Object(dt.a)().nullable().test("req","Required",(function(e){return null!==e}))}),k=Object(qt.a)({initialValues:v,validationSchema:O,onSubmit:function(e){var t={tokenID:a.getSelectedValue(e.token),nonce:0,amount:ot(null!==I&&void 0!==I?I:e.amount,q)};p({variables:{inputTokens:t,priceDiscoveryAddress:c},sequential:t.tokenID===U})}}),g=k.setFieldValue,y=k.handleSubmit,w=k.errors,T=k.touched,N=k.values,S=k.handleBlur,A=k.handleChange,F=N.amount,P=N.token,D=a.getSelectedValue(P),R=Gf({token:P,tokenAmount:F,onMaxClick:function(e){g("amount",e,!0)}}),E=R.MaxBtn,L=R.AvailableBalance,C=R.balance,I=R.completeMaxBalance,q=R.denomination;o.a.useEffect((function(){if(f){var e=P?f.find((function(e){return e.value===P.value&&e.token.balance!==P.token.balance})):void 0;e&&g("token",e)}}),[f]);var M=!j&&b,B=!j&&!b,$=D===U;return Object(pt.jsx)(pt.Fragment,{children:Object(pt.jsxs)(Pc.a,{show:i,backdrop:!0,onHide:s(!1),className:"modal-container",animation:!1,centered:!0,children:[j&&Object(pt.jsx)($p,{}),B&&Object(pt.jsx)("div",{className:"my-4",children:Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load modal"})}),M&&Object(pt.jsx)("form",{onSubmit:y,noValidate:!0,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mt-n2 lead",children:[Object(pt.jsx)("div",{className:"pool-icon mr-2",children:Object(pt.jsx)(vv,{pair:n,size:"lg"})}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap","data-testid":"removeLiqModalTitle",children:[Object(pt.jsx)("span",{children:"Deposit in"}),"\xa0",Object(pt.jsx)(Ov,{pair:n}),"\xa0",Object(pt.jsx)("span",{children:"Pool"})]})]}),Object(pt.jsxs)("div",{className:"form-group mb-0 text-left",children:[Object(pt.jsx)("label",{htmlFor:"amount",className:"mb-2 line-height-1",children:"\xa0"}),Object(pt.jsxs)("div",{className:"token-amount-input-select-max ".concat("token"in w&&"token"in T?"is-invalid":""," ").concat("amount"in w&&"amount"in T?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,"data-testid":"amountInput",name:"amount",placeholder:"Amount",value:F,handleChange:A,handleBlur:S}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:Object(pt.jsx)(E,{})}),Object(pt.jsx)(Ct.TokenSelect,{id:"token",name:"token",options:f,value:P,onChange:function(e){g("token",e)},isSearchable:!1,onBlur:S})]}),Object(pt.jsxs)("small",{className:"d-flex flex-column flex-sm-row",children:["amount"in w&&"amount"in T&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-2","data-testid":"invalidAmount",children:w.amount}),Object(pt.jsx)("div",{className:"d-flex ml-0 ml-sm-auto line-height-1",children:Object(pt.jsx)(L,{})})]})]}),Object(pt.jsx)("div",{className:"my-spacer",children:Object(pt.jsx)(ap,{balance:C,amount:F,onChange:function(e){g("amount",e,!0)}})}),Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("button",{className:"btn btn-dark btn-lg flex-even mr-2",onClick:s(!1),children:"Cancel"}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg flex-even ml-2",disabled:x,children:x?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Deposit"})})]}),P&&Object(pt.jsx)("div",{className:"text-secondary text-center mt-3",children:Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign"," ",Object(pt.jsx)("strong",{children:$?Object(pt.jsx)(pt.Fragment,{children:"2 transactions"}):Object(pt.jsx)(pt.Fragment,{children:"1 transaction"})}),Object(pt.jsx)(wo,{info:Object(pt.jsx)("div",{className:"text-left",children:Object(pt.jsx)("ul",{className:"mb-0 pl-3",children:$?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("li",{children:"1st - Wrap EGLD"}),Object(pt.jsx)("li",{children:"2nd - Deposit tokens"})]}):Object(pt.jsx)("li",{children:"Deposit tokens"})})})})]})})]})})]})})},Kf=function(e){var t=e.priceDiscoveryContract,n=e.pair,a=e.disableBtn,i=o.a.useState(!1),r=Object(T.a)(i,2),s=r[0],c=r[1];return{DepositBtn:o.a.useMemo((function(){return a?null:Object(pt.jsx)("button",{"data-testid":"depositBtn",className:"btn btn-primary w-100",onClick:function(e){e.stopPropagation(),a||c(!0)},disabled:a,children:"Deposit"})}),[a]),DepositModal:o.a.useMemo((function(){return s?Object(pt.jsx)(Zf,{priceDiscoveryContract:t,pair:n,showModal:s,setShowModal:function(e){c(e)}}):null}),[t,n,s])}},Xf=Object(p.gql)(Cf||(Cf=Object(Bi.a)(["\n  query ($inputTokens: InputTokenModel!, $priceDiscoveryAddress: String!) {\n    redeemTokensFromPriceDiscovery(\n      inputTokens: $inputTokens\n      priceDiscoveryAddress: $priceDiscoveryAddress\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Qf=function(e){var t=e.ref,n=e.callbackRoute,a=e.hideModal,i=ur(),r=Wh(),s=o.a.useState(!1),c=Object(T.a)(s,2),l=c[0],d=c[1];return{redeemTokens:function(e){var s=e.variables,c=e.pendingPoolAddress,o=e.pendingNftTransactions;null!==t.current&&(d(!0),i({query:Xf,variables:s}).then((function(e){if(null!==t.current&&e.data&&e.data.data){var i=e.data.data.redeemTokensFromPriceDiscovery;r({transactions:[me(i)],callbackRoute:n,processingMessage:"Redeem tokens",successMessage:"Tokens redeemed",submittedMessage:"Redeem tokens transactions submitted",pendingPoolAddress:c,pendingNftTransactions:o}),d(!1),a&&a()}})).catch((function(e){console.log("redeemTokens",e),d(!1)})))},redeemTokensLoading:l}},Jf=function(e){var t=e.priceDiscoveryContract,n=e.redeemToken,a=e.contractRate,i=e.pair,r=e.showModal,s=e.setShowModal,c=o.a.useRef(null),l=function(e){return function(){s(e)}},d=t.address,u=t.unlockEpoch,m=n.collection,b=n.nonce,j=n.balance,f=n.decimals,h=He({amount:j,denomination:f,addCommas:!0}),p=zj({unlockEpoch:u,className:"mb-spacer",showClaimMsg:!0}),x=p.LockedTokensWarning,v=p.showLockedTokensWarning,O=Vf({token:n,contractRate:a,givesLockedTokens:v}),k=O.depositTokenID,g=O.receivedTokenID,y=O.receivedTokenIconID,w=O.receivedAmount,T=Qf({ref:c,callbackRoute:Nh.launch,hideModal:function(){s(!1)}}),N=T.redeemTokens,S=T.redeemTokensLoading;return Object(pt.jsx)(Pc.a,{show:r,backdrop:!0,onHide:l(!1),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("div",{ref:c,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mt-n2 lead",children:[Object(pt.jsx)("div",{className:"pool-icon mr-2",children:Object(pt.jsx)(vv,{pair:i,size:"lg"})}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap","data-testid":"redeemTokensModalTitle",children:[Object(pt.jsx)("span",{children:"Redeem"}),"\xa0",Object(pt.jsx)(Ov,{pair:i}),"\xa0",Object(pt.jsx)("span",{children:"deposit"})]})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-spacer",children:[h,Object(pt.jsxs)("span",{className:"ml-1",children:[Object(pt.jsx)(Rt,{token:k})," deposit"]})]}),Object(pt.jsx)("div",{className:"mb-2 text-left",children:"You will receive"}),Object(pt.jsx)("div",{className:"card mb-4 border-transparent",children:Object(pt.jsx)("div",{className:"card-body",children:Object(pt.jsxs)("div",{className:"d-flex flex-column flex-sm-row justify-content-sm-between",children:[Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:y})}),Object(pt.jsxs)("div",{className:"d-sm-none mr-2",children:[Ye(w),"\xa0"]}),Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Rt,{token:g})})]}),Object(pt.jsx)("div",{className:"ml-3 d-none d-sm-flex align-items-sm-center","data-testid":"redeemAmount",children:Ye(w)})]})})}),x,Object(pt.jsxs)("div",{className:"mx-n2 d-flex flex-wrap-reverse flex-sm-nowrap justify-content-between align-items-center",children:[Object(pt.jsx)("button",{className:"btn btn-lg btn-dark btn-block mx-2 mt-2",onClick:l(!1),children:"Cancel"}),Object(pt.jsx)("button",{className:"btn btn-lg btn-primary btn-block mx-2 mt-2",onClick:function(){N({variables:{inputTokens:{tokenID:m,nonce:b,amount:j},priceDiscoveryAddress:d},pendingPoolAddress:t.address})},disabled:S,children:S?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Redeem"})})]}),Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign ",Object(pt.jsx)("strong",{children:"1 transaction"}),Object(pt.jsx)(wo,{info:Object(pt.jsx)("div",{className:"text-left",children:Object(pt.jsx)(pt.Fragment,{children:"Redeem tokens"})})})]})]})})})},eh=function(e){var t=e.priceDiscoveryContract,n=e.redeemToken,a=e.disableBtn,i=e.contractRate,r=e.pair,s=o.a.useState(!1),c=Object(T.a)(s,2),l=c[0],d=c[1];return{RedeemBtn:o.a.useMemo((function(){return Object(pt.jsx)("button",{className:"btn btn-sm btn-success",style:{minWidth:"5.62rem"},disabled:a,onClick:function(e){e.stopPropagation(),a||d(!0)},children:"Redeem"})}),[a]),RedeemModal:o.a.useMemo((function(){return l?Object(pt.jsx)(Jf,{priceDiscoveryContract:t,redeemToken:n,contractRate:i,pair:r,showModal:l,setShowModal:function(e){d(e)}}):null}),[t,n,r,i,l])}},th=function(e){var t=e.tokenAmount,n=e.token,i=e.onMaxClick,r=a.denominateAmount,s=n.decimals,c=r({amount:n.balance,denomination:s}),o=r({amount:n.balance,denomination:s,showLastNonZeroDecimal:!0}),l="0"!==c&&parseFloat(t)!==parseFloat(c),d=function(e){e.preventDefault(),i&&i(c)};return{MaxBtn:function(){return l?Object(pt.jsx)("a",{href:"/",className:"badge badge-pill badge-primary text-uppercase",onClick:d,onMouseDown:function(e){e.preventDefault()},children:"Max"}):null},AvailableBalance:function(){return Object(pt.jsx)(pt.Fragment,{children:r({amount:n.balance,denomination:s,addCommas:!0})})},balance:c,denomination:s,completeMaxBalance:l?void 0:o}},nh=Object(p.gql)(If||(If=Object(Bi.a)(["\n  query ($inputTokens: InputTokenModel!, $priceDiscoveryAddress: String!) {\n    withdrawFromPriceDiscovery(\n      inputTokens: $inputTokens\n      priceDiscoveryAddress: $priceDiscoveryAddress\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),ah=function(e){var t=e.ref,n=e.priceDiscoveryAddress,a=e.callbackRoute,i=e.hideModal,r=ur(),s=Wh(),c=o.a.useState(!1),l=Object(T.a)(c,2),d=l[0],u=l[1];return{withdrawBatchFromPriceDiscovery:function(e){var c=e.variables;null!==t.current&&(u(!0),r({query:nh,variables:c}).then((function(e){if(null!==t.current&&e.data&&e.data.data){var r=e.data.data.withdrawFromPriceDiscovery;s({transactions:[me(r)],callbackRoute:a,processingMessage:"Withdrawing deposit",successMessage:"Deposit withdrawn",submittedMessage:"Withdraw deposit transactions submitted",pendingPoolAddress:n}),u(!1),i()}})).catch((function(e){console.log("withdrawBatchFromPriceDiscovery",e),u(!1)})))},withdrawBatchFromPriceDiscoveryLoading:d}},ih=function(e){var t=e.priceDiscoveryContract,n=e.penaltyPercent,a=e.redeemToken,i=e.pair,r=e.showModal,s=e.setShowModal,c=o.a.useRef(null),l=o.a.useState("..."),d=Object(T.a)(l,2),u=d[0],m=d[1],b=function(e){return function(){s(e)}},j=t.address,f=t.launchedToken,h=t.acceptedToken,p=a.collection,x=a.nonce,v=1===x,O=ah({ref:c,priceDiscoveryAddress:t.address,callbackRoute:Nh.launch,hideModal:function(){s(!1)}}),k=O.withdrawBatchFromPriceDiscovery,g=O.withdrawBatchFromPriceDiscoveryLoading,y=Object(dt.a)().shape({amount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),M)})).test("minAmount","Must select an amount",(function(e){return!e||new je.a(e).isGreaterThan(0)})).test("funds","Insufficient funds",(function(e){if(void 0!==e){var t=new je.a(e);return new je.a(q).comparedTo(t)>=0}return!0}))}),w=Object(qt.a)({initialValues:{amount:""},validationSchema:y,onSubmit:function(e){var t={tokenID:p,nonce:x,amount:ot(null!==B&&void 0!==B?B:e.amount,M)};k({variables:{inputTokens:t,priceDiscoveryAddress:j}})}}),N=w.setFieldValue,S=w.handleSubmit,A=w.values,F=w.handleChange,P=w.handleBlur,D=w.errors,R=w.touched,E=A.amount,L=th({tokenAmount:E,token:a,onMaxClick:function(e){N("amount",e,!0)}}),C=L.MaxBtn,I=L.AvailableBalance,q=L.balance,M=L.denomination,B=L.completeMaxBalance,U=v?f:h,$=U.identifier,_=Ye((100*n).toString(),2);return o.a.useEffect((function(){!function(){if(Ce(E)){var e=new je.a(ot(null!==B&&void 0!==B?B:E,U.decimals)),t=e.times(n);m(He({amount:e.minus(t).toString(10),denomination:U.decimals,addCommas:!0}))}else m("...")}()}),[n,E,U]),Object(pt.jsx)(Pc.a,{show:r,backdrop:!0,onHide:b(!1),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("form",{onSubmit:S,noValidate:!0,ref:c,className:"w-100 card",children:Object(pt.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3 mt-n2 lead",children:[Object(pt.jsx)("div",{className:"pool-icon mr-2",children:Object(pt.jsx)(vv,{pair:i,size:"lg"})}),Object(pt.jsxs)("div",{className:"d-flex flex-wrap","data-testid":"removeLiqModalTitle",children:[Object(pt.jsx)("span",{children:"Withdraw"}),"\xa0",Object(pt.jsx)(Ov,{pair:i}),"\xa0",Object(pt.jsx)("span",{children:"deposit"})]})]}),Object(pt.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(pt.jsx)(I,{}),Object(pt.jsx)("span",{className:"ml-1",children:Object(pt.jsx)(yt,{token:a.collection})})]}),Object(pt.jsxs)("div",{className:"form-group text-left mb-0",children:[Object(pt.jsx)("label",{htmlFor:"amount",className:"mb-2 line-height-1",children:"Amount"}),Object(pt.jsxs)("div",{className:"token-amount-input-max ".concat("amount"in D&&"amount"in R?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,name:"amount","data-testid":"amountInput",placeholder:"Amount",value:E,handleChange:F,handleBlur:P}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:Object(pt.jsx)(C,{})})]}),"amount"in D&&"amount"in R&&Object(pt.jsx)("div",{className:"invalid-feedback mt-2","data-testid":"invalidAmount",children:D.amount})]}),Object(pt.jsx)("div",{className:"my-spacer",children:Object(pt.jsx)(ap,{balance:q,amount:E,onChange:function(e){N("amount",e,!0)}})}),Object(pt.jsx)("div",{className:"mb-2 text-left",children:"You will receive"}),Object(pt.jsx)("div",{className:"card mb-4 border-transparent",children:Object(pt.jsxs)("div",{className:"card-body",children:[Object(pt.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[Object(pt.jsx)("div",{className:"text-secondary",children:"Withdraw penalty"}),Object(pt.jsxs)("div",{children:[_,"%"]})]}),Object(pt.jsxs)("div",{className:"d-flex flex-column flex-sm-row justify-content-sm-between",children:[Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:$})}),Object(pt.jsxs)("div",{className:"d-sm-none mr-2",children:[u,"\xa0"]}),Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Rt,{token:$})})]}),Object(pt.jsx)("div",{className:"ml-3 d-none d-sm-flex align-items-sm-center","data-testid":"receivedAmount",children:u})]})]})}),Object(pt.jsxs)("div",{className:"mx-n2 d-flex flex-wrap-reverse flex-sm-nowrap justify-content-between align-items-center",children:[Object(pt.jsx)("button",{className:"btn btn-lg btn-dark btn-block mx-2 mt-2",onClick:b(!1),children:"Cancel"}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary btn-block mx-2 mt-2",disabled:g,children:g?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Withdraw"})})]}),Object(pt.jsxs)("div",{className:"text-secondary text-center mt-3",children:["You will be asked to sign ",Object(pt.jsx)("strong",{children:"1 transaction"}),Object(pt.jsx)(wo,{info:Object(pt.jsx)("div",{className:"text-left",children:"Withdraw deposit"})})]})]})})})},rh=function(e){var t=e.priceDiscoveryContract,n=e.penaltyPercent,a=e.redeemToken,i=e.disableBtn,r=e.pair,s=o.a.useState(!1),c=Object(T.a)(s,2),l=c[0],d=c[1];return{WithdrawBtn:o.a.useMemo((function(){return Object(pt.jsx)("button",{className:"btn btn-sm btn-primary ".concat(i?"d-none":""),style:{minWidth:"5.62rem"},disabled:i,onClick:function(e){e.stopPropagation(),i||d(!0)},children:"Withdraw"})}),[i]),WithdrawModal:o.a.useMemo((function(){return l?Object(pt.jsx)(ih,{priceDiscoveryContract:t,penaltyPercent:n,redeemToken:a,pair:r,showModal:l,setShowModal:function(e){d(e)}}):null}),[t,n,a,r,l])}},sh=function(e){var t,n,a=e.priceDiscoveryContract,i=e.redeemToken,r=e.contractRate,s=e.pair,c=null===r||void 0===r?void 0:r.currentPhase,o=!!(n=null===c||void 0===c?void 0:c.name)&&"Idle"!==n&&"Redeem"!==n,l=_f(null===c||void 0===c?void 0:c.name),d=rh({priceDiscoveryContract:a,redeemToken:i,penaltyPercent:null!==(t=null===c||void 0===c?void 0:c.penaltyPercent)&&void 0!==t?t:0,pair:s,disableBtn:!o}),u=d.WithdrawBtn,m=d.WithdrawModal,b=eh({priceDiscoveryContract:a,redeemToken:i,contractRate:r,pair:s,disableBtn:!l}),j=b.RedeemBtn,f=b.RedeemModal,h=a.launchedToken,p=a.acceptedToken,x=a.unlockEpoch,v=i.balance,O=i.nonce,k=i.decimals,g=i.collection,y=zj({unlockEpoch:x}).showLockedTokensWarning,w=Vf({token:i,contractRate:r,givesLockedTokens:y}),T=w.receivedTokenIconID,N=w.receivedTokenID,S=w.receivedAmount,A=1===O?h:p,F=He({amount:v,denomination:k,addCommas:!0}),P=function(e){var t=e.isDeposit;return Object(pt.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:Object(pt.jsxs)("div",{className:"d-flex align-items-center flex-fill",children:[Object(pt.jsx)("div",{className:"mr-2 token-icon-md",children:Object(pt.jsx)(Xh,{token:t?g:T})}),Object(pt.jsxs)("div",{className:"d-flex flex-fill justify-content-between align-items-center flex-wrap",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center",children:Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("small",{className:"text-secondary",children:t?Object(pt.jsx)(pt.Fragment,{children:"Deposited:"}):Object(pt.jsx)(pt.Fragment,{children:"Redeemable:"})}),Object(pt.jsxs)("div",{children:[t?F:Ye(S,2),Object(pt.jsx)("span",{className:"ml-1",children:Object(pt.jsx)(Rt,{token:t?A.identifier:N})})]})]})}),Object(pt.jsxs)("div",{className:"mt-2",children:[t&&u,!t&&j]})]})]})})};return Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)(P,{isDeposit:!0}),Object(pt.jsx)("div",{className:"my-1"}),Object(pt.jsx)(P,{}),m,f]})},ch=function(e){var t,n,a=e.priceDiscoveryContract,i=e.deposits,r=o.a.useRef(null),s=Object(O.p)().isLoggedIn,c=a.address,l=a.launchedToken,d=a.acceptedToken,u=a.redeemToken,b=Object(g.c)(Br).priceDiscoveryContractsRate,j=Rh({pendingPoolAddress:c,ref:r}).preventActions,f=Je({priceDiscoveryContractsRate:b,contractAddress:c}),h={firstToken:l,secondToken:Object(m.a)(Object(m.a)({},d),{},{identifier:d.identifier===$?U:d.identifier}),address:""},p=!!(n=null===f||void 0===f?void 0:f.currentPhase.name)&&("NoPenalty"===n||"LinearIncreasingPenalty"===n),x=["OnlyWithdrawFixedPenalty","Redeem"].includes(null!==(t=null===f||void 0===f?void 0:f.currentPhase.name)&&void 0!==t?t:""),v=Kf({priceDiscoveryContract:a,pair:h,disableBtn:j||!p}),k=v.DepositBtn,y=v.DepositModal,w=function(){return Object(pt.jsxs)("div",{className:"d-flex flex-column justify-content text-center",children:[Object(pt.jsx)("div",{className:"token-icon-xl mb-4 d-flex justify-content-center",children:Object(pt.jsx)(Xh,{token:u.collection})}),Object(pt.jsxs)("p",{className:"mb-2 h4 font-weight-bold d-inline-block",children:["Discover ",Object(pt.jsx)(yt,{token:l.identifier}),"!"]}),Object(pt.jsxs)("p",{className:"small text-secondary",children:["Welcome to ",Object(pt.jsx)(yt,{token:l.identifier})," Price Discovery phase. Connect your wallet"," ",!x&&Object(pt.jsx)(pt.Fragment,{children:"to deposit tokens or"})," to see your deposits."]})]})},T=function(){return Object(pt.jsxs)("div",{className:"d-flex flex-column justify-content text-center",children:[Object(pt.jsx)("div",{className:"token-icon-xl mb-4 d-flex justify-content-center",children:Object(pt.jsx)(Xh,{token:u.collection})}),Object(pt.jsx)("p",{className:"mb-2 h4 font-weight-bold d-inline-block",children:"No deposits found"}),Object(pt.jsx)("p",{className:"small text-secondary",children:x?Object(pt.jsx)(pt.Fragment,{children:"Depositing phase has ended."}):Object(pt.jsxs)(pt.Fragment,{children:["Deposit ",Object(pt.jsx)(yt,{token:l.identifier})," and/or"," ",Object(pt.jsx)(yt,{token:d.identifier})," and participate in Price Discovery."]})})]})};return Object(pt.jsxs)("div",{className:"card mb-spacer",ref:r,children:[Object(pt.jsx)("div",{className:"card-body",children:j?Object(pt.jsx)($p,{title:"Waiting for transactions to be processed"}):Object(pt.jsxs)(pt.Fragment,{children:[s&&i.length>0?Object(pt.jsx)(pt.Fragment,{children:i.map((function(e,t){return Object(pt.jsx)("div",{className:"".concat(0===t&&i.length>1?"mb-3 pb-3 border-bottom":""," "),children:Object(pt.jsx)(sh,{redeemToken:e,pair:h,priceDiscoveryContract:a,contractRate:f})},e.identifier)}))}):Object(pt.jsx)(pt.Fragment,{children:s?Object(pt.jsx)(T,{}):Object(pt.jsx)(w,{})}),s?Object(pt.jsx)(pt.Fragment,{children:k&&Object(pt.jsx)("div",{className:"mt-4",children:k})}):Object(pt.jsx)(kO,{large:!0})]})}),y]})},oh=function(e){if(!e||!e.assets)return[];var t=e.assets.social?Object.keys(e.assets.social).map((function(t){var n;return{icon:t,title:t,link:null===(n=e.assets)||void 0===n?void 0:n.social[t]}})):[];return[Object(m.a)({},e.assets.website?{icon:"website",title:"website",link:e.assets.website}:{})].concat(Object(ke.a)(t))},lh=["fallback","src"],dh=function(e){var t=e.fallback,n=e.src,a=Object(Gb.a)(e,lh),i=Object(c.useState)(n),r=Object(T.a)(i,2),s=r[0],o=r[1];return Object(pt.jsx)("img",Object(m.a)({src:s||t,onError:function(){return o(t)}},a))},uh=function(e){var t,n,a=e.priceDiscoveryContract,i=Object(g.c)(kt),r=at(a.launchedToken.identifier),s=i.find((function(e){return e.identifier===r})),c=oh(s),o="ITHEUM-df6f26"===a.launchedToken.identifier&&null!==s&&void 0!==s&&null!==(t=s.assets)&&void 0!==t&&t.description?"Itheum is the world\u2019s first decentralized multi-chain data brokerage platform that empowers users and businesses to own and trade their data in Web3 and the Metaverse. Itheum will use the high throughput, inexpensive, carbon-negative, and user-friendly Elrond blockchain to enable a sustainable web3 data economy driven by a compelling set of economic incentives.":null===s||void 0===s||null===(n=s.assets)||void 0===n?void 0:n.description;return Object(pt.jsxs)("div",{className:"description-card card mb-spacer w-100",children:[Object(pt.jsx)(dh,{className:"background",src:null!==s&&void 0!==s&&s.name?"/Discover/".concat(s.name,"BG.jpg"):"/Discover/FallbackBG.png",fallback:"/Discover/FallbackBG.png",alt:" "}),Object(pt.jsxs)("div",{className:"card-body pt-0 text-center",children:[Object(pt.jsx)("div",{className:"icon d-inline-flex align-items-center justify-content-center mx-auto",children:Object(pt.jsx)(Xh,{token:a.launchedToken.identifier})}),Object(pt.jsx)("h1",{className:"h4 font-weight-500 mt-3 mb-spacer",children:a.launchedToken.name}),s&&s.assets&&s.assets.description&&Object(pt.jsx)("h2",{className:"h6 small mb-4 text-secondary",children:o}),c&&Object(pt.jsx)(Fv,{icons:c})]})]})},mh=function(e){var t=e.priceDiscoveryContract,n=e.cacheKey,a=Object(g.c)(rd),i=Cr(n),r=i.fetchNfts,s=i.nfts,c=i.nftsLoading,l=i.nftsError,d=dr(),u=d.fetchTokenDetails,m=d.tokenDetailsLoading,b=d.tokenDetailsError,j=lr(),f=j.fetchNftDetails,h=j.nftDetailsLoading,p=j.nftDetailsError;return o.a.useEffect((function(){if(t){var e=t.launchedToken,n=t.acceptedToken,a=t.redeemToken,i=[e.identifier,n.identifier],s=[a.collection];u(i),r(s),f([].concat(s,[W]))}}),[t,a]),{deposits:s,depositsLoading:c||m||h,depositsError:l||b||p}},bh=Object(p.gql)(qf||(qf=Object(Bi.a)(["\n  query {\n    priceDiscoveryContracts {\n      address\n      lockingScAddress\n      acceptedToken {\n        identifier\n        name\n        decimals\n      }\n      launchedToken {\n        identifier\n        name\n        decimals\n      }\n      redeemToken {\n        collection\n        name\n        decimals\n      }\n\n      startBlock\n      endBlock\n      unlockEpoch\n\n      noLimitPhaseDurationBlocks\n      fixedPenaltyPhaseDurationBlocks\n      linearPenaltyPhaseDurationBlocks\n\n      minLaunchedTokenPrice\n      fixedPenaltyPercentage\n      penaltyMaxPercentage\n      penaltyMinPercentage\n    }\n  }\n"]))),jh=Se((function(e){return e.launchCache}),(function(e,t){return t}),(function(e,t){var n;return null!=t&&null!==(n=null===e||void 0===e?void 0:e[t])&&void 0!==n?n:null})),fh=function(e){var t,n=e.cacheKey,a=ur(),i=Object(g.b)(),r=Object(g.c)((function(e){return jh(e,n)}));return o.a.useEffect((function(){a({query:bh,variables:{offset:0,pairsLimit:G}}).then((function(e){var t;if(null!=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)){var a=e.data.data;i(ra({cacheKey:n,launchCache:{priceDiscoveryContracts:a.priceDiscoveryContracts,isFetched:!0,isError:!1}}))}else i(sa({cacheKey:n}))})).catch((function(e){console.log("discover useFetchPageData",e),i(sa({cacheKey:n}))}))}),[]),{priceDiscoveryContracts:null!==(t=null===r||void 0===r?void 0:r.priceDiscoveryContracts)&&void 0!==t?t:[],isFetched:Boolean(null===r||void 0===r?void 0:r.isFetched),isError:Boolean(null===r||void 0===r?void 0:r.isError)}},hh=n(317),ph=function(){var e=or().getCurrentBlockForShard,t=o.a.useState(),n=Object(T.a)(t,2),a=n[0],i=n[1],r=function(){var t=Object(j.a)(h.a.mark((function t(){var n,a,r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(1);case 2:n=t.sent,a=n.data,n.success&&i(null!==(r=null===(s=a[0])||void 0===s?void 0:s.nonce)&&void 0!==r?r:void 0);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return o.a.useEffect((function(){r()}),[]),a},xh=function(e){var t=o.a.useRef(null),n=o.a.useState("0"),a=Object(T.a)(n,2),i=a[0],r=a[1],s=o.a.useState("0"),c=Object(T.a)(s,2),l=c[0],d=c[1],u=o.a.useState("0"),m=Object(T.a)(u,2),b=m[0],j=m[1],f=o.a.useState("0"),h=Object(T.a)(f,2),p=h[0],x=h[1],v=function(){if(void 0!==e&&null!==t.current){var n=he()(),a=he()(e).diff(n),i=he.a.duration(a),s=Math.floor(i.days()),c=Math.floor(i.hours()),o=i.minutes(),l=i.seconds();r("".concat(s>0?s:0)),d("".concat(c>0?c:0)),j("".concat(o>0?o:0)),x("".concat(l>0?l:0))}};o.a.useEffect((function(){if(e){v();var t=setInterval(v,1e3);return function(){clearInterval(t)}}}),[e]);return{PhaseCountdown:function(){return e?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"d-none",ref:t}),parseInt(i)>0?"".concat(i,"d"):""," ",l,"h ",b,"m"," ",0===parseInt(i)?"".concat(p,"s"):""]}):Object(pt.jsx)(pt.Fragment,{children:"..."})}}},vh=function(e){var t,n=e.priceDiscoveryContract,a=Object(g.c)(St),i=Object(g.c)(Br).priceDiscoveryContractsRate,r=o.a.useState(),s=Object(T.a)(r,2),c=s[0],l=s[1],d=n.address,u=n.launchedToken,j=n.acceptedToken,f=n.unlockEpoch-a.epoch,h=mo(null!==f&&void 0!==f?f:0),p=h.WithdrawPeriodCountdown,x=h.showCountdown,v=Je({priceDiscoveryContractsRate:i,contractAddress:d}),O=ph(),k=null===v||void 0===v?void 0:v.currentPhase,y=k?null===c||void 0===c?void 0:c.find((function(e){return e.contractName===(null===k||void 0===k?void 0:k.name)})):void 0,w=xh(null===y||void 0===y?void 0:y.endDate).PhaseCountdown;o.a.useEffect((function(){!c&&O&&l(function(e){var t=e.stats,n=e.currentBlock,a=e.priceDiscoveryContract;if(!n)return[];var i=a.startBlock,r=a.noLimitPhaseDurationBlocks,s=a.linearPenaltyPhaseDurationBlocks,c=a.fixedPenaltyPhaseDurationBlocks,o=a.fixedPenaltyPercentage,l=a.penaltyMaxPercentage,d=a.penaltyMinPercentage,u=Ye((100*o).toString(),0),m=Ye((100*d).toString(),0),b=Ye((100*l).toString(),0),j={name:"Prestart",contractName:"Idle",startBlock:0,endBlock:i},f={name:"Start deposits",contractName:"NoPenalty",startBlock:i,endBlock:i+r,penalty:"0%"},h={name:"Withdraw penalty",contractName:"LinearIncreasingPenalty",startBlock:f.endBlock,endBlock:f.endBlock+s,penalty:"".concat(m,"% - ").concat(b,"%")},p={name:"Stop deposits",contractName:"OnlyWithdrawFixedPenalty",startBlock:h.endBlock,endBlock:h.endBlock+c,penalty:"".concat(u,"%")},x=[j,f,h,p,{name:"Redeem",contractName:"Redeem",startBlock:p.endBlock,endBlock:0}];return x.forEach((function(e){var a=(e.endBlock-n)*(t.refreshRate/1e3),i=he()().utc().add(a>0?a:0,"seconds").format();e.endDate=i})),x}({stats:a,currentBlock:O,priceDiscoveryContract:n}))}),[a,O,n]);var N="Redeem"===(null===y||void 0===y?void 0:y.name);return Object(pt.jsx)("div",{className:"card timeline mb-spacer d-flex flex-grow-1",children:Object(pt.jsxs)("div",{className:"card-body p-3",children:[!N&&Object(pt.jsx)("div",{className:"card-bg-light d-flex flex-column justify-content-center align-items-center p-3 mb-4 rounded shadow-sm",children:Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsxs)("div",{className:"d-flex flex-column mb-3 text-center",children:[Object(pt.jsx)("small",{className:"text-secondary",children:"Current phase"}),Object(pt.jsx)("div",{className:"h5 font-weight-500 mb-0",children:null!==(t=null===y||void 0===y?void 0:y.name)&&void 0!==t?t:"..."})]}),Object(pt.jsxs)("div",{className:"d-flex flex-column text-center",children:[Object(pt.jsx)("small",{className:"text-secondary",children:"Next phase begins in"}),Object(pt.jsx)("div",{className:"h5 font-weight-500 mb-0 text-primary",children:Object(pt.jsx)(w,{})})]})]})}),Object(pt.jsx)("div",{className:"mb-0 h6",children:"Price Discovery Phases"}),c?Object(pt.jsx)("div",{className:"timeline-wrapper py-4 pl-4",children:c.map((function(e,t){var n=e.name,a=e.penalty,i=e.startBlock,r=e.endBlock,s="50%",o="Prestart"!==n&&"Redeem"!==n?6*(r-i)/60:void 0,l=o?he.a.duration(o,"minutes"):void 0,d=l?Math.floor(l.hours()):void 0,f=l?l.minutes():void 0,h=function(e){var t=e.timelinePhaseIndex,n=e.timelinePhases,a=e.currentTimelinePhase,i=void 0!==a?n.indexOf(a):void 0;return void 0!==i&&i>t}({timelinePhaseIndex:t,timelinePhases:c,currentTimelinePhase:y});if("Prestart"!==n&&"Redeem"!==n&&O&&O>=i&&O<=r){var v=r-i,k=r-O;k>0&&v-k>0&&(s="".concat(((v-k)/v*100).toFixed(),"%"))}var g=["Withdraw penalty","Stop deposits"].includes(n),w=function(){return g?Object(pt.jsx)(F.a,{icon:hh.faExclamationTriangle,className:"text-warning mr-1"}):null};return Object(pt.jsxs)("div",{className:"step d-flex flex-column ".concat(h?"completed":""),children:[Object(pt.jsx)("span",{children:Object(pt.jsxs)("span",{className:"font-weight-500",children:[n,(d||f)&&Object(pt.jsxs)("small",{className:"text-secondary ml-1",children:["(~",d,"h",f&&f>0?" ".concat(f,"m"):"",")"]})]})}),Object(pt.jsxs)("small",{className:"status-details d-flex flex-column",style:Object(b.a)({},"--progress",s),children:["Prestart"===n&&Object(pt.jsx)("span",{className:"text-secondary mb-1",children:"Preparing price discovery"}),"Start deposits"===n&&Object(pt.jsx)(pt.Fragment,{children:Object(pt.jsx)("span",{className:"text-secondary mb-1",children:"Both deposits and withdrawals are enabled."})}),"Withdraw penalty"===n&&Object(pt.jsx)("span",{className:"text-secondary mb-1",children:"Deposits are enabled but there is a penalty for withdrawing."}),"Stop deposits"===n&&Object(pt.jsx)("span",{className:"text-secondary mb-1",children:"Withdrawals are still enabled, but with penalty."}),"Redeem"===n&&Object(pt.jsxs)("span",{children:[Object(pt.jsx)("span",{className:"text-secondary mr-1",children:"You can claim your"}),Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsxs)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip-phase-".concat(t)},e),{},{children:["Unlockable in"," ",x?Object(pt.jsx)(p,{}):"..."]}))},children:Object(pt.jsx)("div",{className:"underline-dotted-secondary cursor-text d-inline-block mr-1",onClick:function(e){e.preventDefault(),e.stopPropagation()},children:"locked"})}),Object(pt.jsxs)("span",{className:"text-secondary",children:[Object(pt.jsx)(Rt,{token:u.identifier})," /"," ",Object(pt.jsx)(Rt,{token:j.identifier})," ","tokens"]})]}),a&&Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)(w,{}),Object(pt.jsx)("span",{className:"text-secondary mr-1",children:"Withdraw penalty:"}),Object(pt.jsx)("span",{children:Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip-phase-".concat(t)},e),{},{children:Object(pt.jsxs)("div",{className:"text-left",children:["Start deposits"===n&&Object(pt.jsx)(pt.Fragment,{children:"Free withdrawals."}),"Withdraw penalty"===n&&Object(pt.jsx)(pt.Fragment,{children:"Penalty will have a linear increase during this phase, starting from a minimum value to a maximum at the end of it."}),"Stop deposits"===n&&Object(pt.jsx)(pt.Fragment,{children:"Fixed penalty during the whole phase."})]})}))},children:Object(pt.jsx)("div",{className:"underline-dotted-secondary cursor-text",onClick:function(e){e.preventDefault(),e.stopPropagation()},children:a})})})]})]})]},n)}))}):Object(pt.jsx)(pt.Fragment,{children:"-"}),Object(pt.jsx)("small",{className:"mt-2",children:"Price discovery is followed by Add Liquidity. After the Add Liquidity phase, trading starts. In the first 24 hours of trading, swaps generate locked tokens. The locked tokens unlock after 72-96 hours (current epoch + next 3 epochs)."})]})})},Oh="discover",kh={home:{path:"/",title:"",component:vm},swap:{path:"/swap",title:"Swap",component:Xj},swapActivePools:{path:"/swap/active",title:"Swap - Active Pools",component:Qj},liquidity:{path:"/liquidity",title:"Liquidity",component:$m},liquidityAdd:{path:"/liquidity/add",title:"Liquidity - Add",component:ob},liquidityActivePools:{path:"/liquidity/active",title:"Liquidity - Active Pools",component:_m},liquidityCreatePool:{path:"/liquidity/create",title:"Liquidity - Create Pool",component:qb},farms:{path:"/farms",title:"Farms",component:gd},metastaking:{path:"/metastaking",title:"Metastaking",component:qu},metabonding:{path:"/metabonding",title:"Metabonding",component:Ij},metabondingSnapshots:{path:"/metabonding/snapshots",title:"Metabonding",component:Ij},launch:{path:"/launch",title:"Launch",component:function(){Dr();var e=Object(O.p)().isLoggedIn,t=Mh(),n=t.isAccountLoading,a=t.accountLoadingError,i=fh({cacheKey:Oh}),r=i.priceDiscoveryContracts,s=i.isFetched,c=i.isError,o=s?r.reduce((function(e,t){return e.endBlock>t.endBlock?e:t})):void 0,l=mh({priceDiscoveryContract:o,cacheKey:"".concat(Oh,"-deposits")}),d=l.deposits,u=l.depositsError,m=l.depositsLoading,b=!s||m||n&&e,j=c||a||u,f=!b&&!j;return Object(pt.jsxs)(pt.Fragment,{children:[b&&!j&&Object(pt.jsx)($p,{}),j&&Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load launch page"}),f&&Object(pt.jsx)(pt.Fragment,{children:o?Object(pt.jsx)("div",{className:"launch-page container mb-nspacer",children:Object(pt.jsxs)("div",{className:"row",children:[Object(pt.jsxs)("div",{className:"col-12 col-lg-4 order-lg-last d-flex flex-column",children:[Object(pt.jsx)("div",{className:"d-lg-none",children:Object(pt.jsx)(uh,{priceDiscoveryContract:o})}),Object(pt.jsx)(ch,{priceDiscoveryContract:o,deposits:d}),Object(pt.jsx)(vh,{priceDiscoveryContract:o})]}),Object(pt.jsxs)("div",{className:"col-12 col-lg-8 d-flex flex-column",children:[Object(pt.jsx)("div",{className:"d-none d-lg-flex",children:Object(pt.jsx)(uh,{priceDiscoveryContract:o})}),Object(pt.jsx)(is,{priceDiscoveryContract:o})]})]})}):Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load launch page"})})]})}},analytics:{path:"/analytics",title:"Overview",component:ec},analyticsPools:{path:"/analytics/pools",title:"Pools",component:nc},analyticsPoolDetails:{path:"/analytics/pools/:pool",title:"Pool",component:sc},analyticsTokens:{path:"/analytics/tokens",title:"Tokens",component:oc},analyticsTokensDetails:{path:"/analytics/tokens/:token",title:"Token",component:dc},terms:{path:"/terms",title:"Maiar Exchange Terms of Use",component:Jj},disclaimer:{path:"/disclaimer",title:"Maiar Exchange Protocol Disclaimer",component:uc}},gh=Object.keys(kh).reduce((function(e,t){return Object(m.a)(Object(m.a)({},e),{},Object(b.a)({},t,kh[t].path))}),{}),yh={unlock:{path:"/unlock",title:"Unlock",component:Uf},walletconnect:{path:"/walletconnect",title:"Maiar Login",component:function(){return null}},ledger:{path:"/ledger",title:"Ledger Login",component:function(){return null}}},wh=Object.keys(yh).reduce((function(e,t){return Object(m.a)(Object(m.a)({},e),{},Object(b.a)({},t,yh[t].path))}),{}),Th={doesNotExist:"/fixesBug"},Nh=Object(m.a)(Object(m.a)(Object(m.a)(Object(m.a)({},gh),wh),Th),{},{mex:"/mex"}),Sh=[].concat(Object(ke.a)(Object.keys(yh).map((function(e){var t=yh[e];return{path:t.path,title:t.title,authenticatedRoute:t.authenticatedRoute,component:t.component}}))),Object(ke.a)(Object.keys(kh).map((function(e){var t=kh[e];return{path:t.path,title:t.title,authenticatedRoute:t.authenticatedRoute,component:function(){return null}}})))).map((function(e){var t=e.title?"".concat(e.title," \u2022 Maiar Exchange"):"Maiar \u2022 Exchange";return{path:e.path,authenticatedRoute:e.authenticatedRoute,Component:$f(t,e.component)}})),Ah=function(){cn.local.setItem({key:"logoutEvent",data:void 0,expires:0}),cn.local.removeItem("logoutEvent"),cn.local.clear(),cn.session.clear(),Ut(Mt),k.c.maiarId.removeToken(),Object(O.j)("".concat(window.location.origin).concat(Nh.home)),setTimeout((function(){Ci.dispatch(Wt())}),1e3)},Fh=["default"],Ph=function(e){var t=e.default,n=Object(Gb.a)(e,Fh),a=Object(m.a)({default:t},n);return Object.keys(a).reduce((function(e,t){return Object(m.a)(Object(m.a)({},e),{},Object(b.a)({},"default"===t?"true":t,a[t]))}),{}).true},Dh=function(){var e=Object(g.c)(Pt).isMaintenance,t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CACHE_BUST:"53a081f0",REACT_APP_SHARE_PREFIX:"",REACT_APP_THEME:"light"}).REACT_APP_IS_STAGING,n=cn.session.getItem("shard");return!t&&(e||z.includes(n))},Rh=function(e){var t=e.ref,n=e.pendingFarmAddress,a=e.pendingPoolAddress,i=c.useState(!1),r=Object(T.a)(i,2),s=r[0],o=r[1],l=Object(g.c)(id);return c.useEffect((function(){if(null!==t.current){if(n){var e=l.find((function(e){var t;return n.includes(null!==(t=e.pendingFarmAddress)&&void 0!==t?t:"")||"all-farms"===e.pendingFarmAddress}));o(Boolean(e))}if(a){var i=l.find((function(e){return e.pendingPoolAddress===a||"all-pools"===e.pendingPoolAddress}));o(Boolean(i))}}}),[l,n,a]),{preventActions:s}},Eh=function(e,t){var n=Object(c.useState)(e),a=Object(T.a)(n,2),i=a[0],r=a[1];return Object(c.useEffect)((function(){var n=setTimeout((function(){return r(e)}),t);return function(){return clearTimeout(n)}}),[e]),i},Lh=Object(p.gql)(Mf||(Mf=Object(Bi.a)(["\n  query ($args: DecodeAttributesArgs!) {\n    decodeLockedAssetAttributes(args: $args) {\n      identifier\n      attributes\n      isMerged\n      unlockSchedule {\n        epochs\n        percent\n      }\n    }\n  }\n"]))),Ch=function(e){var t=e.nfts,n=e.proxy,a=ur(),i=c.useState([]),r=Object(T.a)(i,2),s=r[0],o=r[1],l=c.useState({name:n.lockedAssetToken.name,identifier:n.lockedAssetToken.collection,decimals:n.lockedAssetToken.decimals,balance:"0",ticker:n.lockedAssetToken.collection.split("-")[0],owner:"erd1..."}),d=Object(T.a)(l,2),u=d[0],b=d[1];return c.useEffect((function(){if(t.length>0){var e=n.lockedAssetToken,i=[],r=new je.a(0);if(t.forEach((function(t){if(t.collection===e.collection){var n=new je.a(t.balance);r=r.plus(n),i.push(t)}})),i.length>0){var s=tt(i);a({query:Lh,variables:{args:s}}).then((function(e){if(e&&e.data&&e.data.data){var t=[];e.data.data.decodeLockedAssetAttributes.forEach((function(e){var n=i.find((function(t){return t.identifier===e.identifier}));n&&t.push(Object(m.a)(Object(m.a)({},n),{},{unlockSchedule:e.unlockSchedule}))})),o(t)}else o(i)})).catch((function(e){console.log("useLockedMexTokens",e),o(i)}))}b(Object(m.a)(Object(m.a)({},u),{},{balance:r.toString(10)}))}else o([]),b(Object(m.a)(Object(m.a)({},u),{},{balance:"0"}))}),[t,n]),{lockedMexTokens:s,lockedMexAsEsdt:u}},Ih=function(e){var t=e.unlockedRewardsFarmRate,n=e.lockedRewardsFarmRate,a=e.decimals,i=void 0===a?0:a,r=c.useState("..."),s=Object(T.a)(r,2),o=s[0],l=s[1],d=c.useState("..."),u=Object(T.a)(d,2),m=u[0],b=u[1],j=c.useState("1"),f=Object(T.a)(j,2),h=f[0],p=f[1],x=c.useState("..."),v=Object(T.a)(x,2),O=v[0],k=v[1],g=c.useState("..."),y=Object(T.a)(g,2),w=y[0],N=y[1],S=c.useState("1"),A=Object(T.a)(S,2),F=A[0],P=A[1];c.useEffect((function(){if(t||n){if(t&&t.apr){var e=t.produceRewardsEnabled?new je.a(t.apr).toFixed(10):"...";l(wc(e,i)),b(yc(e,i)),p(new je.a(t.perBlockRewards).dividedBy(Z).toFixed(1))}if(n&&n.apr){var a=n.produceRewardsEnabled?new je.a(n.apr).toFixed(10):"...";k(wc(a,i)),N(yc(a,i)),P(new je.a(n.perBlockRewards).dividedBy(Z).toFixed(1))}}else l("..."),b("..."),p("1"),k("..."),N("..."),P("1")}),[t,n]);var D=new je.a(Z),R=He({amount:D.toString(10),denomination:M,decimals:0,addCommas:!0}),E=He({amount:D.multipliedBy(10).toString(10),denomination:M,decimals:0,addCommas:!0});return{unlockedRewardsAPR:o,unlockedRewardsAPY:m,unlockedRewardsFarmMultiplier:h,lockedRewardsAPR:O,lockedRewardsAPY:w,lockedRewardsFarmMultiplier:F,FarmMultiplierText:function(){return Object(pt.jsxs)(pt.Fragment,{children:["The Multiplier represents the proportion of MEX rewards each farm receives, as a proportion of the MEX produced each block.",Object(pt.jsx)("br",{}),Object(pt.jsx)("br",{}),"A 1x farm receives ",R," MEX per block, a 10x farm will receive ",E," MEX per block."]})}}},qh=function(e){return e.impersonatedAccount},Mh=function(){var e=Object(O.n)(),t=Object(c.useState)(e),n=Object(T.a)(t,2),a=n[0],i=n[1],r=Bt(),s=Object(g.c)(qh),o=$t();return Object(c.useEffect)((function(){!function(){var t;if(Boolean(r)){var n=Object(m.a)(Object(m.a)({},e),{},{address:r,ledgerAccount:null!==(t=e.ledgerAccount)&&void 0!==t&&t.address?Object(m.a)(Object(m.a)({},e.ledgerAccount),{},{address:r}):null,walletConnectAccount:e.walletConnectAccount?r:null,account:Object(m.a)(Object(m.a)({},e.account),{},{address:r},s)});i(n)}else i(e)}()}),[e,s,o]),a},Bh=function(){var e=Object(O.p)().isLoggedIn,t=Object(O.n)().address;return k.b.useGetIsAuthenticated(t,Q,e).isAuthenticated},Uh=function(){var e=cn.session.getItem("shard");return function(t){var n=Boolean(null===t||void 0===t?void 0:t.length),a=null===t||void 0===t?void 0:t.every((function(t){var n=Object(O.i)(t.pubkey());return e===n}));return Boolean(n&&a)}},$h=function(){var e=Object(y.h)().pathname;return function(t){return null!==Object(y.f)(t,e)}},_h=function(){var e=Object(g.c)(rd),t=Object(O.p)().isLoggedIn,n=c.useState([e]),a=Object(T.a)(n,2),i=a[0],r=a[1];c.useEffect((function(){t&&!i.includes(e)&&(Object(O.k)(),r((function(t){return[].concat(Object(ke.a)(t),[e])})))}),[e,t,i])},Vh=function(e){var t=new je.a(0);return e.forEach((function(e){var n=function(e){var t=e.gasLimit,n=e.gasPrice,a=e.data,i=e.chainId,r=a||"",s=new le.Transaction({nonce:new le.Nonce(0),value:le.Balance.Zero(),receiver:new le.Address(ue),gasPrice:new le.GasPrice(n),gasLimit:new le.GasLimit(t),data:new le.TransactionPayload(r.trim()),chainID:new le.ChainID(i),version:new le.TransactionVersion(1)}),c=new le.NetworkConfig;c.MinGasLimit=new le.GasLimit(parseInt("50000")),c.GasPerDataByte=1500,c.GasPriceModifier=new le.GasPriceModifier(.01);try{return s.computeFee(c).toString(10)}catch(o){return"0"}}({data:e.getData().toString(),chainId:e.getChainID().valueOf(),gasLimit:e.getGasLimit().valueOf(),gasPrice:e.getGasPrice().valueOf()});t=t.plus(new je.a(n))})),t};function Wh(){var e=Object(g.b)(),t=Object(O.o)().providerType,n="mainnet"===te.id,a="wallet"===t,i=Mh().account,r=i.balance,s=i.address;return function(t){var i=t.grouping,c=t.sequential,o=t.transactions,l=t.callbackRoute,d=t.successMessage,u=t.submittedMessage,m=t.processingMessage,b=t.pendingFarmAddress,j=t.pendingPoolAddress,f=t.pendingNftTransactions,h=t.pendingMetabondingTransactions,p=t.hasUnrelatedTransactions,x=Vh(o),v=function(e){var t=!0;return e.forEach((function(e){var n=e.getData().toString(),a=e.getReceiver().toString(),i=Object(Gm.a)({data:n,receiver:a});st(i?i.toString():"")||(t=!1)})),t}(o),O=Object(ke.a)(Array(o.length).keys()),k="".concat(Date.now().toString(),"-").concat(s),g=he()().add(10,"minutes").unix(),y=cn.local.getItem("mexSessions")||{},w=Boolean(i)?i:[O],T=o.map((function(e){return e.toPlainObject()})),N={sequential:c,successMessage:d,submittedMessage:u,processingMessage:m,pendingFarmAddress:b,pendingPoolAddress:j,pendingNftTransactions:f,pendingMetabondingTransactions:h,hasUnrelatedTransactions:p,grouping:w};new je.a(Ce(r)?r:"0").minus(x).isGreaterThan(0)?(y[k]=N,cn.local.setItem({data:y,key:"mexSessions",expires:g}),a&&cn.local.setItem({data:k,key:"walletSessionId",expires:g}),n?v&&e(Va({sessionId:k,callbackRoute:l,transactions:T})):e(Va({transactions:o.map((function(e){return e.toPlainObject()})),callbackRoute:l,sessionId:k}))):e(Ea({title:"Insufficient EGLD funds",description:"Current EGLD balance cannot cover the transaction fees.",icon:Rl.faExclamationTriangle,iconClassName:"text-warning"}))}}var zh,Hh=function(e){if(e){var t=[],n=e.firstTokenID,a=e.firstTokenLockedNonce,i=e.secondTokenID,r=e.secondTokenLockedNonce,s=a>0?"".concat(W,"-").concat(nt(a.toString())):void 0,c=r>0?"".concat(W,"-").concat(nt(r.toString())):void 0;if(s&&t.push({originalTokenID:n,lkEsdtIdentifier:s}),c&&t.push({originalTokenID:i,lkEsdtIdentifier:c}),0!==t.length)return t}},Yh=function(e){var t=jr().runQuery,n=or(),a=n.getNftsByIdentifiers,i=n.getNft,r=Object(g.c)(St),s=o.a.useState(),c=Object(T.a)(s,2),l=c[0],d=c[1],u=o.a.useState(),b=Object(T.a)(u,2),f=b[0],p=b[1];o.a.useEffect((function(){l||void 0===f||function(){if(f){var e=[],t=f.identifiersMapping;f.decodedAttributes.forEach((function(n){var a,i,s=n.unlockEpoch,c=n.identifier,o=s-r.epoch,l=Oe({epochs:o,stats:r,hasSteps:!1}),d=l.unlocksAtText,u=l.unlocksAtDate,m=null!==(a=null===(i=t.find((function(e){return e.lkEsdtIdentifier===c})))||void 0===i?void 0:i.originalTokenID)&&void 0!==a?a:"";e.push({originalTokenID:m,identifier:c,unlockText:"".concat(d," ").concat(u),unlockableNow:"Unlockable now"===u})})),e.length>0&&d(e)}}()}),[f,l,r]);var x=function(){var n=Object(j.a)(h.a.mark((function n(i){var r,s,c,o,l,d,u,m,b,j,f;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s=Hh(i)){n.next=4;break}return n.abrupt("return");case 4:return c=s.map((function(e){return e.lkEsdtIdentifier})),n.next=7,a(c,null===(r=e.simpleLock)||void 0===r?void 0:r.address);case 7:if(o=n.sent,l=o.data,d=o.success,u=l,d){n.next=14;break}return p(void 0),n.abrupt("return");case 14:return m=tt(u),n.next=17,t({query:mr,variables:{args:m}});case 17:if(b=n.sent,j=b.data,b.success){n.next=23;break}return p(void 0),n.abrupt("return");case 23:f=j.lockedTokenAttributes,p({identifiersMapping:s,decodedAttributes:f}),n.next=31;break;case 27:n.prev=27,n.t0=n.catch(0),console.log("fetchLkEsdtsUnlockDate",n.t0),p(void 0);case 31:case"end":return n.stop()}}),n,null,[[0,27]])})));return function(e){return n.apply(this,arguments)}}(),v=function(){var n=Object(j.a)(h.a.mark((function n(a){var r,s,c,o,l,d,u;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i(a,null===(r=e.simpleLock)||void 0===r?void 0:r.address);case 3:if(s=n.sent,c=s.data,!s.success){n.next=20;break}return n.next=9,t({query:hr,variables:{args:tt([c])}});case 9:if(o=n.sent,l=o.data,o.success){n.next=15;break}return p(void 0),n.abrupt("return");case 15:d=l.lpProxyTokenAttributes,u=Object(m.a)({},d[0]),x(u),n.next=21;break;case 20:p(void 0);case 21:n.next=27;break;case 23:n.prev=23,n.t0=n.catch(0),console.log("fetchAndDecodeLpProxyToken",n.t0),p(void 0);case 27:case"end":return n.stop()}}),n,null,[[0,23]])})));return function(e){return n.apply(this,arguments)}}();return{fetchLkEsdtsUnlockDate:x,fetchAndDecodeLpProxyToken:v,isUnlockableNow:function(e){var t,n=e===U?$:e;return!0===(null===l||void 0===l||null===(t=l.find((function(e){return e.originalTokenID===n})))||void 0===t?void 0:t.unlockableNow)},getLkesdtIdentifiersFromLkLpAttributes:Hh,lkesdtsUnlockDate:l,stats:r}};!function(e){e.asc="asc",e.desc="desc",e.default="default"}(zh||(zh={}));var Gh,Zh=function(e,t){var n=c.useState(),a=Object(T.a)(n,2),i=a[0],r=a[1],s=Object(g.c)(kt),o=Object(g.c)(gt),l=Object(g.c)(Br);return{sortedRows:c.useMemo((function(){var n=Object(ke.a)(e);if(i&&i.sortField&&i.direction!==zh.default){var a=i.direction===zh.asc?[1,-1]:[-1,1];switch(!0){case"name"===i.sortField:case"poolName"===i.sortField:n.sort((function(e,t){var n="poolName"===i.sortField?e.liquidityPoolToken.identifier:e.identifier,r="poolName"===i.sortField?t.liquidityPoolToken.identifier:t.identifier,c=it({token:n,tokenDetails:s,nftDetails:o}).symbol,l=n===$?U:null!==c&&void 0!==c?c:n,d=it({token:r,tokenDetails:s,nftDetails:o}).symbol,u=r===$?U:null!==d&&void 0!==d?d:r;return l.toLowerCase()>u.toLowerCase()?a[0]:a[1]}));break;case"lockedRewardsAPR"===(null===i||void 0===i?void 0:i.sortField):case"unlockedRewardsAPR"===i.sortField:l.farmsRate&&n.sort((function(e,t){var n=Xe({farmsRate:l.farmsRate,lpToken:e.liquidityPoolToken.identifier}),r=Xe({farmsRate:l.farmsRate,lpToken:t.liquidityPoolToken.identifier});if(n&&r){var s="lockedRewardsAPR"===i.sortField?"lockedRewardsFarmRate":"unlockedRewardsFarmRate";if(n[s]&&r[s]){var c=n[s],o=r[s];if(null!==c&&void 0!==c&&c.apr&&null!==o&&void 0!==o&&o.apr){var d=new je.a(c.apr).toFixed(10),u=new je.a(o.apr).toFixed(10);return parseFloat(d)>parseFloat(u)?a[0]:a[1]}}return-1}return-1}));break;case"tokenVolume24h"===i.sortField:n.sort((function(e,t){return Number(He({amount:e[i.sortField].toString(10),denomination:e.decimals,decimals:e.decimals,showLastNonZeroDecimal:!0,addCommas:!1}))*e.tokenPriceUSD<Number(He({amount:t[i.sortField].toString(10),denomination:t.decimals,decimals:t.decimals,showLastNonZeroDecimal:!0,addCommas:!1}))*t.tokenPriceUSD?a[1]:a[0]}));break;case"tokenPriceChangeUSD"===i.sortField:null!==t&&void 0!==t&&t.historicTokens&&n.sort((function(e,n){var i=Ls({identifier:e.identifier,metric:"priceUSD",history:t.historicTokens}),r=Ls({identifier:n.identifier,metric:"priceUSD",history:t.historicTokens});return void 0!==i&&void 0!==r?i<r?a[1]:a[0]:-1}));break;default:n.sort((function(e,t){return isNaN(e[i.sortField])||isNaN(t[i.sortField])?-1:parseFloat(e[i.sortField])>parseFloat(t[i.sortField])?a[0]:a[1]}))}}return n}),[e,i]),onSort:function(e){var t=e.sortField,n=zh.desc;if(i&&i.sortField===t)switch(i.direction){case zh.desc:n=zh.asc;break;case zh.asc:n=zh.default;break;case zh.default:n=zh.desc}r({sortField:t,direction:n})},getCaretIcon:function(e){var t=e.sortField;return i&&i.sortField===t&&i.direction&&i.direction!==zh.default?Object(pt.jsx)(F.a,{icon:i.direction===zh.asc?N.e:N.d,className:"ml-1"}):null},getClassName:function(e){var t=e.sortField;return i&&i.sortField===t?"text-primary":""},activeSort:i}},Kh=function(e){var t=ur(),n=or().getNft,a=Object(g.c)(St),i=c.useState(),r=Object(T.a)(i,2),s=r[0],o=r[1],l=c.useState(),d=Object(T.a)(l,2),u=d[0],m=d[1];c.useEffect((function(){m(Fo({unlockSchedule:s,stats:a}))}),[s,a]);var b=function(){var a=Object(j.a)(h.a.mark((function a(i){var r,s,c,l;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,n(i,e.address);case 3:if(r=a.sent,s=r.data,!r.success){a.next=14;break}return a.next=9,t({query:Lh,variables:{args:tt([s])}});case 9:c=a.sent,l=c.data.data.decodeLockedAssetAttributes,o(l[0].unlockSchedule),a.next=15;break;case 14:o(void 0);case 15:a.next=21;break;case 17:a.prev=17,a.t0=a.catch(0),console.log("fetchLKMEXUnlockSchedule",a.t0),o(void 0);case 21:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(e){return a.apply(this,arguments)}}(),f=function(){var a=Object(j.a)(h.a.mark((function a(i){var r,s,c,l,d;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,n(i,e.address);case 3:if(r=a.sent,s=r.data,!r.success){a.next=15;break}return a.next=9,t({query:vr,variables:{args:tt([s])}});case 9:c=a.sent,l=c.data.data.wrappedLpTokenAttributes,d="".concat(e.lockedAssetToken.collection,"-").concat(nt("".concat(l[0].lockedAssetsNonce))),b(d),a.next=16;break;case 15:o(void 0);case 16:a.next=22;break;case 18:a.prev=18,a.t0=a.catch(0),console.log("fetchLKLPUnlockSchedule",a.t0),o(void 0);case 22:case"end":return a.stop()}}),a,null,[[0,18]])})));return function(e){return a.apply(this,arguments)}}();return{fetchLKMEXUnlockSchedule:b,fetchLKLPUnlockSchedule:f,unlockSchedule:u,stats:a}};!function(e){e.FARM="FARM",e.LOCKED_ASSET_FACTORY="LOCKED_ASSET_FACTORY",e.PROXY_PAIR="PROXY_PAIR",e.PROXY_FARM="PROXY_FARM"}(Gh||(Gh={}));var Xh=function(e){var t=e.token,n=void 0===t?"":t,a=Object(g.c)(kt),i=Object(g.c)(gt),r=it({token:n,tokenDetails:a,nftDetails:i}).iconUrl;return Object(pt.jsx)(pt.Fragment,{children:r?Object(pt.jsx)("img",{src:r,alt:n,className:"token-symbol"}):Object(pt.jsx)("div",{className:"token-symbol",children:n===U?Object(pt.jsx)(C,{}):Object(pt.jsx)(F.a,{icon:P.faDiamond})})})},Qh=function(e){var t=e.pool,n=c.useRef(null),i=Object(g.c)(Br),r=a.denominateAmount,s=Rh({pendingPoolAddress:t.address,ref:n}).preventActions,o=c.useState(!1),l=Object(T.a)(o,2),d=l[0],u=l[1],m=Ge({pairsRate:i.pairsRate,pairAddress:t.address}),b=al(t).lpHoldersText,j=function(e){var t=e.icon,n=e.text,a=e.amount;return Object(pt.jsxs)("div",{className:"d-flex flex-fill align-items-center justify-content-between mb-2",children:[Object(pt.jsx)("div",{className:"mr-2",children:t}),Object(pt.jsxs)("span",{className:"d-flex flex-wrap justify-content-between flex-fill",children:[Object(pt.jsx)("span",{className:"pr-2",children:n}),Object(pt.jsx)("span",{children:a})]})]})},f=c.useMemo((function(){var e="".concat(Nh.liquidityAdd,"?firstToken=").concat(t.firstToken.identifier,"&secondToken=").concat(t.secondToken.identifier);return s?Object(pt.jsx)("button",{className:"btn btn-primary btn-block",disabled:!0,children:"+ Add"}):Object(pt.jsx)(w.b,{className:"btn btn-primary btn-block",to:e,children:"+ Add"})}),[Nh,t,s]),h=c.useMemo((function(){var e="".concat(Nh.swap,"?firstToken=").concat(t.firstToken.identifier,"&secondToken=").concat(t.secondToken.identifier);return"Active"===(null===m||void 0===m?void 0:m.state)?Object(pt.jsx)(w.b,{className:"btn btn-dark btn-block",to:e,children:"Swap"}):Object(pt.jsx)("button",{className:"btn btn-dark btn-block",disabled:!0,children:"Swap"})}),[Nh,t]),p=Xe({farmsRate:i.farmsRate,lpToken:t.liquidityPoolToken.identifier}),x=p.unlockedRewardsFarmRate,v=p.lockedRewardsFarmRate,O=Ih({unlockedRewardsFarmRate:x,lockedRewardsFarmRate:v}),k=O.unlockedRewardsAPR,y=O.lockedRewardsAPR,P=m&&parseFloat(m.feesAPR)?"".concat((100*parseFloat(m.feesAPR)).toFixed(2),"%"):"...",D="pool-type ".concat(t.type.toLowerCase());return Object(pt.jsxs)("div",{ref:n,className:"pool card ".concat(D),children:[Object(pt.jsxs)("div",{className:"card-header d-flex align-items-center ".concat(d?"":"rounded"),onClick:function(){u((function(e){return!e}))},style:{cursor:"pointer"},children:[Object(pt.jsx)("div",{className:"mr-3",children:Object(pt.jsx)(vv,{pair:t,size:"lg"})}),Object(pt.jsxs)("div",{className:"d-flex align-items-center flex-fill",children:[Object(pt.jsxs)("div",{className:"d-flex flex-column flex-sm-row justify-content-sm-between flex-fill",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center font-weight-bold",children:Object(pt.jsx)(Ov,{pair:t})}),x&&v?Object(pt.jsx)("div",{className:"d-flex align-items-center",children:Object(pt.jsx)(Np,{label:Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[k,"..."!==k?"%":"","\xa0/\xa0",Object(pt.jsx)(F.a,{icon:N.o,size:"sm",className:"text-warning"}),"\xa0",y,"..."!==y?"%":""]}),tooltipText:Object(pt.jsxs)(pt.Fragment,{children:["Lock rewards and get increased Base APR.",Object(pt.jsx)("br",{}),Object(pt.jsx)("br",{}),"After you add liquidity you can stake your LP tokens in a farm to earn more rewards!"]})})}):Object(pt.jsx)("div",{className:"d-flex align-items-center",children:Object(pt.jsx)(Np,{label:Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)(F.a,{icon:S.faCoins,className:"text-secondary mr-1 "}),P]}),tooltipText:Object(pt.jsx)(pt.Fragment,{children:"Fees Rewards"})})})]}),Object(pt.jsx)("div",{className:"text-right",style:{width:"1.5rem"},children:Object(pt.jsx)(up,{expanded:d})})]})]}),d&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsxs)("div",{className:"card-body pt-4 pb-0",children:[Object(pt.jsx)(j,{icon:Object(pt.jsx)("div",{className:"token-symbol",children:Object(pt.jsx)(F.a,{icon:A.faWater,className:"text-secondary"})}),text:Object(pt.jsx)("span",{className:"text-secondary",children:"Total Liquidity"}),amount:Object(pt.jsx)("div",{"data-testid":"totalLiquidity",children:m?Object(pt.jsxs)(pt.Fragment,{children:["$",Ye(parseFloat(m.lockedValueUSD).toFixed(0),0)]}):"..."})}),Object(pt.jsx)(j,{icon:Object(pt.jsx)("div",{className:"token-symbol",children:Object(pt.jsx)(F.a,{icon:S.faCoins,className:"text-secondary",style:{marginRight:"-0.1rem"}})}),text:Object(pt.jsxs)("div",{className:"text-secondary",children:["Fees Rewards",Object(pt.jsx)(wo,{info:Object(pt.jsx)(il,{lpHoldersText:b})})]}),amount:P}),Object(pt.jsx)(j,{icon:Object(pt.jsx)(Xh,{token:t.firstToken.identifier}),text:Object(pt.jsx)("span",{className:"text-secondary",children:Object(pt.jsx)(Rt,{token:t.firstToken.identifier})}),amount:Object(pt.jsx)(pt.Fragment,{children:m?Object(pt.jsx)(pt.Fragment,{children:r({amount:m.info.reserves0,denomination:t.firstToken.decimals,addCommas:!0,decimals:0})}):"..."})}),Object(pt.jsx)(j,{icon:Object(pt.jsx)(Xh,{token:t.secondToken.identifier}),text:Object(pt.jsx)("span",{className:"text-secondary",children:Object(pt.jsx)(Rt,{token:t.secondToken.identifier})}),amount:Object(pt.jsx)(pt.Fragment,{children:m?Object(pt.jsx)(pt.Fragment,{children:r({amount:m.info.reserves1,denomination:t.secondToken.decimals,addCommas:!0,decimals:0})}):"..."})})]}),Object(pt.jsx)("div",{className:"card-footer border-0 pb-4",children:Object(pt.jsxs)("div",{className:"d-flex flex-row",children:[f,Object(pt.jsx)("span",{className:"mx-2"}),h]})})]})]})},Jh=function(e){var t=e.msg,n=e.icon,a=e.card,i=void 0===a||a;return Object(pt.jsxs)("small",{className:"".concat(i?"alert alert-warning":""," align-items-center d-flex p-3 mb-0"),role:"alert",children:[Object(pt.jsx)(F.a,{icon:n,size:"lg",className:"alert-icon mr-2"}),Object(pt.jsx)("div",{className:"text-warning",children:t})]})},ep=function(e){var t=e.token,n=e.amount,i=e.decimals,r=e.showLabel,s=void 0!==r&&r;return Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)(Xh,{token:t})," ",Object(pt.jsx)("span",{className:"font-weight-bold mx-1",children:a.denominateAmount({amount:n,denomination:i,addCommas:!0})})," ",s?Object(pt.jsx)(yt,{token:t}):Object(pt.jsx)(Rt,{token:t})]})},tp=n(326),np=["value","dragging"],ap=function(e){var t=e.balance,n=e.amount,a=e.onChange,i=tp.b.Handle,r=c.useState(0),s=Object(T.a)(r,2),o=s[0],l=s[1];c.useEffect((function(){!function(){var e=new je.a(t),a=new je.a(n).multipliedBy(100).dividedBy(e).toNumber();l(Math.ceil(a))}()}),[n,t]);return Object(pt.jsx)(tp.b,{min:0,max:100,step:1,marks:{0:0,25:"25%",50:"50%",75:"75%",100:"100%"},value:o,onChange:function(e){var n=new je.a(t).multipliedBy(e).dividedBy(100),i=n.toFixed(4),r=n.toFixed(8),s=n.toFixed(13);a(parseFloat(i)>0?i:parseFloat(r)>0?r:parseFloat(s)>0?s:"0")},handle:function(e){var t=e.value,n=e.dragging,a=Object(Gb.a)(e,np);return Object(pt.jsx)(tp.a,{prefixCls:"rc-slider-tooltip",overlay:"".concat(o,"%"),visible:n,placement:"top",children:Object(pt.jsx)(i,Object(m.a)({value:t,dragging:n?"true":"false"},a))},"slider-tooltip")}})},ip=n(667),rp=n.n(ip),sp=function(e){var t=e.valueStr,n=c.useState(0),a=Object(T.a)(n,2),i=a[0],r=a[1],s=c.useState(),o=Object(T.a)(s,2),l=o[0],d=o[1],u=c.useState(0),m=Object(T.a)(u,2),b=m[0],j=m[1];c.useEffect((function(){var e=function(e){var t=Qe(e),n=t.split(".");return{valWithoutCommas:t,parts:n}}(t),n=e.valWithoutCommas,a=e.parts;Ce(parseFloat(n).toString())?(r((function(e){return e+1})),j(a.length>1?a[1].length:0),d(parseFloat(n))):d(void 0)}),[t]);return l?Object(pt.jsx)(rp.a,{value:l,duration:i>1?300:0,formatValue:function(e){return Ye("".concat(e),b)}}):Object(pt.jsx)(pt.Fragment,{children:t})},cp=function(e){var t=e.children,n=c.useRef(),a=function(){var e=cn.local.getItem("apiAccessToken");if(e){var t=function(e){try{var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}catch(a){return console.error("Unable to parse jwt",a),{}}}(e).exp;if(void 0!==t)if(!(t-Math.floor(Date.now()/1e3)<120))return e}},i=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,a,i,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Qi.a.create(),e.prev=1,e.next=4,t.get("".concat(J,"/access"));case 4:return n=e.sent,a=n.data,i=a,r=he()().add(2,"hours").unix(),cn.local.setItem({key:"apiAccessToken",data:i,expires:r}),e.abrupt("return",i);case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(j.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.current){e.next=4;break}return e.abrupt("return",n.current);case 4:if(!(t=a())){e.next=9;break}return e.abrupt("return",t);case 9:return n.current=i(),e.abrupt("return",n.current);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Qi.a.interceptors.request.use(function(){var e=Object(j.a)(h.a.mark((function e(t){var a,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.url,i=t.baseURL,!(null!==a&&void 0!==a&&a.includes("internal-api")||null!==i&&void 0!==i&&i.includes("internal-api"))){e.next=7;break}return e.next=4,r();case 4:s=e.sent,n.current=void 0,s&&(t.headers={Authorization:"Bearer ".concat(s)});case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){Promise.reject(e)})),Object(pt.jsx)(pt.Fragment,{children:t})},op=function(e){var t=e.title,n=e.extraClass,a=void 0===n?"":n,i=e.onCloseBtnClick,r=e.children;return Object(pt.jsxs)("div",{className:"card-header mb-0 pt-4 ".concat(a),children:[Object(pt.jsxs)("div",{className:"h5 d-flex justify-content-between align-items-center",children:[Object(pt.jsx)("div",{children:t}),Object(pt.jsx)("button",{type:"button",className:"btn btn-light px-3 py-2 d-flex align-items-center",onClick:i,children:Object(pt.jsx)(F.a,{size:"lg",icon:Rf.faTimes})})]}),r]})},lp=n(669),dp=n(668),up=function(e){var t=e.expanded,n=e.size,a=void 0===n?"sm":n;return Object(pt.jsx)(F.a,{className:"text-primary-highlight",size:a,icon:t?dp.faChevronUp:lp.faChevronDown})},mp=n(319),bp=n(670);function jp(e){var t=!1,n=document.createElement("textarea");n.value=e,n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy"),t=!0}catch(a){console.error("Fallback: Oops, unable to copy",a)}return document.body.removeChild(n),t}function fp(e){return hp.apply(this,arguments)}function hp(){return(hp=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,navigator.clipboard){e.next=5;break}n=jp(t),e.next=8;break;case 5:return e.next=7,navigator.clipboard.writeText(t).then((function(){return!0}),(function(e){return console.error("Async: Could not copy text: ",e),!1}));case 7:n=e.sent;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pp,xp,vp,Op,kp,gp,yp,wp=function(e){var t=e.text,n=e.className,a=void 0===n?"":n,i=c.useState({default:!0,success:!1}),r=Object(T.a)(i,2),s=r[0],o=r[1],l=function(){var e=Object(j.a)(h.a.mark((function e(n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),n.stopPropagation(),a=t?t.trim():t,e.t0=o,e.next=6,fp(a);case 6:e.t1=e.sent,e.t2={default:!1,success:e.t1},(0,e.t0)(e.t2),setTimeout((function(){o({default:!0,success:!1})}),1e3);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(pt.jsx)("a",{href:"/#",onClick:l,className:"side-action text-secondary ".concat(a),children:s.default||!s.success?Object(pt.jsx)(F.a,{icon:bp.faCopy}):Object(pt.jsx)(F.a,{icon:mp.faCheck,className:"text-primary-highlight"})})},Tp=function(e){var t=e.rounded,n=void 0!==t&&t,a=e.extendedText,i=void 0!==a&&a,r=Object(O.p)().isLoggedIn,s="mainnet"===te.id,c=Object(m.a)({backgroundColor:"#ffaa0033"},n?{}:{fontSize:"70%"});return Object(pt.jsx)(pt.Fragment,{children:s&&!r&&Object(pt.jsxs)("small",{className:"domain-warning d-block text-center py-2 px-3 ".concat(n?"rounded mb-spacer":""),style:c,role:"alert",children:[Object(pt.jsx)(F.a,{icon:kc.faLock,size:"1x",className:"text-success mr-1"}),"Scam/Phishing verification:",Object(pt.jsx)("span",{className:"text-success ml-1",children:"https://"}),"maiar.exchange"," ",i&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("br",{className:"d-none d-lg-block"}),"Check the website link carefully!"]})]})})},Np=function(e){var t=e.label,n=e.tooltipText;return Object(pt.jsx)("div",{className:"d-flex",children:Object(pt.jsx)(Ds.a,{placement:"top",delay:{show:0,hide:400},overlay:function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"dotted-tooltip"},e),{},{children:n}))},children:Object(pt.jsx)("div",{className:"underline-dotted-secondary cursor-text",onClick:function(e){e.preventDefault(),e.stopPropagation()},children:t})})})},Sp=function(e){var t=e.minimumFarmingEpochs,n=Object(g.c)(St),a=c.useState(".."),i=Object(T.a)(a,2),r=i[0],s=i[1];return c.useEffect((function(){if(n){var e=n.refreshRate/1e3*n.roundsPerEpoch/60/60,a=(t-1)*e,i=a+e,r=Math.floor(a/24),c=Math.floor(i/24),o=r>2?"".concat(r," - ").concat(c," days"):"".concat(a,"h - ").concat(i,"h");s(o)}}),[n]),Object(pt.jsx)(pt.Fragment,{children:r})},Ap=function(e){var t=e.title,n=e.value,a=e.dataTestId,i=e.tooltip,r=a?{"data-testid":a}:{};return"sm"===e.size?Object(pt.jsx)("div",{className:"info-card card info-card-sm p-3 d-flex align-items-start justify-content-center flex-grow-1",children:Object(pt.jsxs)("div",{className:"d-flex flex-column text-left",children:[Object(pt.jsx)("h4",Object(m.a)(Object(m.a)({className:"small text-secondary mb-2"},r),{},{children:t})),Object(pt.jsxs)("h5",{className:"h6 mb-0",children:[n,i]})]})}):Object(pt.jsx)("div",{className:"info-card card py-spacer px-3 d-flex align-items-center justify-content-center",children:Object(pt.jsxs)("div",{className:"d-flex flex-column text-center",children:[Object(pt.jsx)("h4",Object(m.a)(Object(m.a)({className:"h5 font-weight-bold mb-3"},r),{},{children:n})),Object(pt.jsxs)("h5",{className:"h6 font-weight-light text-secondary mb-0",children:[t,i]})]})})},Fp=n(678),Pp=n(671),Dp=n(320),Rp=function(){var e="53a081f0",t=Object(Dp.a)(),n=function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip"},e),{},{children:"Coming Soon"}))},a=$h()(Nh.home);return Object(pt.jsx)("footer",{className:"pt-5",children:a?Object(pt.jsx)("div",{className:"pt-spacer",children:Object(pt.jsx)("div",{className:"pt-lg-5",children:Object(pt.jsxs)("div",{className:"footer pb-2",children:[Object(pt.jsx)("div",{className:"spacer"}),Object(pt.jsxs)("div",{className:"container",children:[Object(pt.jsxs)("div",{className:"row justify-content-md-between",children:[Object(pt.jsx)("div",{className:"col-12 col-md-4 mt-3",children:Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)(mv,{}),Object(pt.jsx)("span",{className:"tagline small text-secondary mt-3",children:"Internet-scale DeFi: the scalable financial engine of the new internet economy."}),Object(pt.jsxs)("div",{className:"social mt-4",children:[Object(pt.jsx)("a",{target:"_blank",className:"mr-spacer mb-2",href:"https://twitter.com/MaiarExchange","aria-label":"Twitter",rel:"noreferrer nofollow",children:Object(pt.jsx)(F.a,{icon:$b.l})}),Object(pt.jsx)("a",{target:"_blank",className:"mr-spacer mb-2",href:"https://t.me/MaiarExchange","aria-label":"Telegram",rel:"noreferrer nofollow",children:Object(pt.jsx)(F.a,{icon:$b.j})}),Object(pt.jsx)("a",{target:"_blank",className:"mr-spacer mb-2",href:"https://www.facebook.com/ElrondNetwork/","aria-label":"Facebook",rel:"noreferrer nofollow",children:Object(pt.jsx)(F.a,{icon:$b.c})}),Object(pt.jsx)("a",{target:"_blank",className:"mr-spacer mb-2",href:"https://mt.linkedin.com/company/elrondnetwork","aria-label":"LinkedIn",rel:"noreferrer nofollow",children:Object(pt.jsx)(F.a,{icon:$b.g})})]})]})}),Object(pt.jsx)("div",{className:"col-12 col-md-6",children:Object(pt.jsxs)("div",{className:"row",children:[Object(pt.jsxs)("div",{className:"col-md-4 mt-3",children:[Object(pt.jsx)("p",{children:"Exchange"}),Object(pt.jsxs)("ul",{className:"list-unstyled footer-column",children:[Object(pt.jsx)("li",{children:Object(pt.jsx)(w.b,{to:Nh.swap,children:"Swap"})}),Object(pt.jsx)("li",{children:Object(pt.jsx)(w.b,{to:Nh.liquidityActivePools,children:"Liquidity"})}),Object(pt.jsx)("li",{children:Object(pt.jsx)(w.b,{to:Nh.farms,children:"Farms"})}),Object(pt.jsx)("li",{children:Object(pt.jsx)(w.b,{to:Nh.analytics,children:"Analytics"})})]})]}),Object(pt.jsxs)("div",{className:"col-md-4 mt-3",children:[Object(pt.jsx)("p",{children:"Documentation"}),Object(pt.jsxs)("ul",{className:"list-unstyled footer-column",children:[Object(pt.jsx)("li",{children:Object(pt.jsx)("a",{href:"https://docs.maiar.exchange",rel:"noopener noreferrer nofollow",target:"_blank",children:"Documentation"})}),Object(pt.jsx)("li",{children:Object(pt.jsx)("a",{href:"https://docs.maiar.exchange/how-to-guides",rel:"noopener noreferrer nofollow",target:"_blank",children:"Tutorials"})}),Object(pt.jsx)("li",{children:Object(pt.jsx)("a",{href:"https://docs.maiar.exchange/faq",rel:"noopener noreferrer nofollow",target:"_blank",children:"FAQ"})}),Object(pt.jsx)("li",{children:Object(pt.jsx)("a",{href:"/terms",children:"Terms"})}),Object(pt.jsx)("li",{children:Object(pt.jsx)("a",{href:"/disclaimer",children:"Disclaimer"})})]})]}),Object(pt.jsxs)("div",{className:"col-md-4 mt-3",children:[Object(pt.jsx)("p",{children:"Resources"}),Object(pt.jsxs)("ul",{className:"list-unstyled footer-column",children:[Object(pt.jsx)("li",{children:Object(pt.jsx)("a",{href:"https://elrond.com/blog/maiar-exchange-mex-tokenomics",rel:"noopener noreferrer nofollow",target:"_blank",children:"Blog"})}),Object(pt.jsx)("li",{children:Object(pt.jsx)(Ds.a,{placement:"bottom",delay:{show:0,hide:200},overlay:n,children:Object(pt.jsx)("span",{className:"soon",children:"Governance"})})}),Object(pt.jsx)("li",{children:Object(pt.jsx)("a",{href:"/mex-responsible-disclosure-policy.pdf",rel:"noopener noreferrer nofollow",target:"_blank",children:"Security"})}),Object(pt.jsx)("li",{children:Object(pt.jsx)(Ds.a,{placement:"bottom",delay:{show:0,hide:200},overlay:n,children:Object(pt.jsx)("span",{className:"soon",children:"Community Support"})})})]})]})]})})]}),Object(pt.jsxs)("div",{className:"d-flex flex-column mt-2 mb-4 text-center",children:[Object(pt.jsxs)("div",{className:"small text-secondary mb-3",children:["We and our affiliates are not affiliated with or commercially related to Saul Zaentz Company or The Tolkien Estate",Object(pt.jsx)("br",{className:"d-none d-md-block"}),"(owners of intellectual property rights relating to the works of J.R.R. Tolkien)."]}),Object(pt.jsx)("div",{className:"small text-secondary",children:"\xa9 2022 Elrond Network."}),Object(pt.jsxs)("small",{className:"text-secondary version mt-1",children:["Build ",e]})]})]})]})})}):Object(pt.jsxs)("div",{className:"pb-4",children:[Object(pt.jsx)("div",{className:"footer-inner d-flex flex-column align-items-center justify-content-center",children:Object(pt.jsx)("a",{target:"_blank",className:"d-flex align-items-center text-secondary",href:"https://elrond.com/",children:Object(pt.jsxs)("small",{children:["Made with",Object(pt.jsx)(F.a,{icon:Pp.faHeart,className:"text-danger mx-1"}),"by the Elrond team"]})})}),Object(pt.jsx)("div",{className:"text-center",children:Object(pt.jsxs)("small",{className:"text-secondary version mt-1",onClick:function(){alert("OS: ".concat(null===t||void 0===t?void 0:t.os," | Browser: ").concat(null===t||void 0===t?void 0:t.name," |  Version: ").concat(null===t||void 0===t?void 0:t.version))},children:["Build ".concat(e),"\xa0"]})})]})})},Ep=function(){var e=$h(),t=Object(g.b)(),n=Object(g.c)(Nt),a=Object(y.h)(),i=a.pathname,r=a.search,s=o.a.useState(""),c=Object(T.a)(s,2),l=c[0],d=c[1],u=o.a.useState((function(){return null})),m=Object(T.a)(u,2),b=m[0],j=m[1],f=function(){return Object.values(Th).some((function(t){return e(t)}))},h=o.a.useState(f()),p=Object(T.a)(h,2),x=p[0],v=p[1];o.a.useEffect((function(){var a,s=Object.values(gh).find((function(t){return e(t)})),c=Object.values(wh).some((function(t){return e(t)}));return s&&s!==n.pathname&&(t(In({pathname:a=i,search:/^\?[A-Za-z0-9=&]+$/.test(r)?r:""})),d(a)),v(f()||!s&&!c),function(){if(s||l){var e=i||l;e=[Nh.unlock,Nh.walletconnect,Nh.ledger].includes(i)?l:e,t(In({pathname:e,search:/^\?[A-Za-z0-9=]+$/.test(r)?r:""}))}}}),[i,r,l]);return o.a.useEffect((function(){var t=Object.entries(gh).find((function(t){var a=Object(T.a)(t,2)[1];return n.pathname===a||e(a)}));if(t){var a=Object(T.a)(t,1)[0],i=kh[a].component;j((function(){return Object(pt.jsx)(i,{})}))}}),[n.pathname]),{BgPage:b,hideBgPage:x}},Lp={id:"unsupported-browser",title:"Unsupported browser",description:"A modern browser is required to use Maiar Exchange.",icon:Rl.faExclamationTriangle,iconClassName:"bg-warning",expires:!1},Cp=function(){var e=Object(g.b)();c.useEffect((function(){var t=Object(Dp.a)();switch(null===t||void 0===t?void 0:t.name){case"crios":case"chrome":case"edge":case"firefox":case"safari":case"ios":break;default:e(fi(Lp))}}),[])},Ip=function(){var e=Object(O.p)().isLoggedIn,t=Object(O.q)().network.walletConnectBridge,n=Object(O.h)(O.d.walletconnect);o.a.useEffect((function(){e&&n&&""===t&&Ah()}),[t,n,e])},qp=function(){var e=Object(g.c)(id),t=Object(g.c)(nd);c.useEffect((function(){e.length>0||t.length>0?document.body.classList.add("toasts-visible"):document.body.classList.remove("toasts-visible")}),[e,t])},Mp=n(672),Bp=function(){var e=Object(g.b)(),t=Object(O.p)().isLoggedIn,n=Mh().address,a=Object(O.h)(O.d.walletconnect);return o.a.useEffect((function(){var i=setTimeout((function(){var i="core.".concat(n,".maiarIdAccessToken"),r=cn.local.getItem(i);!function(n){var i={id:"maiar-update-toast",title:"Update Required",description:"Update the Maiar App to the latest version to access all features.",icon:Mp.faMobileAlt,iconClassName:"bg-primary",expires:!1};e(t&&a&&!n?fi(i):pi(i.id))}(Boolean(r))}),1e3);return function(){return clearTimeout(i)}}),[t,a]),null},Up=function(e){var t=e.icon,n=e.iconClass,a=e.iconBgClass,i=e.iconSize,r=void 0===i?"5x":i,s=e.containerClass,c=void 0===s?"":s,o=e.title,l=e.description,d=e.action,u=e.dataTestId;return Object(pt.jsxs)("div",{className:"state m-auto p-spacer text-center ".concat(c),"data-testid":u,children:[t&&Object(pt.jsx)("span",{className:"icon-state mx-auto ".concat(a||""),children:Object(pt.jsx)(F.a,{icon:t,className:n||"",size:r})}),o&&Object(pt.jsx)("p",{className:"h4 mt-4 mb-3",children:o}),l&&Object(pt.jsx)("div",{className:"mb-spacer",children:l}),d&&Object(pt.jsx)(pt.Fragment,{children:d})]})},$p=function(e){var t=e.dataTestId,n=void 0===t?"loader":t,a=e.noText,i=void 0!==a&&a,r=e.title,s=void 0===r?"Loading...":r,c=e.containerClass,o=void 0===c?"":c;return Object(pt.jsx)(Up,{title:i?"":s,iconClass:"text-primary fa-spin",dataTestId:n,icon:_b.a,containerClass:o})},_p=Object(p.gql)(pp||(pp=Object(Bi.a)(["\n  query ($amount: String!) {\n    unwrapEgld(amount: $amount) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Vp=function(e){var t=e.callbackRoute,n=ur(),a=Wh(),i=c.useState(!1),r=Object(T.a)(i,2),s=r[0],o=r[1];return{unwrapEgld:function(e){var i=e.variables,r=e.onSuccess;o(!0),n({query:_p,variables:i}).then((function(e){var n;if(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.data){var i=[me(e.data.data.unwrapEgld)];a({transactions:i,callbackRoute:t,processingMessage:"Unwrapping WEGLD",successMessage:"WEGLD unwrapped",submittedMessage:"Unwrap WEGLD transaction submitted",pendingNftTransactions:"unwrap wegld"}),r&&r(),o(!1)}})).catch((function(e){console.log("unwrapEgld",e),o(!1)}))},unwrapEgldLoading:s}},Wp=Object(p.gql)(xp||(xp=Object(Bi.a)(["\n  query ($amount: String!) {\n    wrapEgld(amount: $amount) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),zp=function(e){var t=e.callbackRoute,n=ur(),a=Wh(),i=c.useState(!1),r=Object(T.a)(i,2),s=r[0],o=r[1];return{wrapEgld:function(e){var i=e.variables,r=e.onSuccess;o(!0),n({query:Wp,variables:i}).then((function(e){var n;if(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.data){var i=[me(e.data.data.wrapEgld)];a({transactions:i,callbackRoute:t,processingMessage:"Wrapping EGLD",successMessage:"EGLD Wrapped",submittedMessage:"Wrap EGLD transaction submitted",pendingNftTransactions:"wrap egld"}),r&&r(),o(!1)}})).catch((function(e){console.log("wrapEgld",e),o(!1)}))},wrapEgldLoading:s}},Hp=Object(p.gql)(vp||(vp=Object(Bi.a)(["\n  query ($inputToken: InputTokenModel!) {\n    lockAssets(inputToken: $inputToken) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),Yp=function(e){var t=e.callbackRoute,n=ur(),a=Wh(),i=c.useState(!1),r=Object(T.a)(i,2),s=r[0],o=r[1];return{lockAssets:function(e){var i=e.variables,r=e.onSuccess;o(!0),n({query:Hp,variables:i}).then((function(e){var n;if(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.data){var i=[me(e.data.data.lockAssets)];a({transactions:i,callbackRoute:t,processingMessage:"Locking MEX",successMessage:"MEX locked",submittedMessage:"Lock MEX transaction submitted",pendingNftTransactions:"lock MEX"}),r&&r(),o(!1)}})).catch((function(e){console.log("lockAssets",e),o(!1)}))},lockAssetsLoading:s}},Gp=function(e){var t=e.token,n=e.tokenAmount,i=e.onMaxClick,r=a.showMax,s=a.denominateAmount,c=a.balanceMinusDust,o=t.identifier===U,l=t.decimals,d=t.balance,u=s({amount:o?c(d):d,denomination:l}),m=s({amount:o?c(d):d,denomination:l,showLastNonZeroDecimal:!0}),b=r({amount:n,balance:u}),j=function(e){e.preventDefault(),i(u)};return{MaxBtn:function(){return b?Object(pt.jsx)("a",{href:"/",className:"badge badge-pill badge-primary text-uppercase",onClick:j,onMouseDown:function(e){e.preventDefault()},children:"Max"}):null},completeMaxBalance:b||"0"===m?void 0:m}},Zp=function(e){var t=e.expanded,n=e.token,a=e.setExpanded,i=c.useRef(null),r=Object(y.h)().pathname,s=n.identifier===_,o=Vp({callbackRoute:r}),l=o.unwrapEgld,d=o.unwrapEgldLoading,u=zp({callbackRoute:r}),b=u.wrapEgld,j=u.wrapEgldLoading,f=Yp({callbackRoute:r}),h=f.lockAssets,p=f.lockAssetsLoading,x={amount:"",acceptLockMexConditions:s?"false":"true"},v=Object(dt.a)().shape({amount:Object(dt.b)().required("Required").test("isValidNumber","Only digits and one . allowed",(function(e){return Boolean(e&&Ce(e))})).test("denomination","Too many decimals or value too small",(function(e){return ct(String(e),n.decimals)})).test("funds","Insufficient funds",(function(e){if(e){var t=new je.a(ot(e.toString(),n.decimals));return new je.a(n.balance).comparedTo(t)>=0}return!0})).test("minimum","Cannot be zero",(function(e){return!new je.a(null!==e&&void 0!==e?e:0).isZero()})),acceptLockMexConditions:Object(dt.b)().test("acceptLockMexConditions","You must accept",(function(e){return!s||"true"===e}))}),O=function(){P({values:Object(m.a)(Object(m.a)({},S),{},{amount:""})}),a(!1)},k=Object(qt.a)({initialValues:x,validationSchema:v,onSubmit:function(e){var t=e.amount,a=ot(null!==C&&void 0!==C?C:t,n.decimals);(n.identifier===$&&l({variables:{amount:a},onSuccess:O}),n.identifier===U&&b({variables:{amount:a},onSuccess:O}),n.identifier===_)&&h({variables:{inputToken:{tokenID:_,nonce:0,amount:a}},onSuccess:O})}}),g=k.setFieldValue,w=k.handleSubmit,T=k.errors,N=k.touched,S=k.values,A=k.handleBlur,F=k.handleChange,P=k.resetForm,D=S.amount,R=S.acceptLockMexConditions,E=Gp({token:n,tokenAmount:D,onMaxClick:function(e){g("amount",e)}}),L=E.MaxBtn,C=E.completeMaxBalance;return Object(pt.jsx)("div",{ref:i,className:"token-action",children:t&&Object(pt.jsx)("div",{className:"d-flex",children:Object(pt.jsxs)("form",{ref:i,onSubmit:w,noValidate:!0,className:"d-flex flex-column",children:[Object(pt.jsx)("div",{className:"form-group text-left mb-0",children:Object(pt.jsxs)("div",{className:"token-amount-input-select-max position-relative  ".concat("amount"in T&&"amount"in N?"is-invalid":""),children:[Object(pt.jsx)(Ct.AmountInput,{required:!0,name:"amount","data-testid":"amountInput",placeholder:"Amount",value:D,handleChange:F,handleBlur:A}),Object(pt.jsx)("div",{className:"badge-holder d-flex align-content-center justify-content-end",children:Object(pt.jsx)(L,{})}),Object(pt.jsx)("button",{type:"submit",className:"btn btn-sm btn-primary-highlight ml-2 py-1 px-2",disabled:d||j||p,style:{minWidth:"4.18rem"},children:d||j||p?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsxs)(pt.Fragment,{children:[n.identifier===$&&Object(pt.jsx)(pt.Fragment,{children:"Unwrap"}),n.identifier===U&&Object(pt.jsx)(pt.Fragment,{children:"Wrap"}),n.identifier===_&&Object(pt.jsx)(pt.Fragment,{children:"Lock"})]})})]})}),"amount"in T&&"amount"in N&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-1","data-testid":"invalidAmount",children:T.amount}),Object(pt.jsxs)("small",{className:"align-items-center text-left ".concat(s?"d-flex mt-2":"d-none"),children:[Object(pt.jsx)("input",{type:"checkbox",id:"acceptLockMexConditions",ref:i,onChange:F,value:R,checked:"true"===String(R),className:"mr-2"}),Object(pt.jsx)("label",{htmlFor:"acceptLockMexConditions",className:"d-flex align-items-center mb-0 ".concat("acceptLockMexConditions"in T?"text-danger":""),children:"I understand that my MEX will unlock after 1 year."})]})]})})})},Kp=function(e){var t=e.token,n=o.a.useState(!1),a=Object(T.a)(n,2),i=a[0],r=a[1],s=[$,U,_].includes(t.identifier),l=function(e){r(e)};return{TokenActionBtn:Object(c.useMemo)((function(){return s?Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[t.identifier===_&&Object(pt.jsx)(wo,{hide:1e3,customClass:"text-warning ml-2",info:Object(pt.jsx)("div",{children:"LKMEX will be unlocked after 1 year: 17% per month in the first 4 months & 16% per month in the last 2."})}),Object(pt.jsxs)("button",{className:"btn btn-sm btn-primary-highlight ml-2 py-1 px-2",onClick:function(){r(!i)},children:[t.identifier===$&&Object(pt.jsx)(pt.Fragment,{children:"Unwrap"}),t.identifier===U&&Object(pt.jsx)(pt.Fragment,{children:"Wrap"}),t.identifier===_&&Object(pt.jsx)(pt.Fragment,{children:"Lock"})]})]}):null}),[s,i,t,$,U,_]),TokenActionSection:o.a.useMemo((function(){return s?Object(pt.jsx)(Zp,{expanded:i,token:t,setExpanded:l}):null}),[s,i,t]),expanded:i}},Xp=function(e){var t=e.token,n=Object(g.c)($r),a=He({amount:t.balance,denomination:t.decimals,addCommas:!0}),i=Kp({token:t}),r=i.TokenActionBtn,s=i.TokenActionSection,c=i.expanded,o=function(){return Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex",children:[Object(pt.jsx)("div",{className:"mr-1",children:a}),Object(pt.jsx)(Rt,{token:t.identifier})]}),Object(pt.jsx)("small",{className:"text-secondary text-left text-sm-right",children:Object(pt.jsx)(Xb,{amount:t.valueUSD,usd:1})})]})},l=n.find((function(e){var n=e.identifier;return n===t.identifier||n===t.collection}));return Object(pt.jsx)("div",{className:"d-flex flex-column rounded p-1  mb-2 ".concat(c?"card-bg":""),children:Object(pt.jsx)("div",{className:"d-flex align-items-start",children:c?Object(pt.jsxs)("div",{className:"d-flex flex-fill flex-column flex-sm-row justify-content-sm-between align-items-sm-between",children:[Object(pt.jsx)("div",{className:"mb-2 mb-sm-0 mr-sm-2",children:s}),Object(pt.jsx)(o,{})]}):Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"token-icon-md mr-2",children:Object(pt.jsx)(Xh,{token:t.identifier})}),Object(pt.jsxs)("div",{className:"d-flex flex-fill flex-column flex-sm-row justify-content-sm-between align-items-start align-items-sm-between",children:[Object(pt.jsxs)("div",{className:"d-flex align-items-start",children:[Object(pt.jsxs)("div",{className:"d-flex flex-column align-items-start",children:[Object(pt.jsx)(yt,{token:t.identifier}),l&&Object(pt.jsxs)("small",{className:"text-secondary",children:["$",Ye(l.price,2)]})]}),r]}),Object(pt.jsx)(o,{})]})]})})})},Qp=function(){var e=Mh().account.balance,t=Object(g.c)(Ur),n=e?He({amount:e,denomination:M,showLastNonZeroDecimal:!0}):void 0,a=Ce(t)&&n?"".concat(parseFloat(n)*parseFloat(t)):"0",i={name:U,identifier:U,decimals:M,__typename:"",balance:e,valueUSD:a};return Object(pt.jsx)(Xp,{token:i})},Jp=function(e){var t=e.rawNfts,n=e.rawTokens,a=function(e){var t=null===e||void 0===e?void 0:e.filter((function(e){return"UserLockedAssetToken"===e.__typename})),n=null===t||void 0===t?void 0:t[0];if(t.length){var a=t.filter((function(e){return e.identifier!==n.identifier})),i=a.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{displayedNonce:"#".concat(e.nonce)})}));return Object(m.a)(Object(m.a)({},n),{},{displayedNonce:"#".concat(n.nonce)},a.length?{composedOf:i}:{})}}(t),i=function(e){var t=[],n=e.filter((function(e){return"UserFarmToken"===e.__typename})),a=e.filter((function(e){return"UserLockedFarmToken"===e.__typename||"UserLockedSimpleFarmToken"===e.__typename})),i=e.filter((function(e){var t=e.__typename;return"UserStakeFarmToken"===t||"UserDualYiledToken"===t||"UserUnbondFarmToken"===t}));return n.forEach((function(e){var n,a=t.find((function(t){return t.collection===e.collection})),i=Object(m.a)({},e);if(i.decodedAttributes){var r,s,c=null!==(r=i.decodedAttributes.aprMultiplier)&&void 0!==r?r:null===(s=i.decodedAttributes.farmTokenAttributes)||void 0===s?void 0:s.aprMultiplier,o=new je.a(i.balance);i.balance=o.dividedBy(null!==c&&void 0!==c?c:1).toFixed(0)}a?a.composedOf=[].concat(Object(ke.a)(null!==(n=a.composedOf)&&void 0!==n?n:[]),[i]):t.push(i)})),a.forEach((function(e){var n,a,i=t.find((function(t){return e.decodedAttributes&&e.decodedAttributes.farmTokenID===t.collection})),r=Object(m.a)(Object(m.a)({},e),{},{displayedIdentifier:null===(n=e.decodedAttributes)||void 0===n?void 0:n.farmTokenID});if(r.decodedAttributes){var s,c,o=null!==(s=r.decodedAttributes.aprMultiplier)&&void 0!==s?s:null===(c=r.decodedAttributes.farmTokenAttributes)||void 0===c?void 0:c.aprMultiplier,l=new je.a(r.balance);r.balance=l.dividedBy(null!==o&&void 0!==o?o:1).toFixed(0)}i?i.composedOf=[].concat(Object(ke.a)(null!==(a=i.composedOf)&&void 0!==a?a:[]),[r]):t.push(r)})),i.forEach((function(e){var n,a=t.find((function(t){return t.collection===e.collection})),i=Object(m.a)({},e);a?a.composedOf=[].concat(Object(ke.a)(null!==(n=a.composedOf)&&void 0!==n?n:[]),[i]):t.push(i)})),t}(t),r=t.filter((function(e){return"UserRedeemToken"===e.__typename})),s=function(e){var t=[];return e.filter((function(e){return"UserLockedEsdtToken"===e.__typename})).forEach((function(e){var n,a,i=t.find((function(t){var n;return e.decodedAttributes&&e.decodedAttributes.originalTokenID===(null===t||void 0===t||null===(n=t.decodedAttributes)||void 0===n?void 0:n.originalTokenID)})),r=Object(m.a)(Object(m.a)({},e),{},{displayedNonce:"#".concat(e.nonce),displayedIdentifier:null===(n=e.decodedAttributes)||void 0===n?void 0:n.originalTokenID});i?i.composedOf=[].concat(Object(ke.a)(null!==(a=i.composedOf)&&void 0!==a?a:[]),[r]):t.push(r)})),t}(t),c=null===n||void 0===n?void 0:n.filter((function(e){return"FungibleESDT"===e.type})),o=null===c||void 0===c?void 0:c.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{__typename:""})})),l=function(e,t){var n=e.filter((function(e){return"FungibleESDT-LP"===e.type})),a=t.filter((function(e){return"UserLockedLPToken"===e.__typename})),i=t.filter((function(e){return"UserLockedSimpleLpToken"===e.__typename})),r=[].concat(Object(ke.a)(a),Object(ke.a)(i)),s=n.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{__typename:""})}));return r.forEach((function(e){var t,n,a=s.find((function(t){return e.decodedAttributes&&e.decodedAttributes.lpTokenID===t.identifier})),i=Object(m.a)(Object(m.a)({},e),{},{displayedNonce:"#".concat(e.nonce),displayedIdentifier:null===(t=e.decodedAttributes)||void 0===t?void 0:t.lpTokenID});a?a.composedOf=[].concat(Object(ke.a)(null!==(n=a.composedOf)&&void 0!==n?n:[]),[i]):s.push(i)})),s}(n,t);return{tokens:o,lockedMex:a,farmTokens:i,liquidityTokens:l,userRedeemTokens:r,userLockedTokens:s}},ex=function(e){var t=e.tokens,n=e.lockedMex,a=e.liquidityTokens,i=e.farmTokens,r=e.balanceFetched,s=Object(g.c)(Ur),c=Mh().account.balance,l=o.a.useState(),d=Object(T.a)(l,2),u=d[0],m=d[1];return o.a.useEffect((function(){var e="..."!==s&&c?"".concat(parseFloat(He({amount:c,denomination:M,showLastNonZeroDecimal:!0}))*parseFloat(s)):void 0,o=n?n.composedOf?[].concat(Object(ke.a)(n.composedOf.map((function(e){return e.valueUSD}))),[n.valueUSD]):[n.valueUSD]:[],l=a.map((function(e){return e.composedOf?[].concat(Object(ke.a)(e.composedOf.map((function(e){return e.valueUSD}))),[e.valueUSD]):[e.valueUSD]})).flat(),d=i.map((function(e){return e.composedOf?[].concat(Object(ke.a)(e.composedOf.map((function(e){return e.valueUSD}))),[e.valueUSD]):[e.valueUSD]})).flat(),u=e&&r?[].concat(Object(ke.a)(t.map((function(e){return e.valueUSD}))),Object(ke.a)(o),Object(ke.a)(l),Object(ke.a)(d),[e]).reduce((function(e,t){return new je.a(e).plus(t).valueOf()}),"0"):void 0;m(u)}),[s,c,t,n,a,i,r]),u},tx=Object(p.gql)(Op||(Op=Object(Bi.a)(["\n  query ($offset: Int, $limit: Int, $pairsLimit: Int) {\n    tokens(offset: $offset, limit: $limit) {\n      identifier\n      name\n      decimals\n      balance\n      valueUSD\n      type\n    }\n    nfts(offset: $offset, limit: $limit) {\n      ... on UserLockedAssetToken {\n        __typename\n        name\n        decimals\n        identifier\n        collection\n        balance\n        valueUSD\n        nonce\n        decodedAttributes {\n          unlockSchedule {\n            epochs\n            percent\n          }\n        }\n      }\n      ... on UserLockedLPToken {\n        __typename\n        name\n        decimals\n        identifier\n        collection\n        balance\n        attributes\n        valueUSD\n        nonce\n        decodedAttributes {\n          lpTokenID\n        }\n      }\n      ... on UserFarmToken {\n        __typename\n        name\n        decimals\n        identifier\n        collection\n        balance\n        attributes\n        valueUSD\n        nonce\n        decodedAttributes {\n          lockedRewards\n          aprMultiplier\n        }\n      }\n      ... on UserLockedFarmToken {\n        __typename\n        name\n        decimals\n        identifier\n        collection\n        balance\n        attributes\n        valueUSD\n        nonce\n        decodedAttributes {\n          farmTokenID\n          farmTokenAttributes {\n            lockedRewards\n            aprMultiplier\n          }\n          farmingTokenID\n          farmingTokenNonce\n        }\n      }\n      ... on UserStakeFarmToken {\n        __typename\n        name\n        identifier\n        collection\n        balance\n        decimals\n        valueUSD\n      }\n      ... on UserUnbondFarmToken {\n        __typename\n        name\n        identifier\n        collection\n        balance\n        decimals\n        valueUSD\n        decodedAttributes {\n          remainingEpochs\n        }\n      }\n      ... on UserDualYiledToken {\n        __typename\n        name\n        identifier\n        collection\n        balance\n        decimals\n        valueUSD\n      }\n      ... on UserRedeemToken {\n        __typename\n        name\n        decimals\n        identifier\n        collection\n        balance\n        valueUSD\n        nonce\n      }\n      ... on UserLockedEsdtToken {\n        __typename\n        name\n        decimals\n        identifier\n        collection\n        balance\n        valueUSD\n        nonce\n        decodedAttributes {\n          originalTokenID\n          originalTokenNonce\n          unlockEpoch\n        }\n      }\n      ... on UserLockedSimpleLpToken {\n        __typename\n        name\n        decimals\n        identifier\n        collection\n        balance\n        valueUSD\n        nonce\n        decodedAttributes {\n          lpTokenID\n          firstTokenID\n          firstTokenLockedNonce\n          secondTokenID\n          secondTokenLockedNonce\n        }\n      }\n      ... on UserLockedSimpleFarmToken {\n        __typename\n        name\n        decimals\n        identifier\n        collection\n        balance\n        valueUSD\n        nonce\n        decodedAttributes {\n          farmTokenID\n          farmingTokenID\n          farmingTokenLockedNonce\n        }\n      }\n    }\n    pairs(offset: $offset, limit: $pairsLimit) {\n      address\n      firstToken {\n        name\n        identifier\n        decimals\n      }\n      secondToken {\n        name\n        identifier\n        decimals\n      }\n      liquidityPoolToken {\n        name\n        identifier\n        decimals\n      }\n      state\n    }\n    farms {\n      farmToken {\n        name\n        collection\n        decimals\n      }\n      farmingToken {\n        name\n        identifier\n        decimals\n      }\n    }\n    proxy {\n      address\n      wrappedLpToken {\n        collection\n        name\n        decimals\n      }\n      wrappedFarmToken {\n        collection\n        name\n        decimals\n      }\n      lockedAssetToken {\n        collection\n        name\n        decimals\n      }\n      assetToken {\n        identifier\n        name\n        decimals\n      }\n      intermediatedPairs\n      intermediatedFarms\n    }\n    simpleLock {\n      address\n      lockedToken {\n        collection\n        name\n        decimals\n      }\n      lpProxyToken {\n        collection\n        name\n        decimals\n      }\n      farmProxyToken {\n        collection\n        name\n        decimals\n      }\n      intermediatedPairs\n      intermediatedFarms\n    }\n  }\n"]))),nx=function(e){var t=e.ref,n=ur(),a=Object(g.c)(rd),i=c.useState({tokens:[],nfts:[],pairs:[],farms:[]}),r=Object(T.a)(i,2),s=r[0],o=r[1],l=c.useState(),d=Object(T.a)(l,2),u=d[0],b=d[1];return c.useEffect((function(){null!==t.current&&n({query:tx,variables:{offset:0,limit:500,pairsLimit:G}}).then((function(e){if(null!==t.current&&e.data&&e.data.data){var n=e.data.data,a=n.tokens,i=n.nfts,r=n.pairs,s=n.farms,c=n.proxy,l=n.simpleLock;o({tokens:a,nfts:i,pairs:ys({pairsData:r}),farms:s,proxy:Object(m.a)(Object(m.a)({},c),{},{simpleLock:l})}),b(!0)}else b((function(e){return!!Boolean(e)&&e}))})).catch((function(e){console.log("useFetchUserBalance",e),b((function(e){return!!Boolean(e)&&e}))}))}),[a]),{accountPageData:s,balanceFetched:u}},ax=Object(p.gql)(kp||(kp=Object(Bi.a)(["\n  query ($tokens: [InputTokenModel!]!) {\n    mergeLockedAssetTokens(tokens: $tokens) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),ix=function(e){var t=e.callbackRoute,n=e.hideModal,a=ur(),i=Wh(),r=c.useState(!1),s=Object(T.a)(r,2),o=s[0],l=s[1];return{mergeLockedAssetTokens:function(e){var r=e.tokens;l(!0),a({query:ax,variables:{tokens:r}}).then((function(e){if(e.data&&e.data.data){var a=[],s=e.data.data.mergeLockedAssetTokens;a.push(me(s)),i({transactions:a,callbackRoute:t,processingMessage:"Merging LKMEX",successMessage:"LKMEX merged",submittedMessage:"Merge LKMEX transactions submitted",pendingNftTransactions:r[0].tokenID}),l(!1),n()}})).catch((function(e){console.log("useMergeLockedAssetTokens",e),l(!1)}))},mergeLockedAssetTokensLoading:o}},rx=function(e){var t=e.meta,n=e.lkmex,a=e.isMerging,i=e.hideModal,r=e.setIsMerging,s=e.selectedIndexesLkMexsMerge,c=e.setSelectedIndexesLkMexsMerge,l=o.a.useRef(null),d=Object(g.c)(Nt),u=n.composedOf?[n].concat(Object(ke.a)(n.composedOf)):[n],m=ix({callbackRoute:d.pathname,hideModal:i}),b=m.mergeLockedAssetTokens,j=m.mergeLockedAssetTokensLoading,f=(null===s||void 0===s?void 0:s.length)||0,h=f>1&&f<6,p=j||!h;return u.length<2?Object(pt.jsx)(pt.Fragment,{}):a?u.length>1?Object(pt.jsxs)("div",{ref:l,className:"text-center",children:[h&&Object(pt.jsx)("button",{className:"btn btn-sm btn-primary py-1 px-2 mr-2",id:"mergeLkmex",disabled:p,onClick:function(){var e=u.filter((function(e,t){return null===s||void 0===s?void 0:s.includes(t)})).map((function(e){var t;return{tokenID:"".concat(e.collection),nonce:null!==(t=e.nonce)&&void 0!==t?t:0,amount:e.balance}}));b({tokens:e})},style:{minWidth:"9.5rem"},children:j?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:" Confirm merge"})}),!h&&Object(pt.jsx)("button",{className:"btn btn-sm btn-primary-highlight py-1 px-2",onClick:function(){r(!1),c([])},children:"Cancel"}),Object(pt.jsx)(wo,{hide:1e3,info:Object(pt.jsx)("div",{children:Object(pt.jsxs)("div",{className:"text-left mb-2",children:["Minimum 2 and maximum 5 lkmex can be merged.",Object(pt.jsx)("br",{}),"You will be asked to sign ",Object(pt.jsx)("strong",{children:"1 transaction"}),".",Object(pt.jsx)("br",{}),Object(pt.jsx)(Nl,{})]})})})]}):null:Object(pt.jsx)("button",{className:"btn btn-sm btn-primary-highlight py-1 px-2",onClick:function(){var e;r(!0),null===t||void 0===t||null===(e=t.onClickStartMerge)||void 0===e||e.call(t)},children:"Merge LKMEX"})},sx=function(e){var t=e.token,n=Object(c.useRef)(null),a=Object(y.h)().pathname,i=t.redeemTokenDetails,r=Boolean(null===i||void 0===i?void 0:i.contractAddress),s=Qf({ref:n,callbackRoute:a}),o=s.redeemTokens,l=s.redeemTokensLoading,d={tokenID:t.collection,nonce:t.nonce,amount:t.balance};return r&&i?Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("div",{className:"mr-1",children:Object(pt.jsx)(wo,{customClass:"ml-0",info:Object(pt.jsxs)("div",{className:"d-flex flex-column text-left",children:["Redeem to receive",Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Xh,{token:i.receivedTokenIconID})}),Ye(i.receivedAmount),Object(pt.jsx)("div",{className:"ml-1",children:Object(pt.jsx)(Rt,{token:i.receivedTokenID})})]})]})})}),Object(pt.jsx)("button",{className:"btn btn-sm btn-primary-highlight py-1 px-2 d-block ml-1",disabled:Boolean(l),ref:n,onClick:function(){var e,n,a;o({variables:{inputTokens:d,priceDiscoveryAddress:null===(e=t.redeemTokenDetails)||void 0===e?void 0:e.contractAddress},pendingPoolAddress:null===(n=t.redeemTokenDetails)||void 0===n?void 0:n.contractAddress,pendingNftTransactions:null===(a=t.redeemTokenDetails)||void 0===a?void 0:a.contractAddress})},children:l?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Redeem"})})]}):null},cx=Object(p.gql)(gp||(gp=Object(Bi.a)(["\n  query ($lockedTokenID: String!, $lockedTokenNonce: Int!, $amount: String!) {\n    unlockAssets(\n      lockedTokenID: $lockedTokenID\n      lockedTokenNonce: $lockedTokenNonce\n      amount: $amount\n    ) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),ox=function(e){var t=e.ref,n=e.callbackRoute,a=ur(),i=Wh(),r=c.useState(!1),s=Object(T.a)(r,2),o=s[0],l=s[1];return{unlockAssets:function(e){var r=e.variables;null!==t.current&&(l(!0),a({query:cx,variables:r}).then((function(e){if(null!==t.current&&e.data&&e.data.data){var a=[me(e.data.data.unlockAssets)];i({transactions:a,callbackRoute:n,processingMessage:"Unlocking locked MEX",successMessage:"Locked MEX unlocked",submittedMessage:"Unlock Locked MEX transactions submitted",pendingNftTransactions:r.lockedTokenID}),l(!1)}})).catch((function(e){console.log("unlockAssets",e),l(!1)})))},unlockAssetsLoading:o}},lx=function(e){var t=e.token,n=c.useRef(null),a=Object(g.c)(St),i=Object(y.h)().pathname,r=c.useState(!1),s=Object(T.a)(r,2),o=s[0],l=s[1],d=ox({ref:n,callbackRoute:i}),u=d.unlockAssets,m=d.unlockAssetsLoading;return c.useEffect((function(){var e;l(function(e){var t=e.unlockSchedule,n=e.stats;return!(!t||!n)&&void 0!==t.find((function(e){var t=pe({stats:n,epochs:e.epochs});return ve(t)}))}({unlockSchedule:null===t||void 0===t||null===(e=t.decodedAttributes)||void 0===e?void 0:e.unlockSchedule,stats:a}))}),[a]),o?Object(pt.jsx)("button",{className:"btn btn-sm btn-primary-highlight py-1 px-2 d-block",disabled:Boolean(m),ref:n,onClick:function(){u({variables:{lockedTokenID:t.collection,lockedTokenNonce:t.nonce,amount:t.balance}})},children:m?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Unlock"})}):null},dx=function(e){var t,n,a,i=e.token,r=e.proxy,s=e.pairs,c=e.farms,o=i.decodedAttributes,l=null===o||void 0===o?void 0:o.unlockSchedule,d=Boolean(null===o||void 0===o?void 0:o.firstTokenID),u=Boolean(null===o||void 0===o?void 0:o.farmingTokenLockedNonce),m=l||(d||u)?void 0:function(e){var t,n=e.decodedAttributes,a=null===n||void 0===n?void 0:n.lpTokenID,i=null===n||void 0===n?void 0:n.farmingTokenID;if(a&&(t=e.identifier),i){var r="".concat(null===n||void 0===n?void 0:n.farmingTokenNonce);t="".concat(null===n||void 0===n?void 0:n.farmingTokenID,"-").concat(nt(r))}return t}(i),b=o&&(o.lockedRewards||o.farmTokenAttributes&&o.farmTokenAttributes.lockedRewards),j=function(e){var t=e.token,n=e.proxy,a=e.pairs,i=e.farms,r=void 0;if(i&&a){var s,c=null!==(s=t.displayedIdentifier)&&void 0!==s?s:t.identifier,o=i.find((function(e){var t=e.farmToken;return c.includes(t.collection)}));if(o){var l=a.find((function(e){return e.liquidityPoolToken.identifier===o.farmingToken.identifier}));l&&(r={amount:t.balance,isLockedToken:t.collection===n.wrappedFarmToken.collection,pair:l})}}return r}({token:i,proxy:r,pairs:s,farms:c}),f=m||l?{identifier:m,unlockSchedule:l,proxy:r}:void 0,h=u?"".concat(null===(t=r.simpleLock)||void 0===t?void 0:t.lpProxyToken.collection,"-").concat(nt("".concat(null===o||void 0===o?void 0:o.farmingTokenLockedNonce))):void 0,p=d?{firstTokenID:"".concat(null===o||void 0===o?void 0:o.firstTokenID),firstTokenLockedNonce:null!==(n=null===o||void 0===o?void 0:o.firstTokenLockedNonce)&&void 0!==n?n:0,secondTokenID:"".concat(null===o||void 0===o?void 0:o.secondTokenID),secondTokenLockedNonce:null!==(a=null===o||void 0===o?void 0:o.secondTokenLockedNonce)&&void 0!==a?a:0,proxy:r}:void 0,x=h||p?{lpProxyTokenIdentifier:h,lpProxyTokenDetails:p,proxy:r}:void 0;return m||f||h||p||b||j?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(Ro,{staticText:b?"Generates locked rewards.":void 0,delayedFarmInitialTokens:j,delayedUnlockSchedule:f,delayedUnlockDates:x}),Object(pt.jsx)(lx,{token:i})]}):null},ux=Object(p.gql)(yp||(yp=Object(Bi.a)(["\n  query ($inputTokens: InputTokenModel!) {\n    unlockTokens(inputTokens: $inputTokens) {\n      value\n      receiver\n      gasPrice\n      gasLimit\n      data\n      chainID\n      version\n    }\n  }\n"]))),mx=function(e){var t=e.ref,n=e.callbackRoute,a=ur(),i=Wh(),r=c.useState(!1),s=Object(T.a)(r,2),o=s[0],l=s[1],d=function(){var e=Object(j.a)(h.a.mark((function e(r){var s,c,o,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.variables,t.current){e.next=3;break}return e.abrupt("return");case 3:return l(!0),e.prev=4,e.next=7,a({query:ux,variables:s});case 7:if(c=e.sent,null!==t.current&&c.data&&c.data.data){e.next=12;break}return l(!1),e.abrupt("return");case 12:o=c.data.data.unlockTokens,d=[me(o)],i({transactions:d,callbackRoute:n,processingMessage:"Unlocking tokens",successMessage:"Locked token unlocked",submittedMessage:"Unlock Locked Token transactions submitted",pendingNftTransactions:s.tokenID}),l(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),console.log("unlockTokens",e.t0),l(!1);case 22:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}();return{unlockTokens:d,unlockTokensLoading:o}},bx=function(e){var t,n,a=e.token,i=Object(c.useRef)(null),r=Object(y.h)().pathname,s=Object(g.c)(St),o=Boolean(null===(t=a.decodedAttributes)||void 0===t?void 0:t.originalTokenID),l=null!==(n=a.decodedAttributes)&&void 0!==n&&n.unlockEpoch?a.decodedAttributes.unlockEpoch-s.epoch:0,d=l<=0,u=Oe({epochs:l,stats:s,hasSteps:!1}),m=u.unlocksAtDate,b=u.unlocksAtText,j=mx({ref:i,callbackRoute:r}),f=j.unlockTokens,h=j.unlockTokensLoading,p={tokenID:W,nonce:a.nonce,amount:a.balance};return o?Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(wo,{customClass:"ml-0",info:Object(pt.jsx)(pt.Fragment,{children:"".concat(b," ").concat(m)})})}),d&&Object(pt.jsx)("button",{className:"btn btn-sm btn-primary-highlight py-1 px-2 d-block ml-1",disabled:Boolean(h),ref:i,onClick:function(){f({variables:{inputTokens:p}})},children:h?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Unlock"})})]}):null},jx=function(e){var t,n=e.token,a=e.proxy,i=e.pairs,r=e.farms,s=e.meta,o=Object(g.c)($r),l=Object(c.useState)(!1),d=Object(T.a)(l,2),u=d[0],m=d[1],b=null!==s&&void 0!==s&&s.expanded?s.expanded:u,j=null!==s&&void 0!==s&&s.expanded?s.setExpanded:m,f=function(e){var t=e.composedOf?[e].concat(Object(ke.a)(e.composedOf)):[],n=new je.a(0),a=0;return t.length>0?t.forEach((function(e){var t=new je.a(e.balance);n=n.plus(t),a+=parseFloat(e.valueUSD)})):(n=new je.a(e.balance),a=parseFloat(e.valueUSD)),{total:He({amount:n.toString(10),denomination:e.decimals,addCommas:!0}),totalUSD:a,composedOf:t}}(n),h=f.total,p=f.totalUSD,x=f.composedOf,v=0===x.length?n.displayedNonce:"",O=!x.length&&Boolean(a),k=o.find((function(e){var t,a=e.identifier;return a===n.identifier||a===n.collection||a===n.displayedIdentifier||a===(null===(t=n.redeemTokenDetails)||void 0===t?void 0:t.depositTokenID)})),y=null===(t=n.redeemTokenDetails)||void 0===t?void 0:t.depositedTokenPriceUSD,w=y&&(!k||"0"===k.price)?y:null===k||void 0===k?void 0:k.price;return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsxs)("div",{className:"d-flex align-items-start p-1 ".concat(w?"mb-2":""),children:[Object(pt.jsx)("span",{className:"token-icon-md mr-2",children:Object(pt.jsx)(Xh,{token:n.identifier})}),Object(pt.jsxs)("div",{onClick:function(){j(!b)},className:"".concat(x.length>0?"cursor-pointer":""," ").concat(w?"":"mb-2 mb-sm-0 pt-sm-2"," d-flex flex-fill flex-column flex-sm-row justify-content-sm-between align-items-start align-items-sm-between"),children:[w?Object(pt.jsx)("div",{className:"align-items-center",children:Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-start",children:[Object(pt.jsxs)("div",{className:"d-flex flex-column align-items-start flex-wrap mr-1",children:[Object(pt.jsx)(yt,{token:n.displayedIdentifier||n.identifier}),Object(pt.jsxs)("small",{className:"text-secondary",children:["$",Ye(w,2)]})]}),""!==v&&Object(pt.jsx)("div",{className:"mr-1",children:v}),x.length>0&&Object(pt.jsx)("div",{className:"d-flex mr-1",style:{marginTop:"0.3rem"},children:Object(pt.jsx)(up,{expanded:b})}),O&&Object(pt.jsxs)("div",{className:"d-flex align-items-center",style:{marginTop:"0.01rem"},children:[Object(pt.jsx)(dx,{token:n,proxy:a,pairs:i,farms:r}),Object(pt.jsx)(bx,{token:n}),Object(pt.jsx)(sx,{token:n})]})]})}):Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center flex-wrap",children:[Object(pt.jsx)("div",{className:"mr-1",children:Object(pt.jsx)(yt,{token:n.displayedIdentifier||n.identifier})}),""!==v&&Object(pt.jsx)("div",{className:"ml-1",children:v}),x.length>0&&Object(pt.jsx)("div",{className:"ml-1",children:Object(pt.jsx)(up,{expanded:b})}),O&&Object(pt.jsx)(dx,{token:n,proxy:a,pairs:i,farms:r})]}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex flex-wrap flex-sm-nowrap",children:[Object(pt.jsx)("div",{className:"mr-1",children:h}),Object(pt.jsx)(Rt,{token:n.displayedIdentifier||n.identifier})]}),Object(pt.jsx)("small",{className:"text-secondary text-left text-sm-right",children:Object(pt.jsx)(Xb,{amount:p.toString(),usd:1})})]})]})]},"".concat(n.identifier,"-header")),b&&x&&Object(pt.jsx)("div",{className:"d-flex flex-column ml-4",children:x.map((function(e,t){var n,c=He({amount:e.balance,denomination:e.decimals,addCommas:!0}),o=null===s||void 0===s||null===(n=s.selectedIndexesLkMexsMerge)||void 0===n?void 0:n.includes(t),l=!((null===s||void 0===s?void 0:s.selectedIndexesLkMexsMerge.length)>4)||o,d=null===s||void 0===s?void 0:s.isMergingLkMex;return Object(pt.jsxs)("label",{className:"d-flex align-items-center mb-2",children:[Object(pt.jsx)("div",{className:"mb-1 ".concat(!d&&"invisible"),children:Object(pt.jsx)("input",{type:"checkbox",className:"mr-2",checked:o,disabled:!l||!d,onClick:function(){null===s||void 0===s||s.toggleLkMexPositionMerge(t)}})}),Object(pt.jsx)("span",{className:"token-icon-md mr-2 mb-1",children:Object(pt.jsx)(Xh,{token:e.identifier})}),Object(pt.jsxs)("div",{className:"d-flex flex-fill flex-column flex-sm-row justify-content-sm-between align-items-start align-items-sm-between pt-1",children:[Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center mr-2 flex-wrap",children:[Object(pt.jsx)("div",{className:"mr-1",children:Object(pt.jsx)(yt,{token:e.displayedIdentifier||e.identifier})}),(null===e||void 0===e?void 0:e.displayedNonce)&&Object(pt.jsx)("div",{className:"mr-1",children:e.displayedNonce}),a&&Object(pt.jsxs)("div",{className:"d-flex align-items-center",children:[Object(pt.jsx)(dx,{token:e,proxy:a,pairs:i,farms:r}),Object(pt.jsx)(bx,{token:e})]})]}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex flex-wrap flex-sm-nowrap",children:[Object(pt.jsx)("div",{className:"mr-1",children:c}),Object(pt.jsx)(Rt,{token:e.displayedIdentifier||e.identifier})]}),Object(pt.jsx)("small",{className:"text-secondary text-left text-sm-right",children:Object(pt.jsx)(Xb,{amount:e.valueUSD,usd:1})})]})]})]},"".concat(e.identifier,"-subgroup"))}))},"".concat(n.identifier,"-expanded"))]})},fx=function(e){var t=e.hideModal,n=o.a.useRef(null);Dr();var a=Object(O.p)().isLoggedIn,i=Mh(),r=i.isAccountLoading,s=i.accountLoadingError,l=Object(g.c)(St),d=Object(g.c)(id),u=Object(g.c)(Br).priceDiscoveryContractsRate,b=o.a.useState(!1),j=Object(T.a)(b,2),f=j[0],h=j[1],p=o.a.useState(!1),x=Object(T.a)(p,2),v=x[0],k=x[1],y=o.a.useState(!1),w=Object(T.a)(y,2),N=w[0],S=w[1];o.a.useEffect((function(){h(Boolean(d.find((function(e){return void 0!==e.pendingFarmAddress})))),k(Boolean(d.find((function(e){return void 0!==e.pendingPoolAddress})))),S(Boolean(d.find((function(e){return void 0!==e.pendingNftTransactions}))))}),[d]);var A=dr(),F=A.fetchTokenDetails,P=A.tokenDetailsLoading,D=A.tokenDetailsError,R=lr(),E=R.fetchNftDetails,L=R.nftDetailsLoading,C=R.nftDetailsError,I=nx({ref:n}),q=I.accountPageData,M=q.tokens,B=q.nfts,U=q.pairs,_=q.farms,z=q.proxy,H=I.balanceFetched,Y=Jp({rawTokens:M,rawNfts:B}),G=Y.tokens,Z=Y.lockedMex,K=Y.farmTokens,X=Y.liquidityTokens,Q=Y.userRedeemTokens,J=Y.userLockedTokens,ee=ex({tokens:G,lockedMex:Z,liquidityTokens:X,farmTokens:K,balanceFetched:H}),te=Object(c.useState)(!1),ne=Object(T.a)(te,2),ae=ne[0],ie=ne[1],re=Object(c.useState)(!1),se=Object(T.a)(re,2),ce=se[0],oe=se[1],le=Object(c.useState)([]),de=Object(T.a)(le,2),ue=de[0],me=de[1],be=null===Q||void 0===Q?void 0:Q.map((function(e){var t=null===u||void 0===u?void 0:u.find((function(t){return t.redeemToken.collection===e.collection}));if(!t)return Object(pt.jsx)(jx,{token:e,proxy:z},e.identifier);var n=l.epoch,a=t.unlockEpoch-n>0,i=Vf({token:e,contractRate:t,givesLockedTokens:a}),r=_f(t.currentPhase.name)?t.address:void 0,s=Object(m.a)(Object(m.a)({},e),{},{displayedIdentifier:i.depositTokenID,redeemTokenDetails:Object(m.a)(Object(m.a)({},i),{},{contractAddress:r})});return Object(pt.jsx)(jx,{token:s,proxy:z},e.identifier)}));o.a.useEffect((function(){if(H){var e=[W,V],t=M.map((function(e){return e.identifier}));t.includes($)||t.push($),B.forEach((function(n){var a,i,r;e.includes(n.collection)||e.push(n.collection);var s=at(n.identifier);e.includes(s)||e.push(s);var c=null===n||void 0===n||null===(a=n.decodedAttributes)||void 0===a?void 0:a.lpTokenID;c&&!t.includes(c)&&t.push(c);var o=null===n||void 0===n||null===(i=n.decodedAttributes)||void 0===i?void 0:i.farmTokenID;o&&!e.includes(o)&&e.push(o);var l=null===n||void 0===n||null===(r=n.decodedAttributes)||void 0===r?void 0:r.originalTokenID;l&&!t.includes(l)&&t.push(l)})),F(t),E(e)}}),[H]);var fe=void 0===H||r&&a||P||L,he=!1===H||s||D||C,pe=!fe&&!he,xe=ee&&!f&&!v&&!N;return Object(pt.jsxs)("div",{ref:n,children:[fe&&!he&&Object(pt.jsx)($p,{}),he&&Object(pt.jsx)("div",{className:"my-4",children:Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load tokens"})}),pe&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsxs)("div",{className:"d-flex flex-column align-items-start justify-content-sm-between flex-sm-row my-3 text-center py-3 border-bottom","data-testid":"accountValue",children:[Object(pt.jsx)("div",{className:"text-secondary",children:"Total Account Balance:"}),xe?"\u2248 $"+new je.a(ee).toFormat(2):"..."]}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[N?Object(pt.jsx)("div",{className:"d-flex justify-content-center",children:Object(pt.jsx)($p,{title:"Waiting for transactions to be processed",containerClass:"tokens-section-loader"})}):Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"mb-3",children:Object(pt.jsx)(Qp,{})}),Object(pt.jsx)("div",{className:"mb-3 text-left pb-3 border-bottom font-weight-bold mx-1",children:"Tokens"}),Object(pt.jsx)("div",{"data-testid":"tokens",children:G.length>0?Object(pt.jsx)(pt.Fragment,{children:G.map((function(e){return Object(pt.jsx)(Xp,{token:e},e.identifier)}))}):Object(pt.jsx)("div",{className:"mb-3 text-secondary",children:"No tokens"})}),Object(pt.jsx)("div",{className:"my-3 text-left pb-3 border-bottom font-weight-bold mx-1",children:"Locked Tokens"}),Object(pt.jsxs)("div",{"data-testid":"lockedTokens",children:[Z&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(jx,{token:Z,proxy:z,meta:{expanded:ae,setExpanded:ie,isMergingLkMex:ce,toggleLkMexPositionMerge:function(e){if(ue.includes(e)){var t=ue.filter((function(t){return t!==e}));me(t)}else{var n=[].concat(Object(ke.a)(ue),[e]);me(n)}},selectedIndexesLkMexsMerge:ue}},Z.identifier),Object(pt.jsx)(rx,{lkmex:Z,isMerging:ce,hideModal:t,setIsMerging:oe,selectedIndexesLkMexsMerge:ue,setSelectedIndexesLkMexsMerge:me,meta:{onClickStartMerge:function(){ie(!0)}}})]}),J.map((function(e){return Object(pt.jsx)(jx,{token:e,proxy:z},e.identifier)})),!Z&&!J.length&&Object(pt.jsx)("div",{className:"mb-3 text-secondary",children:"No locked tokens"})]}),Q.length>0&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"my-3 text-left pb-3 border-bottom font-weight-bold mx-1",children:"Discovery"}),Object(pt.jsx)("div",{"data-testid":"redeemTokens",children:be})]})]}),Object(pt.jsx)("div",{className:"my-3 text-left pb-3 border-bottom font-weight-bold mx-1",children:"Liquidity"}),v?Object(pt.jsx)("div",{className:"d-flex justify-content-center",children:Object(pt.jsx)($p,{title:"Waiting for transactions to be processed",containerClass:"tokens-section-loader"})}):Object(pt.jsx)("div",{"data-testid":"lpTokens",children:X.length?Object(pt.jsx)(pt.Fragment,{children:X.map((function(e){return Object(pt.jsx)(jx,{token:e,proxy:z},e.identifier)}))}):Object(pt.jsx)("div",{className:"mb-3 text-secondary",children:"No LP tokens"})}),Object(pt.jsx)("div",{className:"my-3 text-left pb-3 border-bottom font-weight-bold mx-1",children:"Farms"}),f?Object(pt.jsx)("div",{className:"d-flex justify-content-center mb-3",children:Object(pt.jsx)($p,{title:"Waiting for transactions to be processed",containerClass:"tokens-section-loader"})}):Object(pt.jsx)("div",{"data-testid":"farmTokens",children:K.length>0?Object(pt.jsx)("div",{className:"mb-3",children:null===K||void 0===K?void 0:K.map((function(e){return Object(pt.jsx)(jx,{token:e,proxy:z,pairs:U,farms:_},e.identifier)}))}):Object(pt.jsx)("div",{className:"mb-3 pb-3 text-secondary",children:"No farm tokens"})})]})]})]})},hx=n(673);function px(e,t){return e.timestamp<t.timestamp?1:e.timestamp>t.timestamp?-1:0}var xx=function(e){var t=e.transactions,n=Object(ke.a)(t).filter((function(e){return void 0!==e})).sort(px);return Object(pt.jsx)("div",{className:"text-left","data-testid":"transactions",children:n.map((function(e,t){return Object(pt.jsxs)("div",{className:"d-flex flex-wrap align-items-center justify-content-between mx-3 pt-0 pb-3 ".concat(t!==n.length-1?"border-bottom":""),children:[Object(pt.jsx)("div",{className:"mt-3 mr-3",style:{width:"14rem"},children:Object(pt.jsxs)("a",{href:"".concat(te.explorerAddress,"/transactions/").concat(e.txHash),target:"_blank",className:"link-style trim-fs-sm d-flex align-items-center",title:"View on Explorer",children:[Object(pt.jsx)(fO,{text:e.txHash}),Object(pt.jsx)(F.a,{icon:N.q,className:"ml-1",style:{fontSize:"0.8rem"}})]})}),Object(pt.jsx)(hx.a,{tx:e})]},e.txHash+t)}))})},vx=function(){var e=Object(g.c)(Ae),t=e.transactions,n=e.transactionsFetched,a=e.txCount,i=Object(g.b)(),r=Mh().address,s=or().getAccountTransactions;return o.a.useEffect((function(){s({}).then((function(e){var t=e.data,n=e.success;i(xn({transactions:t,transactionsFetched:n}))}))}),[a,r]),Object(pt.jsxs)("div",{children:[void 0===n&&Object(pt.jsx)($p,{}),!0===n&&(null===t||void 0===t?void 0:t.length)>0&&Object(pt.jsx)(xx,{transactions:t}),!0===n&&0===(null===t||void 0===t?void 0:t.length)&&Object(pt.jsx)("div",{className:"my-5",children:Object(pt.jsx)(Up,{icon:_b.b,iconClass:"text-secondary",iconSize:"3x",title:"No Transactions"})}),!1===n&&Object(pt.jsx)("div",{className:"my-5",children:Object(pt.jsx)(Up,{icon:Ii.faTimes,title:"Unable to load transactions"})})]})},Ox=O.b.ExplorerLink,kx=function(){var e=o.a.useRef(),t=Mh().account,n=t.address,a=t.username,i=o.a.useState(!1),r=Object(T.a)(i,2),s=r[0],c=r[1],l=o.a.useState(),d=Object(T.a)(l,2),u=d[0],m=d[1],b=o.a.useState("balances"),j=Object(T.a)(b,2),f=j[0],h=j[1];o.a.useEffect((function(){return e.current=setInterval((function(){var e=cn.local.getItem("address");e||!0!==u||(cn.local.clear(),window.location.reload()),e&&m(!0)}),2e3),function(){clearInterval(e.current)}}),[u]);var p=function(e){return function(t){t&&t.preventDefault(),e&&Object(O.k)(),c(e)}};return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsxs)("button",{className:"btn btn-light mr-2 d-flex flex-row align-items-center",onClick:p(!0),"data-testid":"accountDetailsBtn",children:[Object(pt.jsx)(F.a,{icon:N.s,size:"lg"}),Object(pt.jsx)("div",{className:"navbar-address ml-2 d-none d-lg-block",children:a?Object(pt.jsxs)("div",{className:"text-left text-truncate",children:["@",a.replace(".elrond","")]}):Object(pt.jsx)("div",{className:"text-left",children:"My Account"})})]}),s&&Object(pt.jsx)(Pc.a,{show:s,backdrop:!0,onHide:p(!1),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsxs)("div",{className:"card w-100 account",children:[Object(pt.jsx)(op,{title:Object(pt.jsx)(pt.Fragment,{children:"Account details"}),onCloseBtnClick:p(!1),children:Object(pt.jsxs)("div",{className:"mt-4 mb-2 pb-1",children:[Object(pt.jsx)(_t,{}),Object(pt.jsx)("div",{className:"d-flex flex-wrap justify-content-between mb-2",children:Object(pt.jsx)("label",{className:"text-secondary mb-0",children:"Your wallet"})}),Object(pt.jsxs)("div",{className:"address-holder-container d-flex flex-row justify-content-between align-items-center border rounded px-3 py-2 mb-4",children:[Object(pt.jsx)("div",{className:"address-holder trim-fs-sm text-primary-highlight",children:Object(pt.jsx)(fO,{text:n})}),Object(pt.jsx)("div",{className:"border-left ml-3 pl-3 text-secondary",children:Object(pt.jsx)(wp,{text:n,className:"align-end-flex"})})]}),Object(pt.jsx)("div",{className:"d-flex justify-content-center",children:Object(pt.jsx)("div",{className:"navbar-nav d-inline-block",children:Object(pt.jsxs)("ul",{className:"page-nav-pills nav nav-pills",children:[Object(pt.jsx)("li",{className:"nav-item",children:Object(pt.jsx)("a",{className:"nav-link pt-2 px-3 ".concat("balances"===f?"active":""),href:"/#",onClick:function(e){e.preventDefault(),h("balances")},children:"Balances"})}),Object(pt.jsx)("li",{className:"nav-item",children:Object(pt.jsx)("a",{className:"nav-link pt-2 px-3 ".concat("history"===f?"active":""),href:"/#",onClick:function(e){e.preventDefault(),h("history")},children:"History"})})]})})})]})}),Object(pt.jsxs)("div",{className:"card-body card-bg-light text-center pt-0 rounded-0",children:["balances"===f&&Object(pt.jsx)(fx,{hideModal:function(){c(!1)}}),"history"===f&&Object(pt.jsx)(vx,{})]}),Object(pt.jsx)("div",{className:"card-footer px-3 px-sm-spacer p-2",children:Object(pt.jsxs)("div",{className:"mx-n2 d-flex flex-wrap flex-sm-nowrap justify-content-between mb-3",children:[Object(pt.jsx)(Ox,{page:"/accounts/".concat(n),text:"View on Explorer",className:"btn btn-block btn-lg btn-primary mt-3 mx-2 text-white text-decoration-none"}),Object(pt.jsx)("button",{className:"btn btn-lg btn-primary btn-block mx-2 mt-3",onClick:function(){m(!1),c(!1),Ah()},children:"Disconnect"})]})})]})})]})};var gx=n(674),yx=n(675),wx=function(e){var t=e.icon,n=e.label,a=e.value;return Object(pt.jsxs)("div",{className:"info-row d-flex align-items-center mb-3",children:[t&&Object(pt.jsx)("div",{className:"d-flex mr-2 info-icon align-items-center justify-content-center",children:Object(pt.jsx)(F.a,{icon:t,className:"text-secondary",size:"xs"})}),Object(pt.jsxs)("div",{className:"flex-sm-fill d-flex flex-column flex-sm-row justify-content-sm-between",children:[Object(pt.jsx)("span",{className:"text-secondary",children:n}),a]})]})},Tx=function(){var e=Object(g.c)(Br),t=c.useState(!1),n=Object(T.a)(t,2),a=n[0],i=n[1],r=function(e){return function(t){t&&t.preventDefault(),i(e)}};return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("button",{className:"mex-modal-btn btn btn-light pl-1 pr-2 mr-2 d-flex flex-row align-items-center",onClick:r(!0),children:Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(pt.jsx)("div",{className:"mr-2 pool-icon",children:Object(pt.jsx)(Xh,{token:_})}),Object(pt.jsxs)("div",{className:"text-left",children:["$",e.mexPrice]})]})}),a&&Object(pt.jsx)(Pc.a,{show:a,backdrop:!0,onHide:r(!1),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsxs)("div",{className:"card w-100 mex-modal",children:[Object(pt.jsx)(op,{extraClass:"border-0",title:Object(pt.jsx)(pt.Fragment,{children:"MEX Stats"}),onCloseBtnClick:r(!1)}),Object(pt.jsx)("div",{className:"card-body pt-0",children:Object(pt.jsx)("div",{className:"card",children:Object(pt.jsxs)("div",{className:"card-body card-bg-light",children:[Object(pt.jsx)(wx,{icon:A.faWater,label:"Total Value Locked:",value:"$".concat(e.totalDepositedInExchange)}),Object(pt.jsx)(wx,{icon:gx.faChartBar,label:"Volume (24h):",value:"$".concat(e.totalVolumeUSD24h)}),Object(pt.jsx)(wx,{icon:yx.faExchange,label:"Trading Pairs:",value:e.pairsRate.filter((function(e){var t=e.state,n=e.type;return"Active"===t&&"Experimental"!==n})).length.toString()}),Object(pt.jsx)("div",{className:"border-top mb-3"}),Object(pt.jsx)(wx,{label:"USD per MEX:",value:"$".concat(e.mexPrice)}),Object(pt.jsx)(wx,{label:"EGLD per MEX:",value:e.egldMexRate}),Object(pt.jsx)(wx,{label:"Market Cap:",value:"$".concat(e.marketCap)}),Object(pt.jsx)(wx,{label:"Current Emissions:",value:"..."!==e.currentEmissions?"".concat(Ye(e.currentEmissions,0)," MEX / block"):"..."}),Object(pt.jsx)(wx,{label:"Est. Weekly Rewards:",value:"$".concat(e.aggregatedRewards)}),Object(pt.jsx)(wx,{label:"Burn to date:",value:Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsxs)("div",{className:"d-flex",children:[Object(pt.jsx)("div",{className:"mr-1",children:"0"===e.mexBurned?"...":Ye(e.mexBurned,0)}),"MEX"]}),Object(pt.jsx)("small",{className:"text-secondary text-left text-sm-right",children:"0"!==e.mexBurned&&Object(pt.jsx)(Xb,{amount:e.mexBurned,usd:parseFloat(e.mexPrice)})})]})})]})})})]})})]})};function Nx(){var e=or().saveApiSettings,t=Object(g.c)(Re),n=Object(g.c)(De),a=Object(g.c)(Ee),i=Object(m.a)(Object(m.a)(Object(m.a)({},n&&n!==on.value?{tolerance:n}:{}),t&&t!==mn.light?{theme:t}:{}),a&&a.length>0?{importedPools:a.join(",")}:{});return function(t){return e(Object(m.a)(Object(m.a)({},i),t))}}function Sx(){var e=Object(g.c)(Tt),t=Object(g.c)(Re);c.useEffect((function(){n(t||e)}),[e,t]);var n=function(e){var t=document.getElementById("stylesheet");if(t){var n=t.href,a=n.slice(n.lastIndexOf("/")+1),i=a.slice(0,a.indexOf(".css")),r=e;i!==r&&(t.href=n.replace(i,r))}};return e}var Ax,Fx=function(e){var t=e.className,n=Sx(),a=Object(O.p)().isLoggedIn,i=Object(g.b)(),r=Nx();return Object(pt.jsx)("a",{href:"/",className:"btn btn-light py-2 px-3 d-flex align-items-center ".concat(t||""),onClick:function(e){e.preventDefault();var t=n!==mn.dark?mn.dark:mn.light;a&&r({theme:t}).then().catch((function(e){console.error("Unable to save settings to api",e)}));var s=he()().add(6,"months").unix();cn.local.setItem({key:"activeTheme",data:t,expires:s}),i(fn(t)),i(Cn(t))},"aria-label":"Toggle Theme",children:Object(pt.jsx)(F.a,{icon:n!==mn.dark?N.p:N.n})})},Px=n(676),Dx=function(){var e=c.useRef(null),t=Object(g.b)(),n=Object(g.c)(Ee),a=Object(g.c)(Br),i=Nx(),r=dr().fetchTokenDetails;c.useEffect((function(){if(n){var e=[];n.forEach((function(t){var n=Ge({pairsRate:a.pairsRate,pairAddress:t});n&&(e.includes(n.firstToken.identifier)||e.push(n.firstToken.identifier),e.includes(n.secondToken.identifier)||e.push(n.secondToken.identifier))})),r(e)}}),[n]);var s=function(e){i({importedPools:e.join(",")}).then((function(n){n.success&&t(pn(e))})).catch((function(e){console.error("Unable to save settings to api",e)}))},o=Object(qt.a)({initialValues:{newAddress:"",iAccept:"false"},validationSchema:Object(dt.a)().shape({newAddress:Object(dt.b)().required("Required").test("validAddress","Not a valid address",(function(e){return Boolean(st("".concat(null!==e&&void 0!==e?e:"")))})),iAccept:Object(dt.b)().required("Required").test("mustAccept","Must accept",(function(e){return"true"===e}))}),onSubmit:function(e){var t=e.newAddress;null!==n&&void 0!==n&&n.includes(t)||(s([].concat(Object(ke.a)(null!==n&&void 0!==n?n:[]),[t])),j())}}),l=o.handleSubmit,d=o.errors,u=o.touched,m=o.handleBlur,b=o.handleChange,j=o.resetForm,f=o.values,h=f.newAddress,p=f.iAccept;return Object(pt.jsxs)("form",{ref:e,onSubmit:l,noValidate:!0,className:"imported-pools",children:[Object(pt.jsx)("label",{className:"text-secondary font-weight-light",children:"Experimental Pools"}),Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[n&&n.length>0&&Object(pt.jsx)("div",{className:"card mb-2",children:Object(pt.jsx)("div",{className:"card-body p-3",children:n.map((function(e,t){var i=Ge({pairsRate:a.pairsRate,pairAddress:e});return Object(pt.jsxs)("div",{className:"imported-pool d-flex flex-row align-items-center justify-content-between text-body",children:[Object(pt.jsx)("div",{className:"d-flex flex-row align-items-center",children:i&&"Inactive"!==i.state?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(vv,{pair:i,size:"sm"})}),Object(pt.jsx)(Ov,{pair:i}),Object(pt.jsx)(wp,{text:i.address,className:"ml-2"})]}):Object(pt.jsx)(pt.Fragment,{children:"Pool not found"})}),Object(pt.jsx)("a",{className:"side-action text-secondary ml-2",href:"/#",onClick:function(t){t.preventDefault(),s(n.filter((function(t){return t!==e})))},children:Object(pt.jsx)(F.a,{size:"lg",icon:Px.faTimesCircle})})]},t)}))})}),Object(pt.jsxs)("div",{className:"input-group ".concat("newAddress"in d&&"newAddress"in u?"is-invalid":""),children:[Object(pt.jsx)("input",{type:"text",id:"newAddress",name:"newAddress",className:"form-control",placeholder:"Pool address",onChange:b,onBlur:m,value:h}),Object(pt.jsx)("div",{className:"input-group-append",children:Object(pt.jsx)("button",{className:"btn btn-primary py-2 px-3",type:"submit",children:Object(pt.jsx)(F.a,{size:"lg",icon:Wm.faPlus})})})]}),"newAddress"in d&&"newAddress"in u&&Object(pt.jsx)("small",{className:"d-flex flex-column flex-sm-row my-2",children:Object(pt.jsx)("div",{className:"invalid-feedback d-flex mt-0 mb-2 mb-sm-0","data-testid":"invalidNewAddress",children:d.newAddress})}),Object(pt.jsxs)("div",{className:"d-flex mt-2 align-items-center",children:[Object(pt.jsx)("input",{type:"checkbox",id:"iAccept",ref:e,onChange:b,onBlur:m,value:p,checked:"true"===String(p),className:"mr-2"}),Object(pt.jsx)("label",{htmlFor:"iAccept",className:"d-flex align-items-center mb-0  ".concat("iAccept"in d&&"newAddress"in u?"text-danger":"text-body"),children:"I understand the risks"}),Object(pt.jsx)(wo,{info:Object(pt.jsx)(pt.Fragment,{children:"Anyone can create an ESDT token on Elrond blockchain with any name, including creating fake versions of existing tokens and tokens that claim to represent projects that do not have a token. If you buy an arbitrary token, you may be unable to sell it back."})})]})]})]})},Rx=n(1145),Ex=n(1146),Lx=n(1147),Cx=n(1151),Ix=function(e){try{return ut.validateSync({tolerance:e}),""}catch(t){return t.message}},qx=function(e){var t=e.settingsTolerance,n=e.updateSettingsTolerance,a=Object(g.b)(),i=Object(g.c)(De),r=Nx(),s=c.useState(""),o=Object(T.a)(s,2),l=o[0],d=o[1],u=function(e){Ix(e)||r({tolerance:e}).then((function(t){t.success&&(a(hn(e)),d(""))})).catch((function(t){a(hn(e)),d(""),console.error("Unable to save settings to api",t)}))};return Object(pt.jsxs)("div",{className:"tolerance-toggle",children:[Object(pt.jsx)("label",{className:"text-secondary font-weight-light",children:"Slippage tolerance"}),Object(pt.jsxs)("div",{className:"d-flex",children:[ln.map((function(e,t){return Object(pt.jsx)("div",{className:"mr-2",children:Object(pt.jsx)(Rx.a,{toggle:!0,children:Object(pt.jsx)(Ex.a,{id:"radio-".concat(t),type:"radio",variant:"light",name:"tolerance",value:e.value,checked:i===e.value,onChange:function(e){n(""),u(e.currentTarget.value)},children:e.name},t)})},t)})),Object(pt.jsx)("div",{className:"mb-3 d-inline-block",children:Object(pt.jsxs)(Lx.a,{className:"d-flex flex-row",children:[Object(pt.jsx)(Cx.a.Control,{name:"tolerance",placeholder:"0.0",value:t,onChange:function(e){!function(e){n(e);var t=Ix(e);t?d(String(t)):u(e)}(e.target.value.trim())},isInvalid:Boolean(l),style:{maxWidth:"4.7rem",height:"2.675rem",paddingRight:"1rem"}}),Object(pt.jsx)(Lx.a.Append,{style:{height:"2.675rem"},children:Object(pt.jsx)(Lx.a.Text,{children:"%"})})]})})]}),l&&Object(pt.jsx)("div",{className:"invalid-feedback d-flex mb-2",children:l}),Object(pt.jsx)(bu,{tolerance:t})]})},Mx=function(){var e=or().getApiSettings,t=Bh(),n=Object(g.c)(De),a=Object(g.b)(),i=o.a.useState(ln.map((function(e){return e.value})).includes(n)?"":n),r=Object(T.a)(i,2),s=r[0],c=r[1];return o.a.useEffect((function(){t&&e().then((function(e){var t=e.data;e.success&&(t.tolerance&&!Ix(t.tolerance)&&(a(hn(t.tolerance)),c(ln.map((function(e){return e.value})).includes(t.tolerance)?"":t.tolerance)),t.theme&&(a(fn(t.theme)),a(Cn(t.theme))),t.importedPools&&""!==t.importedPools&&a(pn(t.importedPools.split(","))),t.socketUrl&&a(On(t.socketUrl)))})).catch((function(e){console.error("Unable to get api settings",e)}))}),[t]),Object(pt.jsx)(Ds.a,{trigger:"click",placement:"bottom",rootClose:!0,overlay:Object(pt.jsx)(Rs.a,{id:"settings-popover",className:"basic-popover",children:Object(pt.jsx)(Rs.a.Content,{children:Object(pt.jsx)("div",{className:"card",children:Object(pt.jsxs)("div",{className:"card-body",children:[Object(pt.jsxs)("div",{className:"theme-toggle d-flex justify-content-between align-items-center pb-3",children:[Object(pt.jsx)("h5",{className:"mb-0",children:"Settings"}),Object(pt.jsx)("div",{children:Object(pt.jsx)(Fx,{})})]}),Object(pt.jsx)(qx,{settingsTolerance:s,updateSettingsTolerance:c}),Object(pt.jsx)(Dx,{})]})})})}),children:Object(pt.jsx)("button",{className:"btn btn-light py-2",id:"settings-btn",children:Object(pt.jsx)(F.a,{icon:N.g,size:"lg"})})})},Bx=function(){var e=Object(O.g)(),t=Object(O.n)(),n=t.address,a=t.shard,i=Dh(),r=Object(g.c)(Nt),s=he()().add(1,"day").unix(),l=r.pathname===Nh.home;Sx(),function(){var e=o.a.useRef(null),t=Object(g.b)(),n=Mh().address,a=or().getAccountTransactions,i=Object(g.c)(Nt),r=Object(g.c)(Fe),s=Object(g.c)(Pe),c=Object(g.c)(id);o.a.useEffect((function(){var e=function(e){"logoutEvent"===e.key&&Ah()};return n&&window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}}),[n]),o.a.useEffect((function(){return e.current=setInterval((function(){n&&!document.hidden&&i.pathname!==Nh.farms&&a({count:!0}).then((function(e){var n=e.data;e.success&&t(vn({txCount:n}))}))}),12e3),function(){clearInterval(e.current)}}),[n,i]),o.a.useEffect((function(){s>1&&0===c.length&&(Object(O.k)(),t(Oi()))}),[r])}();return Object(c.useEffect)((function(){!function(){var t,n=null!==(t=cn.session.getItem("shard"))&&void 0!==t?t:void 0;e&&void 0===n&&cn.session.setItem({key:"shard",data:a,expires:s})}()}),[n]),Object(pt.jsx)("div",{className:"main-navbar",children:Object(pt.jsxs)("div",{className:"px-3 px-md-4",children:[Object(pt.jsxs)("nav",{className:"col navbar navbar-expand-lg align-items-stretch justify-content-between flex-nowrap p-0",children:[Object(pt.jsx)("div",{className:"d-flex align-items-center navbar-logo",children:Object(pt.jsx)(mv,{hideTextMobile:!0})}),!i&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"d-flex align-items-center justify-content-center text-center flex-grow-1",children:Object(pt.jsx)("div",{className:"collapse navbar-collapse justify-content-center",id:"navbarMenu",children:Object(pt.jsx)("div",{className:"navbar-nav d-none d-xl-flex",children:Object(pt.jsx)(pv,{})})})}),Object(pt.jsx)("div",{className:"d-flex align-items-center justify-content-end navbar-buttons",children:e?Object(pt.jsxs)("div",{className:"d-flex align-items-center logged-in",style:{minWidth:0},children:[Object(pt.jsx)(Tx,{}),Object(pt.jsx)(kx,{}),Object(pt.jsx)(Mx,{})]}):Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(Tx,{}),!l&&Object(pt.jsx)(Fx,{className:"mr-2"}),Object(pt.jsx)(kO,{hideTextMobile:!0})]})})]})]}),!i&&Object(pt.jsx)("div",{className:"d-flex justify-content-center pb-3 d-xl-none",id:"navbarMenuMobile",children:Object(pt.jsx)("div",{className:"navbar-nav d-inline-block",children:Object(pt.jsx)(pv,{})})})]})})},Ux=function(e){return e.modals},$x=Se(Ux,(function(e){return e.txSubmittedModal})),_x=Se(Ux,(function(e){return e.notificationModal})),Vx=function(){var e=Object(g.c)(_x),t=Object(g.b)(),n=o.a.useState(!1),a=Object(T.a)(n,2),i=a[0],r=a[1];o.a.useEffect((function(){r(Boolean(e))}),[e]);var s;return Object(pt.jsx)(pt.Fragment,{children:i&&e&&Object(pt.jsx)(Pc.a,{show:i,backdrop:!0,onHide:(s=!1,function(){r(s)}),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("div",{className:"card w-100 notification-modal",children:Object(pt.jsx)(Up,{icon:e.icon,iconClass:e.iconClassName,iconBgClass:"p-4 rounded-bg-circle",iconSize:"3x",title:e.title,description:e.description,action:Object(pt.jsx)("button",{className:"btn btn-primary",onClick:function(){r(!1),t(La())},children:"Done"})})})})})},Wx=n(677);!function(e){e[e.UnwrapWEGLD=0]="UnwrapWEGLD",e[e.TransactionToast=1]="TransactionToast",e[e.FarmRewards=2]="FarmRewards",e[e.NewVersion=3]="NewVersion"}(Ax||(Ax={}));var zx=function(){return function(e){var t=Object(g.c)(rd),n=Object(g.c)(id),a=Object(g.b)(),i=qr(e),r=i.fetchTokens,s=i.tokens,o=c.useState([]),l=Object(T.a)(o,2),d=l[0],u=l[1];c.useEffect((function(){var e=setTimeout((function(){d.includes(t)||(0===n.length&&(cn.session.getItem("wegldToastShown")||r([$])),u((function(e){return[].concat(Object(ke.a)(e),[t])})))}),2e3);return function(){return clearTimeout(e)}}),[t,n]),c.useEffect((function(){if(s){var e=s.find((function(e){return e.identifier===$}));if(e){var t=ot(.05.toString(),e.decimals);if(new je.a(e.balance).isGreaterThanOrEqualTo(t)){var n="unwrapEgld",i={type:Ax.UnwrapWEGLD,props:{wegld:e,toastId:n}},r={id:n,title:"You have wrapped EGLD",iconClassName:"bg-primary",icon:Wx.faInfo,expires:!1,descriptionProps:i};a(fi(r)),cn.session.setItem({key:"wegldToastShown",data:!0,expires:he()().add(1,"day").unix()})}}}}),[s])}("VerifyTempFunds"),null},Hx=function(){return Object(O.p)().isLoggedIn?Object(pt.jsx)(zx,{}):null},Yx=function(){var e=Object(g.c)($x),t=o.a.useState(!1),n=Object(T.a)(t,2),a=n[0],i=n[1];o.a.useEffect((function(){}),[e]);var r;return Object(pt.jsx)(pt.Fragment,{children:a&&Object(pt.jsx)(Pc.a,{show:a,backdrop:!0,onHide:(r=!1,function(){i(r)}),className:"modal-container",animation:!1,centered:!0,children:Object(pt.jsx)("div",{className:"card w-100 tx-sent-modal",children:Object(pt.jsx)(Up,{icon:mp.faCheck,iconClass:"text-primary",iconBgClass:"p-4 rounded-bg-circle",iconSize:"4x",title:e.submittedMessage,description:"Please allow a few moments for the transactions to be processed",action:Object(pt.jsx)("button",{className:"btn btn-primary",onClick:function(){i(!1)},children:"Done"})})})})})},Gx={id:"new-version",title:"New version available",icon:N.i,iconClassName:"bg-warning",expires:!1};function Zx(){var e=Object(g.b)(),t="https://maiar.exchange"===window.location.origin,n="53a081f0";c.useEffect((function(){var a=setInterval((function(){t&&!document.hidden&&Qi.a.create().get("https://s3.amazonaws.com/maiar.exchange/version.json?".concat(Date.now()),{timeout:B}).then((function(t){var a=t.data;if(a&&n!==a){var i={type:Ax.NewVersion,props:{latestVersion:a}};e(fi(Object(m.a)(Object(m.a)({},Gx),{},{descriptionProps:i})))}})).catch((function(){console.error("Unable to get version")}))}),6e4);return function(){clearInterval(a)}}),[t,n])}var Kx,Xx,Qx=function(e){var t=e.children;yr(),_h(),Pr(),qp(),Cp(),Zx(),Ip(),Er();var n=dr().fetchTokenDetails;o.a.useEffect((function(){n([_,$,"USDC-c76f1f"])}),[]);var a=Dh(),i=Object(O.p)().isLoggedIn,r=Object(g.c)(Nt),s=Ep(),c=s.BgPage,l=s.hideBgPage,d=!a&&r.pathname===Nh.home,u=r.pathname.replaceAll("/","");return Object(pt.jsxs)("div",{className:"layout flex-fill ".concat(d?"home":"".concat(u,"-page")),children:[Object(pt.jsx)(Tp,{}),Object(pt.jsx)(Bx,{}),Object(pt.jsx)("div",{className:"container d-flex flex-column flex-grow-1",children:Object(pt.jsx)("main",{className:"main-content row d-flex flex-column ".concat(d?"justify-content-center":""),children:Object(pt.jsx)(pt.Fragment,{children:a?Object(pt.jsx)(pt.Fragment,{children:"testnet"===te.id?Object(pt.jsx)("div",{className:"d-flex flex-fill align-items-center justify-content-center app-paused",children:Object(pt.jsx)(Up,{icon:Fp.faTractor,iconClass:"text-primary",iconBgClass:"p-4 rounded-bg-circle big",iconSize:"5x",title:"Battle of Yields: xHarvest",description:Object(pt.jsx)("div",{className:"d-flex flex-column",children:Object(pt.jsx)("div",{className:"mb-2",children:"Data analysis in progress"})})})}):Object(pt.jsx)("div",{className:"d-flex flex-fill align-items-center justify-content-center app-paused",children:Object(pt.jsx)(Up,{icon:hh.faExclamationTriangle,iconClass:"text-primary",iconBgClass:"p-4 rounded-bg-circle big",iconSize:"5x",title:"The Maiar DEX is under scheduled maintenance.",description:Object(pt.jsxs)("div",{className:"d-flex flex-column",children:[Object(pt.jsx)("div",{className:"mb-2",children:"Funds are safe. Rewards will continue."}),Object(pt.jsx)("div",{className:"text-secondary",children:"PS: Operations will resume shortly."})]})})})}):Object(pt.jsxs)(pt.Fragment,{children:[!l&&Object(pt.jsx)(pt.Fragment,{children:c}),t,Object(pt.jsx)($v,{}),i&&Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(Bp,{}),Object(pt.jsx)(Hx,{}),Object(pt.jsx)(jO,{}),Object(pt.jsx)(Yx,{}),Object(pt.jsx)(Vx,{})]})]})})})}),Object(pt.jsx)(Rp,{})]})},Jx=["title","titleId"];function ev(){return ev=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ev.apply(this,arguments)}function tv(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function nv(e,t){var n=e.title,a=e.titleId,i=tv(e,Jx);return c.createElement("svg",ev({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:131.114,height:44.981,viewBox:"0 0 131.114 44.981",ref:t,"aria-labelledby":a},i),n?c.createElement("title",{id:a},n):null,Kx||(Kx=c.createElement("defs",null,c.createElement("linearGradient",{id:"linear-gradient-logo",x1:.5,x2:.5,y2:1,gradientUnits:"objectBoundingBox",className:"primary-highlight"},c.createElement("stop",{offset:0,stopColor:"currentColor"}),c.createElement("stop",{offset:1,stopColor:"currentColor"})))),Xx||(Xx=c.createElement("g",{id:"Group_1331","data-name":"Group 1331",transform:"translate(-47.168 -21.519)"},c.createElement("g",{id:"Group_419","data-name":"Group 419",transform:"translate(-208.583 -346.787)"},c.createElement("path",{id:"Path_126","data-name":"Path 126",d:"M454.338,426.547v9.92h-2.562v-9.92a4.347,4.347,0,0,0-4.527-4.654,4.453,4.453,0,0,0-4.557,4.749v9.825h-2.565v-9.825a4.544,4.544,0,1,0-9.081,0v9.825h-2.565V419.745h2.461l.021,1.567a6.2,6.2,0,0,1,4.639-1.886,6.352,6.352,0,0,1,5.847,3.175,6.65,6.65,0,0,1,5.8-3.175A6.8,6.8,0,0,1,454.338,426.547Z",transform:"translate(-131.579 -34.004)",fill:"currentColor"}),c.createElement("path",{id:"Path_127","data-name":"Path 127",d:"M539.16,420.028v2.337a7.782,7.782,0,0,0-5.926-2.529,8.585,8.585,0,0,0,0,17.168,7.769,7.769,0,0,0,5.926-2.594v2.34h2.562V420.028Zm-5.926,14.447A6.069,6.069,0,1,1,539.3,428.4,5.813,5.813,0,0,1,533.234,434.475Z",transform:"translate(-198.28 -34.288)",fill:"currentColor"}),c.createElement("rect",{id:"Rectangle_75","data-name":"Rectangle 75",width:2.562,height:16.787,transform:"translate(347.851 385.549)",fill:"currentColor"}),c.createElement("path",{id:"Path_128","data-name":"Path 128",d:"M596.448,401.065a1.759,1.759,0,1,1-1.759-1.744A1.7,1.7,0,0,1,596.448,401.065Z",transform:"translate(-245.524 -20.073)",fill:"currentColor"}),c.createElement("path",{id:"Path_129","data-name":"Path 129",d:"M629.421,420.028v2.337a7.791,7.791,0,0,0-5.926-2.529,8.584,8.584,0,0,0,0,17.168,7.768,7.768,0,0,0,5.926-2.594v2.34h2.562V420.028Zm-5.926,14.447a6.069,6.069,0,1,1,6.059-6.071A5.811,5.811,0,0,1,623.495,434.475Z",transform:"translate(-260.819 -34.288)",fill:"currentColor"}),c.createElement("path",{id:"Path_130","data-name":"Path 130",d:"M695.934,420.926l-1.186,2.157-.449-.277a4.546,4.546,0,0,0-2.411-.655A4.7,4.7,0,0,0,687.2,426.9v9.666h-2.565V419.842H687.1l.038,1.718a6.381,6.381,0,0,1,4.752-1.877c.044,0,.1,0,.162,0a6.63,6.63,0,0,1,3.471,1Z",transform:"translate(-309.069 -34.18)",fill:"currentColor"})),c.createElement("g",{id:"Group_1321","data-name":"Group 1321",transform:"translate(-247.872 -130.693)"},c.createElement("path",{id:"Path_1838","data-name":"Path 1838",d:"M355.676,152.213l-3.832,17.8h-9.661Z",transform:"translate(-40.089 0)",fillRule:"evenodd",fill:"url(#linear-gradient-logo)"}),c.createElement("path",{id:"Path_1839","data-name":"Path 1839",d:"M326.45,271.184l-7.053,9.379H295.04l7.054-9.379Z",transform:"translate(0 -101.17)",fillRule:"evenodd",fill:"url(#linear-gradient-logo)"}),c.createElement("path",{id:"Path_1840","data-name":"Path 1840",d:"M381.139,333.864l-13.493,17.8,3.832-17.8Z",transform:"translate(-61.742 -154.472)",fillRule:"evenodd",fill:"url(#linear-gradient-logo)"})))))}var av,iv,rv=c.forwardRef(nv),sv=(n.p,["title","titleId"]);function cv(){return cv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cv.apply(this,arguments)}function ov(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lv(e,t){var n=e.title,a=e.titleId,i=ov(e,sv);return c.createElement("svg",cv({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:31.114,height:44.981,viewBox:"0 0 31.114 44.981",ref:t,"aria-labelledby":a},i),n?c.createElement("title",{id:a},n):null,av||(av=c.createElement("defs",null,c.createElement("linearGradient",{id:"linear-gradient-symbol",x1:.5,x2:.5,y2:1,gradientUnits:"objectBoundingBox",className:"primary-highlight"},c.createElement("stop",{offset:0,stopColor:"currentColor"}),c.createElement("stop",{offset:1,stopColor:"currentColor"})))),iv||(iv=c.createElement("g",{id:"Group_1331","data-name":"Group 1331",transform:"translate(-47.168 -21.519)"},c.createElement("g",{id:"Group_1321","data-name":"Group 1321",transform:"translate(-247.872 -130.693)"},c.createElement("path",{id:"Path_1838","data-name":"Path 1838",d:"M355.676,152.213l-3.832,17.8h-9.661Z",transform:"translate(-40.089 0)",fillRule:"evenodd",fill:"url(#linear-gradient-symbol)"}),c.createElement("path",{id:"Path_1839","data-name":"Path 1839",d:"M326.45,271.184l-7.053,9.379H295.04l7.054-9.379Z",transform:"translate(0 -101.17)",fillRule:"evenodd",fill:"url(#linear-gradient-symbol)"}),c.createElement("path",{id:"Path_1840","data-name":"Path 1840",d:"M381.139,333.864l-13.493,17.8,3.832-17.8Z",transform:"translate(-61.742 -154.472)",fillRule:"evenodd",fill:"url(#linear-gradient-symbol)"})))))}var dv,uv=c.forwardRef(lv),mv=(n.p,function(e){var t=e.hideTextMobile,n=void 0!==t&&t;return Object(pt.jsxs)(w.b,{className:"d-flex align-items-center navbar-brand mr-0",to:Nh.home,children:[Object(pt.jsx)(rv,{className:"main-logo flex-shrink-0 d-none d-xl-block"}),Object(pt.jsx)(uv,{className:"main-symbol flex-shrink-0 d-xl-none"}),Object(pt.jsx)("span",{className:"text-secondary text-truncate ".concat(n?"d-none d-sm-block":""),children:"exchange"})]})}),bv=n(1152),jv=function(){return Object(pt.jsx)(F.a,{icon:N.j,size:"sm",className:"ml-2"})},fv=function(e){return Object(pt.jsx)(mc.a,Object(m.a)(Object(m.a)({id:"button-tooltip"},e),{},{children:"Coming Soon"}))},hv=function(e){var t=e.active,n=o.a.useState(!1),a=Object(T.a)(n,2),i=a[0],r=a[1];return Object(pt.jsx)(Ds.a,{show:i,trigger:["click","focus"],placement:"bottom",onToggle:function(e){return r(e)},rootClose:!0,overlay:Object(pt.jsx)(Rs.a,{id:"links-popover",className:"basic-popover",children:Object(pt.jsx)(Rs.a.Content,{children:Object(pt.jsx)("div",{className:"card overflow-hidden",onClick:function(){return r(!i)},children:Object(pt.jsxs)("div",{className:"card-body px-0 py-2",children:[Object(pt.jsx)(w.b,{className:"dropdown-item d-sm-none ".concat("metabonding"===t?"active":""),"data-testid":"mobileMetabondingLink",to:Nh.metabonding,children:"Metabonding"}),Object(pt.jsx)(w.b,{className:"dropdown-item ".concat("analytics"===t?"active":""),"data-testid":"analyticsLink",to:Nh.analytics,children:"Analytics"}),Object(pt.jsxs)(bv.a.Item,{href:"/mex-economics-v2.pdf",rel:"noopener noreferrer nofollow",target:"_blank",children:["MEX Economics",Object(pt.jsx)(jv,{})]}),Object(pt.jsx)("div",{className:"separator"}),Object(pt.jsxs)(bv.a.Item,{href:"https://bridge.elrond.com/",rel:"noopener noreferrer nofollow",target:"_blank",children:["Bridge",Object(pt.jsx)(jv,{})]}),Object(pt.jsx)(Ds.a,{placement:"bottom",delay:{show:0,hide:200},overlay:fv,children:Object(pt.jsx)(bv.a.Item,{children:"Governance"})}),Object(pt.jsxs)(bv.a.Item,{href:"https://docs.maiar.exchange",rel:"noopener noreferrer nofollow",target:"_blank",children:["Documentation",Object(pt.jsx)(jv,{})]}),Object(pt.jsxs)(bv.a.Item,{href:"https://elrond.com/blog/maiar-exchange-mex-tokenomics",rel:"noopener noreferrer nofollow",target:"_blank",children:["Blog",Object(pt.jsx)(jv,{})]}),Object(pt.jsxs)(bv.a.Item,{href:"https://docs.maiar.exchange/faq",rel:"noopener noreferrer nofollow",target:"_blank",children:["FAQ",Object(pt.jsx)(jv,{})]}),Object(pt.jsx)(bv.a.Item,{href:"/terms",className:"terms"===t?"active":"",children:"Terms"}),Object(pt.jsx)(bv.a.Item,{href:"/disclaimer",className:"disclaimer"===t?"active":"",children:"Disclaimer"})]})})})}),children:Object(pt.jsx)("div",{className:"nav-link cursor-pointer","aria-label":"More",children:Object(pt.jsx)(F.a,{icon:N.h,size:"lg"})})})},pv=function(){var e=Object(O.p)().isLoggedIn,t=$h(),n=Object(g.c)(Nt),a="";switch(!0){case n.pathname===Nh.swap:case n.pathname===Nh.swapActivePools:a="swap";break;case n.pathname===Nh.liquidity:case n.pathname===Nh.liquidityActivePools:case n.pathname===Nh.liquidityAdd:case n.pathname===Nh.liquidityCreatePool:a="liquidity";break;case n.pathname===Nh.farms:a="farms";break;case n.pathname===Nh.metastaking:a="metastaking";break;case n.pathname===Nh.metabonding:case n.pathname===Nh.metabondingSnapshots:case n.pathname==="".concat(Nh.metabonding,"/"):a="metabonding";break;case n.pathname===Nh.launch:case n.pathname==="".concat(Nh.launch,"/"):a="launch";break;case n.pathname===Nh.home:a="home";break;case n.pathname===Nh.analytics:case n.pathname===Nh.analyticsPools:case t(Nh.analyticsPoolDetails):case n.pathname===Nh.analyticsTokens:case t(Nh.analyticsTokensDetails):a="analytics";break;case n.pathname===Nh.terms:a="terms";break;case n.pathname===Nh.disclaimer:a="disclaimer"}return Object(pt.jsxs)("ul",{className:"page-nav-pills nav nav-pills flex-nowrap",children:[Object(pt.jsx)("li",{className:"nav-item",children:Object(pt.jsx)(w.b,{"data-testid":"swapLink",className:"nav-link ".concat("swap"===a?"active":""),to:Nh.swap,children:"Swap"})}),Object(pt.jsx)("li",{className:"nav-item",children:Object(pt.jsx)(w.b,{"data-testid":"liquidityLink",className:"nav-link ".concat("liquidity"===a?"active":""),to:e?Nh.liquidity:Nh.liquidityActivePools,children:"Liquidity"})}),Object(pt.jsx)("li",{className:"nav-item",children:Object(pt.jsx)(w.b,{"data-testid":"farmLink",className:"nav-link ".concat("farms"===a?"active":""),to:Nh.farms,children:"Farms"})}),Object(pt.jsx)("li",{className:"nav-item",children:Object(pt.jsx)(w.b,{"data-testid":"stakingLink",className:"nav-link ".concat("metastaking"===a?"active":""),to:Nh.metastaking,children:"Metastaking"})}),Object(pt.jsx)("li",{className:"nav-item d-none d-sm-flex",children:Object(pt.jsx)(w.b,{"data-testid":"metabondingLink",className:"nav-link ".concat("metabonding"===a?"active":""),to:Nh.metabonding,children:"Metabonding"})}),Object(pt.jsx)("li",{className:"nav-item",children:Object(pt.jsx)(w.b,{"data-testid":"launchLink",className:"nav-link ".concat("launch"===a?"active":""),to:Nh.launch,children:"Launch"})}),Object(pt.jsx)("li",{className:"nav-item",children:Object(pt.jsx)(hv,{active:a})})]})},xv=function(){var e=Object(y.h)().pathname;return Object(pt.jsx)(Up,{icon:ac.g,title:"Page not found",containerClass:"page-not-found",description:Object(pt.jsx)("div",{className:"px-spacer",children:Object(pt.jsx)("span",{className:"text-break-all",children:e})})})},vv=function(e){var t=e.pair,n=e.size,a=[ae,ie].includes("".concat(null===t||void 0===t?void 0:t.address));return t?Object(pt.jsxs)("div",{className:"pool-icon icon-".concat(n),children:[Object(pt.jsx)(Xh,{token:a?t.secondToken.identifier:t.firstToken.identifier}),Object(pt.jsx)(Xh,{token:a?t.firstToken.identifier:t.secondToken.identifier})]}):null},Ov=function(e){var t=e.pair,n=[ae,ie].includes("".concat(null===t||void 0===t?void 0:t.address));return t?Object(pt.jsxs)("div",{"data-testid":"poolName",className:"text-nowrap",children:[Object(pt.jsx)(Rt,{token:n?t.secondToken.identifier:t.firstToken.identifier}),"-",Object(pt.jsx)(Rt,{token:n?t.firstToken.identifier:t.secondToken.identifier})]}):null},kv=function(e){var t=e.color,n=e["data-testid"];return Object(pt.jsx)("span",{className:"dot ".concat(t),"data-testid":n})},gv=function(e){for(var t=e.totalSteps,n=e.currentStep,a=e.className,i=[],r=1;r<=t;r+=1)i.push(Object(pt.jsx)(kv,{"data-testid":"step".concat(r).concat(n===r?"active":""),color:n===r||r<n?"bg-primary":"bg-secondary"},r));return Object(pt.jsx)("div",{className:"progress-steps d-flex justify-content-center ".concat(a),children:Object(pt.jsxs)("div",{className:"steps d-flex justify-content-center align-items-center position-relative",children:[Object(pt.jsx)("hr",{className:"position-absolute w-100 m-0"}),i]})})},yv=n(679),wv=function(){var e,t=null!==(e=cn.session.getItem("tabId"))&&void 0!==e?e:window.name,n=cn.local.getItem("activeTabId");return!n||t===n},Tv=[Nh.swap,Nh.swapActivePools,Nh.liquidity,Nh.liquidityActivePools,Nh.liquidityAdd,Nh.farms,Nh.metastaking,Nh.metabonding,Nh.metabondingSnapshots],Nv=function(e){var t=e.children,n=Object(g.c)(Nt),a=c.useState(),i=Object(T.a)(a,2),r=i[0],s=i[1],o=function(e){Tv.includes(n.pathname)&&"activeTabChangeEvent"===e.key&&s(wv())},l=function(){Tv.includes(n.pathname)&&s(wv())};return c.useEffect((function(){var e,t=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}();return window.name=t,e=t,cn.session.setItem({key:"tabId",data:e,expires:he()().add(1,"day").unix()}),s(!0),Tv.includes(n.pathname)&&(!function(e){cn.local.setItem({key:"activeTabId",data:e,expires:he()().add(1,"day").unix()})}(t),cn.local.setItem({key:"activeTabChangeEvent",data:void 0,expires:0}),cn.local.removeItem("activeTabChangeEvent")),document.addEventListener("visibilitychange",l),window.addEventListener("storage",o),function(){document.removeEventListener("visibilitychange",l),window.removeEventListener("storage",o)}}),[n]),Object(pt.jsxs)(pt.Fragment,{children:[void 0===r&&null,!1===r&&Object(pt.jsx)("div",{className:"d-flex align-items-center justify-content-center app-paused",style:{height:"100vh"},children:Object(pt.jsx)(Up,{icon:yv.faSnooze,iconClass:"text-primary",iconBgClass:"p-4 rounded-bg-circle big",iconSize:"5x",title:"Application paused",description:"Maiar Exchange can be active only in one tab at a time.",action:Object(pt.jsx)("button",{className:"btn btn-primary",onClick:function(){location.reload()},children:"Make Active"})})}),r&&Object(pt.jsx)(pt.Fragment,{children:t})]})},Sv=function(){return Object(pt.jsx)(wo,{info:Object(pt.jsxs)("ul",{className:"mb-0 pl-3 text-left",children:[Object(pt.jsx)("li",{children:"Wrapped EGLD (WEGLD) is used for swaps & adding liquidity."}),Object(pt.jsx)("li",{children:"Value: 1 WEGLD = 1 EGLD"}),Object(pt.jsx)("li",{children:"If you choose to skip unwrap WEGLD, you can reduce gas costs & transaction times."}),Object(pt.jsx)("li",{children:"You can't pay fees with WEGLD."}),Object(pt.jsx)("li",{children:"You can unwrap WEGLD (WEGLD -> EGLD) at any time from the Account Details menu."})]})})},Av=function(e){switch(e){case"twitter":return $b.l;case"instagram":return $b.f;case"linkedin":return $b.g;case"youtube":return $b.m;case"facebook":return $b.b;case"telegram-plane":return $b.k;case"telegram":return $b.j;case"blog":case"medium-m":return $b.i;case"medium":return $b.h;case"discord":return $b.a;case"github":return $b.d;case"github-square":return $b.e;case"bullhorn":return N.c;case"earth":return N.l;case"whitepaper":return N.k;default:return ac.d}},Fv=function(e){var t=e.icons;return Object(pt.jsx)("div",{className:"social-icons d-flex flex-wrap mx-auto justify-content-center",children:t.map((function(e,t){return Object(pt.jsx)("a",{target:"_blank",className:"social-icon d-flex align-items-center justify-content-center mx-1 my-2",href:e.link,"aria-label":e.title,rel:"noreferrer nofollow",children:Object(pt.jsx)(F.a,{icon:Av(e.icon)})},"social-icon-".concat(t))}))})},Pv=function(e){var t=e.wegld,n=e.toastId,a=Object(y.h)().pathname,i=Object(g.b)(),r=o.a.useState(),s=Object(T.a)(r,2),c=s[0],l=s[1],d=Vp({callbackRoute:a}),u=d.unwrapEgld,m=d.unwrapEgldLoading;return o.a.useEffect((function(){c&&!m&&(i(pi(c)),l(void 0))}),[m]),Object(pt.jsxs)("small",{children:[Object(pt.jsxs)("div",{className:"d-flex align-items-center my-1",children:[Object(pt.jsx)(ep,{token:t.identifier,amount:t.balance,decimals:t.decimals}),Object(pt.jsx)(wo,{info:Object(pt.jsxs)("ul",{className:"mb-0 pl-3 text-left",children:[Object(pt.jsx)("li",{children:"Now you can use your WEGLD directly on Swap and Add Liquidity page."}),Object(pt.jsx)("li",{children:"You can unwrap your WEGLD at any time in Account details."})]})})]}),Object(pt.jsxs)("div",{className:"d-flex mt-2 mb-1",children:[Object(pt.jsx)("button",{className:"btn-sm btn btn-primary mr-2",onClick:function(){m||function(e){var t=e.token,n=e.id;l(n),u({variables:{amount:t.balance}})}({token:t,id:n})},disabled:m,children:m?Object(pt.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:["\xa0",Object(pt.jsx)(ll,{show:!0,color:"text-white"}),"\xa0"]}):Object(pt.jsx)(pt.Fragment,{children:"Unwrap"})}),Object(pt.jsx)("button",{className:"btn btn-sm btn-dark",disabled:m,onClick:function(){i(pi(n))},children:"Close"})]})]})},Dv=function(){return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("div",{className:"my-1",children:"A new version of Maiar Exchange is available."}),Object(pt.jsx)("button",{className:"btn-sm btn btn-primary my-1",onClick:function(){window.location.reload()},children:"Refresh"})]})},Rv=n(322),Ev=n(680),Lv=n(1155),Cv=function(e){var t=e.icon,n=e.className,a=void 0===n?"":n,i=e.iconSize,r=void 0===i?"3x":i;return Object(pt.jsx)("span",{className:"icon-state mx-auto ".concat(a," ").concat("2x"===r?"half":""),children:Object(pt.jsx)(F.a,{icon:t,size:r,className:a?"".concat(a," text-white"):"text-primary"})})},Iv=function(e){var t=e.toast,n=t.id,a=t.icon,i=t.title,r=t.expires,s=t.onClick,o=t.isUpdate,l=t.timestamp,d=t.description,u=t.iconClassName,b=t.hasCloseButton,j=void 0===b||b,f=Object(g.b)(),h=Object(c.useRef)(null),p=Object(c.useState)(o),x=Object(T.a)(p,2),v=x[0],O=x[1],k={toastWrapper:Object(Ev.a)({"toast-visible":v,clickable:null!=s})},y=r?parseInt(String(r)):0,w=Object(m.a)(Object(m.a)({},r?{autohide:!0}:{}),r?{delay:y}:{}),N=function(){h.current&&(O(!1),setTimeout((function(){f(pi(n))}),300))};return Object(c.useEffect)((function(){!function(){if(h.current&&!o){var e=setTimeout((function(){O(!0)}),300)}}()}),[o]),Object(c.createElement)(Lv.a,Object(m.a)(Object(m.a)({},w),{},{ref:h,key:l,onClick:s,onClose:N,className:k.toastWrapper}),Object(pt.jsxs)("div",{className:"w-100 media p-2",children:[Object(pt.jsx)("div",{className:"align-self-center ml-2 mr-2 pr-1",children:Object(pt.jsx)(Cv,{iconSize:"2x",icon:a,className:u})}),Object(pt.jsxs)("div",{className:"media-body flex-grow-1",style:{minWidth:0},children:[Object(pt.jsxs)("div",{className:"d-flex justify-content-between mb-1",children:[Object(pt.jsx)("h5",{className:"m-0 font-weight-normal text-nowrap text-truncate",children:i}),j&&Object(pt.jsx)("button",{type:"button",className:"close d-flex side-action align-items-center mx-2 outline-0",onClick:function(e){e.preventDefault(),e.stopPropagation(),N()},children:Object(pt.jsx)(F.a,{icon:Rv.faTimes,size:"xs"})})]}),Object(pt.jsx)("div",{className:"mb-0 text-break",children:d})]})]}))},qv=(dv={},Object(b.a)(dv,Ax.UnwrapWEGLD,Pv),Object(b.a)(dv,Ax.NewVersion,Dv),dv),Mv=function(e){var t=e.toast,n=Object(g.b)(),a=qv[t.descriptionProps.type],i=Object(m.a)(Object(m.a)({},t),{},{description:Object(pt.jsx)(a,Object(m.a)({removeToast:function(){return n(pi(t.id))}},t.descriptionProps.props))});return Object(pt.jsx)(Iv,{toast:i})},Bv=function(e){var t,n=e.toast,a=Object(g.b)(),i=n.title,r=n.icon,s=n.progress,o=null===n||void 0===n||null===(t=n.descriptionProps)||void 0===t?void 0:t.props,l=o.transactions,d=o.batchId,u=O.b.TransactionToast,m={check:"success",hourglass:"pending",times:"fail"}[(null===r||void 0===r?void 0:r.iconName)||""],b=l.map((function(e){var t=e.hash,n=function(e){switch(!0){case e.isPending:return"pending";case e.isSuccessful:case e.isExecuted:return"success";default:return"fail"}}(e.status);return{hash:t,status:n}}));return Object(c.useEffect)((function(){"success"===m&&setTimeout((function(){a(pi(n.id))}),3e4)}),[n]),Object(pt.jsx)(u,{title:i,status:m,toastId:d,transactions:b,endTimeProgress:null===s||void 0===s?void 0:s.endTime,startTimeProgress:null===s||void 0===s?void 0:s.startTime})};function Uv(e){var t;switch(null===(t=e.descriptionProps)||void 0===t?void 0:t.type){case Ax.FarmRewards:case Ax.UnwrapWEGLD:case Ax.NewVersion:return Object(pt.jsx)(Mv,{toast:Object(m.a)(Object(m.a)({},e),{},{descriptionProps:e.descriptionProps})},e.id);case Ax.TransactionToast:return Object(pt.jsx)(Bv,{toast:e},e.id);default:return Object(pt.jsx)(Iv,{toast:e},e.id)}}var $v=function(){var e=Object(g.c)(nd);return Object(pt.jsx)("div",{className:"toast-messages d-flex flex-column align-items-center justify-content-sm-end",children:e.map(Uv)})},_v=n(681),Vv=n(682);var Wv=function(e){return new Promise((function(t){return setTimeout(t,e)}))},zv=function(e){var t=e.dropSessionsAfterTimestamp,n=e.batchId,a=parseInt(n.split("-")[0]);return Xv({timestamp:a,minutes:10})&&(!t||a<t)?a:t},Hv=function(){var e;return null!==(e=cn.session.getItem("toasts"))&&void 0!==e?e:[]},Yv=function(e){var t=e.transactions,n=e.hasUnrelatedTransactions,a=t&&Object.values(t).every((function(e){return(null===e||void 0===e?void 0:e.isInvalid)||(null===e||void 0===e?void 0:e.isFailed)})),i=t&&Object.values(t).some((function(e){return(null===e||void 0===e?void 0:e.isInvalid)||(null===e||void 0===e?void 0:e.isFailed)})),r=t&&Object.values(t).some((function(e){return null===e||void 0===e?void 0:e.isPending}));return{isPending:r,isSuccessful:t&&Object.values(t).every((function(e){return null===e||void 0===e?void 0:e.isSuccessful})),isFailed:n?a:i,isIncomplete:!r&&n&&i}};var Gv=["Farm stake added","Farm stake removed"],Zv=function(e){var t=e.successMessage,n=e.pendingFarmAddress,a=e.address;if(Gv.includes("".concat(t))&&void 0!==n){var i=he()().add(X,"minutes").unix();cn.local.setItem({key:"".concat(a,"-").concat(n),data:"action",expires:i})}},Kv=n(599),Xv=function(e){var t=e.timestamp,n=e.minutes,a=he()().diff(he()(t));return he.a.duration(a).asMinutes()>n},Qv=function(){var e=Object(g.b)();return function(t){cn.session.setItem({key:"toasts",data:t,expires:he()().add(15,"minutes").unix()}),e(xi(t))}},Jv=function(e){var t,n=e.batchId,a=e.toastSignSession,i=e.transactions,r=e.startTime,s=e.endTime,c=e.successMessage,l=e.errorMessage,d=e.processingMessage,u=e.pendingFarmAddress,m=e.hasUnrelatedTransactions,j=Object(g.c)(ad),f=Object(g.b)(),h=Mh().address,p=o.a.useState([]),x=Object(T.a)(p,2),v=x[0],k=x[1],y=Qv(),w=Ab().updateCreatePoolSteps,N=Yv({transactions:i,hasUnrelatedTransactions:m}),S=N.isSuccessful,A=N.isFailed,F=N.isIncomplete,P={type:Ax.TransactionToast,props:{transactions:Object.keys(i).map((function(e){return{hash:e,status:i[e]}})),batchId:n,toastSignSession:a,pending:!S&&!A}},D={startTime:r,endTime:s},R={id:a,title:null!==c&&void 0!==c?c:"Request was successful",descriptionProps:P,iconClassName:"bg-success",icon:_v.faCheck,expires:3e4,hasCloseButton:!0},E={id:a,title:d,descriptionProps:P,iconClassName:"bg-warning",icon:Vv.faHourglass,expires:!1,hasCloseButton:!1,progress:D},L={id:a,title:null!==l&&void 0!==l?l:"Something went wrong",descriptionProps:P,iconClassName:"bg-danger",icon:Rv.faTimes,hasCloseButton:!0},C={id:a,title:"Something went wrong",descriptionProps:P,iconClassName:"bg-warning",icon:Rl.faExclamationTriangle,expires:!1,hasCloseButton:!0},I=Ph((t={},Object(b.a)(t,"".concat(S),R),Object(b.a)(t,"".concat(A),L),Object(b.a)(t,"".concat(F),C),Object(b.a)(t,"default",E),t));o.a.useEffect((function(){null==i||j.includes(a)||(f(fi(I)),f(vi(a)))}),[a,i,j]),o.a.useEffect((function(){i&&Object.values(i).some((function(e){return e.isPending}))&&f(hi({id:a,descriptionProps:P,hasCloseButton:!1}))}),[i]);o.a.useEffect((function(){switch(!0){case F:case S:f(hi(I)),q(),w(d),v.includes(a)||(f(Oi()),k((function(e){return[].concat(Object(ke.a)(e),[a])}))),S&&Zv({successMessage:c,pendingFarmAddress:u,address:h});break;case A:f(hi(I)),Object(O.f)(h).then((function(e){Object(O.l)(e.nonce.valueOf())})).catch((function(){console.log("Unable to get account")})),q(),v.includes(a)||(f(Oi()),k((function(e){return[].concat(Object(ke.a)(e),[a])})))}}),[i,v,h]);var q=function(){var e=Hv().filter((function(e){return e.toastSignSession!==a}));y(e)};return null},eO=n(112);function tO(e){return{isPending:e.isPending(),isSuccessful:e.isSuccessful(),isFailed:e.isFailed(),isExecuted:e.isExecuted(),isInvalid:e.isInvalid()}}var nO,aO=["Input first token desired amount is lower than minimul","Input second token desired amount is lower than minimul","Computed amount out lesser than minimum amount out","Computed amount in greater than maximum amount in","Insufficient second token computed amount","Insufficient first token computed amount","Optimal amount greater than desired amount","error signalled by smartcontract"],iO=["Insufficient reserve for token out","Insufficient amount out reserve"],rO=function(e){switch(!0){case aO.includes(e):return"Slippage exceeded";case iO.includes(e):return"Not enough funds in pool";default:return}},sO=function(e){var t=e.children,n=Mh().address,a=or(),i=a.getTransactionsWithScResults,r=a.getBatchInfo,s=Qv(),o=c.useState(!1),l=Object(T.a)(o,2),d=l[0],u=l[1],m=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,a,s,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Hv(),n=[],s=Object(Yt.a)(t),e.prev=3,o=h.a.mark((function e(){var t,s,o,l,d,u,m,b,j,f,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.value,s=Object.keys(t.transactions),o=[],l=!1,e.next=6,r(t.toastSignSession);case 6:if(d=e.sent,u=d.data,!(m=d.success)){e.next=14;break}o=u.transactions,l=m,e.next=21;break;case 14:return e.next=16,i(s.join(","));case 16:b=e.sent,j=b.data,f=b.success,o=j,l=f;case 21:l&&(p=Object(ge.cloneDeep)(t),s.forEach((function(e){var t=o.find((function(t){var n=t.txHash,a=t.hash;return n===e||a===e}));if(t){var n,i=null!==(n=t.hash)&&void 0!==n?n:t.txHash,r=new le.TransactionStatus(t.status);if(r.isSuccessful()?(Object(Kv.a)(t.results)||(r=new le.TransactionStatus(eO.a.fail)),p.transactions[i]=tO(r)):p.transactions[i]=tO(r),r.isFailed()){var s,c,l=(null!==(s=null===t||void 0===t?void 0:t.results)&&void 0!==s?s:[]).find((function(e){return e.returnMessage}));p.errorMessage=rO(null!==(c=null===l||void 0===l?void 0:l.returnMessage)&&void 0!==c?c:"")}}else a=zv({dropSessionsAfterTimestamp:a,batchId:p.toastSignSession})})),n.push(p));case 22:case"end":return e.stop()}}),e)})),s.s();case 6:if((c=s.n()).done){e.next=10;break}return e.delegateYield(o(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),s.e(e.t1);case 15:return e.prev=15,s.f(),e.finish(15);case 18:return void 0!==a&&n.forEach((function(e){if(a&&parseInt(e.toastSignSession)>=a){e.errorMessage="Transactions timed out";for(var t=0,n=Object.keys(e.transactions);t<n.length;t++){var i=n[t];e.transactions[i].isPending&&(e.transactions[i]=tO(new le.TransactionStatus(eO.a.fail)))}}})),e.abrupt("return",n.filter((function(e){return void 0!==e})));case 20:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return c.useEffect((function(){n&&!d&&m().then((function(e){s(e),u(!0)}))}),[n,d]),d?Object(pt.jsx)(pt.Fragment,{children:t}):null},cO=n(290),oO=n.n(cO),lO=function(e){return e.signTransactions},dO=(Se(lO,(function(e){return e.signStatus})),Se(lO,(function(e){return e.transactionsToSign}))),uO=n(683),mO=function(e){var t=e.sending,n=Mh().address,a=or().getTransactionsWithScResults,i=Qv(),r=Object(g.c)(id),s=Object(g.c)(Le),c=o.a.useRef(null),l=o.a.useRef(null),d=o.a.useState([]),u=Object(T.a)(d,2),m=u[0],b=u[1],f=o.a.useState(!1),p=Object(T.a)(f,2),x=p[0],v=p[1],O=function(e){var t=e.activeToast,n=e.batchId,a=Hv().map((function(e){return e.toastSignSession===n&&t?t:e}));i(a)},k=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,r,s,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Hv(),r=[],s=0,c=Object.values(n);case 3:if(!(s<c.length)){e.next=11;break}if(o=c[s],!(parseInt(o.toastSignSession)>=t)){e.next=8;break}return e.delegateYield(h.a.mark((function e(){var t,n,i,s,c,l,d,u,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(ge.cloneDeep)(o),n=Object.keys(t.transactions),e.next=4,a(n.join(","));case 4:if(i=e.sent,s=i.data,c=i.success,l=s,c&&n.length===l.length)l.forEach((function(e){w(e,t)}));else for(t.errorMessage="Transactions timed out",d=0,u=Object.keys(t.transactions);d<u.length;d++)m=u[d],t.transactions[m].isPending&&(t.transactions[m]=tO(new le.TransactionStatus(eO.a.fail)));r.push(t);case 10:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:s++,e.next=3;break;case 11:r.length>0&&i(r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,i,r,s,c,o,l,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=3e3,i=4;case 2:if(!(void 0===r&&i>0)){e.next=19;break}return e.prev=3,e.next=6,Wv(n);case 6:return e.next=8,a(t.join(","));case 8:s=e.sent,c=s.data,s.success?(l=(o=c).length===t.length,d=o.some((function(e){return new le.TransactionStatus(e.status).isPending()})),l&&!d||1===i?(r=o,i=0):i-=1):i-=1,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),i-=1;case 17:e.next=2;break;case 19:return e.abrupt("return",{data:r,success:!0});case 20:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),w=function(e,t){var n=new le.TransactionStatus(e.status);if(n.isSuccessful()&&!Object(Kv.a)(e.results)&&(n=new le.TransactionStatus(eO.a.fail)),t.transactions[e.txHash]=tO(n),n.isFailed()){var a,i,r=(null!==(a=null===e||void 0===e?void 0:e.results)&&void 0!==a?a:[]).find((function(e){return e.returnMessage}));if(t.errorMessage=rO(null!==(i=null===r||void 0===r?void 0:r.returnMessage)&&void 0!==i?i:""),!t.sequential)return;for(var s in t.transactions)if(Object.prototype.hasOwnProperty.call(t.transactions,s)){var c=new le.TransactionStatus(eO.a.fail);t.transactions[s]=tO(c)}}},N=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a,i,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(!0),a=Object(Yt.a)(t),e.prev=2,r=h.a.mark((function e(){var t,a,r,s,c,o,l,d,u,m,j,f;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.value,a=t.timestamp,r=t.data,s=r.batchId,c=r.txHashes,o=Hv(),l=o.filter((function(e){var t=e.toastSignSession;return"".concat(t)===s})),d=Object(T.a)(l,1),u=d[0],m=Object(ge.cloneDeep)(u),b((function(e){return e.filter((function(e){return e.timestamp!==a}))})),!u){e.next=14;break}return e.next=10,y(c);case 10:j=e.sent,f=j.data,j.success&&f&&(c.forEach((function(e){var t=f.find((function(t){return t.txHash===e}));t?w(t,m):n=zv({dropSessionsAfterTimestamp:n,batchId:m.toastSignSession})})),O({activeToast:m,batchId:s}));case 14:case"end":return e.stop()}}),e)})),a.s();case 5:if((i=a.n()).done){e.next=9;break}return e.delegateYield(r(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),a.e(e.t1);case 14:return e.prev=14,a.f(),e.finish(14);case 17:void 0!==n&&k(n),v(!1);case 19:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(t){return e.apply(this,arguments)}}();return o.a.useEffect((function(){return r.length>0?l.current=setInterval((function(){x||t||function(){var e;r.forEach((function(t){var n=t.toastSignSession;e=zv({dropSessionsAfterTimestamp:e,batchId:n})})),e&&k(e)}()}),6e3):clearInterval(l.current),function(){clearInterval(l.current)}}),[r,x,t]),o.a.useEffect((function(){return m.length>0&&!x&&!1===t?c.current=setInterval((function(){N(m)}),500):clearInterval(c.current),function(){clearInterval(c.current)}}),[m,x,t]),o.a.useEffect((function(){var e,t=function(e){b((function(t){return[].concat(Object(ke.a)(t),[{timestamp:Date.now(),data:e}])}))};return s&&(e=Object(uO.io)(s,{transports:["websocket","polling"],query:{address:n}})).on("batchUpdated",t),function(){e&&(e.close(),e.off("batchUpdated",t))}}),[n,s]),null},bO=function(){var e=Object(g.b)(),t=Object(y.h)().search,n=Qv(),a=Object(c.useRef)(!1),i=Object(c.useState)(""),r=Object(T.a)(i,2),s=r[0],o=r[1],l=Uh(),d=Object(O.n)().account,u=Object(O.o)().providerType,f=or().sendTransactions,p=Object(O.r)().signedTransactions,x=Object(g.c)(dO),v=d.address,k=d.nonce,w=O.m.sendTransactions,N=O.m.removeSignedTransaction,S="wallet"===u,A=oO.a.parse(t.replace("?","")),F=(null===A||void 0===A?void 0:A.signSession)||"",P={expires:!1,id:"batch-failed",title:"Unable to send",icon:Rl.faExclamationTriangle,iconClassName:"bg-warning",description:"Failed sending transactions. Please refresh the page."},D=function(){var t=Object(j.a)(h.a.mark((function t(){var i,r,c,d,u,j,v,g,y,w,T,A,D,E,L,C,I,q,M,B,U,$,_,V,W,z,H,Y,G,Z,K,X,Q;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Hv(),d=p[c=F||s],u=null===d||void 0===d?void 0:d.transactions,j=cn.local.getItem("mexSessions"),v=cn.local.getItem("walletSessionId"),g=S?v:null===x||void 0===x?void 0:x.sessionId,y=null===j||void 0===j?void 0:j[g],g){t.next=11;break}return a.current=!1,t.abrupt("return");case 11:if(w=r.filter((function(e){return"".concat(e.toastSignSession)!==g})),!a.current&&Boolean(g)&&Boolean(y)&&Boolean(null===u||void 0===u?void 0:u.length)){t.next=16;break}return a.current=!1,t.abrupt("return");case 16:return a.current=!0,T=y.grouping,A=y.sequential,D=y.processingMessage,E=y.errorMessage,L=y.successMessage,C=y.submittedMessage,I=y.submittedMessageShown,q=y.pendingFarmAddress,M=y.pendingPoolAddress,B=y.pendingNftTransactions,U=y.pendingMetabondingTransactions,$=y.hasUnrelatedTransactions,_={id:g,transactions:null===T||void 0===T?void 0:T.map((function(e){return e.map((function(e){return u[e]}))}))},t.next=21,f(_);case 21:if(V=t.sent,W=null===V||void 0===V?void 0:V.success,z="invalid"!==(null===V||void 0===V||null===(i=V.data)||void 0===i?void 0:i.status),H=l(Object(Gm.c)(null===u||void 0===u?void 0:u.map((function(e){return t=e,new le.Transaction({value:le.Balance.fromString(t.value),data:new le.TransactionPayload(atob(t.data)),receiver:new le.Address(t.receiver),gasLimit:new le.GasLimit(t.gasLimit),gasPrice:new le.GasPrice(t.gasPrice),chainID:new le.ChainID(t.chainID),version:new le.TransactionVersion(t.version)});var t})))),W&&z){t.next=29;break}return console.error("Unable to send transactions"),e(fi(P)),t.abrupt("return");case 29:N(c),Object(O.l)(k+u.length),Y=V.data.transactions,G=null===Y||void 0===Y?void 0:Y.reduce((function(e,t){var n=tO(new le.TransactionStatus("pending"));return Object(m.a)(Object(m.a)({},e),{},Object(b.a)({},t.hash,n))}),{}),Z=T.length>1?90:54,K=he()().unix(),X=he()().add(H?12:Z,"seconds").unix(),Q=[].concat(Object(ke.a)(w),[{endTime:X,startTime:K,toastSignSession:g,submittedMessageShown:!0,transactions:G,batchId:c,sequential:A,errorMessage:E,successMessage:L,submittedMessage:C,processingMessage:D,pendingFarmAddress:q,pendingPoolAddress:M,pendingNftTransactions:B,pendingMetabondingTransactions:U,hasUnrelatedTransactions:$}]),Boolean(I)||e(Ra({sessionId:g,submittedMessage:C})),o(""),n(Q),R(g),e(Wa()),a.current=!1;case 43:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=function(e){var t=he()().add(10,"minutes").unix(),n=cn.local.getItem("mexSessions");Boolean(n[e])&&(delete n[e],cn.local.setItem({key:"mexSessions",data:n,expires:t}),S&&cn.local.setItem({data:"",key:"walletSessionId",expires:t}))},E=function(){var e=Object(j.a)(h.a.mark((function e(){var t,n,a,i,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(null===x||void 0===x?void 0:x.sessionId)||"",n=(null===x||void 0===x?void 0:x.transactions)||[],Boolean(t)&&Boolean(n.length)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,w({transactions:n,signWithoutSending:!0});case 7:if(a=e.sent,i=a.error,r=a.sessionId,!i&&r){e.next=13;break}return console.error(i),e.abrupt("return");case 13:o(r);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){E()}),[x]),Object(c.useEffect)((function(){D()}),[p,k,v]),Object(pt.jsx)(mO,{sending:a.current})},jO=function(){var e=Object(g.c)(id).map((function(e,t){var n=Object.values(e.transactions).map((function(e){return e.toString()})).join("");return Object(pt.jsx)(Jv,Object(m.a)({},e),e.toastSignSession+n+t)}));return Object(pt.jsxs)(pt.Fragment,{children:[e,Object(pt.jsx)(sO,{children:Object(pt.jsx)(bO,{})})]})},fO=function(e){var t=e.text,n=e.dataTestId,a=void 0===n?"":n,i=c.useState(0),r=Object(T.a)(i,2),s=r[0],o=r[1],l=c.useState(!1),d=Object(T.a)(l,2),u=d[0],m=d[1],b=c.useRef(document.createElement("span")),j=c.useRef(document.createElement("span")),f=Eh(s,100),h=function(){o(s+1)};return c.useEffect((function(){return window.addEventListener("resize",h),function(){window.removeEventListener("resize",h)}}),[s]),c.useEffect((function(){if(b.current&&j.current){var e=j.current.offsetWidth-b.current.offsetWidth;m(e>1)}}),[f]),Object(pt.jsxs)("span",{ref:b,className:"trim ".concat(u?"overflow":""),"data-testid":a,children:[Object(pt.jsx)("span",{ref:j,className:"hidden-text-ref",children:t}),u?Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)("span",{className:"left",children:Object(pt.jsx)("span",{children:String(t).substring(0,Math.floor(t.length/2))})}),Object(pt.jsx)("span",{className:"ellipsis",children:"..."}),Object(pt.jsx)("span",{className:"right",children:Object(pt.jsx)("span",{children:String(t).substring(Math.ceil(t.length/2))})})]}):Object(pt.jsx)("span",{children:t})]})},hO=["title","titleId"];function pO(){return pO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pO.apply(this,arguments)}function xO(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vO(e,t){var n=e.title,a=e.titleId,i=xO(e,hO);return c.createElement("svg",pO({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:31.114,height:44.981,viewBox:"0 0 31.114 44.981",ref:t,"aria-labelledby":a},i),n?c.createElement("title",{id:a},n):null,nO||(nO=c.createElement("g",{id:"Group_1331","data-name":"Group 1331",transform:"translate(-47.168 -21.519)"},c.createElement("g",{id:"Group_1321","data-name":"Group 1321",transform:"translate(-247.872 -130.693)"},c.createElement("path",{id:"Path_1838","data-name":"Path 1838",d:"M355.676,152.213l-3.832,17.8h-9.661Z",transform:"translate(-40.089 1)",fillRule:"evenodd",fill:"currentColor"}),c.createElement("path",{id:"Path_1839","data-name":"Path 1839",d:"M326.45,271.184l-7.053,9.379H295.04l7.054-9.379Z",transform:"translate(0 -101.17)",fillRule:"evenodd",fill:"currentColor"}),c.createElement("path",{id:"Path_1840","data-name":"Path 1840",d:"M381.139,333.864l-13.493,17.8,3.832-17.8Z",transform:"translate(-61.742 -155.472)",fillRule:"evenodd",fill:"currentColor"})))))}var OO=c.forwardRef(vO),kO=(n.p,function(e){var t=e["data-testid"],n=e.large,a=e.hideTextMobile,i=void 0!==a&&a,r="".concat(Nh.unlock,"?callbackUrl=").concat(window.location.href);return Object(pt.jsx)(w.b,{className:"unlock-btn btn btn-primary text-white ".concat(n?"btn-lg btn-block":"ml-2"),onClick:function(e){e.stopPropagation()},to:r,"data-testid":t,children:Object(pt.jsxs)("div",{className:"d-flex align-items-center justify-content-center h-100",children:[Object(pt.jsx)(OO,{className:"mx-1 mr-sm-2 ml-sm-0",style:n?{width:"1.3rem",height:"1.3rem"}:{width:"0.9rem",height:"0.9rem"}}),Object(pt.jsx)("span",{className:i?"d-none d-sm-inline-block":"",children:"Connect"})]})})}),gO=function(e){var t=e.children,n=Object(O.n)().address,a=Object(O.p)().isLoggedIn,i=$t(),r=Bt(),s=Object(v.a)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.forEach((function(e){var t=e.message,n=e.locations,i=e.path,r=e.extensions;"FORBIDDEN"===(null===r||void 0===r?void 0:r.code)&&a&&(console.log("Apollo query 403. Logging out."),Ah()),console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(i))})),n&&console.log("[Network error]: ".concat(n))})),c=Object(x.a)(function(){var e=Object(j.a)(h.a.mark((function e(t,a){var s,c,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.headers,c={},e.prev=2,e.next=5,k.c.maiarId.getAccessToken({address:n,maiarIdApi:Q,timeout:B});case 5:o=e.sent,c={Authorization:"Bearer ".concat(o.accessToken)},e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:l={};try{i&&r&&(l=Object(b.a)({},Mt,r))}catch(t){}return e.abrupt("return",{headers:Object(m.a)(Object(m.a)(Object(m.a)({},s),c),l)});case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),o=Object(p.from)([s,new p.HttpLink({uri:te.graphQlAddress})]),l=new p.ApolloClient({cache:new p.InMemoryCache,link:c.concat(o),defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"}}});return Object(pt.jsx)(p.ApolloProvider,{client:l,children:t})},yO=function(e){var t=e.children,n=Object(O.p)(),a=n.isLoggedIn,i=n.loginMethod,r=n.tokenLogin,s=Object(O.n)().address;return Object(pt.jsx)(k.a,{loggedIn:a,loginMethod:i,userAddress:s,tokenLogin:r,maiarIdApi:Q,children:t})},wO=function(){return Object(O.s)({minutes:10,onLogout:function(){return Ah()}}),null},TO=function(e){var t=e.MockedApolloApp,n=e.MockedSingleTabApp,a=null!==t&&void 0!==t?t:gO,i=null!==n&&void 0!==n?n:Nv,r=Rr();return void 0!==r?Object(pt.jsx)(cp,{children:Object(pt.jsx)(O.a,{environment:I,customNetworkConfig:Object(m.a)(Object(m.a)({},te),{},{walletConnectBridgeAddresses:[r]}),children:Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(O.b.SignTransactionsModals,{}),Object(pt.jsx)(i,{children:Object(pt.jsx)(yO,{children:Object(pt.jsxs)(a,{children:[Object(pt.jsx)(wO,{}),Object(pt.jsx)(Qx,{children:Object(pt.jsxs)(y.d,{children:[Sh.map((function(e,t){return Object(pt.jsx)(y.b,{path:e.path,element:Object(pt.jsx)(e.Component,{})},e.path+t)})),Object(pt.jsx)(y.b,{path:"*",element:Object(pt.jsx)(xv,{})})]})})]})})})]})})}):null},NO=function(){return Object(pt.jsx)(g.a,{store:Ci,children:Object(pt.jsx)(w.a,{basename:"",children:Object(pt.jsx)(TO,{})})})};l.a({dsn:"https://f76ec5319e6b4a99bbadc1775f9a2451@o1018925.ingest.sentry.io/5984749",enabled:Boolean(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CACHE_BUST:"53a081f0",REACT_APP_SHARE_PREFIX:"",REACT_APP_THEME:"light"}).REACT_APP_SENTRY_RELEASE),release:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CACHE_BUST:"53a081f0",REACT_APP_SHARE_PREFIX:"",REACT_APP_THEME:"light"}).REACT_APP_SENTRY_RELEASE,tracesSampleRate:.5});var SO=Object(pt.jsx)(NO,{});u.a.render(SO,document.getElementById("root"))},159:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n(19),i=function(e){var t=e.receiver,n=e.data,i=function(e){return e.includes("MultiESDTNFTTransfer")?1:e.includes("ESDTNFTTransfer")?4:-1}(n),r=void 0;try{var s=n.split("@");r=new a.Address(i>-1?s[i]:t)}catch(c){}return r},r=function(e){var t=[];return e.forEach((function(e){var n=e.getData().toString(),a=e.getReceiver().toString(),r=i({receiver:a,data:n});r&&t.push(r)})),t},s=function(t){var n=e.from(t.data,"base64").toString(),a=t.receiver;return i({receiver:a,data:n})}}).call(this,n(26).Buffer)},180:function(e){e.exports=JSON.parse('{"id":1,"created_at":"2022-02-16T15:59:44.000Z","updated_at":"2022-02-16T15:59:44.000Z","projects":[{"__component":"structure.section-project","id":9,"title":"BHNetwork","description":"BHero Launchpad and The Internet of Freelancers marketplace platform, under the governance of the same token, BHAT.","status":"charging","token_identifier":"BHAT-c1fde3","body_status":null,"token_ticker":"BHAT","body_description":"Preparing BHAT distribution...","hero_image":{"id":13,"path":"/Metabonding/BHNetworkBG.jpg","path_2x":null,"alt":null},"hero_icon":{"id":14,"path":"/Metabonding/BHNetwork.svg","path_2x":null,"alt":null},"hero_social":[{"id":32,"title":"Website","icon":"website","link":"https://bh.network/"},{"id":33,"title":"Twitter","icon":"twitter","link":"https://twitter.com/BlackHatNetwork"},{"id":34,"title":"Litepaper","icon":"whitepaper","link":"https://bh.network/litepaper.pdf"}],"body_image":null,"body_button":null,"body_details":null,"buy_links":[]},{"__component":"structure.section-project","id":1,"title":"Aerovek","description":"Aerovek aviation is a decentralized social economic platform that is making private aviation accessible to anyone.","status":"live","token_identifier":"AERO-458bbf","body_status":null,"token_ticker":null,"body_description":"AERO distribution is live!","hero_image":{"id":1,"path":"/Metabonding/AerovekBG.jpg","path_2x":null,"alt":null},"hero_icon":{"id":4,"path":"/Metabonding/Aerovek.svg","path_2x":null,"alt":null},"hero_social":[{"id":16,"title":"Website","icon":"website","link":"https://www.aerovek.io/"},{"id":17,"title":"Twitter","icon":"twitter","link":"https://twitter.com/AeroFoundation"},{"id":18,"title":"Whitepaper","icon":"whitepaper","link":"https://www.aerovek.com/summary"}],"body_image":null,"body_button":null,"body_details":{"id":6,"title":null,"description":null,"subtitle":null,"btn_text":"More details","btn_alt_text":null,"btn_link":null},"buy_links":[]},{"__component":"structure.section-project","id":5,"title":"ZoidPay","description":"A crypto liquidity platform enabling instant card issuance for purchases from any merchant at the lowest fees.","status":"live","token_identifier":"ZPAY-247875","body_status":null,"token_ticker":null,"body_description":"ZPAY distribution is live!","hero_image":{"id":3,"path":"/Metabonding/ZoidPayBG.jpg","path_2x":null,"alt":null},"hero_icon":{"id":6,"path":"/Metabonding/ZoidPay.svg","path_2x":null,"alt":null},"hero_social":[{"id":13,"title":"Website","icon":"website","link":"https://zoidpay.com/"},{"id":14,"title":"Twitter","icon":"twitter","link":"https://twitter.com/zoidpay"},{"id":22,"title":"Whitepaper","icon":"whitepaper","link":"https://drive.google.com/file/d/1ZRwyAikfe22v9treyjeJoKi83W5U0y1j/view"}],"body_image":null,"body_button":null,"body_details":{"id":5,"title":null,"description":null,"subtitle":null,"btn_text":"More details","btn_alt_text":null,"btn_link":null},"buy_links":[{"id":1,"name":"Transak","link":"https://global.transak.com/?apiKey=09345599-5690-4f80-8c9d-9a6b84efe0aa&defaultCryptoCurrency=ZPAY"}]},{"__component":"structure.section-project","id":4,"title":"Effort Economy","description":"Building an economy that will allow as many earning opportunities across Gaming, DeFi, NFTs and many more for EVERYONE","status":"live","token_identifier":"EFFORT-a13513","body_status":null,"token_ticker":null,"body_description":"EFFORT distribution is live!","hero_image":{"id":2,"path":"/Metabonding/EffortEconomyBG.jpg","path_2x":null,"alt":null},"hero_icon":{"id":5,"path":"/Metabonding/EffortEconomy.svg","path_2x":null,"alt":null},"hero_social":[{"id":10,"title":"Website","icon":"website","link":"https://efforteconomy.io/"},{"id":11,"title":"Twitter","icon":"twitter","link":"https://twitter.com/EffortEconomy"},{"id":12,"title":"Whitepaper","icon":"whitepaper","link":"https://drive.google.com/file/d/1VABWOjn58WHufp81SWnmBNuCuUrS1gxE"}],"body_image":null,"body_button":null,"body_details":{"id":4,"title":null,"description":null,"subtitle":null,"btn_text":"More details","btn_alt_text":null,"btn_link":null},"buy_links":[]},{"__component":"structure.section-project","id":8,"title":"Isengard","description":"Isengard is one of the pioneers of the Elrond NFT Universe, empowering the users through Decentralization.","status":"live","token_identifier":"ISET-84e55e","body_status":null,"token_ticker":null,"body_description":"ISET distribution is live!","hero_image":{"id":11,"path":"/Metabonding/IsengardBG.jpg","path_2x":null,"alt":null},"hero_icon":{"id":12,"path":"/Metabonding/Isengard.svg","path_2x":null,"alt":""},"hero_social":[{"id":29,"title":"Website","icon":"website","link":"https://isengard.market/home"},{"id":30,"title":"Twitter","icon":"twitter","link":"https://twitter.com/IsengardMarket"},{"id":31,"title":"Whitepaper","icon":"whitepaper","link":"https://isengard.market/assets/whitepaper.pdf"}],"body_image":null,"body_button":null,"body_details":null,"buy_links":[]}]}')},428:function(e,t,n){"use strict";t.a={ESDTTransfer:"ESDT transfer",ESDTNFTTransfer:"NFT transfer",MultiESDTNFTTransfer:"ESDT/NFT transfer",wrapEgld:"Wrap EGLD",claimLockedAssets:"Claim locked MEX"}},599:function(e,t,n){"use strict";(function(e){t.a=function(t){if(!t)return!0;var n=!1;return t.forEach((function(t){if(t.data){var a=e.from(t.data,"base64").toString().split("@");if(Boolean(a.find((function(e){return"6f6b"===e}))))return void(n=!0)}})),n}}).call(this,n(26).Buffer)},673:function(e,t,n){"use strict";(function(e){n(1);var a=n(428),i=n(112),r=n(0),s=function(t){var n=i.a[t.status];if(void 0!==t.data){var r=e.from(t.data,"base64").toString();if(r){var s=r.split("@")[0];Object.keys(a.a).includes(s)&&(n=a.a[s])}}return n};t.a=function(e){var t=e.tx,n=function(){return Object(r.jsx)(r.Fragment,{})};switch(t.status.toLowerCase()){case i.a.notExecuted.toLowerCase():case i.a.fail.toLowerCase():n=function(){return Object(r.jsx)("span",{className:"badge badge-pill badge-danger text-black px-3 py-2",children:s(t)})};break;case i.a.success.toLowerCase():n=function(){return Object(r.jsx)("span",{className:"badge badge-pill badge-success text-black px-3 py-2",children:s(t)})};break;case i.a.pending.toLowerCase():n=function(){return Object(r.jsx)("span",{className:"badge badge-pill badge-warning text-black px-3 py-2",children:s(t)})};break;default:n=function(){return Object(r.jsx)("span",{className:"badge badge-pill badge-danger text-black px-3 py-2",children:s(t)})}}return Object(r.jsx)("span",{className:"mt-3",children:Object(r.jsx)(n,{})})}}).call(this,n(26).Buffer)},774:function(e,t){},776:function(e,t){},787:function(e,t){},789:function(e,t){},805:function(e,t){},824:function(e,t){},825:function(e,t){},831:function(e,t){},833:function(e,t){},851:function(e,t){},867:function(e,t,n){var a={"./bls.js":489,"./bls_c.js":515};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=867},947:function(e,t){}},[[1130,1,2]]]);